{
  "title": "Send Email if server has upgradable packages",
  "url": "https://n8n.io/workflows/2925-send-email-if-server-has-upgradable-packages/",
  "category": "DevOps",
  "category_url": "https://n8n.io/workflows/categories/devops/?sort=createdAt:desc",
  "author": "Hostinger",
  "publish_date": "Last update 3 months ago",
  "publish_date_absolute": "",
  "content": "",
  "workflow_json": "{\"nodes\":[{\"id\":\"4ca55c6e-cf2e-4239-82a9-88d0a201e761\",\"name\":\"List upgradable packages\",\"type\":\"n8n-nodes-base.ssh\",\"notes\":\"apt list --upgradable\",\"position\":[-280,0],\"parameters\":{\"command\":\"apt list --upgradable\"},\"credentials\":{\"sshPassword\":{\"id\":\"Ps31IKTeseWFlA0g\",\"name\":\"SSH Password account\"}},\"notesInFlow\":true,\"typeVersion\":1,\"alwaysOutputData\":false},{\"id\":\"ae1f0a55-31aa-494b-baa6-822dc606188e\",\"name\":\"Send Email through SMTP\",\"type\":\"n8n-nodes-base.emailSend\",\"position\":[380,0],\"webhookId\":\"8073c571-b36f-4330-a510-ca2ff2924fbf\",\"parameters\":{\"html\":\"=The following packages can be updated on your server:\\n\\n{{ $json.htmlList }}\\n\\nPlease login and perform upgrade.\",\"options\":{},\"subject\":\"Server needs updates\",\"toEmail\":\"change.me@example.com\",\"fromEmail\":\"change.me@example.com\"},\"credentials\":{\"smtp\":{\"id\":\"uiNePdJaDng5a43S\",\"name\":\"SMTP account\"}},\"typeVersion\":2.1},{\"id\":\"e1d76671-d94c-40d5-9364-623db9319f11\",\"name\":\"Run workflow every day\",\"type\":\"n8n-nodes-base.scheduleTrigger\",\"position\":[-540,0],\"parameters\":{\"rule\":{\"interval\":[{}]}},\"typeVersion\":1.2},{\"id\":\"ec4d722a-b88c-42da-971c-28ad5774596d\",\"name\":\"Format as HTML list\",\"type\":\"n8n-nodes-base.code\",\"position\":[-60,0],\"parameters\":{\"jsCode\":\"function formatStdoutAsHtmlList(stdoutData) {\\n\\n    // Split the stdout into lines and map to HTML list items\\n    const htmlListItems = stdoutData.split('\\\\n').map((line) => {\\n        if (line.trim() && line !== \\\"Listing...\\\") { // Optionally skip empty lines or headers\\n            return `<li>${line.trim()}</li>`;\\n        }\\n    }).filter(item => item); // Remove any undefined items due to empty lines or skipped headers\\n\\n    // Wrap the list items in a <ul> tag\\n    const htmlList = `<ul>${htmlListItems.join('')}</ul>`;\\n\\n    // Return the formatted HTML list as part of an object\\n    return { \\\"htmlList\\\": htmlList };\\n}\\n\\nreturn formatStdoutAsHtmlList($input.first().json.stdout);\"},\"typeVersion\":2},{\"id\":\"6f14eb02-c505-4f83-a5bb-68094e763fd9\",\"name\":\"Check if there are updates\",\"type\":\"n8n-nodes-base.if\",\"position\":[140,0],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"db66d892-26fb-406c-a0ac-2e4b8a60310a\",\"operator\":{\"type\":\"string\",\"operation\":\"notEquals\"},\"leftValue\":\"={{ $json.htmlList }}\",\"rightValue\":\"<ul></ul>\"}]}},\"typeVersion\":2.2},{\"id\":\"3924c696-5b0e-4ae2-b2e2-435fed344028\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-740,-180],\"parameters\":{\"width\":300,\"content\":\"## VPS upgrade notify \\nThis workflow will everyday check if server has upgradable packages and inform you by email if there is.\"},\"typeVersion\":1},{\"id\":\"bb8ade2a-4ffe-4c79-91eb-55af568eb1b1\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[380,-180],\"parameters\":{\"width\":300,\"content\":\"## Update email addresses\\nUpdate From and To email addresses in this node to receive notifications\"},\"typeVersion\":1}],\"connections\":{\"Format as HTML list\":{\"main\":[[{\"node\":\"Check if there are updates\",\"type\":\"main\",\"index\":0}]]},\"Run workflow every day\":{\"main\":[[{\"node\":\"List upgradable packages\",\"type\":\"main\",\"index\":0}]]},\"Send Email through SMTP\":{\"main\":[[]]},\"List upgradable packages\":{\"main\":[[{\"node\":\"Format as HTML list\",\"type\":\"main\",\"index\":0}]]},\"Check if there are updates\":{\"main\":[[{\"node\":\"Send Email through SMTP\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "This workflow automates the routine check for upgradable packages on your Ubuntu server, ensuring you stay updated with the latest software patches and security improvements. By running a daily script, it efficiently monitors any available package upgrades and promptly notifies you via email, saving you time and enhancing your server’s security.\n\nHow It Works:\n\n  * **Daily Monitoring** : The workflow is configured to execute a script daily that connects to your Ubuntu server and checks for any upgradable packages.\n  * **Email Notification** : If any upgradable packages are detected during the check, the workflow triggers an alert mechanism that automatically sends you a notification email detailing the available updates.\n\n\n\nSet Up Steps:\n\n  * **SSH Credentials** : Provide the SSH login credentials for your Ubuntu server. This will allow the workflow to securely connect and perform checks for software updates.\n  * **SMTP Credentials** : Provide SMTP login details for your email account. These credentials are used to configure the email notifications system, enabling it to send alerts about the upgradable packages.\n\n\n\nBenefits:\n\n  * **Timeliness** : Receive prompt updates on critical software upgrades to maintain the optimal performance and security of your server.\n  * **Automation** : Reduces the need for manual checks, allowing you to focus on other critical tasks with peace of mind.\n  * **Customizable** : Easily adjust the checking frequency or update the notification settings according to your preferences.\n\n\n",
  "readme_html": "<!--[--><div data-v-859c7806=\"\"><p>This workflow automates the routine check for upgradable packages on your Ubuntu server, ensuring you stay updated with the latest software patches and security improvements. By running a daily script, it efficiently monitors any available package upgrades and promptly notifies you via email, saving you time and enhancing your server’s security.</p>\n<p>How It Works:</p>\n<ul>\n<li><strong>Daily Monitoring</strong>: The workflow is configured to execute a script daily that connects to your Ubuntu server and checks for any upgradable packages.</li>\n<li><strong>Email Notification</strong>: If any upgradable packages are detected during the check, the workflow triggers an alert mechanism that automatically sends you a notification email detailing the available updates.</li>\n</ul>\n<p>Set Up Steps:</p>\n<ul>\n<li><strong>SSH Credentials</strong>: Provide the SSH login credentials for your Ubuntu server. This will allow the workflow to securely connect and perform checks for software updates.</li>\n<li><strong>SMTP Credentials</strong>: Provide SMTP login details for your email account. These credentials are used to configure the email notifications system, enabling it to send alerts about the upgradable packages.</li>\n</ul>\n<p>Benefits:</p>\n<ul>\n<li><strong>Timeliness</strong>: Receive prompt updates on critical software upgrades to maintain the optimal performance and security of your server.</li>\n<li><strong>Automation</strong>: Reduces the need for manual checks, allowing you to focus on other critical tasks with peace of mind.</li>\n<li><strong>Customizable</strong>: Easily adjust the checking frequency or update the notification settings according to your preferences.</li>\n</ul>\n</div><!--]-->"
}