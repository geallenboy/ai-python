{
  "title": "ETL pipeline for text processing",
  "url": "https://n8n.io/workflows/1045-etl-pipeline-for-text-processing/",
  "category": "Engineering",
  "category_url": "https://n8n.io/workflows/categories/engineering/",
  "author": "Lorena",
  "publish_date": "Last update 9 months ago",
  "publish_date_absolute": "2024-08-06",
  "content": "",
  "workflow_json": "{\"id\":\"6\",\"name\":\"ETL pipeline\",\"nodes\":[{\"name\":\"Twitter\",\"type\":\"n8n-nodes-base.twitter\",\"position\":[300,300],\"parameters\":{\"limit\":3,\"operation\":\"search\",\"searchText\":\"=#OnThisDay\",\"additionalFields\":{}},\"credentials\":{\"twitterOAuth1Api\":\"twitter_api\"},\"typeVersion\":1},{\"name\":\"Postgres\",\"type\":\"n8n-nodes-base.postgres\",\"position\":[1100,300],\"parameters\":{\"table\":\"tweets\",\"columns\":\"text, score, magnitude\",\"returnFields\":\"=*\"},\"credentials\":{\"postgres\":\"postgres\"},\"typeVersion\":1},{\"name\":\"MongoDB\",\"type\":\"n8n-nodes-base.mongoDb\",\"position\":[500,300],\"parameters\":{\"fields\":\"text\",\"options\":{},\"operation\":\"insert\",\"collection\":\"tweets\"},\"credentials\":{\"mongoDb\":\"mongodb\"},\"typeVersion\":1},{\"name\":\"Slack\",\"type\":\"n8n-nodes-base.slack\",\"position\":[1500,200],\"parameters\":{\"text\":\"=ğŸ¦ NEW TWEET with sentiment score {{$json[\\\"score\\\"]}} and magnitude {{$json[\\\"magnitude\\\"]}} â¬‡ï¸\\n{{$json[\\\"text\\\"]}}\",\"channel\":\"tweets\",\"attachments\":[],\"otherOptions\":{}},\"credentials\":{\"slackApi\":\"slack\"},\"typeVersion\":1},{\"name\":\"IF\",\"type\":\"n8n-nodes-base.if\",\"position\":[1300,300],\"parameters\":{\"conditions\":{\"number\":[{\"value1\":\"={{$json[\\\"score\\\"]}}\",\"operation\":\"larger\"}]}},\"typeVersion\":1},{\"name\":\"NoOp\",\"type\":\"n8n-nodes-base.noOp\",\"position\":[1500,400],\"parameters\":{},\"typeVersion\":1},{\"name\":\"Google Cloud Natural Language\",\"type\":\"n8n-nodes-base.googleCloudNaturalLanguage\",\"position\":[700,300],\"parameters\":{\"content\":\"={{$node[\\\"MongoDB\\\"].json[\\\"text\\\"]}}\",\"options\":{}},\"credentials\":{\"googleCloudNaturalLanguageOAuth2Api\":\"google_nlp\"},\"typeVersion\":1},{\"name\":\"Set\",\"type\":\"n8n-nodes-base.set\",\"position\":[900,300],\"parameters\":{\"values\":{\"number\":[{\"name\":\"score\",\"value\":\"={{$json[\\\"documentSentiment\\\"][\\\"score\\\"]}}\"},{\"name\":\"magnitude\",\"value\":\"={{$json[\\\"documentSentiment\\\"][\\\"magnitude\\\"]}}\"}],\"string\":[{\"name\":\"text\",\"value\":\"={{$node[\\\"Twitter\\\"].json[\\\"text\\\"]}}\"}]},\"options\":{}},\"typeVersion\":1},{\"name\":\"Cron\",\"type\":\"n8n-nodes-base.cron\",\"position\":[100,300],\"parameters\":{\"triggerTimes\":{\"item\":[{\"hour\":6}]}},\"typeVersion\":1}],\"active\":false,\"settings\":{},\"connections\":{\"IF\":{\"main\":[[{\"node\":\"Slack\",\"type\":\"main\",\"index\":0}],[{\"node\":\"NoOp\",\"type\":\"main\",\"index\":0}]]},\"Set\":{\"main\":[[{\"node\":\"Postgres\",\"type\":\"main\",\"index\":0}]]},\"Cron\":{\"main\":[[{\"node\":\"Twitter\",\"type\":\"main\",\"index\":0}]]},\"MongoDB\":{\"main\":[[{\"node\":\"Google Cloud Natural Language\",\"type\":\"main\",\"index\":0}]]},\"Twitter\":{\"main\":[[{\"node\":\"MongoDB\",\"type\":\"main\",\"index\":0}]]},\"Postgres\":{\"main\":[[{\"node\":\"IF\",\"type\":\"main\",\"index\":0}]]},\"Google Cloud Natural Language\":{\"main\":[[{\"node\":\"Set\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "This workflow allows you to collect tweets, store them in MongoDB, analyse their sentiment, insert them into a Postgres database, and post positive tweets in a Slack channel.\n\n**Cron node:** Schedule the workflow to run every day\n\n**Twitter node** : Collect tweets\n\n**MongoDB node:** Insert the collected tweets in MongoDB\n\n**Google Cloud Natural Language node:** Analyse the sentiment of the collected tweets\n\n**Set node:** Extract the sentiment score and magnitude\n\n**Postgres node:** Insert the tweets and their sentiment score and magnitude in a Posgres database\n\n**IF node:** Filter tweets with positive and negative sentiment scores\n\n**Slack node:** Post tweets with a positive sentiment score in a Slack channel\n\n**NoOp node:** Ignore tweets with a negative sentiment score\n",
  "readme_html": "<!--[--><div data-v-50766329=\"\"><p>This workflow allows you to collect tweets, store them in MongoDB, analyse their sentiment, insert them into a Postgres database, and post positive tweets in a Slack channel.</p>\n<p></p>\n<p><strong>Cron node:</strong> Schedule the workflow to run every day</p>\n<p><strong>Twitter node</strong>: Collect tweets</p>\n<p><strong>MongoDB node:</strong> Insert the collected tweets in MongoDB</p>\n<p><strong>Google Cloud Natural Language node:</strong> Analyse the sentiment of the collected tweets</p>\n<p><strong>Set node:</strong> Extract the sentiment score and magnitude</p>\n<p><strong>Postgres node:</strong> Insert the tweets and their sentiment score and magnitude in a Posgres database</p>\n<p><strong>IF node:</strong> Filter tweets with positive and negative sentiment scores</p>\n<p><strong>Slack node:</strong> Post tweets with a positive sentiment score in a Slack channel</p>\n<p><strong>NoOp node:</strong> Ignore tweets with a negative sentiment score</p>\n</div><!--]-->",
  "readme_zh": "è¯¥å·¥ä½œæµç¨‹å¯è®©æ‚¨æ”¶é›†æ¨æ–‡ã€å°†å…¶å­˜å‚¨äºMongoDBæ•°æ®åº“ã€è¿›è¡Œæƒ…æ„Ÿåˆ†æã€æ’å…¥Postgresæ•°æ®åº“ï¼Œå¹¶å°†ç§¯ææ¨æ–‡å‘å¸ƒè‡³Slacké¢‘é“ã€‚\n\n**å®šæ—¶ä»»åŠ¡èŠ‚ç‚¹**ï¼šè®¾ç½®æ¯æ—¥è‡ªåŠ¨è¿è¡Œå·¥ä½œæµ  \n**æ¨ç‰¹èŠ‚ç‚¹**ï¼šé‡‡é›†æ¨æ–‡æ•°æ®  \n**MongoDBèŠ‚ç‚¹**ï¼šå°†é‡‡é›†çš„æ¨æ–‡å­˜å…¥MongoDB  \n**è°·æ­Œäº‘è‡ªç„¶è¯­è¨€èŠ‚ç‚¹**ï¼šå¯¹æ¨æ–‡è¿›è¡Œæƒ…æ„Ÿåˆ†æ  \n**èµ‹å€¼èŠ‚ç‚¹**ï¼šæå–æƒ…æ„Ÿå¾—åˆ†ä¸å¼ºåº¦å€¼  \n**PostgresèŠ‚ç‚¹**ï¼šå°†æ¨æ–‡åŠå…¶æƒ…æ„Ÿå¾—åˆ†ä¸å¼ºåº¦å­˜å…¥Postgresæ•°æ®åº“  \n**æ¡ä»¶åˆ¤æ–­èŠ‚ç‚¹**ï¼šç­›é€‰å…·æœ‰ç§¯æ/æ¶ˆææƒ…æ„Ÿçš„æ¨æ–‡  \n**SlackèŠ‚ç‚¹**ï¼šå°†ç§¯ææ¨æ–‡å‘å¸ƒè‡³Slacké¢‘é“  \n**ç©ºæ“ä½œèŠ‚ç‚¹**ï¼šå¿½ç•¥æ¶ˆææƒ…æ„Ÿæ¨æ–‡",
  "title_zh": "æ–‡æœ¬å¤„ç†çš„ETLæµæ°´çº¿",
  "publish_date_zh": "æœ€åæ›´æ–°äº9ä¸ªæœˆå‰",
  "workflow_json_zh": "{\"id\":\"6\",\"name\":\"ETL pipeline\",\"nodes\":[{\"name\":\"Twitter\",\"type\":\"n8n-nodes-base.twitter\",\"position\":[300,300],\"parameters\":{\"limit\":3,\"operation\":\"search\",\"searchText\":\"=#OnThisDay\",\"additionalFields\":{}},\"credentials\":{\"twitterOAuth1Api\":\"twitter_api\"},\"typeVersion\":1},{\"name\":\"Postgres\",\"type\":\"n8n-nodes-base.postgres\",\"position\":[1100,300],\"parameters\":{\"table\":\"tweets\",\"columns\":\"text, score, magnitude\",\"returnFields\":\"=*\"},\"credentials\":{\"postgres\":\"postgres\"},\"typeVersion\":1},{\"name\":\"MongoDB\",\"type\":\"n8n-nodes-base.mongoDb\",\"position\":[500,300],\"parameters\":{\"fields\":\"text\",\"options\":{},\"operation\":\"insert\",\"collection\":\"tweets\"},\"credentials\":{\"mongoDb\":\"mongodb\"},\"typeVersion\":1},{\"name\":\"Slack\",\"type\":\"n8n-nodes-base.slack\",\"position\":[1500,200],\"parameters\":{\"text\":\"=ğŸ¦ NEW TWEET with sentiment score {{$json[\\\"score\\\"]}} and magnitude {{$json[\\\"magnitude\\\"]}} â¬‡ï¸\\n{{$json[\\\"text\\\"]}}\",\"channel\":\"tweets\",\"attachments\":[],\"otherOptions\":{}},\"credentials\":{\"slackApi\":\"slack\"},\"typeVersion\":1},{\"name\":\"IF\",\"type\":\"n8n-nodes-base.if\",\"position\":[1300,300],\"parameters\":{\"conditions\":{\"number\":[{\"value1\":\"={{$json[\\\"score\\\"]}}\",\"operation\":\"larger\"}]}},\"typeVersion\":1},{\"name\":\"NoOp\",\"type\":\"n8n-nodes-base.noOp\",\"position\":[1500,400],\"parameters\":{},\"typeVersion\":1},{\"name\":\"Google Cloud Natural Language\",\"type\":\"n8n-nodes-base.googleCloudNaturalLanguage\",\"position\":[700,300],\"parameters\":{\"content\":\"={{$node[\\\"MongoDB\\\"].json[\\\"text\\\"]}}\",\"options\":{}},\"credentials\":{\"googleCloudNaturalLanguageOAuth2Api\":\"google_nlp\"},\"typeVersion\":1},{\"name\":\"Set\",\"type\":\"n8n-nodes-base.set\",\"position\":[900,300],\"parameters\":{\"values\":{\"number\":[{\"name\":\"score\",\"value\":\"={{$json[\\\"documentSentiment\\\"][\\\"score\\\"]}}\"},{\"name\":\"magnitude\",\"value\":\"={{$json[\\\"documentSentiment\\\"][\\\"magnitude\\\"]}}\"}],\"string\":[{\"name\":\"text\",\"value\":\"={{$node[\\\"Twitter\\\"].json[\\\"text\\\"]}}\"}]},\"options\":{}},\"typeVersion\":1},{\"name\":\"Cron\",\"type\":\"n8n-nodes-base.cron\",\"position\":[100,300],\"parameters\":{\"triggerTimes\":{\"item\":[{\"hour\":6}]}},\"typeVersion\":1}],\"active\":false,\"settings\":{},\"connections\":{\"IF\":{\"main\":[[{\"node\":\"Slack\",\"type\":\"main\",\"index\":0}],[{\"node\":\"NoOp\",\"type\":\"main\",\"index\":0}]]},\"Set\":{\"main\":[[{\"node\":\"Postgres\",\"type\":\"main\",\"index\":0}]]},\"Cron\":{\"main\":[[{\"node\":\"Twitter\",\"type\":\"main\",\"index\":0}]]},\"MongoDB\":{\"main\":[[{\"node\":\"Google Cloud Natural Language\",\"type\":\"main\",\"index\":0}]]},\"Twitter\":{\"main\":[[{\"node\":\"MongoDB\",\"type\":\"main\",\"index\":0}]]},\"Postgres\":{\"main\":[[{\"node\":\"IF\",\"type\":\"main\",\"index\":0}]]},\"Google Cloud Natural Language\":{\"main\":[[{\"node\":\"Set\",\"type\":\"main\",\"index\":0}]]}}}"
}