{
  "title": "Sync Zendesk tickets with subsequent comments to GitHub issues",
  "url": "https://n8n.io/workflows/1832-sync-zendesk-tickets-with-subsequent-comments-to-github-issues/",
  "category": "Engineering",
  "category_url": "https://n8n.io/workflows/categories/engineering/?count=20",
  "author": "n8n Team",
  "publish_date": "Last update 9 months ago",
  "publish_date_absolute": "2024-08-06",
  "content": "",
  "workflow_json": "{\"meta\":{\"instanceId\":\"237600ca44303ce91fa31ee72babcdc8493f55ee2c0e8aa2b78b3b4ce6f70bd9\"},\"nodes\":[{\"id\":\"f0913aa6-4e78-4808-b828-7e9953e71764\",\"name\":\"Get ticket\",\"type\":\"n8n-nodes-base.zendesk\",\"position\":[380,480],\"parameters\":{\"id\":\"={{$node[\\\"On new Zendesk ticket\\\"].json[\\\"body\\\"][\\\"id\\\"]}}\",\"operation\":\"get\"},\"credentials\":{\"zendeskApi\":{\"id\":\"24\",\"name\":\"[UPDATE ME]\"}},\"typeVersion\":1},{\"id\":\"f8774217-bc05-4b02-8632-154654f79d5f\",\"name\":\"IF\",\"type\":\"n8n-nodes-base.if\",\"position\":[780,480],\"parameters\":{\"conditions\":{\"string\":[{\"value1\":\"={{$node[\\\"Determine\\\"].json[\\\"GitHub Issue Number\\\"]}}\",\"operation\":\"isNotEmpty\"}]}},\"typeVersion\":1},{\"id\":\"6ae7e40b-b75c-41e2-9ba7-bb299f12911a\",\"name\":\"Update ticket\",\"type\":\"n8n-nodes-base.zendesk\",\"notes\":\"Update the Zendesk ticket by adding the Jira issue key to the \\\"Jira Issue Key\\\" field.\",\"position\":[1180,580],\"parameters\":{\"id\":\"={{$node[\\\"On new Zendesk ticket\\\"].json[\\\"body\\\"][\\\"id\\\"]}}\",\"operation\":\"update\",\"updateFields\":{\"customFieldsUi\":{\"customFieldsValues\":[{\"id\":6721726848029,\"value\":\"={{$node[\\\"Create issue\\\"].json[\\\"number\\\"]}}\"}]}}},\"credentials\":{\"zendeskApi\":{\"id\":\"24\",\"name\":\"[UPDATE ME]\"}},\"notesInFlow\":true,\"typeVersion\":1},{\"id\":\"7959986c-cfbf-4ba2-a968-95b62d2aa819\",\"name\":\"Determine\",\"type\":\"n8n-nodes-base.function\",\"notes\":\"if issue was created already in Jira\",\"position\":[580,480],\"parameters\":{\"functionCode\":\"/* configure here =========================================================== */\\n/*  Zendesk field ID which represents the \\\"GitHub Issue Number\\\" field.\\n*/\\nconst ISSUE_KEY_FIELD_ID = 6721726848029;\\n\\n/* ========================================================================== */\\nnew_items = [];\\n\\nfor (item of $items(\\\"Get ticket\\\")) {\\n    \\n    // instantiate a new variable for status\\n    var custom_fields = item.json[\\\"custom_fields\\\"];\\n    var github_issue_number = \\\"\\\";\\n    for (var i = 0; i < custom_fields.length; i++) {\\n        if (custom_fields[i].id == ISSUE_KEY_FIELD_ID) {\\n            github_issue_number = custom_fields[i].value;\\n            break;\\n        }\\n    }\\n\\n    // push the new item to the new_items array\\n    new_items.push({\\n        \\\"GitHub Issue Number\\\": github_issue_number\\n    });\\n}\\n\\nreturn new_items;\"},\"notesInFlow\":true,\"typeVersion\":1},{\"id\":\"a1ca21d3-958f-498c-a896-05d4ecbc286d\",\"name\":\"Create issue\",\"type\":\"n8n-nodes-base.github\",\"position\":[980,580],\"parameters\":{\"owner\":\"John-n8n\",\"title\":\"={{$node[\\\"Get ticket\\\"].json[\\\"subject\\\"]}}\",\"labels\":[],\"assignees\":[],\"repository\":\"DemoRepo\"},\"credentials\":{\"githubApi\":{\"id\":\"20\",\"name\":\"[UPDATE ME]\"}},\"typeVersion\":1},{\"id\":\"1ad6f536-2cdb-4ecc-85b4-2e960fb84498\",\"name\":\"Create comment on existing issue\",\"type\":\"n8n-nodes-base.github\",\"position\":[980,380],\"parameters\":{\"body\":\"={{$node[\\\"On new Zendesk ticket\\\"].json[\\\"body\\\"][\\\"comment\\\"]}}\",\"owner\":\"John-n8n\",\"operation\":\"createComment\",\"repository\":\"DemoRepo\",\"issueNumber\":\"={{$node[\\\"Determine\\\"].json[\\\"GitHub Issue Number\\\"]}}\"},\"credentials\":{\"githubApi\":{\"id\":\"20\",\"name\":\"[UPDATE ME]\"}},\"typeVersion\":1},{\"id\":\"73e8c380-63de-4e5a-8e57-a17956174869\",\"name\":\"On new Zendesk ticket\",\"type\":\"n8n-nodes-base.webhook\",\"position\":[180,480],\"webhookId\":\"b4253880-b5e2-4d61-bb2a-b0ea335bee14\",\"parameters\":{\"path\":\"b4253880-b5e2-4d61-bb2a-b0ea335bee14\",\"options\":{},\"httpMethod\":\"POST\"},\"typeVersion\":1}],\"connections\":{\"IF\":{\"main\":[[{\"node\":\"Create comment on existing issue\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Create issue\",\"type\":\"main\",\"index\":0}]]},\"Determine\":{\"main\":[[{\"node\":\"IF\",\"type\":\"main\",\"index\":0}]]},\"Get ticket\":{\"main\":[[{\"node\":\"Determine\",\"type\":\"main\",\"index\":0}]]},\"Create issue\":{\"main\":[[{\"node\":\"Update ticket\",\"type\":\"main\",\"index\":0}]]},\"On new Zendesk ticket\":{\"main\":[[{\"node\":\"Get ticket\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "This workflow creates a GitHub issue when a new ticket is created in Zendesk. Subsequent comments on the ticket in Zendesk are added as comments to the issue in GitHub.\n\n## Prerequisites\n\n  * Zendesk account and [Zendesk credentials](https://docs.n8n.io/integrations/builtin/credentials/zendesk/).\n  * GitHub account and [GitHub credentials](https://docs.n8n.io/integrations/builtin/credentials/github/).\n  * [GitHub repository](https://docs.github.com/en/github/creating-cloning-and-archiving-repositories/creating-a-repository-on-github) to create issues in.\n\n\n\n## How it works\n\n  1. The workflow listens for new tickets in Zendesk.\n  2. When a new ticket is created, the workflow creates a new issue in GitHub.\n  3. The GitHub issue number is then saved in one of the ticket's fields (in [setup](notion://www.notion.so/n8n/a1b8c2bc7d2b4aa3b90d50fa80b766d1?v=a3106a73c9fc41b88630cc9f091cf063&p=3c09e8cb58ea46658e9306950e9c01cf&pm=s#setup) we call this \"GitHub Issue Number\").\n  4. The next time a comment is added to the ticket, the workflow retrieves the GitHub issue number from the ticket's field and adds the comment to the issue in GitHub.\n\n\n\n## Setup\n\nThis workflow requires that you set up a webhook in Zendesk. To do so, follow the steps below:\n\n  1. In the workflow, open the `On new Zendesk ticket` node and copy the webhook URL.\n\n  2. In Zendesk, navigate to Admin Center > Apps and integrations > Webhooks > Actions > Create Webhook.\n\n  3. Add all the required details which can be retrieved from the `On new Zendesk ticket` node. The webhook URL gets added to the “Endpoint URL” field, and the “Request method” should match what is shown in n8n.\n\n  4. Save the webhook.\n\n  5. In Zendesk, navigate to Admin Center > Objects and rules > Business rules > Triggers > Add trigger.\n\n  6. Give trigger a name such as “New tickets”.\n\n  7. Under “Conditions” in “Meet ALL of the following conditions”, add “Status is New”.\n\n  8. Under “Actions”, select “Notify active webhook” and select the webhook you created previously.\n\n  9. In the JSON body, add the following:\n         \n         {\n         \t\"id\": \"{{ticket.id}}\",\n         \t\"comment\": \"{{ticket.latest_comment_html}}\"\n         }\n         \n\n  10. Save the Zendesk trigger.\n\n\n\n\nYou will also need to set up a field in Zendesk to store the GitHub issue number. To do so, follow the steps below:\n\n  1. In Zendesk, navigate to Admin Center > Objects and rules > Tickets > Fields > Add field.\n  2. Use the number field option and give the field a name such as “GitHub Issue Number”.\n  3. Save the field.\n  4. In n8n, open the `Update ticket` node and select the field you created in Zendesk.\n\n\n",
  "readme_html": "<!--[--><div data-v-006f9244=\"\"><p>This workflow creates a GitHub issue when a new ticket is created in Zendesk. Subsequent comments on the ticket in Zendesk are added as comments to the issue in GitHub.</p>\n<h2>Prerequisites</h2>\n<ul>\n<li>Zendesk account and <a href=\"https://docs.n8n.io/integrations/builtin/credentials/zendesk/\" rel=\"ugc nofollow\" target=\"_blank\">Zendesk credentials</a>.</li>\n<li>GitHub account and <a href=\"https://docs.n8n.io/integrations/builtin/credentials/github/\" rel=\"ugc nofollow\" target=\"_blank\">GitHub credentials</a>.</li>\n<li><a href=\"https://docs.github.com/en/github/creating-cloning-and-archiving-repositories/creating-a-repository-on-github\" rel=\"ugc nofollow\" target=\"_blank\">GitHub repository</a> to create issues in.</li>\n</ul>\n<h2>How it works</h2>\n<ol>\n<li>The workflow listens for new tickets in Zendesk.</li>\n<li>When a new ticket is created, the workflow creates a new issue in GitHub.</li>\n<li>The GitHub issue number is then saved in one of the ticket's fields (in <a href=\"notion://www.notion.so/n8n/a1b8c2bc7d2b4aa3b90d50fa80b766d1?v=a3106a73c9fc41b88630cc9f091cf063&amp;p=3c09e8cb58ea46658e9306950e9c01cf&amp;pm=s#setup\" rel=\"ugc nofollow\">setup</a> we call this \"GitHub Issue Number\").</li>\n<li>The next time a comment is added to the ticket, the workflow retrieves the GitHub issue number from the ticket's field and adds the comment to the issue in GitHub.</li>\n</ol>\n<h2>Setup</h2>\n<p>This workflow requires that you set up a webhook in Zendesk. To do so, follow the steps below:</p>\n<ol>\n<li>\n<p>In the workflow, open the <code>On new Zendesk ticket</code> node and copy the webhook URL.</p>\n</li>\n<li>\n<p>In Zendesk, navigate to Admin Center &gt; Apps and integrations &gt; Webhooks &gt; Actions &gt; Create Webhook.</p>\n</li>\n<li>\n<p>Add all the required details which can be retrieved from the <code>On new Zendesk ticket</code> node. The webhook URL gets added to the “Endpoint URL” field, and the “Request method” should match what is shown in n8n.</p>\n</li>\n<li>\n<p>Save the webhook.</p>\n</li>\n<li>\n<p>In Zendesk, navigate to Admin Center &gt; Objects and rules &gt; Business rules &gt; Triggers &gt; Add trigger.</p>\n</li>\n<li>\n<p>Give trigger a name such as “New tickets”.</p>\n</li>\n<li>\n<p>Under “Conditions” in “Meet ALL of the following conditions”, add “Status is New”.</p>\n</li>\n<li>\n<p>Under “Actions”, select “Notify active webhook” and select the webhook you created previously.</p>\n</li>\n<li>\n<p>In the JSON body, add the following:</p>\n<pre><code>{\n\t\"id\": \"{{ticket.id}}\",\n\t\"comment\": \"{{ticket.latest_comment_html}}\"\n}\n</code></pre>\n</li>\n<li>\n<p>Save the Zendesk trigger.</p>\n</li>\n</ol>\n<p>You will also need to set up a field in Zendesk to store the GitHub issue number. To do so, follow the steps below:</p>\n<ol>\n<li>In Zendesk, navigate to Admin Center &gt; Objects and rules &gt; Tickets &gt; Fields &gt; Add field.</li>\n<li>Use the number field option and give the field a name such as “GitHub Issue Number”.</li>\n<li>Save the field.</li>\n<li>In n8n, open the <code>Update ticket</code> node and select the field you created in Zendesk.</li>\n</ol>\n</div><!--]-->",
  "readme_zh": "该工作流程在Zendesk中创建新工单时，会自动在GitHub上生成对应议题。后续在Zendesk工单中添加的评论，都将同步至GitHub议题的评论区。\n\n## 前置条件\n\n* 需具备Zendesk账户及[Zendesk凭证](https://docs.n8n.io/integrations/builtin/credentials/zendesk/)\n* 需具备GitHub账户及[GitHub凭证](https://docs.n8n.io/integrations/builtin/credentials/github/)\n* 需准备用于创建议题的[GitHub代码库](https://docs.github.com/en/github/creating-cloning-and-archiving-repositories/creating-a-repository-on-github)\n\n## 运行机制\n\n1. 工作流程实时监听Zendesk新工单\n2. 当新工单产生时，自动在GitHub创建对应议题\n3. GitHub议题编号将保存在工单特定字段中（本指南将该字段命名为\"GitHub议题编号\"）\n4. 后续工单新增评论时，系统会从该字段读取GitHub议题编号，并将评论同步至对应议题\n\n## 配置步骤\n\n需在Zendesk中设置网络钩子，具体操作如下：\n\n1. 在工作流程中打开`Zendesk新工单触发`节点，复制网络钩子URL\n2. 登录Zendesk后台：管理中心 > 应用与集成 > 网络钩子 > 动作 > 创建网络钩子\n3. 根据`Zendesk新工单触发`节点信息填写所有必填项（网络钩子URL填入\"终端地址\"，请求方式需与n8n显示一致）\n4. 保存网络钩子配置\n5. 进入Zendesk：管理中心 > 对象与规则 > 业务规则 > 触发器 > 添加触发器\n6. 命名触发器（如\"新建工单\"）\n7. 在\"满足以下所有条件\"处添加条件：\"状态为新建\"\n8. 在\"动作\"中选择\"通知活跃网络钩子\"，并选择刚创建的网络钩子\n9. 在JSON主体中添加：\n```json\n{\n    \"id\": \"{{ticket.id}}\",\n    \"comment\": \"{{ticket.latest_comment_html}}\"\n}\n```\n10. 保存Zendesk触发器\n\n还需在Zendesk中设置存储GitHub议题编号的字段：\n\n1. 进入Zendesk：管理中心 > 对象与规则 > 工单 > 字段 > 添加字段\n2. 选择数字字段类型，命名为\"GitHub议题编号\"\n3. 保存字段设置\n4. 在n8n中打开`更新工单`节点，选择刚创建的Zendesk字段",
  "title_zh": "将Zendesk工单及后续评论同步至GitHub问题",
  "publish_date_zh": "最后更新于9个月前",
  "workflow_json_zh": "{\n  \"meta\": {\n    \"instanceId\": \"237600ca44303ce91fa31ee72babcdc8493f55ee2c0e8aa2b78b3b4ce6f70bd9\"\n  },\n  \"nodes\": [\n    {\n      \"id\": \"f0913aa6-4e78-4808-b828-7e9953e71764\",\n      \"name\": \"Get ticket\",\n      \"type\": \"n8n-nodes-base.zendesk\",\n      \"position\": [\n        380,\n        480\n      ],\n      \"parameters\": {\n        \"id\": \"={{$node[\\\"On new Zendesk ticket\\\"].json[\\\"body\\\"][\\\"id\\\"]}}\",\n        \"operation\": \"get\"\n      },\n      \"credentials\": {\n        \"zendeskApi\": {\n          \"id\": \"24\",\n          \"name\": \"[UPDATE ME]\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"f8774217-bc05-4b02-8632-154654f79d5f\",\n      \"name\": \"IF\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        780,\n        480\n      ],\n      \"parameters\": {\n        \"conditions\": {\n          \"string\": [\n            {\n              \"value1\": \"={{$node[\\\"Determine\\\"].json[\\\"GitHub Issue Number\\\"]}}\",\n              \"operation\": \"isNotEmpty\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"6ae7e40b-b75c-41e2-9ba7-bb299f12911a\",\n      \"name\": \"Update ticket\",\n      \"type\": \"n8n-nodes-base.zendesk\",\n      \"notes\": \"Update the Zendesk ticket by adding the Jira issue key to the \\\"Jira Issue Key\\\" field.\",\n      \"position\": [\n        1180,\n        580\n      ],\n      \"parameters\": {\n        \"id\": \"={{$node[\\\"On new Zendesk ticket\\\"].json[\\\"body\\\"][\\\"id\\\"]}}\",\n        \"operation\": \"update\",\n        \"updateFields\": {\n          \"customFieldsUi\": {\n            \"customFieldsValues\": [\n              {\n                \"id\": 6721726848029,\n                \"value\": \"={{$node[\\\"Create issue\\\"].json[\\\"number\\\"]}}\"\n              }\n            ]\n          }\n        }\n      },\n      \"credentials\": {\n        \"zendeskApi\": {\n          \"id\": \"24\",\n          \"name\": \"[UPDATE ME]\"\n        }\n      },\n      \"notesInFlow\": true,\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"7959986c-cfbf-4ba2-a968-95b62d2aa819\",\n      \"name\": \"Determine\",\n      \"type\": \"n8n-nodes-base.function\",\n      \"notes\": \"if issue was created already in Jira\",\n      \"position\": [\n        580,\n        480\n      ],\n      \"parameters\": {\n        \"functionCode\": \"/* configure here =========================================================== */\\n/*  Zendesk field ID which represents the \\\"GitHub Issue Number\\\" field.\\n*/\\nconst ISSUE_KEY_FIELD_ID = 6721726848029;\\n\\n/* ========================================================================== */\\nnew_items = [];\\n\\nfor (item of $items(\\\"Get ticket\\\")) {\\n    \\n    // instantiate a new variable for status\\n    var custom_fields = item.json[\\\"custom_fields\\\"];\\n    var github_issue_number = \\\"\\\";\\n    for (var i = 0; i < custom_fields.length; i++) {\\n        if (custom_fields[i].id == ISSUE_KEY_FIELD_ID) {\\n            github_issue_number = custom_fields[i].value;\\n            break;\\n        }\\n    }\\n\\n    // push the new item to the new_items array\\n    new_items.push({\\n        \\\"GitHub Issue Number\\\": github_issue_number\\n    });\\n}\\n\\nreturn new_items;\"\n      },\n      \"notesInFlow\": true,\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"a1ca21d3-958f-498c-a896-05d4ecbc286d\",\n      \"name\": \"Create issue\",\n      \"type\": \"n8n-nodes-base.github\",\n      \"position\": [\n        980,\n        580\n      ],\n      \"parameters\": {\n        \"owner\": \"John-n8n\",\n        \"title\": \"={{$node[\\\"Get ticket\\\"].json[\\\"subject\\\"]}}\",\n        \"labels\": [],\n        \"assignees\": [],\n        \"repository\": \"DemoRepo\"\n      },\n      \"credentials\": {\n        \"githubApi\": {\n          \"id\": \"20\",\n          \"name\": \"[UPDATE ME]\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"1ad6f536-2cdb-4ecc-85b4-2e960fb84498\",\n      \"name\": \"Create comment on existing issue\",\n      \"type\": \"n8n-nodes-base.github\",\n      \"position\": [\n        980,\n        380\n      ],\n      \"parameters\": {\n        \"body\": \"={{$node[\\\"On new Zendesk ticket\\\"].json[\\\"body\\\"][\\\"comment\\\"]}}\",\n        \"owner\": \"John-n8n\",\n        \"operation\": \"createComment\",\n        \"repository\": \"DemoRepo\",\n        \"issueNumber\": \"={{$node[\\\"Determine\\\"].json[\\\"GitHub Issue Number\\\"]}}\"\n      },\n      \"credentials\": {\n        \"githubApi\": {\n          \"id\": \"20\",\n          \"name\": \"[UPDATE ME]\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"73e8c380-63de-4e5a-8e57-a17956174869\",\n      \"name\": \"On new Zendesk ticket\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"position\": [\n        180,\n        480\n      ],\n      \"webhookId\": \"b4253880-b5e2-4d61-bb2a-b0ea335bee14\",\n      \"parameters\": {\n        \"path\": \"b4253880-b5e2-4d61-bb2a-b0ea335bee14\",\n        \"options\": {},\n        \"httpMethod\": \"POST\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"connections\": {\n    \"IF\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Create comment on existing issue\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Create issue\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Determine\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"IF\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get ticket\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Determine\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Create issue\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Update ticket\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"On new Zendesk ticket\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get ticket\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}