{
  "title": "Send Email if server has upgradable packages",
  "url": "https://n8n.io/workflows/2925-send-email-if-server-has-upgradable-packages/",
  "category": "SecOps",
  "category_url": "https://n8n.io/workflows/categories/secops/?count=20",
  "author": "Hostinger",
  "publish_date": "Last update 2 months ago",
  "content": "",
  "workflow_json": "{\"nodes\":[{\"id\":\"4ca55c6e-cf2e-4239-82a9-88d0a201e761\",\"name\":\"List upgradable packages\",\"type\":\"n8n-nodes-base.ssh\",\"notes\":\"apt list --upgradable\",\"position\":[-280,0],\"parameters\":{\"command\":\"apt list --upgradable\"},\"credentials\":{\"sshPassword\":{\"id\":\"Ps31IKTeseWFlA0g\",\"name\":\"SSH Password account\"}},\"notesInFlow\":true,\"typeVersion\":1,\"alwaysOutputData\":false},{\"id\":\"ae1f0a55-31aa-494b-baa6-822dc606188e\",\"name\":\"Send Email through SMTP\",\"type\":\"n8n-nodes-base.emailSend\",\"position\":[380,0],\"webhookId\":\"8073c571-b36f-4330-a510-ca2ff2924fbf\",\"parameters\":{\"html\":\"=The following packages can be updated on your server:\\n\\n{{ $json.htmlList }}\\n\\nPlease login and perform upgrade.\",\"options\":{},\"subject\":\"Server needs updates\",\"toEmail\":\"change.me@example.com\",\"fromEmail\":\"change.me@example.com\"},\"credentials\":{\"smtp\":{\"id\":\"uiNePdJaDng5a43S\",\"name\":\"SMTP account\"}},\"typeVersion\":2.1},{\"id\":\"e1d76671-d94c-40d5-9364-623db9319f11\",\"name\":\"Run workflow every day\",\"type\":\"n8n-nodes-base.scheduleTrigger\",\"position\":[-540,0],\"parameters\":{\"rule\":{\"interval\":[{}]}},\"typeVersion\":1.2},{\"id\":\"ec4d722a-b88c-42da-971c-28ad5774596d\",\"name\":\"Format as HTML list\",\"type\":\"n8n-nodes-base.code\",\"position\":[-60,0],\"parameters\":{\"jsCode\":\"function formatStdoutAsHtmlList(stdoutData) {\\n\\n    // Split the stdout into lines and map to HTML list items\\n    const htmlListItems = stdoutData.split('\\\\n').map((line) => {\\n        if (line.trim() && line !== \\\"Listing...\\\") { // Optionally skip empty lines or headers\\n            return `<li>${line.trim()}</li>`;\\n        }\\n    }).filter(item => item); // Remove any undefined items due to empty lines or skipped headers\\n\\n    // Wrap the list items in a <ul> tag\\n    const htmlList = `<ul>${htmlListItems.join('')}</ul>`;\\n\\n    // Return the formatted HTML list as part of an object\\n    return { \\\"htmlList\\\": htmlList };\\n}\\n\\nreturn formatStdoutAsHtmlList($input.first().json.stdout);\"},\"typeVersion\":2},{\"id\":\"6f14eb02-c505-4f83-a5bb-68094e763fd9\",\"name\":\"Check if there are updates\",\"type\":\"n8n-nodes-base.if\",\"position\":[140,0],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"db66d892-26fb-406c-a0ac-2e4b8a60310a\",\"operator\":{\"type\":\"string\",\"operation\":\"notEquals\"},\"leftValue\":\"={{ $json.htmlList }}\",\"rightValue\":\"<ul></ul>\"}]}},\"typeVersion\":2.2},{\"id\":\"3924c696-5b0e-4ae2-b2e2-435fed344028\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-740,-180],\"parameters\":{\"width\":300,\"content\":\"## VPS upgrade notify \\nThis workflow will everyday check if server has upgradable packages and inform you by email if there is.\"},\"typeVersion\":1},{\"id\":\"bb8ade2a-4ffe-4c79-91eb-55af568eb1b1\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[380,-180],\"parameters\":{\"width\":300,\"content\":\"## Update email addresses\\nUpdate From and To email addresses in this node to receive notifications\"},\"typeVersion\":1}],\"connections\":{\"Format as HTML list\":{\"main\":[[{\"node\":\"Check if there are updates\",\"type\":\"main\",\"index\":0}]]},\"Run workflow every day\":{\"main\":[[{\"node\":\"List upgradable packages\",\"type\":\"main\",\"index\":0}]]},\"Send Email through SMTP\":{\"main\":[[]]},\"List upgradable packages\":{\"main\":[[{\"node\":\"Format as HTML list\",\"type\":\"main\",\"index\":0}]]},\"Check if there are updates\":{\"main\":[[{\"node\":\"Send Email through SMTP\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "This workflow automates the routine check for upgradable packages on your Ubuntu server, ensuring you stay updated with the latest software patches and security improvements. By running a daily script, it efficiently monitors any available package upgrades and promptly notifies you via email, saving you time and enhancing your server’s security.\n\nHow It Works:\n\n  * **Daily Monitoring** : The workflow is configured to execute a script daily that connects to your Ubuntu server and checks for any upgradable packages.\n  * **Email Notification** : If any upgradable packages are detected during the check, the workflow triggers an alert mechanism that automatically sends you a notification email detailing the available updates.\n\n\n\nSet Up Steps:\n\n  * **SSH Credentials** : Provide the SSH login credentials for your Ubuntu server. This will allow the workflow to securely connect and perform checks for software updates.\n  * **SMTP Credentials** : Provide SMTP login details for your email account. These credentials are used to configure the email notifications system, enabling it to send alerts about the upgradable packages.\n\n\n\nBenefits:\n\n  * **Timeliness** : Receive prompt updates on critical software upgrades to maintain the optimal performance and security of your server.\n  * **Automation** : Reduces the need for manual checks, allowing you to focus on other critical tasks with peace of mind.\n  * **Customizable** : Easily adjust the checking frequency or update the notification settings according to your preferences.\n\n\n",
  "readme_html": "<!--[--><div data-v-006f9244=\"\"><p>This workflow automates the routine check for upgradable packages on your Ubuntu server, ensuring you stay updated with the latest software patches and security improvements. By running a daily script, it efficiently monitors any available package upgrades and promptly notifies you via email, saving you time and enhancing your server’s security.</p>\n<p>How It Works:</p>\n<ul>\n<li><strong>Daily Monitoring</strong>: The workflow is configured to execute a script daily that connects to your Ubuntu server and checks for any upgradable packages.</li>\n<li><strong>Email Notification</strong>: If any upgradable packages are detected during the check, the workflow triggers an alert mechanism that automatically sends you a notification email detailing the available updates.</li>\n</ul>\n<p>Set Up Steps:</p>\n<ul>\n<li><strong>SSH Credentials</strong>: Provide the SSH login credentials for your Ubuntu server. This will allow the workflow to securely connect and perform checks for software updates.</li>\n<li><strong>SMTP Credentials</strong>: Provide SMTP login details for your email account. These credentials are used to configure the email notifications system, enabling it to send alerts about the upgradable packages.</li>\n</ul>\n<p>Benefits:</p>\n<ul>\n<li><strong>Timeliness</strong>: Receive prompt updates on critical software upgrades to maintain the optimal performance and security of your server.</li>\n<li><strong>Automation</strong>: Reduces the need for manual checks, allowing you to focus on other critical tasks with peace of mind.</li>\n<li><strong>Customizable</strong>: Easily adjust the checking frequency or update the notification settings according to your preferences.</li>\n</ul>\n</div><!--]-->",
  "readme_zh": "该工作流程可自动执行Ubuntu服务器上的例行可升级软件包检查，确保您及时获取最新软件补丁与安全更新。通过每日运行脚本，它能高效监控可用软件包升级情况，并通过电子邮件即时通知，既节省您的时间，又强化服务器安全。\n\n运行机制：\n\n  * **每日监测**：配置每日自动执行的脚本，连接至您的Ubuntu服务器并检查可升级软件包\n  * **邮件通知**：当检测到可升级软件包时，将触发警报机制自动发送详细更新通知邮件\n\n配置步骤：\n\n  * **SSH凭证**：提供Ubuntu服务器的SSH登录凭证，确保工作流能安全连接并执行软件更新检查\n  * **SMTP凭证**：提供邮箱账户的SMTP登录信息，用于配置邮件通知系统发送软件包更新警报\n\n核心优势：\n\n  * **及时性**：第一时间获取关键软件升级信息，保障服务器性能与安全\n  * **自动化**：减少人工检查需求，让您安心处理其他重要任务\n  * **可定制**：可根据需求灵活调整检查频率或通知设置",
  "title_zh": "如果服务器有可升级的软件包，则发送电子邮件",
  "publish_date_zh": "最后更新于2个月前",
  "workflow_json_zh": "{\"nodes\": [{\"id\": \"4ca55c6e-cf2e-4239-82a9-88d0a201e761\", \"name\": \"可升级的软件包列表\", \"type\": \"n8n-nodes-base.ssh\", \"notes\": \"apt list --upgradable\", \"position\": [-280, 0], \"parameters\": {\"command\": \"apt list --upgradable\"}, \"credentials\": {\"sshPassword\": {\"id\": \"Ps31IKTeseWFlA0g\", \"name\": \"SSH Password account\"}}, \"notesInFlow\": true, \"typeVersion\": 1, \"alwaysOutputData\": false}, {\"id\": \"ae1f0a55-31aa-494b-baa6-822dc606188e\", \"name\": \"通过SMTP发送电子邮件\", \"type\": \"n8n-nodes-base.emailSend\", \"position\": [380, 0], \"webhookId\": \"8073c571-b36f-4330-a510-ca2ff2924fbf\", \"parameters\": {\"html\": \"您的服务器上以下软件包可进行更新：\\n\\n{{ $json.htmlList }}\\n\\n请登录并执行升级操作。\", \"options\": {}, \"subject\": \"服务器需要更新\", \"toEmail\": \"更改.我@例子.邮箱\", \"fromEmail\": \"更改.我@example.com\"}, \"credentials\": {\"smtp\": {\"id\": \"uiNePdJaDng5a43S\", \"name\": \"SMTP account\"}}, \"typeVersion\": 2.1}, {\"id\": \"e1d76671-d94c-40d5-9364-623db9319f11\", \"name\": \"每天运行工作流程\", \"type\": \"n8n-nodes-base.scheduleTrigger\", \"position\": [-540, 0], \"parameters\": {\"rule\": {\"interval\": [{}]}}, \"typeVersion\": 1.2}, {\"id\": \"ec4d722a-b88c-42da-971c-28ad5774596d\", \"name\": \"<ol>\\n  <li>第一项</li>\\n  <li>第二项</li>\\n  <li>第三项</li>\\n</ol>\", \"type\": \"n8n-nodes-base.code\", \"position\": [-60, 0], \"parameters\": {\"jsCode\": \"function formatStdoutAsHtmlList(stdoutData) {\\n\\n    // Split the stdout into lines and map to HTML list items\\n    const htmlListItems = stdoutData.split('\\\\n').map((line) => {\\n        if (line.trim() && line !== \\\"Listing...\\\") { // Optionally skip empty lines or headers\\n            return `<li>${line.trim()}</li>`;\\n        }\\n    }).filter(item => item); // Remove any undefined items due to empty lines or skipped headers\\n\\n    // Wrap the list items in a <ul> tag\\n    const htmlList = `<ul>${htmlListItems.join('')}</ul>`;\\n\\n    // Return the formatted HTML list as part of an object\\n    return { \\\"htmlList\\\": htmlList };\\n}\\n\\nreturn formatStdoutAsHtmlList($input.first().json.stdout);\"}, \"typeVersion\": 2}, {\"id\": \"6f14eb02-c505-4f83-a5bb-68094e763fd9\", \"name\": \"检查是否有更新\", \"type\": \"n8n-nodes-base.if\", \"position\": [140, 0], \"parameters\": {\"options\": {}, \"conditions\": {\"options\": {\"version\": 2, \"leftValue\": \"\", \"caseSensitive\": true, \"typeValidation\": \"strict\"}, \"combinator\": \"and\", \"conditions\": [{\"id\": \"db66d892-26fb-406c-a0ac-2e4b8a60310a\", \"operator\": {\"type\": \"string\", \"operation\": \"notEquals\"}, \"leftValue\": \"={{ $json.htmlList }}\", \"rightValue\": \"<ul></ul>\"}]}}, \"typeVersion\": 2.2}, {\"id\": \"3924c696-5b0e-4ae2-b2e2-435fed344028\", \"name\": \"便利贴\", \"type\": \"n8n-nodes-base.stickyNote\", \"position\": [-740, -180], \"parameters\": {\"width\": 300, \"content\": \"## VPS升级通知  \\n该工作流每天会检查服务器是否有可升级的软件包，并在存在更新时通过邮件通知您。\"}, \"typeVersion\": 1}, {\"id\": \"bb8ade2a-4ffe-4c79-91eb-55af568eb1b1\", \"name\": \"Sticky Note1\", \"type\": \"n8n-nodes-base.stickyNote\", \"position\": [380, -180], \"parameters\": {\"width\": 300, \"content\": \"## 更新电子邮件地址\\n更新此节点中的发件人和收件人电子邮件地址以接收通知\"}, \"typeVersion\": 1}], \"connections\": {\"Format as HTML list\": {\"main\": [[{\"node\": \"Check if there are updates\", \"type\": \"main\", \"index\": 0}]]}, \"Run workflow every day\": {\"main\": [[{\"node\": \"List upgradable packages\", \"type\": \"main\", \"index\": 0}]]}, \"Send Email through SMTP\": {\"main\": [[]]}, \"List upgradable packages\": {\"main\": [[{\"node\": \"Format as HTML list\", \"type\": \"main\", \"index\": 0}]]}, \"Check if there are updates\": {\"main\": [[{\"node\": \"Send Email through SMTP\", \"type\": \"main\", \"index\": 0}]]}}}"
}