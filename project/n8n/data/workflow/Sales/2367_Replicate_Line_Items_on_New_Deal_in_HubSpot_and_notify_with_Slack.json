{
  "title": "Replicate Line Items on New Deal in HubSpot and notify with Slack",
  "url": "https://n8n.io/workflows/2367-replicate-line-items-on-new-deal-in-hubspot-and-notify-with-slack/",
  "category": "Sales",
  "category_url": "https://n8n.io/workflows/categories/sales/?sort=createdAt:desc",
  "author": "Arnaud MARIE",
  "publish_date": "Last update 9 months ago",
  "publish_date_absolute": "2024-08-07",
  "content": "",
  "workflow_json": "{\"meta\":{\"instanceId\":\"8e95de061dd3893a50b8b4c150c8084a7848fb1df63f53533941b7c91a8ab996\"},\"nodes\":[{\"id\":\"6f938c83-45fd-4189-b9ec-c7a6de4beb2d\",\"name\":\"Retrieve deals Ids\",\"type\":\"n8n-nodes-base.set\",\"position\":[660,440],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"bad2435b-ec9b-4995-ab39-2dac1c2daa3a\",\"name\":\"deal_id_won\",\"type\":\"string\",\"value\":\"={{ $json.query.deal_id_won }}\"},{\"id\":\"2376fad4-c305-4c38-8daa-fd86014ae14b\",\"name\":\"deal_id_created\",\"type\":\"string\",\"value\":\"={{ $json.query.deal_id_created.match(/0-3-(\\\\d+)$/)[1] }}\"}]}},\"typeVersion\":3.4},{\"id\":\"abc534f2-03b4-4f34-8292-bc8011c62c44\",\"name\":\"Get deal won line items\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[920,440],\"parameters\":{\"url\":\"https://api.hubapi.com/crm/v4/associations/deals/line_items/batch/read\",\"method\":\"POST\",\"options\":{},\"jsonBody\":\"={\\n  \\\"inputs\\\": [\\n    {\\n      \\\"id\\\": \\\"{{ $json.deal_id_won }}\\\"\\n    }\\n  ]\\n}\",\"sendBody\":true,\"specifyBody\":\"json\",\"authentication\":\"predefinedCredentialType\",\"nodeCredentialType\":\"hubspotAppToken\"},\"credentials\":{\"hubspotAppToken\":{\"id\":\"yIpa7XqurpoIimjq\",\"name\":\"HubSpot App Token account\"},\"hubspotOAuth2Api\":{\"id\":\"2\",\"name\":\"HubSpot account OAuth - Arnaud\"}},\"typeVersion\":4.2},{\"id\":\"eb5ae93e-3b52-4a92-9506-5379bbca8e0b\",\"name\":\"Slack\",\"type\":\"n8n-nodes-base.slack\",\"position\":[1740,440],\"parameters\":{\"text\":\"=:white_check_mark: {{ `<https://arnaud-growth.app.n8n.cloud/workflow/${$workflow.id}|${$workflow.name}> sucessfull on <https://app-eu1.hubspot.com/contacts/3418361/record/0-3/${$('Retrieve deals Ids').item.json[\\\"deal_id_won\\\"]}|Deal won> and <https://app-eu1.hubspot.com/contacts/3418361/record/0-3/${$('Retrieve deals Ids').item.json[\\\"deal_id_created\\\"]}|Deal created>`}}\\n\",\"select\":\"channel\",\"channelId\":{\"__rl\":true,\"mode\":\"id\",\"value\":\"C051YHBJ1G8\"},\"otherOptions\":{\"includeLinkToWorkflow\":false}},\"credentials\":{\"slackApi\":{\"id\":\"5\",\"name\":\"Slack account\"}},\"typeVersion\":2.2},{\"id\":\"d18841d0-a270-4db5-9256-17026985c13b\",\"name\":\"Get batch SKUs from line items\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[1100,440],\"parameters\":{\"url\":\"https://api.hubapi.com/crm/v3/objects/line_items/batch/read\",\"method\":\"POST\",\"options\":{},\"jsonBody\":\"={{ \\n\\n{\\n  \\\"idProperty\\\": \\\"hs_object_id\\\",\\n  \\\"inputs\\\": $jmespath($json.results,`[].to[].{id: to_string(toObjectId)}`),\\n  \\\"properties\\\": [\\n    \\\"hs_object_id\\\",\\n    \\\"name\\\",\\n    \\\"hs_sku\\\"\\n  ]\\n}\\n\\n}}\",\"sendBody\":true,\"sendQuery\":true,\"specifyBody\":\"json\",\"authentication\":\"predefinedCredentialType\",\"queryParameters\":{\"parameters\":[{\"name\":\"archived\",\"value\":\"false\"}]},\"nodeCredentialType\":\"hubspotAppToken\"},\"credentials\":{\"hubspotAppToken\":{\"id\":\"yIpa7XqurpoIimjq\",\"name\":\"HubSpot App Token account\"}},\"typeVersion\":4.2},{\"id\":\"58a9ae81-26d5-47fb-9de7-bf108cb41f8d\",\"name\":\"Get Batch Product IDs by SKUs\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[1320,440],\"parameters\":{\"url\":\"https://api.hubapi.com/crm/v3/objects/products/batch/read\",\"method\":\"POST\",\"options\":{},\"jsonBody\":\"={{ {\\n  \\\"idProperty\\\": \\\"hs_sku\\\",\\n  \\\"inputs\\\":  $jmespath($json.results,\\\"[].properties.{id:to_string(hs_sku)}\\\") \\n,\\n  \\\"properties\\\": [\\n    \\\"idProperty\\\",\\n    \\\"name\\\",\\n    \\\"hs_object_id\\\",\\n    \\\"recurringbillingfrequency\\\",\\n\\\"hs_price_eur\\\"\\n  ]\\n}\\n\\n}}\",\"sendBody\":true,\"specifyBody\":\"json\",\"authentication\":\"predefinedCredentialType\",\"nodeCredentialType\":\"hubspotAppToken\"},\"credentials\":{\"hubspotAppToken\":{\"id\":\"yIpa7XqurpoIimjq\",\"name\":\"HubSpot App Token account\"}},\"typeVersion\":4.2},{\"id\":\"27b2619a-af84-475a-9bdc-c86462ea57d3\",\"name\":\"Create Batch line items based on productId and associate to deals\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[1540,440],\"parameters\":{\"url\":\"https://api.hubapi.com/crm/v3/objects/line_items/batch/create\",\"method\":\"POST\",\"options\":{},\"jsonBody\":\"={{ {\\\"inputs\\\":$jmespath($json.results,\\\"[].id\\\")\\n.map(id => ({\\n    \\\"associations\\\": [\\n        {\\n            \\\"types\\\": [\\n                {\\n                    \\\"associationCategory\\\": \\\"HUBSPOT_DEFINED\\\",\\n                    \\\"associationTypeId\\\": 20\\n                }\\n            ],\\n            \\\"to\\\": {\\n                \\\"id\\\": $('Retrieve deals Ids').item.json[\\\"deal_id_created\\\"]\\n            }\\n        }\\n    ],\\n    \\\"properties\\\": {\\n        \\\"hs_product_id\\\": id,\\n        \\\"quantity\\\": \\\"1\\\"\\n    }\\n})) } \\n\\n}}\",\"sendBody\":true,\"specifyBody\":\"json\",\"authentication\":\"predefinedCredentialType\",\"nodeCredentialType\":\"hubspotAppToken\"},\"credentials\":{\"hubspotAppToken\":{\"id\":\"yIpa7XqurpoIimjq\",\"name\":\"HubSpot App Token account\"}},\"typeVersion\":4.2},{\"id\":\"f6776d74-c818-4f2b-b05a-5e6b53c2ad5f\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-280,200],\"parameters\":{\"width\":565.8142732633208,\"height\":838.7224568543345,\"content\":\"# Replicate Line Items on New Deal in HubSpot Workflow\\n\\n## Use Case\\nThis workflow solves the problem of manually copying line items from one deal to another in HubSpot, reducing manual work and minimizing errors.\\n\\n## What this workflow does\\n- **Triggers** upon receiving a webhook with deal IDs.\\n- **Retrieves** the IDs of the won and created deals.\\n- **Fetches** line items associated with the won deal.\\n- **Extracts** product SKUs from the retrieved line items.\\n- **Fetches** product details based on SKUs.\\n- **Creates** new line items for the created deal and associates them.\\n- **Sends** a Slack notification with success details.\\n\\n## Step up steps\\n1. Create a HubSpot Deal Workflow\\n 1.1 Set up your trigger (ex: when deal stage = Won)\\n 1.2 Add step : Create Record (deal)\\n 1.3 Add Step : Send webhook. The webhook should be a Get to your n8n first trigger. Set two query parameter : \\n   - `deal_id_won` as the Record ID of the deal triggering the HubSpot Workflow\\n    - `deal_id_create` as the Record ID of the deal created above. Click Insert Data -> The created object\\n2. Set up your HubSpot App token in HubSpot -> Settings -> Integration -> Private Apps\\n3. Set up your HubSpot Token integration using the predefined model.\\n4. Set up your Slack connection\\n5. Add an error Workflow to monitor errors\"},\"typeVersion\":1},{\"id\":\"eefcd96e-c182-4362-bc60-6b5bca42e8a4\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[340,300],\"parameters\":{\"height\":393.4378126446013,\"content\":\"**Step 1.**\\nTriggered by HubSpot Workflow\"},\"typeVersion\":1},{\"id\":\"9fedd8cf-6d97-428e-8391-aedff191ba5d\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[600,300],\"parameters\":{\"height\":393.4378126446013,\"content\":\"**Step 2.**\\nSet the Ids of the deal won and the deal created\"},\"typeVersion\":1},{\"id\":\"b00a8849-0a13-40d3-a714-49f0afc54cea\",\"name\":\"Sticky Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[860,300],\"parameters\":{\"width\":819.2253746903481,\"height\":393.4378126446013,\"content\":\"**Step 3.**\\n- Get line items IDs from the deal won\\n- Retrieve the SKUs from those line items\\n- Get product based on SKUs\\n- Create new line items from Product IDs and associate to the new deal\\n\"},\"typeVersion\":1},{\"id\":\"8dc60064-83a1-488e-b1a5-7be57d734e88\",\"name\":\"Webhook\",\"type\":\"n8n-nodes-base.webhook\",\"position\":[420,440],\"webhookId\":\"833df60e-a78f-4a59-8244-9694f27cf8ae\",\"parameters\":{\"path\":\"833df60e-a78f-4a59-8244-9694f27cf8ae\",\"options\":{}},\"typeVersion\":2}],\"pinData\":{},\"connections\":{\"Webhook\":{\"main\":[[{\"node\":\"Retrieve deals Ids\",\"type\":\"main\",\"index\":0}]]},\"Retrieve deals Ids\":{\"main\":[[{\"node\":\"Get deal won line items\",\"type\":\"main\",\"index\":0}]]},\"Get deal won line items\":{\"main\":[[{\"node\":\"Get batch SKUs from line items\",\"type\":\"main\",\"index\":0}]]},\"Get Batch Product IDs by SKUs\":{\"main\":[[{\"node\":\"Create Batch line items based on productId and associate to deals\",\"type\":\"main\",\"index\":0}]]},\"Get batch SKUs from line items\":{\"main\":[[{\"node\":\"Get Batch Product IDs by SKUs\",\"type\":\"main\",\"index\":0}]]},\"Create Batch line items based on productId and associate to deals\":{\"main\":[[{\"node\":\"Slack\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "# Replicate Line Items on New Deal in HubSpot Workflow\n\n## Use Case\n\nThis workflow solves the problem of manually copying line items from one deal to another in HubSpot, reducing manual work and minimizing errors.\n\n## What this workflow does\n\n  * **Triggers** upon receiving a webhook with deal IDs.\n  * **Retrieves** the IDs of the won and created deals.\n  * **Fetches** line items associated with the won deal.\n  * **Extracts** product SKUs from the retrieved line items.\n  * **Fetches** product details based on SKUs.\n  * **Creates** new line items for the created deal and associates them.\n  * **Sends** a Slack notification with success details.\n\n\n\n## Step up steps\n\n  1. Create a HubSpot Deal Workflow  \n1.1 Set up your trigger (ex: when deal stage = Won)  \n1.2 Add step : Create Record (deal)  \n1.3 Add Step : Send webhook. The webhook should be a Get to your n8n first trigger. Set two query parameter : \n     * `deal_id_won` as the Record ID of the deal triggering the HubSpot Workflow\n     * `deal_id_create` as the Record ID of the deal created above. Click Insert Data -> The created object\n  2. Set up your HubSpot App token in HubSpot -> Settings -> Integration -> Private Apps\n  3. Set up your HubSpot Token integration using the predefined model.\n  4. Set up your Slack connection\n  5. Add an error Workflow to monitor errors\n\n\n",
  "readme_html": "<!--[--><div data-v-50766329=\"\"><h1>Replicate Line Items on New Deal in HubSpot Workflow</h1>\n<h2>Use Case</h2>\n<p>This workflow solves the problem of manually copying line items from one deal to another in HubSpot, reducing manual work and minimizing errors.</p>\n<h2>What this workflow does</h2>\n<ul>\n<li><strong>Triggers</strong> upon receiving a webhook with deal IDs.</li>\n<li><strong>Retrieves</strong> the IDs of the won and created deals.</li>\n<li><strong>Fetches</strong> line items associated with the won deal.</li>\n<li><strong>Extracts</strong> product SKUs from the retrieved line items.</li>\n<li><strong>Fetches</strong> product details based on SKUs.</li>\n<li><strong>Creates</strong> new line items for the created deal and associates them.</li>\n<li><strong>Sends</strong> a Slack notification with success details.</li>\n</ul>\n<h2>Step up steps</h2>\n<ol>\n<li>Create a HubSpot Deal Workflow<br>\n1.1 Set up your trigger (ex: when deal stage = Won)<br>\n1.2 Add step : Create Record (deal)<br>\n1.3 Add Step : Send webhook. The webhook should be a Get to your n8n first trigger. Set two query parameter :\n<ul>\n<li><code>deal_id_won</code> as the Record ID of the deal triggering the HubSpot Workflow</li>\n<li><code>deal_id_create</code> as the Record ID of the deal created above. Click Insert Data -&gt; The created object</li>\n</ul>\n</li>\n<li>Set up your HubSpot App token in HubSpot -&gt; Settings -&gt; Integration -&gt; Private Apps</li>\n<li>Set up your HubSpot Token integration using the predefined model.</li>\n<li>Set up your Slack connection</li>\n<li>Add an error Workflow to monitor errors</li>\n</ol>\n</div><!--]-->",
  "readme_zh": "# 在HubSpot工作流中复制新交易的行项目\n\n## 使用场景\n\n该工作流解决了在HubSpot中手动将行项目从一个交易复制到另一个交易的问题，减少手动操作并最小化错误。\n\n## 工作流功能\n\n* **触发条件**：接收包含交易ID的webhook时启动\n* **获取数据**：检索已成交交易和新创建交易的ID\n* **提取信息**：获取与已成交交易关联的行项目\n* **解析内容**：从行项目中提取产品SKU编码\n* **查询详情**：根据SKU获取产品详细信息\n* **创建关联**：为新交易生成行项目并建立关联\n* **通知反馈**：发送包含成功详情的Slack通知\n\n## 实施步骤\n\n1. 创建HubSpot交易工作流\n   1.1 设置触发器（例如：当交易阶段=已成交时）\n   1.2 添加步骤：创建记录（交易）\n   1.3 添加步骤：发送webhook。该webhook应为指向n8n首个触发器的GET请求，设置两个查询参数：\n     * `deal_id_won` 作为触发HubSpot工作流的交易记录ID\n     * `deal_id_create` 作为上述新建交易的记录ID。点击\"插入数据\"->选择创建的对象\n\n2. 在HubSpot设置应用令牌：设置 -> 集成 -> 私有应用\n3. 使用预定义模型配置HubSpot令牌集成\n4. 设置Slack连接\n5. 添加错误监控工作流",
  "title_zh": "在HubSpot中复制新交易的订单项并通过Slack通知",
  "publish_date_zh": "最后更新于9个月前",
  "workflow_json_zh": "{\n  \"meta\": {\n    \"instanceId\": \"8e95de061dd3893a50b8b4c150c8084a7848fb1df63f53533941b7c91a8ab996\"\n  },\n  \"nodes\": [\n    {\n      \"id\": \"6f938c83-45fd-4189-b9ec-c7a6de4beb2d\",\n      \"name\": \"Retrieve deals Ids\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        660,\n        440\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"bad2435b-ec9b-4995-ab39-2dac1c2daa3a\",\n              \"name\": \"deal_id_won\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.query.deal_id_won }}\"\n            },\n            {\n              \"id\": \"2376fad4-c305-4c38-8daa-fd86014ae14b\",\n              \"name\": \"deal_id_created\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.query.deal_id_created.match(/0-3-(\\\\d+)$/)[1] }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"abc534f2-03b4-4f34-8292-bc8011c62c44\",\n      \"name\": \"Get deal won line items\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        920,\n        440\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.hubapi.com/crm/v4/associations/deals/line_items/batch/read\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"jsonBody\": \"={\\n  \\\"inputs\\\": [\\n    {\\n      \\\"id\\\": \\\"{{ $json.deal_id_won }}\\\"\\n    }\\n  ]\\n}\",\n        \"sendBody\": true,\n        \"specifyBody\": \"json\",\n        \"authentication\": \"predefinedCredentialType\",\n        \"nodeCredentialType\": \"hubspotAppToken\"\n      },\n      \"credentials\": {\n        \"hubspotAppToken\": {\n          \"id\": \"yIpa7XqurpoIimjq\",\n          \"name\": \"HubSpot App Token account\"\n        },\n        \"hubspotOAuth2Api\": {\n          \"id\": \"2\",\n          \"name\": \"HubSpot account OAuth - Arnaud\"\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"eb5ae93e-3b52-4a92-9506-5379bbca8e0b\",\n      \"name\": \"Slack\",\n      \"type\": \"n8n-nodes-base.slack\",\n      \"position\": [\n        1740,\n        440\n      ],\n      \"parameters\": {\n        \"text\": \"=:white_check_mark: {{ `<https://arnaud-growth.app.n8n.cloud/workflow/${$workflow.id}|${$workflow.name}> sucessfull on <https://app-eu1.hubspot.com/contacts/3418361/record/0-3/${$('Retrieve deals Ids').item.json[\\\"deal_id_won\\\"]}|Deal won> and <https://app-eu1.hubspot.com/contacts/3418361/record/0-3/${$('Retrieve deals Ids').item.json[\\\"deal_id_created\\\"]}|Deal created>`}}\\n\",\n        \"select\": \"channel\",\n        \"channelId\": {\n          \"__rl\": true,\n          \"mode\": \"id\",\n          \"value\": \"C051YHBJ1G8\"\n        },\n        \"otherOptions\": {\n          \"includeLinkToWorkflow\": false\n        }\n      },\n      \"credentials\": {\n        \"slackApi\": {\n          \"id\": \"5\",\n          \"name\": \"Slack account\"\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"d18841d0-a270-4db5-9256-17026985c13b\",\n      \"name\": \"Get batch SKUs from line items\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1100,\n        440\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.hubapi.com/crm/v3/objects/line_items/batch/read\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"jsonBody\": \"={{ \\n\\n{\\n  \\\"idProperty\\\": \\\"hs_object_id\\\",\\n  \\\"inputs\\\": $jmespath($json.results,`[].to[].{id: to_string(toObjectId)}`),\\n  \\\"properties\\\": [\\n    \\\"hs_object_id\\\",\\n    \\\"name\\\",\\n    \\\"hs_sku\\\"\\n  ]\\n}\\n\\n}}\",\n        \"sendBody\": true,\n        \"sendQuery\": true,\n        \"specifyBody\": \"json\",\n        \"authentication\": \"predefinedCredentialType\",\n        \"queryParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"archived\",\n              \"value\": \"false\"\n            }\n          ]\n        },\n        \"nodeCredentialType\": \"hubspotAppToken\"\n      },\n      \"credentials\": {\n        \"hubspotAppToken\": {\n          \"id\": \"yIpa7XqurpoIimjq\",\n          \"name\": \"HubSpot App Token account\"\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"58a9ae81-26d5-47fb-9de7-bf108cb41f8d\",\n      \"name\": \"Get Batch Product IDs by SKUs\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1320,\n        440\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.hubapi.com/crm/v3/objects/products/batch/read\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"jsonBody\": \"={{ {\\n  \\\"idProperty\\\": \\\"hs_sku\\\",\\n  \\\"inputs\\\":  $jmespath($json.results,\\\"[].properties.{id:to_string(hs_sku)}\\\") \\n,\\n  \\\"properties\\\": [\\n    \\\"idProperty\\\",\\n    \\\"name\\\",\\n    \\\"hs_object_id\\\",\\n    \\\"recurringbillingfrequency\\\",\\n\\\"hs_price_eur\\\"\\n  ]\\n}\\n\\n}}\",\n        \"sendBody\": true,\n        \"specifyBody\": \"json\",\n        \"authentication\": \"predefinedCredentialType\",\n        \"nodeCredentialType\": \"hubspotAppToken\"\n      },\n      \"credentials\": {\n        \"hubspotAppToken\": {\n          \"id\": \"yIpa7XqurpoIimjq\",\n          \"name\": \"HubSpot App Token account\"\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"27b2619a-af84-475a-9bdc-c86462ea57d3\",\n      \"name\": \"Create Batch line items based on productId and associate to deals\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1540,\n        440\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.hubapi.com/crm/v3/objects/line_items/batch/create\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"jsonBody\": \"={{ {\\\"inputs\\\":$jmespath($json.results,\\\"[].id\\\")\\n.map(id => ({\\n    \\\"associations\\\": [\\n        {\\n            \\\"types\\\": [\\n                {\\n                    \\\"associationCategory\\\": \\\"HUBSPOT_DEFINED\\\",\\n                    \\\"associationTypeId\\\": 20\\n                }\\n            ],\\n            \\\"to\\\": {\\n                \\\"id\\\": $('Retrieve deals Ids').item.json[\\\"deal_id_created\\\"]\\n            }\\n        }\\n    ],\\n    \\\"properties\\\": {\\n        \\\"hs_product_id\\\": id,\\n        \\\"quantity\\\": \\\"1\\\"\\n    }\\n})) } \\n\\n}}\",\n        \"sendBody\": true,\n        \"specifyBody\": \"json\",\n        \"authentication\": \"predefinedCredentialType\",\n        \"nodeCredentialType\": \"hubspotAppToken\"\n      },\n      \"credentials\": {\n        \"hubspotAppToken\": {\n          \"id\": \"yIpa7XqurpoIimjq\",\n          \"name\": \"HubSpot App Token account\"\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"f6776d74-c818-4f2b-b05a-5e6b53c2ad5f\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -280,\n        200\n      ],\n      \"parameters\": {\n        \"width\": 565.8142732633208,\n        \"height\": 838.7224568543345,\n        \"content\": \"# 在HubSpot工作流中复制新交易的订单项\\n\\n## 使用场景\\n该工作流解决了在HubSpot中手动将订单项从一个交易复制到另一个交易的问题，减少了手动操作并最大程度降低了错误率。\\n\\n## 工作流功能\\n- **触发条件**：收到包含交易ID的webhook时启动\\n- **获取数据**：检索已成交交易和新创建交易的ID\\n- **提取信息**：获取与已成交交易关联的订单项\\n- **解析内容**：从检索到的订单项中提取产品SKU\\n- **查询详情**：根据SKU获取产品详细信息\\n- **创建关联**：为新创建的交易生成新订单项并建立关联\\n- **通知反馈**：发送包含成功详情的Slack通知\\n\\n## 配置步骤\\n1. 创建HubSpot交易工作流\\n 1.1 设置触发器（例如：当交易阶段=已成交时）\\n 1.2 添加步骤：创建记录（交易）\\n 1.3 添加步骤：发送webhook。该webhook应为指向n8n首个触发器的Get请求。设置两个查询参数：\\n   - `deal_id_won` 作为触发HubSpot工作流的交易记录ID\\n   - `deal_id_create` 作为上述创建的交易记录ID。点击\\\"插入数据\\\"->选择创建的对象\\n2. 在HubSpot->设置->集成->私有应用中配置HubSpot应用令牌\\n3. 使用预定义模型设置HubSpot令牌集成\\n4. 配置Slack连接\\n5. 添加错误监控工作流\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"eefcd96e-c182-4362-bc60-6b5bca42e8a4\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        340,\n        300\n      ],\n      \"parameters\": {\n        \"height\": 393.4378126446013,\n        \"content\": \"**第一步：**\\n由HubSpot工作流触发\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"9fedd8cf-6d97-428e-8391-aedff191ba5d\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        600,\n        300\n      ],\n      \"parameters\": {\n        \"height\": 393.4378126446013,\n        \"content\": \"**步骤2.**\\n设置交易成功和交易创建的ID\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"b00a8849-0a13-40d3-a714-49f0afc54cea\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        860,\n        300\n      ],\n      \"parameters\": {\n        \"width\": 819.2253746903481,\n        \"height\": 393.4378126446013,\n        \"content\": \"**步骤3：**\\n- 从已成交的交易中获取订单项ID\\n- 根据这些订单项检索对应的SKU\\n- 通过SKU获取相关产品信息\\n- 根据产品ID创建新的订单项，并将其关联至新交易\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"8dc60064-83a1-488e-b1a5-7be57d734e88\",\n      \"name\": \"Webhook\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"position\": [\n        420,\n        440\n      ],\n      \"webhookId\": \"833df60e-a78f-4a59-8244-9694f27cf8ae\",\n      \"parameters\": {\n        \"path\": \"833df60e-a78f-4a59-8244-9694f27cf8ae\",\n        \"options\": {}\n      },\n      \"typeVersion\": 2\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"Webhook\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Retrieve deals Ids\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Retrieve deals Ids\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get deal won line items\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get deal won line items\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get batch SKUs from line items\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get Batch Product IDs by SKUs\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Create Batch line items based on productId and associate to deals\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get batch SKUs from line items\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get Batch Product IDs by SKUs\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Create Batch line items based on productId and associate to deals\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Slack\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}