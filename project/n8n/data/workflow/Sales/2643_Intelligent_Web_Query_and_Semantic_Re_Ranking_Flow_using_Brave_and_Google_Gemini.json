{
  "title": "Intelligent Web Query and Semantic Re-Ranking Flow using Brave and Google Gemini",
  "url": "https://n8n.io/workflows/2643-intelligent-web-query-and-semantic-re-ranking-flow-using-brave-and-google-gemini/",
  "category": "Sales",
  "category_url": "https://n8n.io/workflows/categories/sales/?sort=createdAt:desc",
  "author": "Mind-Front",
  "publish_date": "Last update 5 months ago",
  "publish_date_absolute": "2024-12-07",
  "content": "",
  "workflow_json": "{\"id\":\"wa2uEnSIowqSrHoY\",\"meta\":{\"instanceId\":\"cca06617664f52c5a019ea575691fdbce675dd95dc0452af5f13dbe76d615b69\"},\"name\":\"Intelligent Web Query and Semantic Re-Ranking Flow\",\"tags\":[],\"nodes\":[{\"id\":\"8e7dc5cb-6822-4ef6-9e5a-2b350a1526bf\",\"name\":\"Sticky Note4\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-640,-620],\"parameters\":{\"color\":5,\"width\":1172,\"height\":970,\"content\":\"\\n## Step 1. Set Up a Free Brave Web Search Query API Key\\n\\nTo attain the free web search API tier from Brave, follow these steps:\\n\\n1. Visit api.search.brave.com\\n2. Create an account\\n3. Subscribe to the free plan (no charge)\\n4. Navigate to the API Keys section\\n5. Generate an API key. For the subscription type, choose \\\"Free\\\".\\n6. Go to the \\\"Query\\\" Nodes and change the \\\"X-Subscription-Token\\\" value to your API Key.\\n\"},\"typeVersion\":1},{\"id\":\"5bb3e68f-7693-4d4b-b794-843f2c3535e0\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-1580,-420],\"parameters\":{\"color\":4,\"width\":680,\"height\":360,\"content\":\"## If you require to change this Node to Webhook Or any Other Item:\\n\\n- In case you want to change the input type from Webhook to any other item, Make sure to go to the Query 1 and Query 1 Ranker and replace the Webhook Input to your Node's input.\"},\"typeVersion\":1},{\"id\":\"f2fc02f9-a78a-4e87-be85-0032492a9f3f\",\"name\":\"Date & Time\",\"type\":\"n8n-nodes-base.dateTime\",\"position\":[-820,-240],\"parameters\":{\"options\":{}},\"typeVersion\":2},{\"id\":\"6f18ebbd-83db-4900-bc2e-0a9f23d6e8c8\",\"name\":\"Webhook\",\"type\":\"n8n-nodes-base.webhook\",\"position\":[-1340,-240],\"webhookId\":\"962f1468-c80f-4c0c-8555-a0acf648ede4\",\"parameters\":{\"path\":\"962f1468-c80f-4c0c-8555-a0acf648ede4\",\"options\":{},\"responseMode\":\"responseNode\"},\"typeVersion\":2},{\"id\":\"ba5ea83e-1b47-475b-863f-269ae293729a\",\"name\":\"Auto-fixing Output Parser6\",\"type\":\"@n8n/n8n-nodes-langchain.outputParserAutofixing\",\"position\":[180,-140],\"parameters\":{\"options\":{}},\"typeVersion\":1},{\"id\":\"ca426b6d-5412-4c5b-a55c-009a47c59a81\",\"name\":\"Auto-fixing Output Parser\",\"type\":\"@n8n/n8n-nodes-langchain.outputParserAutofixing\",\"position\":[-580,-140],\"parameters\":{\"options\":{}},\"typeVersion\":1},{\"id\":\"501d5390-5317-4973-a3e9-b0f502399c2b\",\"name\":\"Structured Output Parser1\",\"type\":\"@n8n/n8n-nodes-langchain.outputParserStructured\",\"position\":[-460,-60],\"parameters\":{\"jsonSchemaExample\":\"{\\n  \\\"reasoning_summary\\\": \\\"Detailed explanation of each analytical chain’s purpose and insights, including key terms and considerations for query formulation.\\\",\\n  \\\"final_search_query\\\": \\\"The single, best-fit search query derived from the meta-reasoning and multi-chain analysis, optimized to answer the research question.\\\"\\n}\"},\"typeVersion\":1.2},{\"id\":\"a27e75c7-0307-4d71-9266-5a56b297a6e3\",\"name\":\"Query-1 Combined\",\"type\":\"n8n-nodes-base.code\",\"position\":[-80,-240],\"parameters\":{\"jsCode\":\"// Initialize an empty string to store all title, url, and description pairs\\nlet aggregatedOutputText = \\\"\\\";\\n\\n// Loop through all items passed to this Function node\\nfor (let item of items) {\\n  // Access the JSON data from \\\"Query 1\\\" node for the current item\\n  const queryData = item.json;\\n\\n  // Ensure there is a \\\"web.results\\\" array to process\\n  if (queryData.web?.results && Array.isArray(queryData.web.results)) {\\n    // Loop through all results in the \\\"web.results\\\" array\\n    for (let result of queryData.web.results) {\\n      // Extract the title, url, and description for each result\\n      const title = result.title || \\\"No Title\\\";\\n      const url = result.url || \\\"No URL\\\";\\n      const description = result.description || \\\"No Description\\\";\\n\\n      // Append the values to the aggregated string\\n      aggregatedOutputText += `Title: ${title}\\\\nURL: ${url}\\\\nDescription: ${description}\\\\n\\\\n`;\\n    }\\n  } else {\\n    // If no results array, handle gracefully\\n    aggregatedOutputText += \\\"No results found for this item.\\\\n\\\\n\\\";\\n  }\\n}\\n\\n// Trim the final string to remove any trailing newline and whitespace\\naggregatedOutputText = aggregatedOutputText.trim();\\n\\n// Return a single item containing the aggregated output as a string\\nreturn [\\n  {\\n    json: {\\n      aggregated_text: aggregatedOutputText\\n    }\\n  }\\n];\\n\"},\"typeVersion\":2},{\"id\":\"acbdbe94-b5a7-4ec9-9fc8-c3ab147f42fa\",\"name\":\"Respond to Webhook\",\"type\":\"n8n-nodes-base.respondToWebhook\",\"position\":[640,-240],\"parameters\":{\"options\":{},\"respondWith\":\"text\",\"responseBody\":\"={\\n    \\\"Highest_RANKEDURL_1\\\": {\\n        \\\"title\\\": \\\"{{ $item('0').$node['Semantic Search - Result Re-Ranker'].json['output']['Highest_RANKEDURL_1']['title'] }}\\\",\\n        \\\"link\\\": \\\"{{ $item('0').$node['Semantic Search - Result Re-Ranker'].json['output']['Highest_RANKEDURL_1']['link'] }}\\\",\\n        \\\"description\\\": \\\"{{ $item('0').$node['Semantic Search - Result Re-Ranker'].json['output']['Highest_RANKEDURL_1']['description'] }}\\\"\\n    },\\n    \\\"Highest_RANKEDURL_2\\\": {\\n        \\\"title\\\": \\\"{{ $item('0').$node['Semantic Search - Result Re-Ranker'].json['output']['Highest_RANKEDURL_2']['title'] }}\\\",\\n        \\\"link\\\": \\\"{{ $item('0').$node['Semantic Search - Result Re-Ranker'].json['output']['Highest_RANKEDURL_2']['link'] }}\\\",\\n        \\\"description\\\": \\\"{{ $item('0').$node['Semantic Search - Result Re-Ranker'].json['output']['Highest_RANKEDURL_2']['description'] }}\\\"\\n    },\\n    \\\"Highest_RANKEDURL_3\\\": {\\n        \\\"title\\\": \\\"{{ $item('0').$node['Semantic Search - Result Re-Ranker'].json['output']['Highest_RANKEDURL_3']['title'] }}\\\",\\n        \\\"link\\\": \\\"{{ $item('0').$node['Semantic Search - Result Re-Ranker'].json['output']['Highest_RANKEDURL_3']['link'] }}\\\",\\n        \\\"description\\\": \\\"{{ $item('0').$node['Semantic Search - Result Re-Ranker'].json['output']['Highest_RANKEDURL_3']['description'] }}\\\"\\n    },\\n    \\\"Highest_RANKEDURL_4\\\": {\\n        \\\"title\\\": \\\"{{ $item('0').$node['Semantic Search - Result Re-Ranker'].json['output']['Highest_RANKEDURL_4']['title'] }}\\\",\\n        \\\"link\\\": \\\"{{ $item('0').$node['Semantic Search - Result Re-Ranker'].json['output']['Highest_RANKEDURL_4']['link'] }}\\\",\\n        \\\"description\\\": \\\"{{ $item('0').$node['Semantic Search - Result Re-Ranker'].json['output']['Highest_RANKEDURL_4']['description'] }}\\\"\\n    },\\n    \\\"Highest_RANKEDURL_5\\\": {\\n        \\\"title\\\": \\\"{{ $item('0').$node['Semantic Search - Result Re-Ranker'].json['output']['Highest_RANKEDURL_5']['title'] }}\\\",\\n        \\\"link\\\": \\\"{{ $item('0').$node['Semantic Search - Result Re-Ranker'].json['output']['Highest_RANKEDURL_5']['link'] }}\\\",\\n        \\\"description\\\": \\\"{{ $item('0').$node['Semantic Search - Result Re-Ranker'].json['output']['Highest_RANKEDURL_5']['description'] }}\\\"\\n    },\\n    \\\"Highest_RANKEDURL_6\\\": {\\n        \\\"title\\\": \\\"{{ $item('0').$node['Semantic Search - Result Re-Ranker'].json['output']['Highest_RANKEDURL_6']['title'] }}\\\",\\n        \\\"link\\\": \\\"{{ $item('0').$node['Semantic Search - Result Re-Ranker'].json['output']['Highest_RANKEDURL_6']['link'] }}\\\",\\n        \\\"description\\\": \\\"{{ $item('0').$node['Semantic Search - Result Re-Ranker'].json['output']['Highest_RANKEDURL_6']['description'] }}\\\"\\n    },\\n    \\\"Highest_RANKEDURL_7\\\": {\\n        \\\"title\\\": \\\"{{ $item('0').$node['Semantic Search - Result Re-Ranker'].json['output']['Highest_RANKEDURL_7']['title'] }}\\\",\\n        \\\"link\\\": \\\"{{ $item('0').$node['Semantic Search - Result Re-Ranker'].json['output']['Highest_RANKEDURL_7']['link'] }}\\\",\\n        \\\"description\\\": \\\"{{ $item('0').$node['Semantic Search - Result Re-Ranker'].json['output']['Highest_RANKEDURL_7']['description'] }}\\\"\\n    },\\n    \\\"Highest_RANKEDURL_8\\\": {\\n        \\\"title\\\": \\\"{{ $item('0').$node['Semantic Search - Result Re-Ranker'].json['output']['Highest_RANKEDURL_8']['title'] }}\\\",\\n        \\\"link\\\": \\\"{{ $item('0').$node['Semantic Search - Result Re-Ranker'].json['output']['Highest_RANKEDURL_8']['link'] }}\\\",\\n        \\\"description\\\": \\\"{{ $item('0').$node['Semantic Search - Result Re-Ranker'].json['output']['Highest_RANKEDURL_8']['description'] }}\\\"\\n    },\\n    \\\"Highest_RANKEDURL_9\\\": {\\n        \\\"title\\\": \\\"{{ $item('0').$node['Semantic Search - Result Re-Ranker'].json['output']['Highest_RANKEDURL_9']['title'] }}\\\",\\n        \\\"link\\\": \\\"{{ $item('0').$node['Semantic Search - Result Re-Ranker'].json['output']['Highest_RANKEDURL_9']['link'] }}\\\",\\n        \\\"description\\\": \\\"{{ $item('0').$node['Semantic Search - Result Re-Ranker'].json['output']['Highest_RANKEDURL_9']['description'] }}\\\"\\n    },\\n    \\\"Highest_RANKEDURL_10\\\": {\\n        \\\"title\\\": \\\"{{ $item('0').$node['Semantic Search - Result Re-Ranker'].json['output']['Highest_RANKEDURL_10']['title'] }}\\\",\\n        \\\"link\\\": \\\"{{ $item('0').$node['Semantic Search - Result Re-Ranker'].json['output']['Highest_RANKEDURL_10']['link'] }}\\\",\\n        \\\"description\\\": \\\"{{ $item('0').$node['Semantic Search - Result Re-Ranker'].json['output']['Highest_RANKEDURL_10']['description'] }}\\\"\\n    },\\n    \\\"Information_extracted\\\": \\\"{{ $item('0').$node['Semantic Search - Result Re-Ranker'].json['output']['Information_extracted'] }}\\\"\\n}\\n\"},\"typeVersion\":1.1},{\"id\":\"b8b6ae73-586a-406f-9641-57e2625f800c\",\"name\":\"Semantic Search - Result Re-Ranker\",\"type\":\"@n8n/n8n-nodes-langchain.chainLlm\",\"onError\":\"continueRegularOutput\",\"position\":[100,-240],\"parameters\":{\"text\":\"=\\n**Objective:**\\n\\nFor the user's query, web search results are provided. Your tasks are:\\n\\n1. **Rank the links** based on how well they match the user's query.\\n2. **Extract relevant information** from the descriptions provided. If no relevant information is found, return \\\"N/A\\\".\\n\\n---\\n\\n**Task:**\\n\\n**Step 1: Understand the User's Intent**\\n\\n- Determine what the user is truly and technically looking for.\\n- The user's request query is: \\\"{{ $('Webhook').item.json.query['Research Question'] }}\\\"\\n- The serach results below, however their  performance seem, have been based on this query \\\"{{ $item(\\\"0\\\").$node[\\\"Semantic Search -Query Maker\\\"].json[\\\"output\\\"][\\\"final_search_query\\\"] }}\\\". If the result are not satisfactory or missing due to bad query making, you should note that as well for the neww query making.\\n- To nesure being time aware , realize todays date is: \\\"{{ $item(\\\"0\\\").$node[\\\"Date & Time\\\"].json[\\\"currentDate\\\"] }}\\\"\\n\\n- Follow a three-step chain of thought to comprehend the user's needs. Think out loud.\\n\\n---\\n\\n**Step 2: Rank the Links**\\n\\n- From the URLs and description snippets provided, **rank the top 10 websites** that are most likely to contain the required information.\\n- Use the titles, descriptions, and sources to inform your ranking.\\n\\n**Links, Titles, and Descriptions:**\\n\\n{{ $json.aggregated_text }}\\n\\n---\\n\\nThis list completes the structure up to 20 results as you requested. Let me know if there’s anything more you need!\\n\\n---\\n\\n**Step 3: Analyze and Create a Follow-up Query**\\n\\n- Recognize that for the user's request:\\n\\n  `\\\"{{ $('Webhook').item.json.query['Research Question'] }}\\\"`\\n\\n  The results provided are based on the assistant's generated search query:\\n\\n  `\\\"{{ $item(\\\"0\\\").$node[\\\"Semantic Search -Query Maker\\\"].json[\\\"output\\\"][\\\"final_search_query\\\"] }}\\\"`\\n\\n- Analyze and revise any issues or new insights through multi-step thinking to create a follow-up query.\\n\\n**Indications and Priorities:**\\n\\n1. **No Results Received:** If no search items are shared, the search query may have been ineffective (e.g., too specific, incorrect parameters).\\n2. **Insufficient or Unpromising Results:** If fewer than 20 but more than 5 results are provided, and none seem promising, the search query may need refinement.\\n3. **Successful Results with Potential Follow-up:** If none of the above issues occurred and the search results provide answers or suggest a follow-up, create a new query. This could be a new topic, a deep dive, or a parallel factor that offers additional benefits.\\n\\n- Provide your chain of thought that connects the user's request to the actual information.\\n\\n- Deliver precise, detailed, and value-oriented information relevant to the user's query.\\n\\n**Step 4: Query making notes and examples**: \\n\\nThe queries must not be long tails , as they result in 0 websearch reutrns. We give you some examples of good web search queries:\\nExamples:\\n\\nUser Question: \\\"What is the current state of the U.S. economy in 2024?\\\"\\nEffective Search Query: \\\"U.S. Economy Analysis Report 2024\\\"\\n\\nUser Question: \\\"What are the recent advancements in artificial intelligence?\\\"\\nEffective Search Query: \\\"2024 Artificial Intelligence Developments\\\"\\n\\nUser Question: \\\"How is climate change affecting agriculture globally?\\\"\\nEffective Search Query: \\\"Global Impact of Climate Change on Agriculture 2024\\\"\\n\\nUser Question: \\\"What are the latest trends in cybersecurity threats?\\\"\\nEffective Search Query: \\\"Cybersecurity Threats and Trends 2024\\\"\\n\\nUser Question: \\\"What is the outlook for renewable energy investments?\\\"\\nEffective Search Query: \\\"Renewable Energy Investment Outlook 2024\\\"\\n\\n**Step 5: Query making*: \\nor query making remember as we said:\\n   - **Today's Date:** \\\"{{ $item(\\\"0\\\").$node[\\\"Date & Time\\\"].json[\\\"currentDate\\\"] }}\\\"\\n **Search Inquiry:** \\n   - **Search Topic to create the query upon it:**{{ $item(\\\"0\\\").$node[\\\"Webhook\\\"].json[\\\"query\\\"][\\\"Research Question\\\"] }}\\\"\\\"\\n\\n\\n---\\n\\n**Step 6: Output Format**\\n\\nEnsure the response is in the following JSON format:\\n\\n{\\n    \\\"chain_of_thought\\\": \\\"Insert your step-by-step reasoning here.\\\",\\n    \\\"Highest_RANKEDURL_1\\\": {\\n        \\\"title\\\": \\\"Insert the First Ranked URL's Title here.\\\",\\n        \\\"link\\\": \\\"Insert the First Ranked URL here.\\\",\\n        \\\"description\\\": \\\"Insert the First Ranked URL's Description here.\\\"\\n    },\\n    \\\"Highest_RANKEDURL_2\\\": {\\n        \\\"title\\\": \\\"Insert the Second Ranked URL's Title here.\\\",\\n        \\\"link\\\": \\\"Insert the Second Ranked URL here.\\\",\\n        \\\"description\\\": \\\"Insert the Second Ranked URL's Description here.\\\"\\n    },\\n    \\\"Highest_RANKEDURL_3\\\": {\\n        \\\"title\\\": \\\"Insert the Third Ranked URL's Title here.\\\",\\n        \\\"link\\\": \\\"Insert the Third Ranked URL here.\\\",\\n        \\\"description\\\": \\\"Insert the Third Ranked URL's Description here.\\\"\\n    },\\n    \\\"Highest_RANKEDURL_4\\\": {\\n        \\\"title\\\": \\\"Insert the Fourth Ranked URL's Title here.\\\",\\n        \\\"link\\\": \\\"Insert the Fourth Ranked URL here.\\\",\\n        \\\"description\\\": \\\"Insert the Fourth Ranked URL's Description here.\\\"\\n    },\\n    \\\"Highest_RANKEDURL_5\\\": {\\n        \\\"title\\\": \\\"Insert the Fifth Ranked URL's Title here.\\\",\\n        \\\"link\\\": \\\"Insert the Fifth Ranked URL here.\\\",\\n        \\\"description\\\": \\\"Insert the Fifth Ranked URL's Description here.\\\"\\n    },\\n    \\\"Highest_RANKEDURL_6\\\": {\\n        \\\"title\\\": \\\"Insert the Sixth Ranked URL's Title here.\\\",\\n        \\\"link\\\": \\\"Insert the Sixth Ranked URL here.\\\",\\n        \\\"description\\\": \\\"Insert the Sixth Ranked URL's Description here.\\\"\\n    },\\n    \\\"Highest_RANKEDURL_7\\\": {\\n        \\\"title\\\": \\\"Insert the Seventh Ranked URL's Title here.\\\",\\n        \\\"link\\\": \\\"Insert the Seventh Ranked URL here.\\\",\\n        \\\"description\\\": \\\"Insert the Seventh Ranked URL's Description here.\\\"\\n    },\\n    \\\"Highest_RANKEDURL_8\\\": {\\n        \\\"title\\\": \\\"Insert the Eighth Ranked URL's Title here.\\\",\\n        \\\"link\\\": \\\"Insert the Eighth Ranked URL here.\\\",\\n        \\\"description\\\": \\\"Insert the Eighth Ranked URL's Description here.\\\"\\n    },\\n    \\\"Highest_RANKEDURL_9\\\": {\\n        \\\"title\\\": \\\"Insert the Ninth Ranked URL's Title here.\\\",\\n        \\\"link\\\": \\\"Insert the Ninth Ranked URL here.\\\",\\n        \\\"description\\\": \\\"Insert the Ninth Ranked URL's Description here.\\\"\\n    },\\n    \\\"Highest_RANKEDURL_10\\\": {\\n        \\\"title\\\": \\\"Insert the Tenth Ranked URL's Title here.\\\",\\n        \\\"link\\\": \\\"Insert the Tenth Ranked URL here.\\\",\\n        \\\"description\\\": \\\"Insert the Tenth Ranked URL's Description here.\\\"\\n    },\\n    \\\"Information_extracted\\\": \\\"Insert all extracted information relevant to the user's query or 'N/A' if none.\\\"\\n}\\n\",\"messages\":{\"messageValues\":[{\"message\":\"=\\nYou are an expert information retrieval and critical evaluation assistant designed to process, rank, and extract high-relevance content from web search results for complex user queries. You must provide value-oriented insights while refining searches based on relevance and context sensitivity. \\n\\n**Your Process and Priorities:**\\n\\n#### 1. **Determine the User's Technical Intent**\\n   - Interpret the user's core question provided as `{{ $item(\\\"0\\\").$node[\\\"Webhook\\\"].json[\\\"query\\\"][\\\"Research Question\\\"] }}`, discerning underlying objectives and specialized needs.\\n   - Recognize that the search results may have been generated from a **secondary query**: `{{ $item(\\\"0\\\").$node[\\\"Semantic Search -Query Maker\\\"].json[\\\"output\\\"][\\\"final_search_query\\\"] }}`. \\n   - Judge the adequacy of this generated query. If it does not meet the user’s objectives, highlight the need for query refinement and prepare to adapt the approach.\\n   - Stay mindful of the date context, using `{{ $item(\\\"0\\\").$node[\\\"Date & Time\\\"].json[\\\"currentDate\\\"] }}` to assess the freshness of content or time-sensitive relevance.\\n\\n#### 2. **Rank Results Based on Analytical Relevance**\\n   - From the search results provided, **rank the top 3 URLs** that most closely align with the user’s intent and technical needs.\\n     - Use multi-dimensional analysis to assess how each link’s title, description, and source match the user’s objective.\\n     - Prioritize results based on credibility, relevance, and their potential to add depth to the user’s inquiry.\\n   - Your goal is to select the highest-value links, disregarding results that offer superficial, off-topic, or outdated information.\\n\\n#### 3. **Extract Key Information**\\n   - For each of the top 3 ranked results, extract insights and details from the description snippets that directly address the user’s query.\\n   - If no pertinent information is available in a description, record `\\\"N/A\\\"` to indicate its lack of relevance.\\n\\n#### 4. **Evaluate for Potential Query Improvement**\\n   - Evaluate the relevance and coverage of search results:\\n     - If fewer than 5 relevant results are present, consider that the initial query may be too narrow, specific, or otherwise misaligned.\\n     - Generate a **refined query** that is adjusted to better match the user’s likely needs and produce higher-quality results.\\n   - Use advanced language modifications, new keyword suggestions, or rephrasing to formulate a search query that enhances alignment with the user’s goals.\\n\"}]},\"promptType\":\"define\",\"hasOutputParser\":true},\"retryOnFail\":true,\"typeVersion\":1.4},{\"id\":\"a1ca671d-0b0c-4717-9def-93fdb965de8d\",\"name\":\"Query\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[-240,-240],\"parameters\":{\"url\":\"https://api.search.brave.com/res/v1/web/search\",\"options\":{},\"sendQuery\":true,\"sendHeaders\":true,\"queryParameters\":{\"parameters\":[{\"name\":\"q\",\"value\":\"={{ $json.output.final_search_query }}\"}]},\"headerParameters\":{\"parameters\":[{\"name\":\"Accept\",\"value\":\"application/json\"},{\"name\":\"Accept-Encoding\",\"value\":\"gzip\"},{\"name\":\"X-Subscription-Token\",\"value\":\"<Insert Your API Key Here>\"}]}},\"typeVersion\":4.2},{\"id\":\"d3cc4e7c-3ead-4d38-9b51-a11cd9d7faeb\",\"name\":\"Webhook Call\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[-180,1040],\"parameters\":{\"url\":\"https://primary-production-8aa4.up.railway.app/webhook-test/962f1468-c80f-4c0c-8555-a0acf648ede4\",\"options\":{},\"sendQuery\":true,\"queryParameters\":{\"parameters\":[{\"name\":\"Research Question\",\"value\":\"what is the latest news in global world in politics and economy?\"}]}},\"typeVersion\":4.2},{\"id\":\"6931404b-94d6-4b9d-9f0a-124012212eb5\",\"name\":\"Sticky Note6\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-640,420],\"parameters\":{\"color\":3,\"width\":1180,\"height\":840,\"content\":\"## Step 2. Setup the Webhook Call Node\\n\\n**Instructions for Setting Up the Webhook Call and Using It in Your Workflow**\\n\\nThis node is designed to send a **web search query** to the workflow (partly built in this chart) and return the results. Follow these steps to correctly configure and use it:\\n\\n1. **Locate the \\\"Webhook\\\" Node in the Workflow**:\\n   - Navigate to the workflow above, the first item, the \\\"Webhook\\\" node.\\n   - In the \\\"Webhook\\\" node, change the **Webhook URL option** from \\\"Test URL\\\" to \\\"Production URL.\\\"\\n   - Copy the generated **Production URL**.\\n\\n2. **Paste the Webhook URL in the HTTP Node**:\\n   - In your target workflow, locate the **HTTP Request** node.\\n   - Paste the copied **Production URL** into the URL field of the HTTP Request node. This connects the two workflows.\\n\\n3. **Send the Research Request**:\\n   - When sending the request to this workflow, make sure to include your web search query in the **\\\"Research Question\\\" parameter** of the HTTP Request node.\\n\\n4. **Move the Webhook Call Node**:\\n   - Move this **Webhook Call Node** into the workflow where you need the research results. Ensure that it’s correctly connected and configured to send the data to the main workflow.\\n\"},\"typeVersion\":1},{\"id\":\"01d73f91-1dd6-4b80-951c-9f944ea9d992\",\"name\":\"Semantic Search -Query Maker\",\"type\":\"@n8n/n8n-nodes-langchain.chainLlm\",\"position\":[-560,-240],\"parameters\":{\"text\":\"=1. **Task:** `\\\"Your task is to develop a web search query that most effectively answers the research question given. Use meta-reasoning and multi-chain analysis to ensure a comprehensive approach.\\\"`\\n\\n2. **Structured Guidance for Chains of Thought:**  \\n    a. **Chain 1:** Break down the research question, identifying keywords and relevant terms.  \\n    b. **Chain 2:** Explore the context and potential sources, determining the types of results that would be most relevant.  \\n    c. **Chain 3:** Refine the query for specificity and completeness, considering how to capture nuances of the question.\\n\\n3. **Final Query Generation:** Based on the insights from the three chains, generate a single, refined search query.\\n\\n\\n4. Note, the queries must not be long tails , as they result in 0 websearch reutrns. We give you some examples of good web search queries:\\nExamples:\\n\\nUser Question: \\\"What is the current state of the U.S. economy in 2024?\\\"\\n\\nEffective Search Query: \\\"U.S. Economy Analysis Report 2024\\\"\\nUser Question: \\\"What are the recent advancements in artificial intelligence?\\\"\\n\\nEffective Search Query: \\\"2024 Artificial Intelligence Developments\\\"\\nUser Question: \\\"How is climate change affecting agriculture globally?\\\"\\n\\nEffective Search Query: \\\"Global Impact of Climate Change on Agriculture 2024\\\"\\nUser Question: \\\"What are the latest trends in cybersecurity threats?\\\"\\n\\nEffective Search Query: \\\"Cybersecurity Threats and Trends 2024\\\"\\nUser Question: \\\"What is the outlook for renewable energy investments?\\\"\\n\\nEffective Search Query: \\\"Renewable Energy Investment Outlook 2024\\\"\\n\\n5. Data Input:\\n   - **Today's Date:** \\\"{{ $item(\\\"0\\\").$node[\\\"Date & Time\\\"].json[\\\"currentDate\\\"] }}\\\"\\n **Search Inquiry:** \\n   - **Search Topic to create the query upon it:**{{ $item(\\\"0\\\").$node[\\\"Webhook\\\"].json[\\\"query\\\"][\\\"Research Question\\\"] }}\\\"\\\"\\n\\n6. Now develop the best fit web search query given the user request above under number 5\\n---\\n\\n**Output Requirements:**  \\nThe Assistant’s output should be in JSON format, structured as follows:\\n\\n{\\n  \\\"reasoning_summary\\\": \\\"Detailed explanation of each analytical chain’s purpose and insights, including key terms and considerations for query formulation.\\\",\\n  \\\"final_search_query\\\": \\\"The single, best-fit search query derived from the meta-reasoning and multi-chain analysis, optimized to answer the research question.\\\"\\n}\\n```\\n\\n---\\n\",\"messages\":{\"messageValues\":[{\"message\":\"You are an advanced data and research retrieval through smart search queires via Bing and Brave websearch APIs. \"},{\"type\":\"HumanMessagePromptTemplate\",\"message\":\"1. **Task:** `\\\"Your task is to develop a web search query that most effectively answers the research question given. Use meta-reasoning and multi-chain analysis to ensure a comprehensive approach.\\\"`\\n\\n2. **Structured Guidance for Chains of Thought:**  \\n    a. **Chain 1:** Break down the research question, identifying keywords and relevant terms.  \\n    b. **Chain 2:** Explore the context and potential sources, determining the types of results that would be most relevant.  \\n    c. **Chain 3:** Refine the query for specificity and completeness, considering how to capture nuances of the question.\\n\\n3. **Final Query Generation:** Based on the insights from the three chains, generate a single, refined search query.\\n\\n4. Data Input:\\n   - **Today's Date:** \\\"2024-11-12T10:21:33.764-05:00\\\"\\n2. **Search Inquiry:** \\n   - **Search Topic to create the query upon it:** \\\"What is the latest stock Market Analysis in mid-term?\\\"\\n\\n\\n---\\n\\n**Output Requirements:**  \\nThe Assistant’s output should be in JSON format, structured as follows:\\n\\n{\\n  \\\"reasoning_summary\\\": \\\"Detailed explanation of each analytical chain’s purpose and insights, including key terms and considerations for query formulation.\\\",\\n  \\\"final_search_query\\\": \\\"The single, best-fit search query derived from the meta-reasoning and multi-chain analysis, optimized to answer the research question.\\\"\\n}\\n```\\n\\n---\\n\"},{\"type\":\"AIMessagePromptTemplate\",\"message\":\"Assessing query functionality\\n\\nI’m evaluating the viability of the assistant's proposed search query. The user questions if it would yield meaningful results on different search engines.\\n\\nClarifying the query\\n\\nOK, let me see. The task involves clarifying the user's needs, ensuring the response aligns with OpenAI's policies, and possibly re-evaluating and correcting any errors in the previous response.\\n\\nRefining search specifics\\n\\nI'm working through refining the search query to focus on specific terms like 'S&P 500', integrating dates such as 'November 2024', and emphasizing phrases for precision.\\n\\nSelf-reflecting on search queries\\n\\nToday, I’m thinking about how to validate search queries for accuracy and realism, ensuring they are practical and likely to yield productive results.\\n\\nAcknowledging insights\\n\\nI’m recognizing and correcting a search query to ensure it’s optimal and effectively aligned with advanced user needs, leading to a more precise output.\\n\\nCrafting a search query\\n\\nI’m crafting a search query to pinpoint the most pertinent recent mid-term stock market analyses. Starting with relevant terms and then exploring potential sources for context and relevance.\\n\\nPinpointing sources and specifics\\n\\nI'm gathering info from financial news, investment reports, and economic research institutions. I’m refining search terms like \\\"mid-term stock market analysis\\\" and \\\"market forecast\\\" to keep results current and nuanced.\\n\\nCrafting the query\\n\\nI’m finalizing the query by merging terms like 'latest' and 'stock market analysis' with 'mid-term', and considering synonyms such as 'market forecast' to refine the search for 2024.\\n\\nTweaking the search\\n\\nI adjusted the search terms to 'latest stock market mid-term outlook 2024,' removing excessive quotes for better clarity and relevance.\\n\\n\\n{\\n  \\\"reasoning_summary\\\": \\\"Chain 1: Broke down the research question to identify key terms such as 'latest', 'stock market analysis', and 'mid-term'. Considered synonyms like 'mid-term outlook', 'market forecast', and included the current year '2024' for recency.\\\\n\\\\nChain 2: Explored the context where the user seeks recent analyses of the stock market with a mid-term perspective. Relevant sources would be financial news outlets, investment banks, and economic research firms. The most useful results would be up-to-date articles or reports offering mid-term forecasts.\\\\n\\\\nChain 3: Refined the query by removing unnecessary quotation marks and simplifying it to reflect how an advanced user might search. Included terms like 'latest', 'mid-term outlook', and '2024' to enhance specificity without limiting the search results unnecessarily.\\\",\\n  \\\"final_search_query\\\": \\\"latest stock market mid-term outlook 2024\\\"\\n}\"}]},\"promptType\":\"define\",\"hasOutputParser\":true},\"typeVersion\":1.4},{\"id\":\"696b4f97-ad29-406b-9157-44ad9d05c9cd\",\"name\":\"Anthropic Chat Model\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatAnthropic\",\"position\":[740,180],\"parameters\":{\"model\":\"claude-3-5-haiku-20241022\",\"options\":{\"topP\":0.8,\"temperature\":0.4,\"maxTokensToSample\":4096}},\"credentials\":{\"anthropicApi\":{\"id\":\"mVKB2CryW6bMm9Qo\",\"name\":\"Anthropic account\"}},\"typeVersion\":1.2},{\"id\":\"82f25610-8b70-4aee-ad90-2616d3389f15\",\"name\":\"OpenAI Chat Model\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\"position\":[900,180],\"parameters\":{\"options\":{\"topP\":0.7,\"maxTokens\":4096,\"maxRetries\":1,\"temperature\":0.5}},\"credentials\":{\"openAiApi\":{\"id\":\"wQQZLwJO9A5nFu8h\",\"name\":\"OpenAi account\"}},\"typeVersion\":1},{\"id\":\"f230bdf0-4a22-4abf-96cd-47f309f0c514\",\"name\":\"Structured Output Parser2\",\"type\":\"@n8n/n8n-nodes-langchain.outputParserStructured\",\"position\":[260,-60],\"parameters\":{\"jsonSchemaExample\":\"{\\n    \\\"chain_of_thought\\\": \\\"Insert your step-by-step reasoning here.\\\",\\n    \\\"Highest_RANKEDURL_1\\\": {\\n        \\\"title\\\": \\\"Insert the First Ranked URL's Title here.\\\",\\n        \\\"link\\\": \\\"Insert the First Ranked URL here.\\\",\\n        \\\"description\\\": \\\"Insert the First Ranked URL's Description here.\\\"\\n    },\\n    \\\"Highest_RANKEDURL_2\\\": {\\n        \\\"title\\\": \\\"Insert the Second Ranked URL's Title here.\\\",\\n        \\\"link\\\": \\\"Insert the Second Ranked URL here.\\\",\\n        \\\"description\\\": \\\"Insert the Second Ranked URL's Description here.\\\"\\n    },\\n    \\\"Highest_RANKEDURL_3\\\": {\\n        \\\"title\\\": \\\"Insert the Third Ranked URL's Title here.\\\",\\n        \\\"link\\\": \\\"Insert the Third Ranked URL here.\\\",\\n        \\\"description\\\": \\\"Insert the Third Ranked URL's Description here.\\\"\\n    },\\n    \\\"Highest_RANKEDURL_4\\\": {\\n        \\\"title\\\": \\\"Insert the Fourth Ranked URL's Title here.\\\",\\n        \\\"link\\\": \\\"Insert the Fourth Ranked URL here.\\\",\\n        \\\"description\\\": \\\"Insert the Fourth Ranked URL's Description here.\\\"\\n    },\\n    \\\"Highest_RANKEDURL_5\\\": {\\n        \\\"title\\\": \\\"Insert the Fifth Ranked URL's Title here.\\\",\\n        \\\"link\\\": \\\"Insert the Fifth Ranked URL here.\\\",\\n        \\\"description\\\": \\\"Insert the Fifth Ranked URL's Description here.\\\"\\n    },\\n    \\\"Highest_RANKEDURL_6\\\": {\\n        \\\"title\\\": \\\"Insert the Sixth Ranked URL's Title here.\\\",\\n        \\\"link\\\": \\\"Insert the Sixth Ranked URL here.\\\",\\n        \\\"description\\\": \\\"Insert the Sixth Ranked URL's Description here.\\\"\\n    },\\n    \\\"Highest_RANKEDURL_7\\\": {\\n        \\\"title\\\": \\\"Insert the Seventh Ranked URL's Title here.\\\",\\n        \\\"link\\\": \\\"Insert the Seventh Ranked URL here.\\\",\\n        \\\"description\\\": \\\"Insert the Seventh Ranked URL's Description here.\\\"\\n    },\\n    \\\"Highest_RANKEDURL_8\\\": {\\n        \\\"title\\\": \\\"Insert the Eighth Ranked URL's Title here.\\\",\\n        \\\"link\\\": \\\"Insert the Eighth Ranked URL here.\\\",\\n        \\\"description\\\": \\\"Insert the Eighth Ranked URL's Description here.\\\"\\n    },\\n    \\\"Highest_RANKEDURL_9\\\": {\\n        \\\"title\\\": \\\"Insert the Ninth Ranked URL's Title here.\\\",\\n        \\\"link\\\": \\\"Insert the Ninth Ranked URL here.\\\",\\n        \\\"description\\\": \\\"Insert the Ninth Ranked URL's Description here.\\\"\\n    },\\n    \\\"Highest_RANKEDURL_10\\\": {\\n        \\\"title\\\": \\\"Insert the Tenth Ranked URL's Title here.\\\",\\n        \\\"link\\\": \\\"Insert the Tenth Ranked URL here.\\\",\\n        \\\"description\\\": \\\"Insert the Tenth Ranked URL's Description here.\\\"\\n    },\\n    \\\"Information_extracted\\\": \\\"Insert all extracted information relevant to the user's query or 'N/A' if none.\\\"\\n}\\n\"},\"typeVersion\":1.2},{\"id\":\"3421ebe5-6a86-435e-b9c6-e3dcf6dd7833\",\"name\":\"Parser Model\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatGoogleGemini\",\"position\":[-180,180],\"parameters\":{\"options\":{\"topP\":0.6,\"temperature\":0.4,\"maxOutputTokens\":4096},\"modelName\":\"models/gemini-1.5-flash-002\"},\"credentials\":{\"googlePalmApi\":{\"id\":\"rTbWGMQGwWtjhNaA\",\"name\":\"Google Gemini(PaLM) Api account 4\"}},\"typeVersion\":1},{\"id\":\"fd19e9f6-d8c7-45df-93d9-ecf7956b461f\",\"name\":\"Agent Model\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatGoogleGemini\",\"position\":[-180,-20],\"parameters\":{\"options\":{\"topP\":0.6,\"temperature\":0.4,\"safetySettings\":{\"values\":[{\"category\":\"HARM_CATEGORY_HARASSMENT\",\"threshold\":\"BLOCK_NONE\"},{\"category\":\"HARM_CATEGORY_HATE_SPEECH\",\"threshold\":\"BLOCK_NONE\"},{\"category\":\"HARM_CATEGORY_SEXUALLY_EXPLICIT\",\"threshold\":\"BLOCK_NONE\"},{\"category\":\"HARM_CATEGORY_DANGEROUS_CONTENT\",\"threshold\":\"BLOCK_NONE\"}]},\"maxOutputTokens\":4086},\"modelName\":\"models/gemini-1.5-flash-002\"},\"credentials\":{\"googlePalmApi\":{\"id\":\"rTbWGMQGwWtjhNaA\",\"name\":\"Google Gemini(PaLM) Api account 4\"}},\"typeVersion\":1},{\"id\":\"156e83ff-928a-4aca-af8b-0c0fa51acd56\",\"name\":\"Sticky Note5\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[560,-20],\"parameters\":{\"color\":6,\"width\":712,\"height\":370,\"content\":\"\\n## Customized Models to Replace\\n\\nIn case you rather to use another LLM Model to Perform the Semantic Search and Re-Ranking, These nodes below are Optimized based on the LLM Structure of OpenAI GPT4o & Anthropic Claude.\\n\"},\"typeVersion\":1}],\"active\":false,\"pinData\":{},\"settings\":{\"executionOrder\":\"v1\"},\"versionId\":\"b824ca9d-5676-4ca5-b97d-e5113d955de2\",\"connections\":{\"Query\":{\"main\":[[{\"node\":\"Query-1 Combined\",\"type\":\"main\",\"index\":0}]]},\"Webhook\":{\"main\":[[{\"node\":\"Date & Time\",\"type\":\"main\",\"index\":0}]]},\"Agent Model\":{\"ai_languageModel\":[[{\"node\":\"Semantic Search - Result Re-Ranker\",\"type\":\"ai_languageModel\",\"index\":0},{\"node\":\"Semantic Search -Query Maker\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"Date & Time\":{\"main\":[[{\"node\":\"Semantic Search -Query Maker\",\"type\":\"main\",\"index\":0}]]},\"Parser Model\":{\"ai_languageModel\":[[{\"node\":\"Auto-fixing Output Parser6\",\"type\":\"ai_languageModel\",\"index\":0},{\"node\":\"Auto-fixing Output Parser\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"Query-1 Combined\":{\"main\":[[{\"node\":\"Semantic Search - Result Re-Ranker\",\"type\":\"main\",\"index\":0}]]},\"OpenAI Chat Model\":{\"ai_languageModel\":[[]]},\"Anthropic Chat Model\":{\"ai_languageModel\":[[]]},\"Auto-fixing Output Parser\":{\"ai_outputParser\":[[{\"node\":\"Semantic Search -Query Maker\",\"type\":\"ai_outputParser\",\"index\":0}]]},\"Structured Output Parser1\":{\"ai_outputParser\":[[{\"node\":\"Auto-fixing Output Parser\",\"type\":\"ai_outputParser\",\"index\":0}]]},\"Structured Output Parser2\":{\"ai_outputParser\":[[{\"node\":\"Auto-fixing Output Parser6\",\"type\":\"ai_outputParser\",\"index\":0}]]},\"Auto-fixing Output Parser6\":{\"ai_outputParser\":[[{\"node\":\"Semantic Search - Result Re-Ranker\",\"type\":\"ai_outputParser\",\"index\":0}]]},\"Semantic Search -Query Maker\":{\"main\":[[{\"node\":\"Query\",\"type\":\"main\",\"index\":0}]]},\"Semantic Search - Result Re-Ranker\":{\"main\":[[{\"node\":\"Respond to Webhook\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "## **Workflow Description**\n\nThis workflow is a powerful, fully automated **web query and semantic reranking system** that allows users to perform precise, detailed searches, intelligently rank search results and provide high-quality, structured output. Built with **AI-powered components** , the workflow leverages **semantic query generation, result re-ranking, and real-time reporting** to deliver actionable insights.\n\nIt is particularly well-suited for **real-time data retrieval** , **market research** , and any domain requiring automated yet customizable search result processing.\n\n* * *\n\n### **How It Works**\n\n  1. **Webhook Integration for Input** :\n\n     * The workflow begins with a **Webhook Node** that captures the user's search query as input, enabling seamless integration with other systems.\n  2. **Step 1: Semantic Query Generation** (Powered by \"Semantic Search - Query Maker\"):\n\n     * Using AI (Google Gemini), the initial query is refined and transformed into a **context-aware, expert-level search query**.\n     * The process ensures that the search engine retrieves the most relevant and precise results.\n  3. **Step 2: Web Search Execution** :\n\n     * A free Brave Search API processes the refined query to fetch search results, ensuring speed and cost efficiency.\n  4. **Step 3: Semantic Re-Ranking of Results** (Powered by \"Semantic Search - Result Re-Ranker\"):\n\n     * The workflow reranks the search results based on relevance to the original question, prioritizing the most relevant URLs dynamically.\n     * Results are passed through **AI-powered intelligent reranking** to ensure the final output reflects optimal relevance and quality.\n  5. **Step 4: Structured Output Generation** :\n\n     * Results are converted into a well-structured, organized JSON format, ranking the **top 10 search results** with their titles, links, and descriptions.\n     * Missing ranks (if fewer than 10 results) are handled gracefully with placeholders, ensuring consistency.\n  6. **Step 5: Real-Time Reporting** :\n\n     * The reranked search results are sent back to the user or integrated system via the Webhook Node in a **JSON-formatted response**.\n     * Reports are highly structured and ready for downstream processing or consumption.\n\n\n\n* * *\n\n### **Key Features**\n\n  1. **AI-Powered Query Refinement** :\n\n     * Transforms basic queries into detailed, expert-level search terms for optimal results.\n  2. **Dual-Stage Semantic Search** :\n\n     * Combines **query generation** and **result reranking** for precise, high-relevance outputs.\n  3. **Top 10 Result Reranking** :\n\n     * Dynamically ranks and organizes the top 10 results based on semantic relevance to the query.\n  4. **Customizable Integration** :\n\n     * Fully modifiable for alternative APIs or integrations, such as other search engines or custom ranking logic.\n  5. **JSON-Formatted Structured Results** :\n\n     * Outputs reranked results in a standardized format, ideal for integration into systems requiring machine-readable data.\n  6. **Webhook-Based Flexibility** :\n\n     * Works seamlessly with Webhook inputs for easy deployment in diverse workflows.\n  7. **Cost-Effective API Usage** :\n\n     * Pre-integrated with the free Brave Search API, minimizing operational costs while delivering accurate search results.\n\n\n\n* * *\n\n### **Instructions for API Setup**\n\n  1. **Brave Search API** : \n     * Visit [api.search.brave.com](https://api.search.brave.com) to obtain a free-tier API key for web search.\n  2. **AI Integration** (Google Gemini): \n     * Visit Google AI Studio and generate an API key for semantic query generation and reranking.\n  3. **Webhook Configuration** : \n     * Set up the input Webhook to capture search queries and the output Webhook to deliver reranked results.\n\n\n\n* * *\n\n### **Why Choose This Workflow?**\n\n  * **Precision and Relevance** : Combines AI-based query generation with advanced reranking for accurate results.\n  * **Fully Customizable** : Easily adapt the workflow to alternative APIs, search engines, or ranking logic.\n  * **Real-Time Insights** : Provides structured, real-time output ready for immediate use.\n  * **Scalable and Modular** : Ideal for businesses, researchers, and data analysts needing a robust, repeatable solution.\n\n\n\n* * *\n\n### **Tags**\n\nAI Workflow, Semantic Search, Query Refinement, Search Result Reranking, Real-Time Search, Web Search Automation, Google Search, Brave Search, News Search, API Integration, Market Research, Competitive Intelligence, Business Intelligence,Google Gemini, Anthropic Claude, OpenAI, GPT, LLM\n",
  "readme_html": "<!--[--><div data-v-50766329=\"\"><h2><strong>Workflow Description</strong></h2>\n<p>This workflow is a powerful, fully automated <strong>web query and semantic reranking system</strong> that allows users to perform precise, detailed searches, intelligently rank search results and provide high-quality, structured output. Built with <strong>AI-powered components</strong>, the workflow leverages <strong>semantic query generation, result re-ranking, and real-time reporting</strong> to deliver actionable insights.</p>\n<p>It is particularly well-suited for <strong>real-time data retrieval</strong>, <strong>market research</strong>, and any domain requiring automated yet customizable search result processing.</p>\n<hr>\n<h3><strong>How It Works</strong></h3>\n<ol>\n<li>\n<p><strong>Webhook Integration for Input</strong>:</p>\n<ul>\n<li>The workflow begins with a <strong>Webhook Node</strong> that captures the user's search query as input, enabling seamless integration with other systems.</li>\n</ul>\n</li>\n<li>\n<p><strong>Step 1: Semantic Query Generation</strong> (Powered by \"Semantic Search - Query Maker\"):</p>\n<ul>\n<li>Using AI (Google Gemini), the initial query is refined and transformed into a <strong>context-aware, expert-level search query</strong>.</li>\n<li>The process ensures that the search engine retrieves the most relevant and precise results.</li>\n</ul>\n</li>\n<li>\n<p><strong>Step 2: Web Search Execution</strong>:</p>\n<ul>\n<li>A free Brave Search API processes the refined query to fetch search results, ensuring speed and cost efficiency.</li>\n</ul>\n</li>\n<li>\n<p><strong>Step 3: Semantic Re-Ranking of Results</strong> (Powered by \"Semantic Search - Result Re-Ranker\"):</p>\n<ul>\n<li>The workflow reranks the search results based on relevance to the original question, prioritizing the most relevant URLs dynamically.</li>\n<li>Results are passed through <strong>AI-powered intelligent reranking</strong> to ensure the final output reflects optimal relevance and quality.</li>\n</ul>\n</li>\n<li>\n<p><strong>Step 4: Structured Output Generation</strong>:</p>\n<ul>\n<li>Results are converted into a well-structured, organized JSON format, ranking the <strong>top 10 search results</strong> with their titles, links, and descriptions.</li>\n<li>Missing ranks (if fewer than 10 results) are handled gracefully with placeholders, ensuring consistency.</li>\n</ul>\n</li>\n<li>\n<p><strong>Step 5: Real-Time Reporting</strong>:</p>\n<ul>\n<li>The reranked search results are sent back to the user or integrated system via the Webhook Node in a <strong>JSON-formatted response</strong>.</li>\n<li>Reports are highly structured and ready for downstream processing or consumption.</li>\n</ul>\n</li>\n</ol>\n<hr>\n<h3><strong>Key Features</strong></h3>\n<ol>\n<li>\n<p><strong>AI-Powered Query Refinement</strong>:</p>\n<ul>\n<li>Transforms basic queries into detailed, expert-level search terms for optimal results.</li>\n</ul>\n</li>\n<li>\n<p><strong>Dual-Stage Semantic Search</strong>:</p>\n<ul>\n<li>Combines <strong>query generation</strong> and <strong>result reranking</strong> for precise, high-relevance outputs.</li>\n</ul>\n</li>\n<li>\n<p><strong>Top 10 Result Reranking</strong>:</p>\n<ul>\n<li>Dynamically ranks and organizes the top 10 results based on semantic relevance to the query.</li>\n</ul>\n</li>\n<li>\n<p><strong>Customizable Integration</strong>:</p>\n<ul>\n<li>Fully modifiable for alternative APIs or integrations, such as other search engines or custom ranking logic.</li>\n</ul>\n</li>\n<li>\n<p><strong>JSON-Formatted Structured Results</strong>:</p>\n<ul>\n<li>Outputs reranked results in a standardized format, ideal for integration into systems requiring machine-readable data.</li>\n</ul>\n</li>\n<li>\n<p><strong>Webhook-Based Flexibility</strong>:</p>\n<ul>\n<li>Works seamlessly with Webhook inputs for easy deployment in diverse workflows.</li>\n</ul>\n</li>\n<li>\n<p><strong>Cost-Effective API Usage</strong>:</p>\n<ul>\n<li>Pre-integrated with the free Brave Search API, minimizing operational costs while delivering accurate search results.</li>\n</ul>\n</li>\n</ol>\n<hr>\n<h3><strong>Instructions for API Setup</strong></h3>\n<ol>\n<li><strong>Brave Search API</strong>:\n<ul>\n<li>Visit <a href=\"https://api.search.brave.com\" rel=\"ugc nofollow\" target=\"_blank\">api.search.brave.com</a> to obtain a free-tier API key for web search.</li>\n</ul>\n</li>\n<li><strong>AI Integration</strong> (Google Gemini):\n<ul>\n<li>Visit Google AI Studio and generate an API key for semantic query generation and reranking.</li>\n</ul>\n</li>\n<li><strong>Webhook Configuration</strong>:\n<ul>\n<li>Set up the input Webhook to capture search queries and the output Webhook to deliver reranked results.</li>\n</ul>\n</li>\n</ol>\n<hr>\n<h3><strong>Why Choose This Workflow?</strong></h3>\n<ul>\n<li><strong>Precision and Relevance</strong>: Combines AI-based query generation with advanced reranking for accurate results.</li>\n<li><strong>Fully Customizable</strong>: Easily adapt the workflow to alternative APIs, search engines, or ranking logic.</li>\n<li><strong>Real-Time Insights</strong>: Provides structured, real-time output ready for immediate use.</li>\n<li><strong>Scalable and Modular</strong>: Ideal for businesses, researchers, and data analysts needing a robust, repeatable solution.</li>\n</ul>\n<hr>\n<h3><strong>Tags</strong></h3>\n<p>AI Workflow, Semantic Search, Query Refinement, Search Result Reranking, Real-Time Search, Web Search Automation, Google Search, Brave Search, News Search, API Integration, Market Research, Competitive Intelligence, Business Intelligence,Google Gemini, Anthropic Claude, OpenAI, GPT, LLM</p>\n</div><!--]-->",
  "readme_zh": "## **工作流程说明**\n\n本流程是一个功能强大、全自动的**网络查询与语义重排系统**，支持用户执行精准细致的搜索，智能排序搜索结果并提供高质量结构化输出。该系统采用**AI驱动组件**，通过**语义查询生成、结果重排序和实时报告**三大核心功能输出可执行洞察。\n\n特别适用于**实时数据抓取**、**市场调研**以及其他需要自动化且可定制化搜索结果处理的场景。\n\n* * *\n\n### **运作原理**\n\n  1. **Webhook输入集成**：\n     * 流程始于**Webhook节点**，通过捕获用户搜索请求实现与其他系统的无缝对接\n  2. **第一阶段：语义查询生成**（基于\"语义搜索-查询生成器\"）：\n     * 运用AI（Google Gemini）将初始查询优化为**具备上下文感知的专业级搜索语句**\n     * 确保搜索引擎获取最相关、最精确的结果\n  3. **第二阶段：执行网络搜索**：\n     * 调用免费Brave搜索API处理优化后的查询，兼顾速度与经济性\n  4. **第三阶段：语义结果重排**（基于\"语义搜索-结果重排器\"）：\n     * 根据与原始问题的相关性动态重排搜索结果，优先呈现最相关URL\n     * 通过**AI智能重排技术**确保最终输出具有最优相关性与质量\n  5. **第四阶段：结构化输出生成**：\n     * 将结果转换为组织有序的JSON格式，呈现**前10名搜索结果**及其标题、链接与描述\n     * 智能处理不足10条结果的情况，用占位符保持格式统一\n  6. **第五阶段：实时报告**：\n     * 通过Webhook节点将重排结果以**JSON格式响应**返回用户或集成系统\n     * 生成高度结构化的报告，可直接用于下游处理或分析",
  "title_zh": "智能网络查询与语义重排序流程（基于Brave和Google Gemini）",
  "publish_date_zh": "最后更新于5个月前",
  "workflow_json_zh": "{\n  \"id\": \"wa2uEnSIowqSrHoY\",\n  \"meta\": {\n    \"instanceId\": \"cca06617664f52c5a019ea575691fdbce675dd95dc0452af5f13dbe76d615b69\"\n  },\n  \"name\": \"Intelligent Web Query and Semantic Re-Ranking Flow\",\n  \"tags\": [],\n  \"nodes\": [\n    {\n      \"id\": \"8e7dc5cb-6822-4ef6-9e5a-2b350a1526bf\",\n      \"name\": \"Sticky Note4\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -640,\n        -620\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 1172,\n        \"height\": 970,\n        \"content\": \"## 第一步：获取免费的Brave网页搜索查询API密钥\\n\\n按照以下步骤获取Brave提供的免费网页搜索API服务：\\n\\n1. 访问 api.search.brave.com\\n2. 注册账号\\n3. 订阅免费套餐（无需付费）\\n4. 进入API密钥管理页面\\n5. 生成API密钥时，订阅类型选择\\\"免费\\\"\\n6. 在\\\"查询\\\"节点中，将\\\"X-Subscription-Token\\\"值替换为你的API密钥\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"5bb3e68f-7693-4d4b-b794-843f2c3535e0\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -1580,\n        -420\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 680,\n        \"height\": 360,\n        \"content\": \"## 如需将此节点更改为Webhook或其他任意项目：\\n\\n- 若需将输入类型从Webhook切换为其他项目，请务必前往查询1和查询1排序器，将Webhook输入替换为您节点的输入。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"f2fc02f9-a78a-4e87-be85-0032492a9f3f\",\n      \"name\": \"Date & Time\",\n      \"type\": \"n8n-nodes-base.dateTime\",\n      \"position\": [\n        -820,\n        -240\n      ],\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"6f18ebbd-83db-4900-bc2e-0a9f23d6e8c8\",\n      \"name\": \"Webhook\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"position\": [\n        -1340,\n        -240\n      ],\n      \"webhookId\": \"962f1468-c80f-4c0c-8555-a0acf648ede4\",\n      \"parameters\": {\n        \"path\": \"962f1468-c80f-4c0c-8555-a0acf648ede4\",\n        \"options\": {},\n        \"responseMode\": \"responseNode\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"ba5ea83e-1b47-475b-863f-269ae293729a\",\n      \"name\": \"Auto-fixing Output Parser6\",\n      \"type\": \"@n8n/n8n-nodes-langchain.outputParserAutofixing\",\n      \"position\": [\n        180,\n        -140\n      ],\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"ca426b6d-5412-4c5b-a55c-009a47c59a81\",\n      \"name\": \"Auto-fixing Output Parser\",\n      \"type\": \"@n8n/n8n-nodes-langchain.outputParserAutofixing\",\n      \"position\": [\n        -580,\n        -140\n      ],\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"501d5390-5317-4973-a3e9-b0f502399c2b\",\n      \"name\": \"Structured Output Parser1\",\n      \"type\": \"@n8n/n8n-nodes-langchain.outputParserStructured\",\n      \"position\": [\n        -460,\n        -60\n      ],\n      \"parameters\": {\n        \"jsonSchemaExample\": \"{\\n  \\\"reasoning_summary\\\": \\\"Detailed explanation of each analytical chain’s purpose and insights, including key terms and considerations for query formulation.\\\",\\n  \\\"final_search_query\\\": \\\"The single, best-fit search query derived from the meta-reasoning and multi-chain analysis, optimized to answer the research question.\\\"\\n}\"\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"a27e75c7-0307-4d71-9266-5a56b297a6e3\",\n      \"name\": \"Query-1 Combined\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        -80,\n        -240\n      ],\n      \"parameters\": {\n        \"jsCode\": \"// Initialize an empty string to store all title, url, and description pairs\\nlet aggregatedOutputText = \\\"\\\";\\n\\n// Loop through all items passed to this Function node\\nfor (let item of items) {\\n  // Access the JSON data from \\\"Query 1\\\" node for the current item\\n  const queryData = item.json;\\n\\n  // Ensure there is a \\\"web.results\\\" array to process\\n  if (queryData.web?.results && Array.isArray(queryData.web.results)) {\\n    // Loop through all results in the \\\"web.results\\\" array\\n    for (let result of queryData.web.results) {\\n      // Extract the title, url, and description for each result\\n      const title = result.title || \\\"No Title\\\";\\n      const url = result.url || \\\"No URL\\\";\\n      const description = result.description || \\\"No Description\\\";\\n\\n      // Append the values to the aggregated string\\n      aggregatedOutputText += `Title: ${title}\\\\nURL: ${url}\\\\nDescription: ${description}\\\\n\\\\n`;\\n    }\\n  } else {\\n    // If no results array, handle gracefully\\n    aggregatedOutputText += \\\"No results found for this item.\\\\n\\\\n\\\";\\n  }\\n}\\n\\n// Trim the final string to remove any trailing newline and whitespace\\naggregatedOutputText = aggregatedOutputText.trim();\\n\\n// Return a single item containing the aggregated output as a string\\nreturn [\\n  {\\n    json: {\\n      aggregated_text: aggregatedOutputText\\n    }\\n  }\\n];\\n\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"acbdbe94-b5a7-4ec9-9fc8-c3ab147f42fa\",\n      \"name\": \"Respond to Webhook\",\n      \"type\": \"n8n-nodes-base.respondToWebhook\",\n      \"position\": [\n        640,\n        -240\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"respondWith\": \"text\",\n        \"responseBody\": \"={\\n    \\\"Highest_RANKEDURL_1\\\": {\\n        \\\"title\\\": \\\"{{ $item('0').$node['Semantic Search - Result Re-Ranker'].json['output']['Highest_RANKEDURL_1']['title'] }}\\\",\\n        \\\"link\\\": \\\"{{ $item('0').$node['Semantic Search - Result Re-Ranker'].json['output']['Highest_RANKEDURL_1']['link'] }}\\\",\\n        \\\"description\\\": \\\"{{ $item('0').$node['Semantic Search - Result Re-Ranker'].json['output']['Highest_RANKEDURL_1']['description'] }}\\\"\\n    },\\n    \\\"Highest_RANKEDURL_2\\\": {\\n        \\\"title\\\": \\\"{{ $item('0').$node['Semantic Search - Result Re-Ranker'].json['output']['Highest_RANKEDURL_2']['title'] }}\\\",\\n        \\\"link\\\": \\\"{{ $item('0').$node['Semantic Search - Result Re-Ranker'].json['output']['Highest_RANKEDURL_2']['link'] }}\\\",\\n        \\\"description\\\": \\\"{{ $item('0').$node['Semantic Search - Result Re-Ranker'].json['output']['Highest_RANKEDURL_2']['description'] }}\\\"\\n    },\\n    \\\"Highest_RANKEDURL_3\\\": {\\n        \\\"title\\\": \\\"{{ $item('0').$node['Semantic Search - Result Re-Ranker'].json['output']['Highest_RANKEDURL_3']['title'] }}\\\",\\n        \\\"link\\\": \\\"{{ $item('0').$node['Semantic Search - Result Re-Ranker'].json['output']['Highest_RANKEDURL_3']['link'] }}\\\",\\n        \\\"description\\\": \\\"{{ $item('0').$node['Semantic Search - Result Re-Ranker'].json['output']['Highest_RANKEDURL_3']['description'] }}\\\"\\n    },\\n    \\\"Highest_RANKEDURL_4\\\": {\\n        \\\"title\\\": \\\"{{ $item('0').$node['Semantic Search - Result Re-Ranker'].json['output']['Highest_RANKEDURL_4']['title'] }}\\\",\\n        \\\"link\\\": \\\"{{ $item('0').$node['Semantic Search - Result Re-Ranker'].json['output']['Highest_RANKEDURL_4']['link'] }}\\\",\\n        \\\"description\\\": \\\"{{ $item('0').$node['Semantic Search - Result Re-Ranker'].json['output']['Highest_RANKEDURL_4']['description'] }}\\\"\\n    },\\n    \\\"Highest_RANKEDURL_5\\\": {\\n        \\\"title\\\": \\\"{{ $item('0').$node['Semantic Search - Result Re-Ranker'].json['output']['Highest_RANKEDURL_5']['title'] }}\\\",\\n        \\\"link\\\": \\\"{{ $item('0').$node['Semantic Search - Result Re-Ranker'].json['output']['Highest_RANKEDURL_5']['link'] }}\\\",\\n        \\\"description\\\": \\\"{{ $item('0').$node['Semantic Search - Result Re-Ranker'].json['output']['Highest_RANKEDURL_5']['description'] }}\\\"\\n    },\\n    \\\"Highest_RANKEDURL_6\\\": {\\n        \\\"title\\\": \\\"{{ $item('0').$node['Semantic Search - Result Re-Ranker'].json['output']['Highest_RANKEDURL_6']['title'] }}\\\",\\n        \\\"link\\\": \\\"{{ $item('0').$node['Semantic Search - Result Re-Ranker'].json['output']['Highest_RANKEDURL_6']['link'] }}\\\",\\n        \\\"description\\\": \\\"{{ $item('0').$node['Semantic Search - Result Re-Ranker'].json['output']['Highest_RANKEDURL_6']['description'] }}\\\"\\n    },\\n    \\\"Highest_RANKEDURL_7\\\": {\\n        \\\"title\\\": \\\"{{ $item('0').$node['Semantic Search - Result Re-Ranker'].json['output']['Highest_RANKEDURL_7']['title'] }}\\\",\\n        \\\"link\\\": \\\"{{ $item('0').$node['Semantic Search - Result Re-Ranker'].json['output']['Highest_RANKEDURL_7']['link'] }}\\\",\\n        \\\"description\\\": \\\"{{ $item('0').$node['Semantic Search - Result Re-Ranker'].json['output']['Highest_RANKEDURL_7']['description'] }}\\\"\\n    },\\n    \\\"Highest_RANKEDURL_8\\\": {\\n        \\\"title\\\": \\\"{{ $item('0').$node['Semantic Search - Result Re-Ranker'].json['output']['Highest_RANKEDURL_8']['title'] }}\\\",\\n        \\\"link\\\": \\\"{{ $item('0').$node['Semantic Search - Result Re-Ranker'].json['output']['Highest_RANKEDURL_8']['link'] }}\\\",\\n        \\\"description\\\": \\\"{{ $item('0').$node['Semantic Search - Result Re-Ranker'].json['output']['Highest_RANKEDURL_8']['description'] }}\\\"\\n    },\\n    \\\"Highest_RANKEDURL_9\\\": {\\n        \\\"title\\\": \\\"{{ $item('0').$node['Semantic Search - Result Re-Ranker'].json['output']['Highest_RANKEDURL_9']['title'] }}\\\",\\n        \\\"link\\\": \\\"{{ $item('0').$node['Semantic Search - Result Re-Ranker'].json['output']['Highest_RANKEDURL_9']['link'] }}\\\",\\n        \\\"description\\\": \\\"{{ $item('0').$node['Semantic Search - Result Re-Ranker'].json['output']['Highest_RANKEDURL_9']['description'] }}\\\"\\n    },\\n    \\\"Highest_RANKEDURL_10\\\": {\\n        \\\"title\\\": \\\"{{ $item('0').$node['Semantic Search - Result Re-Ranker'].json['output']['Highest_RANKEDURL_10']['title'] }}\\\",\\n        \\\"link\\\": \\\"{{ $item('0').$node['Semantic Search - Result Re-Ranker'].json['output']['Highest_RANKEDURL_10']['link'] }}\\\",\\n        \\\"description\\\": \\\"{{ $item('0').$node['Semantic Search - Result Re-Ranker'].json['output']['Highest_RANKEDURL_10']['description'] }}\\\"\\n    },\\n    \\\"Information_extracted\\\": \\\"{{ $item('0').$node['Semantic Search - Result Re-Ranker'].json['output']['Information_extracted'] }}\\\"\\n}\\n\"\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"b8b6ae73-586a-406f-9641-57e2625f800c\",\n      \"name\": \"Semantic Search - Result Re-Ranker\",\n      \"type\": \"@n8n/n8n-nodes-langchain.chainLlm\",\n      \"onError\": \"continueRegularOutput\",\n      \"position\": [\n        100,\n        -240\n      ],\n      \"parameters\": {\n        \"text\": \"=\\n**Objective:**\\n\\nFor the user's query, web search results are provided. Your tasks are:\\n\\n1. **Rank the links** based on how well they match the user's query.\\n2. **Extract relevant information** from the descriptions provided. If no relevant information is found, return \\\"N/A\\\".\\n\\n---\\n\\n**Task:**\\n\\n**Step 1: Understand the User's Intent**\\n\\n- Determine what the user is truly and technically looking for.\\n- The user's request query is: \\\"{{ $('Webhook').item.json.query['Research Question'] }}\\\"\\n- The serach results below, however their  performance seem, have been based on this query \\\"{{ $item(\\\"0\\\").$node[\\\"Semantic Search -Query Maker\\\"].json[\\\"output\\\"][\\\"final_search_query\\\"] }}\\\". If the result are not satisfactory or missing due to bad query making, you should note that as well for the neww query making.\\n- To nesure being time aware , realize todays date is: \\\"{{ $item(\\\"0\\\").$node[\\\"Date & Time\\\"].json[\\\"currentDate\\\"] }}\\\"\\n\\n- Follow a three-step chain of thought to comprehend the user's needs. Think out loud.\\n\\n---\\n\\n**Step 2: Rank the Links**\\n\\n- From the URLs and description snippets provided, **rank the top 10 websites** that are most likely to contain the required information.\\n- Use the titles, descriptions, and sources to inform your ranking.\\n\\n**Links, Titles, and Descriptions:**\\n\\n{{ $json.aggregated_text }}\\n\\n---\\n\\nThis list completes the structure up to 20 results as you requested. Let me know if there’s anything more you need!\\n\\n---\\n\\n**Step 3: Analyze and Create a Follow-up Query**\\n\\n- Recognize that for the user's request:\\n\\n  `\\\"{{ $('Webhook').item.json.query['Research Question'] }}\\\"`\\n\\n  The results provided are based on the assistant's generated search query:\\n\\n  `\\\"{{ $item(\\\"0\\\").$node[\\\"Semantic Search -Query Maker\\\"].json[\\\"output\\\"][\\\"final_search_query\\\"] }}\\\"`\\n\\n- Analyze and revise any issues or new insights through multi-step thinking to create a follow-up query.\\n\\n**Indications and Priorities:**\\n\\n1. **No Results Received:** If no search items are shared, the search query may have been ineffective (e.g., too specific, incorrect parameters).\\n2. **Insufficient or Unpromising Results:** If fewer than 20 but more than 5 results are provided, and none seem promising, the search query may need refinement.\\n3. **Successful Results with Potential Follow-up:** If none of the above issues occurred and the search results provide answers or suggest a follow-up, create a new query. This could be a new topic, a deep dive, or a parallel factor that offers additional benefits.\\n\\n- Provide your chain of thought that connects the user's request to the actual information.\\n\\n- Deliver precise, detailed, and value-oriented information relevant to the user's query.\\n\\n**Step 4: Query making notes and examples**: \\n\\nThe queries must not be long tails , as they result in 0 websearch reutrns. We give you some examples of good web search queries:\\nExamples:\\n\\nUser Question: \\\"What is the current state of the U.S. economy in 2024?\\\"\\nEffective Search Query: \\\"U.S. Economy Analysis Report 2024\\\"\\n\\nUser Question: \\\"What are the recent advancements in artificial intelligence?\\\"\\nEffective Search Query: \\\"2024 Artificial Intelligence Developments\\\"\\n\\nUser Question: \\\"How is climate change affecting agriculture globally?\\\"\\nEffective Search Query: \\\"Global Impact of Climate Change on Agriculture 2024\\\"\\n\\nUser Question: \\\"What are the latest trends in cybersecurity threats?\\\"\\nEffective Search Query: \\\"Cybersecurity Threats and Trends 2024\\\"\\n\\nUser Question: \\\"What is the outlook for renewable energy investments?\\\"\\nEffective Search Query: \\\"Renewable Energy Investment Outlook 2024\\\"\\n\\n**Step 5: Query making*: \\nor query making remember as we said:\\n   - **Today's Date:** \\\"{{ $item(\\\"0\\\").$node[\\\"Date & Time\\\"].json[\\\"currentDate\\\"] }}\\\"\\n **Search Inquiry:** \\n   - **Search Topic to create the query upon it:**{{ $item(\\\"0\\\").$node[\\\"Webhook\\\"].json[\\\"query\\\"][\\\"Research Question\\\"] }}\\\"\\\"\\n\\n\\n---\\n\\n**Step 6: Output Format**\\n\\nEnsure the response is in the following JSON format:\\n\\n{\\n    \\\"chain_of_thought\\\": \\\"Insert your step-by-step reasoning here.\\\",\\n    \\\"Highest_RANKEDURL_1\\\": {\\n        \\\"title\\\": \\\"Insert the First Ranked URL's Title here.\\\",\\n        \\\"link\\\": \\\"Insert the First Ranked URL here.\\\",\\n        \\\"description\\\": \\\"Insert the First Ranked URL's Description here.\\\"\\n    },\\n    \\\"Highest_RANKEDURL_2\\\": {\\n        \\\"title\\\": \\\"Insert the Second Ranked URL's Title here.\\\",\\n        \\\"link\\\": \\\"Insert the Second Ranked URL here.\\\",\\n        \\\"description\\\": \\\"Insert the Second Ranked URL's Description here.\\\"\\n    },\\n    \\\"Highest_RANKEDURL_3\\\": {\\n        \\\"title\\\": \\\"Insert the Third Ranked URL's Title here.\\\",\\n        \\\"link\\\": \\\"Insert the Third Ranked URL here.\\\",\\n        \\\"description\\\": \\\"Insert the Third Ranked URL's Description here.\\\"\\n    },\\n    \\\"Highest_RANKEDURL_4\\\": {\\n        \\\"title\\\": \\\"Insert the Fourth Ranked URL's Title here.\\\",\\n        \\\"link\\\": \\\"Insert the Fourth Ranked URL here.\\\",\\n        \\\"description\\\": \\\"Insert the Fourth Ranked URL's Description here.\\\"\\n    },\\n    \\\"Highest_RANKEDURL_5\\\": {\\n        \\\"title\\\": \\\"Insert the Fifth Ranked URL's Title here.\\\",\\n        \\\"link\\\": \\\"Insert the Fifth Ranked URL here.\\\",\\n        \\\"description\\\": \\\"Insert the Fifth Ranked URL's Description here.\\\"\\n    },\\n    \\\"Highest_RANKEDURL_6\\\": {\\n        \\\"title\\\": \\\"Insert the Sixth Ranked URL's Title here.\\\",\\n        \\\"link\\\": \\\"Insert the Sixth Ranked URL here.\\\",\\n        \\\"description\\\": \\\"Insert the Sixth Ranked URL's Description here.\\\"\\n    },\\n    \\\"Highest_RANKEDURL_7\\\": {\\n        \\\"title\\\": \\\"Insert the Seventh Ranked URL's Title here.\\\",\\n        \\\"link\\\": \\\"Insert the Seventh Ranked URL here.\\\",\\n        \\\"description\\\": \\\"Insert the Seventh Ranked URL's Description here.\\\"\\n    },\\n    \\\"Highest_RANKEDURL_8\\\": {\\n        \\\"title\\\": \\\"Insert the Eighth Ranked URL's Title here.\\\",\\n        \\\"link\\\": \\\"Insert the Eighth Ranked URL here.\\\",\\n        \\\"description\\\": \\\"Insert the Eighth Ranked URL's Description here.\\\"\\n    },\\n    \\\"Highest_RANKEDURL_9\\\": {\\n        \\\"title\\\": \\\"Insert the Ninth Ranked URL's Title here.\\\",\\n        \\\"link\\\": \\\"Insert the Ninth Ranked URL here.\\\",\\n        \\\"description\\\": \\\"Insert the Ninth Ranked URL's Description here.\\\"\\n    },\\n    \\\"Highest_RANKEDURL_10\\\": {\\n        \\\"title\\\": \\\"Insert the Tenth Ranked URL's Title here.\\\",\\n        \\\"link\\\": \\\"Insert the Tenth Ranked URL here.\\\",\\n        \\\"description\\\": \\\"Insert the Tenth Ranked URL's Description here.\\\"\\n    },\\n    \\\"Information_extracted\\\": \\\"Insert all extracted information relevant to the user's query or 'N/A' if none.\\\"\\n}\\n\",\n        \"messages\": {\n          \"messageValues\": [\n            {\n              \"message\": \"=\\nYou are an expert information retrieval and critical evaluation assistant designed to process, rank, and extract high-relevance content from web search results for complex user queries. You must provide value-oriented insights while refining searches based on relevance and context sensitivity. \\n\\n**Your Process and Priorities:**\\n\\n#### 1. **Determine the User's Technical Intent**\\n   - Interpret the user's core question provided as `{{ $item(\\\"0\\\").$node[\\\"Webhook\\\"].json[\\\"query\\\"][\\\"Research Question\\\"] }}`, discerning underlying objectives and specialized needs.\\n   - Recognize that the search results may have been generated from a **secondary query**: `{{ $item(\\\"0\\\").$node[\\\"Semantic Search -Query Maker\\\"].json[\\\"output\\\"][\\\"final_search_query\\\"] }}`. \\n   - Judge the adequacy of this generated query. If it does not meet the user’s objectives, highlight the need for query refinement and prepare to adapt the approach.\\n   - Stay mindful of the date context, using `{{ $item(\\\"0\\\").$node[\\\"Date & Time\\\"].json[\\\"currentDate\\\"] }}` to assess the freshness of content or time-sensitive relevance.\\n\\n#### 2. **Rank Results Based on Analytical Relevance**\\n   - From the search results provided, **rank the top 3 URLs** that most closely align with the user’s intent and technical needs.\\n     - Use multi-dimensional analysis to assess how each link’s title, description, and source match the user’s objective.\\n     - Prioritize results based on credibility, relevance, and their potential to add depth to the user’s inquiry.\\n   - Your goal is to select the highest-value links, disregarding results that offer superficial, off-topic, or outdated information.\\n\\n#### 3. **Extract Key Information**\\n   - For each of the top 3 ranked results, extract insights and details from the description snippets that directly address the user’s query.\\n   - If no pertinent information is available in a description, record `\\\"N/A\\\"` to indicate its lack of relevance.\\n\\n#### 4. **Evaluate for Potential Query Improvement**\\n   - Evaluate the relevance and coverage of search results:\\n     - If fewer than 5 relevant results are present, consider that the initial query may be too narrow, specific, or otherwise misaligned.\\n     - Generate a **refined query** that is adjusted to better match the user’s likely needs and produce higher-quality results.\\n   - Use advanced language modifications, new keyword suggestions, or rephrasing to formulate a search query that enhances alignment with the user’s goals.\\n\"\n            }\n          ]\n        },\n        \"promptType\": \"define\",\n        \"hasOutputParser\": true\n      },\n      \"retryOnFail\": true,\n      \"typeVersion\": 1.4\n    },\n    {\n      \"id\": \"a1ca671d-0b0c-4717-9def-93fdb965de8d\",\n      \"name\": \"Query\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        -240,\n        -240\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.search.brave.com/res/v1/web/search\",\n        \"options\": {},\n        \"sendQuery\": true,\n        \"sendHeaders\": true,\n        \"queryParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"q\",\n              \"value\": \"={{ $json.output.final_search_query }}\"\n            }\n          ]\n        },\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"Accept\",\n              \"value\": \"application/json\"\n            },\n            {\n              \"name\": \"Accept-Encoding\",\n              \"value\": \"gzip\"\n            },\n            {\n              \"name\": \"X-Subscription-Token\",\n              \"value\": \"<Insert Your API Key Here>\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"d3cc4e7c-3ead-4d38-9b51-a11cd9d7faeb\",\n      \"name\": \"Webhook Call\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        -180,\n        1040\n      ],\n      \"parameters\": {\n        \"url\": \"https://primary-production-8aa4.up.railway.app/webhook-test/962f1468-c80f-4c0c-8555-a0acf648ede4\",\n        \"options\": {},\n        \"sendQuery\": true,\n        \"queryParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"Research Question\",\n              \"value\": \"what is the latest news in global world in politics and economy?\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"6931404b-94d6-4b9d-9f0a-124012212eb5\",\n      \"name\": \"Sticky Note6\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -640,\n        420\n      ],\n      \"parameters\": {\n        \"color\": 3,\n        \"width\": 1180,\n        \"height\": 840,\n        \"content\": \"## 第二步：配置Webhook调用节点\\n\\n**设置Webhook调用并将其用于工作流的操作指南**\\n\\n本节点用于向工作流（本图表中部分构建）发送**网络搜索查询**并返回结果。请按以下步骤正确配置和使用：\\n\\n1. **定位工作流中的\\\"Webhook\\\"节点**：\\n   - 转到上方工作流中的首个\\\"Webhook\\\"节点\\n   - 在节点配置中将**Webhook URL选项**从\\\"测试URL\\\"切换为\\\"生产环境URL\\\"\\n   - 复制生成的**生产环境URL**\\n\\n2. **将Webhook URL粘贴至HTTP节点**：\\n   - 在目标工作流中找到**HTTP请求**节点\\n   - 将复制的**生产环境URL**粘贴到HTTP请求节点的URL字段，实现两个工作流的连接\\n\\n3. **发送研究请求**：\\n   - 向该工作流发送请求时，请确保在HTTP请求节点的**\\\"Research Question\\\"参数**中包含您的网络搜索查询\\n\\n4. **移动Webhook调用节点**：\\n   - 将此**Webhook调用节点**移至需要研究结果的工作流中\\n   - 确保节点正确连接并配置为将数据发送至主工作流\\n\\n（注：根据技术文档翻译规范，保留\\\"Webhook/HTTP/URL\\\"等专业术语不翻译；\\\"Production URL\\\"译为\\\"生产环境URL\\\"符合DevOps领域术语；\\\"Research Question\\\"作为参数名保留英文但添加引号突出显示；长句按中文习惯切分为短句，如将\\\"Navigate to...\\\"处理为流水句；被动语态\\\"is designed to\\\"转换为中文主动态\\\"用于\\\"）\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"01d73f91-1dd6-4b80-951c-9f944ea9d992\",\n      \"name\": \"Semantic Search -Query Maker\",\n      \"type\": \"@n8n/n8n-nodes-langchain.chainLlm\",\n      \"position\": [\n        -560,\n        -240\n      ],\n      \"parameters\": {\n        \"text\": \"=1. **Task:** `\\\"Your task is to develop a web search query that most effectively answers the research question given. Use meta-reasoning and multi-chain analysis to ensure a comprehensive approach.\\\"`\\n\\n2. **Structured Guidance for Chains of Thought:**  \\n    a. **Chain 1:** Break down the research question, identifying keywords and relevant terms.  \\n    b. **Chain 2:** Explore the context and potential sources, determining the types of results that would be most relevant.  \\n    c. **Chain 3:** Refine the query for specificity and completeness, considering how to capture nuances of the question.\\n\\n3. **Final Query Generation:** Based on the insights from the three chains, generate a single, refined search query.\\n\\n\\n4. Note, the queries must not be long tails , as they result in 0 websearch reutrns. We give you some examples of good web search queries:\\nExamples:\\n\\nUser Question: \\\"What is the current state of the U.S. economy in 2024?\\\"\\n\\nEffective Search Query: \\\"U.S. Economy Analysis Report 2024\\\"\\nUser Question: \\\"What are the recent advancements in artificial intelligence?\\\"\\n\\nEffective Search Query: \\\"2024 Artificial Intelligence Developments\\\"\\nUser Question: \\\"How is climate change affecting agriculture globally?\\\"\\n\\nEffective Search Query: \\\"Global Impact of Climate Change on Agriculture 2024\\\"\\nUser Question: \\\"What are the latest trends in cybersecurity threats?\\\"\\n\\nEffective Search Query: \\\"Cybersecurity Threats and Trends 2024\\\"\\nUser Question: \\\"What is the outlook for renewable energy investments?\\\"\\n\\nEffective Search Query: \\\"Renewable Energy Investment Outlook 2024\\\"\\n\\n5. Data Input:\\n   - **Today's Date:** \\\"{{ $item(\\\"0\\\").$node[\\\"Date & Time\\\"].json[\\\"currentDate\\\"] }}\\\"\\n **Search Inquiry:** \\n   - **Search Topic to create the query upon it:**{{ $item(\\\"0\\\").$node[\\\"Webhook\\\"].json[\\\"query\\\"][\\\"Research Question\\\"] }}\\\"\\\"\\n\\n6. Now develop the best fit web search query given the user request above under number 5\\n---\\n\\n**Output Requirements:**  \\nThe Assistant’s output should be in JSON format, structured as follows:\\n\\n{\\n  \\\"reasoning_summary\\\": \\\"Detailed explanation of each analytical chain’s purpose and insights, including key terms and considerations for query formulation.\\\",\\n  \\\"final_search_query\\\": \\\"The single, best-fit search query derived from the meta-reasoning and multi-chain analysis, optimized to answer the research question.\\\"\\n}\\n```\\n\\n---\\n\",\n        \"messages\": {\n          \"messageValues\": [\n            {\n              \"message\": \"You are an advanced data and research retrieval through smart search queires via Bing and Brave websearch APIs. \"\n            },\n            {\n              \"type\": \"HumanMessagePromptTemplate\",\n              \"message\": \"1. **Task:** `\\\"Your task is to develop a web search query that most effectively answers the research question given. Use meta-reasoning and multi-chain analysis to ensure a comprehensive approach.\\\"`\\n\\n2. **Structured Guidance for Chains of Thought:**  \\n    a. **Chain 1:** Break down the research question, identifying keywords and relevant terms.  \\n    b. **Chain 2:** Explore the context and potential sources, determining the types of results that would be most relevant.  \\n    c. **Chain 3:** Refine the query for specificity and completeness, considering how to capture nuances of the question.\\n\\n3. **Final Query Generation:** Based on the insights from the three chains, generate a single, refined search query.\\n\\n4. Data Input:\\n   - **Today's Date:** \\\"2024-11-12T10:21:33.764-05:00\\\"\\n2. **Search Inquiry:** \\n   - **Search Topic to create the query upon it:** \\\"What is the latest stock Market Analysis in mid-term?\\\"\\n\\n\\n---\\n\\n**Output Requirements:**  \\nThe Assistant’s output should be in JSON format, structured as follows:\\n\\n{\\n  \\\"reasoning_summary\\\": \\\"Detailed explanation of each analytical chain’s purpose and insights, including key terms and considerations for query formulation.\\\",\\n  \\\"final_search_query\\\": \\\"The single, best-fit search query derived from the meta-reasoning and multi-chain analysis, optimized to answer the research question.\\\"\\n}\\n```\\n\\n---\\n\"\n            },\n            {\n              \"type\": \"AIMessagePromptTemplate\",\n              \"message\": \"Assessing query functionality\\n\\nI’m evaluating the viability of the assistant's proposed search query. The user questions if it would yield meaningful results on different search engines.\\n\\nClarifying the query\\n\\nOK, let me see. The task involves clarifying the user's needs, ensuring the response aligns with OpenAI's policies, and possibly re-evaluating and correcting any errors in the previous response.\\n\\nRefining search specifics\\n\\nI'm working through refining the search query to focus on specific terms like 'S&P 500', integrating dates such as 'November 2024', and emphasizing phrases for precision.\\n\\nSelf-reflecting on search queries\\n\\nToday, I’m thinking about how to validate search queries for accuracy and realism, ensuring they are practical and likely to yield productive results.\\n\\nAcknowledging insights\\n\\nI’m recognizing and correcting a search query to ensure it’s optimal and effectively aligned with advanced user needs, leading to a more precise output.\\n\\nCrafting a search query\\n\\nI’m crafting a search query to pinpoint the most pertinent recent mid-term stock market analyses. Starting with relevant terms and then exploring potential sources for context and relevance.\\n\\nPinpointing sources and specifics\\n\\nI'm gathering info from financial news, investment reports, and economic research institutions. I’m refining search terms like \\\"mid-term stock market analysis\\\" and \\\"market forecast\\\" to keep results current and nuanced.\\n\\nCrafting the query\\n\\nI’m finalizing the query by merging terms like 'latest' and 'stock market analysis' with 'mid-term', and considering synonyms such as 'market forecast' to refine the search for 2024.\\n\\nTweaking the search\\n\\nI adjusted the search terms to 'latest stock market mid-term outlook 2024,' removing excessive quotes for better clarity and relevance.\\n\\n\\n{\\n  \\\"reasoning_summary\\\": \\\"Chain 1: Broke down the research question to identify key terms such as 'latest', 'stock market analysis', and 'mid-term'. Considered synonyms like 'mid-term outlook', 'market forecast', and included the current year '2024' for recency.\\\\n\\\\nChain 2: Explored the context where the user seeks recent analyses of the stock market with a mid-term perspective. Relevant sources would be financial news outlets, investment banks, and economic research firms. The most useful results would be up-to-date articles or reports offering mid-term forecasts.\\\\n\\\\nChain 3: Refined the query by removing unnecessary quotation marks and simplifying it to reflect how an advanced user might search. Included terms like 'latest', 'mid-term outlook', and '2024' to enhance specificity without limiting the search results unnecessarily.\\\",\\n  \\\"final_search_query\\\": \\\"latest stock market mid-term outlook 2024\\\"\\n}\"\n            }\n          ]\n        },\n        \"promptType\": \"define\",\n        \"hasOutputParser\": true\n      },\n      \"typeVersion\": 1.4\n    },\n    {\n      \"id\": \"696b4f97-ad29-406b-9157-44ad9d05c9cd\",\n      \"name\": \"Anthropic Chat Model\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatAnthropic\",\n      \"position\": [\n        740,\n        180\n      ],\n      \"parameters\": {\n        \"model\": \"claude-3-5-haiku-20241022\",\n        \"options\": {\n          \"topP\": 0.8,\n          \"temperature\": 0.4,\n          \"maxTokensToSample\": 4096\n        }\n      },\n      \"credentials\": {\n        \"anthropicApi\": {\n          \"id\": \"mVKB2CryW6bMm9Qo\",\n          \"name\": \"Anthropic account\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"82f25610-8b70-4aee-ad90-2616d3389f15\",\n      \"name\": \"OpenAI Chat Model\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\n      \"position\": [\n        900,\n        180\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"topP\": 0.7,\n          \"maxTokens\": 4096,\n          \"maxRetries\": 1,\n          \"temperature\": 0.5\n        }\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"wQQZLwJO9A5nFu8h\",\n          \"name\": \"OpenAi account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"f230bdf0-4a22-4abf-96cd-47f309f0c514\",\n      \"name\": \"Structured Output Parser2\",\n      \"type\": \"@n8n/n8n-nodes-langchain.outputParserStructured\",\n      \"position\": [\n        260,\n        -60\n      ],\n      \"parameters\": {\n        \"jsonSchemaExample\": \"{\\n    \\\"chain_of_thought\\\": \\\"Insert your step-by-step reasoning here.\\\",\\n    \\\"Highest_RANKEDURL_1\\\": {\\n        \\\"title\\\": \\\"Insert the First Ranked URL's Title here.\\\",\\n        \\\"link\\\": \\\"Insert the First Ranked URL here.\\\",\\n        \\\"description\\\": \\\"Insert the First Ranked URL's Description here.\\\"\\n    },\\n    \\\"Highest_RANKEDURL_2\\\": {\\n        \\\"title\\\": \\\"Insert the Second Ranked URL's Title here.\\\",\\n        \\\"link\\\": \\\"Insert the Second Ranked URL here.\\\",\\n        \\\"description\\\": \\\"Insert the Second Ranked URL's Description here.\\\"\\n    },\\n    \\\"Highest_RANKEDURL_3\\\": {\\n        \\\"title\\\": \\\"Insert the Third Ranked URL's Title here.\\\",\\n        \\\"link\\\": \\\"Insert the Third Ranked URL here.\\\",\\n        \\\"description\\\": \\\"Insert the Third Ranked URL's Description here.\\\"\\n    },\\n    \\\"Highest_RANKEDURL_4\\\": {\\n        \\\"title\\\": \\\"Insert the Fourth Ranked URL's Title here.\\\",\\n        \\\"link\\\": \\\"Insert the Fourth Ranked URL here.\\\",\\n        \\\"description\\\": \\\"Insert the Fourth Ranked URL's Description here.\\\"\\n    },\\n    \\\"Highest_RANKEDURL_5\\\": {\\n        \\\"title\\\": \\\"Insert the Fifth Ranked URL's Title here.\\\",\\n        \\\"link\\\": \\\"Insert the Fifth Ranked URL here.\\\",\\n        \\\"description\\\": \\\"Insert the Fifth Ranked URL's Description here.\\\"\\n    },\\n    \\\"Highest_RANKEDURL_6\\\": {\\n        \\\"title\\\": \\\"Insert the Sixth Ranked URL's Title here.\\\",\\n        \\\"link\\\": \\\"Insert the Sixth Ranked URL here.\\\",\\n        \\\"description\\\": \\\"Insert the Sixth Ranked URL's Description here.\\\"\\n    },\\n    \\\"Highest_RANKEDURL_7\\\": {\\n        \\\"title\\\": \\\"Insert the Seventh Ranked URL's Title here.\\\",\\n        \\\"link\\\": \\\"Insert the Seventh Ranked URL here.\\\",\\n        \\\"description\\\": \\\"Insert the Seventh Ranked URL's Description here.\\\"\\n    },\\n    \\\"Highest_RANKEDURL_8\\\": {\\n        \\\"title\\\": \\\"Insert the Eighth Ranked URL's Title here.\\\",\\n        \\\"link\\\": \\\"Insert the Eighth Ranked URL here.\\\",\\n        \\\"description\\\": \\\"Insert the Eighth Ranked URL's Description here.\\\"\\n    },\\n    \\\"Highest_RANKEDURL_9\\\": {\\n        \\\"title\\\": \\\"Insert the Ninth Ranked URL's Title here.\\\",\\n        \\\"link\\\": \\\"Insert the Ninth Ranked URL here.\\\",\\n        \\\"description\\\": \\\"Insert the Ninth Ranked URL's Description here.\\\"\\n    },\\n    \\\"Highest_RANKEDURL_10\\\": {\\n        \\\"title\\\": \\\"Insert the Tenth Ranked URL's Title here.\\\",\\n        \\\"link\\\": \\\"Insert the Tenth Ranked URL here.\\\",\\n        \\\"description\\\": \\\"Insert the Tenth Ranked URL's Description here.\\\"\\n    },\\n    \\\"Information_extracted\\\": \\\"Insert all extracted information relevant to the user's query or 'N/A' if none.\\\"\\n}\\n\"\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"3421ebe5-6a86-435e-b9c6-e3dcf6dd7833\",\n      \"name\": \"Parser Model\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatGoogleGemini\",\n      \"position\": [\n        -180,\n        180\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"topP\": 0.6,\n          \"temperature\": 0.4,\n          \"maxOutputTokens\": 4096\n        },\n        \"modelName\": \"models/gemini-1.5-flash-002\"\n      },\n      \"credentials\": {\n        \"googlePalmApi\": {\n          \"id\": \"rTbWGMQGwWtjhNaA\",\n          \"name\": \"Google Gemini(PaLM) Api account 4\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"fd19e9f6-d8c7-45df-93d9-ecf7956b461f\",\n      \"name\": \"Agent Model\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatGoogleGemini\",\n      \"position\": [\n        -180,\n        -20\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"topP\": 0.6,\n          \"temperature\": 0.4,\n          \"safetySettings\": {\n            \"values\": [\n              {\n                \"category\": \"HARM_CATEGORY_HARASSMENT\",\n                \"threshold\": \"BLOCK_NONE\"\n              },\n              {\n                \"category\": \"HARM_CATEGORY_HATE_SPEECH\",\n                \"threshold\": \"BLOCK_NONE\"\n              },\n              {\n                \"category\": \"HARM_CATEGORY_SEXUALLY_EXPLICIT\",\n                \"threshold\": \"BLOCK_NONE\"\n              },\n              {\n                \"category\": \"HARM_CATEGORY_DANGEROUS_CONTENT\",\n                \"threshold\": \"BLOCK_NONE\"\n              }\n            ]\n          },\n          \"maxOutputTokens\": 4086\n        },\n        \"modelName\": \"models/gemini-1.5-flash-002\"\n      },\n      \"credentials\": {\n        \"googlePalmApi\": {\n          \"id\": \"rTbWGMQGwWtjhNaA\",\n          \"name\": \"Google Gemini(PaLM) Api account 4\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"156e83ff-928a-4aca-af8b-0c0fa51acd56\",\n      \"name\": \"Sticky Note5\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        560,\n        -20\n      ],\n      \"parameters\": {\n        \"color\": 6,\n        \"width\": 712,\n        \"height\": 370,\n        \"content\": \"## 可替换的定制化模型\\n\\n若您希望使用其他大语言模型执行语义搜索与重排序任务，以下节点已针对OpenAI GPT4o和Anthropic Claude的模型结构进行了优化。\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"active\": false,\n  \"pinData\": {},\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"b824ca9d-5676-4ca5-b97d-e5113d955de2\",\n  \"connections\": {\n    \"Query\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Query-1 Combined\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Webhook\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Date & Time\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Agent Model\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"Semantic Search - Result Re-Ranker\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Semantic Search -Query Maker\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Date & Time\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Semantic Search -Query Maker\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Parser Model\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"Auto-fixing Output Parser6\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Auto-fixing Output Parser\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Query-1 Combined\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Semantic Search - Result Re-Ranker\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"OpenAI Chat Model\": {\n      \"ai_languageModel\": [\n        []\n      ]\n    },\n    \"Anthropic Chat Model\": {\n      \"ai_languageModel\": [\n        []\n      ]\n    },\n    \"Auto-fixing Output Parser\": {\n      \"ai_outputParser\": [\n        [\n          {\n            \"node\": \"Semantic Search -Query Maker\",\n            \"type\": \"ai_outputParser\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Structured Output Parser1\": {\n      \"ai_outputParser\": [\n        [\n          {\n            \"node\": \"Auto-fixing Output Parser\",\n            \"type\": \"ai_outputParser\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Structured Output Parser2\": {\n      \"ai_outputParser\": [\n        [\n          {\n            \"node\": \"Auto-fixing Output Parser6\",\n            \"type\": \"ai_outputParser\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Auto-fixing Output Parser6\": {\n      \"ai_outputParser\": [\n        [\n          {\n            \"node\": \"Semantic Search - Result Re-Ranker\",\n            \"type\": \"ai_outputParser\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Semantic Search -Query Maker\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Query\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Semantic Search - Result Re-Ranker\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Respond to Webhook\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}