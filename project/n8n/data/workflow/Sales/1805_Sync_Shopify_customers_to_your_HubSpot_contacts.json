{
  "title": "Sync Shopify customers to your HubSpot contacts",
  "url": "https://n8n.io/workflows/1805-sync-shopify-customers-to-your-hubspot-contacts/",
  "category": "Sales",
  "category_url": "https://n8n.io/workflows/categories/sales/?sort=createdAt:desc",
  "author": "n8n Team",
  "publish_date": "Last update 10 months ago",
  "publish_date_absolute": "2024-07-07",
  "content": "",
  "workflow_json": "{\"meta\":{\"instanceId\":\"237600ca44303ce91fa31ee72babcdc8493f55ee2c0e8aa2b78b3b4ce6f70bd9\"},\"nodes\":[{\"id\":\"5cb9cd37-a73d-4f3f-b4dd-4b56e79f4056\",\"name\":\"On order updated\",\"type\":\"n8n-nodes-base.shopifyTrigger\",\"position\":[380,200],\"webhookId\":\"0972ce92-d800-4049-ab60-7c71898ecbfa\",\"parameters\":{\"topic\":\"orders/updated\"},\"credentials\":{\"shopifyApi\":{\"id\":\"10\",\"name\":\"Shopify account\"}},\"typeVersion\":1},{\"id\":\"720e35c7-387e-428a-8930-0dfb67536382\",\"name\":\"Keep only userId\",\"type\":\"n8n-nodes-base.set\",\"position\":[860,280],\"parameters\":{\"values\":{\"number\":[{\"name\":\"userId\",\"value\":\"={{ $json[\\\"vid\\\"] }}\"}]},\"options\":{},\"keepOnlySet\":true},\"typeVersion\":1},{\"id\":\"3bb1f676-6733-4c1f-b3d0-4604f8baa0c8\",\"name\":\"New Order, deal not found\",\"type\":\"n8n-nodes-base.if\",\"position\":[1560,220],\"parameters\":{\"conditions\":{\"string\":[{\"value1\":\"={{$json}}\",\"operation\":\"isEmpty\"}]}},\"typeVersion\":1},{\"id\":\"7f4b86a1-9ea7-4c5d-a336-eea2ec6dc341\",\"name\":\"Do Nothing\",\"type\":\"n8n-nodes-base.noOp\",\"position\":[1800,320],\"parameters\":{},\"typeVersion\":1},{\"id\":\"f60c88f1-8dab-498e-9f18-d7842dfa60c6\",\"name\":\"Create new deal\",\"type\":\"n8n-nodes-base.hubspot\",\"position\":[1800,120],\"parameters\":{\"stage\":\"closedwon\",\"authentication\":\"oAuth2\",\"additionalFields\":{\"amount\":\"={{ $node[\\\"Add Hubspot userId to data\\\"].json[\\\"current_total_price\\\"] }}\",\"dealName\":\"={{ $node[\\\"Add Hubspot userId to data\\\"].json[\\\"name\\\"] }}\",\"closeDate\":\"={{ $node[\\\"Add Hubspot userId to data\\\"].json[\\\"created_at\\\"] }}\",\"associatedVids\":\"={{ $node[\\\"Add Hubspot userId to data\\\"].json[\\\"userId\\\"] }}\"}},\"credentials\":{\"hubspotOAuth2Api\":{\"id\":\"21\",\"name\":\"HubSpot account\"}},\"typeVersion\":1},{\"id\":\"3d9de7e0-8cd4-4cea-a78c-8a862c32edeb\",\"name\":\"Find if order already exists as deal\",\"type\":\"n8n-nodes-base.hubspot\",\"position\":[1340,220],\"parameters\":{\"operation\":\"search\",\"authentication\":\"oAuth2\",\"additionalFields\":{\"query\":\"={{ $json[\\\"name\\\"] }}\"}},\"credentials\":{\"hubspotOAuth2Api\":{\"id\":\"21\",\"name\":\"HubSpot account\"}},\"typeVersion\":1,\"alwaysOutputData\":true},{\"id\":\"f85b698a-872a-477b-9466-e35622b381a2\",\"name\":\"Add Hubspot userId to data\",\"type\":\"n8n-nodes-base.merge\",\"position\":[1140,220],\"parameters\":{\"mode\":\"mergeByIndex\"},\"typeVersion\":1},{\"id\":\"11502ac7-1e57-4614-9dd5-31f5fc62c91c\",\"name\":\"Create or update contact\",\"type\":\"n8n-nodes-base.hubspot\",\"position\":[640,280],\"parameters\":{\"email\":\"={{ $json[\\\"contact_email\\\"] }}\",\"resource\":\"contact\",\"authentication\":\"oAuth2\",\"additionalFields\":{\"city\":\"={{ $json[\\\"customer\\\"][\\\"default_address\\\"][\\\"city\\\"] }}\",\"country\":\"={{ $json[\\\"customer\\\"][\\\"default_address\\\"][\\\"country\\\"] }}\",\"lastName\":\"={{ $json[\\\"customer\\\"][\\\"default_address\\\"][\\\"last_name\\\"] }}\",\"firstName\":\"={{ $json[\\\"customer\\\"][\\\"default_address\\\"][\\\"first_name\\\"] }}\"}},\"credentials\":{\"hubspotOAuth2Api\":{\"id\":\"21\",\"name\":\"HubSpot account\"}},\"typeVersion\":1}],\"connections\":{\"Keep only userId\":{\"main\":[[{\"node\":\"Add Hubspot userId to data\",\"type\":\"main\",\"index\":1}]]},\"On order updated\":{\"main\":[[{\"node\":\"Add Hubspot userId to data\",\"type\":\"main\",\"index\":0},{\"node\":\"Create or update contact\",\"type\":\"main\",\"index\":0}]]},\"Create or update contact\":{\"main\":[[{\"node\":\"Keep only userId\",\"type\":\"main\",\"index\":0}]]},\"New Order, deal not found\":{\"main\":[[{\"node\":\"Create new deal\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Do Nothing\",\"type\":\"main\",\"index\":0}]]},\"Add Hubspot userId to data\":{\"main\":[[{\"node\":\"Find if order already exists as deal\",\"type\":\"main\",\"index\":0}]]},\"Find if order already exists as deal\":{\"main\":[[{\"node\":\"New Order, deal not found\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "This workflow syncs Shopify customers to your HubSpot account as contacts. Whenever somebody makes a purchase on Shopify, it automatically adds them as a new customer to your Hubspot account if the customer doesn’t exist yet.\n\nAlso, this workflow creates or updates contacts from new paid orders on Shopify by adding the amount and order close date of the deal.\n\n## Prerequisites\n\n  * Shopify account and [Shopify credentials](https://docs.n8n.io/integrations/builtin/credentials/shopify/)\n  * HubSpot account and [HubSpot credentials](https://docs.n8n.io/integrations/builtin/credentials/hubspot/)\n\n\n\n## How it works\n\n  1. Shopify trigger starts the workflow whenever an order is updated.\n  2. HubSpot node creates or updates the contact who made the order update.\n  3. Set node sorts and passes only the userid.\n  4. Merge node merges data of both inputs, the order and the customer.\n  5. Hubspot node looks up if the order already exists.\n  6. If node splits the workflow conditionally, based on data received.\n  7. If the order is new, the new deal is created in the Hubspot node.\n\n\n",
  "readme_html": "<!--[--><div data-v-50766329=\"\"><p>This workflow syncs Shopify customers to your HubSpot account as contacts. Whenever somebody makes a purchase on Shopify, it automatically adds them as a new customer to your Hubspot account if the customer doesn’t exist yet.</p>\n<p>Also, this workflow creates or updates contacts from new paid orders on Shopify by adding the amount and order close date of the deal.</p>\n<h2>Prerequisites</h2>\n<ul>\n<li>Shopify account and <a href=\"https://docs.n8n.io/integrations/builtin/credentials/shopify/\" rel=\"ugc nofollow\" target=\"_blank\">Shopify credentials</a></li>\n<li>HubSpot account and <a href=\"https://docs.n8n.io/integrations/builtin/credentials/hubspot/\" rel=\"ugc nofollow\" target=\"_blank\">HubSpot credentials</a></li>\n</ul>\n<h2>How it works</h2>\n<ol>\n<li>Shopify trigger starts the workflow whenever an order is updated.</li>\n<li>HubSpot node creates or updates the contact who made the order update.</li>\n<li>Set node sorts and passes only the userid.</li>\n<li>Merge node merges data of both inputs, the order and the customer.</li>\n<li>Hubspot node looks up if the order already exists.</li>\n<li>If node splits the workflow conditionally, based on data received.</li>\n<li>If the order is new, the new deal is created in the Hubspot node.</li>\n</ol>\n</div><!--]-->",
  "readme_zh": "该工作流将Shopify客户同步至您的HubSpot账户作为联系人。每当有用户在Shopify完成购买时，若该客户尚未存在，系统会自动将其添加为HubSpot账户的新客户。\n\n同时，该工作流还会通过添加交易金额和订单完成日期，为Shopify上新支付的订单创建或更新联系人。\n\n## 前提条件\n\n* Shopify账户及[Shopify凭证](https://docs.n8n.io/integrations/builtin/credentials/shopify/)\n* HubSpot账户及[HubSpot凭证](https://docs.n8n.io/integrations/builtin/credentials/hubspot/)\n\n## 运作流程\n\n1. 当订单状态更新时，Shopify触发器启动工作流\n2. HubSpot节点为发起订单更新的用户创建或更新联系人\n3. Set节点对数据进行分类，仅传递用户ID\n4. Merge节点合并订单数据与客户数据\n5. HubSpot节点检查订单是否已存在\n6. If节点根据接收数据对工作流进行条件分支\n7. 若为新订单，则通过HubSpot节点创建新交易",
  "title_zh": "将Shopify客户同步至您的HubSpot联系人",
  "publish_date_zh": "最后更新于10个月前",
  "workflow_json_zh": "{\"meta\":{\"instanceId\":\"237600ca44303ce91fa31ee72babcdc8493f55ee2c0e8aa2b78b3b4ce6f70bd9\"},\"nodes\":[{\"id\":\"5cb9cd37-a73d-4f3f-b4dd-4b56e79f4056\",\"name\":\"On order updated\",\"type\":\"n8n-nodes-base.shopifyTrigger\",\"position\":[380,200],\"webhookId\":\"0972ce92-d800-4049-ab60-7c71898ecbfa\",\"parameters\":{\"topic\":\"orders/updated\"},\"credentials\":{\"shopifyApi\":{\"id\":\"10\",\"name\":\"Shopify account\"}},\"typeVersion\":1},{\"id\":\"720e35c7-387e-428a-8930-0dfb67536382\",\"name\":\"Keep only userId\",\"type\":\"n8n-nodes-base.set\",\"position\":[860,280],\"parameters\":{\"values\":{\"number\":[{\"name\":\"userId\",\"value\":\"={{ $json[\\\"vid\\\"] }}\"}]},\"options\":{},\"keepOnlySet\":true},\"typeVersion\":1},{\"id\":\"3bb1f676-6733-4c1f-b3d0-4604f8baa0c8\",\"name\":\"New Order, deal not found\",\"type\":\"n8n-nodes-base.if\",\"position\":[1560,220],\"parameters\":{\"conditions\":{\"string\":[{\"value1\":\"={{$json}}\",\"operation\":\"isEmpty\"}]}},\"typeVersion\":1},{\"id\":\"7f4b86a1-9ea7-4c5d-a336-eea2ec6dc341\",\"name\":\"Do Nothing\",\"type\":\"n8n-nodes-base.noOp\",\"position\":[1800,320],\"parameters\":{},\"typeVersion\":1},{\"id\":\"f60c88f1-8dab-498e-9f18-d7842dfa60c6\",\"name\":\"Create new deal\",\"type\":\"n8n-nodes-base.hubspot\",\"position\":[1800,120],\"parameters\":{\"stage\":\"closedwon\",\"authentication\":\"oAuth2\",\"additionalFields\":{\"amount\":\"={{ $node[\\\"Add Hubspot userId to data\\\"].json[\\\"current_total_price\\\"] }}\",\"dealName\":\"={{ $node[\\\"Add Hubspot userId to data\\\"].json[\\\"name\\\"] }}\",\"closeDate\":\"={{ $node[\\\"Add Hubspot userId to data\\\"].json[\\\"created_at\\\"] }}\",\"associatedVids\":\"={{ $node[\\\"Add Hubspot userId to data\\\"].json[\\\"userId\\\"] }}\"}},\"credentials\":{\"hubspotOAuth2Api\":{\"id\":\"21\",\"name\":\"HubSpot account\"}},\"typeVersion\":1},{\"id\":\"3d9de7e0-8cd4-4cea-a78c-8a862c32edeb\",\"name\":\"Find if order already exists as deal\",\"type\":\"n8n-nodes-base.hubspot\",\"position\":[1340,220],\"parameters\":{\"operation\":\"search\",\"authentication\":\"oAuth2\",\"additionalFields\":{\"query\":\"={{ $json[\\\"name\\\"] }}\"}},\"credentials\":{\"hubspotOAuth2Api\":{\"id\":\"21\",\"name\":\"HubSpot account\"}},\"typeVersion\":1,\"alwaysOutputData\":true},{\"id\":\"f85b698a-872a-477b-9466-e35622b381a2\",\"name\":\"Add Hubspot userId to data\",\"type\":\"n8n-nodes-base.merge\",\"position\":[1140,220],\"parameters\":{\"mode\":\"mergeByIndex\"},\"typeVersion\":1},{\"id\":\"11502ac7-1e57-4614-9dd5-31f5fc62c91c\",\"name\":\"Create or update contact\",\"type\":\"n8n-nodes-base.hubspot\",\"position\":[640,280],\"parameters\":{\"email\":\"={{ $json[\\\"contact_email\\\"] }}\",\"resource\":\"contact\",\"authentication\":\"oAuth2\",\"additionalFields\":{\"city\":\"={{ $json[\\\"customer\\\"][\\\"default_address\\\"][\\\"city\\\"] }}\",\"country\":\"={{ $json[\\\"customer\\\"][\\\"default_address\\\"][\\\"country\\\"] }}\",\"lastName\":\"={{ $json[\\\"customer\\\"][\\\"default_address\\\"][\\\"last_name\\\"] }}\",\"firstName\":\"={{ $json[\\\"customer\\\"][\\\"default_address\\\"][\\\"first_name\\\"] }}\"}},\"credentials\":{\"hubspotOAuth2Api\":{\"id\":\"21\",\"name\":\"HubSpot account\"}},\"typeVersion\":1}],\"connections\":{\"Keep only userId\":{\"main\":[[{\"node\":\"Add Hubspot userId to data\",\"type\":\"main\",\"index\":1}]]},\"On order updated\":{\"main\":[[{\"node\":\"Add Hubspot userId to data\",\"type\":\"main\",\"index\":0},{\"node\":\"Create or update contact\",\"type\":\"main\",\"index\":0}]]},\"Create or update contact\":{\"main\":[[{\"node\":\"Keep only userId\",\"type\":\"main\",\"index\":0}]]},\"New Order, deal not found\":{\"main\":[[{\"node\":\"Create new deal\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Do Nothing\",\"type\":\"main\",\"index\":0}]]},\"Add Hubspot userId to data\":{\"main\":[[{\"node\":\"Find if order already exists as deal\",\"type\":\"main\",\"index\":0}]]},\"Find if order already exists as deal\":{\"main\":[[{\"node\":\"New Order, deal not found\",\"type\":\"main\",\"index\":0}]]}}}"
}