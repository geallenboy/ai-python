{
  "title": "Detect web visitors country by IP address with uProc",
  "url": "https://n8n.io/workflows/851-detect-web-visitors-country-by-ip-address-with-uproc/",
  "category": "Sales",
  "category_url": "https://n8n.io/workflows/categories/sales/?sort=createdAt:desc",
  "author": "Miquel Colomer",
  "publish_date": "Last update 10 months ago",
  "publish_date_absolute": "",
  "content": "",
  "workflow_json": "{\"id\":\"104\",\"name\":\"location_by_ip\",\"nodes\":[{\"name\":\"On clicking 'execute'\",\"type\":\"n8n-nodes-base.manualTrigger\",\"position\":[440,510],\"parameters\":{},\"typeVersion\":1},{\"name\":\"Get Location By IP\",\"type\":\"n8n-nodes-base.uproc\",\"position\":[850,510],\"parameters\":{\"ip\":\"={{$node[\\\"Create IP and Email Item\\\"].json[\\\"ip\\\"]}}\",\"tool\":\"getLocationByIp\",\"group\":\"geographic\",\"additionalOptions\":{}},\"credentials\":{\"uprocApi\":\"miquel-uproc\"},\"typeVersion\":1},{\"name\":\"User in Spain?\",\"type\":\"n8n-nodes-base.if\",\"position\":[1050,510],\"parameters\":{\"conditions\":{\"string\":[{\"value1\":\"={{$node[\\\"Get Location By IP\\\"].json[\\\"message\\\"][\\\"country_code\\\"]}}\",\"value2\":\"ES\"}]}},\"typeVersion\":1},{\"name\":\"Create IP and Email Item\",\"type\":\"n8n-nodes-base.functionItem\",\"position\":[640,510],\"parameters\":{\"functionCode\":\"item.ip = \\\"83.46.131.46\\\";\\nitem.email = \\\"miquel@uproc.io\\\";\\n\\nreturn item;\"},\"typeVersion\":1},{\"name\":\"Send English Email\",\"type\":\"n8n-nodes-base.awsSes\",\"position\":[1270,650],\"parameters\":{\"body\":\"Hi,\\n\\nThank you for your signup!\",\"subject\":\"Welcome aboard\",\"fromEmail\":\"sample@uproc.io\",\"toAddresses\":[\"={{$node[\\\"Create IP and Email Item\\\"].json[\\\"email\\\"]}}\"],\"additionalFields\":{}},\"credentials\":{\"aws\":\"ses\"},\"typeVersion\":1},{\"name\":\"Send Spanish Email\",\"type\":\"n8n-nodes-base.awsSes\",\"position\":[1270,420],\"parameters\":{\"body\":\"Hola,\\n\\nÂ¡Gracias por registrarte!\",\"subject\":\"Bienvenido a bordo\",\"fromEmail\":\"sample@uproc.io\",\"toAddresses\":[\"={{$node[\\\"Create IP and Email Item\\\"].json[\\\"email\\\"]}}\"],\"additionalFields\":{}},\"credentials\":{\"aws\":\"ses\"},\"typeVersion\":1}],\"active\":false,\"settings\":{},\"connections\":{\"User in Spain?\":{\"main\":[[{\"node\":\"Send Spanish Email\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Send English Email\",\"type\":\"main\",\"index\":0}]]},\"Get Location By IP\":{\"main\":[[{\"node\":\"User in Spain?\",\"type\":\"main\",\"index\":0}]]},\"On clicking 'execute'\":{\"main\":[[{\"node\":\"Create IP and Email Item\",\"type\":\"main\",\"index\":0}]]},\"Create IP and Email Item\":{\"main\":[[{\"node\":\"Get Location By IP\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "Do you want to know where a web visitor lives?\n\nThis workflow enriches any lead by IP address using the [uProc.io](http://uProc.io) [**Location By IP address tool**](https://app.uproc.io/#/tools/processor/get/location/by-ip) and sends an email in Spanish or English depending on the detected web visitor country.\n\nYou need to add your credentials (Email and API Key - real -) located at [**Integration section**](https://app.uproc.io/#/settings/integration) to n8n.\n\nNode \"Create IP and Email Item\" can be replaced by any other supported service with IP and Email values, like Mailchimp, Calendly, or MySQL.\n\nThe \"uProc\" node returns the location of the provided IP address.\n\n\"If\" node checks if the web visitor country code belongs to Spain (ES Isocode). If positive, we use the Spanish language in our emails. Otherwise, we will use the English language in our communications.\n\nDepending on the detected country code, we use the Amazon SES node to send the customized email adapted to the right language.\n",
  "readme_html": "<!--[--><div data-v-50766329=\"\"><p>Do you want to know where a web visitor lives?</p>\n<p>This workflow enriches any lead by IP address using the <a href=\"http://uProc.io\" rel=\"ugc nofollow\" target=\"_blank\">uProc.io</a> <a href=\"https://app.uproc.io/#/tools/processor/get/location/by-ip\" rel=\"ugc nofollow\" target=\"_blank\"><strong>Location By IP address tool</strong></a> and sends an email in Spanish or English depending on the detected web visitor country.</p>\n<p></p>\n<p>You need to add your credentials (Email and API Key - real -) located at <a href=\"https://app.uproc.io/#/settings/integration\" rel=\"ugc nofollow\" target=\"_blank\"><strong>Integration section</strong></a> to n8n.</p>\n<p>Node \"Create IP and Email Item\" can be replaced by any other supported service with IP and Email values, like Mailchimp, Calendly, or MySQL.</p>\n<p>The \"uProc\" node returns the location of the provided IP address.</p>\n<p>\"If\" node checks if the web visitor country code belongs to Spain (ES Isocode). If positive, we use the Spanish language in our emails. Otherwise, we will use the English language in our communications.</p>\n<p>Depending on the detected country code, we use the Amazon SES node to send the customized email adapted to the right language.</p>\n</div><!--]-->"
}