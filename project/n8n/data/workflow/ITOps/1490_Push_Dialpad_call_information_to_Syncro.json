{
  "title": "Push Dialpad call information to Syncro",
  "url": "https://n8n.io/workflows/1490-push-dialpad-call-information-to-syncro/",
  "category": "ITOps",
  "category_url": "https://n8n.io/workflows/categories/it-ops/?sort=createdAt:desc",
  "author": "Jonathan",
  "publish_date": "Last update 10 months ago",
  "publish_date_absolute": "2024-07-07",
  "content": "",
  "workflow_json": "{\"id\":\"1\",\"name\":\"Dialpad to Syncro\",\"nodes\":[{\"name\":\"GetCustomer\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[350,180],\"parameters\":{\"url\":\"={{$node[\\\"EnvVariables\\\"].json[\\\"syncro_baseurl\\\"]}}/api/v1/search?query={{$json[\\\"body\\\"][\\\"external_number\\\"].replace(/\\\\+/g, '').replace(/^[01]/, '')}}\",\"options\":{},\"authentication\":\"headerAuth\"},\"credentials\":{\"httpHeaderAuth\":\"Syncro\"},\"typeVersion\":1},{\"name\":\"Webhook\",\"type\":\"n8n-nodes-base.webhook\",\"position\":[-60,180],\"webhookId\":\"ec452bb5-58d9-4e0d-9cd2-c6df1c2cd957\",\"parameters\":{\"path\":\"moezdialpad\",\"options\":{},\"httpMethod\":\"POST\",\"responseData\":\"allEntries\",\"responseMode\":\"lastNode\"},\"typeVersion\":1},{\"name\":\"CreateTicket\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[1190,110],\"parameters\":{\"url\":\"={{$node[\\\"EnvVariables\\\"].json[\\\"syncro_baseurl\\\"]}}/api/v1/tickets\",\"options\":{\"bodyContentType\":\"json\"},\"requestMethod\":\"POST\",\"authentication\":\"headerAuth\",\"bodyParametersUi\":{\"parameter\":[{\"name\":\"customer_id\",\"value\":\"={{$node[\\\"Contacts\\\"].json[\\\"contacts\\\"][0][\\\"customer_id\\\"]}}\"},{\"name\":\"subject\",\"value\":\"=Phone call from {{$node[\\\"Function\\\"].json[\\\"contacts\\\"][0][\\\"firstname\\\"]}} {{$node[\\\"Function\\\"].json[\\\"contacts\\\"][0][\\\"lastname\\\"]}} ({{$node[\\\"Webhook\\\"].json[\\\"body\\\"][\\\"contact\\\"][\\\"phone\\\"]}})\"},{\"name\":\"status\",\"value\":\"In Progress\"},{\"name\":\"contact_id\",\"value\":\"={{$node[\\\"Contacts\\\"].json[\\\"contacts\\\"][0][\\\"id\\\"]}}\"},{\"name\":\"user_id\",\"value\":\"={{$node[\\\"EnvVariables\\\"].parameter[\\\"values\\\"][\\\"string\\\"][1][\\\"value\\\"]}}\"}]}},\"credentials\":{\"httpHeaderAuth\":\"Syncro\"},\"typeVersion\":1},{\"name\":\"GetTicket\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[860,40],\"parameters\":{\"url\":\"={{$node[\\\"EnvVariables\\\"].json[\\\"syncro_baseurl\\\"]}}/api/v1/tickets?contact_id={{$json[\\\"contacts\\\"][0][\\\"id\\\"]}}&status=Not%20Closed\",\"options\":{},\"authentication\":\"headerAuth\"},\"credentials\":{\"httpHeaderAuth\":\"Syncro\"},\"typeVersion\":1},{\"name\":\"IFMoreThanOne\",\"type\":\"n8n-nodes-base.if\",\"position\":[1000,40],\"parameters\":{\"conditions\":{\"number\":[{\"value1\":\"={{$node[\\\"GetTicket\\\"].json[\\\"tickets\\\"].length}}\",\"value2\":1,\"operation\":\"equal\"}],\"boolean\":[{\"value1\":\"={{$json[\\\"tickets\\\"]}}\",\"value2\":true}]},\"combineOperation\":\"any\"},\"typeVersion\":1},{\"name\":\"Google Sheets\",\"type\":\"n8n-nodes-base.googleSheets\",\"position\":[1480,-40],\"parameters\":{\"range\":\"A:B\",\"options\":{\"valueInputMode\":\"USER_ENTERED\"},\"sheetId\":\"xxx\",\"operation\":\"append\"},\"credentials\":{\"googleApi\":\"Google\"},\"typeVersion\":1},{\"name\":\"ForGoogle\",\"type\":\"n8n-nodes-base.set\",\"position\":[1340,-40],\"parameters\":{\"values\":{\"string\":[{\"name\":\"Call\",\"value\":\"={{$node[\\\"Webhook\\\"].json[\\\"body\\\"][\\\"call_id\\\"]}}\"},{\"name\":\"Ticket\",\"value\":\"={{$node[\\\"GetTicket\\\"].json[\\\"tickets\\\"][0][\\\"id\\\"]}}\"}]},\"options\":{},\"keepOnlySet\":true},\"typeVersion\":1},{\"name\":\"UpdateTicket\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[1190,-40],\"parameters\":{\"url\":\"={{$node[\\\"EnvVariables\\\"].json[\\\"syncro_baseurl\\\"]}}/api/v1/tickets/{{$json[\\\"tickets\\\"][0][\\\"id\\\"]}}/comment\",\"options\":{},\"requestMethod\":\"POST\",\"authentication\":\"headerAuth\",\"bodyParametersUi\":{\"parameter\":[{\"name\":\"subject\",\"value\":\"=Phone call from {{$node[\\\"GetCustomer\\\"].json[\\\"results\\\"][0][\\\"table\\\"][\\\"_source\\\"][\\\"table\\\"][\\\"firstname\\\"]}} {{$node[\\\"GetCustomer\\\"].json[\\\"results\\\"][0][\\\"table\\\"][\\\"_source\\\"][\\\"table\\\"][\\\"lastname\\\"]}} ({{$node[\\\"Webhook\\\"].json[\\\"body\\\"][\\\"contact\\\"][\\\"phone\\\"]}})\"},{\"name\":\"body\",\"value\":\"={{$node[\\\"GetCustomer\\\"].json[\\\"results\\\"][0][\\\"table\\\"][\\\"_source\\\"][\\\"table\\\"][\\\"firstname\\\"]}} {{$node[\\\"GetCustomer\\\"].json[\\\"results\\\"][0][\\\"table\\\"][\\\"_source\\\"][\\\"table\\\"][\\\"lastname\\\"]}} called.\"},{\"name\":\"hidden\",\"value\":\"true\"},{\"name\":\"user_id\",\"value\":\"={{$node[\\\"EnvVariables\\\"].parameter[\\\"values\\\"][\\\"string\\\"][1][\\\"value\\\"]}}\"}]}},\"credentials\":{\"httpHeaderAuth\":\"Syncro\"},\"typeVersion\":1},{\"name\":\"ForGoogle1\",\"type\":\"n8n-nodes-base.set\",\"position\":[1340,110],\"parameters\":{\"values\":{\"string\":[{\"name\":\"Call\",\"value\":\"={{$node[\\\"Webhook\\\"].json[\\\"body\\\"][\\\"call_id\\\"]}}\"},{\"name\":\"Ticket\",\"value\":\"={{$node[\\\"CreateTicket\\\"].json[\\\"ticket\\\"][\\\"id\\\"]}}\"}]},\"options\":{},\"keepOnlySet\":true},\"typeVersion\":1},{\"name\":\"Google Sheets1\",\"type\":\"n8n-nodes-base.googleSheets\",\"position\":[1480,110],\"parameters\":{\"range\":\"A:B\",\"options\":{\"valueInputMode\":\"USER_ENTERED\"},\"sheetId\":\"xxx\",\"operation\":\"append\"},\"credentials\":{\"googleApi\":\"Google\"},\"typeVersion\":1},{\"name\":\"NoOp\",\"type\":\"n8n-nodes-base.noOp\",\"position\":[830,220],\"parameters\":{},\"typeVersion\":1},{\"name\":\"Contacts\",\"type\":\"n8n-nodes-base.function\",\"position\":[510,180],\"parameters\":{\"functionCode\":\"const { json: { results } } = items[0];\\n\\nconst getData = (results, type) => results.filter(r => r.table._index === type).map(x => ({\\n   id: x.table._id,\\n   firstname: x.table._source.table.firstname,\\n   lastname: x.table._source.table.lastname,\\n   customer_id: x.table._source.table.customer_id,\\n   email: x.table._source.table.email,\\n   business_name: x.table._source.table.business_name,\\n   phones: x.table._source.table.phones\\n }));\\n \\nreturn [ { json: { contacts: getData(results, 'contacts') } } ];\\n\"},\"typeVersion\":1,\"alwaysOutputData\":false},{\"name\":\"IFContacts\",\"type\":\"n8n-nodes-base.if\",\"position\":[670,180],\"parameters\":{\"conditions\":{\"number\":[{\"value1\":\"={{$node[\\\"Contacts\\\"].json[\\\"contacts\\\"].length}}\",\"value2\":1,\"operation\":\"equal\"}],\"string\":[],\"boolean\":[]}},\"typeVersion\":1},{\"name\":\"Customers\",\"type\":\"n8n-nodes-base.function\",\"position\":[510,370],\"parameters\":{\"functionCode\":\"const { json: { results } } = items[0];\\n\\nconst getData = (results, type) => results.filter(r => r.table._index === type).map(x => ({\\n   id: x.table._id,\\n   firstname: x.table._source.table.firstname,\\n   lastname: x.table._source.table.lastname,\\n   customer_id: x.table._source.table.customer_id,\\n   email: x.table._source.table.email,\\n   business_name: x.table._source.table.business_name,\\n   phones: x.table._source.table.phones\\n }));\\n \\nreturn [ { json: { customers: getData(results, 'customers') } } ];\\n\"},\"typeVersion\":1},{\"name\":\"IFCustomers\",\"type\":\"n8n-nodes-base.if\",\"position\":[670,370],\"parameters\":{\"conditions\":{\"number\":[{\"value1\":\"={{$node[\\\"Customers\\\"].json[\\\"customers\\\"].length}}\",\"value2\":1,\"operation\":\"equal\"}],\"string\":[],\"boolean\":[]}},\"typeVersion\":1},{\"name\":\"NoOp1\",\"type\":\"n8n-nodes-base.noOp\",\"position\":[810,520],\"parameters\":{},\"typeVersion\":1},{\"name\":\"CreateTicketForCustomer\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[860,360],\"parameters\":{\"url\":\"={{$node[\\\"EnvVariables\\\"].json[\\\"syncro_baseurl\\\"]}}/api/v1/tickets\",\"options\":{\"bodyContentType\":\"json\"},\"requestMethod\":\"POST\",\"authentication\":\"headerAuth\",\"bodyParametersUi\":{\"parameter\":[{\"name\":\"customer_id\",\"value\":\"={{$node[\\\"Customers\\\"].json[\\\"customers\\\"][0][\\\"id\\\"]}}\"},{\"name\":\"subject\",\"value\":\"=Phone call from {{$node[\\\"Customers\\\"].json[\\\"customers\\\"][0][\\\"business_name\\\"]}} ({{$node[\\\"Webhook\\\"].json[\\\"body\\\"][\\\"contact\\\"][\\\"phone\\\"]}})\"},{\"name\":\"status\",\"value\":\"In Progress\"},{\"name\":\"user_id\",\"value\":\"={{$node[\\\"EnvVariables\\\"].parameter[\\\"values\\\"][\\\"string\\\"][1][\\\"value\\\"]}}\"}]}},\"credentials\":{\"httpHeaderAuth\":\"Syncro\"},\"typeVersion\":1},{\"name\":\"ForGoogle2\",\"type\":\"n8n-nodes-base.set\",\"position\":[1040,360],\"parameters\":{\"values\":{\"string\":[{\"name\":\"Call\",\"value\":\"={{$node[\\\"Webhook\\\"].json[\\\"body\\\"][\\\"call_id\\\"]}}\"},{\"name\":\"Ticket\",\"value\":\"={{$node[\\\"CreateTicketForCustomer\\\"].json[\\\"ticket\\\"][\\\"id\\\"]}}\"}]},\"options\":{},\"keepOnlySet\":true},\"typeVersion\":1},{\"name\":\"Google Sheets2\",\"type\":\"n8n-nodes-base.googleSheets\",\"position\":[1210,360],\"parameters\":{\"range\":\"A:B\",\"options\":{\"valueInputMode\":\"USER_ENTERED\"},\"sheetId\":\"xxx\",\"operation\":\"append\"},\"credentials\":{\"googleApi\":\"Google\"},\"typeVersion\":1},{\"name\":\"EnvVariables\",\"type\":\"n8n-nodes-base.set\",\"position\":[210,180],\"parameters\":{\"values\":{\"string\":[{\"name\":\"syncro_baseurl\",\"value\":\"https://subdomain.syncromsp.com\"},{\"name\":\"user_id\",\"value\":\"1234\"}]},\"options\":{}},\"typeVersion\":1},{\"name\":\"IF\",\"type\":\"n8n-nodes-base.if\",\"position\":[70,180],\"parameters\":{\"conditions\":{\"string\":[{\"value1\":\"={{$node[\\\"Webhook\\\"].json[\\\"body\\\"][\\\"direction\\\"]}}\",\"value2\":\"inbound\"}]}},\"typeVersion\":1},{\"name\":\"NoOp2\",\"type\":\"n8n-nodes-base.noOp\",\"position\":[70,370],\"parameters\":{},\"typeVersion\":1}],\"active\":true,\"settings\":{},\"connections\":{\"IF\":{\"main\":[[{\"node\":\"EnvVariables\",\"type\":\"main\",\"index\":0}],[{\"node\":\"NoOp2\",\"type\":\"main\",\"index\":0}]]},\"Webhook\":{\"main\":[[{\"node\":\"IF\",\"type\":\"main\",\"index\":0}]]},\"Contacts\":{\"main\":[[{\"node\":\"IFContacts\",\"type\":\"main\",\"index\":0}]]},\"Customers\":{\"main\":[[{\"node\":\"IFCustomers\",\"type\":\"main\",\"index\":0}]]},\"ForGoogle\":{\"main\":[[{\"node\":\"Google Sheets\",\"type\":\"main\",\"index\":0}]]},\"GetTicket\":{\"main\":[[{\"node\":\"IFMoreThanOne\",\"type\":\"main\",\"index\":0}]]},\"ForGoogle1\":{\"main\":[[{\"node\":\"Google Sheets1\",\"type\":\"main\",\"index\":0}]]},\"ForGoogle2\":{\"main\":[[{\"node\":\"Google Sheets2\",\"type\":\"main\",\"index\":0}]]},\"IFContacts\":{\"main\":[[{\"node\":\"GetTicket\",\"type\":\"main\",\"index\":0}],[{\"node\":\"NoOp\",\"type\":\"main\",\"index\":0}]]},\"GetCustomer\":{\"main\":[[{\"node\":\"Contacts\",\"type\":\"main\",\"index\":0},{\"node\":\"Customers\",\"type\":\"main\",\"index\":0}]]},\"IFCustomers\":{\"main\":[[{\"node\":\"CreateTicketForCustomer\",\"type\":\"main\",\"index\":0}],[{\"node\":\"NoOp1\",\"type\":\"main\",\"index\":0}]]},\"CreateTicket\":{\"main\":[[{\"node\":\"ForGoogle1\",\"type\":\"main\",\"index\":0}]]},\"EnvVariables\":{\"main\":[[{\"node\":\"GetCustomer\",\"type\":\"main\",\"index\":0}]]},\"UpdateTicket\":{\"main\":[[{\"node\":\"ForGoogle\",\"type\":\"main\",\"index\":0}]]},\"IFMoreThanOne\":{\"main\":[[{\"node\":\"UpdateTicket\",\"type\":\"main\",\"index\":0}],[{\"node\":\"CreateTicket\",\"type\":\"main\",\"index\":0}]]},\"CreateTicketForCustomer\":{\"main\":[[{\"node\":\"ForGoogle2\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "This workflow takes Dialpad call information for an answered call and pushes it into Syncro as either a ticket or an update to an existing ticket. You will need to have a workflow for each technician at this time. It also saves call/ticket information to a Google Sheet to be queried by the dialpad_to_syncro_timer.json workflow. This will match to inbound and outbound calls, so if that's not desired you need to add in an IF to only proceed on either inbound or outbound calls.\n\n> This workflow is part of an MSP collection, The original can be found here: <https://github.com/bionemesis/n8nsyncro>\n",
  "readme_html": "<!--[--><div data-v-50766329=\"\"><p>This workflow takes Dialpad call information for an answered call and pushes it into Syncro as either a ticket or an update to an existing ticket. You will need to have a workflow for each technician at this time. It also saves call/ticket information to a Google Sheet to be queried by the dialpad_to_syncro_timer.json workflow. This will match to inbound and outbound calls, so if that's not desired you need to add in an IF to only proceed on either inbound or outbound calls.</p>\n<blockquote>\n<p>This workflow is part of an MSP collection, The original can be found here: <a href=\"https://github.com/bionemesis/n8nsyncro\" rel=\"ugc nofollow\" target=\"_blank\">https://github.com/bionemesis/n8nsyncro</a></p>\n</blockquote>\n</div><!--]-->",
  "readme_zh": "该工作流程获取Dialpad已接听电话的通话信息，并将其作为新工单或现有工单的更新推送到Syncro系统中。当前阶段需要为每位技术人员单独配置一个工作流。同时，该流程会将通话/工单信息保存至Google表格，供dialpad_to_syncro_timer.json工作流后续查询。本流程适用于呼入和呼出电话，若需限定其中一种类型，需添加条件判断语句（IF）进行控制。\n\n> 本工作流属于MSP解决方案集的一部分，原始代码详见：<https://github.com/bionemesis/n8nsyncro>",
  "title_zh": "将拨号盘通话信息推送至Syncro",
  "publish_date_zh": "最后更新于10个月前",
  "workflow_json_zh": "{\n  \"id\": \"1\",\n  \"name\": \"Dialpad to Syncro\",\n  \"nodes\": [\n    {\n      \"name\": \"GetCustomer\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        350,\n        180\n      ],\n      \"parameters\": {\n        \"url\": \"={{$node[\\\"EnvVariables\\\"].json[\\\"syncro_baseurl\\\"]}}/api/v1/search?query={{$json[\\\"body\\\"][\\\"external_number\\\"].replace(/\\\\+/g, '').replace(/^[01]/, '')}}\",\n        \"options\": {},\n        \"authentication\": \"headerAuth\"\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": \"Syncro\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Webhook\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"position\": [\n        -60,\n        180\n      ],\n      \"webhookId\": \"ec452bb5-58d9-4e0d-9cd2-c6df1c2cd957\",\n      \"parameters\": {\n        \"path\": \"moezdialpad\",\n        \"options\": {},\n        \"httpMethod\": \"POST\",\n        \"responseData\": \"allEntries\",\n        \"responseMode\": \"lastNode\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"CreateTicket\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1190,\n        110\n      ],\n      \"parameters\": {\n        \"url\": \"={{$node[\\\"EnvVariables\\\"].json[\\\"syncro_baseurl\\\"]}}/api/v1/tickets\",\n        \"options\": {\n          \"bodyContentType\": \"json\"\n        },\n        \"requestMethod\": \"POST\",\n        \"authentication\": \"headerAuth\",\n        \"bodyParametersUi\": {\n          \"parameter\": [\n            {\n              \"name\": \"customer_id\",\n              \"value\": \"={{$node[\\\"Contacts\\\"].json[\\\"contacts\\\"][0][\\\"customer_id\\\"]}}\"\n            },\n            {\n              \"name\": \"subject\",\n              \"value\": \"=Phone call from {{$node[\\\"Function\\\"].json[\\\"contacts\\\"][0][\\\"firstname\\\"]}} {{$node[\\\"Function\\\"].json[\\\"contacts\\\"][0][\\\"lastname\\\"]}} ({{$node[\\\"Webhook\\\"].json[\\\"body\\\"][\\\"contact\\\"][\\\"phone\\\"]}})\"\n            },\n            {\n              \"name\": \"status\",\n              \"value\": \"In Progress\"\n            },\n            {\n              \"name\": \"contact_id\",\n              \"value\": \"={{$node[\\\"Contacts\\\"].json[\\\"contacts\\\"][0][\\\"id\\\"]}}\"\n            },\n            {\n              \"name\": \"user_id\",\n              \"value\": \"={{$node[\\\"EnvVariables\\\"].parameter[\\\"values\\\"][\\\"string\\\"][1][\\\"value\\\"]}}\"\n            }\n          ]\n        }\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": \"Syncro\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"GetTicket\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        860,\n        40\n      ],\n      \"parameters\": {\n        \"url\": \"={{$node[\\\"EnvVariables\\\"].json[\\\"syncro_baseurl\\\"]}}/api/v1/tickets?contact_id={{$json[\\\"contacts\\\"][0][\\\"id\\\"]}}&status=Not%20Closed\",\n        \"options\": {},\n        \"authentication\": \"headerAuth\"\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": \"Syncro\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"IFMoreThanOne\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        1000,\n        40\n      ],\n      \"parameters\": {\n        \"conditions\": {\n          \"number\": [\n            {\n              \"value1\": \"={{$node[\\\"GetTicket\\\"].json[\\\"tickets\\\"].length}}\",\n              \"value2\": 1,\n              \"operation\": \"equal\"\n            }\n          ],\n          \"boolean\": [\n            {\n              \"value1\": \"={{$json[\\\"tickets\\\"]}}\",\n              \"value2\": true\n            }\n          ]\n        },\n        \"combineOperation\": \"any\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Google Sheets\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"position\": [\n        1480,\n        -40\n      ],\n      \"parameters\": {\n        \"range\": \"A:B\",\n        \"options\": {\n          \"valueInputMode\": \"USER_ENTERED\"\n        },\n        \"sheetId\": \"xxx\",\n        \"operation\": \"append\"\n      },\n      \"credentials\": {\n        \"googleApi\": \"Google\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"ForGoogle\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        1340,\n        -40\n      ],\n      \"parameters\": {\n        \"values\": {\n          \"string\": [\n            {\n              \"name\": \"Call\",\n              \"value\": \"={{$node[\\\"Webhook\\\"].json[\\\"body\\\"][\\\"call_id\\\"]}}\"\n            },\n            {\n              \"name\": \"Ticket\",\n              \"value\": \"={{$node[\\\"GetTicket\\\"].json[\\\"tickets\\\"][0][\\\"id\\\"]}}\"\n            }\n          ]\n        },\n        \"options\": {},\n        \"keepOnlySet\": true\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"UpdateTicket\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1190,\n        -40\n      ],\n      \"parameters\": {\n        \"url\": \"={{$node[\\\"EnvVariables\\\"].json[\\\"syncro_baseurl\\\"]}}/api/v1/tickets/{{$json[\\\"tickets\\\"][0][\\\"id\\\"]}}/comment\",\n        \"options\": {},\n        \"requestMethod\": \"POST\",\n        \"authentication\": \"headerAuth\",\n        \"bodyParametersUi\": {\n          \"parameter\": [\n            {\n              \"name\": \"subject\",\n              \"value\": \"=Phone call from {{$node[\\\"GetCustomer\\\"].json[\\\"results\\\"][0][\\\"table\\\"][\\\"_source\\\"][\\\"table\\\"][\\\"firstname\\\"]}} {{$node[\\\"GetCustomer\\\"].json[\\\"results\\\"][0][\\\"table\\\"][\\\"_source\\\"][\\\"table\\\"][\\\"lastname\\\"]}} ({{$node[\\\"Webhook\\\"].json[\\\"body\\\"][\\\"contact\\\"][\\\"phone\\\"]}})\"\n            },\n            {\n              \"name\": \"body\",\n              \"value\": \"={{$node[\\\"GetCustomer\\\"].json[\\\"results\\\"][0][\\\"table\\\"][\\\"_source\\\"][\\\"table\\\"][\\\"firstname\\\"]}} {{$node[\\\"GetCustomer\\\"].json[\\\"results\\\"][0][\\\"table\\\"][\\\"_source\\\"][\\\"table\\\"][\\\"lastname\\\"]}} called.\"\n            },\n            {\n              \"name\": \"hidden\",\n              \"value\": \"true\"\n            },\n            {\n              \"name\": \"user_id\",\n              \"value\": \"={{$node[\\\"EnvVariables\\\"].parameter[\\\"values\\\"][\\\"string\\\"][1][\\\"value\\\"]}}\"\n            }\n          ]\n        }\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": \"Syncro\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"ForGoogle1\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        1340,\n        110\n      ],\n      \"parameters\": {\n        \"values\": {\n          \"string\": [\n            {\n              \"name\": \"Call\",\n              \"value\": \"={{$node[\\\"Webhook\\\"].json[\\\"body\\\"][\\\"call_id\\\"]}}\"\n            },\n            {\n              \"name\": \"Ticket\",\n              \"value\": \"={{$node[\\\"CreateTicket\\\"].json[\\\"ticket\\\"][\\\"id\\\"]}}\"\n            }\n          ]\n        },\n        \"options\": {},\n        \"keepOnlySet\": true\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Google Sheets1\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"position\": [\n        1480,\n        110\n      ],\n      \"parameters\": {\n        \"range\": \"A:B\",\n        \"options\": {\n          \"valueInputMode\": \"USER_ENTERED\"\n        },\n        \"sheetId\": \"xxx\",\n        \"operation\": \"append\"\n      },\n      \"credentials\": {\n        \"googleApi\": \"Google\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"NoOp\",\n      \"type\": \"n8n-nodes-base.noOp\",\n      \"position\": [\n        830,\n        220\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Contacts\",\n      \"type\": \"n8n-nodes-base.function\",\n      \"position\": [\n        510,\n        180\n      ],\n      \"parameters\": {\n        \"functionCode\": \"const { json: { results } } = items[0];\\n\\nconst getData = (results, type) => results.filter(r => r.table._index === type).map(x => ({\\n   id: x.table._id,\\n   firstname: x.table._source.table.firstname,\\n   lastname: x.table._source.table.lastname,\\n   customer_id: x.table._source.table.customer_id,\\n   email: x.table._source.table.email,\\n   business_name: x.table._source.table.business_name,\\n   phones: x.table._source.table.phones\\n }));\\n \\nreturn [ { json: { contacts: getData(results, 'contacts') } } ];\\n\"\n      },\n      \"typeVersion\": 1,\n      \"alwaysOutputData\": false\n    },\n    {\n      \"name\": \"IFContacts\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        670,\n        180\n      ],\n      \"parameters\": {\n        \"conditions\": {\n          \"number\": [\n            {\n              \"value1\": \"={{$node[\\\"Contacts\\\"].json[\\\"contacts\\\"].length}}\",\n              \"value2\": 1,\n              \"operation\": \"equal\"\n            }\n          ],\n          \"string\": [],\n          \"boolean\": []\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Customers\",\n      \"type\": \"n8n-nodes-base.function\",\n      \"position\": [\n        510,\n        370\n      ],\n      \"parameters\": {\n        \"functionCode\": \"const { json: { results } } = items[0];\\n\\nconst getData = (results, type) => results.filter(r => r.table._index === type).map(x => ({\\n   id: x.table._id,\\n   firstname: x.table._source.table.firstname,\\n   lastname: x.table._source.table.lastname,\\n   customer_id: x.table._source.table.customer_id,\\n   email: x.table._source.table.email,\\n   business_name: x.table._source.table.business_name,\\n   phones: x.table._source.table.phones\\n }));\\n \\nreturn [ { json: { customers: getData(results, 'customers') } } ];\\n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"IFCustomers\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        670,\n        370\n      ],\n      \"parameters\": {\n        \"conditions\": {\n          \"number\": [\n            {\n              \"value1\": \"={{$node[\\\"Customers\\\"].json[\\\"customers\\\"].length}}\",\n              \"value2\": 1,\n              \"operation\": \"equal\"\n            }\n          ],\n          \"string\": [],\n          \"boolean\": []\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"NoOp1\",\n      \"type\": \"n8n-nodes-base.noOp\",\n      \"position\": [\n        810,\n        520\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"CreateTicketForCustomer\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        860,\n        360\n      ],\n      \"parameters\": {\n        \"url\": \"={{$node[\\\"EnvVariables\\\"].json[\\\"syncro_baseurl\\\"]}}/api/v1/tickets\",\n        \"options\": {\n          \"bodyContentType\": \"json\"\n        },\n        \"requestMethod\": \"POST\",\n        \"authentication\": \"headerAuth\",\n        \"bodyParametersUi\": {\n          \"parameter\": [\n            {\n              \"name\": \"customer_id\",\n              \"value\": \"={{$node[\\\"Customers\\\"].json[\\\"customers\\\"][0][\\\"id\\\"]}}\"\n            },\n            {\n              \"name\": \"subject\",\n              \"value\": \"=Phone call from {{$node[\\\"Customers\\\"].json[\\\"customers\\\"][0][\\\"business_name\\\"]}} ({{$node[\\\"Webhook\\\"].json[\\\"body\\\"][\\\"contact\\\"][\\\"phone\\\"]}})\"\n            },\n            {\n              \"name\": \"status\",\n              \"value\": \"In Progress\"\n            },\n            {\n              \"name\": \"user_id\",\n              \"value\": \"={{$node[\\\"EnvVariables\\\"].parameter[\\\"values\\\"][\\\"string\\\"][1][\\\"value\\\"]}}\"\n            }\n          ]\n        }\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": \"Syncro\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"ForGoogle2\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        1040,\n        360\n      ],\n      \"parameters\": {\n        \"values\": {\n          \"string\": [\n            {\n              \"name\": \"Call\",\n              \"value\": \"={{$node[\\\"Webhook\\\"].json[\\\"body\\\"][\\\"call_id\\\"]}}\"\n            },\n            {\n              \"name\": \"Ticket\",\n              \"value\": \"={{$node[\\\"CreateTicketForCustomer\\\"].json[\\\"ticket\\\"][\\\"id\\\"]}}\"\n            }\n          ]\n        },\n        \"options\": {},\n        \"keepOnlySet\": true\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Google Sheets2\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"position\": [\n        1210,\n        360\n      ],\n      \"parameters\": {\n        \"range\": \"A:B\",\n        \"options\": {\n          \"valueInputMode\": \"USER_ENTERED\"\n        },\n        \"sheetId\": \"xxx\",\n        \"operation\": \"append\"\n      },\n      \"credentials\": {\n        \"googleApi\": \"Google\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"EnvVariables\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        210,\n        180\n      ],\n      \"parameters\": {\n        \"values\": {\n          \"string\": [\n            {\n              \"name\": \"syncro_baseurl\",\n              \"value\": \"https://subdomain.syncromsp.com\"\n            },\n            {\n              \"name\": \"user_id\",\n              \"value\": \"1234\"\n            }\n          ]\n        },\n        \"options\": {}\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"IF\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        70,\n        180\n      ],\n      \"parameters\": {\n        \"conditions\": {\n          \"string\": [\n            {\n              \"value1\": \"={{$node[\\\"Webhook\\\"].json[\\\"body\\\"][\\\"direction\\\"]}}\",\n              \"value2\": \"inbound\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"NoOp2\",\n      \"type\": \"n8n-nodes-base.noOp\",\n      \"position\": [\n        70,\n        370\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    }\n  ],\n  \"active\": true,\n  \"settings\": {},\n  \"connections\": {\n    \"IF\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"EnvVariables\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"NoOp2\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Webhook\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"IF\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Contacts\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"IFContacts\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Customers\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"IFCustomers\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"ForGoogle\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Google Sheets\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"GetTicket\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"IFMoreThanOne\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"ForGoogle1\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Google Sheets1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"ForGoogle2\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Google Sheets2\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"IFContacts\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"GetTicket\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"NoOp\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"GetCustomer\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Contacts\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Customers\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"IFCustomers\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"CreateTicketForCustomer\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"NoOp1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"CreateTicket\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"ForGoogle1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"EnvVariables\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"GetCustomer\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"UpdateTicket\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"ForGoogle\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"IFMoreThanOne\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"UpdateTicket\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"CreateTicket\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"CreateTicketForCustomer\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"ForGoogle2\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}