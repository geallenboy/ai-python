{
  "title": "Context-Aware Discord Bot Replies to Mentions & DMs with GPT-4o",
  "url": "https://n8n.io/workflows/3692-context-aware-discord-bot-replies-to-mentions-and-dms-with-gpt-4o/",
  "category": "ITOps",
  "category_url": "https://n8n.io/workflows/categories/it-ops/?sort=createdAt:desc",
  "author": "Niten Musa",
  "publish_date": "Last update 9 days ago",
  "publish_date_absolute": "",
  "content": "",
  "workflow_json": "{\"id\":\"h7STFu0NJCVsvlbc\",\"meta\":{\"instanceId\":\"ff93c7924b638fb6ca7815d8ed0b9e89bc1a4b863863649bb0ed513cdccf1946\"},\"name\":\"AI Discord Bot Respond to Mentions and DMs with Context Awareness\",\"tags\":[],\"nodes\":[{\"id\":\"b69efca3-f0b1-4b8d-8812-9bbc60d2c9c7\",\"name\":\"AI Agent\",\"type\":\"@n8n/n8n-nodes-langchain.agent\",\"position\":[520,500],\"parameters\":{},\"typeVersion\":1.8},{\"id\":\"c2461069-028e-4a6f-9670-c75e84f30d26\",\"name\":\"OpenAI Chat Model\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\"position\":[280,860],\"parameters\":{},\"typeVersion\":1.2},{\"id\":\"87dfab19-9acc-48af-b786-1c20106f8e23\",\"name\":\"Simple Memory\",\"type\":\"@n8n/n8n-nodes-langchain.memoryBufferWindow\",\"position\":[480,880],\"parameters\":{},\"typeVersion\":1.3},{\"id\":\"74407b9a-d9ae-434e-9eee-17b68b487c2e\",\"name\":\"Mapping data for the Agent\",\"type\":\"n8n-nodes-base.set\",\"position\":[180,500],\"parameters\":{},\"typeVersion\":3.4},{\"id\":\"a2a7e4e9-084c-4bdf-80e0-5f909a53fe2d\",\"name\":\"Either the bot should reply in dm or in public channel\",\"type\":\"n8n-nodes-base.if\",\"position\":[900,500],\"parameters\":{},\"typeVersion\":2.2},{\"id\":\"d84d2f02-93b8-4459-82de-bff394ee7455\",\"name\":\"Reply in DM\",\"type\":\"n8n-nodes-base.discord\",\"position\":[1240,360],\"webhookId\":\"9ad5e961-607d-47ed-a461-2f89a90255e6\",\"parameters\":{},\"typeVersion\":2},{\"id\":\"ff8b9e70-35d1-44de-aba0-e624b468b95f\",\"name\":\"Reply in public channel\",\"type\":\"n8n-nodes-base.discord\",\"position\":[1240,640],\"webhookId\":\"9ad5e961-607d-47ed-a461-2f89a90255e6\",\"parameters\":{},\"typeVersion\":2},{\"id\":\"1abd9619-bd4c-493c-a90f-7db16b3cc72d\",\"name\":\"DM Received\",\"type\":\"n8n-nodes-base.webhook\",\"position\":[-80,260],\"webhookId\":\"7ee4637e-8a29-4084-9c44-fc017eb79db8\",\"parameters\":{},\"typeVersion\":2},{\"id\":\"40fdef9c-e568-4e75-a93e-e20cc9601835\",\"name\":\"Public Mention\",\"type\":\"n8n-nodes-discord-trigger.discordTrigger\",\"position\":[-80,720],\"parameters\":{},\"typeVersion\":1},{\"id\":\"e1d15d1b-99cd-4b1d-8006-47af3b355143\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[440,140],\"parameters\":{\"content\":\"\"},\"typeVersion\":1},{\"id\":\"b3b58996-44f5-466e-aeaf-9a163e376e38\",\"name\":\"Sticky Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-40,-100],\"parameters\":{\"content\":\"\"},\"typeVersion\":1},{\"id\":\"583e5a8d-d7f5-4bc6-8d3c-8b47c3d96799\",\"name\":\"Sticky Note9\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-180,500],\"parameters\":{\"content\":\"\"},\"typeVersion\":1},{\"id\":\"3f320db7-1109-4089-8bc9-3c26efe8cd46\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-180,40],\"parameters\":{\"content\":\"\"},\"typeVersion\":1},{\"id\":\"7bb34978-a5db-4d2d-9853-f8dbbe584c8a\",\"name\":\"Sticky Note5\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[200,760],\"parameters\":{\"content\":\"\"},\"typeVersion\":1},{\"id\":\"777c1988-3d18-454f-8310-3d647d0ff6ff\",\"name\":\"Read last public messages\",\"type\":\"n8n-nodes-base.discordTool\",\"position\":[840,900],\"webhookId\":\"8dc45278-105e-440d-a71e-08d680a56a6b\",\"parameters\":{},\"typeVersion\":2},{\"id\":\"10859678-99e8-4ac8-aa05-aeddb25bc816\",\"name\":\"Read last private messages\",\"type\":\"@n8n/n8n-nodes-langchain.toolHttpRequest\",\"position\":[1020,900],\"parameters\":{},\"typeVersion\":1.1},{\"id\":\"5d4bb3fb-b1be-4fcd-a5f3-fbe7cc4aa38f\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[760,740],\"parameters\":{\"content\":\"\"},\"typeVersion\":1},{\"id\":\"b09f12af-1a4f-45ba-9073-d38dc5e93ad1\",\"name\":\"Sticky Note4\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1120,200],\"parameters\":{\"content\":\"\"},\"typeVersion\":1}],\"active\":false,\"pinData\":{},\"settings\":{\"executionOrder\":\"v1\"},\"versionId\":\"b15c5cde-bce6-4fa2-8803-0f7dfe8cbb71\",\"connections\":{\"Think\":{\"ai_tool\":[[{\"node\":\"AI Agent\",\"type\":\"ai_tool\",\"index\":0}]]},\"AI Agent\":{\"main\":[[{\"node\":\"Either the bot should reply in dm or in public channel\",\"type\":\"main\",\"index\":0}]]},\"DM Received\":{\"main\":[[{\"node\":\"Mapping data for the Agent\",\"type\":\"main\",\"index\":0}]]},\"Simple Memory\":{\"ai_memory\":[[{\"node\":\"AI Agent\",\"type\":\"ai_memory\",\"index\":0}]]},\"Public Mention\":{\"main\":[[{\"node\":\"Mapping data for the Agent\",\"type\":\"main\",\"index\":0}]]},\"OpenAI Chat Model\":{\"ai_languageModel\":[[{\"node\":\"AI Agent\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"Read last public messages\":{\"ai_tool\":[[{\"node\":\"AI Agent\",\"type\":\"ai_tool\",\"index\":0}]]},\"Mapping data for the Agent\":{\"main\":[[{\"node\":\"AI Agent\",\"type\":\"main\",\"index\":0}]]},\"Read last private messages\":{\"ai_tool\":[[{\"node\":\"AI Agent\",\"type\":\"ai_tool\",\"index\":0}]]},\"Either the bot should reply in dm or in public channel\":{\"main\":[[{\"node\":\"Reply in DM\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Reply in public channel\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "> If you have any question, or difficulty, feel free to come discuss about it on my [Telegram](https://www.bonzai.pro/niten-musa/lp/7018/niten-musa) (you might find something there üéÅ)\n\n![AIPowered Discord Bot Respond to Mentions and DMs with Context Awareness.png](https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/AI_Powered_Discord_Bot_Respond_to_Mentions_and_D_Ms_with_Context_Awareness_11cff29d81.png)\n\n### ‚ö†Ô∏è **Disclaimer**\n\nThis workflow uses a **community node** : `n8n-nodes-discord-trigger`. Only self-hosted n8n instances can use this workflow.\n\nCommunity nodes are maintained outside of n8n‚Äôs core team. Please review their code and use responsibly.\n\n* * *\n\n## Description\n\nThis n8n workflow enables a fully autonomous AI assistant within your Discord server. It listens for both public mentions and direct messages (DMs), and replies in real-time using a language model (OpenAI's GPT-4o by default). The assistant can dynamically fetch previous messages for better context, providing smart, coherent, and personalized responses.\n\n* * *\n\n### üîß **Key Features**\n\n  * **Dual Trigger** : Reacts to both public bot mentions and private DMs.\n  * **Context-Aware AI** : Dynamically fetches the last 30 messages from either public or private conversations.\n  * **Smart Routing** : Replies either in the original public channel or via DM, depending on where the message came from.\n  * **Custom Prompting** : Easily modify the system prompt to define the AI‚Äôs tone, behavior, and personality.\n  * **Fully Autonomous** : No manual intervention required ‚Äî the bot always replies instantly.\n\n\n\n* * *\n\n### ‚úÖ Requirements\n\n  * An operational **n8n instance**.\n  * A **Discord bot** with at least these permissions: \n    * Send Messages\n    * Read Message History\n    * Manage Messages\n  * **OpenAI API key** (or compatible LLM credentials).\n  * The community package: `n8n-nodes-discord-trigger`.\n\n\n\n* * *\n\n### üß∞ **Setup Instructions**\n\n#### 1\\. **Discord Bot Setup**\n\n  * Create and invite your Discord bot to your server with required permissions.\n\n\n\n> You will find in the next step a complete tutorial to craft your own bot with the right code and permissions for this workflow to work\n\n  * Set your Discord bot token in n8n's credential manager.\n\n\n\n#### 2\\. **Install the Community Node** (please read ‚ö†Ô∏è Disclaimer first)\n\n  * Go to `Settings &gt; Community Nodes &gt; Install`\n  * Paste: `n8n-nodes-discord-trigger` and install.\n\n\n\n#### 3\\. **Configure the Workflow**\n\n  * Add your Discord bot credentials.\n  * Update the LLM credentials with your OpenAI key or alternative.\n  * Customize the AI agent system prompt if needed.\n\n\n\n* * *\n\n### ü§ñ **How It Works**\n\n  * When a **public mention** is detected, the bot replies directly in the channel, referencing the original message.\n  * When a **DM** is received, it responds privately.\n  * The AI uses tools to **read the latest 30 public or private messages** to build accurate context before replying.\n\n\n\n* * *\n\n### üõ† **Customization Options**\n\n  * **Change LLM** : Swap out OpenAI with any LLM that has an API.\n  * **Edit Prompt Behavior** : Modify the system prompt to control tone and personality.\n  * **Adjust Trigger Filters** : Choose which roles, channels, or patterns activate the flow.\n\n\n\n* * *\n\n> And if you just need a tutorial on setting up your Discord bot, be my guest ‚û°Ô∏è [Here](https://www.bonzai.pro/niten-musa/posts/oNz0_19715/discord-bot-tutorial)\n",
  "readme_html": "<!--[--><div data-v-50766329=\"\"><blockquote>\n<p>If you have any question, or difficulty, feel free to come discuss about it on my <a href=\"https://www.bonzai.pro/niten-musa/lp/7018/niten-musa\" rel=\"ugc nofollow\" target=\"_blank\">Telegram</a> (you might find something there üéÅ)</p>\n</blockquote>\n<p><img src=\"https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/AI_Powered_Discord_Bot_Respond_to_Mentions_and_D_Ms_with_Context_Awareness_11cff29d81.png\" alt=\"AIPowered Discord Bot Respond to Mentions and DMs with Context Awareness.png\"></p>\n<h3>‚ö†Ô∏è <strong>Disclaimer</strong></h3>\n<p>This workflow uses a <strong>community node</strong>: <code>n8n-nodes-discord-trigger</code>. Only self-hosted n8n instances can use this workflow.</p>\n<p>Community nodes are maintained outside of n8n‚Äôs core team. Please review their code and use responsibly.</p>\n<hr>\n<h2>Description</h2>\n<p>This n8n workflow enables a fully autonomous AI assistant within your Discord server. It listens for both public mentions and direct messages (DMs), and replies in real-time using a language model (OpenAI's GPT-4o by default). The assistant can dynamically fetch previous messages for better context, providing smart, coherent, and personalized responses.</p>\n<hr>\n<h3>üîß <strong>Key Features</strong></h3>\n<ul>\n<li><strong>Dual Trigger</strong>: Reacts to both public bot mentions and private DMs.</li>\n<li><strong>Context-Aware AI</strong>: Dynamically fetches the last 30 messages from either public or private conversations.</li>\n<li><strong>Smart Routing</strong>: Replies either in the original public channel or via DM, depending on where the message came from.</li>\n<li><strong>Custom Prompting</strong>: Easily modify the system prompt to define the AI‚Äôs tone, behavior, and personality.</li>\n<li><strong>Fully Autonomous</strong>: No manual intervention required ‚Äî the bot always replies instantly.</li>\n</ul>\n<hr>\n<h3>‚úÖ Requirements</h3>\n<ul>\n<li>An operational <strong>n8n instance</strong>.</li>\n<li>A <strong>Discord bot</strong> with at least these permissions:\n<ul>\n<li>Send Messages</li>\n<li>Read Message History</li>\n<li>Manage Messages</li>\n</ul>\n</li>\n<li><strong>OpenAI API key</strong> (or compatible LLM credentials).</li>\n<li>The community package: <code>n8n-nodes-discord-trigger</code>.</li>\n</ul>\n<hr>\n<h3>üß∞ <strong>Setup Instructions</strong></h3>\n<h4>1. <strong>Discord Bot Setup</strong></h4>\n<ul>\n<li>Create and invite your Discord bot to your server with required permissions.</li>\n</ul>\n<blockquote>\n<p>You will find in the next step a complete tutorial to craft your own bot with the right code and permissions for this workflow to work</p>\n</blockquote>\n<ul>\n<li>Set your Discord bot token in n8n's credential manager.</li>\n</ul>\n<h4>2. <strong>Install the Community Node</strong> (please read ‚ö†Ô∏è Disclaimer first)</h4>\n<ul>\n<li>Go to <code>Settings &amp;gt; Community Nodes &amp;gt; Install</code></li>\n<li>Paste: <code>n8n-nodes-discord-trigger</code> and install.</li>\n</ul>\n<h4>3. <strong>Configure the Workflow</strong></h4>\n<ul>\n<li>Add your Discord bot credentials.</li>\n<li>Update the LLM credentials with your OpenAI key or alternative.</li>\n<li>Customize the AI agent system prompt if needed.</li>\n</ul>\n<hr>\n<h3>ü§ñ <strong>How It Works</strong></h3>\n<ul>\n<li>When a <strong>public mention</strong> is detected, the bot replies directly in the channel, referencing the original message.</li>\n<li>When a <strong>DM</strong> is received, it responds privately.</li>\n<li>The AI uses tools to <strong>read the latest 30 public or private messages</strong> to build accurate context before replying.</li>\n</ul>\n<hr>\n<h3>üõ† <strong>Customization Options</strong></h3>\n<ul>\n<li><strong>Change LLM</strong>: Swap out OpenAI with any LLM that has an API.</li>\n<li><strong>Edit Prompt Behavior</strong>: Modify the system prompt to control tone and personality.</li>\n<li><strong>Adjust Trigger Filters</strong>: Choose which roles, channels, or patterns activate the flow.</li>\n</ul>\n<hr>\n<blockquote>\n<p>And if you just need a tutorial on setting up your Discord bot, be my guest ‚û°Ô∏è <a href=\"https://www.bonzai.pro/niten-musa/posts/oNz0_19715/discord-bot-tutorial\" rel=\"ugc nofollow\" target=\"_blank\">Here</a></p>\n</blockquote>\n</div><!--]-->"
}