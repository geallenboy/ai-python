{
  "title": "Automatically document and backup N8N workflows",
  "url": "https://n8n.io/workflows/3354-automatically-document-and-backup-n8n-workflows/",
  "category": "ITOps",
  "category_url": "https://n8n.io/workflows/categories/it-ops/?sort=createdAt:desc",
  "author": "Luke",
  "publish_date": "Last update 6 days ago",
  "publish_date_absolute": "2025-05-16",
  "content": "",
  "workflow_json": "{\"id\":\"oDMm9XRg5bfp9TTu\",\"meta\":{\"instanceId\":\"b70db38ce0f0d2b80e12348ac7eb47bc8c0a4592685b356a48495248d533047c\",\"templateId\":\"2151\",\"templateCredsSetupCompleted\":true},\"name\":\"_infra: Automatically document n8n workflows directly in Notion database\",\"tags\":[{\"id\":\"R5f4JtfSlaX6a5AQ\",\"name\":\"internal-infra\",\"createdAt\":\"2025-02-13T14:32:55.887Z\",\"updatedAt\":\"2025-02-13T14:32:55.887Z\"}],\"nodes\":[{\"id\":\"d702f13e-8e93-4142-87c7-49fbb6031e19\",\"name\":\"Set fields\",\"type\":\"n8n-nodes-base.set\",\"position\":[800,480],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"1744510d-7ed7-46d8-acd3-f975ab73f298\",\"name\":\"active\",\"type\":\"boolean\",\"value\":\"={{ $json.active }}\"},{\"id\":\"7e76f5dc-0c32-4b26-a289-975155b80112\",\"name\":\"url\",\"type\":\"string\",\"value\":\"=https://<n8n_host_name>/workflow/{{ $json.id }}\"},{\"id\":\"a7b069bf-8090-4dca-a432-f4fd7aa84e6f\",\"name\":\"errorWorkflow\",\"type\":\"boolean\",\"value\":\"={{ !!$json.settings?.errorWorkflow }}\"},{\"id\":\"0bff7a9b-0860-4552-b0f6-5fc279fc75d6\",\"name\":\"workflow-name\",\"type\":\"string\",\"value\":\"={{ $json.name }}\"},{\"id\":\"3065ee2f-d1bb-42b7-b341-7bb38b0f6720\",\"name\":\"updatedAt\",\"type\":\"string\",\"value\":\"={{ $json.updatedAt }}\"},{\"id\":\"ea9d39e4-50ca-4c79-b6ab-8b22cafd0257\",\"name\":\"createdAt\",\"type\":\"string\",\"value\":\"={{ $json.createdAt }}\"},{\"id\":\"265d66cd-1796-40eb-ae5b-dca8d1a91871\",\"name\":\"envId\",\"type\":\"string\",\"value\":\"=internal-{{ $json.id }}\"},{\"id\":\"6ffb9c13-82a7-4f40-b2e6-887c018b747c\",\"name\":\"workflow-definition\",\"type\":\"string\",\"value\":\"={{ JSON.stringify($json, null, 2) }}\"},{\"id\":\"8b2a1098-125f-44b0-b8c0-99098e582156\",\"name\":\"workflow-export-filename\",\"type\":\"string\",\"value\":\"={{ $json.name.replace(/ /g, \\\"_\\\").replace(/-/g, \\\"_\\\") + \\\".json\\\" }}\"}]}},\"typeVersion\":3.3},{\"id\":\"4527dc91-bad5-4214-b210-ea8f89504fbf\",\"name\":\"Get notion page with workflow id\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[960,480],\"parameters\":{\"url\":\"https://api.notion.com/v1/databases/<your_db_id_here>/query\",\"method\":\"POST\",\"options\":{},\"jsonBody\":\"={\\n    \\\"filter\\\": { \\\"and\\\": [\\n    {\\n        \\\"property\\\": \\\"envId\\\",\\n        \\\"rich_text\\\": { \\\"contains\\\": \\\"{{ $json.envId }}\\\" }\\n    }]\\n}\\n}\",\"sendBody\":true,\"sendHeaders\":true,\"specifyBody\":\"json\",\"authentication\":\"predefinedCredentialType\",\"headerParameters\":{\"parameters\":[{\"name\":\"Notion-Version\",\"value\":\"2022-06-28\"}]},\"nodeCredentialType\":\"notionApi\"},\"credentials\":{},\"typeVersion\":4.1},{\"id\":\"ced49644-b18f-4984-8dfd-199d88e3ded7\",\"name\":\"Map fields\",\"type\":\"n8n-nodes-base.set\",\"position\":[1120,480],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"49092f3a-7f42-4067-b8ea-1073ef1d1bb8\",\"name\":\"input\",\"type\":\"object\",\"value\":\"={{ $('Set fields').item.json }}\"}]},\"includeOtherFields\":true},\"typeVersion\":3.3},{\"id\":\"86edfe55-9a88-49ed-82de-df0c44a65d53\",\"name\":\"Add to Notion\",\"type\":\"n8n-nodes-base.notion\",\"position\":[1960,460],\"parameters\":{\"title\":\"={{ $('Map fields').item.json.input['workflow-name'] }}\",\"options\":{},\"resource\":\"databasePage\",\"databaseId\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"<replace_me>\",\"cachedResultUrl\":\"https://www.notion.so/<replace_me>\",\"cachedResultName\":\"Workflow Sync\"},\"propertiesUi\":{\"propertyValues\":[{\"key\":\"Workflow Name|title\",\"title\":\"={{ $('Map fields').item.json.input['workflow-name'] }}\"},{\"key\":\"URL (dev)|url\",\"urlValue\":\"={{ $('Map fields').item.json.input.url }}\"},{\"key\":\"isActive (dev)|checkbox\",\"checkboxValue\":\"={{ $('Map fields').item.json.input.active }}\"},{\"key\":\"Workflow created at|date\",\"date\":\"={{ $('Map fields').item.json.input.createdAt }}\"},{\"key\":\"Workflow updated at|date\",\"date\":\"={{ $('Map fields').item.json.input.updatedAt }}\"},{\"key\":\"Error workflow setup|checkbox\",\"checkboxValue\":\"={{ $('Map fields').item.json.input.errorWorkflow }}\"},{\"key\":\"Record last update|date\",\"date\":\"={{ $now }}\"},{\"key\":\"AI Summary|rich_text\",\"textContent\":\"={{ $json.message.content }}\"},{\"key\":\"envId|rich_text\",\"textContent\":\"={{ $('Map fields').item.json.input.envId }}\"}]}},\"credentials\":{},\"typeVersion\":2.1},{\"id\":\"9d547270-37dd-41ee-98b7-13001c954ffa\",\"name\":\"Update in Notion\",\"type\":\"n8n-nodes-base.notion\",\"position\":[1960,640],\"parameters\":{\"pageId\":{\"__rl\":true,\"mode\":\"id\",\"value\":\"={{ $('Map fields').item.json.results[0].id }}\"},\"options\":{},\"resource\":\"databasePage\",\"operation\":\"update\",\"propertiesUi\":{\"propertyValues\":[{\"key\":\"isActive (dev)|checkbox\",\"checkboxValue\":\"={{ $('Set fields').item.json.active }}\"},{\"key\":\"Workflow updated at|date\",\"date\":\"={{ $('Set fields').item.json.updatedAt }}\"},{\"key\":\"Error workflow setup|checkbox\",\"checkboxValue\":\"={{ $('Set fields').item.json.errorWorkflow }}\"},{\"key\":\"AI Summary|rich_text\",\"textContent\":\"={{ $json.message.content }}\"}]}},\"credentials\":{},\"typeVersion\":2.1},{\"id\":\"f612d12c-d3cf-4186-9ed1-c75ed53132cb\",\"name\":\"Notify internal-infra of push\",\"type\":\"n8n-nodes-base.slack\",\"position\":[2160,460],\"webhookId\":\"45139061-cdfe-4f2c-9767-9872d5453770\",\"parameters\":{\"text\":\"=Pushed new workflow to Notion: {{ $('Map fields').item.json.input['workflow-name'] }}\",\"select\":\"channel\",\"channelId\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"<yourchannelID>\",\"cachedResultName\":\"<yourchannelname>\"},\"otherOptions\":{\"includeLinkToWorkflow\":false}},\"credentials\":{},\"typeVersion\":2.3},{\"id\":\"aef5c65e-323b-463b-8e1e-f09cc064c44b\",\"name\":\"Notify internal-infra of update\",\"type\":\"n8n-nodes-base.slack\",\"position\":[2160,640],\"webhookId\":\"11b4a08c-1893-43ac-94ae-6950909a16d8\",\"parameters\":{\"text\":\"=Updated workflow in Notion: {{ $('Map fields').item.json.input['workflow-name'] }}\",\"select\":\"channel\",\"channelId\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"<yourchannelID>\",\"cachedResultName\":\"<yourchannelname>\"},\"otherOptions\":{\"includeLinkToWorkflow\":false}},\"credentials\":{},\"typeVersion\":2.3},{\"id\":\"f200a66c-b902-4b90-8499-93ae7d12a552\",\"name\":\"Notify on workflow setup error\",\"type\":\"n8n-nodes-base.slack\",\"position\":[1060,1020],\"webhookId\":\"08adaa3e-2149-4189-b815-b36b9e72494e\",\"parameters\":{\"text\":\"=WARNING: Error workflow has NOT been setup for: <{{ $json.input.url }}|{{ $json.input['workflow-name'] }}> (No backup will take place until err-workflow is configured)\",\"select\":\"channel\",\"channelId\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"<yourchannelID>\",\"cachedResultName\":\"<yourchannelname>\"},\"otherOptions\":{\"mrkdwn\":true,\"includeLinkToWorkflow\":false}},\"credentials\":{},\"typeVersion\":2.3},{\"id\":\"f10268c7-706f-4651-9bee-99b13cdc1ed1\",\"name\":\"Summarize what the Workflow does\",\"type\":\"@n8n/n8n-nodes-langchain.openAi\",\"position\":[1360,480],\"parameters\":{\"modelId\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"gpt-4o-mini\",\"cachedResultName\":\"GPT-4O-MINI\"},\"options\":{},\"messages\":{\"values\":[{\"content\":\"=Concisely tell me what this N8N plugin does in 1-2 lines, then describe how it does it in no more than a paragraph, but only if that detail was already covered by the first 1-2 lines - we don't want to repeat ourselves.\\n<n8nplugin>\\n{{ $json.input['workflow-definition'] }}\\n</n8nplugin>\"}]}},\"credentials\":{},\"typeVersion\":1.8},{\"id\":\"21fa612f-98c5-4fe6-a048-2e2891bc6893\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[760,380],\"parameters\":{\"color\":4,\"width\":480,\"height\":300,\"content\":\"## Extract key fields\"},\"typeVersion\":1},{\"id\":\"6b6f931b-298f-4ac6-a256-be051912e667\",\"name\":\"Sticky Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1280,380],\"parameters\":{\"color\":5,\"width\":1080,\"height\":440,\"content\":\"## Generate documentation in Notion\\n\"},\"typeVersion\":1},{\"id\":\"7caa1e4a-9705-4abd-9b91-73abe7ef41d0\",\"name\":\"Upload changes to repo\",\"type\":\"n8n-nodes-base.github\",\"onError\":\"continueErrorOutput\",\"position\":[1380,980],\"parameters\":{\"owner\":{\"__rl\":true,\"mode\":\"name\",\"value\":\"<yourownernamehere>\"},\"filePath\":\"=N8N_Workflows/{{ $('Set fields').item.json['workflow-export-filename'].replaceAll(/[\\\\/:*?\\\"<>|,\\\\t\\\\n#%&']/g, \\\"_\\\") }}\",\"resource\":\"file\",\"operation\":\"edit\",\"repository\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"<yourreponamehere>\",\"cachedResultUrl\":\"<yourrepoURLhere>\",\"cachedResultName\":\"<yourreponamehere>\"},\"fileContent\":\"={{ $('Set fields').item.json['workflow-definition'] }}\",\"commitMessage\":\"=updated by N8N #{{ $execution.id }}\",\"authentication\":\"oAuth2\"},\"credentials\":{},\"typeVersion\":1},{\"id\":\"50993b0c-81fa-4042-9fb9-0d53d1266743\",\"name\":\"Create new file in repo\",\"type\":\"n8n-nodes-base.github\",\"onError\":\"continueErrorOutput\",\"position\":[1720,980],\"parameters\":{\"owner\":{\"__rl\":true,\"mode\":\"name\",\"value\":\"<yourownernamehere>\"},\"filePath\":\"=N8N_Workflows/{{ $('Set fields').item.json['workflow-export-filename'].replaceAll(/[\\\\/:*?\\\"<>|,\\\\t\\\\n#%&']/g, \\\"_\\\") }}\",\"resource\":\"file\",\"repository\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"<yourreponamehere>\",\"cachedResultUrl\":\"<yourrepoURLhere>\",\"cachedResultName\":\"<yourreponamehere>\"},\"fileContent\":\"={{ $('Set fields').item.json['workflow-definition'] }}\",\"commitMessage\":\"created by N8N\",\"authentication\":\"oAuth2\"},\"credentials\":{},\"typeVersion\":1},{\"id\":\"e640de5f-2cc8-4fd9-817b-147a3fd67ed3\",\"name\":\"Notify on create file in repo fail\",\"type\":\"n8n-nodes-base.slack\",\"position\":[2160,980],\"webhookId\":\"08adaa3e-2149-4189-b815-b36b9e72494e\",\"parameters\":{\"text\":\"=WARNING: Failed to upload new N8N workflow <{{ $json.input.url }}|{{ $json.input['workflow-name'] }}> to repo\",\"select\":\"channel\",\"channelId\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"<yourchannelID>\",\"cachedResultName\":\"<yourchannelname>\"},\"otherOptions\":{\"mrkdwn\":true,\"includeLinkToWorkflow\":true}},\"credentials\":{},\"typeVersion\":2.3},{\"id\":\"623c4dd7-ebce-4b15-ab2a-b9222eab66f3\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[760,840],\"parameters\":{\"color\":3,\"width\":480,\"height\":360,\"content\":\"## Check workflow setup OK \"},\"typeVersion\":1},{\"id\":\"bc47d8ab-3265-4148-ba2c-23e0a77156b6\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1280,840],\"parameters\":{\"color\":5,\"width\":1080,\"height\":360,\"content\":\"## Upload / backup workflow to GitHub repo\"},\"typeVersion\":1},{\"id\":\"6cf569ad-38cd-4f8d-b65b-7c7fe36b1315\",\"name\":\"Sticky Note4\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[60,380],\"parameters\":{\"width\":660,\"height\":300,\"content\":\"## Check weekly for changes on active internal-infra workflows\"},\"typeVersion\":1},{\"id\":\"b890dacf-2ac2-4802-b96a-5097119d35ee\",\"name\":\"Is this a new workflow (to Notion) ?\",\"type\":\"n8n-nodes-base.if\",\"position\":[1720,480],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"version\":1,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"88337d36-8cf6-4cd5-bec1-5123cf612934\",\"operator\":{\"type\":\"array\",\"operation\":\"empty\",\"singleValue\":true},\"leftValue\":\"={{ $('Map fields').item.json.results }}\",\"rightValue\":\"\"}]}},\"typeVersion\":2},{\"id\":\"2c3549c1-99c1-4255-a02d-2f454e6ced5e\",\"name\":\"Every Monday at 1am\",\"type\":\"n8n-nodes-base.scheduleTrigger\",\"position\":[120,480],\"parameters\":{\"rule\":{\"interval\":[{\"field\":\"weeks\",\"triggerAtDay\":[1],\"triggerAtHour\":1}]}},\"typeVersion\":1.1},{\"id\":\"8d1fdf8c-3a80-4972-b721-ca9477be891b\",\"name\":\"Check if updated in last 7 days\",\"type\":\"n8n-nodes-base.if\",\"position\":[560,480],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"5f0685ee-2ffa-4cf8-8d65-32addb4bb703\",\"operator\":{\"type\":\"dateTime\",\"operation\":\"afterOrEquals\"},\"leftValue\":\"={{ $json.updatedAt }}\",\"rightValue\":\"={{ new Date(new Date().setDate(new Date().getDate()-7)).toISOString() }}\"}]}},\"typeVersion\":2.2},{\"id\":\"3380272e-5631-44aa-b7da-5e23e0966978\",\"name\":\"Get active workflows with internal-infra tag\",\"type\":\"n8n-nodes-base.n8n\",\"position\":[340,480],\"parameters\":{\"filters\":{\"tags\":\"internal-infra\",\"activeWorkflows\":true},\"requestOptions\":{}},\"credentials\":{},\"typeVersion\":1},{\"id\":\"0049cf1e-91e9-4ee0-abd7-5e0bfab18b7f\",\"name\":\"Check that error workflow has been configured\",\"type\":\"n8n-nodes-base.if\",\"position\":[820,900],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"or\",\"conditions\":[{\"id\":\"c53617b5-a217-4111-a229-82d93fb0bec6\",\"operator\":{\"type\":\"boolean\",\"operation\":\"true\",\"singleValue\":true},\"leftValue\":\"={{ $json.input.errorWorkflow }}\",\"rightValue\":\"\"},{\"id\":\"3ea0c94e-e192-4e94-867f-788feda52d61\",\"operator\":{\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"={{ $json.input['workflow-name'] }}\",\"rightValue\":\"_infra: Get a Slack alert when a workflow went wrong\"}]}},\"typeVersion\":2.2}],\"active\":true,\"pinData\":{},\"settings\":{\"callerPolicy\":\"workflowsFromSameOwner\",\"errorWorkflow\":\"dnboDNiqvl2P7sCZ\",\"executionOrder\":\"v1\",\"saveManualExecutions\":false,\"saveExecutionProgress\":true},\"versionId\":\"a5aaebfd-20cc-4042-9a76-1790f8501188\",\"connections\":{\"Map fields\":{\"main\":[[{\"node\":\"Check that error workflow has been configured\",\"type\":\"main\",\"index\":0},{\"node\":\"Summarize what the Workflow does\",\"type\":\"main\",\"index\":0}]]},\"Set fields\":{\"main\":[[{\"node\":\"Get notion page with workflow id\",\"type\":\"main\",\"index\":0}]]},\"Add to Notion\":{\"main\":[[{\"node\":\"Notify internal-infra of push\",\"type\":\"main\",\"index\":0}]]},\"Update in Notion\":{\"main\":[[{\"node\":\"Notify internal-infra of update\",\"type\":\"main\",\"index\":0}]]},\"Every Monday at 1am\":{\"main\":[[{\"node\":\"Get active workflows with internal-infra tag\",\"type\":\"main\",\"index\":0}]]},\"Upload changes to repo\":{\"main\":[[],[{\"node\":\"Create new file in repo\",\"type\":\"main\",\"index\":0}]]},\"Create new file in repo\":{\"main\":[[],[{\"node\":\"Notify on create file in repo fail\",\"type\":\"main\",\"index\":0}]]},\"Notify on workflow setup error\":{\"main\":[[]]},\"Check if updated in last 7 days\":{\"main\":[[{\"node\":\"Set fields\",\"type\":\"main\",\"index\":0}]]},\"Get notion page with workflow id\":{\"main\":[[{\"node\":\"Map fields\",\"type\":\"main\",\"index\":0}]]},\"Summarize what the Workflow does\":{\"main\":[[{\"node\":\"Is this a new workflow (to Notion) ?\",\"type\":\"main\",\"index\":0}]]},\"Is this a new workflow (to Notion) ?\":{\"main\":[[{\"node\":\"Add to Notion\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Update in Notion\",\"type\":\"main\",\"index\":0}]]},\"Get active workflows with internal-infra tag\":{\"main\":[[{\"node\":\"Check if updated in last 7 days\",\"type\":\"main\",\"index\":0}]]},\"Check that error workflow has been configured\":{\"main\":[[{\"node\":\"Upload changes to repo\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Notify on workflow setup error\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "Automatically backs up your workflows to Github and generates documentation in a Notion database.\n\n  * Weekly run, uses the \"internal-infra\" tag to look for new or recently modified workflows\n  * Uses a Notion database page to hold the workflow summary, last updated date, and a link to the workflow\n  * Uses OpenAI's 4o-mini to generate a summarization of what the workflow does\n  * Stores a backup of the workflow in GitHub (recommend a private repo)\n  * Sends notification to Slack channel for new or updated workflows\n\n\n\n## Who is this for\n\n  * Anyone seeking backup of their most important workflows\n  * Anyone seeking version control for their most important workflows\n\n\n\n## Credentials required\n\n  * N8N: You will need an N8N credential created so the workflow can query the N8N instance to find all active workflows with the \"internal-infra\" tag\n  * Notion: You will need an Notion credential created\n  * OpenAI: You will need an OpenAI credential, unless you intend on rewiring this with your AI of choice (ollama, openrouter, etc.)\n  * GitHub: You will need an GitHub credential\n  * Slack: You will require an Slack credential, recommend a Bot / access token configuration\n\n\n\n## Setup\n\n#### Notion\n\n  * Create a database with the following columns. Column type is specified in [type]. \n    * Workflow Name [text]\n    * isActive (dev) [checkbox]\n    * Error workflow setup [checkbox]\n    * AI Summary [text]\n    * Record last update [date/time]\n    * URL (dev) [text/url]\n    * Workflow created at [date/time]\n    * Workflow updated at [date/time]\n\n\n\n#### Slack\n\n  * Create a channel for updates to be posted into\n\n\n\n#### Github\n\n  * Create a private repo for your workflows to be exported into\n\n\n\n#### N8N\n\n  * Download & install the template\n  * Configure the blocks to use your N8N, Notion, OpenAI & Slack credentials for your own\n  * Edit the \"Set Fields\" block and change the URL to that of your N8N instance (cloud or self-hosted)\n  * Edit the \"Add to Notion\" action and specify the Database page you wish to update\n  * Edit the Slack actions to specify the Channel you want slack notifications posted to\n  * Edit the GitHub actions to specify the Repository Owner & Repository Name\n\n\n\n**Sample output in Notion**![Autodoc_backup_workflows_NotionOutput.png](https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/Autodoc_backup_workflows_Notion_Output_98fe92e3f7.png)\n\n**Workflow diagram**![Autodoc_backup_workflows_N8NEditorView.png](https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/Autodoc_backup_workflows_N8_N_Editor_View_578144286b.png)\n",
  "readme_html": "<!--[--><div data-v-859c7806=\"\"><p>Automatically backs up your workflows to Github and generates documentation in a Notion database.</p>\n<ul>\n<li>Weekly run, uses the \"internal-infra\" tag to look for new or recently modified workflows</li>\n<li>Uses a Notion database page to hold the workflow summary, last updated date, and a link to the workflow</li>\n<li>Uses OpenAI's 4o-mini to generate a summarization of what the workflow does</li>\n<li>Stores a backup of the workflow in GitHub (recommend a private repo)</li>\n<li>Sends notification to Slack channel for new or updated workflows</li>\n</ul>\n<h2>Who is this for</h2>\n<ul>\n<li>Anyone seeking backup of their most important workflows</li>\n<li>Anyone seeking version control for their most important workflows</li>\n</ul>\n<h2>Credentials required</h2>\n<ul>\n<li>N8N: You will need an N8N credential created so the workflow can query the N8N instance to find all active workflows with the \"internal-infra\" tag</li>\n<li>Notion: You will need an Notion credential created</li>\n<li>OpenAI: You will need an OpenAI credential, unless you intend on rewiring this with your AI of choice (ollama, openrouter, etc.)</li>\n<li>GitHub: You will need an GitHub credential</li>\n<li>Slack: You will require an Slack credential, recommend a Bot / access token configuration</li>\n</ul>\n<h2>Setup</h2>\n<h4>Notion</h4>\n<ul>\n<li>Create a database with the following columns. Column type is specified in [type].\n<ul>\n<li>Workflow Name [text]</li>\n<li>isActive (dev) [checkbox]</li>\n<li>Error workflow setup [checkbox]</li>\n<li>AI Summary [text]</li>\n<li>Record last update [date/time]</li>\n<li>URL (dev) [text/url]</li>\n<li>Workflow created at [date/time]</li>\n<li>Workflow updated at [date/time]</li>\n</ul>\n</li>\n</ul>\n<h4>Slack</h4>\n<ul>\n<li>Create a channel for updates to be posted into</li>\n</ul>\n<h4>Github</h4>\n<ul>\n<li>Create a private repo for your workflows to be exported into</li>\n</ul>\n<h4>N8N</h4>\n<ul>\n<li>Download &amp; install the template</li>\n<li>Configure the blocks to use your N8N, Notion, OpenAI &amp; Slack credentials for your own</li>\n<li>Edit the \"Set Fields\" block and change the URL to that of your N8N instance (cloud or self-hosted)</li>\n<li>Edit the \"Add to Notion\" action and specify the Database page you wish to update</li>\n<li>Edit the Slack actions to specify the Channel you want slack notifications posted to</li>\n<li>Edit the GitHub actions to specify the Repository Owner &amp; Repository Name</li>\n</ul>\n<p><strong>Sample output in Notion</strong><img src=\"https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/Autodoc_backup_workflows_Notion_Output_98fe92e3f7.png\" alt=\"Autodoc_backup_workflows_NotionOutput.png\"></p>\n<p><strong>Workflow diagram</strong><img src=\"https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/Autodoc_backup_workflows_N8_N_Editor_View_578144286b.png\" alt=\"Autodoc_backup_workflows_N8NEditorView.png\"></p>\n</div><!--]-->",
  "readme_zh": "自动将您的工作流备份至Github并在Notion数据库中生成文档。\n\n  * 每周运行，通过\"internal-infra\"标签查找新增或近期修改的工作流\n  * 使用Notion数据库页面记录工作流摘要、最后更新日期及工作流链接\n  * 调用OpenAI的4o-mini模型生成工作流功能摘要\n  * 在GitHub存储工作流备份（建议使用私有仓库）\n  * 通过Slack频道发送新增/更新工作流通知",
  "title_zh": "自动记录并备份N8N工作流程",
  "publish_date_zh": "最后更新于6天前",
  "workflow_json_zh": "{\n  \"id\": \"oDMm9XRg5bfp9TTu\",\n  \"meta\": {\n    \"instanceId\": \"b70db38ce0f0d2b80e12348ac7eb47bc8c0a4592685b356a48495248d533047c\",\n    \"templateId\": \"2151\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"name\": \"_infra: Automatically document n8n workflows directly in Notion database\",\n  \"tags\": [\n    {\n      \"id\": \"R5f4JtfSlaX6a5AQ\",\n      \"name\": \"internal-infra\",\n      \"createdAt\": \"2025-02-13T14:32:55.887Z\",\n      \"updatedAt\": \"2025-02-13T14:32:55.887Z\"\n    }\n  ],\n  \"nodes\": [\n    {\n      \"id\": \"d702f13e-8e93-4142-87c7-49fbb6031e19\",\n      \"name\": \"Set fields\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        800,\n        480\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"1744510d-7ed7-46d8-acd3-f975ab73f298\",\n              \"name\": \"active\",\n              \"type\": \"boolean\",\n              \"value\": \"={{ $json.active }}\"\n            },\n            {\n              \"id\": \"7e76f5dc-0c32-4b26-a289-975155b80112\",\n              \"name\": \"url\",\n              \"type\": \"string\",\n              \"value\": \"=https://<n8n_host_name>/workflow/{{ $json.id }}\"\n            },\n            {\n              \"id\": \"a7b069bf-8090-4dca-a432-f4fd7aa84e6f\",\n              \"name\": \"errorWorkflow\",\n              \"type\": \"boolean\",\n              \"value\": \"={{ !!$json.settings?.errorWorkflow }}\"\n            },\n            {\n              \"id\": \"0bff7a9b-0860-4552-b0f6-5fc279fc75d6\",\n              \"name\": \"workflow-name\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.name }}\"\n            },\n            {\n              \"id\": \"3065ee2f-d1bb-42b7-b341-7bb38b0f6720\",\n              \"name\": \"updatedAt\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.updatedAt }}\"\n            },\n            {\n              \"id\": \"ea9d39e4-50ca-4c79-b6ab-8b22cafd0257\",\n              \"name\": \"createdAt\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.createdAt }}\"\n            },\n            {\n              \"id\": \"265d66cd-1796-40eb-ae5b-dca8d1a91871\",\n              \"name\": \"envId\",\n              \"type\": \"string\",\n              \"value\": \"=internal-{{ $json.id }}\"\n            },\n            {\n              \"id\": \"6ffb9c13-82a7-4f40-b2e6-887c018b747c\",\n              \"name\": \"workflow-definition\",\n              \"type\": \"string\",\n              \"value\": \"={{ JSON.stringify($json, null, 2) }}\"\n            },\n            {\n              \"id\": \"8b2a1098-125f-44b0-b8c0-99098e582156\",\n              \"name\": \"workflow-export-filename\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.name.replace(/ /g, \\\"_\\\").replace(/-/g, \\\"_\\\") + \\\".json\\\" }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.3\n    },\n    {\n      \"id\": \"4527dc91-bad5-4214-b210-ea8f89504fbf\",\n      \"name\": \"Get notion page with workflow id\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        960,\n        480\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.notion.com/v1/databases/<your_db_id_here>/query\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"jsonBody\": \"={\\n    \\\"filter\\\": { \\\"and\\\": [\\n    {\\n        \\\"property\\\": \\\"envId\\\",\\n        \\\"rich_text\\\": { \\\"contains\\\": \\\"{{ $json.envId }}\\\" }\\n    }]\\n}\\n}\",\n        \"sendBody\": true,\n        \"sendHeaders\": true,\n        \"specifyBody\": \"json\",\n        \"authentication\": \"predefinedCredentialType\",\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"Notion-Version\",\n              \"value\": \"2022-06-28\"\n            }\n          ]\n        },\n        \"nodeCredentialType\": \"notionApi\"\n      },\n      \"credentials\": {},\n      \"typeVersion\": 4.1\n    },\n    {\n      \"id\": \"ced49644-b18f-4984-8dfd-199d88e3ded7\",\n      \"name\": \"Map fields\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        1120,\n        480\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"49092f3a-7f42-4067-b8ea-1073ef1d1bb8\",\n              \"name\": \"input\",\n              \"type\": \"object\",\n              \"value\": \"={{ $('Set fields').item.json }}\"\n            }\n          ]\n        },\n        \"includeOtherFields\": true\n      },\n      \"typeVersion\": 3.3\n    },\n    {\n      \"id\": \"86edfe55-9a88-49ed-82de-df0c44a65d53\",\n      \"name\": \"Add to Notion\",\n      \"type\": \"n8n-nodes-base.notion\",\n      \"position\": [\n        1960,\n        460\n      ],\n      \"parameters\": {\n        \"title\": \"={{ $('Map fields').item.json.input['workflow-name'] }}\",\n        \"options\": {},\n        \"resource\": \"databasePage\",\n        \"databaseId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"<replace_me>\",\n          \"cachedResultUrl\": \"https://www.notion.so/<replace_me>\",\n          \"cachedResultName\": \"Workflow Sync\"\n        },\n        \"propertiesUi\": {\n          \"propertyValues\": [\n            {\n              \"key\": \"Workflow Name|title\",\n              \"title\": \"={{ $('Map fields').item.json.input['workflow-name'] }}\"\n            },\n            {\n              \"key\": \"URL (dev)|url\",\n              \"urlValue\": \"={{ $('Map fields').item.json.input.url }}\"\n            },\n            {\n              \"key\": \"isActive (dev)|checkbox\",\n              \"checkboxValue\": \"={{ $('Map fields').item.json.input.active }}\"\n            },\n            {\n              \"key\": \"Workflow created at|date\",\n              \"date\": \"={{ $('Map fields').item.json.input.createdAt }}\"\n            },\n            {\n              \"key\": \"Workflow updated at|date\",\n              \"date\": \"={{ $('Map fields').item.json.input.updatedAt }}\"\n            },\n            {\n              \"key\": \"Error workflow setup|checkbox\",\n              \"checkboxValue\": \"={{ $('Map fields').item.json.input.errorWorkflow }}\"\n            },\n            {\n              \"key\": \"Record last update|date\",\n              \"date\": \"={{ $now }}\"\n            },\n            {\n              \"key\": \"AI Summary|rich_text\",\n              \"textContent\": \"={{ $json.message.content }}\"\n            },\n            {\n              \"key\": \"envId|rich_text\",\n              \"textContent\": \"={{ $('Map fields').item.json.input.envId }}\"\n            }\n          ]\n        }\n      },\n      \"credentials\": {},\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"9d547270-37dd-41ee-98b7-13001c954ffa\",\n      \"name\": \"Update in Notion\",\n      \"type\": \"n8n-nodes-base.notion\",\n      \"position\": [\n        1960,\n        640\n      ],\n      \"parameters\": {\n        \"pageId\": {\n          \"__rl\": true,\n          \"mode\": \"id\",\n          \"value\": \"={{ $('Map fields').item.json.results[0].id }}\"\n        },\n        \"options\": {},\n        \"resource\": \"databasePage\",\n        \"operation\": \"update\",\n        \"propertiesUi\": {\n          \"propertyValues\": [\n            {\n              \"key\": \"isActive (dev)|checkbox\",\n              \"checkboxValue\": \"={{ $('Set fields').item.json.active }}\"\n            },\n            {\n              \"key\": \"Workflow updated at|date\",\n              \"date\": \"={{ $('Set fields').item.json.updatedAt }}\"\n            },\n            {\n              \"key\": \"Error workflow setup|checkbox\",\n              \"checkboxValue\": \"={{ $('Set fields').item.json.errorWorkflow }}\"\n            },\n            {\n              \"key\": \"AI Summary|rich_text\",\n              \"textContent\": \"={{ $json.message.content }}\"\n            }\n          ]\n        }\n      },\n      \"credentials\": {},\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"f612d12c-d3cf-4186-9ed1-c75ed53132cb\",\n      \"name\": \"Notify internal-infra of push\",\n      \"type\": \"n8n-nodes-base.slack\",\n      \"position\": [\n        2160,\n        460\n      ],\n      \"webhookId\": \"45139061-cdfe-4f2c-9767-9872d5453770\",\n      \"parameters\": {\n        \"text\": \"=Pushed new workflow to Notion: {{ $('Map fields').item.json.input['workflow-name'] }}\",\n        \"select\": \"channel\",\n        \"channelId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"<yourchannelID>\",\n          \"cachedResultName\": \"<yourchannelname>\"\n        },\n        \"otherOptions\": {\n          \"includeLinkToWorkflow\": false\n        }\n      },\n      \"credentials\": {},\n      \"typeVersion\": 2.3\n    },\n    {\n      \"id\": \"aef5c65e-323b-463b-8e1e-f09cc064c44b\",\n      \"name\": \"Notify internal-infra of update\",\n      \"type\": \"n8n-nodes-base.slack\",\n      \"position\": [\n        2160,\n        640\n      ],\n      \"webhookId\": \"11b4a08c-1893-43ac-94ae-6950909a16d8\",\n      \"parameters\": {\n        \"text\": \"=Updated workflow in Notion: {{ $('Map fields').item.json.input['workflow-name'] }}\",\n        \"select\": \"channel\",\n        \"channelId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"<yourchannelID>\",\n          \"cachedResultName\": \"<yourchannelname>\"\n        },\n        \"otherOptions\": {\n          \"includeLinkToWorkflow\": false\n        }\n      },\n      \"credentials\": {},\n      \"typeVersion\": 2.3\n    },\n    {\n      \"id\": \"f200a66c-b902-4b90-8499-93ae7d12a552\",\n      \"name\": \"Notify on workflow setup error\",\n      \"type\": \"n8n-nodes-base.slack\",\n      \"position\": [\n        1060,\n        1020\n      ],\n      \"webhookId\": \"08adaa3e-2149-4189-b815-b36b9e72494e\",\n      \"parameters\": {\n        \"text\": \"=WARNING: Error workflow has NOT been setup for: <{{ $json.input.url }}|{{ $json.input['workflow-name'] }}> (No backup will take place until err-workflow is configured)\",\n        \"select\": \"channel\",\n        \"channelId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"<yourchannelID>\",\n          \"cachedResultName\": \"<yourchannelname>\"\n        },\n        \"otherOptions\": {\n          \"mrkdwn\": true,\n          \"includeLinkToWorkflow\": false\n        }\n      },\n      \"credentials\": {},\n      \"typeVersion\": 2.3\n    },\n    {\n      \"id\": \"f10268c7-706f-4651-9bee-99b13cdc1ed1\",\n      \"name\": \"Summarize what the Workflow does\",\n      \"type\": \"@n8n/n8n-nodes-langchain.openAi\",\n      \"position\": [\n        1360,\n        480\n      ],\n      \"parameters\": {\n        \"modelId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gpt-4o-mini\",\n          \"cachedResultName\": \"GPT-4O-MINI\"\n        },\n        \"options\": {},\n        \"messages\": {\n          \"values\": [\n            {\n              \"content\": \"=Concisely tell me what this N8N plugin does in 1-2 lines, then describe how it does it in no more than a paragraph, but only if that detail was already covered by the first 1-2 lines - we don't want to repeat ourselves.\\n<n8nplugin>\\n{{ $json.input['workflow-definition'] }}\\n</n8nplugin>\"\n            }\n          ]\n        }\n      },\n      \"credentials\": {},\n      \"typeVersion\": 1.8\n    },\n    {\n      \"id\": \"21fa612f-98c5-4fe6-a048-2e2891bc6893\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        760,\n        380\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 480,\n        \"height\": 300,\n        \"content\": \"## 提取关键字段\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"6b6f931b-298f-4ac6-a256-be051912e667\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1280,\n        380\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 1080,\n        \"height\": 440,\n        \"content\": \"## 在Notion中生成文档\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"7caa1e4a-9705-4abd-9b91-73abe7ef41d0\",\n      \"name\": \"Upload changes to repo\",\n      \"type\": \"n8n-nodes-base.github\",\n      \"onError\": \"continueErrorOutput\",\n      \"position\": [\n        1380,\n        980\n      ],\n      \"parameters\": {\n        \"owner\": {\n          \"__rl\": true,\n          \"mode\": \"name\",\n          \"value\": \"<yourownernamehere>\"\n        },\n        \"filePath\": \"=N8N_Workflows/{{ $('Set fields').item.json['workflow-export-filename'].replaceAll(/[\\\\/:*?\\\"<>|,\\\\t\\\\n#%&']/g, \\\"_\\\") }}\",\n        \"resource\": \"file\",\n        \"operation\": \"edit\",\n        \"repository\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"<yourreponamehere>\",\n          \"cachedResultUrl\": \"<yourrepoURLhere>\",\n          \"cachedResultName\": \"<yourreponamehere>\"\n        },\n        \"fileContent\": \"={{ $('Set fields').item.json['workflow-definition'] }}\",\n        \"commitMessage\": \"=updated by N8N #{{ $execution.id }}\",\n        \"authentication\": \"oAuth2\"\n      },\n      \"credentials\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"50993b0c-81fa-4042-9fb9-0d53d1266743\",\n      \"name\": \"Create new file in repo\",\n      \"type\": \"n8n-nodes-base.github\",\n      \"onError\": \"continueErrorOutput\",\n      \"position\": [\n        1720,\n        980\n      ],\n      \"parameters\": {\n        \"owner\": {\n          \"__rl\": true,\n          \"mode\": \"name\",\n          \"value\": \"<yourownernamehere>\"\n        },\n        \"filePath\": \"=N8N_Workflows/{{ $('Set fields').item.json['workflow-export-filename'].replaceAll(/[\\\\/:*?\\\"<>|,\\\\t\\\\n#%&']/g, \\\"_\\\") }}\",\n        \"resource\": \"file\",\n        \"repository\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"<yourreponamehere>\",\n          \"cachedResultUrl\": \"<yourrepoURLhere>\",\n          \"cachedResultName\": \"<yourreponamehere>\"\n        },\n        \"fileContent\": \"={{ $('Set fields').item.json['workflow-definition'] }}\",\n        \"commitMessage\": \"created by N8N\",\n        \"authentication\": \"oAuth2\"\n      },\n      \"credentials\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"e640de5f-2cc8-4fd9-817b-147a3fd67ed3\",\n      \"name\": \"Notify on create file in repo fail\",\n      \"type\": \"n8n-nodes-base.slack\",\n      \"position\": [\n        2160,\n        980\n      ],\n      \"webhookId\": \"08adaa3e-2149-4189-b815-b36b9e72494e\",\n      \"parameters\": {\n        \"text\": \"=WARNING: Failed to upload new N8N workflow <{{ $json.input.url }}|{{ $json.input['workflow-name'] }}> to repo\",\n        \"select\": \"channel\",\n        \"channelId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"<yourchannelID>\",\n          \"cachedResultName\": \"<yourchannelname>\"\n        },\n        \"otherOptions\": {\n          \"mrkdwn\": true,\n          \"includeLinkToWorkflow\": true\n        }\n      },\n      \"credentials\": {},\n      \"typeVersion\": 2.3\n    },\n    {\n      \"id\": \"623c4dd7-ebce-4b15-ab2a-b9222eab66f3\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        760,\n        840\n      ],\n      \"parameters\": {\n        \"color\": 3,\n        \"width\": 480,\n        \"height\": 360,\n        \"content\": \"## 检查工作流设置正常\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"bc47d8ab-3265-4148-ba2c-23e0a77156b6\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1280,\n        840\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 1080,\n        \"height\": 360,\n        \"content\": \"## 上传/备份工作流到GitHub仓库\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"6cf569ad-38cd-4f8d-b65b-7c7fe36b1315\",\n      \"name\": \"Sticky Note4\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        60,\n        380\n      ],\n      \"parameters\": {\n        \"width\": 660,\n        \"height\": 300,\n        \"content\": \"## 每周检查活跃的内部基础设施工作流是否有变更\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"b890dacf-2ac2-4802-b96a-5097119d35ee\",\n      \"name\": \"Is this a new workflow (to Notion) ?\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        1720,\n        480\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 1,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"88337d36-8cf6-4cd5-bec1-5123cf612934\",\n              \"operator\": {\n                \"type\": \"array\",\n                \"operation\": \"empty\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $('Map fields').item.json.results }}\",\n              \"rightValue\": \"\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"2c3549c1-99c1-4255-a02d-2f454e6ced5e\",\n      \"name\": \"Every Monday at 1am\",\n      \"type\": \"n8n-nodes-base.scheduleTrigger\",\n      \"position\": [\n        120,\n        480\n      ],\n      \"parameters\": {\n        \"rule\": {\n          \"interval\": [\n            {\n              \"field\": \"weeks\",\n              \"triggerAtDay\": [\n                1\n              ],\n              \"triggerAtHour\": 1\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"8d1fdf8c-3a80-4972-b721-ca9477be891b\",\n      \"name\": \"Check if updated in last 7 days\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        560,\n        480\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"5f0685ee-2ffa-4cf8-8d65-32addb4bb703\",\n              \"operator\": {\n                \"type\": \"dateTime\",\n                \"operation\": \"afterOrEquals\"\n              },\n              \"leftValue\": \"={{ $json.updatedAt }}\",\n              \"rightValue\": \"={{ new Date(new Date().setDate(new Date().getDate()-7)).toISOString() }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"3380272e-5631-44aa-b7da-5e23e0966978\",\n      \"name\": \"Get active workflows with internal-infra tag\",\n      \"type\": \"n8n-nodes-base.n8n\",\n      \"position\": [\n        340,\n        480\n      ],\n      \"parameters\": {\n        \"filters\": {\n          \"tags\": \"internal-infra\",\n          \"activeWorkflows\": true\n        },\n        \"requestOptions\": {}\n      },\n      \"credentials\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"0049cf1e-91e9-4ee0-abd7-5e0bfab18b7f\",\n      \"name\": \"Check that error workflow has been configured\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        820,\n        900\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"or\",\n          \"conditions\": [\n            {\n              \"id\": \"c53617b5-a217-4111-a229-82d93fb0bec6\",\n              \"operator\": {\n                \"type\": \"boolean\",\n                \"operation\": \"true\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $json.input.errorWorkflow }}\",\n              \"rightValue\": \"\"\n            },\n            {\n              \"id\": \"3ea0c94e-e192-4e94-867f-788feda52d61\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"equals\"\n              },\n              \"leftValue\": \"={{ $json.input['workflow-name'] }}\",\n              \"rightValue\": \"_infra: Get a Slack alert when a workflow went wrong\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    }\n  ],\n  \"active\": true,\n  \"pinData\": {},\n  \"settings\": {\n    \"callerPolicy\": \"workflowsFromSameOwner\",\n    \"errorWorkflow\": \"dnboDNiqvl2P7sCZ\",\n    \"executionOrder\": \"v1\",\n    \"saveManualExecutions\": false,\n    \"saveExecutionProgress\": true\n  },\n  \"versionId\": \"a5aaebfd-20cc-4042-9a76-1790f8501188\",\n  \"connections\": {\n    \"Map fields\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Check that error workflow has been configured\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Summarize what the Workflow does\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Set fields\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get notion page with workflow id\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Add to Notion\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Notify internal-infra of push\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Update in Notion\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Notify internal-infra of update\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Every Monday at 1am\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get active workflows with internal-infra tag\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Upload changes to repo\": {\n      \"main\": [\n        [],\n        [\n          {\n            \"node\": \"Create new file in repo\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Create new file in repo\": {\n      \"main\": [\n        [],\n        [\n          {\n            \"node\": \"Notify on create file in repo fail\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Notify on workflow setup error\": {\n      \"main\": [\n        []\n      ]\n    },\n    \"Check if updated in last 7 days\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set fields\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get notion page with workflow id\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Map fields\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Summarize what the Workflow does\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Is this a new workflow (to Notion) ?\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Is this a new workflow (to Notion) ?\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Add to Notion\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Update in Notion\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get active workflows with internal-infra tag\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Check if updated in last 7 days\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Check that error workflow has been configured\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Upload changes to repo\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Notify on workflow setup error\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}