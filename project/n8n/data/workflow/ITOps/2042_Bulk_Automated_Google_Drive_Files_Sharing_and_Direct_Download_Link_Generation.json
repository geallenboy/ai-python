{
  "title": "Bulk Automated Google Drive Files Sharing and Direct Download Link Generation",
  "url": "https://n8n.io/workflows/2042-bulk-automated-google-drive-files-sharing-and-direct-download-link-generation/",
  "category": "ITOps",
  "category_url": "https://n8n.io/workflows/categories/it-ops/?sort=createdAt:desc",
  "author": "Nskha",
  "publish_date": "Last update 10 months ago",
  "publish_date_absolute": "2024-07-06",
  "content": "",
  "workflow_json": "{\"meta\":{\"instanceId\":\"c59a6b1daf09a846754bc2cf0a94db3299bd5a69fb14687c3a5e692704c548dd\"},\"nodes\":[{\"id\":\"2165cd37-10ff-46bd-88a5-c8377bf4bef7\",\"name\":\"Google Drive\",\"type\":\"n8n-nodes-base.googleDrive\",\"position\":[1280,1100],\"parameters\":{\"limit\":100,\"options\":{\"spaces\":[\"*\"],\"corpora\":\"allDrives\"},\"operation\":\"list\",\"queryString\":\"='{{ $json[\\\"Folder ID\\\"] }}' in parents\",\"authentication\":\"oAuth2\",\"useQueryString\":true},\"credentials\":{\"googleDriveOAuth2Api\":{\"id\":\"KJE0ZORR1Q1fJCd5\",\"name\":\"Google Drive account 2\"}},\"typeVersion\":1},{\"id\":\"5061db5e-2137-4c50-8902-a24cd53a6bdf\",\"name\":\"Loop Over Items\",\"type\":\"n8n-nodes-base.splitInBatches\",\"position\":[1480,1160],\"parameters\":{\"options\":{},\"batchSize\":50},\"typeVersion\":3},{\"id\":\"62a16fb8-9bfc-46db-a556-23fac7f403f5\",\"name\":\"Merge\",\"type\":\"n8n-nodes-base.merge\",\"position\":[1720,1020],\"parameters\":{\"mode\":\"combine\",\"options\":{},\"combinationMode\":\"multiplex\"},\"typeVersion\":2.1},{\"id\":\"bd410148-e745-43a2-960b-128bbb49828f\",\"name\":\"Set Folder ID\",\"type\":\"n8n-nodes-base.set\",\"notes\":\"Enter desired Folder\",\"position\":[1120,1100],\"parameters\":{\"fields\":{\"values\":[{\"name\":\"Folder ID\",\"stringValue\":\"Enter Your Folder ID here\"}]},\"options\":{}},\"notesInFlow\":true,\"typeVersion\":3.2},{\"id\":\"16def9df-5c8b-4359-a879-11e66f191f92\",\"name\":\"Manual Execute Workflow\",\"type\":\"n8n-nodes-base.manualTrigger\",\"notes\":\"Optional\",\"position\":[940,1100],\"parameters\":{},\"notesInFlow\":true,\"typeVersion\":1},{\"id\":\"e7d54620-e5e6-470e-add5-ccefdfb2a979\",\"name\":\"Generate Download Links\",\"type\":\"n8n-nodes-base.code\",\"position\":[1480,980],\"parameters\":{\"jsCode\":\"// This function will create an array of file links from the given Google Drive folder\\nreturn items.map(file => {\\n  return { json: { 'link': `https://drive.google.com/u/3/uc?id=${file.json.id}&export=download&confirm=t&authuser=0`, 'name': file.json.name } };\\n});\"},\"typeVersion\":2},{\"id\":\"04e71edf-c40f-4c80-961c-f511e145232c\",\"name\":\"Change Status\",\"type\":\"n8n-nodes-base.googleDrive\",\"notes\":\"Make Files Public to anyone with a link\",\"position\":[1660,1180],\"parameters\":{\"fileId\":{\"__rl\":true,\"mode\":\"id\",\"value\":\"={{ $json.id }}\"},\"options\":{\"supportsAllDrives\":true},\"operation\":\"share\",\"permissionsUi\":{\"permissionsValues\":{\"role\":\"reader\",\"type\":\"anyone\"}},\"authentication\":\"oAuth2\"},\"credentials\":{\"googleDriveOAuth2Api\":{\"id\":\"KJE0ZORR1Q1fJCd5\",\"name\":\"Google Drive account 2\"}},\"notesInFlow\":true,\"typeVersion\":1},{\"id\":\"4452cd81-e94a-465e-987b-5acf46e25428\",\"name\":\"Replace Me\",\"type\":\"n8n-nodes-base.noOp\",\"position\":[1880,1020],\"parameters\":{},\"typeVersion\":1},{\"id\":\"dab69e10-d9af-4ece-a6c6-cb35468e3bf0\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[880,820],\"parameters\":{\"width\":1235.0111197082438,\"height\":545.6382804772701,\"content\":\"## Example Output:\\n```JSON\\n{\\n\\\"link\\\": \\\"https://drive.google.com/u/3/uc?id=1hojqPfXchNTY8YRTNkxSo-8txK9re-V4&export=download&confirm=t&authuser=0\\\",\\n\\\"name\\\": \\\"firefox_rNjA0ybKu7.png\\\",\\n\\\"kind\\\": \\\"drive#permission\\\",\\n\\\"id\\\": \\\"anyoneWithLink\\\",\\n\\\"type\\\": \\\"anyone\\\",\\n\\\"role\\\": \\\"reader\\\",\\n\\\"allowFileDiscovery\\\": false\\n}\\n```\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n### You can store the output data with any data store node you want\\n### for example save them into Excel Sheet or Airtable etc...\"},\"typeVersion\":1}],\"pinData\":{},\"connections\":{\"Merge\":{\"main\":[[{\"node\":\"Replace Me\",\"type\":\"main\",\"index\":0}]]},\"Google Drive\":{\"main\":[[{\"node\":\"Loop Over Items\",\"type\":\"main\",\"index\":0},{\"node\":\"Generate Download Links\",\"type\":\"main\",\"index\":0}]]},\"Change Status\":{\"main\":[[{\"node\":\"Loop Over Items\",\"type\":\"main\",\"index\":0}]]},\"Set Folder ID\":{\"main\":[[{\"node\":\"Google Drive\",\"type\":\"main\",\"index\":0}]]},\"Loop Over Items\":{\"main\":[[{\"node\":\"Merge\",\"type\":\"main\",\"index\":1}],[{\"node\":\"Change Status\",\"type\":\"main\",\"index\":0}]]},\"Generate Download Links\":{\"main\":[[{\"node\":\"Merge\",\"type\":\"main\",\"index\":0}]]},\"Manual Execute Workflow\":{\"main\":[[{\"node\":\"Set Folder ID\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "This N8N workflow automates the process of sharing files from Google Drive. It includes OAuth2 authentication, batch processing, public link generation, and access status modification for efficient file handling. Suitable for users seeking to streamline their Google Drive file sharing process. sutiable for bulk actions, tested on 4.2K files folder working like charm.\n\n![xeL6OxvdLi.png](https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/xe_L6_Oxvd_Li_3bcd6f4c77.png)\n\n### How It Works\n\n  1. **Initialize Workflow** : The process begins with a Manual Trigger, allowing the user to start the workflow at their convenience.\n  2. **Folder ID Specification** : A 'Set Folder ID' node where the user can enter the desired Google Drive Folder ID.\n  3. **List Files from Google Drive** : The 'Google Drive' node lists all files within the specified folder using OAuth2 authentication.\n  4. **Batch Processing** : The 'Loop Over Items' node processes the files in batches for efficiency.\n  5. **Generate Public Links** : The 'Generate Download Links' node creates downloadable links for each file.\n  6. **Change File Access** : The 'Change Status' node alters the file status to make them publicly accessible.\n  7. **Merge and Output** : A 'Merge' node consolidates the data, preparing it for further actions or output.\n\n\n\n### Set Up Steps\n\n  * **Estimated Time** : The setup should take approximately 10-15 minutes.\n  * **Initial Setup** : You'll need to provide OAuth2 credentials for Google Drive and specify a folder ID.\n  * **Customization** : Adjust the batch size and file access permissions according to your needs.\n  * **Detailed Descriptions** : For specific configuration details, refer to the sticky notes within the workflow.\n\n\n\n### Example Item output\n    \n    \n    {\n    \"link\": \"https://drive.google.com/u/3/uc?id=1hojqPfXchNTY8YRTNkxSo-8txK9re-V4&export=download&confirm=t&authuser=0\",\n    \"name\": \"firefox_rNjA0ybKu7.png\",\n    \"kind\": \"drive#permission\",\n    \"id\": \"anyoneWithLink\",\n    \"type\": \"anyone\",\n    \"role\": \"reader\",\n    \"allowFileDiscovery\": false\n    }\n    \n\nYou can store the output data with any data store node you want, for example save them into Excel Sheet or Airtable etc...\n    \n    \n    Keywords: n8n workflow, Google Drive integration, file sharing automation, batch file processing, public link generation, OAuth2 authentication, workflow automation\n    \n",
  "readme_html": "<!--[--><div data-v-50766329=\"\"><p>This N8N workflow automates the process of sharing files from Google Drive. It includes OAuth2 authentication, batch processing, public link generation, and access status modification for efficient file handling. Suitable for users seeking to streamline their Google Drive file sharing process. sutiable for bulk actions, tested on 4.2K files folder working like charm.</p>\n<p><img src=\"https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/xe_L6_Oxvd_Li_3bcd6f4c77.png\" alt=\"xeL6OxvdLi.png\"></p>\n<h3>How It Works</h3>\n<ol>\n<li><strong>Initialize Workflow</strong>: The process begins with a Manual Trigger, allowing the user to start the workflow at their convenience.</li>\n<li><strong>Folder ID Specification</strong>: A 'Set Folder ID' node where the user can enter the desired Google Drive Folder ID.</li>\n<li><strong>List Files from Google Drive</strong>: The 'Google Drive' node lists all files within the specified folder using OAuth2 authentication.</li>\n<li><strong>Batch Processing</strong>: The 'Loop Over Items' node processes the files in batches for efficiency.</li>\n<li><strong>Generate Public Links</strong>: The 'Generate Download Links' node creates downloadable links for each file.</li>\n<li><strong>Change File Access</strong>: The 'Change Status' node alters the file status to make them publicly accessible.</li>\n<li><strong>Merge and Output</strong>: A 'Merge' node consolidates the data, preparing it for further actions or output.</li>\n</ol>\n<h3>Set Up Steps</h3>\n<ul>\n<li><strong>Estimated Time</strong>: The setup should take approximately 10-15 minutes.</li>\n<li><strong>Initial Setup</strong>: You'll need to provide OAuth2 credentials for Google Drive and specify a folder ID.</li>\n<li><strong>Customization</strong>: Adjust the batch size and file access permissions according to your needs.</li>\n<li><strong>Detailed Descriptions</strong>: For specific configuration details, refer to the sticky notes within the workflow.</li>\n</ul>\n<h3>Example Item output</h3>\n<pre><code>{\n\"link\": \"https://drive.google.com/u/3/uc?id=1hojqPfXchNTY8YRTNkxSo-8txK9re-V4&amp;export=download&amp;confirm=t&amp;authuser=0\",\n\"name\": \"firefox_rNjA0ybKu7.png\",\n\"kind\": \"drive#permission\",\n\"id\": \"anyoneWithLink\",\n\"type\": \"anyone\",\n\"role\": \"reader\",\n\"allowFileDiscovery\": false\n}\n</code></pre>\n<p>You can store the output data with any data store node you want, for example save them into Excel Sheet or Airtable etc...</p>\n<pre><code>Keywords: n8n workflow, Google Drive integration, file sharing automation, batch file processing, public link generation, OAuth2 authentication, workflow automation\n</code></pre>\n</div><!--]-->",
  "readme_zh": "此N8N工作流自动化了从Google Drive分享文件的过程，包含OAuth2认证、批量处理、公开链接生成及访问状态修改功能，实现高效文件管理。特别适合需要简化Google Drive文件共享流程的用户，支持批量操作，已在包含4.2万文件的文件夹中完美测试通过。\n\n![xeL6OxvdLi.png](https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/xe_L6_Oxvd_Li_3bcd6f4c77.png)\n\n### 工作原理\n\n1. **初始化工作流**：通过手动触发器启动，用户可随时触发流程  \n2. **指定文件夹ID**：在\"设置文件夹ID\"节点输入目标Google Drive文件夹ID  \n3. **列出Google Drive文件**：通过OAuth2认证的\"Google Drive\"节点获取指定文件夹内所有文件  \n4. **批量处理**：\"循环处理项\"节点实现高效分批处理  \n5. **生成公开链接**：\"生成下载链接\"节点为每个文件创建可下载链接  \n6. **修改文件访问权限**：\"更改状态\"节点将文件设为公开访问  \n7. **合并输出**：\"合并\"节点整合数据，供后续操作使用  \n\n### 设置步骤\n\n* **预计耗时**：约10-15分钟  \n* **初始设置**：需配置Google Drive的OAuth2凭证并指定文件夹ID  \n* **自定义设置**：可调整批量处理大小和文件访问权限  \n* **详细说明**：具体配置请参考工作流内的便签注释  \n\n### 示例输出项\n```json\n{\n    \"link\": \"https://drive.google.com/u/3/uc?id=1hojqPfXchNTY8YRTNkxSo-8txK9re-V4&export=download&confirm=t&authuser=0\",\n    \"name\": \"firefox_rNjA0ybKu7.png\",\n    \"kind\": \"drive#permission\",\n    \"id\": \"anyoneWithLink\",\n    \"type\": \"anyone\",\n    \"role\": \"reader\",\n    \"allowFileDiscovery\": false\n}\n```\n输出数据可存储至任意数据库节点，例如Excel表格或Airtable等平台  \n\n关键词：n8n工作流、Google Drive集成、文件共享自动化、批量文件处理、公开链接生成、OAuth2认证、工作流自动化",
  "title_zh": "批量自动化Google Drive文件共享及直接下载链接生成",
  "publish_date_zh": "最后更新于10个月前",
  "workflow_json_zh": "{\n  \"meta\": {\n    \"instanceId\": \"c59a6b1daf09a846754bc2cf0a94db3299bd5a69fb14687c3a5e692704c548dd\"\n  },\n  \"nodes\": [\n    {\n      \"id\": \"2165cd37-10ff-46bd-88a5-c8377bf4bef7\",\n      \"name\": \"Google Drive\",\n      \"type\": \"n8n-nodes-base.googleDrive\",\n      \"position\": [\n        1280,\n        1100\n      ],\n      \"parameters\": {\n        \"limit\": 100,\n        \"options\": {\n          \"spaces\": [\n            \"*\"\n          ],\n          \"corpora\": \"allDrives\"\n        },\n        \"operation\": \"list\",\n        \"queryString\": \"='{{ $json[\\\"Folder ID\\\"] }}' in parents\",\n        \"authentication\": \"oAuth2\",\n        \"useQueryString\": true\n      },\n      \"credentials\": {\n        \"googleDriveOAuth2Api\": {\n          \"id\": \"KJE0ZORR1Q1fJCd5\",\n          \"name\": \"Google Drive account 2\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"5061db5e-2137-4c50-8902-a24cd53a6bdf\",\n      \"name\": \"Loop Over Items\",\n      \"type\": \"n8n-nodes-base.splitInBatches\",\n      \"position\": [\n        1480,\n        1160\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"batchSize\": 50\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"62a16fb8-9bfc-46db-a556-23fac7f403f5\",\n      \"name\": \"Merge\",\n      \"type\": \"n8n-nodes-base.merge\",\n      \"position\": [\n        1720,\n        1020\n      ],\n      \"parameters\": {\n        \"mode\": \"combine\",\n        \"options\": {},\n        \"combinationMode\": \"multiplex\"\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"bd410148-e745-43a2-960b-128bbb49828f\",\n      \"name\": \"Set Folder ID\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"notes\": \"Enter desired Folder\",\n      \"position\": [\n        1120,\n        1100\n      ],\n      \"parameters\": {\n        \"fields\": {\n          \"values\": [\n            {\n              \"name\": \"Folder ID\",\n              \"stringValue\": \"Enter Your Folder ID here\"\n            }\n          ]\n        },\n        \"options\": {}\n      },\n      \"notesInFlow\": true,\n      \"typeVersion\": 3.2\n    },\n    {\n      \"id\": \"16def9df-5c8b-4359-a879-11e66f191f92\",\n      \"name\": \"Manual Execute Workflow\",\n      \"type\": \"n8n-nodes-base.manualTrigger\",\n      \"notes\": \"Optional\",\n      \"position\": [\n        940,\n        1100\n      ],\n      \"parameters\": {},\n      \"notesInFlow\": true,\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"e7d54620-e5e6-470e-add5-ccefdfb2a979\",\n      \"name\": \"Generate Download Links\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        1480,\n        980\n      ],\n      \"parameters\": {\n        \"jsCode\": \"// This function will create an array of file links from the given Google Drive folder\\nreturn items.map(file => {\\n  return { json: { 'link': `https://drive.google.com/u/3/uc?id=${file.json.id}&export=download&confirm=t&authuser=0`, 'name': file.json.name } };\\n});\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"04e71edf-c40f-4c80-961c-f511e145232c\",\n      \"name\": \"Change Status\",\n      \"type\": \"n8n-nodes-base.googleDrive\",\n      \"notes\": \"Make Files Public to anyone with a link\",\n      \"position\": [\n        1660,\n        1180\n      ],\n      \"parameters\": {\n        \"fileId\": {\n          \"__rl\": true,\n          \"mode\": \"id\",\n          \"value\": \"={{ $json.id }}\"\n        },\n        \"options\": {\n          \"supportsAllDrives\": true\n        },\n        \"operation\": \"share\",\n        \"permissionsUi\": {\n          \"permissionsValues\": {\n            \"role\": \"reader\",\n            \"type\": \"anyone\"\n          }\n        },\n        \"authentication\": \"oAuth2\"\n      },\n      \"credentials\": {\n        \"googleDriveOAuth2Api\": {\n          \"id\": \"KJE0ZORR1Q1fJCd5\",\n          \"name\": \"Google Drive account 2\"\n        }\n      },\n      \"notesInFlow\": true,\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"4452cd81-e94a-465e-987b-5acf46e25428\",\n      \"name\": \"Replace Me\",\n      \"type\": \"n8n-nodes-base.noOp\",\n      \"position\": [\n        1880,\n        1020\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"dab69e10-d9af-4ece-a6c6-cb35468e3bf0\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        880,\n        820\n      ],\n      \"parameters\": {\n        \"width\": 1235.0111197082438,\n        \"height\": 545.6382804772701,\n        \"content\": \"## 示例输出：\\n```JSON\\n{\\n\\\"link\\\": \\\"https://drive.google.com/u/3/uc?id=1hojqPfXchNTY8YRTNkxSo-8txK9re-V4&export=download&confirm=t&authuser=0\\\",\\n\\\"name\\\": \\\"firefox_rNjA0ybKu7.png\\\",\\n\\\"kind\\\": \\\"drive#permission\\\",\\n\\\"id\\\": \\\"anyoneWithLink\\\",\\n\\\"type\\\": \\\"anyone\\\",\\n\\\"role\\\": \\\"reader\\\",\\n\\\"allowFileDiscovery\\\": false\\n}\\n```\\n\\n### 您可以使用任意数据存储节点保存输出数据\\n### 例如存入Excel表格或Airtable等平台...\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"Merge\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Replace Me\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Google Drive\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Loop Over Items\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Generate Download Links\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Change Status\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Loop Over Items\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Set Folder ID\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Google Drive\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Loop Over Items\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge\",\n            \"type\": \"main\",\n            \"index\": 1\n          }\n        ],\n        [\n          {\n            \"node\": \"Change Status\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Generate Download Links\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Manual Execute Workflow\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set Folder ID\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}