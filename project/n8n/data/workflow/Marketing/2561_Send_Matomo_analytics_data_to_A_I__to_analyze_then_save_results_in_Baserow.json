{
  "title": "Send Matomo analytics data to A.I. to analyze then save results in Baserow",
  "url": "https://n8n.io/workflows/2561-send-matomo-analytics-data-to-ai-to-analyze-then-save-results-in-baserow/",
  "category": "Marketing",
  "category_url": "https://n8n.io/workflows/categories/marketing/?sort=createdAt:desc",
  "author": "Keith Rumjahn",
  "publish_date": "Last update 2 months ago",
  "publish_date_absolute": "",
  "content": "",
  "workflow_json": "{\"id\":\"PRQhetYFkuhxntVH\",\"meta\":{\"instanceId\":\"558d88703fb65b2d0e44613bc35916258b0f0bf983c5d4730c00c424b77ca36a\",\"templateCredsSetupCompleted\":true},\"name\":\"Matomo Analytics Report\",\"tags\":[],\"nodes\":[{\"id\":\"fd35d612-09a6-4dd3-836b-53d03b75f344\",\"name\":\"When clicking â€˜Test workflowâ€™\",\"type\":\"n8n-nodes-base.manualTrigger\",\"position\":[120,360],\"parameters\":{},\"typeVersion\":1},{\"id\":\"c8169606-3abd-4dd3-bd35-fdc0296fc0e1\",\"name\":\"Schedule Trigger\",\"type\":\"n8n-nodes-base.scheduleTrigger\",\"position\":[120,160],\"parameters\":{\"rule\":{\"interval\":[{\"field\":\"weeks\"}]}},\"typeVersion\":1.2},{\"id\":\"760a87e3-ed8f-4b1e-a46b-4ceb635020d4\",\"name\":\"Get data from Matomo\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[380,260],\"parameters\":{\"url\":\"https://shrewd-lyrebird.pikapod.net/index.php\",\"method\":\"POST\",\"options\":{},\"sendBody\":true,\"contentType\":\"multipart-form-data\",\"bodyParameters\":{\"parameters\":[{\"name\":\"module\",\"value\":\"API\"},{\"name\":\"method\",\"value\":\"Live.getLastVisitsDetails\"},{\"name\":\"idSite\",\"value\":\"3\"},{\"name\":\"period\",\"value\":\"range\"},{\"name\":\"date\",\"value\":\"last30\"},{\"name\":\"format\",\"value\":\"JSON\"},{\"name\":\"segment\",\"value\":\"visitCount>3\"},{\"name\":\"filter_limit\",\"value\":\"100\"},{\"name\":\"showColumns\",\"value\":\"actionDetails,visitIp,visitorId,visitCount\"},{\"name\":\"token_auth\",\"value\":\"{insert your auth token}\"}]}},\"typeVersion\":4.1},{\"id\":\"f9e9a099-3131-4320-8a86-b9add4e43096\",\"name\":\"Parse data from Matomo\",\"type\":\"n8n-nodes-base.code\",\"position\":[580,260],\"parameters\":{\"jsCode\":\"// Get input data\\nconst items = $input.all();\\n\\n// Format the visitor data into a clear prompt\\nconst visitorData = items.map(item => {\\n  const visit = item.json;\\n  \\n  const visitorActions = visit.actionDetails.map(action => \\n    `  - Page ${action.pageviewPosition}: ${action.pageTitle}\\\\n    URL: ${action.url}\\\\n    Time Spent: ${action.timeSpentPretty}`\\n  ).join('\\\\n');\\n\\n  return `- Visitor (ID: ${visit.visitorId}):\\\\n  Visit Count: ${visit.visitCount}\\\\n${visitorActions}`;\\n}).join('\\\\n\\\\n');\\n\\n// Create the prompt\\nconst prompt = `Please analyze this visitor data:\\\\n\\\\n${visitorData}\\\\n\\\\nPlease provide insights on:\\\\n1. Common visitor paths\\\\n2. Popular pages\\\\n3. User engagement patterns\\\\n4. Recommendations for improvement`;\\n\\n// Return formatted for LLaMA\\nreturn [{\\n  json: {\\n    messages: [\\n      {\\n        role: \\\"user\\\",\\n        content: prompt\\n      }\\n    ]\\n  }\\n}];\"},\"typeVersion\":2},{\"id\":\"387832ee-8397-43f8-bf62-846e4a7a20d0\",\"name\":\"Send data to A.I. for analysis\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[760,260],\"parameters\":{\"url\":\"https://openrouter.ai/api/v1/chat/completions\",\"method\":\"POST\",\"options\":{},\"jsonBody\":\"={\\n  \\\"model\\\": \\\"meta-llama/llama-3.1-70b-instruct:free\\\",\\n  \\\"messages\\\": [\\n    {\\n      \\\"role\\\": \\\"user\\\",\\n      \\\"content\\\": \\\"You are an SEO expert. This is data of visitors who have visited my site more then 3 times and the pages they have visited. Can you give me insights into this data:{{ encodeURIComponent($json.messages[0].content)}}\\\" \\n    }\\n  ]\\n}\",\"sendBody\":true,\"specifyBody\":\"json\",\"authentication\":\"genericCredentialType\",\"genericAuthType\":\"httpHeaderAuth\"},\"credentials\":{\"httpHeaderAuth\":{\"id\":\"WY7UkF14ksPKq3S8\",\"name\":\"Header Auth account 2\"}},\"typeVersion\":4.2,\"alwaysOutputData\":false},{\"id\":\"7ee29949-550e-4f3a-8420-49ca2608bbeb\",\"name\":\"Store results in Baserow\",\"type\":\"n8n-nodes-base.baserow\",\"position\":[1060,260],\"parameters\":{\"tableId\":643,\"fieldsUi\":{\"fieldValues\":[{\"fieldId\":6261,\"fieldValue\":\"={{ DateTime.now().toFormat('yyyy-MM-dd') }}\"},{\"fieldId\":6262,\"fieldValue\":\"={{ $json.choices[0].message.content }}\"},{\"fieldId\":6263,\"fieldValue\":\"Your blog name\"}]},\"operation\":\"create\",\"databaseId\":121},\"credentials\":{\"baserowApi\":{\"id\":\"8w0zXhycIfCAgja3\",\"name\":\"Baserow account\"}},\"typeVersion\":1},{\"id\":\"684ca1c9-97c3-4464-8ce6-aa6019db0c04\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[80,-360],\"parameters\":{\"color\":5,\"width\":615,\"height\":289,\"content\":\"## Send Matomo analytics to A.I. and save results to baserow\\n\\nThis workflow will check for visitors who have visited more than 3 times. It will take this week's data and compare it to last week's data and give SEO suggestions.\\n\\n[Watch youtube tutorial here](https://www.youtube.com/watch?v=hGzdhXyU-o8)\\n\\n[Get my SEO A.I. agent system here](https://2828633406999.gumroad.com/l/rumjahn)\\n\\n[ðŸ’¡ You can read more about this workflow here](https://rumjahn.com/how-to-create-an-a-i-agent-to-analyze-matomo-analytics-using-n8n-for-free/)\\n\"},\"typeVersion\":1},{\"id\":\"29723224-416e-46b4-a498-90888eb9a41b\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[320,-20],\"parameters\":{\"width\":224.51612903225822,\"height\":461.4193548387107,\"content\":\"## Get Matomo Data\\n \\n1. Enter your Matomo API key at the bottom\\n2. Navigate to Administration > Personal > Security > Auth tokens within your Matomo dashboard. Click on Create new token and provide a purpose for reference.\"},\"typeVersion\":1},{\"id\":\"c694c855-c37a-4717-befd-d7a216f99e2d\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[700,-20],\"parameters\":{\"color\":3,\"width\":225.99936321742769,\"height\":508.95792207792226,\"content\":\"## Send data to A.I.\\n\\nFill in your Openrouter A.I. credentials. Use Header Auth.\\n- Username: Authorization\\n- Password: Bearer {insert your API key}\\n\\nRemember to add a space after bearer. Also, feel free to modify the prompt to A.1.\"},\"typeVersion\":1},{\"id\":\"fdd12783-0456-4fc7-8030-555f058f2fd2\",\"name\":\"Sticky Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[960,-20],\"parameters\":{\"color\":6,\"width\":331.32883116883124,\"height\":474.88,\"content\":\"## Send data to Baserow\\n\\nCreate a table first with the following columns:\\n- Date\\n- Note\\n- Blog\\n\\nEnter the name of your website under \\\"Blog\\\" field.\"},\"typeVersion\":1}],\"active\":false,\"pinData\":{},\"settings\":{\"executionOrder\":\"v1\"},\"versionId\":\"21a1d486-5bb8-40b9-9032-6ab22d8baebc\",\"connections\":{\"Schedule Trigger\":{\"main\":[[{\"node\":\"Get data from Matomo\",\"type\":\"main\",\"index\":0}]]},\"Get data from Matomo\":{\"main\":[[{\"node\":\"Parse data from Matomo\",\"type\":\"main\",\"index\":0}]]},\"Parse data from Matomo\":{\"main\":[[{\"node\":\"Send data to A.I. for analysis\",\"type\":\"main\",\"index\":0}]]},\"Send data to A.I. for analysis\":{\"main\":[[{\"node\":\"Store results in Baserow\",\"type\":\"main\",\"index\":0}]]},\"When clicking â€˜Test workflowâ€™\":{\"main\":[[{\"node\":\"Get data from Matomo\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "# Who's this for?\n\n  * If you own a website and need to analyze your Matomo analytics data so you can increse the number of frequent visitors\n  * If you need to create an SEO report on what are the common trends amongst your most frequent visitors\n  * If you want to grow your site based on suggestions from data\n\n\n\nMatomo is an analytics tool that can give you details of each individual visitor. Much more powerful than Google analytics.\n\n[Watch youtube tutorial here](https://www.youtube.com/watch?v=myG_tR2kBqo)\n\n[Get my SEO A.I. agent system here](https://2828633406999.gumroad.com/l/rumjahn)\n\n**[Read more -> How to create an A.I. Agent to analyze Matomo analytics using n8n for free](https://rumjahn.com/how-to-create-an-a-i-agent-to-analyze-matomo-analytics-using-n8n-for-free/)**\n\n![Screenshot 20241121 at 4.17.51 PM.png](https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/Screenshot_2024_11_21_at_4_17_51_PM_24bc93cab6.png)\n\nHere's the A.I. output:  \n![Screenshot 20241121 at 4.26.07 PM.png](https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/Screenshot_2024_11_21_at_4_26_07_PM_c9987c2330.png)\n    \n    \n    Keywords showing the most improvement:\n    Openrouter N8N.\n    \n    Keywords needing attention:\n    Ai Generated Reference Letter\n    \n    Obsidian Second Brain\n    \n    Suggested actions for improvement: \n    1. Optimize for \"best Docker Synology\" despite stable ranking, an improvement to top 10 is an achievable goal.\n    \n    2. Since \"2nd brain app for developer\"  is of interest to a developer. Consider writing a blog post on how the app addresses the specific pain points of developers.\n    \n    \n\n# Use case\n\nInstead of hiring an SEO expert, I run this report weekly. It looks at the data for the past week and looks for visitors with more than 3 visits and recommends ideas to convert more visitors into frequent visitors.\n\n# How it works\n\n  1. The workflow gathers matomo analytics for the past 7 days.\n  2. We then parse the data\n  3. The data is sent to Openrouter and using a FREE LLM, it analyses the data.\n  4. It stores the results in baserow\n\n\n\n# How to use this\n\n  * Input your Matomo analytics credentials\n  * Input your Matomo site ID\n  * Input your [Openrouter.ai](http://Openrouter.ai) credentials\n  * Input your baserow credentials\n  * You will need to create a baserow database with columns: Dates, Notes, Blog.\n\n\n\nCreated by [Rumjahn](Rumjahn)\n",
  "readme_html": "<!--[--><div data-v-50766329=\"\"><h1>Who's this for?</h1>\n<ul>\n<li>If you own a website and need to analyze your Matomo analytics data so you can increse the number of frequent visitors</li>\n<li>If you need to create an SEO report on what are the common trends amongst your most frequent visitors</li>\n<li>If you want to grow your site based on suggestions from data</li>\n</ul>\n<p>Matomo is an analytics tool that can give you details of each individual visitor. Much more powerful than Google analytics.</p>\n<p><a href=\"https://www.youtube.com/watch?v=myG_tR2kBqo\" rel=\"ugc nofollow\" target=\"_blank\">Watch youtube tutorial here</a></p>\n<p><a href=\"https://2828633406999.gumroad.com/l/rumjahn\" rel=\"ugc nofollow\" target=\"_blank\">Get my SEO A.I. agent system here</a></p>\n<p><strong><a href=\"https://rumjahn.com/how-to-create-an-a-i-agent-to-analyze-matomo-analytics-using-n8n-for-free/\" rel=\"ugc nofollow\" target=\"_blank\">Read more -&gt; How to create an A.I. Agent to analyze Matomo analytics using n8n for free</a></strong></p>\n<p><img src=\"https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/Screenshot_2024_11_21_at_4_17_51_PM_24bc93cab6.png\" alt=\"Screenshot 20241121 at 4.17.51 PM.png\"></p>\n<p>Here's the A.I. output:<br>\n<img src=\"https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/Screenshot_2024_11_21_at_4_26_07_PM_c9987c2330.png\" alt=\"Screenshot 20241121 at 4.26.07 PM.png\"></p>\n<pre><code>Keywords showing the most improvement:\nOpenrouter N8N.\n\nKeywords needing attention:\nAi Generated Reference Letter\n\nObsidian Second Brain\n\nSuggested actions for improvement: \n1. Optimize for \"best Docker Synology\" despite stable ranking, an improvement to top 10 is an achievable goal.\n\n2. Since \"2nd brain app for developer\"  is of interest to a developer. Consider writing a blog post on how the app addresses the specific pain points of developers.\n\n</code></pre>\n<h1>Use case</h1>\n<p>Instead of hiring an SEO expert, I run this report weekly. It looks at the data for the past week and looks for visitors with more than 3 visits and recommends ideas to convert more visitors into frequent visitors.</p>\n<h1>How it works</h1>\n<ol>\n<li>The workflow gathers matomo analytics for the past 7 days.</li>\n<li>We then parse the data</li>\n<li>The data is sent to Openrouter and using a FREE LLM, it analyses the data.</li>\n<li>It stores the results in baserow</li>\n</ol>\n<h1>How to use this</h1>\n<ul>\n<li>Input your Matomo analytics credentials</li>\n<li>Input your Matomo site ID</li>\n<li>Input your <a href=\"http://Openrouter.ai\" rel=\"ugc nofollow\" target=\"_blank\">Openrouter.ai</a> credentials</li>\n<li>Input your baserow credentials</li>\n<li>You will need to create a baserow database with columns: Dates, Notes, Blog.</li>\n</ul>\n<p>Created by <a href=\"Rumjahn\" rel=\"ugc nofollow\">Rumjahn</a></p>\n</div><!--]-->"
}