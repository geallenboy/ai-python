{
  "title": "Generate Knowledge Base Articles with GPT & Perplexity AI for Contentful CMS",
  "url": "https://n8n.io/workflows/4012-generate-knowledge-base-articles-with-gpt-and-perplexity-ai-for-contentful-cms/",
  "category": "Marketing",
  "category_url": "https://n8n.io/workflows/categories/marketing/?sort=createdAt:desc",
  "author": "Cristiano Varriale",
  "publish_date": "Last update a day ago",
  "publish_date_absolute": "",
  "content": "",
  "workflow_json": "{\"id\":\"WwEFqNK4YP6UJcg2\",\"meta\":{\"instanceId\":\"6bcff5ef8a06e8086902526a05c2a4c7bf5da8101f89e582301ed78094606f40\",\"templateCredsSetupCompleted\":true},\"name\":\"Auto Knowledge Base Article Generator\",\"tags\":[],\"nodes\":[{\"id\":\"17900021-8da3-4bd9-9d79-5d20d879ddc7\",\"name\":\"Create Perplexity Content\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[1220,380],\"parameters\":{\"url\":\"https://api.perplexity.ai/chat/completions\",\"method\":\"POST\",\"options\":{},\"jsonBody\":\"={\\n  \\\"model\\\": \\\"sonar-deep-research\\\",\\n  \\\"messages\\\": [\\n    {\\n      \\\"role\\\": \\\"user\\\",\\n      \\\"content\\\": \\\"Conduct an in-depth research on '{{ $json.output.parseJson().title }}', covering essential topics, recommended resources, and best practices. Additionally, please address these improvements: '{{ $json.output.parseJson().improvements }}'. The returned data should be at least 1000 words and use a combination of headers, tables, bold, and italics\\\"\\n    }\\n  ],\\n  \\\"max_tokens\\\": 60000,\\n  \\\"temperature\\\": 0.7,\\n  \\\"top_p\\\": 0.9,\\n  \\\"top_k\\\": 50,\\n  \\\"stream\\\": false,\\n  \\\"presence_penalty\\\": 0,\\n  \\\"frequency_penalty\\\": 0\\n}\",\"sendBody\":true,\"jsonHeaders\":\"{\\n  \\\"Authorization\\\": \\\"Bearer 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\\\",\\n  \\\"Content-Type\\\": \\\"application/json\\\"\\n}\",\"sendHeaders\":true,\"specifyBody\":\"json\",\"specifyHeaders\":\"json\"},\"typeVersion\":4.2},{\"id\":\"0cb3f3a7-92bd-4ff3-8a89-b6fc29513e65\",\"name\":\"AI Writer Agent\",\"type\":\"@n8n/n8n-nodes-langchain.agent\",\"position\":[720,380],\"parameters\":{\"text\":\"=Please create or revise an article about \\\"{{ $json.chatInput }}\\\".\\n\\nOr an article is already written because title: {{ $json.title }} is defined. Reference it to rewrite the {{ $json.content }} field\\n\\nDo not change the title, either the chatinput or the input article title. This is the title, do not change it.\\n\\nIf an article is NOT given, pick new categories in:\\n- getting-started\\n- learning-paths\\n- certifications\\n- programming\\n- applications\\n- career\\n\\nDo not make up a category, it should be the same in the exact case as above\\n\\nIf an article is given, only make ammendments to the content based on these specific improvements to include: \\\"{{ $json.improvements }}\\\".\\n\\nInclude the improvements key only if it is an input, and in that case don't change it\\n\\nRemember to return valid JSON with the fields:\\n{\\n  \\\"title\\\": \\\"...\\\",\\n  \\\"slug\\\": \\\"...\\\",\\n  \\\"category\\\": {\\n    \\\"id\\\": \\\"...\\\"\\n  },\\n  \\\"description\\\": \\\"...\\\",\\n  \\\"keywords\\\": [...],\\n  \\\"content\\\": \\\"...\\\",\\n  \\\"metaTitle\\\": \\\"...\\\",\\n  \\\"metaDescription\\\": \\\"...\\\",\\n  \\\"readingTime\\\": \\\"...\\\",\\n  \\\"difficulty\\\": \\\"...\\\"\\n  \\\"content\\\": \\\"...\\\"\\n}\",\"options\":{\"systemMessage\":\"You are a writing assistant. You will receive instructions to create or update an article in JSON format with the following structure:\\n\\n{\\n  \\\"title\\\": \\\"<string>\\\",\\n  \\\"slug\\\": \\\"<string>\\\",\\n  \\\"category\\\": {\\n    \\\"id\\\": \\\"<string>\\\" // e.g., \\\"getting-started\\\", \\\"learning-paths\\\", etc.\\n  },\\n  \\\"description\\\": \\\"<string>\\\",\\n  \\\"keywords\\\": [\\\"<string>\\\", \\\"<string>\\\", ...],\\n  \\\"content\\\": \\\"<string>\\\",\\n  \\\"metaTitle\\\": \\\"<string>\\\",\\n  \\\"metaDescription\\\": \\\"<string>\\\",\\n  \\\"readingTime\\\": \\\"<number or string>\\\",\\n  \\\"difficulty\\\": \\\"<string>\\\"\\n}\\n\\nYour task:\\n1. Produce a complete article in the above format, or revise the existing article if provided.\\n2. Make sure the text is clear, specific, and helpful to the reader.\\n3. Return valid JSON only â€“ do not include extra commentary or fields beyond the above structure.\\n4. If any information is missing from the user instructions, make reasonable assumptions.\\n\"},\"promptType\":\"define\"},\"typeVersion\":1.7},{\"id\":\"bc62facb-c5cb-465d-89b1-a65a893c3ce1\",\"name\":\"AI Editor Agent\",\"type\":\"@n8n/n8n-nodes-langchain.agent\",\"position\":[2280,380],\"parameters\":{\"text\":\"={{ $json }}\",\"options\":{\"maxIterations\":5,\"systemMessage\":\"=You are an editorial AI assistant. Your role is to review and evaluate a draft article represented as a JSON object.\\n\\nCategory IDs:\\n- \\\"getting-started\\\"\\n- \\\"learning-paths\\\"\\n- \\\"certifications\\\"\\n- \\\"programming\\\"\\n- \\\"applications\\\"\\n- \\\"career\\\"\\n\\nInput Format:\\n\\n{\\n  \\\"title\\\": \\\"<string>\\\",\\n  \\\"slug\\\": \\\"<string>\\\",\\n  \\\"category\\\": { \\\"id\\\": \\\"<string>\\\" },\\n  \\\"description\\\": \\\"<string>\\\",\\n  \\\"keywords\\\": [\\\"<string>\\\", \\\"...\\\"],\\n  \\\"content\\\": \\\"<string>\\\",\\n  \\\"metaTitle\\\": \\\"<string>\\\",\\n  \\\"metaDescription\\\": \\\"<string>\\\",\\n  \\\"readingTime\\\": \\\"<string | number>\\\",\\n  \\\"difficulty\\\": \\\"<string>\\\"\\n}\\n\\nYour Tasks:\\n\\n1. Evaluate the quality of the article â€” especially the title, description, content, and metadata.\\n2. Comment on clarity, specificity, usefulness, and overall quality.\\n3. If improvements are needed, add an \\\"improvements\\\" field describing exactly what to fix.\\n4. Set the \\\"action\\\" field:\\n- \\\"rewrite\\\" if improvements are needed.\\n- \\\"submit\\\" if the article is high quality.\\n5. Include all fields from the original input in your output.\\n6. If \\\"action\\\" is \\\"submit\\\", set \\\"improvements\\\" to null.\\n7. Avoid repeating feedback across iterations.\\n8. After 2 iterations, automatically call the accept-and-publish tool and set the \\\"action\\\" to \\\"submit\\\".\\n9. VERY IMPORTANT: Do NOT modify any of the input fields\\n10. VERY IMPORTANT: Do NOT truncate the sources or modify the content field in any way\\n\\nâœ… Output Format:\\n\\n{\\n  \\\"title\\\": \\\"...\\\",\\n  \\\"action\\\": \\\"rewrite | submit\\\",\\n  \\\"improvements\\\": \\\"... | null\\\",\\n  \\\"slug\\\": \\\"...\\\",\\n  \\\"category\\\": {\\n    \\\"id\\\": \\\"...\\\"\\n  },\\n  \\\"description\\\": \\\"...\\\",\\n  \\\"keywords\\\": [\\\"...\\\"],\\n  \\\"content\\\": \\\"...\\\",\\n  \\\"metaTitle\\\": \\\"...\\\",\\n  \\\"metaDescription\\\": \\\"...\\\",\\n  \\\"readingTime\\\": \\\"...\\\",\\n  \\\"difficulty\\\": \\\"...\\\"\\n}\\n\\nTone: Be concise, direct, and constructive. Focus on maximizing clarity, usefulness, and readability for the end reader.\"},\"promptType\":\"define\",\"hasOutputParser\":true},\"retryOnFail\":true,\"typeVersion\":1.7},{\"id\":\"8c08d67a-b916-4cfd-89cd-16b34250bcb2\",\"name\":\"OpenAI Chat Model\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\"position\":[680,640],\"parameters\":{\"model\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"gpt-3.5-turbo\",\"cachedResultName\":\"gpt-3.5-turbo\"},\"options\":{}},\"credentials\":{\"openAiApi\":{\"id\":\"KLN8ZfDzv8mW6pyu\",\"name\":\"OpenAi account\"}},\"typeVersion\":1.2},{\"id\":\"97bb1374-f502-4152-a5a3-bc5d46a18171\",\"name\":\"OpenAI Chat Model1\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\"position\":[2200,660],\"parameters\":{\"model\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"gpt-4.5-preview\",\"cachedResultName\":\"gpt-4.5-preview\"},\"options\":{}},\"credentials\":{\"openAiApi\":{\"id\":\"KLN8ZfDzv8mW6pyu\",\"name\":\"OpenAi account\"}},\"typeVersion\":1.2},{\"id\":\"1c422e76-5b1a-4615-b379-ab39d4bd13b4\",\"name\":\"Accept and Publish\",\"type\":\"@n8n/n8n-nodes-langchain.toolWorkflow\",\"position\":[2500,680],\"parameters\":{\"name\":\"submit\",\"workflowId\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"uIREtTV8TRuF3lru\",\"cachedResultName\":\"Publish to Contentful\"},\"description\":\"Call this tool when the article quality is above the threshold we need\",\"workflowInputs\":{\"value\":{\"slug\":\"=  {{ $json.slug }}\",\"title\":\"={{ $('Format').item.json.title }}\",\"content\":\"={{ $json.content }}\",\"category\":\"={{ $json.category }}\",\"keywords\":\"={{ $json.keywords }}\",\"metaTitle\":\"={{ $json.metaTitle }}\",\"difficulty\":\"={{ $json.difficulty }}\",\"description\":\"={{ $json.description }}\",\"readingTime\":\"={{ $json.readingTime }}\",\"metaDescription\":\"={{ $json.metaDescription }}\"},\"schema\":[{\"id\":\"title\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"title\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"action\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"action\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"improvements\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"improvements\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"slug\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"slug\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"category\",\"type\":\"object\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"category\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"description\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"description\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"keywords\",\"type\":\"array\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"keywords\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"content\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"content\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"metaTitle\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"metaTitle\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"metaDescription\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"metaDescription\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"readingTime\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"readingTime\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"difficulty\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"difficulty\",\"defaultMatch\":false,\"canBeUsedToMatch\":true}],\"mappingMode\":\"defineBelow\",\"matchingColumns\":[],\"attemptToConvertTypes\":false,\"convertFieldsToString\":false}},\"typeVersion\":2},{\"id\":\"b6807e84-900a-48fc-a869-862824c62ba1\",\"name\":\"When chat message received\",\"type\":\"@n8n/n8n-nodes-langchain.chatTrigger\",\"position\":[-60,660],\"webhookId\":\"7ed20abc-d8bc-4426-95f1-b9778c075ddf\",\"parameters\":{\"public\":true,\"options\":{},\"initialMessages\":\"What topics should I write about?\"},\"typeVersion\":1.1},{\"id\":\"e3021ac4-9444-4689-af0c-a4bbd4729c35\",\"name\":\"JSON.parse1\",\"type\":\"n8n-nodes-base.code\",\"position\":[1320,120],\"parameters\":{\"mode\":\"runOnceForEachItem\",\"jsCode\":\"const outputText = $json.output;\\n\\n// Parse JSON from ChatGPT response\\nconst parsedOutput = JSON.parse(outputText);\\n\\n// Return parsed object for next nodes\\nreturn parsedOutput;\"},\"typeVersion\":2},{\"id\":\"d6a5eccd-c8e3-4ee0-beb0-7b8fc8428b91\",\"name\":\"Merge\",\"type\":\"n8n-nodes-base.merge\",\"position\":[1840,380],\"parameters\":{\"numberInputs\":3},\"typeVersion\":3},{\"id\":\"8461a1a0-a984-4ec1-bc93-3a1a312caf55\",\"name\":\"Format\",\"type\":\"n8n-nodes-base.code\",\"position\":[2060,380],\"parameters\":{\"jsCode\":\"// Get all items passed into this node as an array\\nconst items = $input.all();\\n\\n// If you always have at least two items:\\nconst firstItem = items[0].json;\\nconst secondItem = items[1].json;\\nconst thirdItem = items[2].json;\\n\\n// Overwrite the first itemâ€™s â€œcontentâ€ with the second itemâ€™s â€œcontentâ€\\nfirstItem.content = secondItem.content;\\nfirstItem.iterationCount = thirdItem.iterationCount\\n\\n// Return a single new item containing the merged result\\nreturn [\\n  {\\n    json: firstItem\\n  }\\n];\"},\"typeVersion\":2},{\"id\":\"9b9a82fb-990c-4be0-aee9-ed80f0631c28\",\"name\":\"JSON.parse\",\"type\":\"n8n-nodes-base.code\",\"position\":[3300,840],\"parameters\":{\"mode\":\"runOnceForEachItem\",\"jsCode\":\"const outputText = $json.output;\\n\\n// Parse JSON from ChatGPT response\\nconst parsedOutput = JSON.parse(outputText);\\n\\n// Return parsed object for next nodes\\nreturn parsedOutput;\"},\"typeVersion\":2},{\"id\":\"066dfd10-e97a-44a8-89e0-5b2b5c4a6244\",\"name\":\"Format Perplexity Output & Add Citations\",\"type\":\"n8n-nodes-base.code\",\"position\":[1480,380],\"parameters\":{\"mode\":\"runOnceForEachItem\",\"jsCode\":\"const data = { ...$json };\\n\\n// Clean out <think> block if present\\ndata.content = $json.choices[0].message.content.replace(/<think>[\\\\s\\\\S]*?<\\\\/think>/g, '').trim();\\n\\n// Convert citations array to markdown link list\\nconst citations = $json.citations\\n  .map((url, i) => `- [${i + 1}](${url})`)\\n  .join('\\\\n');\\n\\ndata.content += `\\\\n\\\\n---\\\\n\\\\n### Sources\\\\n${citations}`;\\n\\nreturn data;\"},\"typeVersion\":2},{\"id\":\"fc9d9e93-568a-41af-a295-8736617b157e\",\"name\":\"Initialize Count\",\"type\":\"n8n-nodes-base.set\",\"position\":[340,660],\"parameters\":{\"values\":{\"number\":[{\"name\":\"iterationCount\"}]},\"options\":{}},\"typeVersion\":1},{\"id\":\"b0e636dd-f572-4ee2-832f-4bb4167b011b\",\"name\":\"Increment Count\",\"type\":\"n8n-nodes-base.function\",\"position\":[1400,740],\"parameters\":{\"functionCode\":\"const current = $json.iterationCount || 0;\\n\\nreturn [{ iterationCount: current + 1 }];\"},\"typeVersion\":1},{\"id\":\"86689f0e-9607-4eda-bcd6-36241d0cbe63\",\"name\":\"Check Limit\",\"type\":\"n8n-nodes-base.if\",\"position\":[2660,380],\"parameters\":{\"conditions\":{\"number\":[{\"value1\":\"={{ $json.iterationCount }}\",\"value2\":3,\"operation\":\"largerEqual\"}]}},\"typeVersion\":1},{\"id\":\"0f42b0f3-0b96-40df-9c06-2a6d31e142d9\",\"name\":\"Stop Here\",\"type\":\"n8n-nodes-base.noOp\",\"position\":[2980,300],\"parameters\":{},\"typeVersion\":1},{\"id\":\"1e61b3ba-e9bd-43c7-8217-d4a22f707318\",\"name\":\"Execute Workflow\",\"type\":\"n8n-nodes-base.executeWorkflow\",\"position\":[3740,300],\"parameters\":{\"options\":{},\"workflowId\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"uIREtTV8TRuF3lru\",\"cachedResultName\":\"Publish to Contentful\"},\"workflowInputs\":{\"value\":{\"slug\":\"={{ $json.slug }}\",\"title\":\"={{ $json.title }}\",\"content\":\"={{ $json.content }}\",\"category\":\"={{ $json.category }}\",\"keywords\":\"={{ $json.keywords }}\",\"metaTitle\":\"={{ $json.metaTitle }}\",\"difficulty\":\"={{ $json.difficulty }}\",\"description\":\"={{ $json.description }}\",\"readingTime\":\"={{ $json.readingTime }}\",\"metaDescription\":\"={{ $json.metaDescription }}\"},\"schema\":[{\"id\":\"title\",\"type\":\"string\",\"display\":true,\"required\":false,\"displayName\":\"title\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"slug\",\"type\":\"string\",\"display\":true,\"required\":false,\"displayName\":\"slug\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"category\",\"type\":\"object\",\"display\":true,\"required\":false,\"displayName\":\"category\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"description\",\"type\":\"string\",\"display\":true,\"required\":false,\"displayName\":\"description\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"keywords\",\"type\":\"array\",\"display\":true,\"required\":false,\"displayName\":\"keywords\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"content\",\"type\":\"string\",\"display\":true,\"required\":false,\"displayName\":\"content\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"metaTitle\",\"type\":\"string\",\"display\":true,\"required\":false,\"displayName\":\"metaTitle\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"metaDescription\",\"type\":\"string\",\"display\":true,\"required\":false,\"displayName\":\"metaDescription\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"readingTime\",\"type\":\"string\",\"display\":true,\"required\":false,\"displayName\":\"readingTime\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"difficulty\",\"type\":\"string\",\"display\":true,\"required\":false,\"displayName\":\"difficulty\",\"defaultMatch\":false,\"canBeUsedToMatch\":true}],\"mappingMode\":\"defineBelow\",\"matchingColumns\":[],\"attemptToConvertTypes\":false,\"convertFieldsToString\":true}},\"typeVersion\":1.2},{\"id\":\"04526224-e48c-4032-9c92-475c6bf9cd0a\",\"name\":\"JSON.parse3\",\"type\":\"n8n-nodes-base.code\",\"position\":[3280,300],\"parameters\":{\"mode\":\"runOnceForEachItem\",\"jsCode\":\"const outputText = $json.output;\\n\\n// Parse JSON from ChatGPT response\\nconst parsedOutput = JSON.parse(outputText);\\n\\n// Return parsed object for next nodes\\nreturn parsedOutput;\"},\"typeVersion\":2},{\"id\":\"0303ab91-b788-4074-a15d-239565528dec\",\"name\":\"should submit\",\"type\":\"n8n-nodes-base.if\",\"position\":[2980,680],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"3c1f6cb2-a556-4c74-885e-05e4f757997b\",\"operator\":{\"name\":\"filter.operator.equals\",\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"submit\",\"rightValue\":\"={{ $json.output.parseJson().action }}\"}]}},\"typeVersion\":2.2},{\"id\":\"4f68e1ad-0b7c-41ca-a9cc-d220017cc1bd\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[540,80],\"parameters\":{\"color\":6,\"width\":940,\"height\":680,\"content\":\"## Writer Agent\\n\\n- Focuses on writing for all the fields in contentful\\n- Has a specified format for input and output\\n- Handles implementing feedback from editor agent\"},\"typeVersion\":1},{\"id\":\"f5e9968a-0681-4b72-9bb3-98750f55565e\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[2620,120],\"parameters\":{\"color\":3,\"width\":860,\"height\":880,\"content\":\"## Count Incrementer\\n\\n- Tracks a variable count to ensure the flow hits a max number of feedback iterations.\\n- This is critical for feedback to avoid hitting an infinite loop.\"},\"typeVersion\":1},{\"id\":\"462e6c9a-162a-4f66-b846-14b29517454c\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[2140,160],\"parameters\":{\"width\":460,\"height\":640,\"content\":\"## Editor Agent\\n\\n- Sole purpose is to look at the quality of output for the previous combo of perplexity & openAI Agent.\\n- Determines if it is publishable or not.\"},\"typeVersion\":1},{\"id\":\"27149a0a-ab95-4f73-a20c-34167ac56d2a\",\"name\":\"Sticky Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[3580,60],\"parameters\":{\"color\":4,\"width\":460,\"height\":480,\"content\":\"## Publish To Contentful\\n\\n- Publishes to Contentful by converting the fields to the appropriate fields for the contentful POST create content API.\\n- Converts the article to Rich Text formatting specifically for Contentful by using another AI formatter trained on it's specs.\\n\\nemail us if you want that flow too: christian@varritech.com\"},\"typeVersion\":1}],\"active\":true,\"pinData\":{},\"settings\":{\"callerPolicy\":\"workflowsFromSameOwner\",\"errorWorkflow\":\"AKus9UvKRJfvTZBA\",\"executionOrder\":\"v1\",\"executionTimeout\":1800},\"versionId\":\"69ce37b2-0909-4d9e-af89-992e22888bd8\",\"connections\":{\"Merge\":{\"main\":[[{\"node\":\"Format\",\"type\":\"main\",\"index\":0}]]},\"Format\":{\"main\":[[{\"node\":\"AI Editor Agent\",\"type\":\"main\",\"index\":0}]]},\"Stop Here\":{\"main\":[[{\"node\":\"JSON.parse3\",\"type\":\"main\",\"index\":0}]]},\"JSON.parse\":{\"main\":[[{\"node\":\"AI Writer Agent\",\"type\":\"main\",\"index\":0},{\"node\":\"Increment Count\",\"type\":\"main\",\"index\":0}]]},\"Check Limit\":{\"main\":[[{\"node\":\"Stop Here\",\"type\":\"main\",\"index\":0}],[{\"node\":\"should submit\",\"type\":\"main\",\"index\":0}]]},\"JSON.parse1\":{\"main\":[[{\"node\":\"Merge\",\"type\":\"main\",\"index\":0}]]},\"JSON.parse3\":{\"main\":[[{\"node\":\"Execute Workflow\",\"type\":\"main\",\"index\":0}]]},\"should submit\":{\"main\":[[{\"node\":\"JSON.parse3\",\"type\":\"main\",\"index\":0}],[{\"node\":\"JSON.parse\",\"type\":\"main\",\"index\":0}]]},\"AI Editor Agent\":{\"main\":[[{\"node\":\"Check Limit\",\"type\":\"main\",\"index\":0}]]},\"AI Writer Agent\":{\"main\":[[{\"node\":\"Create Perplexity Content\",\"type\":\"main\",\"index\":0},{\"node\":\"JSON.parse1\",\"type\":\"main\",\"index\":0}]]},\"Increment Count\":{\"main\":[[{\"node\":\"Merge\",\"type\":\"main\",\"index\":2}]]},\"Initialize Count\":{\"main\":[[{\"node\":\"AI Writer Agent\",\"type\":\"main\",\"index\":0},{\"node\":\"Increment Count\",\"type\":\"main\",\"index\":0}]]},\"OpenAI Chat Model\":{\"ai_languageModel\":[[{\"node\":\"AI Writer Agent\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"Accept and Publish\":{\"ai_tool\":[[{\"node\":\"AI Editor Agent\",\"type\":\"ai_tool\",\"index\":0}]]},\"OpenAI Chat Model1\":{\"ai_languageModel\":[[{\"node\":\"AI Editor Agent\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"Create Perplexity Content\":{\"main\":[[{\"node\":\"Format Perplexity Output & Add Citations\",\"type\":\"main\",\"index\":0}]]},\"When chat message received\":{\"main\":[[{\"node\":\"Initialize Count\",\"type\":\"main\",\"index\":0}]]},\"Format Perplexity Output & Add Citations\":{\"main\":[[{\"node\":\"Merge\",\"type\":\"main\",\"index\":1}]]}}}",
  "readme": "## Workflow: Auto Knowledge Base Article Generator\n\n### ğŸ—ï¸ Architecture Overview\n\nThis workflow automates the end-to-end creation of a structured knowledge-base article from a simple chat prompt:\n\n  1. **Chat Trigger** â†’ Receives user request\n  2. **AI Drafting Loop** â†’ Generates & refines JSON article via AI agents\n  3. **Perplexity Research Call** â†’ Deep-dive content generation\n  4. **Editorial Loop** â†’ Up to 3 AI-driven revisions\n  5. **Contentful Publish** â†’ Pushes final JSON into CMS\n\n\n\n* * *\n\n### ğŸ“¦ Node-by-Node Breakdown\n    \n    \n    flowchart LR\n      A[Webhook: Chat Trigger] --&gt; B[AI Writer Agent]\n      B --&gt; C[HTTP Request: Perplexity Content]\n      C --&gt; D[Function: Format Output & Citations]\n      D --&gt; E[Loop Start: Initialize Count]\n      E --&gt; F[AI Editor Agent]\n      F --&gt; G{action == \"rewrite\"?}\n      G -- yes --&gt; H[Function: Merge Improvements]\n      H --&gt; I[Increment Count] --&gt; F\n      G -- no --&gt; J[Stop Loop]\n      J --&gt; K[HTTP Request: Publish to Contentful]\n    \n\n### Webhook: Chat Trigger\n\n**Type** : HTTP Webhook (POST /webhook/knowledge-article)\n\n**Payload** :\n    \n    \n    { \n    \t\"chatInput\": \"What topics should I write about?\" \n    }\n    \n\n**Purpose** : Kicks off the workflow on that chat prompt.\n\n### AI Writer Agent\n\n**Inputs** : chatInput or existing article JSON\n\n**Outputs** :\n    \n    \n    {\n      \"title\": \"...\",\n      \"slug\": \"...\",\n      \"category.id\": \"...\",\n      \"description\": \"...\",\n      \"keywords\": [...],\n      \"content\": \"...\",\n      \"metaTitle\": \"...\",\n      \"metaDescription\": \"...\",\n      \"readingTime\": 5,\n      \"difficulty\": \"intermediate\"\n    }\n    \n\n**Purpose** : Generates the article skeleton (metadata + initial content).\n\n# HTTP Request: Perplexity Content\n\n**Method:** POST\n\n**URL:** <https://api.perplexity.ai/research>\n\n**Body:**\n    \n    \n    {\n      \"model\": \"sonar-deep-research\",\n      \"query\": \"{{ $json.title }}\",\n      \"length\": 1000\n    }\n    \n\n**Purpose:** Retrieves a long-form, deeply researched draft for the article body.\n\n## Function: Format Output & Citations\n\n**Logic:**\n\n  * Parse raw Perplexity response\n  * Extract source URIs\n  * Append them under a sources markdown list\n\n\n\n## Editorial Loop\n\n  1. Initialize Counter to 0\n  2. AI Editor Agent \n    * Reads draft JSON\n    * Returns either: \n      * `action: \"rewrite\" + improvements: [...]`\n      * or `action: \"submit\"`\n  3. Merge Improvements (if rewriting) \n    * Applies suggested updates to JSON fields\n  4. Limit Check \n    * Stops after 3 iterations or on \"submit\"\n\n\n\n## HTTP Request: Publish to Contentful\n\n**Method:** PUT\n\n**URL:** [https://cdn.contentful.com/spaces/{space}/environments/master/entries/{entryId}](https://cdn.contentful.com/spaces/%7Bspace%7D/environments/master/entries/%7BentryId%7D)\n\n**Headers:**\n\n  * Authorization: Bearer <token>\n  * Content-Type: application/vnd.contentful.management.v1+json\n\n\n\n**Body:** Maps JSON â†’ Contentful entry fields\n\n**Outcome:** Publishes the finalized article live.\n\n## ğŸ” Design Rationale & Best Practices\n\n### Separation of Concerns\n\nWriter vs. Editor agents isolate creative drafting from quality review.\n\n### Idempotent Loop\n\nCounter + action flags prevent infinite retries.\n\n### Extensibility\n\nSwap in different research APIs or CMS targets with minimal changes.\n\n### Structured JSON\n\nEnsures predictable input/output for each node.\n",
  "readme_html": "<!--[--><div data-v-859c7806=\"\"><h2>Workflow: Auto Knowledge Base Article Generator</h2>\n<h3>ğŸ—ï¸ Architecture Overview</h3>\n<p>This workflow automates the end-to-end creation of a structured knowledge-base article from a simple chat prompt:</p>\n<ol>\n<li><strong>Chat Trigger</strong> â†’ Receives user request</li>\n<li><strong>AI Drafting Loop</strong> â†’ Generates &amp; refines JSON article via AI agents</li>\n<li><strong>Perplexity Research Call</strong> â†’ Deep-dive content generation</li>\n<li><strong>Editorial Loop</strong> â†’ Up to 3 AI-driven revisions</li>\n<li><strong>Contentful Publish</strong> â†’ Pushes final JSON into CMS</li>\n</ol>\n<hr>\n<h3>ğŸ“¦ Node-by-Node Breakdown</h3>\n<pre><code>flowchart LR\n  A[Webhook: Chat Trigger] --&amp;gt; B[AI Writer Agent]\n  B --&amp;gt; C[HTTP Request: Perplexity Content]\n  C --&amp;gt; D[Function: Format Output &amp; Citations]\n  D --&amp;gt; E[Loop Start: Initialize Count]\n  E --&amp;gt; F[AI Editor Agent]\n  F --&amp;gt; G{action == \"rewrite\"?}\n  G -- yes --&amp;gt; H[Function: Merge Improvements]\n  H --&amp;gt; I[Increment Count] --&amp;gt; F\n  G -- no --&amp;gt; J[Stop Loop]\n  J --&amp;gt; K[HTTP Request: Publish to Contentful]\n</code></pre>\n<h3>Webhook: Chat Trigger</h3>\n<p><strong>Type</strong>: HTTP Webhook (POST /webhook/knowledge-article)</p>\n<p><strong>Payload</strong>:</p>\n<pre><code>{ \n\t\"chatInput\": \"What topics should I write about?\" \n}\n</code></pre>\n<p><strong>Purpose</strong>: Kicks off the workflow on that chat prompt.</p>\n<h3>AI Writer Agent</h3>\n<p><strong>Inputs</strong>: chatInput or existing article JSON</p>\n<p><strong>Outputs</strong>:</p>\n<pre><code>{\n  \"title\": \"...\",\n  \"slug\": \"...\",\n  \"category.id\": \"...\",\n  \"description\": \"...\",\n  \"keywords\": [...],\n  \"content\": \"...\",\n  \"metaTitle\": \"...\",\n  \"metaDescription\": \"...\",\n  \"readingTime\": 5,\n  \"difficulty\": \"intermediate\"\n}\n</code></pre>\n<p><strong>Purpose</strong>: Generates the article skeleton (metadata + initial content).</p>\n<h1>HTTP Request: Perplexity Content</h1>\n<p><strong>Method:</strong> POST</p>\n<p><strong>URL:</strong> <a href=\"https://api.perplexity.ai/research\" rel=\"ugc nofollow\" target=\"_blank\">https://api.perplexity.ai/research</a></p>\n<p><strong>Body:</strong></p>\n<pre><code>{\n  \"model\": \"sonar-deep-research\",\n  \"query\": \"{{ $json.title }}\",\n  \"length\": 1000\n}\n</code></pre>\n<p><strong>Purpose:</strong> Retrieves a long-form, deeply researched draft for the article body.</p>\n<h2>Function: Format Output &amp; Citations</h2>\n<p><strong>Logic:</strong></p>\n<ul>\n<li>Parse raw Perplexity response</li>\n<li>Extract source URIs</li>\n<li>Append them under a sources markdown list</li>\n</ul>\n<h2>Editorial Loop</h2>\n<ol>\n<li>Initialize Counter to 0</li>\n<li>AI Editor Agent\n<ul>\n<li>Reads draft JSON</li>\n<li>Returns either:\n<ul>\n<li><code>action: \"rewrite\" + improvements: [...]</code></li>\n<li>or <code>action: \"submit\"</code></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>Merge Improvements (if rewriting)\n<ul>\n<li>Applies suggested updates to JSON fields</li>\n</ul>\n</li>\n<li>Limit Check\n<ul>\n<li>Stops after 3 iterations or on \"submit\"</li>\n</ul>\n</li>\n</ol>\n<h2>HTTP Request: Publish to Contentful</h2>\n<p><strong>Method:</strong> PUT</p>\n<p><strong>URL:</strong> <a href=\"https://cdn.contentful.com/spaces/%7Bspace%7D/environments/master/entries/%7BentryId%7D\" rel=\"ugc nofollow\" target=\"_blank\">https://cdn.contentful.com/spaces/{space}/environments/master/entries/{entryId}</a></p>\n<p><strong>Headers:</strong></p>\n<ul>\n<li>Authorization: Bearer &lt;token&gt;</li>\n<li>Content-Type: application/vnd.contentful.management.v1+json</li>\n</ul>\n<p><strong>Body:</strong> Maps JSON â†’ Contentful entry fields</p>\n<p><strong>Outcome:</strong> Publishes the finalized article live.</p>\n<h2>ğŸ” Design Rationale &amp; Best Practices</h2>\n<h3>Separation of Concerns</h3>\n<p>Writer vs. Editor agents isolate creative drafting from quality review.</p>\n<h3>Idempotent Loop</h3>\n<p>Counter + action flags prevent infinite retries.</p>\n<h3>Extensibility</h3>\n<p>Swap in different research APIs or CMS targets with minimal changes.</p>\n<h3>Structured JSON</h3>\n<p>Ensures predictable input/output for each node.</p>\n</div><!--]-->",
  "readme_zh": "## å·¥ä½œæµï¼šçŸ¥è¯†åº“æ–‡ç« è‡ªåŠ¨ç”Ÿæˆå™¨\n\n### ğŸ—ï¸ æ¶æ„æ¦‚è§ˆ\n\næœ¬å·¥ä½œæµå®ç°ä»ç®€å•èŠå¤©æç¤ºåˆ°ç»“æ„åŒ–çŸ¥è¯†åº“æ–‡ç« çš„ç«¯åˆ°ç«¯è‡ªåŠ¨åŒ–ç”Ÿæˆï¼š\n\n1. **èŠå¤©è§¦å‘å™¨** â†’ æ¥æ”¶ç”¨æˆ·è¯·æ±‚  \n2. **AIè‰æ‹Ÿå¾ªç¯** â†’ é€šè¿‡AIä»£ç†ç”Ÿæˆå¹¶ä¼˜åŒ–JSONæ ¼å¼æ–‡ç«   \n3. **Perplexityç ”ç©¶è°ƒç”¨** â†’ æ·±åº¦å†…å®¹ç”Ÿæˆ  \n4. **ç¼–è¾‘å¾ªç¯** â†’ æœ€å¤š3è½®AIé©±åŠ¨çš„ä¿®è®¢  \n5. **Contentfulå‘å¸ƒ** â†’ å°†æœ€ç»ˆJSONæ¨é€è‡³CMS  \n\n* * *\n\n### ğŸ“¦ èŠ‚ç‚¹è¯¦è§£\n    \n    \n    flowchart LR\n      A[Webhook: èŠå¤©è§¦å‘å™¨] --&gt; B[AIå†™ä½œä»£ç†]\n      B --&gt; C[HTTPè¯·æ±‚: Perplexityå†…å®¹]\n      C --&gt; D[å‡½æ•°: æ ¼å¼åŒ–è¾“å‡ºä¸å¼•ç”¨]\n      D --&gt; E[å¾ªç¯å¼€å§‹: åˆå§‹åŒ–è®¡æ•°å™¨]\n      E --&gt; F[AIç¼–è¾‘ä»£ç†]\n      F --&gt; G{action == \"é‡å†™\"?}\n      G -- æ˜¯ --&gt; H[å‡½æ•°: åˆå¹¶æ”¹è¿›]\n      H --&gt; I[è®¡æ•°å™¨é€’å¢] --&gt; F\n      G -- å¦ --&gt; J[ç»ˆæ­¢å¾ªç¯]\n      J --&gt; K[HTTPè¯·æ±‚: å‘å¸ƒåˆ°Contentful]\n    \n\n### Webhook: èŠå¤©è§¦å‘å™¨\n\n**ç±»å‹** : HTTP Webhook (POST /webhook/knowledge-article)\n\n**è½½è·** :\n    \n    \n    { \n    \t\"chatInput\": \"æˆ‘åº”è¯¥å†™å“ªäº›ä¸»é¢˜ï¼Ÿ\" \n    }\n    \n\n**åŠŸèƒ½** : æ ¹æ®èŠå¤©æç¤ºè§¦å‘å·¥ä½œæµã€‚\n\n### AIå†™ä½œä»£ç†\n\n**è¾“å…¥** : chatInputæˆ–ç°æœ‰æ–‡ç« JSON\n\n**è¾“å‡º** :\n    \n    \n    {\n      \"title\": \"...\",\n      \"slug\": \"...\",\n      \"category.id\": \"...\",\n      \"description\": \"...\",\n      \"keywords\": [...],\n      \"content\": \"...\",\n      \"metaTitle\": \"...\",\n      \"metaDescription\": \"...\",\n      \"readingTime\": 5,\n      \"difficulty\": \"intermediate\"\n    }\n    \n\n**åŠŸèƒ½** : ç”Ÿæˆæ–‡ç« æ¡†æ¶ï¼ˆå…ƒæ•°æ®+åˆå§‹å†…å®¹ï¼‰ã€‚\n\n### HTTPè¯·æ±‚: Perplexityå†…å®¹\n\n**æ–¹æ³•:** POST\n\n**URL:** <https://api.perplexity.ai/research>\n\n**è¯·æ±‚ä½“:**\n    \n    \n    {\n      \"model\": \"sonar-deep-research\",\n      \"query\": \"{{ $json.title }}\",\n      \"length\": 1000\n    }\n    \n\n**åŠŸèƒ½:** è·å–æ–‡ç« ä¸»ä½“çš„é•¿ç¯‡å¹…æ·±åº¦ç ”ç©¶è‰ç¨¿ã€‚\n\n## å‡½æ•°: æ ¼å¼åŒ–è¾“å‡ºä¸å¼•ç”¨\n\n**é€»è¾‘:**\n\n* è§£æåŸå§‹Perplexityå“åº”  \n* æå–æ¥æºURI  \n* ä»¥Markdownåˆ—è¡¨å½¢å¼è¿½åŠ æ¥æº  \n\n## ç¼–è¾‘å¾ªç¯\n\n1. åˆå§‹åŒ–è®¡æ•°å™¨ä¸º0  \n2. AIç¼–è¾‘ä»£ç†  \n   * è¯»å–è‰ç¨¿JSON  \n   * è¿”å›ä»¥ä¸‹ä¸¤ç§ç»“æœä¹‹ä¸€ï¼š  \n     * `action: \"é‡å†™\" + improvements: [...]`  \n     * æˆ– `action: \"æäº¤\"`  \n3. åˆå¹¶æ”¹è¿›ï¼ˆè‹¥é‡å†™ï¼‰  \n   * å°†å»ºè®®æ›´æ–°åº”ç”¨åˆ°JSONå­—æ®µ  \n4. é™åˆ¶æ£€æŸ¥  \n   * è¾¾åˆ°3æ¬¡è¿­ä»£æˆ–æ”¶åˆ°\"æäº¤\"æŒ‡ä»¤æ—¶ç»ˆæ­¢  \n\n## HTTPè¯·æ±‚: å‘å¸ƒåˆ°Contentful\n\n**æ–¹æ³•:** PUT\n\n**URL:** [https://cdn.contentful.com/spaces/{space}/environments/master/entries/{entryId}](https://cdn.contentful.com/spaces/%7Bspace%7D/environments/master/entries/%7BentryId%7D)\n\n**è¯·æ±‚å¤´:**\n\n* Authorization: Bearer <token>  \n* Content-Type: application/vnd.contentful.management.v1+json  \n\n**è¯·æ±‚ä½“:** å°†JSONæ˜ å°„è‡³Contentfulæ¡ç›®å­—æ®µ\n\n**ç»“æœ:** å®æ—¶å‘å¸ƒæœ€ç»ˆæ–‡ç« ã€‚\n\n## ğŸ” è®¾è®¡åŸç†ä¸æœ€ä½³å®è·µ\n\n### å…³æ³¨ç‚¹åˆ†ç¦»\n\nå†™ä½œä»£ç†ä¸ç¼–è¾‘ä»£ç†å°†åˆ›æ„è‰æ‹Ÿä¸è´¨é‡è¯„å®¡éš”ç¦»ã€‚\n\n### å¹‚ç­‰å¾ªç¯\n\nè®¡æ•°å™¨+åŠ¨ä½œæ ‡å¿—é˜²æ­¢æ— é™é‡è¯•ã€‚\n\n### å¯æ‰©å±•æ€§\n\nåªéœ€æœ€å°æ”¹åŠ¨å³å¯æ›´æ¢ç ”ç©¶APIæˆ–CMSç›®æ ‡ã€‚\n\n### ç»“æ„åŒ–JSON\n\nç¡®ä¿æ¯ä¸ªèŠ‚ç‚¹å…·æœ‰å¯é¢„æµ‹çš„è¾“å…¥/è¾“å‡ºã€‚",
  "title_zh": "ä½¿ç”¨GPTå’ŒPerplexity AIä¸ºContentful CMSç”ŸæˆçŸ¥è¯†åº“æ–‡ç« ",
  "publish_date_zh": "æœ€è¿‘æ›´æ–°äºä¸€å¤©å‰",
  "workflow_json_zh": "{\n  \"id\": \"WwEFqNK4YP6UJcg2\",\n  \"meta\": {\n    \"instanceId\": \"6bcff5ef8a06e8086902526a05c2a4c7bf5da8101f89e582301ed78094606f40\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"name\": \"Auto Knowledge Base Article Generator\",\n  \"tags\": [],\n  \"nodes\": [\n    {\n      \"id\": \"17900021-8da3-4bd9-9d79-5d20d879ddc7\",\n      \"name\": \"Create Perplexity Content\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1220,\n        380\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.perplexity.ai/chat/completions\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"jsonBody\": \"={\\n  \\\"model\\\": \\\"sonar-deep-research\\\",\\n  \\\"messages\\\": [\\n    {\\n      \\\"role\\\": \\\"user\\\",\\n      \\\"content\\\": \\\"Conduct an in-depth research on '{{ $json.output.parseJson().title }}', covering essential topics, recommended resources, and best practices. Additionally, please address these improvements: '{{ $json.output.parseJson().improvements }}'. The returned data should be at least 1000 words and use a combination of headers, tables, bold, and italics\\\"\\n    }\\n  ],\\n  \\\"max_tokens\\\": 60000,\\n  \\\"temperature\\\": 0.7,\\n  \\\"top_p\\\": 0.9,\\n  \\\"top_k\\\": 50,\\n  \\\"stream\\\": false,\\n  \\\"presence_penalty\\\": 0,\\n  \\\"frequency_penalty\\\": 0\\n}\",\n        \"sendBody\": true,\n        \"jsonHeaders\": \"{\\n  \\\"Authorization\\\": \\\"Bearer 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\\\",\\n  \\\"Content-Type\\\": \\\"application/json\\\"\\n}\",\n        \"sendHeaders\": true,\n        \"specifyBody\": \"json\",\n        \"specifyHeaders\": \"json\"\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"0cb3f3a7-92bd-4ff3-8a89-b6fc29513e65\",\n      \"name\": \"AI Writer Agent\",\n      \"type\": \"@n8n/n8n-nodes-langchain.agent\",\n      \"position\": [\n        720,\n        380\n      ],\n      \"parameters\": {\n        \"text\": \"=Please create or revise an article about \\\"{{ $json.chatInput }}\\\".\\n\\nOr an article is already written because title: {{ $json.title }} is defined. Reference it to rewrite the {{ $json.content }} field\\n\\nDo not change the title, either the chatinput or the input article title. This is the title, do not change it.\\n\\nIf an article is NOT given, pick new categories in:\\n- getting-started\\n- learning-paths\\n- certifications\\n- programming\\n- applications\\n- career\\n\\nDo not make up a category, it should be the same in the exact case as above\\n\\nIf an article is given, only make ammendments to the content based on these specific improvements to include: \\\"{{ $json.improvements }}\\\".\\n\\nInclude the improvements key only if it is an input, and in that case don't change it\\n\\nRemember to return valid JSON with the fields:\\n{\\n  \\\"title\\\": \\\"...\\\",\\n  \\\"slug\\\": \\\"...\\\",\\n  \\\"category\\\": {\\n    \\\"id\\\": \\\"...\\\"\\n  },\\n  \\\"description\\\": \\\"...\\\",\\n  \\\"keywords\\\": [...],\\n  \\\"content\\\": \\\"...\\\",\\n  \\\"metaTitle\\\": \\\"...\\\",\\n  \\\"metaDescription\\\": \\\"...\\\",\\n  \\\"readingTime\\\": \\\"...\\\",\\n  \\\"difficulty\\\": \\\"...\\\"\\n  \\\"content\\\": \\\"...\\\"\\n}\",\n        \"options\": {\n          \"systemMessage\": \"You are a writing assistant. You will receive instructions to create or update an article in JSON format with the following structure:\\n\\n{\\n  \\\"title\\\": \\\"<string>\\\",\\n  \\\"slug\\\": \\\"<string>\\\",\\n  \\\"category\\\": {\\n    \\\"id\\\": \\\"<string>\\\" // e.g., \\\"getting-started\\\", \\\"learning-paths\\\", etc.\\n  },\\n  \\\"description\\\": \\\"<string>\\\",\\n  \\\"keywords\\\": [\\\"<string>\\\", \\\"<string>\\\", ...],\\n  \\\"content\\\": \\\"<string>\\\",\\n  \\\"metaTitle\\\": \\\"<string>\\\",\\n  \\\"metaDescription\\\": \\\"<string>\\\",\\n  \\\"readingTime\\\": \\\"<number or string>\\\",\\n  \\\"difficulty\\\": \\\"<string>\\\"\\n}\\n\\nYour task:\\n1. Produce a complete article in the above format, or revise the existing article if provided.\\n2. Make sure the text is clear, specific, and helpful to the reader.\\n3. Return valid JSON only â€“ do not include extra commentary or fields beyond the above structure.\\n4. If any information is missing from the user instructions, make reasonable assumptions.\\n\"\n        },\n        \"promptType\": \"define\"\n      },\n      \"typeVersion\": 1.7\n    },\n    {\n      \"id\": \"bc62facb-c5cb-465d-89b1-a65a893c3ce1\",\n      \"name\": \"AI Editor Agent\",\n      \"type\": \"@n8n/n8n-nodes-langchain.agent\",\n      \"position\": [\n        2280,\n        380\n      ],\n      \"parameters\": {\n        \"text\": \"={{ $json }}\",\n        \"options\": {\n          \"maxIterations\": 5,\n          \"systemMessage\": \"=You are an editorial AI assistant. Your role is to review and evaluate a draft article represented as a JSON object.\\n\\nCategory IDs:\\n- \\\"getting-started\\\"\\n- \\\"learning-paths\\\"\\n- \\\"certifications\\\"\\n- \\\"programming\\\"\\n- \\\"applications\\\"\\n- \\\"career\\\"\\n\\nInput Format:\\n\\n{\\n  \\\"title\\\": \\\"<string>\\\",\\n  \\\"slug\\\": \\\"<string>\\\",\\n  \\\"category\\\": { \\\"id\\\": \\\"<string>\\\" },\\n  \\\"description\\\": \\\"<string>\\\",\\n  \\\"keywords\\\": [\\\"<string>\\\", \\\"...\\\"],\\n  \\\"content\\\": \\\"<string>\\\",\\n  \\\"metaTitle\\\": \\\"<string>\\\",\\n  \\\"metaDescription\\\": \\\"<string>\\\",\\n  \\\"readingTime\\\": \\\"<string | number>\\\",\\n  \\\"difficulty\\\": \\\"<string>\\\"\\n}\\n\\nYour Tasks:\\n\\n1. Evaluate the quality of the article â€” especially the title, description, content, and metadata.\\n2. Comment on clarity, specificity, usefulness, and overall quality.\\n3. If improvements are needed, add an \\\"improvements\\\" field describing exactly what to fix.\\n4. Set the \\\"action\\\" field:\\n- \\\"rewrite\\\" if improvements are needed.\\n- \\\"submit\\\" if the article is high quality.\\n5. Include all fields from the original input in your output.\\n6. If \\\"action\\\" is \\\"submit\\\", set \\\"improvements\\\" to null.\\n7. Avoid repeating feedback across iterations.\\n8. After 2 iterations, automatically call the accept-and-publish tool and set the \\\"action\\\" to \\\"submit\\\".\\n9. VERY IMPORTANT: Do NOT modify any of the input fields\\n10. VERY IMPORTANT: Do NOT truncate the sources or modify the content field in any way\\n\\nâœ… Output Format:\\n\\n{\\n  \\\"title\\\": \\\"...\\\",\\n  \\\"action\\\": \\\"rewrite | submit\\\",\\n  \\\"improvements\\\": \\\"... | null\\\",\\n  \\\"slug\\\": \\\"...\\\",\\n  \\\"category\\\": {\\n    \\\"id\\\": \\\"...\\\"\\n  },\\n  \\\"description\\\": \\\"...\\\",\\n  \\\"keywords\\\": [\\\"...\\\"],\\n  \\\"content\\\": \\\"...\\\",\\n  \\\"metaTitle\\\": \\\"...\\\",\\n  \\\"metaDescription\\\": \\\"...\\\",\\n  \\\"readingTime\\\": \\\"...\\\",\\n  \\\"difficulty\\\": \\\"...\\\"\\n}\\n\\nTone: Be concise, direct, and constructive. Focus on maximizing clarity, usefulness, and readability for the end reader.\"\n        },\n        \"promptType\": \"define\",\n        \"hasOutputParser\": true\n      },\n      \"retryOnFail\": true,\n      \"typeVersion\": 1.7\n    },\n    {\n      \"id\": \"8c08d67a-b916-4cfd-89cd-16b34250bcb2\",\n      \"name\": \"OpenAI Chat Model\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\n      \"position\": [\n        680,\n        640\n      ],\n      \"parameters\": {\n        \"model\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gpt-3.5-turbo\",\n          \"cachedResultName\": \"gpt-3.5-turbo\"\n        },\n        \"options\": {}\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"KLN8ZfDzv8mW6pyu\",\n          \"name\": \"OpenAi account\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"97bb1374-f502-4152-a5a3-bc5d46a18171\",\n      \"name\": \"OpenAI Chat Model1\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\n      \"position\": [\n        2200,\n        660\n      ],\n      \"parameters\": {\n        \"model\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gpt-4.5-preview\",\n          \"cachedResultName\": \"gpt-4.5-preview\"\n        },\n        \"options\": {}\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"KLN8ZfDzv8mW6pyu\",\n          \"name\": \"OpenAi account\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"1c422e76-5b1a-4615-b379-ab39d4bd13b4\",\n      \"name\": \"Accept and Publish\",\n      \"type\": \"@n8n/n8n-nodes-langchain.toolWorkflow\",\n      \"position\": [\n        2500,\n        680\n      ],\n      \"parameters\": {\n        \"name\": \"submit\",\n        \"workflowId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"uIREtTV8TRuF3lru\",\n          \"cachedResultName\": \"Publish to Contentful\"\n        },\n        \"description\": \"Call this tool when the article quality is above the threshold we need\",\n        \"workflowInputs\": {\n          \"value\": {\n            \"slug\": \"=  {{ $json.slug }}\",\n            \"title\": \"={{ $('Format').item.json.title }}\",\n            \"content\": \"={{ $json.content }}\",\n            \"category\": \"={{ $json.category }}\",\n            \"keywords\": \"={{ $json.keywords }}\",\n            \"metaTitle\": \"={{ $json.metaTitle }}\",\n            \"difficulty\": \"={{ $json.difficulty }}\",\n            \"description\": \"={{ $json.description }}\",\n            \"readingTime\": \"={{ $json.readingTime }}\",\n            \"metaDescription\": \"={{ $json.metaDescription }}\"\n          },\n          \"schema\": [\n            {\n              \"id\": \"title\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"title\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"action\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"action\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"improvements\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"improvements\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"slug\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"slug\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"category\",\n              \"type\": \"object\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"category\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"description\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"description\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"keywords\",\n              \"type\": \"array\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"keywords\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"content\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"content\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"metaTitle\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"metaTitle\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"metaDescription\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"metaDescription\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"readingTime\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"readingTime\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"difficulty\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"difficulty\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            }\n          ],\n          \"mappingMode\": \"defineBelow\",\n          \"matchingColumns\": [],\n          \"attemptToConvertTypes\": false,\n          \"convertFieldsToString\": false\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"b6807e84-900a-48fc-a869-862824c62ba1\",\n      \"name\": \"When chat message received\",\n      \"type\": \"@n8n/n8n-nodes-langchain.chatTrigger\",\n      \"position\": [\n        -60,\n        660\n      ],\n      \"webhookId\": \"7ed20abc-d8bc-4426-95f1-b9778c075ddf\",\n      \"parameters\": {\n        \"public\": true,\n        \"options\": {},\n        \"initialMessages\": \"What topics should I write about?\"\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"e3021ac4-9444-4689-af0c-a4bbd4729c35\",\n      \"name\": \"JSON.parse1\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        1320,\n        120\n      ],\n      \"parameters\": {\n        \"mode\": \"runOnceForEachItem\",\n        \"jsCode\": \"const outputText = $json.output;\\n\\n// Parse JSON from ChatGPT response\\nconst parsedOutput = JSON.parse(outputText);\\n\\n// Return parsed object for next nodes\\nreturn parsedOutput;\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"d6a5eccd-c8e3-4ee0-beb0-7b8fc8428b91\",\n      \"name\": \"Merge\",\n      \"type\": \"n8n-nodes-base.merge\",\n      \"position\": [\n        1840,\n        380\n      ],\n      \"parameters\": {\n        \"numberInputs\": 3\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"8461a1a0-a984-4ec1-bc93-3a1a312caf55\",\n      \"name\": \"Format\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        2060,\n        380\n      ],\n      \"parameters\": {\n        \"jsCode\": \"// Get all items passed into this node as an array\\nconst items = $input.all();\\n\\n// If you always have at least two items:\\nconst firstItem = items[0].json;\\nconst secondItem = items[1].json;\\nconst thirdItem = items[2].json;\\n\\n// Overwrite the first itemâ€™s â€œcontentâ€ with the second itemâ€™s â€œcontentâ€\\nfirstItem.content = secondItem.content;\\nfirstItem.iterationCount = thirdItem.iterationCount\\n\\n// Return a single new item containing the merged result\\nreturn [\\n  {\\n    json: firstItem\\n  }\\n];\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"9b9a82fb-990c-4be0-aee9-ed80f0631c28\",\n      \"name\": \"JSON.parse\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        3300,\n        840\n      ],\n      \"parameters\": {\n        \"mode\": \"runOnceForEachItem\",\n        \"jsCode\": \"const outputText = $json.output;\\n\\n// Parse JSON from ChatGPT response\\nconst parsedOutput = JSON.parse(outputText);\\n\\n// Return parsed object for next nodes\\nreturn parsedOutput;\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"066dfd10-e97a-44a8-89e0-5b2b5c4a6244\",\n      \"name\": \"Format Perplexity Output & Add Citations\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        1480,\n        380\n      ],\n      \"parameters\": {\n        \"mode\": \"runOnceForEachItem\",\n        \"jsCode\": \"const data = { ...$json };\\n\\n// Clean out <think> block if present\\ndata.content = $json.choices[0].message.content.replace(/<think>[\\\\s\\\\S]*?<\\\\/think>/g, '').trim();\\n\\n// Convert citations array to markdown link list\\nconst citations = $json.citations\\n  .map((url, i) => `- [${i + 1}](${url})`)\\n  .join('\\\\n');\\n\\ndata.content += `\\\\n\\\\n---\\\\n\\\\n### Sources\\\\n${citations}`;\\n\\nreturn data;\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"fc9d9e93-568a-41af-a295-8736617b157e\",\n      \"name\": \"Initialize Count\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        340,\n        660\n      ],\n      \"parameters\": {\n        \"values\": {\n          \"number\": [\n            {\n              \"name\": \"iterationCount\"\n            }\n          ]\n        },\n        \"options\": {}\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"b0e636dd-f572-4ee2-832f-4bb4167b011b\",\n      \"name\": \"Increment Count\",\n      \"type\": \"n8n-nodes-base.function\",\n      \"position\": [\n        1400,\n        740\n      ],\n      \"parameters\": {\n        \"functionCode\": \"const current = $json.iterationCount || 0;\\n\\nreturn [{ iterationCount: current + 1 }];\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"86689f0e-9607-4eda-bcd6-36241d0cbe63\",\n      \"name\": \"Check Limit\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        2660,\n        380\n      ],\n      \"parameters\": {\n        \"conditions\": {\n          \"number\": [\n            {\n              \"value1\": \"={{ $json.iterationCount }}\",\n              \"value2\": 3,\n              \"operation\": \"largerEqual\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"0f42b0f3-0b96-40df-9c06-2a6d31e142d9\",\n      \"name\": \"Stop Here\",\n      \"type\": \"n8n-nodes-base.noOp\",\n      \"position\": [\n        2980,\n        300\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"1e61b3ba-e9bd-43c7-8217-d4a22f707318\",\n      \"name\": \"Execute Workflow\",\n      \"type\": \"n8n-nodes-base.executeWorkflow\",\n      \"position\": [\n        3740,\n        300\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"workflowId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"uIREtTV8TRuF3lru\",\n          \"cachedResultName\": \"Publish to Contentful\"\n        },\n        \"workflowInputs\": {\n          \"value\": {\n            \"slug\": \"={{ $json.slug }}\",\n            \"title\": \"={{ $json.title }}\",\n            \"content\": \"={{ $json.content }}\",\n            \"category\": \"={{ $json.category }}\",\n            \"keywords\": \"={{ $json.keywords }}\",\n            \"metaTitle\": \"={{ $json.metaTitle }}\",\n            \"difficulty\": \"={{ $json.difficulty }}\",\n            \"description\": \"={{ $json.description }}\",\n            \"readingTime\": \"={{ $json.readingTime }}\",\n            \"metaDescription\": \"={{ $json.metaDescription }}\"\n          },\n          \"schema\": [\n            {\n              \"id\": \"title\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"title\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"slug\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"slug\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"category\",\n              \"type\": \"object\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"category\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"description\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"description\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"keywords\",\n              \"type\": \"array\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"keywords\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"content\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"content\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"metaTitle\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"metaTitle\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"metaDescription\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"metaDescription\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"readingTime\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"readingTime\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"difficulty\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"difficulty\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            }\n          ],\n          \"mappingMode\": \"defineBelow\",\n          \"matchingColumns\": [],\n          \"attemptToConvertTypes\": false,\n          \"convertFieldsToString\": true\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"04526224-e48c-4032-9c92-475c6bf9cd0a\",\n      \"name\": \"JSON.parse3\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        3280,\n        300\n      ],\n      \"parameters\": {\n        \"mode\": \"runOnceForEachItem\",\n        \"jsCode\": \"const outputText = $json.output;\\n\\n// Parse JSON from ChatGPT response\\nconst parsedOutput = JSON.parse(outputText);\\n\\n// Return parsed object for next nodes\\nreturn parsedOutput;\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"0303ab91-b788-4074-a15d-239565528dec\",\n      \"name\": \"should submit\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        2980,\n        680\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"3c1f6cb2-a556-4c74-885e-05e4f757997b\",\n              \"operator\": {\n                \"name\": \"filter.operator.equals\",\n                \"type\": \"string\",\n                \"operation\": \"equals\"\n              },\n              \"leftValue\": \"submit\",\n              \"rightValue\": \"={{ $json.output.parseJson().action }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"4f68e1ad-0b7c-41ca-a9cc-d220017cc1bd\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        540,\n        80\n      ],\n      \"parameters\": {\n        \"color\": 6,\n        \"width\": 940,\n        \"height\": 680,\n        \"content\": \"## å†™ä½œä»£ç†\\n\\n- ä¸“æ³¨äºä¸ºContentfulå¹³å°æ‰€æœ‰å­—æ®µæ’°å†™å†…å®¹\\n- å…·å¤‡æ ‡å‡†åŒ–çš„è¾“å…¥è¾“å‡ºæ ¼å¼è§„èŒƒ\\n- è´Ÿè´£è½å®ç¼–è¾‘ä»£ç†çš„åé¦ˆæ„è§\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"f5e9968a-0681-4b72-9bb3-98750f55565e\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        2620,\n        120\n      ],\n      \"parameters\": {\n        \"color\": 3,\n        \"width\": 860,\n        \"height\": 880,\n        \"content\": \"## è®¡æ•°å™¨å¢é‡å™¨\\n\\n- è¿½è¸ªå˜é‡è®¡æ•°ä»¥ç¡®ä¿æµç¨‹è¾¾åˆ°æœ€å¤§åé¦ˆè¿­ä»£æ¬¡æ•°\\n- è¯¥åŠŸèƒ½å¯¹åé¦ˆæœºåˆ¶è‡³å…³é‡è¦ï¼Œå¯é¿å…é™·å…¥æ— é™å¾ªç¯\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"462e6c9a-162a-4f66-b846-14b29517454c\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        2140,\n        160\n      ],\n      \"parameters\": {\n        \"width\": 460,\n        \"height\": 640,\n        \"content\": \"## ç¼–è¾‘ä»£ç†\\n\\n- å”¯ä¸€èŒè´£æ˜¯è¯„ä¼°å…ˆå‰ç”±Perplexityä¸OpenAIä»£ç†ç»„åˆç”Ÿæˆå†…å®¹çš„è´¨é‡\\n- åˆ¤å®šå†…å®¹æ˜¯å¦è¾¾åˆ°å¯å‘å¸ƒæ ‡å‡†\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"27149a0a-ab95-4f73-a20c-34167ac56d2a\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        3580,\n        60\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 460,\n        \"height\": 480,\n        \"content\": \"## å‘å¸ƒè‡³Contentful\\n\\n- é€šè¿‡å°†å­—æ®µè½¬æ¢ä¸ºé€‚ç”¨äºContentful POSTåˆ›å»ºå†…å®¹APIçš„ç›¸åº”å­—æ®µï¼Œå®ç°å†…å®¹å‘å¸ƒã€‚\\n- ä½¿ç”¨ä¸“ä¸ºContentfulè§„èŒƒè®­ç»ƒçš„AIæ ¼å¼åŒ–å·¥å…·ï¼Œå°†æ–‡ç« è½¬æ¢ä¸ºå¯Œæ–‡æœ¬æ ¼å¼ã€‚\\n\\nå¦‚éœ€è·å–è¯¥æµç¨‹ï¼Œè¯·é‚®ä»¶è”ç³»ï¼šchristian@varritech.com\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"active\": true,\n  \"pinData\": {},\n  \"settings\": {\n    \"callerPolicy\": \"workflowsFromSameOwner\",\n    \"errorWorkflow\": \"AKus9UvKRJfvTZBA\",\n    \"executionOrder\": \"v1\",\n    \"executionTimeout\": 1800\n  },\n  \"versionId\": \"69ce37b2-0909-4d9e-af89-992e22888bd8\",\n  \"connections\": {\n    \"Merge\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Format\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Format\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"AI Editor Agent\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Stop Here\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"JSON.parse3\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"JSON.parse\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"AI Writer Agent\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Increment Count\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Check Limit\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Stop Here\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"should submit\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"JSON.parse1\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"JSON.parse3\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Execute Workflow\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"should submit\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"JSON.parse3\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"JSON.parse\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"AI Editor Agent\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Check Limit\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"AI Writer Agent\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Create Perplexity Content\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"JSON.parse1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Increment Count\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge\",\n            \"type\": \"main\",\n            \"index\": 2\n          }\n        ]\n      ]\n    },\n    \"Initialize Count\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"AI Writer Agent\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Increment Count\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"OpenAI Chat Model\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"AI Writer Agent\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Accept and Publish\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"AI Editor Agent\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"OpenAI Chat Model1\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"AI Editor Agent\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Create Perplexity Content\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Format Perplexity Output & Add Citations\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When chat message received\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Initialize Count\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Format Perplexity Output & Add Citations\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge\",\n            \"type\": \"main\",\n            \"index\": 1\n          }\n        ]\n      ]\n    }\n  }\n}"
}