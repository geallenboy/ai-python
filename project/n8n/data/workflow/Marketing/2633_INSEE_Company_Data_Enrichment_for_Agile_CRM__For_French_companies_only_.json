{
  "title": "INSEE Company Data Enrichment for Agile CRM (For French companies only)",
  "url": "https://n8n.io/workflows/2633-insee-company-data-enrichment-for-agile-crm-for-french-companies-only/",
  "category": "Marketing",
  "category_url": "https://n8n.io/workflows/categories/marketing/?sort=createdAt:desc",
  "author": "Johan Denoyer",
  "publish_date": "Last update 5 months ago",
  "publish_date_absolute": "2024-12-18",
  "content": "",
  "workflow_json": "{\"id\":\"G0hO05fypS8n8uYu\",\"meta\":{\"instanceId\":\"8fb286e504ea5ce6aeb12bf5c0c97ce11908b5b1aaa495ddfa0ef349661b832e\"},\"name\":\"INSEE Enrichment for Agile CRM\",\"tags\":[],\"nodes\":[{\"id\":\"a45b34c1-514e-4221-b363-abf2d4de43c4\",\"name\":\"When clicking â€˜Test workflowâ€™\",\"type\":\"n8n-nodes-base.manualTrigger\",\"position\":[-3440,-320],\"parameters\":{},\"typeVersion\":1},{\"id\":\"d406941b-80a1-43a3-ba19-2e29570192f2\",\"name\":\"Find Company in SIREN database\",\"type\":\"n8n-nodes-base.httpRequest\",\"onError\":\"continueErrorOutput\",\"position\":[-2660,-220],\"parameters\":{\"url\":\"=https://api.insee.fr/api-sirene/3.11/siren?q=periode(denominationUniteLegale:\\\"{{ $json.denominationUniteLegale }}\\\")\",\"options\":{},\"sendHeaders\":true,\"headerParameters\":{\"parameters\":[{\"name\":\"accept\",\"value\":\"application/json\"},{\"name\":\"X-INSEE-Api-Key-Integration\",\"value\":\"={{ $('Set Insee API Key').all()[0].json['X-INSEE-Api-Key-Integration']  }}\"}]}},\"typeVersion\":4.2,\"alwaysOutputData\":false},{\"id\":\"6ab3818b-2f09-44e2-874a-87c51478572b\",\"name\":\"Request all data from SIREN database\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[-2420,-240],\"parameters\":{\"url\":\"=https://api.insee.fr/api-sirene/3.11/siret/{{ $json.unitesLegales[0].siren }}{{ $json.unitesLegales[0].periodesUniteLegale[0].nicSiegeUniteLegale }}\",\"options\":{},\"sendHeaders\":true,\"headerParameters\":{\"parameters\":[{\"name\":\"accept\",\"value\":\"application/json\"},{\"name\":\"X-INSEE-Api-Key-Integration\",\"value\":\"={{ $('Set Insee API Key').all()[0].json['X-INSEE-Api-Key-Integration']  }}\"}]}},\"typeVersion\":4.2},{\"id\":\"89c223fe-289b-4d0f-922a-e9c0ad672b51\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-3420,-640],\"parameters\":{\"width\":460,\"height\":240,\"content\":\"### Enrich CRM data with data from French INSEE OpenDatabase API\\nThis workflow takes all company entries from **Agile CRM** and enriches their data using the French [Insee Opendata API](https://portail-api.insee.fr/) (Free Access)\\n\\n__This will update :__ \\n1) Official Address of the company headquarters\\n2) Add government company id number (SIREN) in a Custom Field\"},\"typeVersion\":1},{\"id\":\"0bdc49dd-6f26-447f-a8ba-c2ba615dc7ec\",\"name\":\"FilterOut all Company that have the ReadOnly Key set\",\"type\":\"n8n-nodes-base.code\",\"position\":[-2880,-220],\"parameters\":{\"jsCode\":\"// Get input data\\nconst input = $input.all();\\nconst output = input.filter(item => {\\n    const properties = item.json.properties || [];\\n    return !properties.some(property => property.name === \\\"RO\\\" && property.value === \\\"1\\\"); // Remove all ReadOnly entries\\n}).map(item => {\\n    const companyId = item.json.id;\\n    const denominationUniteLegale = item.json.properties[0]?.value || null; \\n    return {\\n        json: {\\n            companyId,\\n            denominationUniteLegale\\n        }\\n    };\\n});\\n\\n// Return the transformed output\\nreturn output;\\n\"},\"typeVersion\":2},{\"id\":\"0ef184f7-219c-4eb3-bfe0-4e68d2ce0b43\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-2940,-640],\"parameters\":{\"color\":5,\"width\":647,\"height\":232,\"content\":\"### ğŸ‘¨â€ğŸ¤ Setup\\n1. Add your **Agile CRM** credentials\\n2. Link each AgileCRM node to the correct **Agile CRM** credentials\\n3. Add your **INSEE** API Key to the **\\\"Set Insee API Key\\\"** node\\n4. Make sure the **Custom Fields** for the **companies** are set as below (Admin Settings):\\n   - Label : \\\"SIREN\\\", Type : \\\"Text Field\\\", Description \\\"NÂ° de SIREN\\\"\\n   - Label : \\\"RO\\\", Type : \\\"Number\\\", Description \\\"Locks entry from update\\\"\\n5. Click on **Test Workflow** to make sure everything is working\\n6. Configure schedule if needed and don't forget to change status to **Active**\"},\"typeVersion\":1},{\"id\":\"78255253-195d-472d-a76c-ab63ceac126b\",\"name\":\"Set Insee API Key\",\"type\":\"n8n-nodes-base.set\",\"position\":[-3260,-220],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"e993e665-cf31-48b1-8ca8-a4829dc82642\",\"name\":\"X-INSEE-Api-Key-Integration\",\"type\":\"string\",\"value\":\"put-your-insee-api-key-here\"}]}},\"typeVersion\":3.4},{\"id\":\"90b13481-6570-4bfc-b3dc-4b6017c6c8b5\",\"name\":\"Schedule Trigger\",\"type\":\"n8n-nodes-base.scheduleTrigger\",\"position\":[-3440,-140],\"parameters\":{\"rule\":{\"interval\":[{}]}},\"typeVersion\":1.2},{\"id\":\"88c8a6c6-2175-42c3-bfdb-f1d32a5d1c2d\",\"name\":\"clean_route\",\"type\":\"n8n-nodes-base.noOp\",\"position\":[-2660,-360],\"parameters\":{},\"typeVersion\":1},{\"id\":\"522d83f6-752e-40b4-a889-334f0a96998b\",\"name\":\"Get all Compagnies from Agile CRM\",\"type\":\"n8n-nodes-base.agileCrm\",\"position\":[-3080,-220],\"parameters\":{\"options\":{},\"resource\":\"company\",\"operation\":\"getAll\"},\"credentials\":{\"agileCrmApi\":{\"id\":\"wb0EgiQFLQbiFuy4\",\"name\":\"AgileCRM account\"}},\"typeVersion\":1},{\"id\":\"8ff0632b-6aca-47d8-b611-72dbc8dec09b\",\"name\":\"Enrich CRM with INSEE Data\",\"type\":\"n8n-nodes-base.agileCrm\",\"position\":[-1960,-340],\"parameters\":{\"resource\":\"company\",\"companyId\":\"={{ $json.companyId }}\",\"operation\":\"update\",\"additionalFields\":{\"addressOptions\":{\"addressProperties\":[{\"address\":\"={{ $json.etablissement.adresseEtablissement.complementAdresseEtablissement }}\\n{{ $json.etablissement.adresseEtablissement.typeVoieEtablissement }} {{ $json.etablissement.adresseEtablissement.libelleVoieEtablissement }}\\n{{ $json.etablissement.adresseEtablissement.codePostalEtablissement }}{{ $json.etablissement.adresseEtablissement.libelleCommuneEtablissement }}\",\"subtype\":\"office\"}]},\"customProperties\":{\"customProperty\":[{\"name\":\"SIREN\",\"value\":\"={{ $json.etablissement.siren }}\",\"subtype\":\"TEXT\"}]}}},\"credentials\":{\"agileCrmApi\":{\"id\":\"wb0EgiQFLQbiFuy4\",\"name\":\"AgileCRM account\"}},\"typeVersion\":1},{\"id\":\"8720be96-8181-4ea7-b114-ce0f5b8e09c1\",\"name\":\"Merge data from CRM and SIREN database with enriched for the CRM\",\"type\":\"n8n-nodes-base.merge\",\"position\":[-2180,-340],\"parameters\":{\"mode\":\"combine\",\"options\":{},\"advanced\":true,\"mergeByFields\":{\"values\":[{\"field1\":\"denominationUniteLegale\",\"field2\":\"etablissement.uniteLegale.denominationUniteLegale\"}]}},\"typeVersion\":3},{\"id\":\"855a39e2-83ef-49d9-b630-ec31aaa96e72\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-3460,20],\"parameters\":{\"height\":80,\"content\":\"ğŸ‘† You can use any of those two Trigger to start the process.\"},\"typeVersion\":1},{\"id\":\"b003c1b8-6244-4b72-bbb0-025f563b5d71\",\"name\":\"Sticky Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-2260,-640],\"parameters\":{\"width\":380,\"height\":240,\"content\":\"### ğŸ—’ï¸ Notes : \\n1. This workflow is made to write over any entry already present. You can change this for each company by setting the **\\\"RO\\\"** Custom Field to **1**, making it read-only for this workflow.\\n\\n2. If you want to make it readonly after the update from this workflow, then **add a custom property** in the last node **Enrich CRM with INSEE Data** named **\\\"RO\\\"**, SubType **\\\"Number\\\"** and Value **\\\"1\\\"**\"},\"typeVersion\":1}],\"active\":false,\"pinData\":{},\"settings\":{\"executionOrder\":\"v1\"},\"versionId\":\"9f328182-d131-4300-a1f4-2cb3dfe91632\",\"connections\":{\"clean_route\":{\"main\":[[{\"node\":\"Merge data from CRM and SIREN database with enriched for the CRM\",\"type\":\"main\",\"index\":0}]]},\"Schedule Trigger\":{\"main\":[[{\"node\":\"Set Insee API Key\",\"type\":\"main\",\"index\":0}]]},\"Set Insee API Key\":{\"main\":[[{\"node\":\"Get all Compagnies from Agile CRM\",\"type\":\"main\",\"index\":0}]]},\"Find Company in SIREN database\":{\"main\":[[{\"node\":\"Request all data from SIREN database\",\"type\":\"main\",\"index\":0}]]},\"Get all Compagnies from Agile CRM\":{\"main\":[[{\"node\":\"FilterOut all Company that have the ReadOnly Key set\",\"type\":\"main\",\"index\":0}]]},\"When clicking â€˜Test workflowâ€™\":{\"main\":[[{\"node\":\"Set Insee API Key\",\"type\":\"main\",\"index\":0}]]},\"Request all data from SIREN database\":{\"main\":[[{\"node\":\"Merge data from CRM and SIREN database with enriched for the CRM\",\"type\":\"main\",\"index\":1}]]},\"FilterOut all Company that have the ReadOnly Key set\":{\"main\":[[{\"node\":\"Find Company in SIREN database\",\"type\":\"main\",\"index\":0},{\"node\":\"clean_route\",\"type\":\"main\",\"index\":0}]]},\"Merge data from CRM and SIREN database with enriched for the CRM\":{\"main\":[[{\"node\":\"Enrich CRM with INSEE Data\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "## How it works\n\n  1. Extracts all company entries in Agile CRM\n  2. Search for company name in French INSEE OpenData database to extract address and government ID (SIREN)\n  3. Updates entries with data extracted from French Insee OpenData dabase\n\n\n\nWorkflow also has a readonly feature to make sure entry is not overwritten.\n\n## Setup steps\n\n  1. Add your AgileCRM credentials\n  2. Add your INSEE OpenData credentials\n  3. Add two company custom fields in your Agile CRM (for SIREN data and ReadOnly support)\n\n\n",
  "readme_html": "<!--[--><div data-v-50766329=\"\"><h2>How it works</h2>\n<ol>\n<li>Extracts all company entries in Agile CRM</li>\n<li>Search for company name in French INSEE OpenData database to extract address and government ID (SIREN)</li>\n<li>Updates entries with data extracted from French Insee OpenData dabase</li>\n</ol>\n<p>Workflow also has a readonly feature to make sure entry is not overwritten.</p>\n<h2>Setup steps</h2>\n<ol>\n<li>Add your AgileCRM credentials</li>\n<li>Add your INSEE OpenData credentials</li>\n<li>Add two company custom fields in your Agile CRM (for SIREN data and ReadOnly support)</li>\n</ol>\n</div><!--]-->",
  "readme_zh": "## å·¥ä½œåŸç†\n\n  1. æå–Agile CRMä¸­æ‰€æœ‰ä¼ä¸šæ¡ç›®\n  2. åœ¨æ³•å›½INSEEå¼€æ”¾æ•°æ®åº“æœç´¢ä¼ä¸šåç§°ä»¥è·å–åœ°å€å’Œæ”¿åºœè¯†åˆ«ç (SIREN)\n  3. ç”¨æ³•å›½INSEEå¼€æ”¾æ•°æ®åº“æå–çš„æ•°æ®æ›´æ–°æ¡ç›®\n\nè¯¥å·¥ä½œæµè¿˜å…·å¤‡åªè¯»åŠŸèƒ½ï¼Œç¡®ä¿æ¡ç›®ä¸ä¼šè¢«è¦†ç›–ã€‚\n\n## è®¾ç½®æ­¥éª¤\n\n  1. æ·»åŠ æ‚¨çš„AgileCRMè´¦æˆ·å‡­è¯\n  2. æ·»åŠ æ‚¨çš„INSEEå¼€æ”¾æ•°æ®åº“å‡­è¯\n  3. åœ¨Agile CRMä¸­åˆ›å»ºä¸¤ä¸ªä¼ä¸šè‡ªå®šä¹‰å­—æ®µï¼ˆç”¨äºå­˜å‚¨SIRENæ•°æ®å’Œåªè¯»æ”¯æŒï¼‰",
  "title_zh": "INSEEå…¬å¸æ•°æ®å¢å¼ºæœåŠ¡ï¼ˆä¸“ä¸ºæ³•å›½ä¼ä¸šè®¾è®¡ï¼‰é€‚ç”¨äºAgile CRM",
  "publish_date_zh": "æœ€åæ›´æ–°äº5ä¸ªæœˆå‰",
  "workflow_json_zh": "{\n  \"id\": \"G0hO05fypS8n8uYu\",\n  \"meta\": {\n    \"instanceId\": \"8fb286e504ea5ce6aeb12bf5c0c97ce11908b5b1aaa495ddfa0ef349661b832e\"\n  },\n  \"name\": \"INSEE Enrichment for Agile CRM\",\n  \"tags\": [],\n  \"nodes\": [\n    {\n      \"id\": \"a45b34c1-514e-4221-b363-abf2d4de43c4\",\n      \"name\": \"When clicking â€˜Test workflowâ€™\",\n      \"type\": \"n8n-nodes-base.manualTrigger\",\n      \"position\": [\n        -3440,\n        -320\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"d406941b-80a1-43a3-ba19-2e29570192f2\",\n      \"name\": \"Find Company in SIREN database\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"onError\": \"continueErrorOutput\",\n      \"position\": [\n        -2660,\n        -220\n      ],\n      \"parameters\": {\n        \"url\": \"=https://api.insee.fr/api-sirene/3.11/siren?q=periode(denominationUniteLegale:\\\"{{ $json.denominationUniteLegale }}\\\")\",\n        \"options\": {},\n        \"sendHeaders\": true,\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"accept\",\n              \"value\": \"application/json\"\n            },\n            {\n              \"name\": \"X-INSEE-Api-Key-Integration\",\n              \"value\": \"={{ $('Set Insee API Key').all()[0].json['X-INSEE-Api-Key-Integration']  }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 4.2,\n      \"alwaysOutputData\": false\n    },\n    {\n      \"id\": \"6ab3818b-2f09-44e2-874a-87c51478572b\",\n      \"name\": \"Request all data from SIREN database\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        -2420,\n        -240\n      ],\n      \"parameters\": {\n        \"url\": \"=https://api.insee.fr/api-sirene/3.11/siret/{{ $json.unitesLegales[0].siren }}{{ $json.unitesLegales[0].periodesUniteLegale[0].nicSiegeUniteLegale }}\",\n        \"options\": {},\n        \"sendHeaders\": true,\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"accept\",\n              \"value\": \"application/json\"\n            },\n            {\n              \"name\": \"X-INSEE-Api-Key-Integration\",\n              \"value\": \"={{ $('Set Insee API Key').all()[0].json['X-INSEE-Api-Key-Integration']  }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"89c223fe-289b-4d0f-922a-e9c0ad672b51\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -3420,\n        -640\n      ],\n      \"parameters\": {\n        \"width\": 460,\n        \"height\": 240,\n        \"content\": \"### åˆ©ç”¨æ³•å›½INSEEå¼€æ”¾æ•°æ®åº“APIä¸°å¯ŒCRMæ•°æ®  \\nè¯¥å·¥ä½œæµä»**Agile CRM**ä¸­æå–æ‰€æœ‰ä¼ä¸šæ¡ç›®ï¼Œå¹¶é€šè¿‡æ³•å›½[Inseeå¼€æ”¾æ•°æ®API](https://portail-api.insee.fr/)ï¼ˆå…è´¹è®¿é—®ï¼‰è¡¥å……å…¶ä¿¡æ¯  \\n\\n__å°†æ›´æ–°ä»¥ä¸‹å†…å®¹ï¼š__  \\n1) ä¼ä¸šæ€»éƒ¨çš„å®˜æ–¹æ³¨å†Œåœ°å€  \\n2) åœ¨è‡ªå®šä¹‰å­—æ®µä¸­æ·»åŠ æ”¿åºœä¼ä¸šè¯†åˆ«å·ï¼ˆSIRENï¼‰\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"0bdc49dd-6f26-447f-a8ba-c2ba615dc7ec\",\n      \"name\": \"FilterOut all Company that have the ReadOnly Key set\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        -2880,\n        -220\n      ],\n      \"parameters\": {\n        \"jsCode\": \"// Get input data\\nconst input = $input.all();\\nconst output = input.filter(item => {\\n    const properties = item.json.properties || [];\\n    return !properties.some(property => property.name === \\\"RO\\\" && property.value === \\\"1\\\"); // Remove all ReadOnly entries\\n}).map(item => {\\n    const companyId = item.json.id;\\n    const denominationUniteLegale = item.json.properties[0]?.value || null; \\n    return {\\n        json: {\\n            companyId,\\n            denominationUniteLegale\\n        }\\n    };\\n});\\n\\n// Return the transformed output\\nreturn output;\\n\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"0ef184f7-219c-4eb3-bfe0-4e68d2ce0b43\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -2940,\n        -640\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 647,\n        \"height\": 232,\n        \"content\": \"### ğŸ‘¨â€ğŸ¤ è®¾ç½®æ­¥éª¤\\n1. æ·»åŠ æ‚¨çš„ **Agile CRM** è´¦å·å‡­è¯\\n2. å°†æ¯ä¸ªAgileCRMèŠ‚ç‚¹å…³è”è‡³æ­£ç¡®çš„ **Agile CRM** å‡­è¯\\n3. åœ¨ **\\\"è®¾ç½®Insee APIå¯†é’¥\\\"** èŠ‚ç‚¹ä¸­æ·»åŠ æ‚¨çš„ **INSEE** APIå¯†é’¥\\n4. ç¡®ä¿ **ä¼ä¸š** çš„ **è‡ªå®šä¹‰å­—æ®µ** æŒ‰ä»¥ä¸‹æ–¹å¼è®¾ç½®ï¼ˆç®¡ç†å‘˜è®¾ç½®ï¼‰ï¼š\\n   - æ ‡ç­¾ï¼š\\\"SIREN\\\"ï¼Œç±»å‹ï¼š\\\"æ–‡æœ¬å­—æ®µ\\\"ï¼Œæè¿°ï¼š\\\"SIRENç¼–å·\\\"\\n   - æ ‡ç­¾ï¼š\\\"RO\\\"ï¼Œç±»å‹ï¼š\\\"æ•°å­—\\\"ï¼Œæè¿°ï¼š\\\"é”å®šæ¡ç›®é˜²æ­¢æ›´æ–°\\\"\\n5. ç‚¹å‡» **æµ‹è¯•å·¥ä½œæµ** ç¡®ä¿ä¸€åˆ‡è¿è¡Œæ­£å¸¸\\n6. å¦‚éœ€å¯é…ç½®è®¡åˆ’ä»»åŠ¡ï¼Œåˆ«å¿˜äº†å°†çŠ¶æ€æ”¹ä¸º **æ¿€æ´»**\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"78255253-195d-472d-a76c-ab63ceac126b\",\n      \"name\": \"Set Insee API Key\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        -3260,\n        -220\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"e993e665-cf31-48b1-8ca8-a4829dc82642\",\n              \"name\": \"X-INSEE-Api-Key-Integration\",\n              \"type\": \"string\",\n              \"value\": \"put-your-insee-api-key-here\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"90b13481-6570-4bfc-b3dc-4b6017c6c8b5\",\n      \"name\": \"Schedule Trigger\",\n      \"type\": \"n8n-nodes-base.scheduleTrigger\",\n      \"position\": [\n        -3440,\n        -140\n      ],\n      \"parameters\": {\n        \"rule\": {\n          \"interval\": [\n            {}\n          ]\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"88c8a6c6-2175-42c3-bfdb-f1d32a5d1c2d\",\n      \"name\": \"clean_route\",\n      \"type\": \"n8n-nodes-base.noOp\",\n      \"position\": [\n        -2660,\n        -360\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"522d83f6-752e-40b4-a889-334f0a96998b\",\n      \"name\": \"Get all Compagnies from Agile CRM\",\n      \"type\": \"n8n-nodes-base.agileCrm\",\n      \"position\": [\n        -3080,\n        -220\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"resource\": \"company\",\n        \"operation\": \"getAll\"\n      },\n      \"credentials\": {\n        \"agileCrmApi\": {\n          \"id\": \"wb0EgiQFLQbiFuy4\",\n          \"name\": \"AgileCRM account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"8ff0632b-6aca-47d8-b611-72dbc8dec09b\",\n      \"name\": \"Enrich CRM with INSEE Data\",\n      \"type\": \"n8n-nodes-base.agileCrm\",\n      \"position\": [\n        -1960,\n        -340\n      ],\n      \"parameters\": {\n        \"resource\": \"company\",\n        \"companyId\": \"={{ $json.companyId }}\",\n        \"operation\": \"update\",\n        \"additionalFields\": {\n          \"addressOptions\": {\n            \"addressProperties\": [\n              {\n                \"address\": \"={{ $json.etablissement.adresseEtablissement.complementAdresseEtablissement }}\\n{{ $json.etablissement.adresseEtablissement.typeVoieEtablissement }} {{ $json.etablissement.adresseEtablissement.libelleVoieEtablissement }}\\n{{ $json.etablissement.adresseEtablissement.codePostalEtablissement }}{{ $json.etablissement.adresseEtablissement.libelleCommuneEtablissement }}\",\n                \"subtype\": \"office\"\n              }\n            ]\n          },\n          \"customProperties\": {\n            \"customProperty\": [\n              {\n                \"name\": \"SIREN\",\n                \"value\": \"={{ $json.etablissement.siren }}\",\n                \"subtype\": \"TEXT\"\n              }\n            ]\n          }\n        }\n      },\n      \"credentials\": {\n        \"agileCrmApi\": {\n          \"id\": \"wb0EgiQFLQbiFuy4\",\n          \"name\": \"AgileCRM account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"8720be96-8181-4ea7-b114-ce0f5b8e09c1\",\n      \"name\": \"Merge data from CRM and SIREN database with enriched for the CRM\",\n      \"type\": \"n8n-nodes-base.merge\",\n      \"position\": [\n        -2180,\n        -340\n      ],\n      \"parameters\": {\n        \"mode\": \"combine\",\n        \"options\": {},\n        \"advanced\": true,\n        \"mergeByFields\": {\n          \"values\": [\n            {\n              \"field1\": \"denominationUniteLegale\",\n              \"field2\": \"etablissement.uniteLegale.denominationUniteLegale\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"855a39e2-83ef-49d9-b630-ec31aaa96e72\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -3460,\n        20\n      ],\n      \"parameters\": {\n        \"height\": 80,\n        \"content\": \"ğŸ‘† æ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸Šä»»æ„ä¸€ä¸ªè§¦å‘å™¨æ¥å¯åŠ¨æµç¨‹ã€‚\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"b003c1b8-6244-4b72-bbb0-025f563b5d71\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -2260,\n        -640\n      ],\n      \"parameters\": {\n        \"width\": 380,\n        \"height\": 240,\n        \"content\": \"### ğŸ—’ï¸ æ³¨æ„äº‹é¡¹ï¼š\\n1. æ­¤å·¥ä½œæµè®¾è®¡ä¸ºè¦†ç›–å·²å­˜åœ¨çš„ä»»ä½•æ¡ç›®ã€‚å¦‚éœ€é’ˆå¯¹ç‰¹å®šå…¬å¸è°ƒæ•´ä¸ºåªè¯»æ¨¡å¼ï¼Œå¯é€šè¿‡å°†å…¶è‡ªå®šä¹‰å­—æ®µ **\\\"RO\\\"** è®¾ä¸º **1** æ¥å®ç°ã€‚\\n\\n2. è‹¥å¸Œæœ›åœ¨å·¥ä½œæµæ›´æ–°åè‡ªåŠ¨è®¾ä¸ºåªè¯»ï¼Œè¯·åœ¨æœ«èŠ‚ç‚¹ **\\\"ç”¨INSEEæ•°æ®ä¸°å¯ŒCRM\\\"** ä¸­æ·»åŠ ä¸€ä¸ªè‡ªå®šä¹‰å±æ€§ï¼šåç§°å¡« **\\\"RO\\\"**ï¼Œå­ç±»å‹é€‰ **\\\"æ•°å­—\\\"**ï¼Œå€¼è®¾ä¸º **\\\"1\\\"**ã€‚\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"active\": false,\n  \"pinData\": {},\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"9f328182-d131-4300-a1f4-2cb3dfe91632\",\n  \"connections\": {\n    \"clean_route\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge data from CRM and SIREN database with enriched for the CRM\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Schedule Trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set Insee API Key\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Set Insee API Key\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get all Compagnies from Agile CRM\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Find Company in SIREN database\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Request all data from SIREN database\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get all Compagnies from Agile CRM\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"FilterOut all Company that have the ReadOnly Key set\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When clicking â€˜Test workflowâ€™\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set Insee API Key\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Request all data from SIREN database\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge data from CRM and SIREN database with enriched for the CRM\",\n            \"type\": \"main\",\n            \"index\": 1\n          }\n        ]\n      ]\n    },\n    \"FilterOut all Company that have the ReadOnly Key set\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Find Company in SIREN database\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"clean_route\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Merge data from CRM and SIREN database with enriched for the CRM\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Enrich CRM with INSEE Data\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}