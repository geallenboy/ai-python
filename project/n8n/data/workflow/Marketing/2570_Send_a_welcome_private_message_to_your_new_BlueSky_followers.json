{
  "title": "Send a welcome private message to your new BlueSky followers",
  "url": "https://n8n.io/workflows/2570-send-a-welcome-private-message-to-your-new-bluesky-followers/",
  "category": "Marketing",
  "category_url": "https://n8n.io/workflows/categories/marketing/?sort=createdAt:desc",
  "author": "Nukeador",
  "publish_date": "Last update 5 months ago",
  "publish_date_absolute": "2024-12-18",
  "content": "",
  "workflow_json": "{\"nodes\":[{\"id\":\"6aa059e4-e78f-4bbd-a707-994a39840f97\",\"name\":\"Create Session\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[-520,240],\"parameters\":{\"url\":\"https://bsky.social/xrpc/com.atproto.server.createSession\",\"method\":\"POST\",\"options\":{},\"sendBody\":true,\"bodyParameters\":{\"parameters\":[{\"name\":\"identifier\",\"value\":\"youruser.bsky.social\"},{\"name\":\"password\",\"value\":\"your-app-passord-here\"}]}},\"notesInFlow\":true,\"typeVersion\":4.1},{\"id\":\"143e37b0-de79-4329-99a2-51484c9609a8\",\"name\":\"List followers\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[-280,240],\"parameters\":{\"url\":\"https://bsky.social/xrpc/app.bsky.graph.getFollowers\",\"options\":{\"response\":{\"response\":{\"responseFormat\":\"json\"}},\"pagination\":{\"pagination\":{\"parameters\":{\"parameters\":[{\"name\":\"cursor\",\"value\":\"={{ $response.body.cursor }}\"}]},\"maxRequests\":2,\"requestInterval\":250,\"limitPagesFetched\":true}}},\"sendQuery\":true,\"sendHeaders\":true,\"queryParameters\":{\"parameters\":[{\"name\":\"actor\",\"value\":\"={{ $json.did }}\"},{\"name\":\"limit\",\"value\":\"100\"}]},\"headerParameters\":{\"parameters\":[{\"name\":\"Authorization\",\"value\":\"=Bearer {{ $item(\\\"0\\\").$node[\\\"Create Session\\\"].json[\\\"accessJwt\\\"] }}\"}]}},\"typeVersion\":4.2},{\"id\":\"f1436a63-a23f-4082-9209-12c21a26ad91\",\"name\":\"Convert to File\",\"type\":\"n8n-nodes-base.convertToFile\",\"position\":[100,620],\"parameters\":{\"options\":{\"fileName\":\"followers-basuracero.json\"},\"operation\":\"toJson\"},\"typeVersion\":1.1},{\"id\":\"f8beea47-6f36-4dfb-b2e7-bf94adb63e66\",\"name\":\"Extract from File\",\"type\":\"n8n-nodes-base.extractFromFile\",\"position\":[100,240],\"parameters\":{\"options\":{},\"operation\":\"fromJson\"},\"typeVersion\":1},{\"id\":\"41658372-3054-4909-850b-3bffd1b1b79c\",\"name\":\"Split Out\",\"type\":\"n8n-nodes-base.splitOut\",\"position\":[520,240],\"parameters\":{\"options\":{\"destinationFieldName\":\"did\"},\"fieldToSplitOut\":\"newDids\"},\"typeVersion\":1},{\"id\":\"c94aa8e9-06db-4b24-a20a-5615b7129023\",\"name\":\"Loop Over Items\",\"type\":\"n8n-nodes-base.splitInBatches\",\"position\":[740,240],\"parameters\":{\"options\":{}},\"typeVersion\":3},{\"id\":\"4d1c6a2f-3acd-4783-96d4-693ced06fd97\",\"name\":\"Wait\",\"type\":\"n8n-nodes-base.wait\",\"position\":[-100,620],\"webhookId\":\"b1608475-db84-4f23-acd6-d003f5094afd\",\"parameters\":{},\"typeVersion\":1.1},{\"id\":\"e4125cb8-8eb5-4cf0-b00d-e7ce4ec8236e\",\"name\":\"Find new followers\",\"type\":\"n8n-nodes-base.code\",\"position\":[280,240],\"parameters\":{\"jsCode\":\"// Datos de entrada\\nconst listFollowers = $('List followers').all()[0].json.followers;\\nconst extractFromFile = $('Extract from File').all()[0].json.data[0].followers;\\n\\n// Verificar que tenemos acceso a los datos\\nconsole.log('listFollowers length:', Array.isArray(listFollowers) ? listFollowers.length : 'no es array');\\nconsole.log('extractFromFile length:', Array.isArray(extractFromFile) ? extractFromFile.length : 'no es array');\\n\\n// Mostrar algunos ejemplos de cada lista\\nconsole.log('Ejemplo de listFollowers:', listFollowers?.slice(0, 2));\\nconsole.log('Ejemplo de extractFromFile:', extractFromFile?.slice(0, 2));\\n\\n// Crear conjunto de DIDs del archivo extraído\\nconst existingDids = new Set(extractFromFile?.map(item => item.did) || []);\\nconsole.log('DIDs existentes:', Array.from(existingDids).slice(0, 5));\\n\\n// Filtrar listFollowers\\nconst newFollowers = listFollowers?.filter(follower => !existingDids.has(follower.did)) || [];\\n\\nreturn {\\n  json: {\\n    debug: {\\n      listFollowersCount: listFollowers?.length || 0,\\n      extractFromFileCount: extractFromFile?.length || 0,\\n      existingDidsCount: existingDids.size,\\n      newFollowersCount: newFollowers.length\\n    },\\n    newFollowers,\\n    newDids: newFollowers.map(follower => follower.did),\\n    count: newFollowers.length\\n  }\\n}\"},\"typeVersion\":2,\"alwaysOutputData\":true},{\"id\":\"a28accb5-ee47-431f-83e4-376425e9899e\",\"name\":\"Read followers from file\",\"type\":\"n8n-nodes-base.readWriteFile\",\"position\":[-80,240],\"parameters\":{\"options\":{},\"fileSelector\":\"=followers-{{ $('Create Session').item.json.handle }}.json\"},\"typeVersion\":1},{\"id\":\"aa2ab5e1-eb6f-4657-9a9a-66417ffa421e\",\"name\":\"Save followers to file\",\"type\":\"n8n-nodes-base.readWriteFile\",\"position\":[280,620],\"parameters\":{\"options\":{\"append\":false},\"fileName\":\"=followers-{{ $('Create Session').item.json.handle }}.json\",\"operation\":\"write\"},\"typeVersion\":1},{\"id\":\"9a4fb5e5-f2f6-4aa1-846e-8d6460ad7765\",\"name\":\"Define welcome message\",\"type\":\"n8n-nodes-base.set\",\"position\":[980,260],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"afe7fe9b-3bd4-4429-afe9-81e5fe934e07\",\"name\":\"text\",\"type\":\"string\",\"value\":\"Hello, thanks for your follow. You can read more about my over my site:\"},{\"id\":\"97590cd1-9d85-442b-baa3-bad849ff9be0\",\"name\":\"link\",\"type\":\"string\",\"value\":\"https://yoursite.com\"}]}},\"typeVersion\":3.4},{\"id\":\"594ce66f-acbd-4c31-806c-382aa9a98ed0\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[920,160],\"parameters\":{\"width\":230,\"height\":266,\"content\":\"### 2. Define your welcome message and link here\"},\"typeVersion\":1},{\"id\":\"c24a7971-11a7-4164-9f2d-78335264f250\",\"name\":\"Sticky Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[220,460],\"parameters\":{\"width\":231,\"height\":338,\"content\":\"### 3. **Important** \\n\\nYou need to manually run \\\"Save followers to file\\\" once before the first time so you populate your list of existing followers\"},\"typeVersion\":1},{\"id\":\"c6e766cf-a118-4db0-8e3c-32662c40737b\",\"name\":\"Send message\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[1360,260],\"parameters\":{\"url\":\"={{ $item(\\\"0\\\").$node[\\\"Create Session\\\"].json.didDoc.service[0].serviceEndpoint }}/xrpc/chat.bsky.convo.sendMessage\",\"method\":\"POST\",\"options\":{},\"jsonBody\":\"={\\n  \\\"convoId\\\" : \\\"{{ $json.convo.id }}\\\",\\n  \\\"message\\\" : {\\n    \\\"text\\\" : \\\"{{ $('Define welcome message').item.json.text }}\\\\n\\\\n{{ $('Define welcome message').item.json.link }}\\\",\\n    \\\"facets\\\" : [\\n     {\\n      \\\"index\\\" : {\\n        \\\"byteStart\\\": {{ $('Define welcome message').item.json.text.length }},\\n        \\\"byteEnd\\\": {{ $('Define welcome message').item.json.text.length + 3 + $('Define welcome message').item.json.link.length}}\\n      },\\n      \\\"features\\\": [\\n          {\\n            \\\"$type\\\": \\\"app.bsky.richtext.facet#link\\\",\\n            \\\"uri\\\": \\\"{{ $('Define welcome message').item.json.link }}\\\"\\n          }\\n        ]\\n      }\\n    ]\\n  }\\n}\",\"sendBody\":true,\"sendHeaders\":true,\"specifyBody\":\"json\",\"headerParameters\":{\"parameters\":[{\"name\":\"Authorization\",\"value\":\"=Bearer {{ $item(\\\"0\\\").$node[\\\"Create Session\\\"].json[\\\"accessJwt\\\"] }}\"},{\"name\":\"Atproto-Proxy\",\"value\":\"did:web:api.bsky.chat#bsky_chat\"}]}},\"typeVersion\":4.2},{\"id\":\"33aa7e0c-58fe-4527-a94e-49bec0e06325\",\"name\":\"Get conversation ID\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[1200,260],\"parameters\":{\"url\":\"={{ $item(\\\"0\\\").$node[\\\"Create Session\\\"].json.didDoc.service[0].serviceEndpoint }}/xrpc/chat.bsky.convo.getConvoForMembers\",\"options\":{},\"sendQuery\":true,\"sendHeaders\":true,\"queryParameters\":{\"parameters\":[{\"name\":\"members\",\"value\":\"={{ $('Split Out').item.json.did }}\"}]},\"headerParameters\":{\"parameters\":[{\"name\":\"Authorization\",\"value\":\"=Bearer {{ $item(\\\"0\\\").$node[\\\"Create Session\\\"].json[\\\"accessJwt\\\"] }}\"},{\"name\":\"Atproto-Proxy\",\"value\":\"did:web:api.bsky.chat#bsky_chat\"}]}},\"typeVersion\":4.2},{\"id\":\"066f1d0d-319a-4676-9c0a-5b00d206ffd2\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-40,-100],\"parameters\":{\"color\":5,\"width\":479,\"height\":307,\"content\":\"## Send a welcome private message to your new BlueSky followers\\n\\nThis flow will save your current followers in a file and check for new ones on the next execution, sending them the Defined message an link as a private message.\\n\\nOnce messages are sent, the new list of followers will be saved into the file.\\n\\n**Important: Follow the yellow notes in order before enabling the full flow for the first time**\"},\"typeVersion\":1},{\"id\":\"a61e301e-a0ca-48e9-9a46-05975662aa90\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-560,40],\"parameters\":{\"width\":181,\"height\":364,\"content\":\"### 1. Define your Bluesky user and app password first\\n\\nThe App password should have access to private messages\"},\"typeVersion\":1},{\"id\":\"1b1dcd74-7a71-49e4-99e8-c079b692aca5\",\"name\":\"Each 60 minutes\",\"type\":\"n8n-nodes-base.scheduleTrigger\",\"position\":[-720,240],\"parameters\":{\"rule\":{\"interval\":[{\"field\":\"minutes\",\"minutesInterval\":60}]}},\"typeVersion\":1.2},{\"id\":\"6acf153c-cdc6-42c1-85f9-2692c8777eef\",\"name\":\"No Operation, do nothing\",\"type\":\"n8n-nodes-base.noOp\",\"position\":[520,620],\"parameters\":{},\"typeVersion\":1}],\"pinData\":{},\"connections\":{\"Wait\":{\"main\":[[{\"node\":\"Convert to File\",\"type\":\"main\",\"index\":0}]]},\"Split Out\":{\"main\":[[{\"node\":\"Loop Over Items\",\"type\":\"main\",\"index\":0}]]},\"Send message\":{\"main\":[[{\"node\":\"Loop Over Items\",\"type\":\"main\",\"index\":0}]]},\"Create Session\":{\"main\":[[{\"node\":\"List followers\",\"type\":\"main\",\"index\":0}]]},\"List followers\":{\"main\":[[{\"node\":\"Read followers from file\",\"type\":\"main\",\"index\":0},{\"node\":\"Wait\",\"type\":\"main\",\"index\":0}]]},\"Convert to File\":{\"main\":[[{\"node\":\"Save followers to file\",\"type\":\"main\",\"index\":0}]]},\"Each 60 minutes\":{\"main\":[[{\"node\":\"Create Session\",\"type\":\"main\",\"index\":0}]]},\"Loop Over Items\":{\"main\":[[],[{\"node\":\"Define welcome message\",\"type\":\"main\",\"index\":0}]]},\"Extract from File\":{\"main\":[[{\"node\":\"Find new followers\",\"type\":\"main\",\"index\":0}]]},\"Find new followers\":{\"main\":[[{\"node\":\"Split Out\",\"type\":\"main\",\"index\":0}]]},\"Get conversation ID\":{\"main\":[[{\"node\":\"Send message\",\"type\":\"main\",\"index\":0}]]},\"Define welcome message\":{\"main\":[[{\"node\":\"Get conversation ID\",\"type\":\"main\",\"index\":0}]]},\"Save followers to file\":{\"main\":[[{\"node\":\"No Operation, do nothing\",\"type\":\"main\",\"index\":0}]]},\"Read followers from file\":{\"main\":[[{\"node\":\"Extract from File\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "## Who is this for?\n\nBlueSky users who are looking to send a \"welcome message\" to their new followers as a private message.\n\n## What this workflow does\n\nThis worflow will check for new followers on BlueSky every 60 minutes and send a private message to the new ones.\n\n## Setup\n\n  1. You need to create a [BlueSky app password](https://bsky.app/settings/app-passwords) with private messages access.\n  2. Fill your credentials and the message text on the corresponding nodes (see sticky notes).\n  3. Manually run once the `Save followers to file` node to generate your initial followers list.\n  4. Enable the workflow\n\n\n\n## How to customize this workflow to your needs\n\nYou can adjust the check frecuency, but be careful to avoid hitting the 100 createSession per day rate limit\n\n## Feedback or comments\n\n[You can leave comments, feedback or improvements about this workflow on the n8n forums](https://community.n8n.io/t/bluesky-send-a-welcome-message-to-new-followers/62890)\n",
  "readme_html": "<!--[--><div data-v-50766329=\"\"><h2>Who is this for?</h2>\n<p>BlueSky users who are looking to send a \"welcome message\" to their new followers as a private message.</p>\n<h2>What this workflow does</h2>\n<p>This worflow will check for new followers on BlueSky every 60 minutes and send a private message to the new ones.</p>\n<h2>Setup</h2>\n<ol>\n<li>You need to create a <a href=\"https://bsky.app/settings/app-passwords\" rel=\"ugc nofollow\" target=\"_blank\">BlueSky app password</a> with private messages access.</li>\n<li>Fill your credentials and the message text on the corresponding nodes (see sticky notes).</li>\n<li>Manually run once the <code>Save followers to file</code> node to generate your initial followers list.</li>\n<li>Enable the workflow</li>\n</ol>\n<h2>How to customize this workflow to your needs</h2>\n<p>You can adjust the check frecuency, but be careful to avoid hitting the 100 createSession per day rate limit</p>\n<h2>Feedback or comments</h2>\n<p><a href=\"https://community.n8n.io/t/bluesky-send-a-welcome-message-to-new-followers/62890\" rel=\"ugc nofollow\" target=\"_blank\">You can leave comments, feedback or improvements about this workflow on the n8n forums</a></p>\n</div><!--]-->",
  "readme_zh": "## 适用对象\n\n面向希望向新关注者发送私信“欢迎消息”的BlueSky用户。\n\n## 工作流功能\n\n本工作流将每隔60分钟检查BlueSky上的新关注者，并向这些新关注者发送一条私信。\n\n## 设置步骤\n\n1. 需创建一个[具备私信权限的BlueSky应用密码](https://bsky.app/settings/app-passwords)  \n2. 在对应节点填写您的账号凭证及欢迎消息文本（参见便签注释）  \n3. 手动运行`保存关注者至文件`节点一次，生成初始关注者列表  \n4. 启用工作流  \n\n## 自定义设置\n\n可调整检查频率，但需注意避免触发每日100次createSession的接口限制  \n\n## 反馈渠道\n\n[欢迎在n8n论坛提交关于此工作流的意见或改进建议](https://community.n8n.io/t/bluesky-send-a-welcome-message-to-new-followers/62890)  \n\n（注：译文采用技术文档常用句式，将被动语态转换为主动表达；\"sticky notes\"译为\"便签注释\"符合中文软件界面习惯；长句拆分符合中文多用短句的特点；链接保留原功能并添加\"欢迎\"二字增强互动性；接口限制说明使用\"触发\"更符合中文技术语境）",
  "title_zh": "向你的新BlueSky粉丝发送一条欢迎私信",
  "publish_date_zh": "最后更新于5个月前",
  "workflow_json_zh": "{\n  \"nodes\": [\n    {\n      \"id\": \"6aa059e4-e78f-4bbd-a707-994a39840f97\",\n      \"name\": \"Create Session\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        -520,\n        240\n      ],\n      \"parameters\": {\n        \"url\": \"https://bsky.social/xrpc/com.atproto.server.createSession\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"sendBody\": true,\n        \"bodyParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"identifier\",\n              \"value\": \"youruser.bsky.social\"\n            },\n            {\n              \"name\": \"password\",\n              \"value\": \"your-app-passord-here\"\n            }\n          ]\n        }\n      },\n      \"notesInFlow\": true,\n      \"typeVersion\": 4.1\n    },\n    {\n      \"id\": \"143e37b0-de79-4329-99a2-51484c9609a8\",\n      \"name\": \"List followers\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        -280,\n        240\n      ],\n      \"parameters\": {\n        \"url\": \"https://bsky.social/xrpc/app.bsky.graph.getFollowers\",\n        \"options\": {\n          \"response\": {\n            \"response\": {\n              \"responseFormat\": \"json\"\n            }\n          },\n          \"pagination\": {\n            \"pagination\": {\n              \"parameters\": {\n                \"parameters\": [\n                  {\n                    \"name\": \"cursor\",\n                    \"value\": \"={{ $response.body.cursor }}\"\n                  }\n                ]\n              },\n              \"maxRequests\": 2,\n              \"requestInterval\": 250,\n              \"limitPagesFetched\": true\n            }\n          }\n        },\n        \"sendQuery\": true,\n        \"sendHeaders\": true,\n        \"queryParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"actor\",\n              \"value\": \"={{ $json.did }}\"\n            },\n            {\n              \"name\": \"limit\",\n              \"value\": \"100\"\n            }\n          ]\n        },\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"Authorization\",\n              \"value\": \"=Bearer {{ $item(\\\"0\\\").$node[\\\"Create Session\\\"].json[\\\"accessJwt\\\"] }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"f1436a63-a23f-4082-9209-12c21a26ad91\",\n      \"name\": \"Convert to File\",\n      \"type\": \"n8n-nodes-base.convertToFile\",\n      \"position\": [\n        100,\n        620\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"fileName\": \"followers-basuracero.json\"\n        },\n        \"operation\": \"toJson\"\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"f8beea47-6f36-4dfb-b2e7-bf94adb63e66\",\n      \"name\": \"Extract from File\",\n      \"type\": \"n8n-nodes-base.extractFromFile\",\n      \"position\": [\n        100,\n        240\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"operation\": \"fromJson\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"41658372-3054-4909-850b-3bffd1b1b79c\",\n      \"name\": \"Split Out\",\n      \"type\": \"n8n-nodes-base.splitOut\",\n      \"position\": [\n        520,\n        240\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"destinationFieldName\": \"did\"\n        },\n        \"fieldToSplitOut\": \"newDids\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"c94aa8e9-06db-4b24-a20a-5615b7129023\",\n      \"name\": \"Loop Over Items\",\n      \"type\": \"n8n-nodes-base.splitInBatches\",\n      \"position\": [\n        740,\n        240\n      ],\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"4d1c6a2f-3acd-4783-96d4-693ced06fd97\",\n      \"name\": \"Wait\",\n      \"type\": \"n8n-nodes-base.wait\",\n      \"position\": [\n        -100,\n        620\n      ],\n      \"webhookId\": \"b1608475-db84-4f23-acd6-d003f5094afd\",\n      \"parameters\": {},\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"e4125cb8-8eb5-4cf0-b00d-e7ce4ec8236e\",\n      \"name\": \"Find new followers\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        280,\n        240\n      ],\n      \"parameters\": {\n        \"jsCode\": \"// Datos de entrada\\nconst listFollowers = $('List followers').all()[0].json.followers;\\nconst extractFromFile = $('Extract from File').all()[0].json.data[0].followers;\\n\\n// Verificar que tenemos acceso a los datos\\nconsole.log('listFollowers length:', Array.isArray(listFollowers) ? listFollowers.length : 'no es array');\\nconsole.log('extractFromFile length:', Array.isArray(extractFromFile) ? extractFromFile.length : 'no es array');\\n\\n// Mostrar algunos ejemplos de cada lista\\nconsole.log('Ejemplo de listFollowers:', listFollowers?.slice(0, 2));\\nconsole.log('Ejemplo de extractFromFile:', extractFromFile?.slice(0, 2));\\n\\n// Crear conjunto de DIDs del archivo extraído\\nconst existingDids = new Set(extractFromFile?.map(item => item.did) || []);\\nconsole.log('DIDs existentes:', Array.from(existingDids).slice(0, 5));\\n\\n// Filtrar listFollowers\\nconst newFollowers = listFollowers?.filter(follower => !existingDids.has(follower.did)) || [];\\n\\nreturn {\\n  json: {\\n    debug: {\\n      listFollowersCount: listFollowers?.length || 0,\\n      extractFromFileCount: extractFromFile?.length || 0,\\n      existingDidsCount: existingDids.size,\\n      newFollowersCount: newFollowers.length\\n    },\\n    newFollowers,\\n    newDids: newFollowers.map(follower => follower.did),\\n    count: newFollowers.length\\n  }\\n}\"\n      },\n      \"typeVersion\": 2,\n      \"alwaysOutputData\": true\n    },\n    {\n      \"id\": \"a28accb5-ee47-431f-83e4-376425e9899e\",\n      \"name\": \"Read followers from file\",\n      \"type\": \"n8n-nodes-base.readWriteFile\",\n      \"position\": [\n        -80,\n        240\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"fileSelector\": \"=followers-{{ $('Create Session').item.json.handle }}.json\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"aa2ab5e1-eb6f-4657-9a9a-66417ffa421e\",\n      \"name\": \"Save followers to file\",\n      \"type\": \"n8n-nodes-base.readWriteFile\",\n      \"position\": [\n        280,\n        620\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"append\": false\n        },\n        \"fileName\": \"=followers-{{ $('Create Session').item.json.handle }}.json\",\n        \"operation\": \"write\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"9a4fb5e5-f2f6-4aa1-846e-8d6460ad7765\",\n      \"name\": \"Define welcome message\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        980,\n        260\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"afe7fe9b-3bd4-4429-afe9-81e5fe934e07\",\n              \"name\": \"text\",\n              \"type\": \"string\",\n              \"value\": \"Hello, thanks for your follow. You can read more about my over my site:\"\n            },\n            {\n              \"id\": \"97590cd1-9d85-442b-baa3-bad849ff9be0\",\n              \"name\": \"link\",\n              \"type\": \"string\",\n              \"value\": \"https://yoursite.com\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"594ce66f-acbd-4c31-806c-382aa9a98ed0\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        920,\n        160\n      ],\n      \"parameters\": {\n        \"width\": 230,\n        \"height\": 266,\n        \"content\": \"### 2. 在此定义您的欢迎消息和链接\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"c24a7971-11a7-4164-9f2d-78335264f250\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        220,\n        460\n      ],\n      \"parameters\": {\n        \"width\": 231,\n        \"height\": 338,\n        \"content\": \"### 3. **重要提示**\\n\\n首次使用前，您需要手动执行一次“保存关注者至文件”操作，以便生成现有关注者列表。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"c6e766cf-a118-4db0-8e3c-32662c40737b\",\n      \"name\": \"Send message\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1360,\n        260\n      ],\n      \"parameters\": {\n        \"url\": \"={{ $item(\\\"0\\\").$node[\\\"Create Session\\\"].json.didDoc.service[0].serviceEndpoint }}/xrpc/chat.bsky.convo.sendMessage\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"jsonBody\": \"={\\n  \\\"convoId\\\" : \\\"{{ $json.convo.id }}\\\",\\n  \\\"message\\\" : {\\n    \\\"text\\\" : \\\"{{ $('Define welcome message').item.json.text }}\\\\n\\\\n{{ $('Define welcome message').item.json.link }}\\\",\\n    \\\"facets\\\" : [\\n     {\\n      \\\"index\\\" : {\\n        \\\"byteStart\\\": {{ $('Define welcome message').item.json.text.length }},\\n        \\\"byteEnd\\\": {{ $('Define welcome message').item.json.text.length + 3 + $('Define welcome message').item.json.link.length}}\\n      },\\n      \\\"features\\\": [\\n          {\\n            \\\"$type\\\": \\\"app.bsky.richtext.facet#link\\\",\\n            \\\"uri\\\": \\\"{{ $('Define welcome message').item.json.link }}\\\"\\n          }\\n        ]\\n      }\\n    ]\\n  }\\n}\",\n        \"sendBody\": true,\n        \"sendHeaders\": true,\n        \"specifyBody\": \"json\",\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"Authorization\",\n              \"value\": \"=Bearer {{ $item(\\\"0\\\").$node[\\\"Create Session\\\"].json[\\\"accessJwt\\\"] }}\"\n            },\n            {\n              \"name\": \"Atproto-Proxy\",\n              \"value\": \"did:web:api.bsky.chat#bsky_chat\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"33aa7e0c-58fe-4527-a94e-49bec0e06325\",\n      \"name\": \"Get conversation ID\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1200,\n        260\n      ],\n      \"parameters\": {\n        \"url\": \"={{ $item(\\\"0\\\").$node[\\\"Create Session\\\"].json.didDoc.service[0].serviceEndpoint }}/xrpc/chat.bsky.convo.getConvoForMembers\",\n        \"options\": {},\n        \"sendQuery\": true,\n        \"sendHeaders\": true,\n        \"queryParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"members\",\n              \"value\": \"={{ $('Split Out').item.json.did }}\"\n            }\n          ]\n        },\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"Authorization\",\n              \"value\": \"=Bearer {{ $item(\\\"0\\\").$node[\\\"Create Session\\\"].json[\\\"accessJwt\\\"] }}\"\n            },\n            {\n              \"name\": \"Atproto-Proxy\",\n              \"value\": \"did:web:api.bsky.chat#bsky_chat\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"066f1d0d-319a-4676-9c0a-5b00d206ffd2\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -40,\n        -100\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 479,\n        \"height\": 307,\n        \"content\": \"## 向你的新BlueSky粉丝发送欢迎私信\\n\\n此流程会将你当前的粉丝列表保存至文件，并在下次执行时检查新增粉丝，向他们发送预设的欢迎消息和链接作为私信。\\n\\n消息发送完成后，更新的粉丝列表将被保存至文件中。\\n\\n**重要提示：首次启用完整流程前，请按顺序遵循黄色标注的注意事项**\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"a61e301e-a0ca-48e9-9a46-05975662aa90\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -560,\n        40\n      ],\n      \"parameters\": {\n        \"width\": 181,\n        \"height\": 364,\n        \"content\": \"### 1. 首先定义你的Bluesky用户和应用密码\\n\\n应用密码需具备访问私信的权限\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"1b1dcd74-7a71-49e4-99e8-c079b692aca5\",\n      \"name\": \"Each 60 minutes\",\n      \"type\": \"n8n-nodes-base.scheduleTrigger\",\n      \"position\": [\n        -720,\n        240\n      ],\n      \"parameters\": {\n        \"rule\": {\n          \"interval\": [\n            {\n              \"field\": \"minutes\",\n              \"minutesInterval\": 60\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"6acf153c-cdc6-42c1-85f9-2692c8777eef\",\n      \"name\": \"No Operation, do nothing\",\n      \"type\": \"n8n-nodes-base.noOp\",\n      \"position\": [\n        520,\n        620\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"Wait\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Convert to File\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Split Out\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Loop Over Items\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Send message\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Loop Over Items\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Create Session\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"List followers\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"List followers\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Read followers from file\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Wait\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Convert to File\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Save followers to file\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Each 60 minutes\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Create Session\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Loop Over Items\": {\n      \"main\": [\n        [],\n        [\n          {\n            \"node\": \"Define welcome message\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Extract from File\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Find new followers\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Find new followers\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Split Out\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get conversation ID\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Send message\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Define welcome message\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get conversation ID\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Save followers to file\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"No Operation, do nothing\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Read followers from file\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Extract from File\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}