{
  "title": "API that extracts engaging moments from YouTube videos",
  "url": "https://n8n.io/workflows/2152-api-that-extracts-engaging-moments-from-youtube-videos/",
  "category": "Marketing",
  "category_url": "https://n8n.io/workflows/categories/marketing/?sort=createdAt:desc",
  "author": "Max T",
  "publish_date": "Last update a year ago",
  "publish_date_absolute": "",
  "content": "",
  "workflow_json": "{\"meta\":{\"instanceId\":\"dbd43d88d26a9e30d8aadc002c9e77f1400c683dd34efe3778d43d27250dde50\"},\"nodes\":[{\"id\":\"80b17b5c-6a05-45b9-bfa6-97fe84706687\",\"name\":\"HTTP Request\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[940,320],\"parameters\":{\"url\":\"=https://yt.lemnoslife.com/videos?part=mostReplayed&id={{ $json.youtubeVideoID }}\",\"options\":{}},\"typeVersion\":4.1},{\"id\":\"12b006e7-83f0-450e-98a8-3b5c3864fac4\",\"name\":\"Split Out\",\"type\":\"n8n-nodes-base.splitOut\",\"position\":[1420,260],\"parameters\":{\"options\":{},\"fieldToSplitOut\":\"items[0].mostReplayed.markers\"},\"typeVersion\":1},{\"id\":\"cb4cdfe1-7601-43e9-b314-818556c4724b\",\"name\":\"has intensity data?\",\"type\":\"n8n-nodes-base.if\",\"position\":[1160,320],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"91f8b87d-228f-4877-ad25-5b9cef3a0f86\",\"operator\":{\"type\":\"object\",\"operation\":\"exists\",\"singleValue\":true},\"leftValue\":\"={{ $json.items[0].mostReplayed }}\",\"rightValue\":\"\"}]}},\"typeVersion\":2},{\"id\":\"76614979-d1eb-4b9e-8b16-0f22705d0a0a\",\"name\":\"No intensity data available for video\",\"type\":\"n8n-nodes-base.noOp\",\"position\":[1420,500],\"parameters\":{},\"typeVersion\":1},{\"id\":\"7532185d-30c8-4fab-bb95-6aaa1e96c9f5\",\"name\":\"intensity > 0.6\",\"type\":\"n8n-nodes-base.filter\",\"position\":[1620,260],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"86716013-333d-4418-b516-f86f5098abca\",\"operator\":{\"type\":\"number\",\"operation\":\"gt\"},\"leftValue\":\"={{ $json.intensityScoreNormalized }}\",\"rightValue\":0.6}]}},\"typeVersion\":2},{\"id\":\"6021cfc5-614c-41a5-b08d-557f6b2ceb94\",\"name\":\"Filter out moments close to each other\",\"type\":\"n8n-nodes-base.filter\",\"position\":[2000,260],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"7f682942-953b-4489-b892-811b0bec22ce\",\"operator\":{\"type\":\"number\",\"operation\":\"gt\"},\"leftValue\":\"={{ $input.all()[ $itemIndex + 1].json.startSec }}\",\"rightValue\":\"={{ $input.all()[ $itemIndex ].json.startSec + 20 }}\"}]}},\"typeVersion\":2},{\"id\":\"99e3d626-b394-48e6-925e-b5eca155720f\",\"name\":\"Input variables\",\"type\":\"n8n-nodes-base.set\",\"position\":[720,320],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"fcd7c7ef-8b06-45fa-8257-d44ed772cf08\",\"name\":\"youtubeVideoID\",\"type\":\"string\",\"value\":\"={{ $json.query.ytID }}\"}]}},\"typeVersion\":3.3},{\"id\":\"50e81b17-4b82-4a8f-a559-aff6ee671c7f\",\"name\":\"Aggregate\",\"type\":\"n8n-nodes-base.aggregate\",\"position\":[2400,260],\"parameters\":{\"options\":{},\"aggregate\":\"aggregateAllItemData\",\"destinationFieldName\":\"engagingMoments\"},\"typeVersion\":1},{\"id\":\"5cfd4462-ff82-499a-9090-e233a6147af6\",\"name\":\"Create each moment (human readable)\",\"type\":\"n8n-nodes-base.set\",\"position\":[2200,260],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"2ad5088d-f42a-42f6-931e-bc11e5ce43da\",\"name\":\"humanReadableMessage\",\"type\":\"string\",\"value\":\"=Engaging moment #{{ $itemIndex +1 }}: https://youtu.be/{{ $('Input variables').first().json.youtubeVideoID }}?t={{ $json.startSec.round() - 3 }}\\n\"},{\"id\":\"dcbe5150-2aaa-46d4-960e-4cad0204dbf4\",\"name\":\"startSec\",\"type\":\"string\",\"value\":\"={{ $json.startSec.round() }}\"},{\"id\":\"6a554773-9caf-4682-9e36-5d7dfee6d5f5\",\"name\":\"directYTURL\",\"type\":\"string\",\"value\":\"=https://youtu.be/{{ $('Input variables').first().json.youtubeVideoID }}?t={{ $json.startSec.round() - 3 }}\"}]},\"includeOtherFields\":true},\"typeVersion\":3.3},{\"id\":\"aa70beee-e6ed-4af4-892c-743f8150a57f\",\"name\":\"Webhook\",\"type\":\"n8n-nodes-base.webhook\",\"position\":[500,320],\"webhookId\":\"21504b31-88e6-4cd9-aaf3-7587427ca5c5\",\"parameters\":{\"path\":\"youtube-engaging-moments-extractor\",\"options\":{},\"responseMode\":\"responseNode\"},\"typeVersion\":1.1},{\"id\":\"7b55436e-45d7-4fd7-8a08-0127e8dfb299\",\"name\":\"millisecs to seconds\",\"type\":\"n8n-nodes-base.set\",\"position\":[1800,260],\"parameters\":{\"include\":\"except\",\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"8b350b84-b78f-46d4-adfb-7115b64494ba\",\"name\":\"startSec\",\"type\":\"number\",\"value\":\"={{ $json.startMillis / 1000 }}\"}]},\"excludeFields\":\"startMillis\",\"includeOtherFields\":true},\"typeVersion\":3.3},{\"id\":\"182da3ef-19c0-4356-866d-159d5aa8be16\",\"name\":\"prepare response\",\"type\":\"n8n-nodes-base.set\",\"position\":[2620,260],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"35261be7-c208-4025-bca1-0b41cf011c38\",\"name\":\"youtubeID\",\"type\":\"string\",\"value\":\"={{ $('Webhook').item.json.query.ytID }}\"}]},\"includeOtherFields\":true},\"typeVersion\":3.3},{\"id\":\"03830a21-13b3-426d-b972-43ded224b66f\",\"name\":\"Respond with \\\"no results\\\"\",\"type\":\"n8n-nodes-base.respondToWebhook\",\"position\":[1660,500],\"parameters\":{\"options\":{},\"respondWith\":\"json\",\"responseBody\":\"={\\n  \\\"engagingMoments\\\": null,\\n  \\\"youtubeID\\\": \\\"{{ $('Webhook').item.json.query.ytID }}\\\"\\n}\"},\"typeVersion\":1},{\"id\":\"d7e8441c-a429-490b-8993-c714fcbb61a2\",\"name\":\"Respond with moments\",\"type\":\"n8n-nodes-base.respondToWebhook\",\"position\":[2860,260],\"parameters\":{\"options\":{}},\"typeVersion\":1},{\"id\":\"cfa06a1f-8e50-4e91-9a18-5b77e315a816\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1620,480],\"parameters\":{\"color\":3,\"width\":307.626814098134,\"height\":357.96212854181044,\"content\":\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nExample response 👇\\n![](https://i.ibb.co/7VZVFBh/error-response.png#full-width)\"},\"typeVersion\":1},{\"id\":\"3c4b9ced-1713-4f02-8a95-519e2e4f2ce8\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[2800,240],\"parameters\":{\"color\":4,\"width\":402.30435383552106,\"height\":480.9199723565991,\"content\":\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nExample response 👇\\n![](https://i.ibb.co/ssymRNt/success-response.png#full-width)\"},\"typeVersion\":1},{\"id\":\"15e8201c-6b72-40f6-bdd2-441a74424aa3\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[500,-180],\"parameters\":{\"color\":5,\"width\":362.9578438147888,\"height\":424.35936420179615,\"content\":\"## Extract engaging moments from YouTube video\\nThis template takes a YouTube video ID and returns potentially engaging moments, based on the \\\"intensity\\\" of a certain timestamp 👇\\n\\n![](https://i.ibb.co/Xz2CDnW/Screenshot-2024-02-28-at-15-51-02.png#full-width)\"},\"typeVersion\":1},{\"id\":\"3edebeb4-c842-4366-a05a-d463fffe449f\",\"name\":\"Sticky Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[880,60],\"parameters\":{\"color\":5,\"width\":445.3395991706974,\"height\":184.59156876295762,\"content\":\"### How to use\\n1. Open `Webhook` node and copy the `Production URL`\\n2. Activate the workflow\\n3. In a web browser, PostMan or n8n HTTP Request invoke the Production URL: `{prod url}?ytID={youtube ID}`. \\ne.g. `{your instance URL}/webhook/youtube-engaging-moments-extractor?ytID=IZsQqarWXtYy`\"},\"typeVersion\":1}],\"pinData\":{},\"connections\":{\"Webhook\":{\"main\":[[{\"node\":\"Input variables\",\"type\":\"main\",\"index\":0}]]},\"Aggregate\":{\"main\":[[{\"node\":\"prepare response\",\"type\":\"main\",\"index\":0}]]},\"Split Out\":{\"main\":[[{\"node\":\"intensity > 0.6\",\"type\":\"main\",\"index\":0}]]},\"HTTP Request\":{\"main\":[[{\"node\":\"has intensity data?\",\"type\":\"main\",\"index\":0}]]},\"Input variables\":{\"main\":[[{\"node\":\"HTTP Request\",\"type\":\"main\",\"index\":0}]]},\"intensity > 0.6\":{\"main\":[[{\"node\":\"millisecs to seconds\",\"type\":\"main\",\"index\":0}]]},\"prepare response\":{\"main\":[[{\"node\":\"Respond with moments\",\"type\":\"main\",\"index\":0}]]},\"has intensity data?\":{\"main\":[[{\"node\":\"Split Out\",\"type\":\"main\",\"index\":0}],[{\"node\":\"No intensity data available for video\",\"type\":\"main\",\"index\":0}]]},\"millisecs to seconds\":{\"main\":[[{\"node\":\"Filter out moments close to each other\",\"type\":\"main\",\"index\":0}]]},\"Create each moment (human readable)\":{\"main\":[[{\"node\":\"Aggregate\",\"type\":\"main\",\"index\":0}]]},\"No intensity data available for video\":{\"main\":[[{\"node\":\"Respond with \\\"no results\\\"\",\"type\":\"main\",\"index\":0}]]},\"Filter out moments close to each other\":{\"main\":[[{\"node\":\"Create each moment (human readable)\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "# How it works\n\nThis template takes a YouTube video ID and identifies potentially engaging moments based on the intensity of specific timestamps 👇\n\n![Screenshot 20240228 at 15.51.02.png](https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/Screenshot_2024_02_28_at_15_51_02_5c119ac1a0.png)\n\nIdeal for vloggers and YouTube content creators, it serves as a foundation for various automations to streamline content calendars or highlight popular moments in your videos. You can leverage it for:\n\n  * Automatic processes to analyze YouTube videos and create sizzle reels or clips for social media, particularly effective for microcontent strategies like those endorsed by Gary Vee.\n  * Instant alerts via Slack, Telegram, Email, or WhatsApp when significant moments occur in your videos.\n  * Utilizing transcripts of these moments with AI to refine content ideas or brainstorm chatbots in your editorial workflow.\n\n\n\n### Example response from the Workflow-as-an-API\n\nA GET request to `{your instance URL}/webhook/youtube-engaging-moments-extractor?ytID=IZsQqarWXtYy` returns 👇\n\n![successresponse.png](https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/success_response_353f100f39.png)\n\nThe workflow generates multiple moments; the screenshot above shows a truncated version.\n\nNot all videos contain timestamp intensity data, the workflow handles this case as well 👇  \n![errorresponse.png](https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/error_response_d42f941ad4.png)\n\n# How to use\n\n  1. Import the template into your n8n workspace or self-hosted instance, then activate the workflow.\n  2. Open the Webhook trigger node and copy the Production URL.\n  3. In a web browser or any tool capable of consuming HTTP Requests (e.g., native code, Bubble app, n8n workflow, another automation tool, Postman, etc.), pass along the URL parameter `?ytID={youtube video ID}` when invoking the API endpoint.\n\n\n\nYour URL should resemble something like `https://acme.app.n8n.cloud/webhook/youtube-engaging-moments-extractor?ytID=IZsQqarWXtYy`.\n\n**Keep in mind**  \nThis workflow relies on an unofficial YouTube API graciously hosted for free by the folks at [lemnoslife.com](http://lemnoslife.com). It's not recommended for high-volume production usecases.\n",
  "readme_html": "<!--[--><div data-v-50766329=\"\"><h1>How it works</h1>\n<p>This template takes a YouTube video ID and identifies potentially engaging moments based on the intensity of specific timestamps 👇</p>\n<p><img src=\"https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/Screenshot_2024_02_28_at_15_51_02_5c119ac1a0.png\" alt=\"Screenshot 20240228 at 15.51.02.png\"></p>\n<p>Ideal for vloggers and YouTube content creators, it serves as a foundation for various automations to streamline content calendars or highlight popular moments in your videos. You can leverage it for:</p>\n<ul>\n<li>Automatic processes to analyze YouTube videos and create sizzle reels or clips for social media, particularly effective for microcontent strategies like those endorsed by Gary Vee.</li>\n<li>Instant alerts via Slack, Telegram, Email, or WhatsApp when significant moments occur in your videos.</li>\n<li>Utilizing transcripts of these moments with AI to refine content ideas or brainstorm chatbots in your editorial workflow.</li>\n</ul>\n<h3>Example response from the Workflow-as-an-API</h3>\n<p>A GET request to <code>{your instance URL}/webhook/youtube-engaging-moments-extractor?ytID=IZsQqarWXtYy</code> returns 👇</p>\n<p><img src=\"https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/success_response_353f100f39.png\" alt=\"successresponse.png\"></p>\n<p>The workflow generates multiple moments; the screenshot above shows a truncated version.</p>\n<p>Not all videos contain timestamp intensity data, the workflow handles this case as well 👇<br>\n<img src=\"https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/error_response_d42f941ad4.png\" alt=\"errorresponse.png\"></p>\n<h1>How to use</h1>\n<ol>\n<li>Import the template into your n8n workspace or self-hosted instance, then activate the workflow.</li>\n<li>Open the Webhook trigger node and copy the Production URL.</li>\n<li>In a web browser or any tool capable of consuming HTTP Requests (e.g., native code, Bubble app, n8n workflow, another automation tool, Postman, etc.), pass along the URL parameter <code>?ytID={youtube video ID}</code> when invoking the API endpoint.</li>\n</ol>\n<p>Your URL should resemble something like <code>https://acme.app.n8n.cloud/webhook/youtube-engaging-moments-extractor?ytID=IZsQqarWXtYy</code>.</p>\n<p><strong>Keep in mind</strong><br>\nThis workflow relies on an unofficial YouTube API graciously hosted for free by the folks at <a href=\"http://lemnoslife.com\" rel=\"ugc nofollow\" target=\"_blank\">lemnoslife.com</a>. It's not recommended for high-volume production usecases.</p>\n</div><!--]-->",
  "readme_zh": "# 使用说明\n\n本模板通过YouTube视频ID识别特定时间戳的互动强度，从而定位潜在高光时刻👇\n\n![2024年2月28日15.51.02截图.png](https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/Screenshot_2024_02_28_at_15_51_02_5c119ac1a0.png)\n\n特别适合视频博主和YouTube内容创作者，可作为自动化流程的基础模板，用于优化内容日历或突出视频中的精彩片段。典型应用场景包括：\n\n* 自动分析YouTube视频并生成社交媒体预告片/片段，特别适合Gary Vee倡导的微内容策略\n* 当视频中出现高光时刻时，通过Slack/Telegram/邮件/WhatsApp即时通知\n* 结合AI分析这些时刻的文字转录，用于内容创意优化或编辑流程中的聊天机器人训练\n\n### 工作流API响应示例\n\n向`{你的实例URL}/webhook/youtube-engaging-moments-extractor?ytID=IZsQqarWXtYy`发送GET请求将返回👇\n\n![成功响应.png](https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/success_response_353f100f39.png)\n\n工作流会生成多个高光时刻，上图显示的是截断后的版本。\n\n并非所有视频都包含时间戳强度数据，工作流也能处理这种情况👇  \n![错误响应.png](https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/error_response_d42f941ad4.png)\n\n# 使用方法\n\n1. 将模板导入n8n工作区或自托管实例，然后激活工作流\n2. 打开Webhook触发器节点，复制生产环境URL\n3. 在浏览器或任何支持HTTP请求的工具（原生代码/Bubble应用/n8n工作流/其他自动化工具/Postman等）中调用API时，附带URL参数`?ytID={YouTube视频ID}`\n\n最终URL格式示例：`https://acme.app.n8n.cloud/webhook/youtube-engaging-moments-extractor?ytID=IZsQqarWXtYy`\n\n**重要提示**  \n本工作流依赖[lemnoslife.com](http://lemnoslife.com)团队慷慨提供的非官方YouTube API免费服务，不建议用于高并发的生产环境。",
  "title_zh": "从YouTube视频中提取精彩时刻的API",
  "publish_date_zh": "最后一次更新于一年前",
  "workflow_json_zh": "{\n  \"meta\": {\n    \"instanceId\": \"dbd43d88d26a9e30d8aadc002c9e77f1400c683dd34efe3778d43d27250dde50\"\n  },\n  \"nodes\": [\n    {\n      \"id\": \"80b17b5c-6a05-45b9-bfa6-97fe84706687\",\n      \"name\": \"HTTP Request\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        940,\n        320\n      ],\n      \"parameters\": {\n        \"url\": \"=https://yt.lemnoslife.com/videos?part=mostReplayed&id={{ $json.youtubeVideoID }}\",\n        \"options\": {}\n      },\n      \"typeVersion\": 4.1\n    },\n    {\n      \"id\": \"12b006e7-83f0-450e-98a8-3b5c3864fac4\",\n      \"name\": \"Split Out\",\n      \"type\": \"n8n-nodes-base.splitOut\",\n      \"position\": [\n        1420,\n        260\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"fieldToSplitOut\": \"items[0].mostReplayed.markers\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"cb4cdfe1-7601-43e9-b314-818556c4724b\",\n      \"name\": \"has intensity data?\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        1160,\n        320\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"91f8b87d-228f-4877-ad25-5b9cef3a0f86\",\n              \"operator\": {\n                \"type\": \"object\",\n                \"operation\": \"exists\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $json.items[0].mostReplayed }}\",\n              \"rightValue\": \"\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"76614979-d1eb-4b9e-8b16-0f22705d0a0a\",\n      \"name\": \"No intensity data available for video\",\n      \"type\": \"n8n-nodes-base.noOp\",\n      \"position\": [\n        1420,\n        500\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"7532185d-30c8-4fab-bb95-6aaa1e96c9f5\",\n      \"name\": \"intensity > 0.6\",\n      \"type\": \"n8n-nodes-base.filter\",\n      \"position\": [\n        1620,\n        260\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"86716013-333d-4418-b516-f86f5098abca\",\n              \"operator\": {\n                \"type\": \"number\",\n                \"operation\": \"gt\"\n              },\n              \"leftValue\": \"={{ $json.intensityScoreNormalized }}\",\n              \"rightValue\": 0.6\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"6021cfc5-614c-41a5-b08d-557f6b2ceb94\",\n      \"name\": \"Filter out moments close to each other\",\n      \"type\": \"n8n-nodes-base.filter\",\n      \"position\": [\n        2000,\n        260\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"7f682942-953b-4489-b892-811b0bec22ce\",\n              \"operator\": {\n                \"type\": \"number\",\n                \"operation\": \"gt\"\n              },\n              \"leftValue\": \"={{ $input.all()[ $itemIndex + 1].json.startSec }}\",\n              \"rightValue\": \"={{ $input.all()[ $itemIndex ].json.startSec + 20 }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"99e3d626-b394-48e6-925e-b5eca155720f\",\n      \"name\": \"Input variables\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        720,\n        320\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"fcd7c7ef-8b06-45fa-8257-d44ed772cf08\",\n              \"name\": \"youtubeVideoID\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.query.ytID }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.3\n    },\n    {\n      \"id\": \"50e81b17-4b82-4a8f-a559-aff6ee671c7f\",\n      \"name\": \"Aggregate\",\n      \"type\": \"n8n-nodes-base.aggregate\",\n      \"position\": [\n        2400,\n        260\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"aggregate\": \"aggregateAllItemData\",\n        \"destinationFieldName\": \"engagingMoments\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"5cfd4462-ff82-499a-9090-e233a6147af6\",\n      \"name\": \"Create each moment (human readable)\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        2200,\n        260\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"2ad5088d-f42a-42f6-931e-bc11e5ce43da\",\n              \"name\": \"humanReadableMessage\",\n              \"type\": \"string\",\n              \"value\": \"=Engaging moment #{{ $itemIndex +1 }}: https://youtu.be/{{ $('Input variables').first().json.youtubeVideoID }}?t={{ $json.startSec.round() - 3 }}\\n\"\n            },\n            {\n              \"id\": \"dcbe5150-2aaa-46d4-960e-4cad0204dbf4\",\n              \"name\": \"startSec\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.startSec.round() }}\"\n            },\n            {\n              \"id\": \"6a554773-9caf-4682-9e36-5d7dfee6d5f5\",\n              \"name\": \"directYTURL\",\n              \"type\": \"string\",\n              \"value\": \"=https://youtu.be/{{ $('Input variables').first().json.youtubeVideoID }}?t={{ $json.startSec.round() - 3 }}\"\n            }\n          ]\n        },\n        \"includeOtherFields\": true\n      },\n      \"typeVersion\": 3.3\n    },\n    {\n      \"id\": \"aa70beee-e6ed-4af4-892c-743f8150a57f\",\n      \"name\": \"Webhook\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"position\": [\n        500,\n        320\n      ],\n      \"webhookId\": \"21504b31-88e6-4cd9-aaf3-7587427ca5c5\",\n      \"parameters\": {\n        \"path\": \"youtube-engaging-moments-extractor\",\n        \"options\": {},\n        \"responseMode\": \"responseNode\"\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"7b55436e-45d7-4fd7-8a08-0127e8dfb299\",\n      \"name\": \"millisecs to seconds\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        1800,\n        260\n      ],\n      \"parameters\": {\n        \"include\": \"except\",\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"8b350b84-b78f-46d4-adfb-7115b64494ba\",\n              \"name\": \"startSec\",\n              \"type\": \"number\",\n              \"value\": \"={{ $json.startMillis / 1000 }}\"\n            }\n          ]\n        },\n        \"excludeFields\": \"startMillis\",\n        \"includeOtherFields\": true\n      },\n      \"typeVersion\": 3.3\n    },\n    {\n      \"id\": \"182da3ef-19c0-4356-866d-159d5aa8be16\",\n      \"name\": \"prepare response\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        2620,\n        260\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"35261be7-c208-4025-bca1-0b41cf011c38\",\n              \"name\": \"youtubeID\",\n              \"type\": \"string\",\n              \"value\": \"={{ $('Webhook').item.json.query.ytID }}\"\n            }\n          ]\n        },\n        \"includeOtherFields\": true\n      },\n      \"typeVersion\": 3.3\n    },\n    {\n      \"id\": \"03830a21-13b3-426d-b972-43ded224b66f\",\n      \"name\": \"Respond with \\\"no results\\\"\",\n      \"type\": \"n8n-nodes-base.respondToWebhook\",\n      \"position\": [\n        1660,\n        500\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"respondWith\": \"json\",\n        \"responseBody\": \"={\\n  \\\"engagingMoments\\\": null,\\n  \\\"youtubeID\\\": \\\"{{ $('Webhook').item.json.query.ytID }}\\\"\\n}\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"d7e8441c-a429-490b-8993-c714fcbb61a2\",\n      \"name\": \"Respond with moments\",\n      \"type\": \"n8n-nodes-base.respondToWebhook\",\n      \"position\": [\n        2860,\n        260\n      ],\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"cfa06a1f-8e50-4e91-9a18-5b77e315a816\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1620,\n        480\n      ],\n      \"parameters\": {\n        \"color\": 3,\n        \"width\": 307.626814098134,\n        \"height\": 357.96212854181044,\n        \"content\": \"![](https://i.ibb.co/7VZVFBh/error-response.png#full-width)\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"3c4b9ced-1713-4f02-8a95-519e2e4f2ce8\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        2800,\n        240\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 402.30435383552106,\n        \"height\": 480.9199723565991,\n        \"content\": \"成功案例\\n👇\\n![](https://i.ibb.co/ssymRNt/success-response.png#full-width)\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"15e8201c-6b72-40f6-bdd2-441a74424aa3\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        500,\n        -180\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 362.9578438147888,\n        \"height\": 424.35936420179615,\n        \"content\": \"## 从YouTube视频中提取精彩片段\\n该模板通过YouTube视频ID，基于特定时间戳的\\\"强度\\\"指标，返回视频中可能吸引观众的精彩时刻 👇\\n\\n![](https://i.ibb.co/Xz2CDnW/Screenshot-2024-02-28-at-15-51-02.png#full-width)\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"3edebeb4-c842-4366-a05a-d463fffe449f\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        880,\n        60\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 445.3395991706974,\n        \"height\": 184.59156876295762,\n        \"content\": \"### 使用方法\\n1. 打开`Webhook`节点并复制`生产环境URL`\\n2. 激活工作流\\n3. 通过网页浏览器、PostMan或n8n的HTTP请求调用生产环境URL：`{生产环境URL}?ytID={YouTube视频ID}`\\n示例：`{您的实例URL}/webhook/youtube-engaging-moments-extractor?ytID=IZsQqarWXtYy`\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"Webhook\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Input variables\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Aggregate\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"prepare response\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Split Out\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"intensity > 0.6\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"HTTP Request\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"has intensity data?\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Input variables\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"HTTP Request\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"intensity > 0.6\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"millisecs to seconds\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"prepare response\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Respond with moments\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"has intensity data?\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Split Out\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"No intensity data available for video\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"millisecs to seconds\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Filter out moments close to each other\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Create each moment (human readable)\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Aggregate\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"No intensity data available for video\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Respond with \\\"no results\\\"\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Filter out moments close to each other\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Create each moment (human readable)\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}