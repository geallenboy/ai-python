{
  "title": "Baserow campaign database to Shopify with image upload & dynamic template update",
  "url": "https://n8n.io/workflows/2186-baserow-campaign-database-to-shopify-with-image-upload-and-dynamic-template-update/",
  "category": "Marketing",
  "category_url": "https://n8n.io/workflows/categories/marketing/?sort=createdAt:desc",
  "author": "Sascha",
  "publish_date": "Last update a year ago",
  "publish_date_absolute": "",
  "content": "",
  "workflow_json": "{\"id\":\"x2VUvhqV1YTJCIN0\",\"meta\":{\"instanceId\":\"e2c978396c9c745cf0aaa9ed3abe4464dbcef93c5fe2df809b9e14440e628df6\"},\"tags\":[],\"nodes\":[{\"id\":\"094b9011-a53d-4a50-b44d-ad229612bb06\",\"name\":\"No Operation, do nothing\",\"type\":\"n8n-nodes-base.noOp\",\"position\":[560,220],\"parameters\":{},\"typeVersion\":1},{\"id\":\"6d9eee1f-995f-4558-8f97-25636e20022c\",\"name\":\"Save campaign.liquid\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[800,-100],\"parameters\":{\"url\":\"=https://{{ $('Set values here!').params[\\\"fields\\\"][\\\"values\\\"][0][\\\"stringValue\\\"] }}.myshopify.com/admin/api/2024-01/themes/{{ $('Set values here!').params[\\\"fields\\\"][\\\"values\\\"][1][\\\"stringValue\\\"] }}/assets.json\",\"method\":\"PUT\",\"options\":{},\"jsonBody\":\"={\\\"asset\\\":\\n  {\\n    \\\"key\\\":\\\"snippets/{{ $('Set values here!').params[\\\"fields\\\"][\\\"values\\\"][2][\\\"stringValue\\\"] }}\\\",\\n    \\\"value\\\":\\\"{{ $('Set values here!').params[\\\"fields\\\"][\\\"values\\\"][3][\\\"stringValue\\\"].replace(\\\"IMAGE\\\",$('Check').item.json[\\\"body\\\"][\\\"items\\\"][0][\\\"Campaign Image\\\"][0][\\\"visible_name\\\"]).replace(/\\\\\\\\/g, \\\"\\\\\\\\\\\\\\\\\\\").replace(/\\\"/g, '\\\\\\\\\\\"').replace(/\\\\n/g, \\\"\\\\\\\\n\\\") }}\\\"}}\",\"sendBody\":true,\"specifyBody\":\"json\",\"authentication\":\"genericCredentialType\",\"genericAuthType\":\"httpHeaderAuth\"},\"credentials\":{\"httpHeaderAuth\":{\"id\":\"Z98cM8akgh1jPtG7\",\"name\":\"Header Auth  Shopify\"},\"shopifyAccessTokenApi\":{\"id\":\"WbxXaLMHozAgY3Rz\",\"name\":\"Shopify Access Token account\"}},\"typeVersion\":4.1},{\"id\":\"fb3e9410-59ae-4d90-8bb3-1fd95f0e9a43\",\"name\":\"Upload Image\",\"type\":\"n8n-nodes-base.graphql\",\"position\":[560,-100],\"parameters\":{\"query\":\"mutation fileCreate($files: [FileCreateInput!]!) {\\n  fileCreate(files: $files) {\\n    files {\\n      id\\n    }\\n  }\\n}\",\"endpoint\":\"=https://{{ $('Set values here!').params[\\\"fields\\\"][\\\"values\\\"][0][\\\"stringValue\\\"] }}.myshopify.com/admin/api/2024-01/graphql.json\",\"variables\":\"={\\n  \\\"files\\\": {\\n    \\\"alt\\\": \\\"{{ $json.body.items[0].Name }}\\\",\\n    \\\"contentType\\\": \\\"IMAGE\\\",\\n\\t\\\"filename\\\": \\\"{{ $json.body.items[0]['Campaign Image'][0].visible_name }}\\\",\\n    \\\"originalSource\\\": \\\"{{ $json.body.items[0]['Campaign Image'][0].url }}\\\"\\n  }\\n}\",\"requestFormat\":\"json\",\"authentication\":\"headerAuth\"},\"credentials\":{\"httpHeaderAuth\":{\"id\":\"Z98cM8akgh1jPtG7\",\"name\":\"Header Auth  Shopify\"}},\"typeVersion\":1},{\"id\":\"29f970fe-da65-4b6f-bf0b-1cadbd80f51c\",\"name\":\"Set values here!\",\"type\":\"n8n-nodes-base.set\",\"position\":[120,60],\"parameters\":{\"fields\":{\"values\":[{\"name\":\"Shopify Subdomain\",\"stringValue\":\"n8n-mautic-demo\"},{\"name\":\"Theme ID\",\"stringValue\":\"125514514534\"},{\"name\":\"Filename\",\"stringValue\":\"campaign.liquid\"},{\"name\":\"Content\",\"stringValue\":\"<img src=\\\"{{ 'IMAGE' | file_img_url: 'grande'}}\\\">\"}]},\"options\":{}},\"typeVersion\":3.2},{\"id\":\"0bd9327d-4bbd-4884-a9a6-21b0c5b4c3d3\",\"name\":\"Call from Baserow\",\"type\":\"n8n-nodes-base.webhook\",\"position\":[-100,60],\"webhookId\":\"3041fdd6-4cb5-4286-9034-1337dddc3f45\",\"parameters\":{\"path\":\"3041fdd6-4cb5-4286-9034-1337dddc3f45\",\"options\":{},\"httpMethod\":\"POST\"},\"typeVersion\":1.1},{\"id\":\"6c9d35e8-0738-4d15-a0ff-40077e73d797\",\"name\":\"Check\",\"type\":\"n8n-nodes-base.if\",\"position\":[320,60],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"21262344-6519-4f32-876b-82722a1fab66\",\"operator\":{\"type\":\"number\",\"operation\":\"gt\"},\"leftValue\":\"={{\\nDateTime.fromISO($json[\\\"body\\\"][\\\"items\\\"][0][\\\"Last modified\\\"])\\n    .diff(DateTime.fromISO($json[\\\"body\\\"][\\\"old_items\\\"][0][\\\"Last modified\\\"]),'minutes')\\n    .toObject()\\n    [\\\"minutes\\\"]\\n}}\",\"rightValue\":0.1},{\"id\":\"5c0a176c-5ba9-4060-a4d2-b9207cf47092\",\"operator\":{\"type\":\"boolean\",\"operation\":\"true\",\"singleValue\":true},\"leftValue\":\"={{ $json.body.items[0].Active }}\",\"rightValue\":\"\"},{\"id\":\"f764adc6-e7a1-4df7-861f-94b90a99f2d4\",\"operator\":{\"type\":\"array\",\"operation\":\"notEmpty\",\"singleValue\":true},\"leftValue\":\"={{ $json[\\\"body\\\"][\\\"items\\\"][0][\\\"Campaign Image\\\"] }}\",\"rightValue\":\"\"}]}},\"typeVersion\":2},{\"id\":\"f6c17549-4192-4f96-ad81-518c52bdcda7\",\"name\":\"Sticky Note4\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-540,-40],\"parameters\":{\"color\":4,\"width\":360.408084305475,\"height\":315.5897364788551,\"content\":\"## Shopify API\\n\\nThis workflow uses GraphQL calls to the Shopify Admin API. In order to get a better understanding for the queries and mutations please check the API Docs.\\n\\n\\n[Shopify GraphQL API docs](https://shopify.dev/docs/api/admin-graphql)\\n\\nTo make it easy to build queries for the GraphQL API easy please check out the [GraphiQL App for the Admin API](https://shopify.dev/docs/apps/tools/graphiql-admin-api) from Shopify\"},\"typeVersion\":1},{\"id\":\"22743217-0c89-4fd1-b22d-0e00d6ca6854\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[560,-300],\"parameters\":{\"width\":331.1188177339898,\"content\":\"## Shopify \\nThe n8n Shopify node cannot upload images or theme assets so we need to make custom calls to the GraphQL and REST Api \"},\"typeVersion\":1},{\"id\":\"ca9561aa-85e8-47ad-8bac-60fc3a94f94e\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[80,-160],\"parameters\":{\"color\":5,\"width\":158.16682590559316,\"content\":\"## Set values \\nPlease edit this node and change the values for your own setup.\"},\"typeVersion\":1}],\"active\":true,\"pinData\":{\"Call from Baserow\":[{\"json\":{\"body\":{\"items\":[{\"id\":1,\"Name\":\"Campaigna\",\"order\":\"1.00000000000000000000\",\"Active\":true,\"Last modified\":\"2024-03-01T11:21:58.157987Z\",\"Campaign Image\":[{\"url\":\"https://br.m3tam3re.com/media/user_files/O5jM7aSUTYSBPQtxVHktkN4U7wlUoIJd_1af752d7847a230a853df92814639be35035229f2bb857b4ea870b64011cdde0.webp\",\"name\":\"O5jM7aSUTYSBPQtxVHktkN4U7wlUoIJd_1af752d7847a230a853df92814639be35035229f2bb857b4ea870b64011cdde0.webp\",\"size\":107358,\"is_image\":true,\"mime_type\":\"\",\"thumbnails\":{\"tiny\":{\"url\":\"https://br.m3tam3re.com/media/thumbnails/tiny/O5jM7aSUTYSBPQtxVHktkN4U7wlUoIJd_1af752d7847a230a853df92814639be35035229f2bb857b4ea870b64011cdde0.webp\",\"width\":null,\"height\":21},\"small\":{\"url\":\"https://br.m3tam3re.com/media/thumbnails/small/O5jM7aSUTYSBPQtxVHktkN4U7wlUoIJd_1af752d7847a230a853df92814639be35035229f2bb857b4ea870b64011cdde0.webp\",\"width\":48,\"height\":48},\"card_cover\":{\"url\":\"https://br.m3tam3re.com/media/thumbnails/card_cover/O5jM7aSUTYSBPQtxVHktkN4U7wlUoIJd_1af752d7847a230a853df92814639be35035229f2bb857b4ea870b64011cdde0.webp\",\"width\":300,\"height\":160}},\"image_width\":1280,\"uploaded_at\":\"2024-03-01T09:50:41.921452+00:00\",\"image_height\":720,\"visible_name\":\"n8n-portainer.webp\"}]}],\"event_id\":\"dae85cec-94ce-4e6c-8091-fce28bdc4c6c\",\"table_id\":596,\"old_items\":[{\"id\":1,\"Name\":\"Campaignas\",\"order\":\"1.00000000000000000000\",\"Active\":true,\"Last modified\":\"2024-03-01T11:21:16.099694Z\",\"Campaign Image\":[{\"url\":\"https://br.m3tam3re.com/media/user_files/O5jM7aSUTYSBPQtxVHktkN4U7wlUoIJd_1af752d7847a230a853df92814639be35035229f2bb857b4ea870b64011cdde0.webp\",\"name\":\"O5jM7aSUTYSBPQtxVHktkN4U7wlUoIJd_1af752d7847a230a853df92814639be35035229f2bb857b4ea870b64011cdde0.webp\",\"size\":107358,\"is_image\":true,\"mime_type\":\"\",\"thumbnails\":{\"tiny\":{\"url\":\"https://br.m3tam3re.com/media/thumbnails/tiny/O5jM7aSUTYSBPQtxVHktkN4U7wlUoIJd_1af752d7847a230a853df92814639be35035229f2bb857b4ea870b64011cdde0.webp\",\"width\":null,\"height\":21},\"small\":{\"url\":\"https://br.m3tam3re.com/media/thumbnails/small/O5jM7aSUTYSBPQtxVHktkN4U7wlUoIJd_1af752d7847a230a853df92814639be35035229f2bb857b4ea870b64011cdde0.webp\",\"width\":48,\"height\":48},\"card_cover\":{\"url\":\"https://br.m3tam3re.com/media/thumbnails/card_cover/O5jM7aSUTYSBPQtxVHktkN4U7wlUoIJd_1af752d7847a230a853df92814639be35035229f2bb857b4ea870b64011cdde0.webp\",\"width\":300,\"height\":160}},\"image_width\":1280,\"uploaded_at\":\"2024-03-01T09:50:41.921452+00:00\",\"image_height\":720,\"visible_name\":\"n8n-portainer.webp\"}]}],\"event_type\":\"rows.updated\",\"database_id\":112,\"workspace_id\":108},\"query\":{},\"params\":{},\"headers\":{\"host\":\"n8n.m3tam3re.com\",\"accept\":\"*/*\",\"user-agent\":\"python-requests/2.31.0\",\"content-type\":\"application/json\",\"content-length\":\"2617\",\"accept-encoding\":\"gzip, deflate, br\",\"x-baserow-event\":\"rows.updated\",\"x-forwarded-for\":\"202.61.226.110\",\"x-forwarded-host\":\"n8n.m3tam3re.com\",\"x-forwarded-proto\":\"https\",\"x-baserow-delivery\":\"dae85cec-94ce-4e6c-8091-fce28bdc4c6c\"}}}]},\"settings\":{\"executionOrder\":\"v1\"},\"versionId\":\"c82b43c0-aa47-4086-b7ae-588ee12e5e24\",\"connections\":{\"Check\":{\"main\":[[{\"node\":\"Upload Image\",\"type\":\"main\",\"index\":0}],[{\"node\":\"No Operation, do nothing\",\"type\":\"main\",\"index\":0}]]},\"Upload Image\":{\"main\":[[{\"node\":\"Save campaign.liquid\",\"type\":\"main\",\"index\":0}]]},\"Set values here!\":{\"main\":[[{\"node\":\"Check\",\"type\":\"main\",\"index\":0}]]},\"Call from Baserow\":{\"main\":[[{\"node\":\"Set values here!\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "Automating your marketing campaign management process can streamline your workflow and save you valuable time. With the combination of Baserow and n8n, you can efficiently handle your campaign data and seamlessly publish content to your Shopify store.\n\nIn this workflow template, I demonstrate how to leverage Baserow as a centralized platform for organizing your marketing campaign assets, including copy and images. By utilizing n8n, we automate the process of fetching images and campaign descriptions from Baserow and uploading them directly to your Shopify store.\n\nWith this automated solution, you can expedite the publishing process, ensuring that your campaigns are launched swiftly across your sales channels. Additionally, this workflow serves as a foundational step towards further automation in campaign management, allowing you to dynamically generate and upload content to your Shopify store with ease.\n\n## This template will help you:\n\n  1. Use n8n to get images for marketing campaigns from Baserow and upload them to your Shopify media library\n  2. Dynamically inject data from Baserow into a template file\n  3. Upload a template file to your Shopify theme\n\n\n\n## This template will demonstrate the follwing concepts in n8n:\n\n  * use the **Webhook node**\n  * use the **IF node** to control the execution flow of the workflow\n  * do time calculation using expressions and javascript\n  * use the **GraphQL node** to upload images to your Shopify media files\n  * create a dynamic template file for your Shopify theme\n  * use the **HTTP Reqest node** to upload your template file to your Shopify store\n\n\n\n## How to get started?\n\n  1. Create a custom app in Shopify get the credentials needed to connect n8n to Shopify  \nThis is needed for the Shopify Trigger\n  2. Create **Shopify Acces Token API** credentials n n8n for the Shopify trigger node\n  3. Create **Header Auth** credentials:  \nUse **X-Shopify-Access-Token** as the name and the Acces-Token from the Shopify App you created as the value.  \nThe Header Auth is neccessary for the GraphQL nodes.\n  4. You will need a running Baserow instance for this. You can also sign up for a free account at <https://baserow.io/>\n\n\n\nPlease make sure to read the notes in the template.\n\nFor a detailed explanation please check the corresponding video: <https://youtu.be/Ky-dYlljGiY>\n",
  "readme_html": "<!--[--><div data-v-50766329=\"\"><p>Automating your marketing campaign management process can streamline your workflow and save you valuable time. With the combination of Baserow and n8n, you can efficiently handle your campaign data and seamlessly publish content to your Shopify store.</p>\n<p>In this workflow template, I demonstrate how to leverage Baserow as a centralized platform for organizing your marketing campaign assets, including copy and images. By utilizing n8n, we automate the process of fetching images and campaign descriptions from Baserow and uploading them directly to your Shopify store.</p>\n<p>With this automated solution, you can expedite the publishing process, ensuring that your campaigns are launched swiftly across your sales channels. Additionally, this workflow serves as a foundational step towards further automation in campaign management, allowing you to dynamically generate and upload content to your Shopify store with ease.</p>\n<h2>This template will help you:</h2>\n<ol>\n<li>Use n8n to get images for marketing campaigns from Baserow and upload them to your Shopify media library</li>\n<li>Dynamically inject data from Baserow into a template file</li>\n<li>Upload a template file to your Shopify theme</li>\n</ol>\n<h2>This template will demonstrate the follwing concepts in n8n:</h2>\n<ul>\n<li>use the <strong>Webhook node</strong></li>\n<li>use the <strong>IF node</strong> to control the execution flow of the workflow</li>\n<li>do time calculation using expressions and javascript</li>\n<li>use the <strong>GraphQL node</strong> to upload images to your Shopify media files</li>\n<li>create a dynamic template file for your Shopify theme</li>\n<li>use the <strong>HTTP Reqest node</strong> to upload your template file to your Shopify store</li>\n</ul>\n<h2>How to get started?</h2>\n<ol>\n<li>Create a custom app in Shopify get the credentials needed to connect n8n to Shopify<br>\nThis is needed for the Shopify Trigger</li>\n<li>Create <strong>Shopify Acces Token API</strong> credentials n n8n for the Shopify trigger node</li>\n<li>Create <strong>Header Auth</strong> credentials:<br>\nUse <strong>X-Shopify-Access-Token</strong> as the name and the Acces-Token from the Shopify App you created as the value.<br>\nThe Header Auth is neccessary for the GraphQL nodes.</li>\n<li>You will need a running Baserow instance for this. You can also sign up for a free account at <a href=\"https://baserow.io/\" rel=\"ugc nofollow\" target=\"_blank\">https://baserow.io/</a></li>\n</ol>\n<p>Please make sure to read the notes in the template.</p>\n<p>For a detailed explanation please check the corresponding video: <a href=\"https://youtu.be/Ky-dYlljGiY\" rel=\"ugc nofollow\" target=\"_blank\">https://youtu.be/Ky-dYlljGiY</a></p>\n</div><!--]-->",
  "readme_zh": "自动化您的营销活动管理流程可以优化工作流，节省宝贵时间。通过结合Baserow和n8n，您能高效处理活动数据，并将内容无缝发布至Shopify店铺。\n\n本工作流模板展示了如何利用Baserow作为集中平台来管理营销素材（包括文案和图片），并借助n8n实现从Baserow自动获取活动图片与描述，直接上传至Shopify店铺的自动化流程。\n\n这一自动化方案能加速发布进程，确保营销活动快速同步至各销售渠道。此外，该工作流为活动管理的深度自动化奠定了基础，使您能轻松实现动态生成内容并上传至Shopify店铺。\n\n## 本模板将帮助您：\n\n1. 使用n8n从Baserow获取营销活动图片并上传至Shopify媒体库  \n2. 将Baserow数据动态注入模板文件  \n3. 将模板文件上传至Shopify主题  \n\n## 模板将演示n8n中的以下功能：\n\n* 使用**Webhook节点**  \n* 通过**IF节点**控制工作流执行路径  \n* 运用表达式和JavaScript进行时间计算  \n* 使用**GraphQL节点**上传图片至Shopify媒体文件  \n* 创建Shopify主题的动态模板文件  \n* 通过**HTTP请求节点**上传模板文件至Shopify店铺  \n\n## 如何开始？\n\n1. 在Shopify创建自定义应用以获取n8n连接凭证（Shopify触发器所需）  \n2. 在n8n中创建**Shopify访问令牌API**凭证（用于触发器节点）  \n3. 创建**Header Auth**凭证：  \n   名称填写**X-Shopify-Access-Token**，值为所建Shopify应用的访问令牌（GraphQL节点必需）  \n4. 需准备可用的Baserow实例，或注册免费账户：<https://baserow.io/>  \n\n请务必阅读模板中的注释说明。  \n详细教程请观看配套视频：<https://youtu.be/Ky-dYlljGiY>",
  "title_zh": "Baserow活动数据库同步至Shopify，支持图片上传与动态模板更新",
  "publish_date_zh": "最后一次更新于一年前",
  "workflow_json_zh": "{\n  \"id\": \"x2VUvhqV1YTJCIN0\",\n  \"meta\": {\n    \"instanceId\": \"e2c978396c9c745cf0aaa9ed3abe4464dbcef93c5fe2df809b9e14440e628df6\"\n  },\n  \"tags\": [],\n  \"nodes\": [\n    {\n      \"id\": \"094b9011-a53d-4a50-b44d-ad229612bb06\",\n      \"name\": \"No Operation, do nothing\",\n      \"type\": \"n8n-nodes-base.noOp\",\n      \"position\": [\n        560,\n        220\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"6d9eee1f-995f-4558-8f97-25636e20022c\",\n      \"name\": \"Save campaign.liquid\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        800,\n        -100\n      ],\n      \"parameters\": {\n        \"url\": \"=https://{{ $('Set values here!').params[\\\"fields\\\"][\\\"values\\\"][0][\\\"stringValue\\\"] }}.myshopify.com/admin/api/2024-01/themes/{{ $('Set values here!').params[\\\"fields\\\"][\\\"values\\\"][1][\\\"stringValue\\\"] }}/assets.json\",\n        \"method\": \"PUT\",\n        \"options\": {},\n        \"jsonBody\": \"={\\\"asset\\\":\\n  {\\n    \\\"key\\\":\\\"snippets/{{ $('Set values here!').params[\\\"fields\\\"][\\\"values\\\"][2][\\\"stringValue\\\"] }}\\\",\\n    \\\"value\\\":\\\"{{ $('Set values here!').params[\\\"fields\\\"][\\\"values\\\"][3][\\\"stringValue\\\"].replace(\\\"IMAGE\\\",$('Check').item.json[\\\"body\\\"][\\\"items\\\"][0][\\\"Campaign Image\\\"][0][\\\"visible_name\\\"]).replace(/\\\\\\\\/g, \\\"\\\\\\\\\\\\\\\\\\\").replace(/\\\"/g, '\\\\\\\\\\\"').replace(/\\\\n/g, \\\"\\\\\\\\n\\\") }}\\\"}}\",\n        \"sendBody\": true,\n        \"specifyBody\": \"json\",\n        \"authentication\": \"genericCredentialType\",\n        \"genericAuthType\": \"httpHeaderAuth\"\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": {\n          \"id\": \"Z98cM8akgh1jPtG7\",\n          \"name\": \"Header Auth  Shopify\"\n        },\n        \"shopifyAccessTokenApi\": {\n          \"id\": \"WbxXaLMHozAgY3Rz\",\n          \"name\": \"Shopify Access Token account\"\n        }\n      },\n      \"typeVersion\": 4.1\n    },\n    {\n      \"id\": \"fb3e9410-59ae-4d90-8bb3-1fd95f0e9a43\",\n      \"name\": \"Upload Image\",\n      \"type\": \"n8n-nodes-base.graphql\",\n      \"position\": [\n        560,\n        -100\n      ],\n      \"parameters\": {\n        \"query\": \"mutation fileCreate($files: [FileCreateInput!]!) {\\n  fileCreate(files: $files) {\\n    files {\\n      id\\n    }\\n  }\\n}\",\n        \"endpoint\": \"=https://{{ $('Set values here!').params[\\\"fields\\\"][\\\"values\\\"][0][\\\"stringValue\\\"] }}.myshopify.com/admin/api/2024-01/graphql.json\",\n        \"variables\": \"={\\n  \\\"files\\\": {\\n    \\\"alt\\\": \\\"{{ $json.body.items[0].Name }}\\\",\\n    \\\"contentType\\\": \\\"IMAGE\\\",\\n\\t\\\"filename\\\": \\\"{{ $json.body.items[0]['Campaign Image'][0].visible_name }}\\\",\\n    \\\"originalSource\\\": \\\"{{ $json.body.items[0]['Campaign Image'][0].url }}\\\"\\n  }\\n}\",\n        \"requestFormat\": \"json\",\n        \"authentication\": \"headerAuth\"\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": {\n          \"id\": \"Z98cM8akgh1jPtG7\",\n          \"name\": \"Header Auth  Shopify\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"29f970fe-da65-4b6f-bf0b-1cadbd80f51c\",\n      \"name\": \"Set values here!\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        120,\n        60\n      ],\n      \"parameters\": {\n        \"fields\": {\n          \"values\": [\n            {\n              \"name\": \"Shopify Subdomain\",\n              \"stringValue\": \"n8n-mautic-demo\"\n            },\n            {\n              \"name\": \"Theme ID\",\n              \"stringValue\": \"125514514534\"\n            },\n            {\n              \"name\": \"Filename\",\n              \"stringValue\": \"campaign.liquid\"\n            },\n            {\n              \"name\": \"Content\",\n              \"stringValue\": \"<img src=\\\"{{ 'IMAGE' | file_img_url: 'grande'}}\\\">\"\n            }\n          ]\n        },\n        \"options\": {}\n      },\n      \"typeVersion\": 3.2\n    },\n    {\n      \"id\": \"0bd9327d-4bbd-4884-a9a6-21b0c5b4c3d3\",\n      \"name\": \"Call from Baserow\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"position\": [\n        -100,\n        60\n      ],\n      \"webhookId\": \"3041fdd6-4cb5-4286-9034-1337dddc3f45\",\n      \"parameters\": {\n        \"path\": \"3041fdd6-4cb5-4286-9034-1337dddc3f45\",\n        \"options\": {},\n        \"httpMethod\": \"POST\"\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"6c9d35e8-0738-4d15-a0ff-40077e73d797\",\n      \"name\": \"Check\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        320,\n        60\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"21262344-6519-4f32-876b-82722a1fab66\",\n              \"operator\": {\n                \"type\": \"number\",\n                \"operation\": \"gt\"\n              },\n              \"leftValue\": \"={{\\nDateTime.fromISO($json[\\\"body\\\"][\\\"items\\\"][0][\\\"Last modified\\\"])\\n    .diff(DateTime.fromISO($json[\\\"body\\\"][\\\"old_items\\\"][0][\\\"Last modified\\\"]),'minutes')\\n    .toObject()\\n    [\\\"minutes\\\"]\\n}}\",\n              \"rightValue\": 0.1\n            },\n            {\n              \"id\": \"5c0a176c-5ba9-4060-a4d2-b9207cf47092\",\n              \"operator\": {\n                \"type\": \"boolean\",\n                \"operation\": \"true\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $json.body.items[0].Active }}\",\n              \"rightValue\": \"\"\n            },\n            {\n              \"id\": \"f764adc6-e7a1-4df7-861f-94b90a99f2d4\",\n              \"operator\": {\n                \"type\": \"array\",\n                \"operation\": \"notEmpty\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $json[\\\"body\\\"][\\\"items\\\"][0][\\\"Campaign Image\\\"] }}\",\n              \"rightValue\": \"\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"f6c17549-4192-4f96-ad81-518c52bdcda7\",\n      \"name\": \"Sticky Note4\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -540,\n        -40\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 360.408084305475,\n        \"height\": 315.5897364788551,\n        \"content\": \"## Shopify API\\n\\n该工作流通过GraphQL调用Shopify Admin API实现。如需深入了解查询与变更操作，请查阅官方API文档。\\n\\n[Shopify GraphQL API文档](https://shopify.dev/docs/api/admin-graphql)\\n\\n为简化GraphQL API查询构建流程，推荐使用Shopify官方提供的[Admin API图形化查询工具GraphiQL](https://shopify.dev/docs/apps/tools/graphiql-admin-api)\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"22743217-0c89-4fd1-b22d-0e00d6ca6854\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        560,\n        -300\n      ],\n      \"parameters\": {\n        \"width\": 331.1188177339898,\n        \"content\": \"## Shopify  \\n由于n8n的Shopify节点无法上传图片或主题资源，我们需要通过GraphQL和REST API进行自定义调用。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"ca9561aa-85e8-47ad-8bac-60fc3a94f94e\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        80,\n        -160\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 158.16682590559316,\n        \"content\": \"## 设置数值\\n请编辑此节点并更改数值以适配您的个人配置。\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"active\": true,\n  \"pinData\": {\n    \"Call from Baserow\": [\n      {\n        \"json\": {\n          \"body\": {\n            \"items\": [\n              {\n                \"id\": 1,\n                \"Name\": \"Campaigna\",\n                \"order\": \"1.00000000000000000000\",\n                \"Active\": true,\n                \"Last modified\": \"2024-03-01T11:21:58.157987Z\",\n                \"Campaign Image\": [\n                  {\n                    \"url\": \"https://br.m3tam3re.com/media/user_files/O5jM7aSUTYSBPQtxVHktkN4U7wlUoIJd_1af752d7847a230a853df92814639be35035229f2bb857b4ea870b64011cdde0.webp\",\n                    \"name\": \"O5jM7aSUTYSBPQtxVHktkN4U7wlUoIJd_1af752d7847a230a853df92814639be35035229f2bb857b4ea870b64011cdde0.webp\",\n                    \"size\": 107358,\n                    \"is_image\": true,\n                    \"mime_type\": \"\",\n                    \"thumbnails\": {\n                      \"tiny\": {\n                        \"url\": \"https://br.m3tam3re.com/media/thumbnails/tiny/O5jM7aSUTYSBPQtxVHktkN4U7wlUoIJd_1af752d7847a230a853df92814639be35035229f2bb857b4ea870b64011cdde0.webp\",\n                        \"width\": null,\n                        \"height\": 21\n                      },\n                      \"small\": {\n                        \"url\": \"https://br.m3tam3re.com/media/thumbnails/small/O5jM7aSUTYSBPQtxVHktkN4U7wlUoIJd_1af752d7847a230a853df92814639be35035229f2bb857b4ea870b64011cdde0.webp\",\n                        \"width\": 48,\n                        \"height\": 48\n                      },\n                      \"card_cover\": {\n                        \"url\": \"https://br.m3tam3re.com/media/thumbnails/card_cover/O5jM7aSUTYSBPQtxVHktkN4U7wlUoIJd_1af752d7847a230a853df92814639be35035229f2bb857b4ea870b64011cdde0.webp\",\n                        \"width\": 300,\n                        \"height\": 160\n                      }\n                    },\n                    \"image_width\": 1280,\n                    \"uploaded_at\": \"2024-03-01T09:50:41.921452+00:00\",\n                    \"image_height\": 720,\n                    \"visible_name\": \"n8n-portainer.webp\"\n                  }\n                ]\n              }\n            ],\n            \"event_id\": \"dae85cec-94ce-4e6c-8091-fce28bdc4c6c\",\n            \"table_id\": 596,\n            \"old_items\": [\n              {\n                \"id\": 1,\n                \"Name\": \"Campaignas\",\n                \"order\": \"1.00000000000000000000\",\n                \"Active\": true,\n                \"Last modified\": \"2024-03-01T11:21:16.099694Z\",\n                \"Campaign Image\": [\n                  {\n                    \"url\": \"https://br.m3tam3re.com/media/user_files/O5jM7aSUTYSBPQtxVHktkN4U7wlUoIJd_1af752d7847a230a853df92814639be35035229f2bb857b4ea870b64011cdde0.webp\",\n                    \"name\": \"O5jM7aSUTYSBPQtxVHktkN4U7wlUoIJd_1af752d7847a230a853df92814639be35035229f2bb857b4ea870b64011cdde0.webp\",\n                    \"size\": 107358,\n                    \"is_image\": true,\n                    \"mime_type\": \"\",\n                    \"thumbnails\": {\n                      \"tiny\": {\n                        \"url\": \"https://br.m3tam3re.com/media/thumbnails/tiny/O5jM7aSUTYSBPQtxVHktkN4U7wlUoIJd_1af752d7847a230a853df92814639be35035229f2bb857b4ea870b64011cdde0.webp\",\n                        \"width\": null,\n                        \"height\": 21\n                      },\n                      \"small\": {\n                        \"url\": \"https://br.m3tam3re.com/media/thumbnails/small/O5jM7aSUTYSBPQtxVHktkN4U7wlUoIJd_1af752d7847a230a853df92814639be35035229f2bb857b4ea870b64011cdde0.webp\",\n                        \"width\": 48,\n                        \"height\": 48\n                      },\n                      \"card_cover\": {\n                        \"url\": \"https://br.m3tam3re.com/media/thumbnails/card_cover/O5jM7aSUTYSBPQtxVHktkN4U7wlUoIJd_1af752d7847a230a853df92814639be35035229f2bb857b4ea870b64011cdde0.webp\",\n                        \"width\": 300,\n                        \"height\": 160\n                      }\n                    },\n                    \"image_width\": 1280,\n                    \"uploaded_at\": \"2024-03-01T09:50:41.921452+00:00\",\n                    \"image_height\": 720,\n                    \"visible_name\": \"n8n-portainer.webp\"\n                  }\n                ]\n              }\n            ],\n            \"event_type\": \"rows.updated\",\n            \"database_id\": 112,\n            \"workspace_id\": 108\n          },\n          \"query\": {},\n          \"params\": {},\n          \"headers\": {\n            \"host\": \"n8n.m3tam3re.com\",\n            \"accept\": \"*/*\",\n            \"user-agent\": \"python-requests/2.31.0\",\n            \"content-type\": \"application/json\",\n            \"content-length\": \"2617\",\n            \"accept-encoding\": \"gzip, deflate, br\",\n            \"x-baserow-event\": \"rows.updated\",\n            \"x-forwarded-for\": \"202.61.226.110\",\n            \"x-forwarded-host\": \"n8n.m3tam3re.com\",\n            \"x-forwarded-proto\": \"https\",\n            \"x-baserow-delivery\": \"dae85cec-94ce-4e6c-8091-fce28bdc4c6c\"\n          }\n        }\n      }\n    ]\n  },\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"c82b43c0-aa47-4086-b7ae-588ee12e5e24\",\n  \"connections\": {\n    \"Check\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Upload Image\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"No Operation, do nothing\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Upload Image\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Save campaign.liquid\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Set values here!\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Check\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Call from Baserow\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set values here!\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}