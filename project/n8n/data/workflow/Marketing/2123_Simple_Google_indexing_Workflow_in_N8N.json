{
  "title": "Simple Google indexing Workflow in N8N",
  "url": "https://n8n.io/workflows/2123-simple-google-indexing-workflow-in-n8n/",
  "category": "Marketing",
  "category_url": "https://n8n.io/workflows/categories/marketing/?sort=createdAt:desc",
  "author": "Joachim Brindeau",
  "publish_date": "Last update a year ago",
  "publish_date_absolute": "",
  "content": "",
  "workflow_json": "{\"meta\":{\"instanceId\":\"2edac0e72822bb0462c05ce3b5a939f685ded652d02e9a767d1afa775988460e\"},\"nodes\":[{\"id\":\"0788a3db-20c3-43b6-956a-394f688f7763\",\"name\":\"When clicking \\\"Execute Workflow\\\"\",\"type\":\"n8n-nodes-base.manualTrigger\",\"position\":[360,440],\"parameters\":{},\"typeVersion\":1},{\"id\":\"51460fab-a53c-46cd-a484-d2c038cd102d\",\"name\":\"Schedule Trigger\",\"type\":\"n8n-nodes-base.scheduleTrigger\",\"position\":[360,600],\"parameters\":{\"rule\":{\"interval\":[{\"triggerAtHour\":1}]}},\"typeVersion\":1},{\"id\":\"5326416c-5715-4cc7-acfd-38a32f864bfb\",\"name\":\"loop\",\"type\":\"n8n-nodes-base.splitInBatches\",\"position\":[1360,600],\"parameters\":{\"options\":{},\"batchSize\":1},\"typeVersion\":2},{\"id\":\"fb0ca9f7-ff49-4a4b-9575-42b80594737e\",\"name\":\"sitemap_set\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[540,600],\"parameters\":{\"url\":\"https://bushidogym.fr/sitemap.xml\",\"options\":{}},\"typeVersion\":4.1},{\"id\":\"150b47fe-f1c8-4dcb-b187-b459ee50c316\",\"name\":\"sitemap_convert\",\"type\":\"n8n-nodes-base.xml\",\"position\":[700,600],\"parameters\":{\"options\":{\"trim\":true,\"normalize\":true,\"mergeAttrs\":true,\"ignoreAttrs\":true,\"normalizeTags\":true}},\"typeVersion\":1},{\"id\":\"83cd19d6-81e7-46af-83a3-090cdd66b420\",\"name\":\"sitemap_parse\",\"type\":\"n8n-nodes-base.splitOut\",\"position\":[920,600],\"parameters\":{\"options\":{\"destinationFieldName\":\"url\"},\"fieldToSplitOut\":\"urlset.url\"},\"typeVersion\":1},{\"id\":\"95c784d1-5756-4bf0-b2e5-e25a84c01b72\",\"name\":\"url_set\",\"type\":\"n8n-nodes-base.set\",\"position\":[1140,600],\"parameters\":{\"values\":{\"string\":[{\"name\":\"url\",\"value\":\"={{ $json.url.loc }}\"}]},\"options\":{},\"keepOnlySet\":true},\"typeVersion\":2},{\"id\":\"43b62667-a37e-4bd1-bbb9-7a20a0914c97\",\"name\":\"url_index\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[1560,580],\"parameters\":{\"url\":\"https://indexing.googleapis.com/v3/urlNotifications:publish\",\"method\":\"POST\",\"options\":{},\"sendBody\":true,\"authentication\":\"predefinedCredentialType\",\"bodyParameters\":{\"parameters\":[{\"name\":\"url\",\"value\":\"={{ $json.url }}\"},{\"name\":\"type\",\"value\":\"URL_UPDATED\"}]},\"nodeCredentialType\":\"googleApi\"},\"credentials\":{\"googleApi\":{\"id\":\"RywvL8c7V2ZtBvdK\",\"name\":\"850737154850-compute@developer.gserviceaccount.com\"}},\"typeVersion\":4,\"continueOnFail\":true,\"alwaysOutputData\":true},{\"id\":\"39ae8c01-64e4-44f5-be43-d5c402b00739\",\"name\":\"index_check\",\"type\":\"n8n-nodes-base.if\",\"position\":[1780,580],\"parameters\":{\"conditions\":{\"string\":[{\"value1\":\"={{ $json.urlNotificationMetadata.latestUpdate.type }}\",\"value2\":\"URL_UPDATED\"}]}},\"typeVersion\":1},{\"id\":\"c4bf483b-af4b-451e-974b-d4abeb2c70f6\",\"name\":\"wait\",\"type\":\"n8n-nodes-base.wait\",\"position\":[2040,560],\"webhookId\":\"b0df1fe8-e509-4d0c-a486-f523226621e2\",\"parameters\":{\"unit\":\"seconds\",\"amount\":2},\"typeVersion\":1},{\"id\":\"455955a8-c767-453b-805c-77c5b7d2e9bc\",\"name\":\"Stop and Error\",\"type\":\"n8n-nodes-base.stopAndError\",\"position\":[2040,840],\"parameters\":{\"errorMessage\":\"You have reached the Google Indexing API limit (200/day by default)\"},\"typeVersion\":1},{\"id\":\"275abdd5-be5d-458f-bc75-d9f72824c49f\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[340,180],\"parameters\":{\"width\":482.7089688834655,\"height\":221.39109212934721,\"content\":\"## Simple indexing workflow using the Google Indexing API\\n\\nThis workflow is the simplest indexing workflow. It simply extracts a sitemap, converts it to a JSON, and loops through each URL. It will output an error if your quota is reached.\\n\\n*Joachim*\"},\"typeVersion\":1}],\"pinData\":{},\"connections\":{\"loop\":{\"main\":[[{\"node\":\"url_index\",\"type\":\"main\",\"index\":0}]]},\"wait\":{\"main\":[[{\"node\":\"loop\",\"type\":\"main\",\"index\":0}]]},\"url_set\":{\"main\":[[{\"node\":\"loop\",\"type\":\"main\",\"index\":0}]]},\"url_index\":{\"main\":[[{\"node\":\"index_check\",\"type\":\"main\",\"index\":0}]]},\"index_check\":{\"main\":[[{\"node\":\"wait\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Stop and Error\",\"type\":\"main\",\"index\":0}]]},\"sitemap_set\":{\"main\":[[{\"node\":\"sitemap_convert\",\"type\":\"main\",\"index\":0}]]},\"sitemap_parse\":{\"main\":[[{\"node\":\"url_set\",\"type\":\"main\",\"index\":0}]]},\"sitemap_convert\":{\"main\":[[{\"node\":\"sitemap_parse\",\"type\":\"main\",\"index\":0}]]},\"Schedule Trigger\":{\"main\":[[{\"node\":\"sitemap_set\",\"type\":\"main\",\"index\":0}]]},\"When clicking \\\"Execute Workflow\\\"\":{\"main\":[[{\"node\":\"sitemap_set\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "# What it does\n\nThe workflow is a simple yet efficient way to automate the process of indexing your website on Google using the Google Indexing API.\n\n# How it works\n\nIt works by extracting information from your sitemap, converting it into a JSON file, and looping through each URL to submit it for indexing.\n\nHere's a brief rundown of the workflow:\n\n  1. The workflow can be triggered manually via the \"Execute Workflow\" button or scheduled to run at a specific time using the \"Schedule Trigger\" node.\n\n  2. The sitemap of your website is fetched using the \"sitemap_set\" node with a HTTP Request to the sitemap URL.\n\n  3. This XML sitemap is then converted into a JSON file using the \"sitemap_convert\" node.\n\n  4. The \"sitemap_parse\" node splits the JSON file into individual URLs.\n\n  5. The \"url_set\" node then prepares each URL to be sent to the Google Indexing API.\n\n  6. A loop is created using the \"loop\" node to process each URL individually and make a POST request to Google Indexing API indicating that the URL has been updated.\n\n  7. If the POST request is successful and the URL has been updated, the workflow waits for 2 seconds before moving to the next URL.\n\n  8. In case the daily limit for the Google Indexing API is reached (200/day by default), an error message is triggered using the \"Stop and Error\" node.\n\n\n\n\n# Before you use the workflow\n\n## Activate the indexing API\n\n  * Create an account with Google Cloud Platform > Console and then create a new project\n  * Search for the Indexing API in the Library\n  * Activate the API\n\n\n\n## Create a Service Account and get credentials\n\n  * Open the Service accounts page. If prompted, select a project.\n  * Click add Create Service Account, enter a name and description for the service account. You can use the default service account ID, or choose a different, unique one.\n  * When done click Create.\n  * On the Grant users access to this service account screen, scroll down to the Create key section. Click add Create key.\n  * In the side panel that appears, select the JSON format\n  * Click Create. Your new public/private key pair is generated and downloaded to your machine.\n  * Open the file and copy the private key.\n  * Add the credentials in the url_index node\n\n\n\n![image.png](https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/image_75adc356e3.png)\n\n## Add the user as owner of the site\n\nBeware, for each site you need to add the user as a owner like this:\n\n![image.png](https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/image_cde98b3370.png)\n\n## Set your sitemap\n\n  * Open the sitemap_set node and add the url to your sitemap.\n\n\n\n* * *\n\n_Now you should be able to ensure that Google is always up-to-date with the latest content on your website, improving your website's visibility and SEO rankings, have fun!_\n",
  "readme_html": "<!--[--><div data-v-50766329=\"\"><h1>What it does</h1>\n<p>The workflow is a simple yet efficient way to automate the process of indexing your website on Google using the Google Indexing API.</p>\n<h1>How it works</h1>\n<p>It works by extracting information from your sitemap, converting it into a JSON file, and looping through each URL to submit it for indexing.</p>\n<p>Here's a brief rundown of the workflow:</p>\n<ol>\n<li>\n<p>The workflow can be triggered manually via the \"Execute Workflow\" button or scheduled to run at a specific time using the \"Schedule Trigger\" node.</p>\n</li>\n<li>\n<p>The sitemap of your website is fetched using the \"sitemap_set\" node with a HTTP Request to the sitemap URL.</p>\n</li>\n<li>\n<p>This XML sitemap is then converted into a JSON file using the \"sitemap_convert\" node.</p>\n</li>\n<li>\n<p>The \"sitemap_parse\" node splits the JSON file into individual URLs.</p>\n</li>\n<li>\n<p>The \"url_set\" node then prepares each URL to be sent to the Google Indexing API.</p>\n</li>\n<li>\n<p>A loop is created using the \"loop\" node to process each URL individually and make a POST request to Google Indexing API indicating that the URL has been updated.</p>\n</li>\n<li>\n<p>If the POST request is successful and the URL has been updated, the workflow waits for 2 seconds before moving to the next URL.</p>\n</li>\n<li>\n<p>In case the daily limit for the Google Indexing API is reached (200/day by default), an error message is triggered using the \"Stop and Error\" node.</p>\n</li>\n</ol>\n<h1>Before you use the workflow</h1>\n<h2>Activate the indexing API</h2>\n<ul>\n<li>Create an account with Google Cloud Platform &gt; Console and then create a new project</li>\n<li>Search for the Indexing API in the Library</li>\n<li>Activate the API</li>\n</ul>\n<h2>Create a Service Account and get credentials</h2>\n<ul>\n<li>Open the Service accounts page. If prompted, select a project.</li>\n<li>Click add Create Service Account, enter a name and description for the service account. You can use the default service account ID, or choose a different, unique one.</li>\n<li>When done click Create.</li>\n<li>On the Grant users access to this service account screen, scroll down to the Create key section. Click add Create key.</li>\n<li>In the side panel that appears, select the JSON format</li>\n<li>Click Create. Your new public/private key pair is generated and downloaded to your machine.</li>\n<li>Open the file and copy the private key.</li>\n<li>Add the credentials in the url_index node</li>\n</ul>\n<p><img src=\"https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/image_75adc356e3.png\" alt=\"image.png\"></p>\n<h2>Add the user as owner of the site</h2>\n<p>Beware, for each site you need to add the user as a owner like this:</p>\n<p><img src=\"https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/image_cde98b3370.png\" alt=\"image.png\"></p>\n<h2>Set your sitemap</h2>\n<ul>\n<li>Open the sitemap_set node and add the url to your sitemap.</li>\n</ul>\n<hr>\n<p><em>Now you should be able to ensure that Google is always up-to-date with the latest content on your website, improving your website's visibility and SEO rankings, have fun!</em></p>\n</div><!--]-->",
  "readme_zh": "# 功能说明\n\n该工作流通过Google索引API实现网站内容自动提交索引，是一个简单高效的自动化解决方案。\n\n# 运行原理\n\n工作流通过提取网站地图信息，将其转换为JSON格式文件，并逐个提交URL至索引系统。\n\n工作流程概览：\n1. 可通过\"执行工作流\"按钮手动触发，或使用\"定时触发器\"节点设置自动运行\n2. \"sitemap_set\"节点通过HTTP请求获取网站地图\n3. \"sitemap_convert\"节点将XML格式的网站地图转换为JSON文件\n4. \"sitemap_parse\"节点将JSON文件拆分为独立URL\n5. \"url_set\"节点为每个URL适配Google索引API格式\n6. \"loop\"节点构建循环，逐个向Google索引API发送POST更新请求\n7. 每次成功提交后，系统暂停2秒再处理下一个URL\n8. 若达到API每日限额（默认200次/日），\"停止报错\"节点将触发错误提示\n\n# 使用前准备\n\n## 启用索引API\n• 登录Google云平台控制台创建新项目\n• 在API库中搜索并启用索引API\n\n## 创建服务账号获取凭证\n• 访问服务账号页面（需选择项目）\n• 点击创建服务账号，填写名称和描述（可使用默认ID或自定义）\n• 创建完成后，在权限授予页面找到\"创建密钥\"区域\n• 选择JSON格式生成密钥对并下载\n• 打开密钥文件复制私钥内容\n• 将凭证粘贴至url_index节点\n\n![服务账号创建图示](https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/image_75adc356e3.png)\n\n## 添加网站所有权验证\n注意：每个网站都需按此方式添加所有权验证：\n![所有权验证图示](https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/image_cde98b3370.png)\n\n## 设置网站地图\n• 在sitemap_set节点中输入您的网站地图URL\n\n* * *\n_现在您可以确保Google始终索引网站最新内容，有效提升网站能见度和SEO排名，祝使用愉快！_",
  "title_zh": "N8N中简单的Google索引工作流程",
  "publish_date_zh": "最后一次更新于一年前",
  "workflow_json_zh": "{\"meta\":{\"instanceId\":\"2edac0e72822bb0462c05ce3b5a939f685ded652d02e9a767d1afa775988460e\"},\"nodes\":[{\"id\":\"0788a3db-20c3-43b6-956a-394f688f7763\",\"name\":\"When clicking \\\"Execute Workflow\\\"\",\"type\":\"n8n-nodes-base.manualTrigger\",\"position\":[360,440],\"parameters\":{},\"typeVersion\":1},{\"id\":\"51460fab-a53c-46cd-a484-d2c038cd102d\",\"name\":\"Schedule Trigger\",\"type\":\"n8n-nodes-base.scheduleTrigger\",\"position\":[360,600],\"parameters\":{\"rule\":{\"interval\":[{\"triggerAtHour\":1}]}},\"typeVersion\":1},{\"id\":\"5326416c-5715-4cc7-acfd-38a32f864bfb\",\"name\":\"loop\",\"type\":\"n8n-nodes-base.splitInBatches\",\"position\":[1360,600],\"parameters\":{\"options\":{},\"batchSize\":1},\"typeVersion\":2},{\"id\":\"fb0ca9f7-ff49-4a4b-9575-42b80594737e\",\"name\":\"sitemap_set\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[540,600],\"parameters\":{\"url\":\"https://bushidogym.fr/sitemap.xml\",\"options\":{}},\"typeVersion\":4.1},{\"id\":\"150b47fe-f1c8-4dcb-b187-b459ee50c316\",\"name\":\"sitemap_convert\",\"type\":\"n8n-nodes-base.xml\",\"position\":[700,600],\"parameters\":{\"options\":{\"trim\":true,\"normalize\":true,\"mergeAttrs\":true,\"ignoreAttrs\":true,\"normalizeTags\":true}},\"typeVersion\":1},{\"id\":\"83cd19d6-81e7-46af-83a3-090cdd66b420\",\"name\":\"sitemap_parse\",\"type\":\"n8n-nodes-base.splitOut\",\"position\":[920,600],\"parameters\":{\"options\":{\"destinationFieldName\":\"url\"},\"fieldToSplitOut\":\"urlset.url\"},\"typeVersion\":1},{\"id\":\"95c784d1-5756-4bf0-b2e5-e25a84c01b72\",\"name\":\"url_set\",\"type\":\"n8n-nodes-base.set\",\"position\":[1140,600],\"parameters\":{\"values\":{\"string\":[{\"name\":\"url\",\"value\":\"={{ $json.url.loc }}\"}]},\"options\":{},\"keepOnlySet\":true},\"typeVersion\":2},{\"id\":\"43b62667-a37e-4bd1-bbb9-7a20a0914c97\",\"name\":\"url_index\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[1560,580],\"parameters\":{\"url\":\"https://indexing.googleapis.com/v3/urlNotifications:publish\",\"method\":\"POST\",\"options\":{},\"sendBody\":true,\"authentication\":\"predefinedCredentialType\",\"bodyParameters\":{\"parameters\":[{\"name\":\"url\",\"value\":\"={{ $json.url }}\"},{\"name\":\"type\",\"value\":\"URL_UPDATED\"}]},\"nodeCredentialType\":\"googleApi\"},\"credentials\":{\"googleApi\":{\"id\":\"RywvL8c7V2ZtBvdK\",\"name\":\"850737154850-compute@developer.gserviceaccount.com\"}},\"typeVersion\":4,\"continueOnFail\":true,\"alwaysOutputData\":true},{\"id\":\"39ae8c01-64e4-44f5-be43-d5c402b00739\",\"name\":\"index_check\",\"type\":\"n8n-nodes-base.if\",\"position\":[1780,580],\"parameters\":{\"conditions\":{\"string\":[{\"value1\":\"={{ $json.urlNotificationMetadata.latestUpdate.type }}\",\"value2\":\"URL_UPDATED\"}]}},\"typeVersion\":1},{\"id\":\"c4bf483b-af4b-451e-974b-d4abeb2c70f6\",\"name\":\"wait\",\"type\":\"n8n-nodes-base.wait\",\"position\":[2040,560],\"webhookId\":\"b0df1fe8-e509-4d0c-a486-f523226621e2\",\"parameters\":{\"unit\":\"seconds\",\"amount\":2},\"typeVersion\":1},{\"id\":\"455955a8-c767-453b-805c-77c5b7d2e9bc\",\"name\":\"Stop and Error\",\"type\":\"n8n-nodes-base.stopAndError\",\"position\":[2040,840],\"parameters\":{\"errorMessage\":\"You have reached the Google Indexing API limit (200/day by default)\"},\"typeVersion\":1},{\"id\":\"275abdd5-be5d-458f-bc75-d9f72824c49f\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[340,180],\"parameters\":{\"width\":482.7089688834655,\"height\":221.39109212934721,\"content\":\"## 使用Google索引API的简单索引工作流程\\n\\n此工作流程是最基础的索引操作流程。它仅需提取站点地图、将其转换为JSON格式，并遍历每个URL。当达到配额限制时，系统会输出错误提示。\\n\\n*约阿希姆*\"},\"typeVersion\":1}],\"pinData\":{},\"connections\":{\"loop\":{\"main\":[[{\"node\":\"url_index\",\"type\":\"main\",\"index\":0}]]},\"wait\":{\"main\":[[{\"node\":\"loop\",\"type\":\"main\",\"index\":0}]]},\"url_set\":{\"main\":[[{\"node\":\"loop\",\"type\":\"main\",\"index\":0}]]},\"url_index\":{\"main\":[[{\"node\":\"index_check\",\"type\":\"main\",\"index\":0}]]},\"index_check\":{\"main\":[[{\"node\":\"wait\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Stop and Error\",\"type\":\"main\",\"index\":0}]]},\"sitemap_set\":{\"main\":[[{\"node\":\"sitemap_convert\",\"type\":\"main\",\"index\":0}]]},\"sitemap_parse\":{\"main\":[[{\"node\":\"url_set\",\"type\":\"main\",\"index\":0}]]},\"sitemap_convert\":{\"main\":[[{\"node\":\"sitemap_parse\",\"type\":\"main\",\"index\":0}]]},\"Schedule Trigger\":{\"main\":[[{\"node\":\"sitemap_set\",\"type\":\"main\",\"index\":0}]]},\"When clicking \\\"Execute Workflow\\\"\":{\"main\":[[{\"node\":\"sitemap_set\",\"type\":\"main\",\"index\":0}]]}}}"
}