{
  "title": "Generate Graphic Wallpaper with Midjourney, GPT-4o-mini and Canvas APIs",
  "url": "https://n8n.io/workflows/3627-generate-graphic-wallpaper-with-midjourney-gpt-4o-mini-and-canvas-apis/",
  "category": "Design",
  "category_url": "https://n8n.io/workflows/categories/design/?count=20",
  "author": "PiAPI",
  "publish_date": "Last update 5 days ago",
  "publish_date_absolute": "2025-04-24",
  "content": "",
  "workflow_json": "{\"id\":\"mN7jDJoWHtJuyKpS\",\"meta\":{\"instanceId\":\"1e003a7ea4715b6b35e9947791386a7d07edf3b5bf8d4c9b7ee4fdcbec0447d7\"},\"name\":\"Generate Graphic Wallpaper with Midjourney, GPT-4o-mini and Canvas APIs\",\"tags\":[],\"nodes\":[{\"id\":\"11cef766-dd10-46ea-98cf-11eb8d95e157\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[280,80],\"parameters\":{\"width\":520,\"height\":200,\"content\":\"## Generate Graphic Wallpaper with Midjourney, GPT-4o-mini and Canvas APIs\\nWe design this workflow with PiAPI APIs and Canvas API with the purpose to  produce a visually compelling image with resonant copy to spark emotional connection. ğŸ™Œ \\nWish you make a fantastic generation with our workflow! \"},\"typeVersion\":1},{\"id\":\"ba7143d7-442d-4153-9cfd-bb36448d4c91\",\"name\":\"Midjourney Generator\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[1200,320],\"parameters\":{\"url\":\"https://api.piapi.ai/api/v1/task\",\"method\":\"POST\",\"options\":{},\"jsonBody\":\"={\\n  \\\"model\\\": \\\"midjourney\\\",\\n  \\\"task_type\\\": \\\"imagine\\\",\\n  \\\"input\\\": {\\n    \\\"prompt\\\": \\\"{{ $json.prompt }}\\\",\\n    \\\"aspect_ratio\\\": \\\"1:1\\\",\\n    \\\"process_mode\\\": \\\"turbo\\\",\\n    \\\"skip_prompt_check\\\": false\\n  }\\n}\",\"sendBody\":true,\"sendHeaders\":true,\"specifyBody\":\"json\",\"headerParameters\":{\"parameters\":[{\"name\":\"x-api-key\",\"value\":\"={{ $('Basic Params').item.json['x-api-key'] }}\"}]}},\"typeVersion\":4.2},{\"id\":\"117b5929-e98c-456a-9bfd-fe1deee77abc\",\"name\":\"When clicking Test workflow\",\"type\":\"n8n-nodes-base.manualTrigger\",\"position\":[300,320],\"parameters\":{},\"typeVersion\":1},{\"id\":\"dfcf5c57-536c-4fb4-967b-24fd375db57c\",\"name\":\"Get Prompt\",\"type\":\"n8n-nodes-base.code\",\"position\":[960,320],\"parameters\":{\"jsCode\":\"const image_prompt=$('Basic Params').first().json.image_prompt;\\nconst show_prompt =$input.first().json.choices[0].message.content;\\n\\nconst prompt = image_prompt.replace(/'xxx'/, `'${show_prompt}'`)\\nreturn {show_prompt,prompt};\"},\"typeVersion\":2},{\"id\":\"1c641437-de26-4e55-9b34-0cb13d8d1cd3\",\"name\":\"Get Midjourney Task\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[1140,580],\"parameters\":{\"url\":\"=https://api.piapi.ai/api/v1/task/{{ $json.data.task_id }}\",\"options\":{},\"sendHeaders\":true,\"headerParameters\":{\"parameters\":[{\"name\":\"x-api-key\",\"value\":\"={{ $('Basic Params').item.json['x-api-key'] }}\"}]}},\"typeVersion\":4.2},{\"id\":\"38fda20c-fef6-484c-ac75-c8f2fbaaca15\",\"name\":\"Wait for Midjourney Generation\",\"type\":\"n8n-nodes-base.wait\",\"position\":[940,580],\"webhookId\":\"af79053d-1291-4dd2-889e-4593dbbb2512\",\"parameters\":{},\"typeVersion\":1.1},{\"id\":\"1d5eaf9a-caf8-4b08-a35c-281b400c9198\",\"name\":\"Determine Whether the Image URL was Fetched\",\"type\":\"n8n-nodes-base.if\",\"position\":[1340,580],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"or\",\"conditions\":[{\"id\":\"e97a02cc-8d1d-4500-bce5-0a296c792b76\",\"operator\":{\"name\":\"filter.operator.equals\",\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"={{ $json.data.status }}\",\"rightValue\":\"completed\"},{\"id\":\"50b63a7a-52b5-4766-a859-96ac1ff949ec\",\"operator\":{\"name\":\"filter.operator.equals\",\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"={{ $json.data.status }}\",\"rightValue\":\"failed\"}]}},\"typeVersion\":2.2},{\"id\":\"983acf91-c5ba-4335-b43e-d7a8a1a6b918\",\"name\":\"Check Image  Generation Status\",\"type\":\"n8n-nodes-base.switch\",\"position\":[1520,320],\"parameters\":{\"rules\":{\"values\":[{\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"5f61ee56-4ebe-411f-95e6-b47d9741e7a2\",\"operator\":{\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"={{ $json.data.status }}\",\"rightValue\":\"completed\"}]}}]},\"options\":{}},\"typeVersion\":3.2},{\"id\":\"50455a13-5914-4f96-b977-d1c6461807bc\",\"name\":\"Design in Canvas\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[1920,320],\"parameters\":{\"url\":\"https://api.canvas.switchboard.ai\",\"method\":\"POST\",\"options\":{},\"jsonBody\":\"={\\n    \\\"template\\\": \\\"social-3-1\\\",\\n    \\\"sizes\\\": [\\n        {\\n         \\\"width\\\": 1000,\\n         \\\"height\\\": 1500\\n        }\\n    ],\\n    \\\"elements\\\": {\\n        \\\"text1\\\": {\\n            \\\"text\\\": \\\"{{ $('Get Prompt').item.json.show_prompt.replace(/;/g, \\\";\\\\\\\\n \\\")}}\\\"\\n        },\\n         \\\"rectangle1\\\": {\\n                 \\\"fillColor\\\": \\\"#fff\\\"\\n             },\\n        \\\"image1\\\": {\\n            \\\"url\\\": \\\"{{ $json.data.output.temporary_image_urls[0] }}\\\"\\n        }\\n    }\\n}\",\"sendBody\":true,\"sendHeaders\":true,\"specifyBody\":\"json\",\"headerParameters\":{\"parameters\":[{\"name\":\"X-API-Key\",\"value\":\"45ba3916-2f10-497d-815b-7ffc9b69001f\"}]}},\"typeVersion\":4.2},{\"id\":\"0fd5d40c-aebc-4ec3-b9b5-027126b39452\",\"name\":\"Get Image Url\",\"type\":\"n8n-nodes-base.set\",\"position\":[1720,320],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"d52d19d1-3a37-47bb-ad23-e809323c0c54\",\"name\":\"data.output.temporary_image_urls\",\"type\":\"array\",\"value\":\"={{ $json.data.output.temporary_image_urls }}\"},{\"id\":\"49bed53e-675d-4ea0-947c-ffcbfae0ee97\",\"name\":\"data.output.image_url\",\"type\":\"string\",\"value\":\"={{ $json.data.output.image_url }}\"}]}},\"typeVersion\":3.4},{\"id\":\"e36d4bd6-2d34-447c-984e-515c48f3632e\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[280,500],\"parameters\":{\"width\":580,\"height\":280,\"content\":\"## Basic Params\\nIn **Basic Params** node, you need to fill in your PiAPI key which you could check in [My Account](https://piapi.ai/workspace/my-account) on [PiAPI](https://piapi.ai). Other information you need to provide is listed as followğŸ“: \\n1. Theme. The theme refers to the topic that you want to talk about when you start your generation.\\n2. Scenario. The scenario text usually describe your status about your feeling.\\n3. Style. The style of the image.\\n4. Example. The text example shown to LLM to describe a style t you want to generate.\\n5. Image prompt. Image prompt is usually about the context of the image that you want to generate.\"},\"typeVersion\":1},{\"id\":\"1e04fe5d-a1f4-4fe9-a3d2-9c6aeaf05d96\",\"name\":\"Gpt-4o-mini API\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[740,320],\"parameters\":{\"url\":\"https://api.piapi.ai/v1/chat/completions\",\"method\":\"POST\",\"options\":{},\"jsonBody\":\"={\\n    \\\"model\\\": \\\"gpt-4o-mini\\\",\\n    \\\"messages\\\": [\\n       {\\n          \\\"role\\\": \\\"system\\\",\\n          \\\"content\\\": \\\"You are a helpful assistant.\\\"\\n        },\\n        {\\n          \\\"role\\\": \\\"user\\\",\\n          \\\"content\\\": \\\"Please {{ $json.style }}, based on the theme of {{ $json.theme }} and the scenario of {{ $json.scenario }}, according to the output case and language context. Examples are  {{ $json.example }},Return a sentence directly, nothing else,Don't add a serial number, just a prompt that can be used for input,Do not add any quotation marks.\\\"}\\n      ]\\n  }\",\"sendBody\":true,\"sendHeaders\":true,\"specifyBody\":\"json\",\"headerParameters\":{\"parameters\":[{\"name\":\"Authorization\",\"value\":\"=Bearer {{ $('Basic Params').first().json['x-api-key'] }}\"}]}},\"typeVersion\":4.2},{\"id\":\"4eaf0f57-9458-42cb-b736-c737f134320b\",\"name\":\"Basic Params\",\"type\":\"n8n-nodes-base.set\",\"position\":[540,320],\"parameters\":{\"mode\":\"raw\",\"options\":{},\"jsonOutput\":\"{\\n  \\\"x-api-key\\\":\\\"\\\",\\n  \\\"theme\\\": \\\"Hope\\\",\\n  \\\"scenario\\\": \\\"Don't know about the future, confused and feel lost about AI agent\\\",\\n  \\\"style\\\":\\\"Cinematic Grandeur,Sci-Tech Aesthetic, 3D style\\\",\\n  \\\"example\\\":\\\"1. March. Because of your faith, it will happen.2. Something in me will save me.3. To everyone carrying a heavy heart in silence. You are going to be okay.4. Tomorrow will be better.\\\",\\n  \\\"image_prompt\\\":\\\"A cinematic sci-fi metropolis where Deep Neural Nets control a hyper-connected society. Holographic interfaces glow in the air as robotic agents move among humans, symbolizing Industry 4.0. The scene contrasts organic human emotion with cold machine precision, rendered in a hyper-realistic 3D style with futuristic lighting. Epic wide shots showcase the grandeur of this civilizationâ€™s industrial evolution.\\\"\\n}\\n\"},\"typeVersion\":3.4},{\"id\":\"6750b606-4222-4cda-bcaa-5d4f2b4f9ec8\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1680,560],\"parameters\":{\"width\":380,\"height\":200,\"content\":\"## Design in Canvas API Node\\nWe make a final design with Canvas API. \\nYou could check the node code to make a template design more efficiently in Canvas.\\nAlso you could make various artworks with template library in Canvas. \\nYou could modify node parameters to or add more nodes to make more artworks in one role.\"},\"typeVersion\":1}],\"active\":false,\"pinData\":{},\"settings\":{\"executionOrder\":\"v1\"},\"versionId\":\"09b5a8e6-bdc8-47bb-a9e3-95b090ff3f13\",\"connections\":{\"Get Prompt\":{\"main\":[[{\"node\":\"Midjourney Generator\",\"type\":\"main\",\"index\":0}]]},\"Basic Params\":{\"main\":[[{\"node\":\"Gpt-4o-mini API\",\"type\":\"main\",\"index\":0}]]},\"Get Image Url\":{\"main\":[[{\"node\":\"Design in Canvas\",\"type\":\"main\",\"index\":0}]]},\"Gpt-4o-mini API\":{\"main\":[[{\"node\":\"Get Prompt\",\"type\":\"main\",\"index\":0}]]},\"Get Midjourney Task\":{\"main\":[[{\"node\":\"Determine Whether the Image URL was Fetched\",\"type\":\"main\",\"index\":0}]]},\"Midjourney Generator\":{\"main\":[[{\"node\":\"Wait for Midjourney Generation\",\"type\":\"main\",\"index\":0}]]},\"When clicking Test workflow\":{\"main\":[[{\"node\":\"Basic Params\",\"type\":\"main\",\"index\":0}]]},\"Check Image  Generation Status\":{\"main\":[[{\"node\":\"Get Image Url\",\"type\":\"main\",\"index\":0}]]},\"Wait for Midjourney Generation\":{\"main\":[[{\"node\":\"Get Midjourney Task\",\"type\":\"main\",\"index\":0}]]},\"Determine Whether the Image URL was Fetched\":{\"main\":[[{\"node\":\"Check Image  Generation Status\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Wait for Midjourney Generation\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "### Who is the template for?\n\nThis workflow is specifically designed for **content creators** and **social media professionals** , enabling **Instagram and X (Twitter) influencers** to produce highly artistic visual posts, empowering **marketing teams** to quickly generate event promotional graphics, assisting **blog authors** in creating featured images and illustrations, and helping **knowledge-based creators** transform key insights into easily shareable card visuals.\n\n### Set up Instructions\n\n  1. Fill in your [API key](https://piapi.ai/workspace/key) from PiAPI.\n  2. Fill in **Basic Params** Node following the sticky note guidelines.\n  3. Set up a design template in [Canvas Switchboard](https://www.switchboard.ai).\n  4. Make a simple template in Switchboard.  \n![image](https://i.ibb.co/TBJm8X5y/We-Chat9ef7f5b0bb9360e57e2121c55c802e8f.jpg)\n  5. Click Crul and get the API code to fill in JSON of **Design in Canvas**.  \n![n8n.png](https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/n8n_be80a9898a.png)\n  6. Click Test Workflow and get a url result.\n\n\n\n### Use Case\n\nHere we will provide some setting examples to help users find a proper way to use this workflow. User could change these settings based on specific purposes.\n\n**Basic Params Setting** :\n\n  1. **theme** : Hope\n  2. **scenario** : Don't know about the future, confused and feel lost with tech-development.\n  3. **style** : Cinematic Grandeur, Sci-Tech Aesthetic, 3D style\n  4. **example** : 1. March. Because of your faith, it will happen. 2. Something in me will save me. 3. To everyone carrying a heavy heart in silence. You are going to be okay. 4. Tomorrow will be better.\n  5. **image prompt** : A cinematic sci-fi metropolis where Deep Neural Nets control a hyper-connected society. Holographic interfaces glow in the air as robotic agents move among humans, symbolizing Industry 4.0. The scene contrasts organic human emotion with cold machine precision, rendered in a hyper-realistic 3D style with futuristic lighting. Epic wide shots showcase the grandeur of this civilizationâ€™s industrial evolution.\n\n\n\n**Output Image:**  \n![image](https://i.ibb.co/0Vz7C4mh/We-Chat905aafab495471e941ec0b71009b89d8.jpg)\n\n### More Example Results for Reference\n\n![Frame 3421.png](https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/Frame_3421_66f8b5b92b.png)\n",
  "readme_html": "<!--[--><div data-v-006f9244=\"\"><h3>Who is the template for?</h3>\n<p>This workflow is specifically designed for <strong>content creators</strong> and <strong>social media professionals</strong>, enabling <strong>Instagram and X (Twitter) influencers</strong> to produce highly artistic visual posts, empowering <strong>marketing teams</strong> to quickly generate event promotional graphics, assisting <strong>blog authors</strong> in creating featured images and illustrations, and helping <strong>knowledge-based creators</strong> transform key insights into easily shareable card visuals.</p>\n<h3>Set up Instructions</h3>\n<ol>\n<li>Fill in your <a href=\"https://piapi.ai/workspace/key\" rel=\"ugc nofollow\" target=\"_blank\">API  key</a> from PiAPI.</li>\n<li>Fill in <strong>Basic Params</strong> Node following the sticky note guidelines.</li>\n<li>Set up a design template in <a href=\"https://www.switchboard.ai\" rel=\"ugc nofollow\" target=\"_blank\">Canvas Switchboard</a>.</li>\n<li>Make a simple template in Switchboard.<br>\n<img src=\"https://i.ibb.co/TBJm8X5y/We-Chat9ef7f5b0bb9360e57e2121c55c802e8f.jpg\" alt=\"image\"></li>\n<li>Click Crul and get the API code to fill in JSON of <strong>Design in Canvas</strong>.<br>\n<img src=\"https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/n8n_be80a9898a.png\" alt=\"n8n.png\"></li>\n<li>Click Test Workflow and get a url result.</li>\n</ol>\n<h3>Use Case</h3>\n<p>Here we will provide some setting examples to help users find a proper way to use this workflow. User could change these settings based on specific purposes.</p>\n<p><strong>Basic Params Setting</strong>:</p>\n<ol>\n<li><strong>theme</strong>: Hope</li>\n<li><strong>scenario</strong>: Don't know about the future, confused and feel lost with tech-development.</li>\n<li><strong>style</strong>: Cinematic Grandeur, Sci-Tech Aesthetic, 3D style</li>\n<li><strong>example</strong>: 1. March. Because of your faith, it will happen. 2. Something in me will save me. 3. To everyone carrying a heavy heart in silence. You are going to be okay. 4. Tomorrow will be better.</li>\n<li><strong>image prompt</strong>: A cinematic sci-fi metropolis where Deep Neural Nets control a hyper-connected society. Holographic interfaces glow in the air as robotic agents move among humans, symbolizing Industry 4.0. The scene contrasts organic human emotion with cold machine precision, rendered in a hyper-realistic 3D style with futuristic lighting. Epic wide shots showcase the grandeur of this civilizationâ€™s industrial evolution.</li>\n</ol>\n<p><strong>Output Image:</strong><br>\n<img src=\"https://i.ibb.co/0Vz7C4mh/We-Chat905aafab495471e941ec0b71009b89d8.jpg\" alt=\"image\"></p>\n<h3>More Example Results for Reference</h3>\n<p><img src=\"https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/Frame_3421_66f8b5b92b.png\" alt=\"Frame 3421.png\"></p>\n</div><!--]-->",
  "readme_zh": "### æ¨¡æ¿é€‚ç”¨å¯¹è±¡\n\næœ¬å·¥ä½œæµä¸“ä¸º**å†…å®¹åˆ›ä½œè€…**ä¸**ç¤¾äº¤åª’ä½“ä»ä¸šè€…**æ‰“é€ ï¼ŒåŠ©åŠ›**Instagramå’ŒXï¼ˆæ¨ç‰¹ï¼‰ç½‘çº¢**äº§å‡ºé«˜è‰ºæœ¯æ€§çš„è§†è§‰å¸–æ–‡ï¼Œèµ‹èƒ½**å¸‚åœºå›¢é˜Ÿ**å¿«é€Ÿç”Ÿæˆæ´»åŠ¨å®£ä¼ å›¾ï¼ŒååŠ©**åšå®¢ä½œè€…**åˆ›ä½œç‰¹è‰²é…å›¾ä¸æ’ç”»ï¼Œå¸®åŠ©**çŸ¥è¯†å‹åˆ›ä½œè€…**å°†æ ¸å¿ƒè§‚ç‚¹è½¬åŒ–ä¸ºæ˜“ä¼ æ’­çš„å¡ç‰‡è§†è§‰ã€‚\n\n### é…ç½®æŒ‡å—\n\n1. å¡«å†™æ‚¨çš„[PiAPIå¯†é’¥](https://piapi.ai/workspace/key)  \n2. æ ¹æ®ä¾¿ç­¾æç¤ºå¡«å†™**åŸºç¡€å‚æ•°**èŠ‚ç‚¹  \n3. å‰å¾€[Canvas Switchboard](https://www.switchboard.ai)åˆ›å»ºè®¾è®¡æ¨¡æ¿  \n4. åœ¨Switchboardä¸­åˆ¶ä½œç®€æ˜“æ¨¡æ¿  \n![å›¾ç¤º](https://i.ibb.co/TBJm8X5y/We-Chat9ef7f5b0bb9360e57e2121c55c802e8f.jpg)  \n5. ç‚¹å‡»Crulè·å–APIä»£ç å¹¶å¡«å…¥**ç”»å¸ƒè®¾è®¡**çš„JSON  \n![n8nç•Œé¢](https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/n8n_be80a9898a.png)  \n6. ç‚¹å‡»æµ‹è¯•å·¥ä½œæµè·å–ç”Ÿæˆé“¾æ¥  \n\n### åº”ç”¨åœºæ™¯\n\nä»¥ä¸‹æä¾›å‚æ•°è®¾ç½®èŒƒä¾‹ï¼Œç”¨æˆ·å¯æ ¹æ®å®é™…éœ€æ±‚è°ƒæ•´ï¼š\n\n**åŸºç¡€å‚æ•°è®¾ç½®**ï¼š  \n1. **ä¸»é¢˜**ï¼šå¸Œæœ›  \n2. **æƒ…å¢ƒ**ï¼šå¯¹ç§‘æŠ€å‘å±•çš„æœªæ¥æ„Ÿåˆ°è¿·èŒ«ä¸è¿·å¤±  \n3. **é£æ ¼**ï¼šå²è¯—ç”µå½±æ„Ÿ/ç§‘æŠ€ç¾å­¦/3Dé£æ ¼  \n4. **ç¤ºä¾‹æ–‡æ¡ˆ**ï¼š  \n   - ä¸‰æœˆå°†è‡³ï¼Œä¿¡å¿µç»ˆå°†æˆçœŸ  \n   - å†…å¿ƒçš„å…‰èŠ’ä¼šæŒ‡å¼•æ–¹å‘  \n   - è‡´æ‰€æœ‰é»˜é»˜è´Ÿé‡å‰è¡Œè€…ï¼šä¸€åˆ‡éƒ½ä¼šå¥½èµ·æ¥  \n   - æ˜å¤©ä¼šæ›´å¥½  \n5. **ç”»é¢æè¿°**ï¼š  \n   èµ›åšæœ‹å…‹å¤§éƒ½ä¼šä¸­ï¼Œæ·±åº¦ç¥ç»ç½‘ç»œæŒæ§ç€è¶…äº’è”ç¤¾ä¼šã€‚å…¨æ¯ç•Œé¢æ‚¬æµ®ç©ºä¸­ï¼Œæœºæ¢°ä½“ç©¿è¡Œäºäººç¾¤é—´ï¼Œè±¡å¾å·¥ä¸š4.0æ—¶ä»£ã€‚åœºæ™¯ä»¥è¶…ç°å®3Dé£æ ¼å‘ˆç°ï¼Œæœªæ¥æ„Ÿå…‰å½±äº¤ç»‡ï¼Œå¹¿è§’é•œå¤´å±•ç°æ–‡æ˜å·¥ä¸šè¿›åŒ–çš„å£®é˜”å²è¯—ã€‚  \n\n**ç”Ÿæˆæ•ˆæœ**ï¼š  \n![æ•ˆæœå›¾](https://i.ibb.co/0Vz7C4mh/We-Chat905aafab495471e941ec0b71009b89d8.jpg)  \n\n### æ›´å¤šå‚è€ƒæ¡ˆä¾‹  \n![æ¡ˆä¾‹ç»„å›¾](https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/Frame_3421_66f8b5b92b.png)",
  "title_zh": "ä½¿ç”¨Midjourneyã€GPT-4o-miniå’ŒCanvas APIç”Ÿæˆå›¾å½¢å£çº¸",
  "publish_date_zh": "ä¸Šæ¬¡æ›´æ–°äº5å¤©å‰",
  "workflow_json_zh": "{\n  \"id\": \"mN7jDJoWHtJuyKpS\",\n  \"meta\": {\n    \"instanceId\": \"1e003a7ea4715b6b35e9947791386a7d07edf3b5bf8d4c9b7ee4fdcbec0447d7\"\n  },\n  \"name\": \"Generate Graphic Wallpaper with Midjourney, GPT-4o-mini and Canvas APIs\",\n  \"tags\": [],\n  \"nodes\": [\n    {\n      \"id\": \"11cef766-dd10-46ea-98cf-11eb8d95e157\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        280,\n        80\n      ],\n      \"parameters\": {\n        \"width\": 520,\n        \"height\": 200,\n        \"content\": \"## ä½¿ç”¨Midjourneyã€GPT-4o-miniå’ŒCanvas APIç”Ÿæˆè‰ºæœ¯å£çº¸\\næˆ‘ä»¬é€šè¿‡PiAPIæ¥å£ä¸Canvas APIè®¾è®¡äº†è¿™å¥—å·¥ä½œæµï¼Œæ—¨åœ¨ç”Ÿæˆè§†è§‰å†²å‡»åŠ›å¼ºçš„å›¾åƒä¸å¼•å‘å…±é¸£çš„æ–‡æ¡ˆï¼Œä»¥æ­¤æ¿€å‘æƒ…æ„Ÿè¿æ¥ ğŸ™Œ  \\næ„¿æ‚¨è¿ç”¨æ­¤æµç¨‹åˆ›é€ å‡ºæƒŠè‰³çš„ä½œå“ï¼\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"ba7143d7-442d-4153-9cfd-bb36448d4c91\",\n      \"name\": \"Midjourney Generator\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1200,\n        320\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.piapi.ai/api/v1/task\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"jsonBody\": \"={\\n  \\\"model\\\": \\\"midjourney\\\",\\n  \\\"task_type\\\": \\\"imagine\\\",\\n  \\\"input\\\": {\\n    \\\"prompt\\\": \\\"{{ $json.prompt }}\\\",\\n    \\\"aspect_ratio\\\": \\\"1:1\\\",\\n    \\\"process_mode\\\": \\\"turbo\\\",\\n    \\\"skip_prompt_check\\\": false\\n  }\\n}\",\n        \"sendBody\": true,\n        \"sendHeaders\": true,\n        \"specifyBody\": \"json\",\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"x-api-key\",\n              \"value\": \"={{ $('Basic Params').item.json['x-api-key'] }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"117b5929-e98c-456a-9bfd-fe1deee77abc\",\n      \"name\": \"When clicking Test workflow\",\n      \"type\": \"n8n-nodes-base.manualTrigger\",\n      \"position\": [\n        300,\n        320\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"dfcf5c57-536c-4fb4-967b-24fd375db57c\",\n      \"name\": \"Get Prompt\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        960,\n        320\n      ],\n      \"parameters\": {\n        \"jsCode\": \"const image_prompt=$('Basic Params').first().json.image_prompt;\\nconst show_prompt =$input.first().json.choices[0].message.content;\\n\\nconst prompt = image_prompt.replace(/'xxx'/, `'${show_prompt}'`)\\nreturn {show_prompt,prompt};\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"1c641437-de26-4e55-9b34-0cb13d8d1cd3\",\n      \"name\": \"Get Midjourney Task\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1140,\n        580\n      ],\n      \"parameters\": {\n        \"url\": \"=https://api.piapi.ai/api/v1/task/{{ $json.data.task_id }}\",\n        \"options\": {},\n        \"sendHeaders\": true,\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"x-api-key\",\n              \"value\": \"={{ $('Basic Params').item.json['x-api-key'] }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"38fda20c-fef6-484c-ac75-c8f2fbaaca15\",\n      \"name\": \"Wait for Midjourney Generation\",\n      \"type\": \"n8n-nodes-base.wait\",\n      \"position\": [\n        940,\n        580\n      ],\n      \"webhookId\": \"af79053d-1291-4dd2-889e-4593dbbb2512\",\n      \"parameters\": {},\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"1d5eaf9a-caf8-4b08-a35c-281b400c9198\",\n      \"name\": \"Determine Whether the Image URL was Fetched\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        1340,\n        580\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"or\",\n          \"conditions\": [\n            {\n              \"id\": \"e97a02cc-8d1d-4500-bce5-0a296c792b76\",\n              \"operator\": {\n                \"name\": \"filter.operator.equals\",\n                \"type\": \"string\",\n                \"operation\": \"equals\"\n              },\n              \"leftValue\": \"={{ $json.data.status }}\",\n              \"rightValue\": \"completed\"\n            },\n            {\n              \"id\": \"50b63a7a-52b5-4766-a859-96ac1ff949ec\",\n              \"operator\": {\n                \"name\": \"filter.operator.equals\",\n                \"type\": \"string\",\n                \"operation\": \"equals\"\n              },\n              \"leftValue\": \"={{ $json.data.status }}\",\n              \"rightValue\": \"failed\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"983acf91-c5ba-4335-b43e-d7a8a1a6b918\",\n      \"name\": \"Check Image  Generation Status\",\n      \"type\": \"n8n-nodes-base.switch\",\n      \"position\": [\n        1520,\n        320\n      ],\n      \"parameters\": {\n        \"rules\": {\n          \"values\": [\n            {\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 2,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"5f61ee56-4ebe-411f-95e6-b47d9741e7a2\",\n                    \"operator\": {\n                      \"type\": \"string\",\n                      \"operation\": \"equals\"\n                    },\n                    \"leftValue\": \"={{ $json.data.status }}\",\n                    \"rightValue\": \"completed\"\n                  }\n                ]\n              }\n            }\n          ]\n        },\n        \"options\": {}\n      },\n      \"typeVersion\": 3.2\n    },\n    {\n      \"id\": \"50455a13-5914-4f96-b977-d1c6461807bc\",\n      \"name\": \"Design in Canvas\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1920,\n        320\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.canvas.switchboard.ai\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"jsonBody\": \"={\\n    \\\"template\\\": \\\"social-3-1\\\",\\n    \\\"sizes\\\": [\\n        {\\n         \\\"width\\\": 1000,\\n         \\\"height\\\": 1500\\n        }\\n    ],\\n    \\\"elements\\\": {\\n        \\\"text1\\\": {\\n            \\\"text\\\": \\\"{{ $('Get Prompt').item.json.show_prompt.replace(/;/g, \\\";\\\\\\\\n \\\")}}\\\"\\n        },\\n         \\\"rectangle1\\\": {\\n                 \\\"fillColor\\\": \\\"#fff\\\"\\n             },\\n        \\\"image1\\\": {\\n            \\\"url\\\": \\\"{{ $json.data.output.temporary_image_urls[0] }}\\\"\\n        }\\n    }\\n}\",\n        \"sendBody\": true,\n        \"sendHeaders\": true,\n        \"specifyBody\": \"json\",\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"X-API-Key\",\n              \"value\": \"45ba3916-2f10-497d-815b-7ffc9b69001f\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"0fd5d40c-aebc-4ec3-b9b5-027126b39452\",\n      \"name\": \"Get Image Url\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        1720,\n        320\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"d52d19d1-3a37-47bb-ad23-e809323c0c54\",\n              \"name\": \"data.output.temporary_image_urls\",\n              \"type\": \"array\",\n              \"value\": \"={{ $json.data.output.temporary_image_urls }}\"\n            },\n            {\n              \"id\": \"49bed53e-675d-4ea0-947c-ffcbfae0ee97\",\n              \"name\": \"data.output.image_url\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.data.output.image_url }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"e36d4bd6-2d34-447c-984e-515c48f3632e\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        280,\n        500\n      ],\n      \"parameters\": {\n        \"width\": 580,\n        \"height\": 280,\n        \"content\": \"## åŸºç¡€å‚æ•°  \\nåœ¨**åŸºç¡€å‚æ•°**èŠ‚ç‚¹ä¸­ï¼Œæ‚¨éœ€è¦å¡«å†™PiAPIå¯†é’¥ï¼ˆå¯åœ¨[PiAPIå¹³å°](https://piapi.ai)çš„[æˆ‘çš„è´¦æˆ·](https://piapi.ai/workspace/my-account)é¡µé¢æŸ¥çœ‹ï¼‰ã€‚å…¶ä»–éœ€è¦æä¾›çš„ä¿¡æ¯å¦‚ä¸‹ğŸ“ï¼š  \\n1. ä¸»é¢˜ã€‚æŒ‡å¼€å§‹ç”Ÿæˆå†…å®¹æ—¶æ‚¨å¸Œæœ›è®¨è®ºçš„æ ¸å¿ƒè¯é¢˜ã€‚  \\n2. åœºæ™¯ã€‚åœºæ™¯æ–‡æœ¬é€šå¸¸ç”¨äºæè¿°æ‚¨å½“å‰çš„æƒ…æ„ŸçŠ¶æ€æˆ–æ‰€å¤„æƒ…å¢ƒã€‚  \\n3. é£æ ¼ã€‚è®¾å®šç”Ÿæˆå›¾åƒçš„è§†è§‰é£æ ¼ç±»å‹ã€‚  \\n4. ç¤ºä¾‹ã€‚å‘å¤§è¯­è¨€æ¨¡å‹å±•ç¤ºçš„æ–‡æœ¬èŒƒä¾‹ï¼Œç”¨äºè¯´æ˜æ‚¨æœŸæœ›ç”Ÿæˆçš„é£æ ¼ç‰¹å¾ã€‚  \\n5. å›¾åƒæç¤ºè¯ã€‚ç”¨äºæè¿°æ‚¨æƒ³ç”Ÿæˆå›¾åƒçš„å…·ä½“å†…å®¹èƒŒæ™¯ã€‚\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"1e04fe5d-a1f4-4fe9-a3d2-9c6aeaf05d96\",\n      \"name\": \"Gpt-4o-mini API\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        740,\n        320\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.piapi.ai/v1/chat/completions\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"jsonBody\": \"={\\n    \\\"model\\\": \\\"gpt-4o-mini\\\",\\n    \\\"messages\\\": [\\n       {\\n          \\\"role\\\": \\\"system\\\",\\n          \\\"content\\\": \\\"You are a helpful assistant.\\\"\\n        },\\n        {\\n          \\\"role\\\": \\\"user\\\",\\n          \\\"content\\\": \\\"Please {{ $json.style }}, based on the theme of {{ $json.theme }} and the scenario of {{ $json.scenario }}, according to the output case and language context. Examples are  {{ $json.example }},Return a sentence directly, nothing else,Don't add a serial number, just a prompt that can be used for input,Do not add any quotation marks.\\\"}\\n      ]\\n  }\",\n        \"sendBody\": true,\n        \"sendHeaders\": true,\n        \"specifyBody\": \"json\",\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"Authorization\",\n              \"value\": \"=Bearer {{ $('Basic Params').first().json['x-api-key'] }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"4eaf0f57-9458-42cb-b736-c737f134320b\",\n      \"name\": \"Basic Params\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        540,\n        320\n      ],\n      \"parameters\": {\n        \"mode\": \"raw\",\n        \"options\": {},\n        \"jsonOutput\": \"{\\n  \\\"x-api-key\\\":\\\"\\\",\\n  \\\"theme\\\": \\\"Hope\\\",\\n  \\\"scenario\\\": \\\"Don't know about the future, confused and feel lost about AI agent\\\",\\n  \\\"style\\\":\\\"Cinematic Grandeur,Sci-Tech Aesthetic, 3D style\\\",\\n  \\\"example\\\":\\\"1. March. Because of your faith, it will happen.2. Something in me will save me.3. To everyone carrying a heavy heart in silence. You are going to be okay.4. Tomorrow will be better.\\\",\\n  \\\"image_prompt\\\":\\\"A cinematic sci-fi metropolis where Deep Neural Nets control a hyper-connected society. Holographic interfaces glow in the air as robotic agents move among humans, symbolizing Industry 4.0. The scene contrasts organic human emotion with cold machine precision, rendered in a hyper-realistic 3D style with futuristic lighting. Epic wide shots showcase the grandeur of this civilizationâ€™s industrial evolution.\\\"\\n}\\n\"\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"6750b606-4222-4cda-bcaa-5d4f2b4f9ec8\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1680,\n        560\n      ],\n      \"parameters\": {\n        \"width\": 380,\n        \"height\": 200,\n        \"content\": \"## ç”»å¸ƒAPIèŠ‚ç‚¹è®¾è®¡\\næˆ‘ä»¬ä½¿ç”¨Canvas APIå®Œæˆæœ€ç»ˆè®¾è®¡ã€‚\\næ‚¨å¯é€šè¿‡æŸ¥çœ‹èŠ‚ç‚¹ä»£ç ï¼Œåœ¨ç”»å¸ƒä¸­æ›´é«˜æ•ˆåœ°åˆ¶ä½œæ¨¡æ¿è®¾è®¡ã€‚\\nè¿˜èƒ½åˆ©ç”¨ç”»å¸ƒä¸­çš„æ¨¡æ¿åº“åˆ›ä½œå¤šæ ·åŒ–è‰ºæœ¯ä½œå“ã€‚\\né€šè¿‡ä¿®æ”¹èŠ‚ç‚¹å‚æ•°æˆ–æ·»åŠ æ›´å¤šèŠ‚ç‚¹ï¼Œå¯åœ¨å•ä¸€è§’è‰²ä¸­åˆ›ä½œæ›´å¤šè‰ºæœ¯ä½œå“ã€‚\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"active\": false,\n  \"pinData\": {},\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"09b5a8e6-bdc8-47bb-a9e3-95b090ff3f13\",\n  \"connections\": {\n    \"Get Prompt\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Midjourney Generator\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Basic Params\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Gpt-4o-mini API\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get Image Url\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Design in Canvas\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Gpt-4o-mini API\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get Prompt\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get Midjourney Task\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Determine Whether the Image URL was Fetched\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Midjourney Generator\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Wait for Midjourney Generation\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When clicking Test workflow\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Basic Params\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Check Image  Generation Status\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get Image Url\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Wait for Midjourney Generation\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get Midjourney Task\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Determine Whether the Image URL was Fetched\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Check Image  Generation Status\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Wait for Midjourney Generation\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}