{
  "title": "🚀 Boost your customer service with this WhatsApp Business bot!",
  "url": "https://n8n.io/workflows/2340-boost-your-customer-service-with-this-whatsapp-business-bot/",
  "category": "Product",
  "category_url": "https://n8n.io/workflows/categories/product/?count=20",
  "author": "Eduard",
  "publish_date": "Last update 10 months ago",
  "publish_date_absolute": "2024-07-23",
  "content": "",
  "workflow_json": "{\"id\":\"NzoLNV2FbS4eurJ7\",\"meta\":{\"instanceId\":\"fb924c73af8f703905bc09c9ee8076f48c17b596ed05b18c0ff86915ef8a7c4a\",\"templateCredsSetupCompleted\":true},\"name\":\"WhatsApp business bot\",\"tags\":[],\"nodes\":[{\"id\":\"4ca5e25a-f67b-4874-af20-680d1a6ac731\",\"name\":\"Sent notification  template\",\"type\":\"n8n-nodes-base.whatsApp\",\"position\":[1140,320],\"parameters\":{\"template\":\"test_appointment_button|en_US\",\"components\":{\"component\":[{\"type\":\"header\",\"headerParameters\":{\"parameter\":[{\"text\":\"📅\"}]}},{\"bodyParameters\":{\"parameter\":[{\"text\":\"={{ $json[\\\"Your name\\\"] }}\"},{\"text\":\"={{ DateTime.fromFormat($json[\\\"Please pick a day and time of your appointment\\\"], \\\"M/d/yyyy HH:mm:ss\\\").toLocaleString(DateTime.DATE_HUGE); }}\"},{\"text\":\"={{ $json[\\\"Please pick a day and time of your appointment\\\"].split(' ')[1] }}\"}]}}]},\"phoneNumberId\":\"=244242975437240\",\"requestOptions\":{},\"recipientPhoneNumber\":\"={{ $json[\\\"Your mobile number\\\"] }}\"},\"credentials\":{\"whatsAppApi\":{\"id\":\"mm0r1xKc6N8XktAD\",\"name\":\"WhatsApp account 2\"}},\"typeVersion\":1},{\"id\":\"877c62c5-9869-48fc-bd74-35897dbd2276\",\"name\":\"WhatsApp Trigger\",\"type\":\"n8n-nodes-base.whatsAppTrigger\",\"position\":[700,800],\"webhookId\":\"b06b387a-481e-43f1-9035-01a87123ad88\",\"parameters\":{\"updates\":[\"messages\"]},\"credentials\":{\"whatsAppTriggerApi\":{\"id\":\"bWqGRWeDXvGTdSq5\",\"name\":\"WhatsApp Trigger\"}},\"typeVersion\":1},{\"id\":\"6c0edf48-20af-42fb-a436-aee3a9a4f6cc\",\"name\":\"Is message?\",\"type\":\"n8n-nodes-base.if\",\"position\":[920,800],\"parameters\":{\"options\":{\"looseTypeValidation\":true},\"conditions\":{\"options\":{\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"loose\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"8a765e57-8e39-4547-a99a-0458df2b75f4\",\"operator\":{\"type\":\"object\",\"operation\":\"exists\",\"singleValue\":true},\"leftValue\":\"={{ $json.messages[0] }}\",\"rightValue\":\"\"}]}},\"typeVersion\":2},{\"id\":\"00006406-47be-4693-9763-a21d06b13d51\",\"name\":\"Schedule Trigger\",\"type\":\"n8n-nodes-base.scheduleTrigger\",\"position\":[680,1184],\"parameters\":{\"rule\":{\"interval\":[{\"field\":\"minutes\"}]}},\"typeVersion\":1.2},{\"id\":\"b9919c0d-eeb2-4a5e-a91f-3dad11b778f8\",\"name\":\"Loop Over Items\",\"type\":\"n8n-nodes-base.splitInBatches\",\"position\":[1120,1184],\"parameters\":{\"options\":{}},\"typeVersion\":3},{\"id\":\"8f0dc664-715f-4074-b0f7-98d3c7f563a5\",\"name\":\"Get new answers\",\"type\":\"n8n-nodes-base.googleSheets\",\"position\":[900,1184],\"parameters\":{\"options\":{},\"filtersUI\":{\"values\":[{\"lookupValue\":\"Ready\",\"lookupColumn\":\"Status\"}]},\"sheetName\":{\"__rl\":true,\"mode\":\"list\",\"value\":1621824221,\"cachedResultUrl\":\"https://docs.google.com/spreadsheets/d/1T-B0yepcrCHxQpn7Sj6QjTa0VqwwVBQhO5ZcIUSxWJE/edit#gid=1621824221\",\"cachedResultName\":\"WA-messages\"},\"documentId\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"1T-B0yepcrCHxQpn7Sj6QjTa0VqwwVBQhO5ZcIUSxWJE\",\"cachedResultUrl\":\"https://docs.google.com/spreadsheets/d/1T-B0yepcrCHxQpn7Sj6QjTa0VqwwVBQhO5ZcIUSxWJE/edit?usp=drivesdk\",\"cachedResultName\":\"WhatsApp Appointments (Responses)\"}},\"credentials\":{\"googleSheetsOAuth2Api\":{\"id\":\"RtRiRezoxiWkzZQt\",\"name\":\"Ted's Tech Talks Google account\"}},\"typeVersion\":4.4},{\"id\":\"a7b07f7e-1287-4e8f-b28a-4c656f386f8a\",\"name\":\"Reply to the user\",\"type\":\"n8n-nodes-base.whatsApp\",\"position\":[1340,1184],\"parameters\":{\"textBody\":\"={{ $json.ReplyText }}\",\"operation\":\"send\",\"phoneNumberId\":\"244242975437240\",\"requestOptions\":{},\"additionalFields\":{},\"recipientPhoneNumber\":\"=+{{ $json.UserPhone }}\"},\"credentials\":{\"whatsAppApi\":{\"id\":\"mm0r1xKc6N8XktAD\",\"name\":\"WhatsApp account 2\"}},\"typeVersion\":1},{\"id\":\"30f0a7da-c3ce-448c-ad05-b8b75da3d319\",\"name\":\"Update message status\",\"type\":\"n8n-nodes-base.googleSheets\",\"position\":[1520,1184],\"parameters\":{\"columns\":{\"value\":{\"Status\":\"Replied\",\"row_number\":\"={{ $('Loop Over Items').item.json.row_number }}\"},\"schema\":[{\"id\":\"UserPhone\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"UserPhone\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"UserName\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"UserName\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"UserMessage\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"UserMessage\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"ReplyText\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"ReplyText\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"Status\",\"type\":\"string\",\"display\":true,\"required\":false,\"displayName\":\"Status\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"row_number\",\"type\":\"string\",\"display\":true,\"removed\":false,\"readOnly\":true,\"required\":false,\"displayName\":\"row_number\",\"defaultMatch\":false,\"canBeUsedToMatch\":true}],\"mappingMode\":\"defineBelow\",\"matchingColumns\":[\"row_number\"]},\"options\":{},\"operation\":\"update\",\"sheetName\":{\"__rl\":true,\"mode\":\"list\",\"value\":1621824221,\"cachedResultUrl\":\"https://docs.google.com/spreadsheets/d/1T-B0yepcrCHxQpn7Sj6QjTa0VqwwVBQhO5ZcIUSxWJE/edit#gid=1621824221\",\"cachedResultName\":\"WA-messages\"},\"documentId\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"1T-B0yepcrCHxQpn7Sj6QjTa0VqwwVBQhO5ZcIUSxWJE\",\"cachedResultUrl\":\"https://docs.google.com/spreadsheets/d/1T-B0yepcrCHxQpn7Sj6QjTa0VqwwVBQhO5ZcIUSxWJE/edit?usp=drivesdk\",\"cachedResultName\":\"WhatsApp Appointments (Responses)\"}},\"credentials\":{\"googleSheetsOAuth2Api\":{\"id\":\"RtRiRezoxiWkzZQt\",\"name\":\"Ted's Tech Talks Google account\"}},\"typeVersion\":4.4},{\"id\":\"95486a27-a667-4555-8924-53d46b19de43\",\"name\":\"Wait 1 sec\",\"type\":\"n8n-nodes-base.wait\",\"position\":[1700,1184],\"webhookId\":\"df4df4f8-378c-4228-b1e2-326b9d956e7e\",\"parameters\":{\"amount\":1},\"typeVersion\":1.1},{\"id\":\"21551e78-428f-4730-a337-48d1a80bf703\",\"name\":\"New message from the user\",\"type\":\"n8n-nodes-base.googleSheets\",\"position\":[1140,800],\"parameters\":{\"columns\":{\"value\":{\"Status\":\"New\",\"UserName\":\"={{ $json.contacts[0].profile.name }}\",\"UserPhone\":\"={{ $json.messages[0].from }}\",\"UserMessage\":\"={{ $json.messages[0].text.body }}\"},\"schema\":[{\"id\":\"UserPhone\",\"type\":\"string\",\"display\":true,\"required\":false,\"displayName\":\"UserPhone\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"UserName\",\"type\":\"string\",\"display\":true,\"required\":false,\"displayName\":\"UserName\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"UserMessage\",\"type\":\"string\",\"display\":true,\"required\":false,\"displayName\":\"UserMessage\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"ReplyText\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"ReplyText\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"Status\",\"type\":\"string\",\"display\":true,\"required\":false,\"displayName\":\"Status\",\"defaultMatch\":false,\"canBeUsedToMatch\":true}],\"mappingMode\":\"defineBelow\",\"matchingColumns\":[]},\"options\":{},\"operation\":\"append\",\"sheetName\":{\"__rl\":true,\"mode\":\"list\",\"value\":1621824221,\"cachedResultUrl\":\"https://docs.google.com/spreadsheets/d/1T-B0yepcrCHxQpn7Sj6QjTa0VqwwVBQhO5ZcIUSxWJE/edit#gid=1621824221\",\"cachedResultName\":\"WA-messages\"},\"documentId\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"1T-B0yepcrCHxQpn7Sj6QjTa0VqwwVBQhO5ZcIUSxWJE\",\"cachedResultUrl\":\"https://docs.google.com/spreadsheets/d/1T-B0yepcrCHxQpn7Sj6QjTa0VqwwVBQhO5ZcIUSxWJE/edit?usp=drivesdk\",\"cachedResultName\":\"WhatsApp Appointments (Responses)\"}},\"credentials\":{\"googleSheetsOAuth2Api\":{\"id\":\"RtRiRezoxiWkzZQt\",\"name\":\"Ted's Tech Talks Google account\"}},\"typeVersion\":4.4},{\"id\":\"e1478757-0094-4bcb-998f-7e3e81958319\",\"name\":\"Get new entries\",\"type\":\"n8n-nodes-base.googleSheetsTrigger\",\"position\":[700,320],\"parameters\":{\"event\":\"rowAdded\",\"options\":{},\"pollTimes\":{\"item\":[{\"mode\":\"everyX\",\"unit\":\"minutes\",\"value\":5}]},\"sheetName\":{\"__rl\":true,\"mode\":\"list\",\"value\":470797219,\"cachedResultUrl\":\"https://docs.google.com/spreadsheets/d/1T-B0yepcrCHxQpn7Sj6QjTa0VqwwVBQhO5ZcIUSxWJE/edit#gid=470797219\",\"cachedResultName\":\"Form Responses 1\"},\"documentId\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"1T-B0yepcrCHxQpn7Sj6QjTa0VqwwVBQhO5ZcIUSxWJE\",\"cachedResultUrl\":\"https://docs.google.com/spreadsheets/d/1T-B0yepcrCHxQpn7Sj6QjTa0VqwwVBQhO5ZcIUSxWJE/edit?usp=drivesdk\",\"cachedResultName\":\"WhatsApp Appointments (Responses)\"}},\"credentials\":{\"googleSheetsTriggerOAuth2Api\":{\"id\":\"m33qCYf9eEvSgo0x\",\"name\":\"Ted's Tech Talks Google Sheets Trigger\"}},\"typeVersion\":1},{\"id\":\"14811434-d716-4999-ab53-761fc355ee09\",\"name\":\"User consented for WA messages?\",\"type\":\"n8n-nodes-base.filter\",\"position\":[920,320],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"b9bfdb33-0d9c-4320-b4bc-0bf0a469c8ca\",\"operator\":{\"name\":\"filter.operator.equals\",\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"={{ $json[\\\"I consent to receive WhatsApp notifications regarding my appointments\\\"] }}\",\"rightValue\":\"Yes\"}]}},\"typeVersion\":2},{\"id\":\"20bec538-5d04-4382-ba88-a2c15421c8e7\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[660,83.6407185628741],\"parameters\":{\"width\":744.5356369854154,\"height\":404.8383233532937,\"content\":\"## Send a WhatsApp (WA) template message\\nOccurs after a user submitted a new Google form. If the user opted-in for WA notifications during the form submission, a template message will be sent via WhatsApp.\\n\\n**IMPORTANT!**\\n1. You will need to create a new WA template message on the [Meta Business portal](https://business.facebook.com/wa/manage/message-templates/)\\n2. To send outgoing WA messages you'll need an Access Token and a WhatsApp Business Account ID. These can be obtained via Meta Developers Portal after creating an a new App. Please refer to this [n8n blog article on creating WhatsApp bots](https://blog.n8n.io/whatsapp-bot/#step-1-set-up-a-whatsapp-business-account)\"},\"typeVersion\":1},{\"id\":\"ab7bd838-2ed1-4645-b3d9-69617a888090\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[660,526.8263473053893],\"parameters\":{\"width\":752.168692512586,\"height\":437.60479041916165,\"content\":\"## Store incoming WhatsApp user messages in a Google Sheet\\nTo receive user messages, you need to add a WhatsApp Trigger node. In the credentials section provide an App ID and an App secret. These are obtained from the Meta Developers Portal, Basic App settings screen\\n\\nAfter the credentials are added, copy the trigger URL and enter it into the 'Callback URL' field in the WhatsApp configuration window in the Meta Developer portal.\\n\\nOnce the trigger receives a payload from WhatsApp, we check if the incoming data contains a message and add a new row with user data and message text in [Google Sheet](https://docs.google.com/spreadsheets/d/1T-B0yepcrCHxQpn7Sj6QjTa0VqwwVBQhO5ZcIUSxWJE/edit?gid=1621824221#gid=1621824221).\\n\\nWhatsApp trigger also receives status notifications (i.e. message sent, message read etc.), so we ignore such notifications in this workflow.\"},\"typeVersion\":1},{\"id\":\"b0c62bd4-d6bc-425b-b506-b6820b3e6dc5\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[660,1000],\"parameters\":{\"width\":1197.9640718562885,\"height\":369.34131736526945,\"content\":\"## Reply to the user via WhatsApp\\nWhatsApp allows sending automatic messages **with custom text** via bots only within the 24h time frame after the last incoming user message.\\n\\nAfter the user sends a message to the WhatsApp bot, a row is added to the [Google Sheet](https://docs.google.com/spreadsheets/d/1T-B0yepcrCHxQpn7Sj6QjTa0VqwwVBQhO5ZcIUSxWJE/edit?gid=1621824221#gid=1621824221) with the Status 'New'\\n\\nType something in the `ReplyText` column and change the Status to 'Ready'.\\nIn a few minutes, n8n timer will fetch all 'Ready' replies from the Google Sheet and send them one by one to the recipients\"},\"typeVersion\":1}],\"active\":true,\"pinData\":{},\"settings\":{\"callerPolicy\":\"workflowsFromSameOwner\",\"executionOrder\":\"v1\",\"saveManualExecutions\":true,\"saveDataSuccessExecution\":\"all\"},\"versionId\":\"66863e99-c756-48d5-b8e0-af0907623e8a\",\"connections\":{\"Wait 1 sec\":{\"main\":[[{\"node\":\"Loop Over Items\",\"type\":\"main\",\"index\":0}]]},\"Is message?\":{\"main\":[[{\"node\":\"New message from the user\",\"type\":\"main\",\"index\":0}]]},\"Get new answers\":{\"main\":[[{\"node\":\"Loop Over Items\",\"type\":\"main\",\"index\":0}]]},\"Get new entries\":{\"main\":[[{\"node\":\"User consented for WA messages?\",\"type\":\"main\",\"index\":0}]]},\"Loop Over Items\":{\"main\":[[],[{\"node\":\"Reply to the user\",\"type\":\"main\",\"index\":0}]]},\"Schedule Trigger\":{\"main\":[[{\"node\":\"Get new answers\",\"type\":\"main\",\"index\":0}]]},\"WhatsApp Trigger\":{\"main\":[[{\"node\":\"Is message?\",\"type\":\"main\",\"index\":0}]]},\"Reply to the user\":{\"main\":[[{\"node\":\"Update message status\",\"type\":\"main\",\"index\":0}]]},\"Update message status\":{\"main\":[[{\"node\":\"Wait 1 sec\",\"type\":\"main\",\"index\":0}]]},\"User consented for WA messages?\":{\"main\":[[{\"node\":\"Sent notification  template\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "This n8n workflow demonstrates how to automate customer interactions and appointment management via WhatsApp Business bot.\n\n  1. After submitting a Google Form, the user receives a notification via WhatsApp. These notifications are sent via a template message.\n  2. In case user sends a message to the bot, the text and user data is stored in [Google Sheets](https://docs.google.com/spreadsheets/d/1T-B0yepcrCHxQpn7Sj6QjTa0VqwwVBQhO5ZcIUSxWJE/edit?resourcekey=&gid=1621824221#gid=1621824221).\n  3. To reply back to the user, fill in the `ReplyText` column and change the Status to 'Ready'. In a few seconds n8n will fetch the unsent replies and deliver them one by one via WhatsApp Business node.\n\n\n\nCustomize this workflow to fit your specific needs, connect different online services and enhance your customer communication! 🎉\n\n## Setup Instructions\n\nTo get this workflow up and running, you'll need to:\n\n  1. 👇 Create a WhatsApp template message on the Meta Business portal. <details>![messagetemplate.png](https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/message_template_777896647b.png)</details>\n\n  2. Obtain an Access Token and WhatsApp Business Account ID from the Meta Developers Portal. This is needed for the **WhatsApp Business Node** to send messages.  \n![credentialssetup.png](https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/credentials_setup_63b14394ca.png)\n\n  3. Set up a **WhatsApp Trigger** node with App ID and App Secret from the Meta Developers Portal.  \n![credentialswebhook.png](https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/credentials_trigger_abefabb33b.png)\n\n  4. Right after that copy the **WhatsApp Trigger** URL and add it as a Callback URL in the Meta Developers Portal. This trigger is needed to receive incoming messages and their status updates.  \n![credentialstrigger.png](https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/credentials_webhook_3f5d567c2e.png)\n\n  5. Connect your Google Sheets account for data storage and management. Check out the [documentation page](https://docs.n8n.io/integrations/builtin/credentials/google/).\n\n\n\n\n## ⚠️ Important Notes\n\n  * WhatsApp allows automatic _custom text_ messages only within 24 hours of the last user message. Outside with time frame only _approved template messages_ can be sent.\n  * The workflow uses a Google Sheet to manage form submissions, incoming messages and prepare responses. You can replace these nodes and connect the WhatsApp bot with other systems.\n\n\n",
  "readme_html": "<!--[--><div data-v-006f9244=\"\"><p>This n8n workflow demonstrates how to automate customer interactions and appointment management via WhatsApp Business bot.</p>\n<ol>\n<li>After submitting a Google Form, the user receives a notification via WhatsApp. These notifications are sent via a template message.</li>\n<li>In case user sends a message to the bot, the text and user data is stored in <a href=\"https://docs.google.com/spreadsheets/d/1T-B0yepcrCHxQpn7Sj6QjTa0VqwwVBQhO5ZcIUSxWJE/edit?resourcekey=&amp;gid=1621824221#gid=1621824221\" rel=\"ugc nofollow\" target=\"_blank\">Google Sheets</a>.</li>\n<li>To reply back to the user, fill in the <code>ReplyText</code> column and change the Status to 'Ready'. In a few seconds n8n will fetch the unsent replies and deliver them one by one via WhatsApp Business node.</li>\n</ol>\n<p>Customize this workflow to fit your specific needs, connect different online services and enhance your customer communication! 🎉</p>\n<h2>Setup Instructions</h2>\n<p>To get this workflow up and running, you'll need to:</p>\n<ol>\n<li>\n<p>👇 Create a WhatsApp template message on the Meta Business portal. &lt;details&gt;<img src=\"https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/message_template_777896647b.png\" alt=\"messagetemplate.png\">&lt;/details&gt;</p>\n</li>\n<li>\n<p>Obtain an Access Token and WhatsApp Business Account ID from the Meta Developers Portal. This is needed for the <strong>WhatsApp Business Node</strong> to send messages.<br>\n<img src=\"https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/credentials_setup_63b14394ca.png\" alt=\"credentialssetup.png\"></p>\n</li>\n<li>\n<p>Set up a <strong>WhatsApp Trigger</strong> node with App ID and App Secret from the Meta Developers Portal.<br>\n<img src=\"https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/credentials_trigger_abefabb33b.png\" alt=\"credentialswebhook.png\"></p>\n</li>\n<li>\n<p>Right after that copy the <strong>WhatsApp Trigger</strong> URL and add it as a Callback URL in the Meta Developers Portal. This trigger is needed to receive incoming messages and their status updates.<br>\n<img src=\"https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/credentials_webhook_3f5d567c2e.png\" alt=\"credentialstrigger.png\"></p>\n</li>\n<li>\n<p>Connect your Google Sheets account for data storage and management. Check out the <a href=\"https://docs.n8n.io/integrations/builtin/credentials/google/\" rel=\"ugc nofollow\" target=\"_blank\">documentation page</a>.</p>\n</li>\n</ol>\n<h2>⚠️ Important Notes</h2>\n<ul>\n<li>WhatsApp allows automatic <em>custom text</em> messages only within 24 hours of the last user message. Outside with time frame only <em>approved template messages</em> can be sent.</li>\n<li>The workflow uses a Google Sheet to manage form submissions, incoming messages and prepare responses. You can replace these nodes and connect the WhatsApp bot with other systems.</li>\n</ul>\n</div><!--]-->",
  "readme_zh": "这个n8n工作流展示了如何通过WhatsApp商业机器人实现客户互动与预约管理的自动化。\n\n1. 用户提交Google表单后，将通过WhatsApp模板消息收到通知  \n2. 若用户向机器人发送消息，文本和用户数据将存储至[Google表格](https://docs.google.com/spreadsheets/d/1T-B0yepcrCHxQpn7Sj6QjTa0VqwwVBQhO5ZcIUSxWJE/edit?resourcekey=&gid=1621824221#gid=1621824221)  \n3. 回复用户时，只需在`ReplyText`列填写内容并将状态改为「Ready」，n8n将自动获取待发送回复并通过WhatsApp商业节点逐一送达  \n\n根据您的需求自定义此工作流，连接不同在线服务，提升客户沟通效率！🎉\n\n## 配置指南\n\n运行本工作流需要：\n\n1. 👇 在Meta商务管理平台创建WhatsApp模板消息  \n<details>![messagetemplate.png](https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/message_template_777896647b.png)</details>  \n\n2. 从Meta开发者平台获取访问令牌和WhatsApp商业账户ID（用于**WhatsApp商业节点**发送消息）  \n![credentialssetup.png](https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/credentials_setup_63b14394ca.png)  \n\n3. 使用Meta开发者平台的App ID和App Secret配置**WhatsApp触发器**节点  \n![credentialswebhook.png](https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/credentials_trigger_abefabb33b.png)  \n\n4. 复制**WhatsApp触发器**URL，将其添加为Meta开发者平台中的回调URL（用于接收消息和状态更新）  \n![credentialstrigger.png](https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/credentials_webhook_3f5d567c2e.png)  \n\n5. 连接Google表格账户进行数据存储管理，详见[文档页](https://docs.n8n.io/integrations/builtin/credentials/google/)  \n\n## ⚠️ 重要提示\n\n* WhatsApp仅允许在用户最后一条消息24小时内发送自动_自定义文本_，超时后只能发送_预审模板消息_  \n* 本工作流使用Google表格管理表单提交、消息接收和回复准备，您可替换这些节点将WhatsApp机器人接入其他系统",
  "title_zh": "🚀 用这款WhatsApp商务机器人提升您的客户服务体验！",
  "publish_date_zh": "最后更新于10个月前",
  "workflow_json_zh": "{\n  \"id\": \"NzoLNV2FbS4eurJ7\",\n  \"meta\": {\n    \"instanceId\": \"fb924c73af8f703905bc09c9ee8076f48c17b596ed05b18c0ff86915ef8a7c4a\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"name\": \"WhatsApp business bot\",\n  \"tags\": [],\n  \"nodes\": [\n    {\n      \"id\": \"4ca5e25a-f67b-4874-af20-680d1a6ac731\",\n      \"name\": \"Sent notification  template\",\n      \"type\": \"n8n-nodes-base.whatsApp\",\n      \"position\": [\n        1140,\n        320\n      ],\n      \"parameters\": {\n        \"template\": \"test_appointment_button|en_US\",\n        \"components\": {\n          \"component\": [\n            {\n              \"type\": \"header\",\n              \"headerParameters\": {\n                \"parameter\": [\n                  {\n                    \"text\": \"📅\"\n                  }\n                ]\n              }\n            },\n            {\n              \"bodyParameters\": {\n                \"parameter\": [\n                  {\n                    \"text\": \"={{ $json[\\\"Your name\\\"] }}\"\n                  },\n                  {\n                    \"text\": \"={{ DateTime.fromFormat($json[\\\"Please pick a day and time of your appointment\\\"], \\\"M/d/yyyy HH:mm:ss\\\").toLocaleString(DateTime.DATE_HUGE); }}\"\n                  },\n                  {\n                    \"text\": \"={{ $json[\\\"Please pick a day and time of your appointment\\\"].split(' ')[1] }}\"\n                  }\n                ]\n              }\n            }\n          ]\n        },\n        \"phoneNumberId\": \"=244242975437240\",\n        \"requestOptions\": {},\n        \"recipientPhoneNumber\": \"={{ $json[\\\"Your mobile number\\\"] }}\"\n      },\n      \"credentials\": {\n        \"whatsAppApi\": {\n          \"id\": \"mm0r1xKc6N8XktAD\",\n          \"name\": \"WhatsApp account 2\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"877c62c5-9869-48fc-bd74-35897dbd2276\",\n      \"name\": \"WhatsApp Trigger\",\n      \"type\": \"n8n-nodes-base.whatsAppTrigger\",\n      \"position\": [\n        700,\n        800\n      ],\n      \"webhookId\": \"b06b387a-481e-43f1-9035-01a87123ad88\",\n      \"parameters\": {\n        \"updates\": [\n          \"messages\"\n        ]\n      },\n      \"credentials\": {\n        \"whatsAppTriggerApi\": {\n          \"id\": \"bWqGRWeDXvGTdSq5\",\n          \"name\": \"WhatsApp Trigger\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"6c0edf48-20af-42fb-a436-aee3a9a4f6cc\",\n      \"name\": \"Is message?\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        920,\n        800\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"looseTypeValidation\": true\n        },\n        \"conditions\": {\n          \"options\": {\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"loose\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"8a765e57-8e39-4547-a99a-0458df2b75f4\",\n              \"operator\": {\n                \"type\": \"object\",\n                \"operation\": \"exists\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $json.messages[0] }}\",\n              \"rightValue\": \"\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"00006406-47be-4693-9763-a21d06b13d51\",\n      \"name\": \"Schedule Trigger\",\n      \"type\": \"n8n-nodes-base.scheduleTrigger\",\n      \"position\": [\n        680,\n        1184\n      ],\n      \"parameters\": {\n        \"rule\": {\n          \"interval\": [\n            {\n              \"field\": \"minutes\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"b9919c0d-eeb2-4a5e-a91f-3dad11b778f8\",\n      \"name\": \"Loop Over Items\",\n      \"type\": \"n8n-nodes-base.splitInBatches\",\n      \"position\": [\n        1120,\n        1184\n      ],\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"8f0dc664-715f-4074-b0f7-98d3c7f563a5\",\n      \"name\": \"Get new answers\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"position\": [\n        900,\n        1184\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"filtersUI\": {\n          \"values\": [\n            {\n              \"lookupValue\": \"Ready\",\n              \"lookupColumn\": \"Status\"\n            }\n          ]\n        },\n        \"sheetName\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": 1621824221,\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1T-B0yepcrCHxQpn7Sj6QjTa0VqwwVBQhO5ZcIUSxWJE/edit#gid=1621824221\",\n          \"cachedResultName\": \"WA-messages\"\n        },\n        \"documentId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"1T-B0yepcrCHxQpn7Sj6QjTa0VqwwVBQhO5ZcIUSxWJE\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1T-B0yepcrCHxQpn7Sj6QjTa0VqwwVBQhO5ZcIUSxWJE/edit?usp=drivesdk\",\n          \"cachedResultName\": \"WhatsApp Appointments (Responses)\"\n        }\n      },\n      \"credentials\": {\n        \"googleSheetsOAuth2Api\": {\n          \"id\": \"RtRiRezoxiWkzZQt\",\n          \"name\": \"Ted's Tech Talks Google account\"\n        }\n      },\n      \"typeVersion\": 4.4\n    },\n    {\n      \"id\": \"a7b07f7e-1287-4e8f-b28a-4c656f386f8a\",\n      \"name\": \"Reply to the user\",\n      \"type\": \"n8n-nodes-base.whatsApp\",\n      \"position\": [\n        1340,\n        1184\n      ],\n      \"parameters\": {\n        \"textBody\": \"={{ $json.ReplyText }}\",\n        \"operation\": \"send\",\n        \"phoneNumberId\": \"244242975437240\",\n        \"requestOptions\": {},\n        \"additionalFields\": {},\n        \"recipientPhoneNumber\": \"=+{{ $json.UserPhone }}\"\n      },\n      \"credentials\": {\n        \"whatsAppApi\": {\n          \"id\": \"mm0r1xKc6N8XktAD\",\n          \"name\": \"WhatsApp account 2\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"30f0a7da-c3ce-448c-ad05-b8b75da3d319\",\n      \"name\": \"Update message status\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"position\": [\n        1520,\n        1184\n      ],\n      \"parameters\": {\n        \"columns\": {\n          \"value\": {\n            \"Status\": \"Replied\",\n            \"row_number\": \"={{ $('Loop Over Items').item.json.row_number }}\"\n          },\n          \"schema\": [\n            {\n              \"id\": \"UserPhone\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"UserPhone\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"UserName\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"UserName\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"UserMessage\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"UserMessage\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"ReplyText\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"ReplyText\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Status\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"Status\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"row_number\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"readOnly\": true,\n              \"required\": false,\n              \"displayName\": \"row_number\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            }\n          ],\n          \"mappingMode\": \"defineBelow\",\n          \"matchingColumns\": [\n            \"row_number\"\n          ]\n        },\n        \"options\": {},\n        \"operation\": \"update\",\n        \"sheetName\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": 1621824221,\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1T-B0yepcrCHxQpn7Sj6QjTa0VqwwVBQhO5ZcIUSxWJE/edit#gid=1621824221\",\n          \"cachedResultName\": \"WA-messages\"\n        },\n        \"documentId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"1T-B0yepcrCHxQpn7Sj6QjTa0VqwwVBQhO5ZcIUSxWJE\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1T-B0yepcrCHxQpn7Sj6QjTa0VqwwVBQhO5ZcIUSxWJE/edit?usp=drivesdk\",\n          \"cachedResultName\": \"WhatsApp Appointments (Responses)\"\n        }\n      },\n      \"credentials\": {\n        \"googleSheetsOAuth2Api\": {\n          \"id\": \"RtRiRezoxiWkzZQt\",\n          \"name\": \"Ted's Tech Talks Google account\"\n        }\n      },\n      \"typeVersion\": 4.4\n    },\n    {\n      \"id\": \"95486a27-a667-4555-8924-53d46b19de43\",\n      \"name\": \"Wait 1 sec\",\n      \"type\": \"n8n-nodes-base.wait\",\n      \"position\": [\n        1700,\n        1184\n      ],\n      \"webhookId\": \"df4df4f8-378c-4228-b1e2-326b9d956e7e\",\n      \"parameters\": {\n        \"amount\": 1\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"21551e78-428f-4730-a337-48d1a80bf703\",\n      \"name\": \"New message from the user\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"position\": [\n        1140,\n        800\n      ],\n      \"parameters\": {\n        \"columns\": {\n          \"value\": {\n            \"Status\": \"New\",\n            \"UserName\": \"={{ $json.contacts[0].profile.name }}\",\n            \"UserPhone\": \"={{ $json.messages[0].from }}\",\n            \"UserMessage\": \"={{ $json.messages[0].text.body }}\"\n          },\n          \"schema\": [\n            {\n              \"id\": \"UserPhone\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"UserPhone\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"UserName\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"UserName\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"UserMessage\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"UserMessage\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"ReplyText\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"ReplyText\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Status\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"Status\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            }\n          ],\n          \"mappingMode\": \"defineBelow\",\n          \"matchingColumns\": []\n        },\n        \"options\": {},\n        \"operation\": \"append\",\n        \"sheetName\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": 1621824221,\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1T-B0yepcrCHxQpn7Sj6QjTa0VqwwVBQhO5ZcIUSxWJE/edit#gid=1621824221\",\n          \"cachedResultName\": \"WA-messages\"\n        },\n        \"documentId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"1T-B0yepcrCHxQpn7Sj6QjTa0VqwwVBQhO5ZcIUSxWJE\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1T-B0yepcrCHxQpn7Sj6QjTa0VqwwVBQhO5ZcIUSxWJE/edit?usp=drivesdk\",\n          \"cachedResultName\": \"WhatsApp Appointments (Responses)\"\n        }\n      },\n      \"credentials\": {\n        \"googleSheetsOAuth2Api\": {\n          \"id\": \"RtRiRezoxiWkzZQt\",\n          \"name\": \"Ted's Tech Talks Google account\"\n        }\n      },\n      \"typeVersion\": 4.4\n    },\n    {\n      \"id\": \"e1478757-0094-4bcb-998f-7e3e81958319\",\n      \"name\": \"Get new entries\",\n      \"type\": \"n8n-nodes-base.googleSheetsTrigger\",\n      \"position\": [\n        700,\n        320\n      ],\n      \"parameters\": {\n        \"event\": \"rowAdded\",\n        \"options\": {},\n        \"pollTimes\": {\n          \"item\": [\n            {\n              \"mode\": \"everyX\",\n              \"unit\": \"minutes\",\n              \"value\": 5\n            }\n          ]\n        },\n        \"sheetName\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": 470797219,\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1T-B0yepcrCHxQpn7Sj6QjTa0VqwwVBQhO5ZcIUSxWJE/edit#gid=470797219\",\n          \"cachedResultName\": \"Form Responses 1\"\n        },\n        \"documentId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"1T-B0yepcrCHxQpn7Sj6QjTa0VqwwVBQhO5ZcIUSxWJE\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1T-B0yepcrCHxQpn7Sj6QjTa0VqwwVBQhO5ZcIUSxWJE/edit?usp=drivesdk\",\n          \"cachedResultName\": \"WhatsApp Appointments (Responses)\"\n        }\n      },\n      \"credentials\": {\n        \"googleSheetsTriggerOAuth2Api\": {\n          \"id\": \"m33qCYf9eEvSgo0x\",\n          \"name\": \"Ted's Tech Talks Google Sheets Trigger\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"14811434-d716-4999-ab53-761fc355ee09\",\n      \"name\": \"User consented for WA messages?\",\n      \"type\": \"n8n-nodes-base.filter\",\n      \"position\": [\n        920,\n        320\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"b9bfdb33-0d9c-4320-b4bc-0bf0a469c8ca\",\n              \"operator\": {\n                \"name\": \"filter.operator.equals\",\n                \"type\": \"string\",\n                \"operation\": \"equals\"\n              },\n              \"leftValue\": \"={{ $json[\\\"I consent to receive WhatsApp notifications regarding my appointments\\\"] }}\",\n              \"rightValue\": \"Yes\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"20bec538-5d04-4382-ba88-a2c15421c8e7\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        660,\n        83.6407185628741\n      ],\n      \"parameters\": {\n        \"width\": 744.5356369854154,\n        \"height\": 404.8383233532937,\n        \"content\": \"## 发送WhatsApp（WA）模板消息  \\n当用户提交新的Google表单后触发。若用户在表单提交过程中勾选了接收WhatsApp通知选项，系统将通过WhatsApp发送模板消息。  \\n\\n**重要提示！**  \\n1. 需在[Meta商务管理平台](https://business.facebook.com/wa/manage/message-templates/)创建新的WA模板消息  \\n2. 发送外发WA消息需获取Access Token和WhatsApp商业账户ID。通过Meta开发者门户创建新应用后可获得这些凭证。具体操作请参考[n8n博客关于创建WhatsApp机器人的指南](https://blog.n8n.io/whatsapp-bot/#step-1-set-up-a-whatsapp-business-account)\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"ab7bd838-2ed1-4645-b3d9-69617a888090\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        660,\n        526.8263473053893\n      ],\n      \"parameters\": {\n        \"width\": 752.168692512586,\n        \"height\": 437.60479041916165,\n        \"content\": \"## 将WhatsApp用户消息存储至Google表格\\n\\n要接收用户消息，您需添加WhatsApp触发器节点。在凭证部分需提供App ID和App密钥，这些信息可从Meta开发者门户的\\\"基础应用设置\\\"界面获取。\\n\\n添加凭证后，请复制触发器URL，并将其粘贴至Meta开发者门户中WhatsApp配置窗口的\\\"回调URL\\\"字段。\\n\\n当触发器接收到WhatsApp的有效载荷时，系统会检查传入数据是否包含消息内容。若存在消息，则会在[Google表格](https://docs.google.com/spreadsheets/d/1T-B0yepcrCHxQpn7Sj6QjTa0VqwwVBQhO5ZcIUSxWJE/edit?gid=1621824221#gid=1621824221)中新增一行，记录用户数据及消息文本。\\n\\n需注意，WhatsApp触发器同时会接收状态通知（如\\\"消息已发送\\\"、\\\"消息已读\\\"等），本工作流中将自动忽略此类通知。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"b0c62bd4-d6bc-425b-b506-b6820b3e6dc5\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        660,\n        1000\n      ],\n      \"parameters\": {\n        \"width\": 1197.9640718562885,\n        \"height\": 369.34131736526945,\n        \"content\": \"## 通过WhatsApp回复用户\\nWhatsApp仅允许在用户最后一条消息发出后的**24小时时间窗口内**，通过机器人发送**含自定义文本**的自动消息。\\n\\n当用户向WhatsApp机器人发送消息后，[Google表格](https://docs.google.com/spreadsheets/d/1T-B0yepcrCHxQpn7Sj6QjTa0VqwwVBQhO5ZcIUSxWJE/edit?gid=1621824221#gid=1621824221)中将新增一行，状态标记为\\\"New\\\"。\\n\\n在`ReplyText`列输入回复内容，并将状态改为\\\"Ready\\\"。数分钟后，n8n定时器将获取Google表格中所有\\\"Ready\\\"状态的回复，并逐一发送给对应接收者。\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"active\": true,\n  \"pinData\": {},\n  \"settings\": {\n    \"callerPolicy\": \"workflowsFromSameOwner\",\n    \"executionOrder\": \"v1\",\n    \"saveManualExecutions\": true,\n    \"saveDataSuccessExecution\": \"all\"\n  },\n  \"versionId\": \"66863e99-c756-48d5-b8e0-af0907623e8a\",\n  \"connections\": {\n    \"Wait 1 sec\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Loop Over Items\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Is message?\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"New message from the user\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get new answers\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Loop Over Items\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get new entries\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"User consented for WA messages?\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Loop Over Items\": {\n      \"main\": [\n        [],\n        [\n          {\n            \"node\": \"Reply to the user\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Schedule Trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get new answers\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"WhatsApp Trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Is message?\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Reply to the user\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Update message status\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Update message status\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Wait 1 sec\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"User consented for WA messages?\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Sent notification  template\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}