{
  "title": "create single new masked email address with fastmail",
  "url": "https://n8n.io/workflows/2471-create-single-new-masked-email-address-with-fastmail/",
  "category": "Product",
  "category_url": "https://n8n.io/workflows/categories/product/?count=20",
  "author": "Vitali",
  "publish_date": "Last update 6 months ago",
  "publish_date_absolute": "2024-11-23",
  "content": "",
  "workflow_json": "{\"meta\":{\"instanceId\":\"04ab549d8bbb435ec33b81e4e29965c46cf6f0f9e7afe631018b5e34c8eead58\"},\"nodes\":[{\"id\":\"9fdbfdc1-67f3-4c8b-861c-9e5840b002ec\",\"name\":\"Session\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[780,300],\"parameters\":{\"url\":\"https://api.fastmail.com/jmap/session\",\"options\":{},\"authentication\":\"genericCredentialType\",\"genericAuthType\":\"httpHeaderAuth\"},\"credentials\":{\"httpHeaderAuth\":{\"id\":\"BWkbkxgDD4hkRCvs\",\"name\":\"Fastmail Masked E-Mail Addresses\"}},\"typeVersion\":4.2},{\"id\":\"215d96fa-6bda-4e8c-884a-eb9a8db0838f\",\"name\":\"create random masked email\",\"type\":\"n8n-nodes-base.httpRequest\",\"notes\":\"https://api.fastmail.com/.well-known/jmap\\n\\nhttps://api.fastmail.com/jmap/session\",\"position\":[1280,300],\"parameters\":{\"url\":\"https://api.fastmail.com/jmap/api/\",\"method\":\"POST\",\"options\":{},\"jsonBody\":\"={\\n  \\\"using\\\": [\\n    \\\"urn:ietf:params:jmap:core\\\",\\n    \\\"https://www.fastmail.com/dev/maskedemail\\\"\\n  ],\\n  \\\"methodCalls\\\": [\\n    [\\n      \\\"MaskedEmail/set\\\",\\n      {\\n        \\\"accountId\\\": \\\"{{ $('Session').item.json.primaryAccounts['https://www.fastmail.com/dev/maskedemail'] }}\\\",\\n        \\\"create\\\": {\\n          \\\"maskedEmailId1\\\": {\\n            \\\"description\\\": \\\"{{ $json.description }}\\\",\\n            \\\"state\\\": \\\"{{ $json.state }}\\\"\\n          }\\n        }\\n      },\\n      \\\"c1\\\"\\n    ]\\n  ]\\n}\\n\",\"sendBody\":true,\"sendHeaders\":true,\"specifyBody\":\"json\",\"authentication\":\"genericCredentialType\",\"genericAuthType\":\"httpHeaderAuth\",\"headerParameters\":{\"parameters\":[{\"name\":\"Content-Type\",\"value\":\"application/json\"}]}},\"credentials\":{\"httpHeaderAuth\":{\"id\":\"BWkbkxgDD4hkRCvs\",\"name\":\"Fastmail Masked E-Mail Addresses\"}},\"typeVersion\":4.2},{\"id\":\"237f6596-f8df-4c21-a2fa-44e935a72d56\",\"name\":\"Respond to Webhook\",\"type\":\"n8n-nodes-base.respondToWebhook\",\"position\":[1800,300],\"parameters\":{\"options\":{},\"respondWith\":\"text\",\"responseBody\":\"={{ $json }}\"},\"typeVersion\":1.1},{\"id\":\"6699eb83-a41e-44bc-b332-77e407fb3542\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[460,480],\"parameters\":{\"width\":1654.8203324571532,\"height\":471.75430470511367,\"content\":\"### Template Description\\nThis n8n workflow template allows you to create a masked email address using the Fastmail API, triggered by a webhook. This is especially useful for generating disposable email addresses for privacy-conscious users or for testing purposes.\\n\\n#### Workflow Details:\\n1. **Webhook Trigger**: The workflow is initiated by sending a POST request to a specific webhook. You can include `state` and `description` in your request body to customize the masked email's state and description.\\n2. **Session Retrieval**: The workflow makes an HTTP request to the Fastmail API to retrieve session information. It uses this data to authenticate further requests.\\n3. **Create Masked Email**: Using the retrieved session data, the workflow sends a POST request to Fastmail's JMAP API to create a masked email. It uses the provided state and description from the webhook payload.\\n4. **Prepare Output**: Once the masked email is successfully created, the workflow extracts the email address and attaches the description for further processing.\\n5. **Respond to Webhook**: Finally, the workflow responds to the original POST request with the newly created masked email and its description.\\n\\n#### Requirements:\\n- **Fastmail API Access**: You will need valid API credentials for Fastmail configured with HTTP Header Authentication.\\n- **Authorization Setup**: Optionally set up authorization if your webhook is exposed to the internet to prevent misuse.\\n- **Custom Webhook Request**: Use a tool like `curl` or create a shortcut on macOS/iOS to send the POST request to the webhook with the necessary JSON payload, like so:\\n  \\n  ```bash\\n  curl -X POST -H 'Content-Type: application/json' https://your-n8n-instance/webhook/87f9abd1-2c9b-4d1f-8c7f-2261f4698c3c -d '{\\\"state\\\": \\\"pending\\\", \\\"description\\\": \\\"my mega fancy masked email\\\"}'\\n  ```\\n\\nThis template simplifies the process of integrating masked email functionality into your projects or workflows and can be extended for various use cases.\"},\"typeVersion\":1},{\"id\":\"0c5d6d5a-ad0f-451e-9075-1009c8bf7212\",\"name\":\"get fields for creation\",\"type\":\"n8n-nodes-base.set\",\"position\":[1000,300],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"870bb03d-c672-49d6-9652-5a0233b16eb2\",\"name\":\"state\",\"type\":\"string\",\"value\":\"={{ $('Webhook').item.json.body.state ?? \\\"pending\\\" }}\"},{\"id\":\"ac9b45a0-885f-48b2-b0ec-e38c79080045\",\"name\":\"description\",\"type\":\"string\",\"value\":\"={{ $('Webhook').item.json.body.description ?? \\\"Test via N8n\\\" }}\"}]}},\"typeVersion\":3.4},{\"id\":\"be7ba978-00d7-4fb1-9e1b-e3f83285e6fb\",\"name\":\"prepare output\",\"type\":\"n8n-nodes-base.set\",\"position\":[1540,300],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"19a09822-7ae0-4884-9192-c6e5bc3393a8\",\"name\":\"email\",\"type\":\"string\",\"value\":\"={{ $json.methodResponses[0][1].created.maskedEmailId1.email }}\"},{\"id\":\"ae8a1fe4-3010-4db8-aa88-f6074cae3006\",\"name\":\"desciption\",\"type\":\"string\",\"value\":\"={{ $('get fields for creation').item.json.description }}\"}]}},\"typeVersion\":3.4},{\"id\":\"dd014889-81eb-4a94-886e-4fe084c504ff\",\"name\":\"Webhook\",\"type\":\"n8n-nodes-base.webhook\",\"position\":[540,300],\"webhookId\":\"87f9abd1-2c9b-4d1f-8c7f-2261f4698c3c\",\"parameters\":{\"path\":\"createMaskedEmail\",\"options\":{},\"httpMethod\":\"POST\",\"responseMode\":\"responseNode\"},\"typeVersion\":2}],\"pinData\":{},\"connections\":{\"Session\":{\"main\":[[{\"node\":\"get fields for creation\",\"type\":\"main\",\"index\":0}]]},\"Webhook\":{\"main\":[[{\"node\":\"Session\",\"type\":\"main\",\"index\":0}]]},\"prepare output\":{\"main\":[[{\"node\":\"Respond to Webhook\",\"type\":\"main\",\"index\":0}]]},\"get fields for creation\":{\"main\":[[{\"node\":\"create random masked email\",\"type\":\"main\",\"index\":0}]]},\"create random masked email\":{\"main\":[[{\"node\":\"prepare output\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "### Template Description\n\nThis n8n workflow template allows you to create a masked email address using the Fastmail API, triggered by a webhook. This is especially useful for generating disposable email addresses for privacy-conscious users or for testing purposes.\n\n#### Workflow Details:\n\n  1. **Webhook Trigger** : The workflow is initiated by sending a POST request to a specific webhook. You can include `state` and `description` in your request body to customize the masked email's state and description.\n  2. **Session Retrieval** : The workflow makes an HTTP request to the Fastmail API to retrieve session information. It uses this data to authenticate further requests.\n  3. **Create Masked Email** : Using the retrieved session data, the workflow sends a POST request to Fastmail's JMAP API to create a masked email. It uses the provided state and description from the webhook payload.\n  4. **Prepare Output** : Once the masked email is successfully created, the workflow extracts the email address and attaches the description for further processing.\n  5. **Respond to Webhook** : Finally, the workflow responds to the original POST request with the newly created masked email and its description.\n\n\n\n#### Requirements:\n\n  * **Fastmail API Access** : You will need valid API credentials for Fastmail configured with HTTP Header Authentication.\n\n  * **Authorization Setup** : Optionally set up authorization if your webhook is exposed to the internet to prevent misuse.\n\n  * **Custom Webhook Request** : Use a tool like `curl` or create a shortcut on macOS/iOS to send the POST request to the webhook with the necessary JSON payload, like so:\n        \n        curl -X POST -H 'Content-Type: application/json' https://your-n8n-instance/webhook/87f9abd1-2c9b-4d1f-8c7f-2261f4698c3c -d '{\"state\": \"pending\", \"description\": \"my mega fancy masked email\"}'\n        \n\n\n\n\nThis template simplifies the process of integrating masked email functionality into your projects or workflows and can be extended for various use cases.\n\nFeel free to use the companion shortcut I've also created. Please update the authorization header in the shortcut if needed.\n\n<https://www.icloud.com/shortcuts/ac249b50eab34c04acd9fb522f9f7068>\n",
  "readme_html": "<!--[--><div data-v-006f9244=\"\"><h3>Template Description</h3>\n<p>This n8n workflow template allows you to create a masked email address using the Fastmail API, triggered by a webhook. This is especially useful for generating disposable email addresses for privacy-conscious users or for testing purposes.</p>\n<h4>Workflow Details:</h4>\n<ol>\n<li><strong>Webhook Trigger</strong>: The workflow is initiated by sending a POST request to a specific webhook. You can include <code>state</code> and <code>description</code> in your request body to customize the masked email's state and description.</li>\n<li><strong>Session Retrieval</strong>: The workflow makes an HTTP request to the Fastmail API to retrieve session information. It uses this data to authenticate further requests.</li>\n<li><strong>Create Masked Email</strong>: Using the retrieved session data, the workflow sends a POST request to Fastmail's JMAP API to create a masked email. It uses the provided state and description from the webhook payload.</li>\n<li><strong>Prepare Output</strong>: Once the masked email is successfully created, the workflow extracts the email address and attaches the description for further processing.</li>\n<li><strong>Respond to Webhook</strong>: Finally, the workflow responds to the original POST request with the newly created masked email and its description.</li>\n</ol>\n<h4>Requirements:</h4>\n<ul>\n<li>\n<p><strong>Fastmail API Access</strong>: You will need valid API credentials for Fastmail configured with HTTP Header Authentication.</p>\n</li>\n<li>\n<p><strong>Authorization Setup</strong>: Optionally set up authorization if your webhook is exposed to the internet to prevent misuse.</p>\n</li>\n<li>\n<p><strong>Custom Webhook Request</strong>: Use a tool like <code>curl</code> or create a shortcut on macOS/iOS to send the POST request to the webhook with the necessary JSON payload, like so:</p>\n<pre><code>curl -X POST -H 'Content-Type: application/json' https://your-n8n-instance/webhook/87f9abd1-2c9b-4d1f-8c7f-2261f4698c3c -d '{\"state\": \"pending\", \"description\": \"my mega fancy masked email\"}'\n</code></pre>\n</li>\n</ul>\n<p>This template simplifies the process of integrating masked email functionality into your projects or workflows and can be extended for various use cases.</p>\n<p>Feel free to use the companion shortcut I've also created. Please update the authorization header in the shortcut if needed.</p>\n<p><a href=\"https://www.icloud.com/shortcuts/ac249b50eab34c04acd9fb522f9f7068\" rel=\"ugc nofollow\" target=\"_blank\">https://www.icloud.com/shortcuts/ac249b50eab34c04acd9fb522f9f7068</a></p>\n</div><!--]-->",
  "readme_zh": "### 模板描述\n\n该n8n工作流模板允许您通过Fastmail API创建匿名邮箱地址，并由Webhook触发。此功能特别适合注重隐私的用户生成一次性邮箱地址，或用于测试场景。\n\n#### 工作流细节：\n\n1. **Webhook触发器**：通过向指定Webhook发送POST请求触发工作流。请求体中可包含`state`和`description`参数来自定义匿名邮箱的状态和描述。\n2. **会话获取**：工作流向Fastmail API发起HTTP请求获取会话信息，该数据将用于后续请求的身份验证。\n3. **创建匿名邮箱**：利用获取的会话数据，工作流向Fastmail的JMAP API发送POST请求创建匿名邮箱，并使用Webhook负载中提供的状态和描述参数。\n4. **准备输出**：成功创建匿名邮箱后，工作流提取邮箱地址并附加描述信息以供后续处理。\n5. **响应Webhook**：最终工作流将新创建的匿名邮箱及其描述信息返回给原始POST请求。\n\n#### 使用要求：\n\n* **Fastmail API访问权限**：需要配置有效的Fastmail API凭证（采用HTTP头认证方式）。\n* **授权设置**：若Webhook暴露在公网，建议设置授权以防止滥用。\n* **自定义Webhook请求**：可通过`curl`命令或macOS/iOS快捷指令工具发送带JSON负载的POST请求，例如：\n        \n        curl -X POST -H 'Content-Type: application/json' https://your-n8n-instance/webhook/87f9abd1-2c9b-4d1f-8c7f-2261f4698c3c -d '{\"state\": \"pending\", \"description\": \"我的高级匿名邮箱\"}'\n\n本模板简化了将匿名邮箱功能集成到项目或工作流中的过程，并可根据不同使用场景进行扩展。\n\n欢迎使用我同步创建的快捷指令配套工具，请根据需要更新快捷指令中的授权头信息：\n\n<https://www.icloud.com/shortcuts/ac249b50eab34c04acd9fb522f9f7068>",
  "title_zh": "使用Fastmail创建单个新的掩码邮箱地址",
  "publish_date_zh": "最后更新于6个月前",
  "workflow_json_zh": "{\n  \"meta\": {\n    \"instanceId\": \"04ab549d8bbb435ec33b81e4e29965c46cf6f0f9e7afe631018b5e34c8eead58\"\n  },\n  \"nodes\": [\n    {\n      \"id\": \"9fdbfdc1-67f3-4c8b-861c-9e5840b002ec\",\n      \"name\": \"Session\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        780,\n        300\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.fastmail.com/jmap/session\",\n        \"options\": {},\n        \"authentication\": \"genericCredentialType\",\n        \"genericAuthType\": \"httpHeaderAuth\"\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": {\n          \"id\": \"BWkbkxgDD4hkRCvs\",\n          \"name\": \"Fastmail Masked E-Mail Addresses\"\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"215d96fa-6bda-4e8c-884a-eb9a8db0838f\",\n      \"name\": \"create random masked email\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"notes\": \"https://api.fastmail.com/.well-known/jmap\\n\\nhttps://api.fastmail.com/jmap/session\",\n      \"position\": [\n        1280,\n        300\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.fastmail.com/jmap/api/\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"jsonBody\": \"={\\n  \\\"using\\\": [\\n    \\\"urn:ietf:params:jmap:core\\\",\\n    \\\"https://www.fastmail.com/dev/maskedemail\\\"\\n  ],\\n  \\\"methodCalls\\\": [\\n    [\\n      \\\"MaskedEmail/set\\\",\\n      {\\n        \\\"accountId\\\": \\\"{{ $('Session').item.json.primaryAccounts['https://www.fastmail.com/dev/maskedemail'] }}\\\",\\n        \\\"create\\\": {\\n          \\\"maskedEmailId1\\\": {\\n            \\\"description\\\": \\\"{{ $json.description }}\\\",\\n            \\\"state\\\": \\\"{{ $json.state }}\\\"\\n          }\\n        }\\n      },\\n      \\\"c1\\\"\\n    ]\\n  ]\\n}\\n\",\n        \"sendBody\": true,\n        \"sendHeaders\": true,\n        \"specifyBody\": \"json\",\n        \"authentication\": \"genericCredentialType\",\n        \"genericAuthType\": \"httpHeaderAuth\",\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"Content-Type\",\n              \"value\": \"application/json\"\n            }\n          ]\n        }\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": {\n          \"id\": \"BWkbkxgDD4hkRCvs\",\n          \"name\": \"Fastmail Masked E-Mail Addresses\"\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"237f6596-f8df-4c21-a2fa-44e935a72d56\",\n      \"name\": \"Respond to Webhook\",\n      \"type\": \"n8n-nodes-base.respondToWebhook\",\n      \"position\": [\n        1800,\n        300\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"respondWith\": \"text\",\n        \"responseBody\": \"={{ $json }}\"\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"6699eb83-a41e-44bc-b332-77e407fb3542\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        460,\n        480\n      ],\n      \"parameters\": {\n        \"width\": 1654.8203324571532,\n        \"height\": 471.75430470511367,\n        \"content\": \"### 模板描述  \\n本n8n工作流模板通过Webhook触发，利用Fastmail API创建匿名邮箱地址。该功能特别适合注重隐私的用户生成一次性邮箱，或用于测试场景。  \\n\\n#### 工作流细节：  \\n1. **Webhook触发**：通过向指定Webhook发送POST请求启动工作流。请求体中可包含`state`和`description`参数，用于自定义匿名邮箱的状态和描述。  \\n2. **会话获取**：工作流向Fastmail API发起HTTP请求获取会话信息，后续请求将使用该数据进行身份验证。  \\n3. **创建匿名邮箱**：利用获取的会话数据，工作流向Fastmail的JMAP API发送POST请求生成匿名邮箱，并应用Webhook传入的状态和描述参数。  \\n4. **准备输出**：匿名邮箱创建成功后，工作流提取邮箱地址并附加描述信息以供后续处理。  \\n5. **响应Webhook**：最终工作流将新创建的匿名邮箱地址及其描述作为响应返回给初始POST请求。  \\n\\n#### 需求说明：  \\n- **Fastmail API权限**：需配置有效的Fastmail API凭证（采用HTTP头认证方式）。  \\n- **授权设置**（可选）：若Webhook暴露在公网，建议设置授权以防止滥用。  \\n- **自定义Webhook请求**：可通过`curl`命令或macOS/iOS快捷指令发送带JSON载荷的POST请求至Webhook，例如：  \\n\\n  ```bash  \\n  curl -X POST -H 'Content-Type: application/json' https://your-n8n-instance/webhook/87f9abd1-2c9b-4d1f-8c7f-2261f4698c3c -d '{\\\"state\\\": \\\"pending\\\", \\\"description\\\": \\\"我的高级匿名邮箱\\\"}'  \\n  ```  \\n\\n本模板简化了将匿名邮箱功能集成到项目或工作流中的流程，并支持根据需求扩展更多应用场景。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"0c5d6d5a-ad0f-451e-9075-1009c8bf7212\",\n      \"name\": \"get fields for creation\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        1000,\n        300\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"870bb03d-c672-49d6-9652-5a0233b16eb2\",\n              \"name\": \"state\",\n              \"type\": \"string\",\n              \"value\": \"={{ $('Webhook').item.json.body.state ?? \\\"pending\\\" }}\"\n            },\n            {\n              \"id\": \"ac9b45a0-885f-48b2-b0ec-e38c79080045\",\n              \"name\": \"description\",\n              \"type\": \"string\",\n              \"value\": \"={{ $('Webhook').item.json.body.description ?? \\\"Test via N8n\\\" }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"be7ba978-00d7-4fb1-9e1b-e3f83285e6fb\",\n      \"name\": \"prepare output\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        1540,\n        300\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"19a09822-7ae0-4884-9192-c6e5bc3393a8\",\n              \"name\": \"email\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.methodResponses[0][1].created.maskedEmailId1.email }}\"\n            },\n            {\n              \"id\": \"ae8a1fe4-3010-4db8-aa88-f6074cae3006\",\n              \"name\": \"desciption\",\n              \"type\": \"string\",\n              \"value\": \"={{ $('get fields for creation').item.json.description }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"dd014889-81eb-4a94-886e-4fe084c504ff\",\n      \"name\": \"Webhook\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"position\": [\n        540,\n        300\n      ],\n      \"webhookId\": \"87f9abd1-2c9b-4d1f-8c7f-2261f4698c3c\",\n      \"parameters\": {\n        \"path\": \"createMaskedEmail\",\n        \"options\": {},\n        \"httpMethod\": \"POST\",\n        \"responseMode\": \"responseNode\"\n      },\n      \"typeVersion\": 2\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"Session\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"get fields for creation\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Webhook\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Session\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"prepare output\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Respond to Webhook\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"get fields for creation\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"create random masked email\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"create random masked email\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"prepare output\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}