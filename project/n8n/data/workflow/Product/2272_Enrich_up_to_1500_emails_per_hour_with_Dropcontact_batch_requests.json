{
  "title": "Enrich up to 1500 emails per hour with Dropcontact batch requests",
  "url": "https://n8n.io/workflows/2272-enrich-up-to-1500-emails-per-hour-with-dropcontact-batch-requests/",
  "category": "Product",
  "category_url": "https://n8n.io/workflows/categories/product/?count=20",
  "author": "victor de coster",
  "publish_date": "Last update a year ago",
  "publish_date_absolute": "",
  "content": "",
  "workflow_json": "{\"meta\":{\"instanceId\":\"a2435d996b378e3a6fdef0468d70285e3aa0fbd0004de817bfc80e80afee4e7b\"},\"nodes\":[{\"id\":\"5fa5ccd8-81be-45a2-ac00-7ef28148c0c7\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[700,460],\"parameters\":{\"width\":1767.817629414989,\"height\":470.03830555074103,\"content\":\"## DROPCONTACT 250 BATCH ASYNCHRONOUSLY \\n## 1500/HOUR REQUESTS\\n**Double click** to edit me. [Guide](https://docs.n8n.io/workflows/sticky-notes/)\"},\"typeVersion\":1},{\"id\":\"9c6826a3-ec94-4ff4-92a6-0ff7fa22349e\",\"name\":\"Aggregate\",\"type\":\"n8n-nodes-base.aggregate\",\"position\":[1000,620],\"parameters\":{\"options\":{},\"fieldsToAggregate\":{\"fieldToAggregate\":[{\"fieldToAggregate\":\"first_name\"},{\"fieldToAggregate\":\"last_name\"},{\"fieldToAggregate\":\"domain\"},{\"fieldToAggregate\":\"phantom_linkedin\"},{\"fieldToAggregate\":\"full_name\"}]}},\"typeVersion\":1},{\"id\":\"c0d5b884-de58-42f3-bc50-0c7e6ca5e576\",\"name\":\"PROFILES QUERY\",\"type\":\"n8n-nodes-base.postgres\",\"position\":[560,600],\"parameters\":{\"query\":\"select first_name, last_name, domain, full_name\\nfrom accounts a \\nleft join profiles p on a.company_id = p.company_id \\nwhere title = 'Bestuurder' and p.email is null and a.domain != ''\\nand domain NOT IN ('gmail.com', 'hotmail.com', 'hotmail.be', 'hotmail%','outlook.com','telenet.be', 'live.be', 'skynet.be','SKYNET%', 'yahoo.com' , 'yahoo%', 'msn%', 'hotmail', 'belgacom%') and dropcontact_found is null \\nlimit 1000\\n\",\"options\":{},\"operation\":\"executeQuery\"},\"credentials\":{\"postgres\":{\"id\":\"pYryZTyzA44MBOiN\",\"name\":\"Postgres account\"}},\"typeVersion\":2.3},{\"id\":\"ddf11e8d-f1db-406c-9c2a-ab5a510fee47\",\"name\":\"BULK DROPCONTACT REQUESTS\",\"type\":\"n8n-nodes-base.httpRequest\",\"onError\":\"continueRegularOutput\",\"maxTries\":3,\"position\":[1360,620],\"parameters\":{\"url\":\"https://api.dropcontact.io/batch\",\"method\":\"POST\",\"options\":{},\"jsonBody\":\"={{ $json.toJsonString()}}\\n\",\"sendBody\":true,\"sendHeaders\":true,\"specifyBody\":\"json\",\"authentication\":\"predefinedCredentialType\",\"headerParameters\":{\"parameters\":[{\"name\":\"X-Access-Token\",\"value\":\"apiKey\"}]},\"nodeCredentialType\":\"dropcontactApi\"},\"credentials\":{\"dropcontactApi\":{\"id\":\"kUzEc345AiEZDjK7\",\"name\":\"Dropcontact Willow account\"}},\"retryOnFail\":true,\"typeVersion\":4.2,\"waitBetweenTries\":600},{\"id\":\"606e2898-eb44-46c2-9576-8e3cc1bd2578\",\"name\":\"Loop Over Items2\",\"type\":\"n8n-nodes-base.splitInBatches\",\"position\":[780,600],\"parameters\":{\"options\":{},\"batchSize\":250},\"typeVersion\":3},{\"id\":\"ace20caa-3c9b-432a-a572-6bad48181347\",\"name\":\"Split Out\",\"type\":\"n8n-nodes-base.splitOut\",\"onError\":\"continueRegularOutput\",\"position\":[1940,600],\"parameters\":{\"options\":{},\"fieldToSplitOut\":\"data\"},\"typeVersion\":1},{\"id\":\"2c581721-a399-4d48-98a1-cee82246c4f4\",\"name\":\"Postgres\",\"type\":\"n8n-nodes-base.postgres\",\"onError\":\"continueErrorOutput\",\"maxTries\":2,\"position\":[2100,600],\"parameters\":{\"table\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"profiles\",\"cachedResultName\":\"profiles\"},\"schema\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"public\"},\"columns\":{\"value\":{\"email\":\"={{ $json.email[0].email }}\",\"phone\":\"={{ $json.phone }}\",\"full_name\":\"={{ $json.custom_fields.full_name }}\",\"dropcontact_found\":\"={{ true }}\",\"email_qualification\":\"={{ $json.email[0].qualification }}\"},\"schema\":[{\"id\":\"company_id\",\"type\":\"number\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"company_id\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"create_date\",\"type\":\"dateTime\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"create_date\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"phone\",\"type\":\"string\",\"display\":true,\"required\":false,\"displayName\":\"phone\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"first_name\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"first_name\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"last_name\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"last_name\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"title\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"title\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"start_date_raw\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"start_date_raw\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"full_name\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"full_name\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"seniority\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"seniority\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"email\",\"type\":\"string\",\"display\":true,\"required\":false,\"displayName\":\"email\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"email_qualification\",\"type\":\"string\",\"display\":true,\"required\":false,\"displayName\":\"email_qualification\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"dropcontact_found\",\"type\":\"boolean\",\"display\":true,\"required\":false,\"displayName\":\"dropcontact_found\",\"defaultMatch\":false,\"canBeUsedToMatch\":true}],\"mappingMode\":\"defineBelow\",\"matchingColumns\":[\"full_name\"]},\"options\":{\"replaceEmptyStrings\":true},\"operation\":\"update\"},\"credentials\":{\"postgres\":{\"id\":\"pYryZTyzA44MBOiN\",\"name\":\"Postgres account\"}},\"retryOnFail\":true,\"typeVersion\":2.3,\"alwaysOutputData\":true},{\"id\":\"7e94c87d-3f83-4fd1-877d-3463dce3cdd1\",\"name\":\"BULK DROPCONTACT DOWNLOAD\",\"type\":\"n8n-nodes-base.httpRequest\",\"onError\":\"continueErrorOutput\",\"position\":[1740,620],\"parameters\":{\"url\":\"=https://api.dropcontact.io/batch/{{ $json.request_id }}\",\"options\":{},\"authentication\":\"predefinedCredentialType\",\"nodeCredentialType\":\"dropcontactApi\"},\"credentials\":{\"dropcontactApi\":{\"id\":\"kUzEc345AiEZDjK7\",\"name\":\"Dropcontact Willow account\"}},\"typeVersion\":4.2},{\"id\":\"17aab456-72dc-482d-b5e3-b3dfb3a3b3f7\",\"name\":\"Wait2\",\"type\":\"n8n-nodes-base.wait\",\"position\":[1540,620],\"webhookId\":\"de669d58-95c5-480e-9acc-17c396859fcf\",\"parameters\":{\"amount\":600},\"typeVersion\":1.1},{\"id\":\"148cec0c-985b-4c82-8835-fff8eacf6e38\",\"name\":\"DATA TRANSFORMATION\",\"type\":\"n8n-nodes-base.code\",\"position\":[1180,620],\"parameters\":{\"mode\":\"runOnceForEachItem\",\"language\":\"python\",\"pythonCode\":\"import json\\n\\n## Load & access the existing JSON data\\nfor item in _input.all():\\n  data = item.json \\n\\n  # Define the output data structure\\n  output_data = {\\\"data\\\": [], \\\"siren\\\": True}\\n\\n  # Unpack data from the single element list\\n  first_names = data[\\\"first_name\\\"]\\n  last_names = data[\\\"last_name\\\"]\\n  domain = data[\\\"domain\\\"]\\n  full_name = data[\\\"full_name\\\"]\\n\\n    # Combine data into a list of dictionaries\\n  transformed_data = []\\n  for i, (first_name, last_name, domain_name, full_name_value) in enumerate(zip(first_names, last_names, domain, full_name)):\\n    transformed_data.append({\\n      \\\"first_name\\\": first_name,\\n      \\\"last_name\\\": last_name,\\n      \\\"website\\\": domain_name,\\n      \\\"custom_fields\\\": {\\n        \\\"full_name\\\": full_name_value}\\n    })\\n\\n  output_data[\\\"data\\\"] = transformed_data\\n\\n  return output_data \\n\\n\"},\"typeVersion\":2,\"alwaysOutputData\":true},{\"id\":\"b233abfe-cfae-474a-b86d-29e56e1f3ac7\",\"name\":\"Slack\",\"type\":\"n8n-nodes-base.slack\",\"position\":[1740,820],\"parameters\":{\"text\":\"Dropcontact Credits issue: url \",\"user\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"\"},\"select\":\"user\",\"otherOptions\":{}},\"typeVersion\":2.1},{\"id\":\"d4e90677-89c9-418b-b618-f751b797d395\",\"name\":\"Schedule Trigger\",\"type\":\"n8n-nodes-base.scheduleTrigger\",\"position\":[380,600],\"parameters\":{\"rule\":{\"interval\":[{}]}},\"typeVersion\":1.1}],\"pinData\":{},\"connections\":{\"Wait2\":{\"main\":[[{\"node\":\"BULK DROPCONTACT DOWNLOAD\",\"type\":\"main\",\"index\":0}]]},\"Postgres\":{\"main\":[[{\"node\":\"Loop Over Items2\",\"type\":\"main\",\"index\":0}]]},\"Aggregate\":{\"main\":[[{\"node\":\"DATA TRANSFORMATION\",\"type\":\"main\",\"index\":0}]]},\"Split Out\":{\"main\":[[{\"node\":\"Postgres\",\"type\":\"main\",\"index\":0}]]},\"PROFILES QUERY\":{\"main\":[[{\"node\":\"Loop Over Items2\",\"type\":\"main\",\"index\":0}]]},\"Loop Over Items2\":{\"main\":[null,[{\"node\":\"Aggregate\",\"type\":\"main\",\"index\":0}]]},\"Schedule Trigger\":{\"main\":[[{\"node\":\"PROFILES QUERY\",\"type\":\"main\",\"index\":0}]]},\"DATA TRANSFORMATION\":{\"main\":[[{\"node\":\"BULK DROPCONTACT REQUESTS\",\"type\":\"main\",\"index\":0}]]},\"BULK DROPCONTACT DOWNLOAD\":{\"main\":[[{\"node\":\"Split Out\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Slack\",\"type\":\"main\",\"index\":0}]]},\"BULK DROPCONTACT REQUESTS\":{\"main\":[[{\"node\":\"Wait2\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "The template allows to make Dropcontact batch requests up to 250 requests every 10 minutes (1500/hour). Valuable if high volume email enrichment is expected.\n\nDropcontact will look for email & basic email qualification if first_name, last_name, company_name is provided.\n\n+++++++++++++++++++++++++++++++++++++++++\n\nStep 1:  \nNode \"Profiles Query\"  \nConnect your own source (Airtable, Google Sheets, Supabase,...) the template is using Postgres by default.\n\n* * *\n\nNote I:  \nBe careful your source is only returning a maximum of 250 items.\n\n* * *\n\nNote II:  \nThe next node uses the next variables, make sure you can map these from your source file:\n\n  * first_name\n  * last_name\n  * website (company_name would work too)\n  * full_name (see note)\n\n\n\n* * *\n\nNote III:  \nThis template is using the Dropcontact Batch API, which works in a POST & GET setup. Not a GET request only to retrieve data, as Dropcontact needs to process the batch data load properly.\n\n+++++++++++++++++++++++++++++++++++++++++\n\nStep 2:  \nNode \"Data Transformation\"  \nWill transform the input variables in the proper json format. This json format is expected from the Dropcontact API to make a batch request.\n\n\"full_name\" is being used as a custom identifier to update the returned email to the proper contact in your source database.\n\nTo make things easy, use a unique identiefer in the full_name variable.\n\n+++++++++++++++++++++++++++++++++++++++++\n\nStep3:  \nNode: \"Bulk Dropcontact Requests\".  \nEnter your Dropcontact credentials in the node: Bulk Dropcontact Requests.\n\n+++++++++++++++++++++++++++++++++++++++++\n\nStep4:  \nConnect your output source by mapping the data you like to use.\n\n+++++++++++++++++++++++++++++++++++++++++\n\nStep5:  \nNode: \"Slack\" (OPTIONAL)  \nConnect your slack account, if an error occur, you will be notified.\n\n* * *\n\nTIP: Try to run the workflow with a batch of 10 (not 250) as it might need to run initially before you will be able to map the data to your final destination. Once the data fields are properly mapped, adjust back to 250.\n",
  "readme_html": "<!--[--><div data-v-006f9244=\"\"><p>The template allows to make Dropcontact batch requests up to 250 requests every 10 minutes (1500/hour). Valuable if high volume email enrichment is expected.</p>\n<p>Dropcontact will look for email &amp; basic email qualification if first_name, last_name, company_name is provided.</p>\n<p>+++++++++++++++++++++++++++++++++++++++++</p>\n<p>Step 1:<br>\nNode \"Profiles Query\"<br>\nConnect your own source (Airtable, Google Sheets, Supabase,...) the template is using Postgres by default.</p>\n<hr>\n<p>Note I:<br>\nBe careful your source is only returning a maximum of 250 items.</p>\n<hr>\n<p>Note II:<br>\nThe next node uses the next variables, make sure you can map these from your source file:</p>\n<ul>\n<li>first_name</li>\n<li>last_name</li>\n<li>website (company_name would work too)</li>\n<li>full_name (see note)</li>\n</ul>\n<hr>\n<p>Note III:<br>\nThis template is using the Dropcontact Batch API, which works in a POST &amp; GET setup. Not a GET request only to retrieve data, as Dropcontact needs to process the batch data load properly.</p>\n<p>+++++++++++++++++++++++++++++++++++++++++</p>\n<p>Step 2:<br>\nNode \"Data Transformation\"<br>\nWill transform the input variables in the proper json format. This json format is expected from the Dropcontact API to make a batch request.</p>\n<p>\"full_name\" is being used as a custom identifier to update the returned email to the proper contact in your source database.</p>\n<p>To make things easy, use a unique identiefer in the full_name variable.</p>\n<p>+++++++++++++++++++++++++++++++++++++++++</p>\n<p>Step3:<br>\nNode: \"Bulk Dropcontact Requests\".<br>\nEnter your Dropcontact credentials in the node: Bulk Dropcontact Requests.</p>\n<p>+++++++++++++++++++++++++++++++++++++++++</p>\n<p>Step4:<br>\nConnect your output source by mapping the data you like to use.</p>\n<p>+++++++++++++++++++++++++++++++++++++++++</p>\n<p>Step5:<br>\nNode: \"Slack\" (OPTIONAL)<br>\nConnect your slack account, if an error occur, you will be notified.</p>\n<hr>\n<p>TIP: Try to run the workflow with a batch of 10 (not 250) as it might need to run initially before you will be able to map the data to your final destination. Once the data fields are properly mapped, adjust back to 250.</p>\n</div><!--]-->",
  "readme_zh": "该模板支持每10分钟批量发起最多250次Dropcontact请求（每小时1500次）。适用于需要大批量邮箱信息补全的场景。\n\n当提供first_name（名）、last_name（姓）、company_name（公司名称）时，Dropcontact将自动查找对应邮箱及基础邮箱验证信息。\n\n+++++++++++++++++++++++++++++++++++++++++\n\n第一步：  \n\"资料查询\"节点  \n连接您的数据源（Airtable、Google Sheets、Supabase等），模板默认使用Postgres数据库。\n\n* * *\n\n注意点一：  \n确保数据源每次返回不超过250条记录。\n\n* * *\n\n注意点二：  \n后续节点需要使用以下变量字段，请确保数据源中包含对应字段：\n\n  * first_name（名）\n  * last_name（姓）\n  * website（公司官网，company_name公司名称字段也可替代）\n  * full_name（完整姓名，参见备注）\n\n* * *\n\n注意点三：  \n本模板调用的是Dropcontact批量API，采用POST+GET双请求机制（非单纯GET请求），因Dropcontact需对批量数据进行异步处理。\n\n+++++++++++++++++++++++++++++++++++++++++\n\n第二步：  \n\"数据转换\"节点  \n将输入变量转换为标准JSON格式，该格式为Dropcontact批量API所需标准结构。\n\n\"full_name\"字段将作为自定义标识符，用于将返回的邮箱信息与源数据库中的联系人精确匹配。\n\n建议在full_name变量中使用唯一标识符以简化流程。\n\n+++++++++++++++++++++++++++++++++++++++++\n\n第三步：  \n\"批量Dropcontact请求\"节点  \n在此节点中输入您的Dropcontact账户凭证。\n\n+++++++++++++++++++++++++++++++++++++++++\n\n第四步：  \n通过字段映射连接您的输出数据源。\n\n+++++++++++++++++++++++++++++++++++++++++\n\n第五步：  \n\"Slack通知\"节点（可选）  \n连接Slack账户后可接收错误警报通知。\n\n* * *\n\n操作建议：初次运行时建议将批量值设为10（而非250），待确认数据字段映射无误后，再调整回250条批量上限。",
  "title_zh": "通过Dropcontact批量请求功能，每小时可丰富多达1500封邮件的附加信息",
  "publish_date_zh": "最后一次更新于一年前",
  "workflow_json_zh": "{\n  \"meta\": {\n    \"instanceId\": \"a2435d996b378e3a6fdef0468d70285e3aa0fbd0004de817bfc80e80afee4e7b\"\n  },\n  \"nodes\": [\n    {\n      \"id\": \"5fa5ccd8-81be-45a2-ac00-7ef28148c0c7\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        700,\n        460\n      ],\n      \"parameters\": {\n        \"width\": 1767.817629414989,\n        \"height\": 470.03830555074103,\n        \"content\": \"## DROPCONTACT 250批次异步处理\\n## 每小时1500次请求\\n**双击**编辑内容。[使用指南](https://docs.n8n.io/workflows/sticky-notes/)\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"9c6826a3-ec94-4ff4-92a6-0ff7fa22349e\",\n      \"name\": \"Aggregate\",\n      \"type\": \"n8n-nodes-base.aggregate\",\n      \"position\": [\n        1000,\n        620\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"fieldsToAggregate\": {\n          \"fieldToAggregate\": [\n            {\n              \"fieldToAggregate\": \"first_name\"\n            },\n            {\n              \"fieldToAggregate\": \"last_name\"\n            },\n            {\n              \"fieldToAggregate\": \"domain\"\n            },\n            {\n              \"fieldToAggregate\": \"phantom_linkedin\"\n            },\n            {\n              \"fieldToAggregate\": \"full_name\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"c0d5b884-de58-42f3-bc50-0c7e6ca5e576\",\n      \"name\": \"PROFILES QUERY\",\n      \"type\": \"n8n-nodes-base.postgres\",\n      \"position\": [\n        560,\n        600\n      ],\n      \"parameters\": {\n        \"query\": \"select first_name, last_name, domain, full_name\\nfrom accounts a \\nleft join profiles p on a.company_id = p.company_id \\nwhere title = 'Bestuurder' and p.email is null and a.domain != ''\\nand domain NOT IN ('gmail.com', 'hotmail.com', 'hotmail.be', 'hotmail%','outlook.com','telenet.be', 'live.be', 'skynet.be','SKYNET%', 'yahoo.com' , 'yahoo%', 'msn%', 'hotmail', 'belgacom%') and dropcontact_found is null \\nlimit 1000\\n\",\n        \"options\": {},\n        \"operation\": \"executeQuery\"\n      },\n      \"credentials\": {\n        \"postgres\": {\n          \"id\": \"pYryZTyzA44MBOiN\",\n          \"name\": \"Postgres account\"\n        }\n      },\n      \"typeVersion\": 2.3\n    },\n    {\n      \"id\": \"ddf11e8d-f1db-406c-9c2a-ab5a510fee47\",\n      \"name\": \"BULK DROPCONTACT REQUESTS\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"onError\": \"continueRegularOutput\",\n      \"maxTries\": 3,\n      \"position\": [\n        1360,\n        620\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.dropcontact.io/batch\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"jsonBody\": \"={{ $json.toJsonString()}}\\n\",\n        \"sendBody\": true,\n        \"sendHeaders\": true,\n        \"specifyBody\": \"json\",\n        \"authentication\": \"predefinedCredentialType\",\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"X-Access-Token\",\n              \"value\": \"apiKey\"\n            }\n          ]\n        },\n        \"nodeCredentialType\": \"dropcontactApi\"\n      },\n      \"credentials\": {\n        \"dropcontactApi\": {\n          \"id\": \"kUzEc345AiEZDjK7\",\n          \"name\": \"Dropcontact Willow account\"\n        }\n      },\n      \"retryOnFail\": true,\n      \"typeVersion\": 4.2,\n      \"waitBetweenTries\": 600\n    },\n    {\n      \"id\": \"606e2898-eb44-46c2-9576-8e3cc1bd2578\",\n      \"name\": \"Loop Over Items2\",\n      \"type\": \"n8n-nodes-base.splitInBatches\",\n      \"position\": [\n        780,\n        600\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"batchSize\": 250\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"ace20caa-3c9b-432a-a572-6bad48181347\",\n      \"name\": \"Split Out\",\n      \"type\": \"n8n-nodes-base.splitOut\",\n      \"onError\": \"continueRegularOutput\",\n      \"position\": [\n        1940,\n        600\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"fieldToSplitOut\": \"data\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"2c581721-a399-4d48-98a1-cee82246c4f4\",\n      \"name\": \"Postgres\",\n      \"type\": \"n8n-nodes-base.postgres\",\n      \"onError\": \"continueErrorOutput\",\n      \"maxTries\": 2,\n      \"position\": [\n        2100,\n        600\n      ],\n      \"parameters\": {\n        \"table\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"profiles\",\n          \"cachedResultName\": \"profiles\"\n        },\n        \"schema\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"public\"\n        },\n        \"columns\": {\n          \"value\": {\n            \"email\": \"={{ $json.email[0].email }}\",\n            \"phone\": \"={{ $json.phone }}\",\n            \"full_name\": \"={{ $json.custom_fields.full_name }}\",\n            \"dropcontact_found\": \"={{ true }}\",\n            \"email_qualification\": \"={{ $json.email[0].qualification }}\"\n          },\n          \"schema\": [\n            {\n              \"id\": \"company_id\",\n              \"type\": \"number\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"company_id\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"create_date\",\n              \"type\": \"dateTime\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"create_date\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"phone\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"phone\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"first_name\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"first_name\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"last_name\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"last_name\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"title\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"title\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"start_date_raw\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"start_date_raw\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"full_name\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"full_name\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"seniority\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"seniority\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"email\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"email\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"email_qualification\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"email_qualification\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"dropcontact_found\",\n              \"type\": \"boolean\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"dropcontact_found\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            }\n          ],\n          \"mappingMode\": \"defineBelow\",\n          \"matchingColumns\": [\n            \"full_name\"\n          ]\n        },\n        \"options\": {\n          \"replaceEmptyStrings\": true\n        },\n        \"operation\": \"update\"\n      },\n      \"credentials\": {\n        \"postgres\": {\n          \"id\": \"pYryZTyzA44MBOiN\",\n          \"name\": \"Postgres account\"\n        }\n      },\n      \"retryOnFail\": true,\n      \"typeVersion\": 2.3,\n      \"alwaysOutputData\": true\n    },\n    {\n      \"id\": \"7e94c87d-3f83-4fd1-877d-3463dce3cdd1\",\n      \"name\": \"BULK DROPCONTACT DOWNLOAD\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"onError\": \"continueErrorOutput\",\n      \"position\": [\n        1740,\n        620\n      ],\n      \"parameters\": {\n        \"url\": \"=https://api.dropcontact.io/batch/{{ $json.request_id }}\",\n        \"options\": {},\n        \"authentication\": \"predefinedCredentialType\",\n        \"nodeCredentialType\": \"dropcontactApi\"\n      },\n      \"credentials\": {\n        \"dropcontactApi\": {\n          \"id\": \"kUzEc345AiEZDjK7\",\n          \"name\": \"Dropcontact Willow account\"\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"17aab456-72dc-482d-b5e3-b3dfb3a3b3f7\",\n      \"name\": \"Wait2\",\n      \"type\": \"n8n-nodes-base.wait\",\n      \"position\": [\n        1540,\n        620\n      ],\n      \"webhookId\": \"de669d58-95c5-480e-9acc-17c396859fcf\",\n      \"parameters\": {\n        \"amount\": 600\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"148cec0c-985b-4c82-8835-fff8eacf6e38\",\n      \"name\": \"DATA TRANSFORMATION\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        1180,\n        620\n      ],\n      \"parameters\": {\n        \"mode\": \"runOnceForEachItem\",\n        \"language\": \"python\",\n        \"pythonCode\": \"import json\\n\\n## Load & access the existing JSON data\\nfor item in _input.all():\\n  data = item.json \\n\\n  # Define the output data structure\\n  output_data = {\\\"data\\\": [], \\\"siren\\\": True}\\n\\n  # Unpack data from the single element list\\n  first_names = data[\\\"first_name\\\"]\\n  last_names = data[\\\"last_name\\\"]\\n  domain = data[\\\"domain\\\"]\\n  full_name = data[\\\"full_name\\\"]\\n\\n    # Combine data into a list of dictionaries\\n  transformed_data = []\\n  for i, (first_name, last_name, domain_name, full_name_value) in enumerate(zip(first_names, last_names, domain, full_name)):\\n    transformed_data.append({\\n      \\\"first_name\\\": first_name,\\n      \\\"last_name\\\": last_name,\\n      \\\"website\\\": domain_name,\\n      \\\"custom_fields\\\": {\\n        \\\"full_name\\\": full_name_value}\\n    })\\n\\n  output_data[\\\"data\\\"] = transformed_data\\n\\n  return output_data \\n\\n\"\n      },\n      \"typeVersion\": 2,\n      \"alwaysOutputData\": true\n    },\n    {\n      \"id\": \"b233abfe-cfae-474a-b86d-29e56e1f3ac7\",\n      \"name\": \"Slack\",\n      \"type\": \"n8n-nodes-base.slack\",\n      \"position\": [\n        1740,\n        820\n      ],\n      \"parameters\": {\n        \"text\": \"Dropcontact Credits issue: url \",\n        \"user\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"\"\n        },\n        \"select\": \"user\",\n        \"otherOptions\": {}\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"d4e90677-89c9-418b-b618-f751b797d395\",\n      \"name\": \"Schedule Trigger\",\n      \"type\": \"n8n-nodes-base.scheduleTrigger\",\n      \"position\": [\n        380,\n        600\n      ],\n      \"parameters\": {\n        \"rule\": {\n          \"interval\": [\n            {}\n          ]\n        }\n      },\n      \"typeVersion\": 1.1\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"Wait2\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"BULK DROPCONTACT DOWNLOAD\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Postgres\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Loop Over Items2\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Aggregate\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"DATA TRANSFORMATION\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Split Out\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Postgres\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"PROFILES QUERY\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Loop Over Items2\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Loop Over Items2\": {\n      \"main\": [\n        null,\n        [\n          {\n            \"node\": \"Aggregate\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Schedule Trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"PROFILES QUERY\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"DATA TRANSFORMATION\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"BULK DROPCONTACT REQUESTS\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"BULK DROPCONTACT DOWNLOAD\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Split Out\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Slack\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"BULK DROPCONTACT REQUESTS\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Wait2\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}