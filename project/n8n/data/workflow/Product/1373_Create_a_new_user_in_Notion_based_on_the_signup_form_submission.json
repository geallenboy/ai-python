{
  "title": "Create a new user in Notion based on the signup form submission",
  "url": "https://n8n.io/workflows/1373-create-a-new-user-in-notion-based-on-the-signup-form-submission/",
  "category": "Product",
  "category_url": "https://n8n.io/workflows/categories/product/?count=20",
  "author": "Will Stenzel",
  "publish_date": "Last update 9 months ago",
  "publish_date_absolute": "2024-08-23",
  "content": "",
  "workflow_json": "{\"nodes\":[{\"name\":\"Extract Name and Email\",\"type\":\"n8n-nodes-base.set\",\"position\":[950,130],\"parameters\":{\"values\":{\"string\":[{\"name\":\"Name\",\"value\":\"={{$json[\\\"body\\\"][\\\"name\\\"]}}\"},{\"name\":\"Email\",\"value\":\"={{$json[\\\"body\\\"][\\\"email\\\"]}}\"}],\"boolean\":[]},\"options\":{},\"keepOnlySet\":true},\"typeVersion\":1},{\"name\":\"Sign Up\",\"type\":\"n8n-nodes-base.webhook\",\"notes\":\"Example Input Data: {\\\"name\\\":\\\"John Doe\\\",\\\"email\\\":\\\"doe.j@northeastern.edu\\\"}\",\"position\":[720,130],\"webhookId\":\"6d60a1b4-6706-4f21-a5fb-bace13c24b53\",\"parameters\":{\"path\":\"sign-up\",\"options\":{\"responseData\":\"\"},\"httpMethod\":\"POST\",\"authentication\":\"basicAuth\"},\"credentials\":{\"httpBasicAuth\":{\"id\":\"11\",\"name\":\"Oasis Basic Auth Creds\"}},\"notesInFlow\":true,\"typeVersion\":1},{\"name\":\"If user exists\",\"type\":\"n8n-nodes-base.if\",\"position\":[1560,150],\"parameters\":{\"conditions\":{\"string\":[],\"boolean\":[{\"value1\":\"={{Object.keys($json).includes(\\\"id\\\") }}\",\"value2\":true}]}},\"executeOnce\":false,\"typeVersion\":1,\"alwaysOutputData\":false},{\"name\":\"Create User\",\"type\":\"n8n-nodes-base.notion\",\"position\":[1750,240],\"parameters\":{\"resource\":\"databasePage\",\"databaseId\":\"27a30c5b-c418-4200-8f48-d7fb7b043fbe\",\"propertiesUi\":{\"propertyValues\":[{\"key\":\"Name|title\",\"title\":\"={{$json[\\\"Name\\\"]}}\"},{\"key\":\"Email|email\",\"emailValue\":\"={{$json[\\\"Email\\\"]}}\"}]}},\"credentials\":{\"notionApi\":{\"id\":\"3\",\"name\":\"Oasis Hub Production\"}},\"typeVersion\":1},{\"name\":\"Query for User\",\"type\":\"n8n-nodes-base.notion\",\"position\":[1150,230],\"parameters\":{\"options\":{\"filter\":{\"singleCondition\":{\"key\":\"Email|email\",\"condition\":\"equals\",\"emailValue\":\"={{$json[\\\"Email\\\"]}}\"}}},\"resource\":\"databasePage\",\"operation\":\"getAll\",\"databaseId\":\"27a30c5b-c418-4200-8f48-d7fb7b043fbe\"},\"credentials\":{\"notionApi\":{\"id\":\"3\",\"name\":\"Oasis Hub Production\"}},\"executeOnce\":false,\"typeVersion\":1,\"alwaysOutputData\":true},{\"name\":\"Query Current Semester\",\"type\":\"n8n-nodes-base.notion\",\"position\":[2180,-30],\"parameters\":{\"options\":{\"sort\":{\"sortValue\":[{\"key\":\"created_time\",\"direction\":\"descending\",\"timestamp\":true}]},\"filter\":{\"singleCondition\":{\"key\":\"Is Current?|checkbox\",\"condition\":\"equals\",\"checkboxValue\":true}}},\"resource\":\"databasePage\",\"operation\":\"getAll\",\"returnAll\":true,\"databaseId\":\"2003319a-bc73-423a-9378-01999b4884fb\"},\"credentials\":{\"notionApi\":{\"id\":\"3\",\"name\":\"Oasis Hub Production\"}},\"typeVersion\":1},{\"name\":\"Select Semester ID\",\"type\":\"n8n-nodes-base.set\",\"position\":[2370,-30],\"parameters\":{\"values\":{\"number\":[],\"string\":[{\"name\":\"currentSemesterID\",\"value\":\"={{$json[\\\"id\\\"]}}\"}]},\"options\":{},\"keepOnlySet\":true},\"typeVersion\":1},{\"name\":\"Update Semester for User\",\"type\":\"n8n-nodes-base.notion\",\"position\":[3050,110],\"parameters\":{\"pageId\":\"={{$json[\\\"id\\\"]}}\",\"resource\":\"databasePage\",\"operation\":\"update\",\"propertiesUi\":{\"propertyValues\":[{\"key\":\"Semesters|relation\",\"relationValue\":[\"={{$json[\\\"allSemesterIDs\\\"].join(',')}}\"]}]}},\"credentials\":{\"notionApi\":{\"id\":\"3\",\"name\":\"Oasis Hub Production\"}},\"typeVersion\":1},{\"name\":\"Merge Semester ID\",\"type\":\"n8n-nodes-base.merge\",\"position\":[2590,110],\"parameters\":{\"mode\":\"multiplex\"},\"typeVersion\":1},{\"name\":\"Concatenate Semester IDs\",\"type\":\"n8n-nodes-base.function\",\"position\":[2820,110],\"parameters\":{\"functionCode\":\"for (item of items) {\\n  // Get the current semester ID\\n  const currentSemesterID = item.json[\\\"currentSemesterID\\\"]\\n  let allSemesterIDs = [currentSemesterID];\\n\\n  // Add semesters that the user is already associated with\\n  if (item.json[\\\"Semesters\\\"]?.length > 0) {\\n    allSemesterIDs = allSemesterIDs.concat(item.json[\\\"Semesters\\\"].filter(semesterID => semesterID !== currentSemesterID));\\n  }\\n\\n  // Set allSemesterIDs which is used to update the relation\\n  item.json[\\\"allSemesterIDs\\\"] = allSemesterIDs\\n}\\n\\nreturn items;\\n\"},\"typeVersion\":1},{\"name\":\"Merge\",\"type\":\"n8n-nodes-base.merge\",\"position\":[1340,150],\"parameters\":{\"mode\":\"mergeByKey\",\"propertyName1\":\"Email\",\"propertyName2\":\"Email\"},\"typeVersion\":1},{\"name\":\"Query User\",\"type\":\"n8n-nodes-base.notion\",\"position\":[1950,130],\"parameters\":{\"options\":{\"filter\":{\"singleCondition\":{\"key\":\"Email|email\",\"condition\":\"equals\",\"emailValue\":\"={{$json[\\\"Email\\\"]}}\"}}},\"resource\":\"databasePage\",\"operation\":\"getAll\",\"returnAll\":true,\"databaseId\":\"27a30c5b-c418-4200-8f48-d7fb7b043fbe\"},\"credentials\":{\"notionApi\":{\"id\":\"3\",\"name\":\"Oasis Hub Production\"}},\"typeVersion\":1,\"alwaysOutputData\":true}],\"connections\":{\"Merge\":{\"main\":[[{\"node\":\"If user exists\",\"type\":\"main\",\"index\":0}]]},\"Sign Up\":{\"main\":[[{\"node\":\"Extract Name and Email\",\"type\":\"main\",\"index\":0}]]},\"Query User\":{\"main\":[[{\"node\":\"Query Current Semester\",\"type\":\"main\",\"index\":0},{\"node\":\"Merge Semester ID\",\"type\":\"main\",\"index\":1}]]},\"Create User\":{\"main\":[[{\"node\":\"Query User\",\"type\":\"main\",\"index\":0}]]},\"If user exists\":{\"main\":[[{\"node\":\"Query User\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Create User\",\"type\":\"main\",\"index\":0}]]},\"Query for User\":{\"main\":[[{\"node\":\"Merge\",\"type\":\"main\",\"index\":1}]]},\"Merge Semester ID\":{\"main\":[[{\"node\":\"Concatenate Semester IDs\",\"type\":\"main\",\"index\":0}]]},\"Select Semester ID\":{\"main\":[[{\"node\":\"Merge Semester ID\",\"type\":\"main\",\"index\":0}]]},\"Extract Name and Email\":{\"main\":[[{\"node\":\"Merge\",\"type\":\"main\",\"index\":0},{\"node\":\"Query for User\",\"type\":\"main\",\"index\":0}]]},\"Query Current Semester\":{\"main\":[[{\"node\":\"Select Semester ID\",\"type\":\"main\",\"index\":0}]]},\"Concatenate Semester IDs\":{\"main\":[[{\"node\":\"Update Semester for User\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "This workflow recieves webhook data from a form submission and creates a new user (with name and email) if necessary. It also add the current semester of the program to the relation for the user.\n",
  "readme_html": "<!--[--><div data-v-006f9244=\"\"><p>This workflow recieves webhook data from a form submission and creates a new user (with name and email) if necessary. It also add the current semester of the program to the relation for the user.</p>\n<p></p>\n</div><!--]-->",
  "readme_zh": "该工作流程接收来自表单提交的webhook数据，并在必要时创建新用户（包含姓名和邮箱）。同时，它还会将当前学期项目关联至该用户。",
  "title_zh": "根据注册表单提交在Notion中创建新用户",
  "publish_date_zh": "最后更新于9个月前",
  "workflow_json_zh": "{\n  \"nodes\": [\n    {\n      \"name\": \"Extract Name and Email\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        950,\n        130\n      ],\n      \"parameters\": {\n        \"values\": {\n          \"string\": [\n            {\n              \"name\": \"Name\",\n              \"value\": \"={{$json[\\\"body\\\"][\\\"name\\\"]}}\"\n            },\n            {\n              \"name\": \"Email\",\n              \"value\": \"={{$json[\\\"body\\\"][\\\"email\\\"]}}\"\n            }\n          ],\n          \"boolean\": []\n        },\n        \"options\": {},\n        \"keepOnlySet\": true\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Sign Up\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"notes\": \"Example Input Data: {\\\"name\\\":\\\"John Doe\\\",\\\"email\\\":\\\"doe.j@northeastern.edu\\\"}\",\n      \"position\": [\n        720,\n        130\n      ],\n      \"webhookId\": \"6d60a1b4-6706-4f21-a5fb-bace13c24b53\",\n      \"parameters\": {\n        \"path\": \"sign-up\",\n        \"options\": {\n          \"responseData\": \"\"\n        },\n        \"httpMethod\": \"POST\",\n        \"authentication\": \"basicAuth\"\n      },\n      \"credentials\": {\n        \"httpBasicAuth\": {\n          \"id\": \"11\",\n          \"name\": \"Oasis Basic Auth Creds\"\n        }\n      },\n      \"notesInFlow\": true,\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"If user exists\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        1560,\n        150\n      ],\n      \"parameters\": {\n        \"conditions\": {\n          \"string\": [],\n          \"boolean\": [\n            {\n              \"value1\": \"={{Object.keys($json).includes(\\\"id\\\") }}\",\n              \"value2\": true\n            }\n          ]\n        }\n      },\n      \"executeOnce\": false,\n      \"typeVersion\": 1,\n      \"alwaysOutputData\": false\n    },\n    {\n      \"name\": \"Create User\",\n      \"type\": \"n8n-nodes-base.notion\",\n      \"position\": [\n        1750,\n        240\n      ],\n      \"parameters\": {\n        \"resource\": \"databasePage\",\n        \"databaseId\": \"27a30c5b-c418-4200-8f48-d7fb7b043fbe\",\n        \"propertiesUi\": {\n          \"propertyValues\": [\n            {\n              \"key\": \"Name|title\",\n              \"title\": \"={{$json[\\\"Name\\\"]}}\"\n            },\n            {\n              \"key\": \"Email|email\",\n              \"emailValue\": \"={{$json[\\\"Email\\\"]}}\"\n            }\n          ]\n        }\n      },\n      \"credentials\": {\n        \"notionApi\": {\n          \"id\": \"3\",\n          \"name\": \"Oasis Hub Production\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Query for User\",\n      \"type\": \"n8n-nodes-base.notion\",\n      \"position\": [\n        1150,\n        230\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"filter\": {\n            \"singleCondition\": {\n              \"key\": \"Email|email\",\n              \"condition\": \"equals\",\n              \"emailValue\": \"={{$json[\\\"Email\\\"]}}\"\n            }\n          }\n        },\n        \"resource\": \"databasePage\",\n        \"operation\": \"getAll\",\n        \"databaseId\": \"27a30c5b-c418-4200-8f48-d7fb7b043fbe\"\n      },\n      \"credentials\": {\n        \"notionApi\": {\n          \"id\": \"3\",\n          \"name\": \"Oasis Hub Production\"\n        }\n      },\n      \"executeOnce\": false,\n      \"typeVersion\": 1,\n      \"alwaysOutputData\": true\n    },\n    {\n      \"name\": \"Query Current Semester\",\n      \"type\": \"n8n-nodes-base.notion\",\n      \"position\": [\n        2180,\n        -30\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"sort\": {\n            \"sortValue\": [\n              {\n                \"key\": \"created_time\",\n                \"direction\": \"descending\",\n                \"timestamp\": true\n              }\n            ]\n          },\n          \"filter\": {\n            \"singleCondition\": {\n              \"key\": \"Is Current?|checkbox\",\n              \"condition\": \"equals\",\n              \"checkboxValue\": true\n            }\n          }\n        },\n        \"resource\": \"databasePage\",\n        \"operation\": \"getAll\",\n        \"returnAll\": true,\n        \"databaseId\": \"2003319a-bc73-423a-9378-01999b4884fb\"\n      },\n      \"credentials\": {\n        \"notionApi\": {\n          \"id\": \"3\",\n          \"name\": \"Oasis Hub Production\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Select Semester ID\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        2370,\n        -30\n      ],\n      \"parameters\": {\n        \"values\": {\n          \"number\": [],\n          \"string\": [\n            {\n              \"name\": \"currentSemesterID\",\n              \"value\": \"={{$json[\\\"id\\\"]}}\"\n            }\n          ]\n        },\n        \"options\": {},\n        \"keepOnlySet\": true\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Update Semester for User\",\n      \"type\": \"n8n-nodes-base.notion\",\n      \"position\": [\n        3050,\n        110\n      ],\n      \"parameters\": {\n        \"pageId\": \"={{$json[\\\"id\\\"]}}\",\n        \"resource\": \"databasePage\",\n        \"operation\": \"update\",\n        \"propertiesUi\": {\n          \"propertyValues\": [\n            {\n              \"key\": \"Semesters|relation\",\n              \"relationValue\": [\n                \"={{$json[\\\"allSemesterIDs\\\"].join(',')}}\"\n              ]\n            }\n          ]\n        }\n      },\n      \"credentials\": {\n        \"notionApi\": {\n          \"id\": \"3\",\n          \"name\": \"Oasis Hub Production\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Merge Semester ID\",\n      \"type\": \"n8n-nodes-base.merge\",\n      \"position\": [\n        2590,\n        110\n      ],\n      \"parameters\": {\n        \"mode\": \"multiplex\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Concatenate Semester IDs\",\n      \"type\": \"n8n-nodes-base.function\",\n      \"position\": [\n        2820,\n        110\n      ],\n      \"parameters\": {\n        \"functionCode\": \"for (item of items) {\\n  // Get the current semester ID\\n  const currentSemesterID = item.json[\\\"currentSemesterID\\\"]\\n  let allSemesterIDs = [currentSemesterID];\\n\\n  // Add semesters that the user is already associated with\\n  if (item.json[\\\"Semesters\\\"]?.length > 0) {\\n    allSemesterIDs = allSemesterIDs.concat(item.json[\\\"Semesters\\\"].filter(semesterID => semesterID !== currentSemesterID));\\n  }\\n\\n  // Set allSemesterIDs which is used to update the relation\\n  item.json[\\\"allSemesterIDs\\\"] = allSemesterIDs\\n}\\n\\nreturn items;\\n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Merge\",\n      \"type\": \"n8n-nodes-base.merge\",\n      \"position\": [\n        1340,\n        150\n      ],\n      \"parameters\": {\n        \"mode\": \"mergeByKey\",\n        \"propertyName1\": \"Email\",\n        \"propertyName2\": \"Email\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Query User\",\n      \"type\": \"n8n-nodes-base.notion\",\n      \"position\": [\n        1950,\n        130\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"filter\": {\n            \"singleCondition\": {\n              \"key\": \"Email|email\",\n              \"condition\": \"equals\",\n              \"emailValue\": \"={{$json[\\\"Email\\\"]}}\"\n            }\n          }\n        },\n        \"resource\": \"databasePage\",\n        \"operation\": \"getAll\",\n        \"returnAll\": true,\n        \"databaseId\": \"27a30c5b-c418-4200-8f48-d7fb7b043fbe\"\n      },\n      \"credentials\": {\n        \"notionApi\": {\n          \"id\": \"3\",\n          \"name\": \"Oasis Hub Production\"\n        }\n      },\n      \"typeVersion\": 1,\n      \"alwaysOutputData\": true\n    }\n  ],\n  \"connections\": {\n    \"Merge\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"If user exists\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Sign Up\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Extract Name and Email\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Query User\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Query Current Semester\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Merge Semester ID\",\n            \"type\": \"main\",\n            \"index\": 1\n          }\n        ]\n      ]\n    },\n    \"Create User\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Query User\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"If user exists\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Query User\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Create User\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Query for User\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge\",\n            \"type\": \"main\",\n            \"index\": 1\n          }\n        ]\n      ]\n    },\n    \"Merge Semester ID\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Concatenate Semester IDs\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Select Semester ID\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge Semester ID\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Extract Name and Email\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Query for User\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Query Current Semester\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Select Semester ID\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Concatenate Semester IDs\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Update Semester for User\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}