{
  "title": "Save Telegram daily messages to Google Sheets",
  "url": "https://n8n.io/workflows/1388-save-telegram-daily-messages-to-google-sheets/",
  "category": "BuildingBlocks",
  "category_url": "https://n8n.io/workflows/categories/building-blocks/?sort=createdAt:desc",
  "author": "Nicholas Lewanowicz",
  "publish_date": "Last update 10 months ago",
  "publish_date_absolute": "2024-07-07",
  "content": "",
  "workflow_json": "{\"id\":4,\"name\":\"Save Telegram reply to journal spreadsheet\",\"nodes\":[{\"name\":\"Add entry to sheet\",\"type\":\"n8n-nodes-base.googleSheets\",\"position\":[700,240],\"parameters\":{\"options\":{},\"sheetId\":\"YOUR_SPREADSHEET_ID\",\"operation\":\"append\"},\"credentials\":{},\"typeVersion\":1},{\"name\":\"Get journal reply\",\"type\":\"n8n-nodes-base.telegramTrigger\",\"position\":[220,240],\"webhookId\":\"fe4a6042-d343-4a02-b443-6d32c38e094d\",\"parameters\":{\"updates\":[\"message\"],\"additionalFields\":{}},\"credentials\":{},\"typeVersion\":1},{\"name\":\"Parse message\",\"type\":\"n8n-nodes-base.functionItem\",\"position\":[460,240],\"parameters\":{\"functionCode\":\"// When telgram sees a message it will make sure its a reply to its message and from the user. \\n// If thats the case then it will return {entry: string, date: string}\\n\\nconst botUsername = 'BOT_USERNAME'\\nconst user = 'YOUR_USERNAME'\\n\\nconst res = item.message\\n\\nconst isReplyToBot = res.reply_to_message.from.username === botUsername\\nconst isFromUser = res.from.username === user\\n\\n// This assumes your message is formatted as follows: \\\"SOME CUSTOM MESSAGE: YYYY-MM-DD\\\"\\nconst date = res.reply_to_message.text.split(':')[1].replace(/\\\\s/g, '');\\n\\nconst journalEntry = res.text\\n\\nif (isReplyToBot && isFromUser) {\\n  return {entry: journalEntry, date}\\n}\\n\\nreturn undefined;\"},\"typeVersion\":1}],\"active\":false,\"settings\":{},\"connections\":{\"Parse message\":{\"main\":[[{\"node\":\"Add entry to sheet\",\"type\":\"main\",\"index\":0}]]},\"Get journal reply\":{\"main\":[[{\"node\":\"Parse message\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "A goal for 2022 is to write 1 thing I do each day. Combined with [this workflow](https://n8n.io/workflows/1387) you will get daily messages via Telegram and when you reply to them they will be saved in a Google Sheet.\n\n_**Note: Make sure to configure your Telegram and Google Sheet credentials! You will also need to modify the functions to have your Telegram username and bot name.**_\n",
  "readme_html": "<!--[--><div data-v-50766329=\"\"><p>A goal for 2022 is to write 1 thing I do each day. Combined with <a href=\"https://n8n.io/workflows/1387\" rel=\"ugc nofollow\" target=\"_blank\">this workflow</a> you will get daily messages via Telegram and when you reply to them they will be saved in a Google Sheet.</p>\n<p><em><strong>Note: Make sure to configure your Telegram and Google Sheet credentials! You will also need to modify the functions to have your Telegram username and bot name.</strong></em></p>\n</div><!--]-->",
  "readme_zh": "2022年的一个目标是每天记录一件所做的事。结合[这个工作流程](https://n8n.io/workflows/1387)，你将通过Telegram收到每日提醒消息，回复后内容会自动保存到Google表格中。\n\n_**注意：请确保配置好Telegram和Google表格的凭证！同时需要修改函数代码，填入你的Telegram用户名和机器人名称。**_",
  "title_zh": "将Telegram每日消息保存至Google表格",
  "publish_date_zh": "最后更新于10个月前",
  "workflow_json_zh": "{\n  \"id\": 4,\n  \"name\": \"Save Telegram reply to journal spreadsheet\",\n  \"nodes\": [\n    {\n      \"name\": \"Add entry to sheet\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"position\": [\n        700,\n        240\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"sheetId\": \"YOUR_SPREADSHEET_ID\",\n        \"operation\": \"append\"\n      },\n      \"credentials\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Get journal reply\",\n      \"type\": \"n8n-nodes-base.telegramTrigger\",\n      \"position\": [\n        220,\n        240\n      ],\n      \"webhookId\": \"fe4a6042-d343-4a02-b443-6d32c38e094d\",\n      \"parameters\": {\n        \"updates\": [\n          \"message\"\n        ],\n        \"additionalFields\": {}\n      },\n      \"credentials\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Parse message\",\n      \"type\": \"n8n-nodes-base.functionItem\",\n      \"position\": [\n        460,\n        240\n      ],\n      \"parameters\": {\n        \"functionCode\": \"// When telgram sees a message it will make sure its a reply to its message and from the user. \\n// If thats the case then it will return {entry: string, date: string}\\n\\nconst botUsername = 'BOT_USERNAME'\\nconst user = 'YOUR_USERNAME'\\n\\nconst res = item.message\\n\\nconst isReplyToBot = res.reply_to_message.from.username === botUsername\\nconst isFromUser = res.from.username === user\\n\\n// This assumes your message is formatted as follows: \\\"SOME CUSTOM MESSAGE: YYYY-MM-DD\\\"\\nconst date = res.reply_to_message.text.split(':')[1].replace(/\\\\s/g, '');\\n\\nconst journalEntry = res.text\\n\\nif (isReplyToBot && isFromUser) {\\n  return {entry: journalEntry, date}\\n}\\n\\nreturn undefined;\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"active\": false,\n  \"settings\": {},\n  \"connections\": {\n    \"Parse message\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Add entry to sheet\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get journal reply\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Parse message\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}