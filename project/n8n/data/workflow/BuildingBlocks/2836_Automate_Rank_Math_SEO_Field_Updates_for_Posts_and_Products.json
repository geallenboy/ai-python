{
  "title": "Automate Rank Math SEO Field Updates for Posts and Products",
  "url": "https://n8n.io/workflows/2836-automate-rank-math-seo-field-updates-for-posts-and-products/",
  "category": "BuildingBlocks",
  "category_url": "https://n8n.io/workflows/categories/building-blocks/?sort=createdAt:desc",
  "author": "phil",
  "publish_date": "Last update 17 days ago",
  "publish_date_absolute": "",
  "content": "",
  "workflow_json": "{\"meta\":{\"instanceId\":\"c911aed9995230b93fd0d9bc41c258d697c2fe97a3bab8c02baf85963eeda618\",\"templateCredsSetupCompleted\":true},\"nodes\":[{\"id\":\"83c6d7e3-ae2e-4576-8bc6-1e1a7b553fca\",\"name\":\"Settings\",\"type\":\"n8n-nodes-base.set\",\"position\":[260,0],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"080b234c-a753-409d-9d2d-3322678a01f2\",\"name\":\"woocommerce url\",\"type\":\"string\",\"value\":\"https://mydom.com/\"}]}},\"typeVersion\":3.4},{\"id\":\"7018ae65-bb9d-4bac-8746-01193cb0e523\",\"name\":\"When clicking ‘Test workflow’\",\"type\":\"n8n-nodes-base.manualTrigger\",\"position\":[0,0],\"parameters\":{},\"typeVersion\":1},{\"id\":\"223ed34b-3e26-406c-a5a5-34f8408e3fe6\",\"name\":\"HTTP Request - Update Rank Math Meta\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[500,0],\"parameters\":{\"url\":\"={{ $('Settings').item.json[\\\"woocommerce url\\\"] }}wp-json/rank-math-api/v1/update-meta\",\"method\":\"POST\",\"options\":{},\"sendBody\":true,\"authentication\":\"predefinedCredentialType\",\"bodyParameters\":{\"parameters\":[{\"name\":\"post_id\",\"value\":\"246\"},{\"name\":\"rank_math_title\",\"value\":\"Demo SEO Title\"},{\"name\":\"rank_math_description\",\"value\":\"Demo SEO Description\"},{\"name\":\"rank_math_canonical_url\",\"value\":\"https://example.com/demo-product\"}]},\"nodeCredentialType\":\"wordpressApi\"},\"credentials\":{\"wordpressApi\":{\"id\":\"6rPlJdCaIXaVciGM\",\"name\":\"Wordpress account\"},\"wooCommerceApi\":{\"id\":\"klGFZkgHrRfC8BVg\",\"name\":\"WooCommerce account\"}},\"retryOnFail\":true,\"typeVersion\":4.2}],\"pinData\":{},\"connections\":{\"Settings\":{\"main\":[[{\"node\":\"HTTP Request - Update Rank Math Meta\",\"type\":\"main\",\"index\":0}]]},\"When clicking ‘Test workflow’\":{\"main\":[[{\"node\":\"Settings\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "This workflow automates the process of updating important Rank Math SEO fields (SEO Title, Description, and Canonical URL) directly via n8n.\n\nBy leveraging a custom WordPress plugin that extends the WordPress REST API, this workflow ensures that you can programmatically manage SEO metadata for your posts and WooCommerce products efficiently.\n\n**How it works:**\n\n  * Sends a POST request to a custom API endpoint exposed by the Rank Math plugin.\n  * Updates SEO Title, Description, and Canonical URL fields for a specified post or product.\n\n\n\n**Setup steps:**\n\n  * Install and activate the Rank Math API Manager Extended plugin on WordPress.\n  * Provide the post or product ID you want to update in the workflow.\n  * Run the workflow to update the metadata automatically.\n\n\n\n**Benefits:**\n\n  * Full automation of SEO optimizations.\n  * Works for both standard posts and WooCommerce products.\n  * Simplifies large-scale SEO management tasks.\n\n\n\nTo understand exactly how to use it in detail, check out my [comprehensive documentation here.](https://medium.com/@rentierdigital/supercharge-the-rank-math-wordpress-api-how-to-automatically-update-rank-math-seo-fields-with-n8n-6f9127ee0340)\n\n**Rank Math API Manager Extended plugin on WordPress**\n    \n    \n    &lt;?php\n    /**\n     * Plugin Name: Rank Math API Manager Extended v1.3\n     * Description: Manages the update of Rank Math metadata (SEO Title, SEO Description, Canonical URL) via the REST API for WordPress posts and WooCommerce products.\n     * Version: 1.3\n     * Author: Phil - https://inforeole.fr\n     */\n    \n    if ( ! defined( 'ABSPATH' ) ) {\n        exit; // Exit if accessed directly.\n    }\n    \n    class Rank_Math_API_Manager_Extended {\n        public function __construct() {\n            add_action('rest_api_init', [$this, 'register_meta_fields']);\n            add_action('rest_api_init', [$this, 'register_api_routes']);\n        }\n    \n        /**\n         * Registers the Rank Math meta fields in the REST API for posts and products (if WooCommerce is active).\n         */\n        public function register_meta_fields() {\n            $meta_fields = [\n                'rank_math_title'         =&gt; 'SEO Title',\n                'rank_math_description'   =&gt; 'SEO Description',\n                'rank_math_canonical_url' =&gt; 'Canonical URL'\n            ];\n    \n            // Register meta for posts by default.\n            $post_types = ['post'];\n    \n            // If WooCommerce is active, add the 'product' post type.\n            if ( class_exists('WooCommerce') ) {\n                $post_types[] = 'product';\n            }\n    \n            foreach ( $post_types as $post_type ) {\n                foreach ( $meta_fields as $key =&gt; $description ) {\n                    register_post_meta( $post_type, $key, [\n                        'show_in_rest'   =&gt; true,\n                        'single'         =&gt; true,\n                        'type'           =&gt; 'string',\n                        'auth_callback'  =&gt; [$this, 'check_update_permission'],\n                        'description'    =&gt; $description,\n                    ] );\n                }\n            }\n        }\n    \n        /**\n         * Registers the REST API route to update Rank Math meta fields.\n         */\n        public function register_api_routes() {\n            register_rest_route( 'rank-math-api/v1', '/update-meta', [\n                'methods'             =&gt; 'POST',\n                'callback'            =&gt; [$this, 'update_rank_math_meta'],\n                'permission_callback' =&gt; [$this, 'check_update_permission'],\n                'args'                =&gt; [\n                    'post_id' =&gt; [\n                        'required'          =&gt; true,\n                        'validate_callback' =&gt; function( $param ) {\n                            return is_numeric( $param ) && get_post( $param );\n                        }\n                    ],\n                    'rank_math_title' =&gt; [\n                        'type'              =&gt; 'string',\n                        'sanitize_callback' =&gt; 'sanitize_text_field',\n                    ],\n                    'rank_math_description' =&gt; [\n                        'type'              =&gt; 'string',\n                        'sanitize_callback' =&gt; 'sanitize_text_field',\n                    ],\n                    'rank_math_canonical_url' =&gt; [\n                        'type'              =&gt; 'string',\n                        'sanitize_callback' =&gt; 'esc_url_raw',\n                    ],\n                ],\n            ] );\n        }\n    \n        /**\n         * Updates the Rank Math meta fields via the REST API.\n         */\n        public function update_rank_math_meta( WP_REST_Request $request ) {\n            $post_id = $request-&gt;get_param( 'post_id' );\n            $fields  = ['rank_math_title', 'rank_math_description', 'rank_math_canonical_url'];\n            $result  = [];\n    \n            foreach ( $fields as $field ) {\n                $value = $request-&gt;get_param( $field );\n                if ( $value !== null ) {\n                    $update_result = update_post_meta( $post_id, $field, $value );\n                    $result[ $field ] = $update_result ? 'updated' : 'failed';\n                }\n            }\n    \n            if ( empty( $result ) ) {\n                return new WP_Error( 'no_update', 'No metadata was updated', ['status' =&gt; 400] );\n            }\n    \n            return new WP_REST_Response( $result, 200 );\n        }\n    \n        /**\n         * Checks if the current user has permission to update the meta fields.\n         */\n        public function check_update_permission() {\n            return current_user_can( 'edit_posts' );\n        }\n    }\n    \n    new Rank_Math_API_Manager_Extended();\n    \n\n.\n\n[Phil | Inforeole](https://inforeole.fr)\n",
  "readme_html": "<!--[--><div data-v-50766329=\"\"><p>This workflow automates the process of updating important Rank Math SEO fields (SEO Title, Description, and Canonical URL) directly via n8n.</p>\n<p>By leveraging a custom WordPress plugin that extends the WordPress REST API, this workflow ensures that you can programmatically manage SEO metadata for your posts and WooCommerce products efficiently.</p>\n<p><strong>How it works:</strong></p>\n<ul>\n<li>Sends a POST request to a custom API endpoint exposed by the Rank Math plugin.</li>\n<li>Updates SEO Title, Description, and Canonical URL fields for a specified post or product.</li>\n</ul>\n<p><strong>Setup steps:</strong></p>\n<ul>\n<li>Install and activate the Rank Math API Manager Extended plugin on WordPress.</li>\n<li>Provide the post or product ID you want to update in the workflow.</li>\n<li>Run the workflow to update the metadata automatically.</li>\n</ul>\n<p><strong>Benefits:</strong></p>\n<ul>\n<li>Full automation of SEO optimizations.</li>\n<li>Works for both standard posts and WooCommerce products.</li>\n<li>Simplifies large-scale SEO management tasks.</li>\n</ul>\n<p>To understand exactly how to use it in detail, check out my <a href=\"https://medium.com/@rentierdigital/supercharge-the-rank-math-wordpress-api-how-to-automatically-update-rank-math-seo-fields-with-n8n-6f9127ee0340\" rel=\"ugc nofollow\" target=\"_blank\">comprehensive documentation here.</a></p>\n<p><strong>Rank Math API Manager Extended plugin on WordPress</strong></p>\n<pre><code>&amp;lt;?php\n/**\n * Plugin Name: Rank Math API Manager Extended v1.3\n * Description: Manages the update of Rank Math metadata (SEO Title, SEO Description, Canonical URL) via the REST API for WordPress posts and WooCommerce products.\n * Version: 1.3\n * Author: Phil - https://inforeole.fr\n */\n\nif ( ! defined( 'ABSPATH' ) ) {\n    exit; // Exit if accessed directly.\n}\n\nclass Rank_Math_API_Manager_Extended {\n    public function __construct() {\n        add_action('rest_api_init', [$this, 'register_meta_fields']);\n        add_action('rest_api_init', [$this, 'register_api_routes']);\n    }\n\n    /**\n     * Registers the Rank Math meta fields in the REST API for posts and products (if WooCommerce is active).\n     */\n    public function register_meta_fields() {\n        $meta_fields = [\n            'rank_math_title'         =&amp;gt; 'SEO Title',\n            'rank_math_description'   =&amp;gt; 'SEO Description',\n            'rank_math_canonical_url' =&amp;gt; 'Canonical URL'\n        ];\n\n        // Register meta for posts by default.\n        $post_types = ['post'];\n\n        // If WooCommerce is active, add the 'product' post type.\n        if ( class_exists('WooCommerce') ) {\n            $post_types[] = 'product';\n        }\n\n        foreach ( $post_types as $post_type ) {\n            foreach ( $meta_fields as $key =&amp;gt; $description ) {\n                register_post_meta( $post_type, $key, [\n                    'show_in_rest'   =&amp;gt; true,\n                    'single'         =&amp;gt; true,\n                    'type'           =&amp;gt; 'string',\n                    'auth_callback'  =&amp;gt; [$this, 'check_update_permission'],\n                    'description'    =&amp;gt; $description,\n                ] );\n            }\n        }\n    }\n\n    /**\n     * Registers the REST API route to update Rank Math meta fields.\n     */\n    public function register_api_routes() {\n        register_rest_route( 'rank-math-api/v1', '/update-meta', [\n            'methods'             =&amp;gt; 'POST',\n            'callback'            =&amp;gt; [$this, 'update_rank_math_meta'],\n            'permission_callback' =&amp;gt; [$this, 'check_update_permission'],\n            'args'                =&amp;gt; [\n                'post_id' =&amp;gt; [\n                    'required'          =&amp;gt; true,\n                    'validate_callback' =&amp;gt; function( $param ) {\n                        return is_numeric( $param ) &amp;&amp; get_post( $param );\n                    }\n                ],\n                'rank_math_title' =&amp;gt; [\n                    'type'              =&amp;gt; 'string',\n                    'sanitize_callback' =&amp;gt; 'sanitize_text_field',\n                ],\n                'rank_math_description' =&amp;gt; [\n                    'type'              =&amp;gt; 'string',\n                    'sanitize_callback' =&amp;gt; 'sanitize_text_field',\n                ],\n                'rank_math_canonical_url' =&amp;gt; [\n                    'type'              =&amp;gt; 'string',\n                    'sanitize_callback' =&amp;gt; 'esc_url_raw',\n                ],\n            ],\n        ] );\n    }\n\n    /**\n     * Updates the Rank Math meta fields via the REST API.\n     */\n    public function update_rank_math_meta( WP_REST_Request $request ) {\n        $post_id = $request-&amp;gt;get_param( 'post_id' );\n        $fields  = ['rank_math_title', 'rank_math_description', 'rank_math_canonical_url'];\n        $result  = [];\n\n        foreach ( $fields as $field ) {\n            $value = $request-&amp;gt;get_param( $field );\n            if ( $value !== null ) {\n                $update_result = update_post_meta( $post_id, $field, $value );\n                $result[ $field ] = $update_result ? 'updated' : 'failed';\n            }\n        }\n\n        if ( empty( $result ) ) {\n            return new WP_Error( 'no_update', 'No metadata was updated', ['status' =&amp;gt; 400] );\n        }\n\n        return new WP_REST_Response( $result, 200 );\n    }\n\n    /**\n     * Checks if the current user has permission to update the meta fields.\n     */\n    public function check_update_permission() {\n        return current_user_can( 'edit_posts' );\n    }\n}\n\nnew Rank_Math_API_Manager_Extended();\n</code></pre>\n<p>.</p>\n<p><a href=\"https://inforeole.fr\" rel=\"ugc nofollow\" target=\"_blank\">Phil | Inforeole</a></p>\n</div><!--]-->"
}