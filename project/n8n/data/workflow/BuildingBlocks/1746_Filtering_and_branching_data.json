{
  "title": "Filtering and branching data",
  "url": "https://n8n.io/workflows/1746-filtering-and-branching-data/",
  "category": "BuildingBlocks",
  "category_url": "https://n8n.io/workflows/categories/building-blocks/?sort=createdAt:desc",
  "author": "Jonathan",
  "publish_date": "Last update 10 months ago",
  "publish_date_absolute": "2024-07-07",
  "content": "",
  "workflow_json": "{\"nodes\":[{\"name\":\"On clicking 'execute'\",\"type\":\"n8n-nodes-base.manualTrigger\",\"position\":[20,720],\"parameters\":{},\"typeVersion\":1},{\"name\":\"Customer Datastore\",\"type\":\"n8n-nodes-base.n8nTrainingCustomerDatastore\",\"position\":[220,720],\"parameters\":{\"operation\":\"getAllPeople\"},\"typeVersion\":1},{\"name\":\"Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[500,600],\"parameters\":{\"width\":520,\"height\":280,\"content\":\"## 2. If with And/Or conditions\\nSet the **Combine** field to: \\n`ALL` for `AND` condition\\n`ANY` for `OR` condition\"},\"typeVersion\":1},{\"name\":\"Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[500,920],\"parameters\":{\"width\":520,\"height\":360,\"content\":\"## 3. Multiple branches\\nWe use the `Switch` when there more than 2 possible outcomes to the filtering. We do that by specifying the condition under **Routing rules** inside the node.\\n\\nIn this example we send all **US-based** customers data to route 0, **customers from CO** to route 1, **customers from the UK** to route 2, and all the rest to route 3 as a fallback\"},\"typeVersion\":1},{\"name\":\"Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[500,300],\"parameters\":{\"width\":520,\"height\":260,\"content\":\"## 1. Single condition If\\nFilter out data that you don't want or send data to different branches\"},\"typeVersion\":1},{\"name\":\"Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-520,660],\"parameters\":{\"width\":480,\"height\":240,\"content\":\"## The `If` and the `Switch` nodes are the key nodes to set conditional logic for filtering and routing data\\n\\n\\n### Click `Execute Workflow` button and double click on the nodes to see the input and output items when you click on each node.\"},\"typeVersion\":1},{\"name\":\"Country equals US\",\"type\":\"n8n-nodes-base.if\",\"position\":[540,420],\"parameters\":{\"conditions\":{\"string\":[{\"value1\":\"={{$json[\\\"country\\\"]}}\",\"value2\":\"US\"}]}},\"typeVersion\":1},{\"name\":\"Country is empty or Name contains 'Max'\",\"type\":\"n8n-nodes-base.if\",\"position\":[540,720],\"parameters\":{\"conditions\":{\"string\":[{\"value1\":\"={{$json[\\\"country\\\"]}}\",\"operation\":\"isEmpty\"},{\"value1\":\"={{$json[\\\"name\\\"]}}\",\"value2\":\"Max\",\"operation\":\"contains\"}]},\"combineOperation\":\"any\"},\"typeVersion\":1},{\"name\":\"Country based branching\",\"type\":\"n8n-nodes-base.switch\",\"position\":[540,1120],\"parameters\":{\"rules\":{\"rules\":[{\"value2\":\"US\"},{\"output\":1,\"value2\":\"CO\"},{\"output\":2,\"value2\":\"UK\"}]},\"value1\":\"={{$json[\\\"country\\\"]}}\",\"dataType\":\"string\",\"fallbackOutput\":3},\"typeVersion\":1}],\"connections\":{\"Customer Datastore\":{\"main\":[[{\"node\":\"Country is empty or Name contains 'Max'\",\"type\":\"main\",\"index\":0},{\"node\":\"Country based branching\",\"type\":\"main\",\"index\":0},{\"node\":\"Country equals US\",\"type\":\"main\",\"index\":0}]]},\"On clicking 'execute'\":{\"main\":[[{\"node\":\"Customer Datastore\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "**Task:**  \nConditional filtering and branching items\n\n**Why:**  \nFiltering and branching data based on conditions allows you to build complex workflows that work with more than one data flow scenario\n\n**Main use cases:**\n\n  * Filter out data that is not relevant for the rest of the workflow\n  * Split data to several branches of the workflow, where we want the data to be treated differently in the rest of the workflow\n\n\n",
  "readme_html": "<!--[--><div data-v-50766329=\"\"><p><strong>Task:</strong><br>\nConditional filtering and branching items</p>\n<p><strong>Why:</strong><br>\nFiltering and branching data based on conditions allows you to build complex workflows that work with more than one data flow scenario</p>\n<p><strong>Main use cases:</strong></p>\n<ul>\n<li>Filter out data that is not relevant for the rest of the workflow</li>\n<li>Split data to several branches of the workflow, where we want the data to be treated differently in the rest of the workflow</li>\n</ul>\n</div><!--]-->",
  "readme_zh": "**任务：**  \n条件筛选与分支项  \n\n**原因：**  \n基于条件对数据进行筛选和分支处理，可构建支持多数据流场景的复杂工作流  \n\n**主要应用场景：**  \n\n  * 过滤掉与后续工作流无关的数据  \n  * 将数据拆分至不同工作流分支，以便后续进行差异化处理",
  "title_zh": "数据过滤与分支处理",
  "publish_date_zh": "最后更新于10个月前",
  "workflow_json_zh": "{\"nodes\":[{\"name\":\"On clicking 'execute'\",\"type\":\"n8n-nodes-base.manualTrigger\",\"position\":[20,720],\"parameters\":{},\"typeVersion\":1},{\"name\":\"Customer Datastore\",\"type\":\"n8n-nodes-base.n8nTrainingCustomerDatastore\",\"position\":[220,720],\"parameters\":{\"operation\":\"getAllPeople\"},\"typeVersion\":1},{\"name\":\"Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[500,600],\"parameters\":{\"width\":520,\"height\":280,\"content\":\"## 2. 使用与/或条件的判断\\n将 **组合** 字段设置为：\\n`ALL` 表示 `AND`（与）条件\\n`ANY` 表示 `OR`（或）条件\"},\"typeVersion\":1},{\"name\":\"Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[500,920],\"parameters\":{\"width\":520,\"height\":360,\"content\":\"## 3. 多分支路由  \\n当过滤条件可能产生两种以上的结果时，我们使用`Switch`节点。通过在节点内的**路由规则**下指定条件来实现多路分流。  \\n\\n本例中，我们将所有**美国客户**的数据发送至路由0，**科罗拉多州客户**发送至路由1，**英国客户**发送至路由2，其余客户则作为默认情况发送至路由3。\"},\"typeVersion\":1},{\"name\":\"Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[500,300],\"parameters\":{\"width\":520,\"height\":260,\"content\":\"## 1. 单条件判断 If  \\n筛选掉不需要的数据或将数据发送至不同分支\"},\"typeVersion\":1},{\"name\":\"Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-520,660],\"parameters\":{\"width\":480,\"height\":240,\"content\":\"## `If`（条件判断）和`Switch`（多路分支）节点是设置条件逻辑以筛选和路由数据的关键节点\\n\\n### 点击`执行工作流`按钮后，双击各节点即可查看点击时对应的输入输出项\"},\"typeVersion\":1},{\"name\":\"Country equals US\",\"type\":\"n8n-nodes-base.if\",\"position\":[540,420],\"parameters\":{\"conditions\":{\"string\":[{\"value1\":\"={{$json[\\\"country\\\"]}}\",\"value2\":\"US\"}]}},\"typeVersion\":1},{\"name\":\"Country is empty or Name contains 'Max'\",\"type\":\"n8n-nodes-base.if\",\"position\":[540,720],\"parameters\":{\"conditions\":{\"string\":[{\"value1\":\"={{$json[\\\"country\\\"]}}\",\"operation\":\"isEmpty\"},{\"value1\":\"={{$json[\\\"name\\\"]}}\",\"value2\":\"Max\",\"operation\":\"contains\"}]},\"combineOperation\":\"any\"},\"typeVersion\":1},{\"name\":\"Country based branching\",\"type\":\"n8n-nodes-base.switch\",\"position\":[540,1120],\"parameters\":{\"rules\":{\"rules\":[{\"value2\":\"US\"},{\"output\":1,\"value2\":\"CO\"},{\"output\":2,\"value2\":\"UK\"}]},\"value1\":\"={{$json[\\\"country\\\"]}}\",\"dataType\":\"string\",\"fallbackOutput\":3},\"typeVersion\":1}],\"connections\":{\"Customer Datastore\":{\"main\":[[{\"node\":\"Country is empty or Name contains 'Max'\",\"type\":\"main\",\"index\":0},{\"node\":\"Country based branching\",\"type\":\"main\",\"index\":0},{\"node\":\"Country equals US\",\"type\":\"main\",\"index\":0}]]},\"On clicking 'execute'\":{\"main\":[[{\"node\":\"Customer Datastore\",\"type\":\"main\",\"index\":0}]]}}}"
}