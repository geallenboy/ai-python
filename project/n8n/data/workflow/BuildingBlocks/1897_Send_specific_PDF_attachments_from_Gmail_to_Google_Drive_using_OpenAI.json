{
  "title": "Send specific PDF attachments from Gmail to Google Drive using OpenAI",
  "url": "https://n8n.io/workflows/1897-send-specific-pdf-attachments-from-gmail-to-google-drive-using-openai/",
  "category": "BuildingBlocks",
  "category_url": "https://n8n.io/workflows/categories/building-blocks/?sort=createdAt:desc",
  "author": "n8n Team",
  "publish_date": "Last update 10 months ago",
  "publish_date_absolute": "2024-07-07",
  "content": "",
  "workflow_json": "{\"meta\":{\"instanceId\":\"a2434c94d549548a685cca39cc4614698e94f527bcea84eefa363f1037ae14cd\"},\"nodes\":[{\"id\":\"deafa2e8-af41-4f11-92e0-09992f6c6970\",\"name\":\"Read PDF\",\"type\":\"n8n-nodes-base.readPDF\",\"position\":[860,1420],\"parameters\":{},\"typeVersion\":1},{\"id\":\"8e3ddbb1-83a1-4f79-9464-61d5a20f0427\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-760,1300],\"parameters\":{\"width\":444.034812880766,\"height\":599.5274151436035,\"content\":\"## Send specific PDF attachments from Gmail to Google Drive using OpenAI\\n\\n_**DISCLAIMER**: You may have varying success when using this workflow so be prepared to validate the correctness of OpenAI's results._\\n\\nThis workflow reads PDF textual content and sends the text to OpenAI. Attachments of interest will then be uploaded to a specified Google Drive folder. For example, you may wish to send invoices received from an email to an inbox folder in Google Drive for later processing. This workflow has been designed to easily change the search term to match your needs. See the workflow for more details.\\n\\n### How it works\\n1. Triggers off on the `On email received` node.\\n2. Iterates over the attachments in the email.\\n3. Uses the `OpenAI` node to filter out the attachments that do not match the search term set in the `Configure` node. You could match on various PDF files (i.e. invoice, receipt, or contract).\\n4. If the PDF attachment matches the search term, the workflow uses the `Google Drive` node to upload the PDF attachment to a specific Google Drive folder.\\n\\n\\nWorkflow written by [David Sha](https://davidsha.me).\"},\"typeVersion\":1},{\"id\":\"fb2c3697-a92f-4be1-b9a6-0326f87de70b\",\"name\":\"Configure\",\"type\":\"n8n-nodes-base.set\",\"position\":[-20,1520],\"parameters\":{\"values\":{\"number\":[{\"name\":\"maxTokenSize\",\"value\":4000},{\"name\":\"replyTokenSize\",\"value\":50}],\"string\":[{\"name\":\"Match on\",\"value\":\"payslip\"},{\"name\":\"Google Drive folder to upload matched PDFs\",\"value\":\"https://drive.google.com/drive/u/0/folders/1SKdHTnYoBNlnhF_QJ-Zyepy-3-WZkObo\"}]},\"options\":{}},\"typeVersion\":1},{\"id\":\"792c49f4-06e3-4d77-a31f-1513f70abf32\",\"name\":\"Is PDF\",\"type\":\"n8n-nodes-base.if\",\"position\":[640,1520],\"parameters\":{\"conditions\":{\"string\":[{\"value1\":\"={{ $binary.data.fileExtension }}\",\"value2\":\"pdf\"}]}},\"typeVersion\":1},{\"id\":\"82be9111-665d-41c6-8190-2247acdb749b\",\"name\":\"Not a PDF\",\"type\":\"n8n-nodes-base.noOp\",\"position\":[860,1620],\"parameters\":{},\"typeVersion\":1},{\"id\":\"c2ac155f-38ee-46f2-8a24-5614e3c32ff5\",\"name\":\"Is matched\",\"type\":\"n8n-nodes-base.if\",\"position\":[1720,1480],\"parameters\":{\"conditions\":{\"string\":[{\"value1\":\"={{ $json[\\\"text\\\"] }}\",\"value2\":\"true\"}]}},\"typeVersion\":1},{\"id\":\"4a8f15b8-c153-493d-9a2a-d63d911d642d\",\"name\":\"This is a matched PDF\",\"type\":\"n8n-nodes-base.noOp\",\"position\":[1940,1380],\"parameters\":{},\"typeVersion\":1},{\"id\":\"89601591-5c7b-461c-859b-25c7c1f0c2e6\",\"name\":\"This is not a matched PDF\",\"type\":\"n8n-nodes-base.noOp\",\"position\":[1940,1580],\"parameters\":{},\"typeVersion\":1},{\"id\":\"ac517c4a-83b8-441f-b14c-c927c18f8012\",\"name\":\"Iterate over email attachments\",\"type\":\"n8n-nodes-base.code\",\"position\":[420,1420],\"parameters\":{\"jsCode\":\"// https://community.n8n.io/t/iterating-over-email-attachments/13588/3\\nlet results = [];\\n\\nfor (const item of $input.all()) {\\n  for (key of Object.keys(item.binary)) {\\n        results.push({\\n            json: {},\\n            binary: {\\n                data: item.binary[key],\\n            }\\n        });\\n    }\\n}\\n\\nreturn results;\"},\"typeVersion\":1},{\"id\":\"79fdf2de-42fe-4ebb-80fb-cc80dcd284f9\",\"name\":\"OpenAI matches PDF textual content\",\"type\":\"n8n-nodes-base.openAi\",\"position\":[1300,1340],\"parameters\":{\"prompt\":\"=Does this PDF file look like a {{ $(\\\"Configure\\\").first().json[\\\"Match on\\\"] }}? Return \\\"true\\\" if it is a {{ $(\\\"Configure\\\").first().json[\\\"Match on\\\"] }} and \\\"false\\\" if not. Only reply with lowercase letters \\\"true\\\" or \\\"false\\\".\\n\\nThis is the PDF filename:\\n```\\n{{ $binary.data.fileName }}\\n```\\n\\nThis is the PDF text content:\\n```\\n{{ $json.text }}\\n```\",\"options\":{\"maxTokens\":\"={{ $('Configure').first().json.replyTokenSize }}\",\"temperature\":0.1}},\"credentials\":{\"openAiApi\":{\"id\":\"30\",\"name\":\"REPLACE ME\"}},\"typeVersion\":1,\"alwaysOutputData\":false},{\"id\":\"8bdb3263-40f2-4277-8cc0-f6edef90a1cd\",\"name\":\"Merge\",\"type\":\"n8n-nodes-base.merge\",\"position\":[1500,1480],\"parameters\":{\"mode\":\"combine\",\"options\":{\"clashHandling\":{\"values\":{\"resolveClash\":\"preferInput1\"}}},\"combinationMode\":\"mergeByPosition\"},\"typeVersion\":2},{\"id\":\"8e68e725-b2df-4c0c-8b17-e0cd4610714d\",\"name\":\"Upload file to folder\",\"type\":\"n8n-nodes-base.googleDrive\",\"position\":[2160,1380],\"parameters\":{\"name\":\"={{ $binary.data.fileName }}\",\"options\":{},\"parents\":[\"={{ $('Configure').first().json[\\\"Google Drive folder to upload matched PDFs\\\"].split(\\\"/\\\").at(-1) }}\"],\"binaryData\":true},\"credentials\":{\"googleDriveOAuth2Api\":{\"id\":\"32\",\"name\":\"REPLACE ME\"}},\"typeVersion\":2},{\"id\":\"bda00901-5ade-471c-b6f9-a18ef4d71589\",\"name\":\"On email received\",\"type\":\"n8n-nodes-base.gmailTrigger\",\"position\":[-240,1520],\"parameters\":{\"simple\":false,\"filters\":{},\"options\":{\"downloadAttachments\":true,\"dataPropertyAttachmentsPrefixName\":\"attachment_\"},\"pollTimes\":{\"item\":[{\"mode\":\"everyMinute\"}]}},\"credentials\":{\"gmailOAuth2\":{\"id\":\"31\",\"name\":\"REPLACE ME\"}},\"typeVersion\":1},{\"id\":\"b2ff4774-336b-47a3-af3f-ada809ed9b8a\",\"name\":\"Note5\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-100,1440],\"parameters\":{\"width\":259.0890718059702,\"height\":607.9684549079709,\"content\":\"### Configuration\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n__`Match on`(required)__: What should OpenAI's search term be? Examples: invoice, callsheet, receipt, contract, payslip.\\n__`Google Drive folder to upload matched PDFs`(required)__: Paste the link of the GDrive folder, an example has been provided but will need to change to a folder you own.\\n__`maxTokenSize`(required)__: The maximum token size for the model you choose. See possible models from OpenAI [here](https://platform.openai.com/docs/models/gpt-3).\\n__`replyTokenSize`(required)__: The reply's maximum token size. Default is 300. This determines how much text the AI will reply with.\"},\"typeVersion\":1},{\"id\":\"beb571fe-e7a3-4f3c-862b-dc01821e5f3f\",\"name\":\"Ignore large PDFs\",\"type\":\"n8n-nodes-base.noOp\",\"position\":[1300,1620],\"parameters\":{},\"typeVersion\":1},{\"id\":\"f3c4f249-08a7-4e5e-8f46-e07393ac10b5\",\"name\":\"Is text within token limit?\",\"type\":\"n8n-nodes-base.if\",\"position\":[1080,1520],\"parameters\":{\"conditions\":{\"boolean\":[{\"value1\":\"={{ $json.text.length() / 4 <= $('Configure').first().json.maxTokenSize - $('Configure').first().json.replyTokenSize }}\",\"value2\":true}]}},\"typeVersion\":1},{\"id\":\"93b6fb96-3e0e-4953-bd09-cf882d2dc69c\",\"name\":\"Has attachments?\",\"type\":\"n8n-nodes-base.if\",\"position\":[200,1520],\"parameters\":{\"conditions\":{\"boolean\":[{\"value1\":\"={{ $('On email received').item.binary.isNotEmpty() }}\",\"value2\":true}]}},\"typeVersion\":1},{\"id\":\"554d415e-a965-46be-8442-35c4cb6b005c\",\"name\":\"There are no attachments\",\"type\":\"n8n-nodes-base.noOp\",\"position\":[420,1620],\"parameters\":{},\"typeVersion\":1}],\"connections\":{\"Merge\":{\"main\":[[{\"node\":\"Is matched\",\"type\":\"main\",\"index\":0}]]},\"Is PDF\":{\"main\":[[{\"node\":\"Read PDF\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Not a PDF\",\"type\":\"main\",\"index\":0}]]},\"Read PDF\":{\"main\":[[{\"node\":\"Is text within token limit?\",\"type\":\"main\",\"index\":0}]]},\"Configure\":{\"main\":[[{\"node\":\"Has attachments?\",\"type\":\"main\",\"index\":0}]]},\"Is matched\":{\"main\":[[{\"node\":\"This is a matched PDF\",\"type\":\"main\",\"index\":0}],[{\"node\":\"This is not a matched PDF\",\"type\":\"main\",\"index\":0}]]},\"Has attachments?\":{\"main\":[[{\"node\":\"Iterate over email attachments\",\"type\":\"main\",\"index\":0}],[{\"node\":\"There are no attachments\",\"type\":\"main\",\"index\":0}]]},\"On email received\":{\"main\":[[{\"node\":\"Configure\",\"type\":\"main\",\"index\":0}]]},\"This is a matched PDF\":{\"main\":[[{\"node\":\"Upload file to folder\",\"type\":\"main\",\"index\":0}]]},\"Is text within token limit?\":{\"main\":[[{\"node\":\"OpenAI matches PDF textual content\",\"type\":\"main\",\"index\":0},{\"node\":\"Merge\",\"type\":\"main\",\"index\":1}],[{\"node\":\"Ignore large PDFs\",\"type\":\"main\",\"index\":0}]]},\"Iterate over email attachments\":{\"main\":[[{\"node\":\"Is PDF\",\"type\":\"main\",\"index\":0}]]},\"OpenAI matches PDF textual content\":{\"main\":[[{\"node\":\"Merge\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "This workflow reads PDF textual content and sends the text to OpenAI. Attachments of interest will then be uploaded to a specified Google Drive folder. For example, you may wish to send invoices received from an email to an inbox folder in Google Drive for later processing. This workflow has been designed to easily change the search term to match your needs. See the workflow for more details.\n\n## Prerequisites\n\n  * [OpenAI credentials](https://docs.n8n.io/integrations/builtin/credentials/openai/).\n  * [Google credentials](https://docs.n8n.io/integrations/builtin/credentials/google/).\n\n\n\n## How it works\n\n  1. Triggers off on the `On email received` node.\n  2. Iterates over the attachments in the email.\n  3. Uses the `OpenAI` node to filter out the attachments that do not match the search term set in the `Configure` node. You could match on various PDF files (i.e. invoice, receipt, or contract).\n  4. If the PDF attachment matches the search term, the workflow uses the `Google Drive` node to upload the PDF attachment to a specific Google Drive folder.\n\n\n",
  "readme_html": "<!--[--><div data-v-50766329=\"\"><p>This workflow reads PDF textual content and sends the text to OpenAI. Attachments of interest will then be uploaded to a specified Google Drive folder. For example, you may wish to send invoices received from an email to an inbox folder in Google Drive for later processing. This workflow has been designed to easily change the search term to match your needs. See the workflow for more details.</p>\n<h2>Prerequisites</h2>\n<ul>\n<li><a href=\"https://docs.n8n.io/integrations/builtin/credentials/openai/\" rel=\"ugc nofollow\" target=\"_blank\">OpenAI credentials</a>.</li>\n<li><a href=\"https://docs.n8n.io/integrations/builtin/credentials/google/\" rel=\"ugc nofollow\" target=\"_blank\">Google credentials</a>.</li>\n</ul>\n<h2>How it works</h2>\n<ol>\n<li>Triggers off on the <code>On email received</code> node.</li>\n<li>Iterates over the attachments in the email.</li>\n<li>Uses the <code>OpenAI</code> node to filter out the attachments that do not match the search term set in the <code>Configure</code> node. You could match on various PDF files (i.e. invoice, receipt, or contract).</li>\n<li>If the PDF attachment matches the search term, the workflow uses the <code>Google Drive</code> node to upload the PDF attachment to a specific Google Drive folder.</li>\n</ol>\n</div><!--]-->",
  "readme_zh": "该工作流程会读取PDF文本内容，并将文本发送至OpenAI处理。符合筛选条件的附件随后会被上传至指定的Google Drive文件夹。例如，您可能希望将邮件收到的发票自动归集到Google Drive的收件文件夹以便后续处理。本工作流程支持灵活修改搜索关键词以满足个性化需求，具体设置请参阅流程说明。\n\n## 前置条件\n\n* 需配置[OpenAI凭证](https://docs.n8n.io/integrations/builtin/credentials/openai/)\n* 需配置[Google凭证](https://docs.n8n.io/integrations/builtin/credentials/google/)\n\n## 运行机制\n\n1. 通过`On email received`节点触发流程\n2. 遍历邮件中的所有附件\n3. 使用`OpenAI`节点配合`Configure`节点设定的关键词，筛选不符合条件的附件（可匹配多种PDF文件类型，如发票/收据/合同等）\n4. 若PDF附件符合筛选条件，则通过`Google Drive`节点将其上传至指定文件夹",
  "title_zh": "使用OpenAI将Gmail中的特定PDF附件发送至Google Drive",
  "publish_date_zh": "最后更新于10个月前",
  "workflow_json_zh": "{\n  \"meta\": {\n    \"instanceId\": \"a2434c94d549548a685cca39cc4614698e94f527bcea84eefa363f1037ae14cd\"\n  },\n  \"nodes\": [\n    {\n      \"id\": \"deafa2e8-af41-4f11-92e0-09992f6c6970\",\n      \"name\": \"Read PDF\",\n      \"type\": \"n8n-nodes-base.readPDF\",\n      \"position\": [\n        860,\n        1420\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"8e3ddbb1-83a1-4f79-9464-61d5a20f0427\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -760,\n        1300\n      ],\n      \"parameters\": {\n        \"width\": 444.034812880766,\n        \"height\": 599.5274151436035,\n        \"content\": \"## 使用OpenAI将Gmail中的特定PDF附件发送至Google Drive\\n\\n_**免责声明**：使用此工作流时效果可能因人而异，请务必验证OpenAI返回结果的准确性。_\\n\\n本工作流会读取PDF文本内容并将其发送至OpenAI进行识别，随后将符合条件的附件上传至指定的Google Drive文件夹。例如，您可能希望将收到的发票邮件自动归档到Google Drive的收件箱文件夹以便后续处理。该工作流设计灵活，可轻松修改搜索关键词以满足不同需求。详见工作流具体配置。\\n\\n### 运作原理\\n1. 由`收到邮件时`节点触发\\n2. 遍历邮件中的所有附件\\n3. 通过`OpenAI`节点筛选不符合`配置`节点所设关键词的附件（可匹配多种PDF文件类型，如发票、收据或合同）\\n4. 若PDF附件符合关键词条件，则通过`Google Drive`节点将其上传至指定文件夹\\n\\n工作流由[David Sha](https://davidsha.me)开发\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"fb2c3697-a92f-4be1-b9a6-0326f87de70b\",\n      \"name\": \"Configure\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        -20,\n        1520\n      ],\n      \"parameters\": {\n        \"values\": {\n          \"number\": [\n            {\n              \"name\": \"maxTokenSize\",\n              \"value\": 4000\n            },\n            {\n              \"name\": \"replyTokenSize\",\n              \"value\": 50\n            }\n          ],\n          \"string\": [\n            {\n              \"name\": \"Match on\",\n              \"value\": \"payslip\"\n            },\n            {\n              \"name\": \"Google Drive folder to upload matched PDFs\",\n              \"value\": \"https://drive.google.com/drive/u/0/folders/1SKdHTnYoBNlnhF_QJ-Zyepy-3-WZkObo\"\n            }\n          ]\n        },\n        \"options\": {}\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"792c49f4-06e3-4d77-a31f-1513f70abf32\",\n      \"name\": \"Is PDF\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        640,\n        1520\n      ],\n      \"parameters\": {\n        \"conditions\": {\n          \"string\": [\n            {\n              \"value1\": \"={{ $binary.data.fileExtension }}\",\n              \"value2\": \"pdf\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"82be9111-665d-41c6-8190-2247acdb749b\",\n      \"name\": \"Not a PDF\",\n      \"type\": \"n8n-nodes-base.noOp\",\n      \"position\": [\n        860,\n        1620\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"c2ac155f-38ee-46f2-8a24-5614e3c32ff5\",\n      \"name\": \"Is matched\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        1720,\n        1480\n      ],\n      \"parameters\": {\n        \"conditions\": {\n          \"string\": [\n            {\n              \"value1\": \"={{ $json[\\\"text\\\"] }}\",\n              \"value2\": \"true\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"4a8f15b8-c153-493d-9a2a-d63d911d642d\",\n      \"name\": \"This is a matched PDF\",\n      \"type\": \"n8n-nodes-base.noOp\",\n      \"position\": [\n        1940,\n        1380\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"89601591-5c7b-461c-859b-25c7c1f0c2e6\",\n      \"name\": \"This is not a matched PDF\",\n      \"type\": \"n8n-nodes-base.noOp\",\n      \"position\": [\n        1940,\n        1580\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"ac517c4a-83b8-441f-b14c-c927c18f8012\",\n      \"name\": \"Iterate over email attachments\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        420,\n        1420\n      ],\n      \"parameters\": {\n        \"jsCode\": \"// https://community.n8n.io/t/iterating-over-email-attachments/13588/3\\nlet results = [];\\n\\nfor (const item of $input.all()) {\\n  for (key of Object.keys(item.binary)) {\\n        results.push({\\n            json: {},\\n            binary: {\\n                data: item.binary[key],\\n            }\\n        });\\n    }\\n}\\n\\nreturn results;\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"79fdf2de-42fe-4ebb-80fb-cc80dcd284f9\",\n      \"name\": \"OpenAI matches PDF textual content\",\n      \"type\": \"n8n-nodes-base.openAi\",\n      \"position\": [\n        1300,\n        1340\n      ],\n      \"parameters\": {\n        \"prompt\": \"=Does this PDF file look like a {{ $(\\\"Configure\\\").first().json[\\\"Match on\\\"] }}? Return \\\"true\\\" if it is a {{ $(\\\"Configure\\\").first().json[\\\"Match on\\\"] }} and \\\"false\\\" if not. Only reply with lowercase letters \\\"true\\\" or \\\"false\\\".\\n\\nThis is the PDF filename:\\n```\\n{{ $binary.data.fileName }}\\n```\\n\\nThis is the PDF text content:\\n```\\n{{ $json.text }}\\n```\",\n        \"options\": {\n          \"maxTokens\": \"={{ $('Configure').first().json.replyTokenSize }}\",\n          \"temperature\": 0.1\n        }\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"30\",\n          \"name\": \"REPLACE ME\"\n        }\n      },\n      \"typeVersion\": 1,\n      \"alwaysOutputData\": false\n    },\n    {\n      \"id\": \"8bdb3263-40f2-4277-8cc0-f6edef90a1cd\",\n      \"name\": \"Merge\",\n      \"type\": \"n8n-nodes-base.merge\",\n      \"position\": [\n        1500,\n        1480\n      ],\n      \"parameters\": {\n        \"mode\": \"combine\",\n        \"options\": {\n          \"clashHandling\": {\n            \"values\": {\n              \"resolveClash\": \"preferInput1\"\n            }\n          }\n        },\n        \"combinationMode\": \"mergeByPosition\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"8e68e725-b2df-4c0c-8b17-e0cd4610714d\",\n      \"name\": \"Upload file to folder\",\n      \"type\": \"n8n-nodes-base.googleDrive\",\n      \"position\": [\n        2160,\n        1380\n      ],\n      \"parameters\": {\n        \"name\": \"={{ $binary.data.fileName }}\",\n        \"options\": {},\n        \"parents\": [\n          \"={{ $('Configure').first().json[\\\"Google Drive folder to upload matched PDFs\\\"].split(\\\"/\\\").at(-1) }}\"\n        ],\n        \"binaryData\": true\n      },\n      \"credentials\": {\n        \"googleDriveOAuth2Api\": {\n          \"id\": \"32\",\n          \"name\": \"REPLACE ME\"\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"bda00901-5ade-471c-b6f9-a18ef4d71589\",\n      \"name\": \"On email received\",\n      \"type\": \"n8n-nodes-base.gmailTrigger\",\n      \"position\": [\n        -240,\n        1520\n      ],\n      \"parameters\": {\n        \"simple\": false,\n        \"filters\": {},\n        \"options\": {\n          \"downloadAttachments\": true,\n          \"dataPropertyAttachmentsPrefixName\": \"attachment_\"\n        },\n        \"pollTimes\": {\n          \"item\": [\n            {\n              \"mode\": \"everyMinute\"\n            }\n          ]\n        }\n      },\n      \"credentials\": {\n        \"gmailOAuth2\": {\n          \"id\": \"31\",\n          \"name\": \"REPLACE ME\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"b2ff4774-336b-47a3-af3f-ada809ed9b8a\",\n      \"name\": \"Note5\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -100,\n        1440\n      ],\n      \"parameters\": {\n        \"width\": 259.0890718059702,\n        \"height\": 607.9684549079709,\n        \"content\": \"### Configuration\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n__`Match on`(required)__: What should OpenAI's search term be? Examples: invoice, callsheet, receipt, contract, payslip.\\n__`Google Drive folder to upload matched PDFs`(required)__: Paste the link of the GDrive folder, an example has been provided but will need to change to a folder you own.\\n__`maxTokenSize`(required)__: The maximum token size for the model you choose. See possible models from OpenAI [here](https://platform.openai.com/docs/models/gpt-3).\\n__`replyTokenSize`(required)__: The reply's maximum token size. Default is 300. This determines how much text the AI will reply with.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"beb571fe-e7a3-4f3c-862b-dc01821e5f3f\",\n      \"name\": \"Ignore large PDFs\",\n      \"type\": \"n8n-nodes-base.noOp\",\n      \"position\": [\n        1300,\n        1620\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"f3c4f249-08a7-4e5e-8f46-e07393ac10b5\",\n      \"name\": \"Is text within token limit?\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        1080,\n        1520\n      ],\n      \"parameters\": {\n        \"conditions\": {\n          \"boolean\": [\n            {\n              \"value1\": \"={{ $json.text.length() / 4 <= $('Configure').first().json.maxTokenSize - $('Configure').first().json.replyTokenSize }}\",\n              \"value2\": true\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"93b6fb96-3e0e-4953-bd09-cf882d2dc69c\",\n      \"name\": \"Has attachments?\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        200,\n        1520\n      ],\n      \"parameters\": {\n        \"conditions\": {\n          \"boolean\": [\n            {\n              \"value1\": \"={{ $('On email received').item.binary.isNotEmpty() }}\",\n              \"value2\": true\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"554d415e-a965-46be-8442-35c4cb6b005c\",\n      \"name\": \"There are no attachments\",\n      \"type\": \"n8n-nodes-base.noOp\",\n      \"position\": [\n        420,\n        1620\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    }\n  ],\n  \"connections\": {\n    \"Merge\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Is matched\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Is PDF\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Read PDF\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Not a PDF\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Read PDF\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Is text within token limit?\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Configure\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Has attachments?\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Is matched\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"This is a matched PDF\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"This is not a matched PDF\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Has attachments?\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Iterate over email attachments\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"There are no attachments\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"On email received\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Configure\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"This is a matched PDF\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Upload file to folder\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Is text within token limit?\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"OpenAI matches PDF textual content\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Merge\",\n            \"type\": \"main\",\n            \"index\": 1\n          }\n        ],\n        [\n          {\n            \"node\": \"Ignore large PDFs\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Iterate over email attachments\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Is PDF\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"OpenAI matches PDF textual content\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}