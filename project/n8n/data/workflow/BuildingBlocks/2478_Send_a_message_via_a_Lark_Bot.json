{
  "title": "Send a message via a Lark Bot",
  "url": "https://n8n.io/workflows/2478-send-a-message-via-a-lark-bot/",
  "category": "BuildingBlocks",
  "category_url": "https://n8n.io/workflows/categories/building-blocks/?sort=createdAt:desc",
  "author": "Hiroshi",
  "publish_date": "Last update 6 months ago",
  "publish_date_absolute": "2024-11-07",
  "content": "",
  "workflow_json": "{\"id\":\"IjQRdNu2ItwNnGL2\",\"meta\":{\"instanceId\":\"18735a589159672fb9dbd8b6f953d0efdca888157c3b8b26943fb0e0e7c1edbb\",\"templateCredsSetupCompleted\":true},\"name\":\"[hiroshidigital.com] Send Message In Larksuite\",\"tags\":[{\"id\":\"96KbUn85yy8jivyf\",\"name\":\"Creator\",\"createdAt\":\"2024-10-22T04:22:34.463Z\",\"updatedAt\":\"2024-10-22T04:22:34.463Z\"}],\"nodes\":[{\"id\":\"9fd838b3-18f7-4056-bbb9-8a9fd843590b\",\"name\":\"When clicking ‘Test workflow’\",\"type\":\"n8n-nodes-base.manualTrigger\",\"position\":[240,220],\"parameters\":{},\"typeVersion\":1},{\"id\":\"7afa44a2-28ec-4e3d-a8bd-a63721648eb2\",\"name\":\"Get Lark Token\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[640,220],\"parameters\":{\"url\":\"https://open.larksuite.com/open-apis/auth/v3/tenant_access_token/internal\",\"method\":\"POST\",\"options\":{},\"jsonBody\":\"={\\n  \\\"app_id\\\": \\\"{{ $json.app_id }}\\\",\\n  \\\"app_secret\\\": \\\"{{ $json.app_secret }}\\\"\\n} \",\"sendBody\":true,\"sendHeaders\":true,\"specifyBody\":\"json\",\"headerParameters\":{\"parameters\":[{\"name\":\"Content-Type\",\"value\":\"application/json\"}]}},\"typeVersion\":4.1},{\"id\":\"4e1fdbef-b881-445c-90ce-95bc9b745772\",\"name\":\"Input\",\"type\":\"n8n-nodes-base.set\",\"position\":[440,220],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"322bfa44-ee2a-4ddf-b747-0f7f3405e294\",\"name\":\"app_id\",\"type\":\"string\",\"value\":\"cli_8cdb09dec256ca40\"},{\"id\":\"c8faab22-235b-412c-8dc8-8142c6e2e0c4\",\"name\":\"app_secret\",\"type\":\"string\",\"value\":\"H5SEZr8O67zuqdIdBKSPhTkoeEBCRNy4\"},{\"id\":\"121fcf72-2a13-4082-a66b-47d56bd4a675\",\"name\":\"chat_id\",\"type\":\"string\",\"value\":\"oc_1d97ee99bffdce243a95b4ebe3ddef7a\"},{\"id\":\"c22bf4f3-eac7-4c04-8b2e-8c0e5011bc1e\",\"name\":\"text\",\"type\":\"string\",\"value\":\"https://hiroshidigital.com/\"}]}},\"typeVersion\":3.4},{\"id\":\"92a62eef-e8ec-4e31-b70e-a80dd83d3bba\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[380,40],\"parameters\":{\"content\":\"You can get app_id and app_secret in Lark here: https://open.larksuite.com/\"},\"typeVersion\":1},{\"id\":\"9cde6452-7221-4d43-9e68-afa70fdebc27\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[760,40],\"parameters\":{\"content\":\"You can get chat_id https://open.larksuite.com/api-explorer/\"},\"typeVersion\":1},{\"id\":\"87d2cc29-6318-4fb7-b430-f4b825649133\",\"name\":\"Send Message\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[840,220],\"parameters\":{\"url\":\"https://open.larksuite.com/open-apis/message/v4/send/\",\"method\":\"POST\",\"options\":{},\"jsonBody\":\"={\\n  \\\"chat_id\\\": \\\"{{ $('Input').item.json.chat_id }}\\\",\\n  \\\"msg_type\\\": \\\"text\\\",\\n  \\\"content\\\": {\\n      \\\"text\\\": \\\"{{ $('Input').item.json.text }}\\\"\\n  }\\n}\",\"sendBody\":true,\"specifyBody\":\"json\",\"authentication\":\"genericCredentialType\",\"genericAuthType\":\"httpHeaderAuth\"},\"credentials\":{\"httpHeaderAuth\":{\"id\":\"srBVlMVQpuZrtnXn\",\"name\":\"Header Auth\"}},\"typeVersion\":4.1}],\"active\":false,\"pinData\":{},\"settings\":{\"executionOrder\":\"v1\"},\"versionId\":\"ecf9cc74-9aa6-4fa0-b887-f41dc47f5632\",\"connections\":{\"Input\":{\"main\":[[{\"node\":\"Get Lark Token\",\"type\":\"main\",\"index\":0}]]},\"Get Lark Token\":{\"main\":[[{\"node\":\"Send Message\",\"type\":\"main\",\"index\":0}]]},\"When clicking ‘Test workflow’\":{\"main\":[[{\"node\":\"Input\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "## What this workflow does\n\nThis workflow in n8n demonstrates how to send a message in Lark using a Lark bot. It begins with a manual trigger and then retrieves the necessary Lark token via a POST request. The token is used to authenticate and send a message to a specific chat using the Lark API. The input node provides the required _**app_id**_ , _**app_secret**_ , _**chat_id**_ , and _**message content**_. After obtaining the token, the message is sent with the Lark API's message/v4/send/ endpoint.\n\n## Who This Is For\n\nThis n8n workflow is ideal for **organizations** , **teams** , and **developers** who need to automate message sending within Lark, especially those managing notifications, alerts, or team reminders. It can help users reduce manual messaging tasks by leveraging a Lark bot to deliver messages at specific intervals or based on particular conditions, enhancing team communication and responsiveness.\n\n## Setup\n\n  1. Fill the `Input` node with your values\n  2. Exchange the bearer token in the `Send Message` node with your token\n\n\n\n**Author: Hiroshi**\n",
  "readme_html": "<!--[--><div data-v-50766329=\"\"><h2>What this workflow does</h2>\n<p>This workflow in n8n demonstrates how to send a message in Lark using a Lark bot. It begins with a manual trigger and then retrieves the necessary Lark token via a POST request. The token is used to authenticate and send a message to a specific chat using the Lark API. The input node provides the required <em><strong>app_id</strong></em>, <em><strong>app_secret</strong></em>, <em><strong>chat_id</strong></em>, and <em><strong>message content</strong></em>. After obtaining the token, the message is sent with the Lark API's message/v4/send/ endpoint.</p>\n<h2>Who This Is For</h2>\n<p>This n8n workflow is ideal for <strong>organizations</strong>, <strong>teams</strong>, and <strong>developers</strong> who need to automate message sending within Lark, especially those managing notifications, alerts, or team reminders. It can help users reduce manual messaging tasks by leveraging a Lark bot to deliver messages at specific intervals or based on particular conditions, enhancing team communication and responsiveness.</p>\n<h2>Setup</h2>\n<ol>\n<li>Fill the <code>Input</code> node with your values</li>\n<li>Exchange the bearer token in the <code>Send Message</code> node with your token</li>\n</ol>\n<p><strong>Author: Hiroshi</strong></p>\n</div><!--]-->",
  "readme_zh": "## 工作流功能说明\n\n本n8n工作流演示了如何通过飞书机器人发送消息。流程从手动触发器开始，通过POST请求获取飞书令牌，随后使用该令牌进行身份验证并调用飞书API向指定群组发送消息。输入节点需提供_**应用ID**_、_**应用密钥**_、_**群组ID**_和_**消息内容**_。获取令牌后，通过飞书API的message/v4/send/接口发送消息。\n\n## 适用对象\n\n本工作流特别适合需要实现飞书消息自动发送的**企业**、**团队**和**开发者**，尤其适用于管理通知、警报或团队提醒的场景。通过飞书机器人按特定间隔或条件自动发送消息，可有效减少人工操作，提升团队沟通效率与响应速度。\n\n## 配置步骤\n\n1. 在`输入节点`填写您的参数值  \n2. 将`发送消息节点`中的Bearer令牌替换为您的有效令牌  \n\n**作者：广志**",
  "title_zh": "通过飞书机器人发送消息",
  "publish_date_zh": "最后更新于6个月前",
  "workflow_json_zh": "{\n  \"id\": \"IjQRdNu2ItwNnGL2\",\n  \"meta\": {\n    \"instanceId\": \"18735a589159672fb9dbd8b6f953d0efdca888157c3b8b26943fb0e0e7c1edbb\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"name\": \"[hiroshidigital.com] Send Message In Larksuite\",\n  \"tags\": [\n    {\n      \"id\": \"96KbUn85yy8jivyf\",\n      \"name\": \"Creator\",\n      \"createdAt\": \"2024-10-22T04:22:34.463Z\",\n      \"updatedAt\": \"2024-10-22T04:22:34.463Z\"\n    }\n  ],\n  \"nodes\": [\n    {\n      \"id\": \"9fd838b3-18f7-4056-bbb9-8a9fd843590b\",\n      \"name\": \"When clicking ‘Test workflow’\",\n      \"type\": \"n8n-nodes-base.manualTrigger\",\n      \"position\": [\n        240,\n        220\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"7afa44a2-28ec-4e3d-a8bd-a63721648eb2\",\n      \"name\": \"Get Lark Token\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        640,\n        220\n      ],\n      \"parameters\": {\n        \"url\": \"https://open.larksuite.com/open-apis/auth/v3/tenant_access_token/internal\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"jsonBody\": \"={\\n  \\\"app_id\\\": \\\"{{ $json.app_id }}\\\",\\n  \\\"app_secret\\\": \\\"{{ $json.app_secret }}\\\"\\n} \",\n        \"sendBody\": true,\n        \"sendHeaders\": true,\n        \"specifyBody\": \"json\",\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"Content-Type\",\n              \"value\": \"application/json\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 4.1\n    },\n    {\n      \"id\": \"4e1fdbef-b881-445c-90ce-95bc9b745772\",\n      \"name\": \"Input\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        440,\n        220\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"322bfa44-ee2a-4ddf-b747-0f7f3405e294\",\n              \"name\": \"app_id\",\n              \"type\": \"string\",\n              \"value\": \"cli_8cdb09dec256ca40\"\n            },\n            {\n              \"id\": \"c8faab22-235b-412c-8dc8-8142c6e2e0c4\",\n              \"name\": \"app_secret\",\n              \"type\": \"string\",\n              \"value\": \"H5SEZr8O67zuqdIdBKSPhTkoeEBCRNy4\"\n            },\n            {\n              \"id\": \"121fcf72-2a13-4082-a66b-47d56bd4a675\",\n              \"name\": \"chat_id\",\n              \"type\": \"string\",\n              \"value\": \"oc_1d97ee99bffdce243a95b4ebe3ddef7a\"\n            },\n            {\n              \"id\": \"c22bf4f3-eac7-4c04-8b2e-8c0e5011bc1e\",\n              \"name\": \"text\",\n              \"type\": \"string\",\n              \"value\": \"https://hiroshidigital.com/\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"92a62eef-e8ec-4e31-b70e-a80dd83d3bba\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        380,\n        40\n      ],\n      \"parameters\": {\n        \"content\": \"您可以在飞书的此处获取app_id和app_secret：https://open.larksuite.com/\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"9cde6452-7221-4d43-9e68-afa70fdebc27\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        760,\n        40\n      ],\n      \"parameters\": {\n        \"content\": \"您可以通过访问 https://open.larksuite.com/api-explorer 获取 chat_id\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"87d2cc29-6318-4fb7-b430-f4b825649133\",\n      \"name\": \"Send Message\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        840,\n        220\n      ],\n      \"parameters\": {\n        \"url\": \"https://open.larksuite.com/open-apis/message/v4/send/\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"jsonBody\": \"={\\n  \\\"chat_id\\\": \\\"{{ $('Input').item.json.chat_id }}\\\",\\n  \\\"msg_type\\\": \\\"text\\\",\\n  \\\"content\\\": {\\n      \\\"text\\\": \\\"{{ $('Input').item.json.text }}\\\"\\n  }\\n}\",\n        \"sendBody\": true,\n        \"specifyBody\": \"json\",\n        \"authentication\": \"genericCredentialType\",\n        \"genericAuthType\": \"httpHeaderAuth\"\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": {\n          \"id\": \"srBVlMVQpuZrtnXn\",\n          \"name\": \"Header Auth\"\n        }\n      },\n      \"typeVersion\": 4.1\n    }\n  ],\n  \"active\": false,\n  \"pinData\": {},\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"ecf9cc74-9aa6-4fa0-b887-f41dc47f5632\",\n  \"connections\": {\n    \"Input\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get Lark Token\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get Lark Token\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Send Message\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When clicking ‘Test workflow’\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Input\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}