{
  "title": "Use OpenRouter in n8n versions <1.78",
  "url": "https://n8n.io/workflows/2897-use-openrouter-in-n8n-versions-less178/",
  "category": "BuildingBlocks",
  "category_url": "https://n8n.io/workflows/categories/building-blocks/?sort=createdAt:desc",
  "author": "Daniel Nolde",
  "publish_date": "Last update 3 months ago",
  "publish_date_absolute": "2025-02-06",
  "content": "",
  "workflow_json": "{\"id\":\"VhN3CX6QPBkX77pZ\",\"meta\":{\"instanceId\":\"98bf0d6aef1dd8b7a752798121440fb171bf7686b95727fd617f43452393daa3\",\"templateCredsSetupCompleted\":true},\"name\":\"Use any LLM-Model via OpenRouter\",\"tags\":[{\"id\":\"uumvgGHY5e6zEL7V\",\"name\":\"Published Template\",\"createdAt\":\"2025-02-10T11:18:10.923Z\",\"updatedAt\":\"2025-02-10T11:18:10.923Z\"}],\"nodes\":[{\"id\":\"b72721d2-bce7-458d-8ff1-cc9f6d099aaf\",\"name\":\"Settings\",\"type\":\"n8n-nodes-base.set\",\"position\":[-420,-640],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"3d7f9677-c753-4126-b33a-d78ef701771f\",\"name\":\"model\",\"type\":\"string\",\"value\":\"deepseek/deepseek-r1-distill-llama-8b\"},{\"id\":\"301f86ec-260f-4d69-abd9-bde982e3e0aa\",\"name\":\"prompt\",\"type\":\"string\",\"value\":\"={{ $json.chatInput }}\"},{\"id\":\"a9f65181-902d-48f5-95ce-1352d391a056\",\"name\":\"sessionId\",\"type\":\"string\",\"value\":\"={{ $json.sessionId }}\"}]}},\"typeVersion\":3.4},{\"id\":\"a4593d64-e67a-490e-9cb4-936cc46273a0\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-460,-740],\"parameters\":{\"width\":180,\"height\":400,\"content\":\"## Settings\\nSpecify the model\"},\"typeVersion\":1},{\"id\":\"3ea3b09a-0ab7-4e0f-bb4f-3d807d072d4e\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-240,-740],\"parameters\":{\"color\":3,\"width\":380,\"height\":400,\"content\":\"## Run LLM\\nUsing OpenRouter to make model fully configurable\"},\"typeVersion\":1},{\"id\":\"19d47fcb-af37-4daa-84fd-3f43ffcb90ff\",\"name\":\"When chat message received\",\"type\":\"@n8n/n8n-nodes-langchain.chatTrigger\",\"position\":[-660,-640],\"webhookId\":\"71f56e44-401f-44ba-b54d-c947e283d034\",\"parameters\":{\"options\":{}},\"typeVersion\":1.1},{\"id\":\"f5a793f2-1e2f-4349-a075-9b9171297277\",\"name\":\"AI Agent\",\"type\":\"@n8n/n8n-nodes-langchain.agent\",\"position\":[-180,-640],\"parameters\":{\"text\":\"={{ $json.prompt }}\",\"options\":{},\"promptType\":\"define\"},\"typeVersion\":1.7},{\"id\":\"dbbd9746-ca25-4163-91c5-a9e33bff62a4\",\"name\":\"Chat Memory\",\"type\":\"@n8n/n8n-nodes-langchain.memoryBufferWindow\",\"position\":[-80,-460],\"parameters\":{\"sessionKey\":\"={{ $json.sessionId }}\",\"sessionIdType\":\"customKey\"},\"typeVersion\":1.3},{\"id\":\"ef368cea-1b38-455b-b46a-5d0ef7a3ceb3\",\"name\":\"LLM Model\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\"position\":[-200,-460],\"parameters\":{\"model\":\"={{ $json.model }}\",\"options\":{}},\"credentials\":{\"openAiApi\":{\"id\":\"66JEQJ5kJel1P9t3\",\"name\":\"OpenRouter\"}},\"typeVersion\":1.1},{\"id\":\"32601e76-0979-4690-8dcf-149ddbf61983\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-460,-320],\"parameters\":{\"width\":600,\"height\":240,\"content\":\"## Model examples\\n\\n* openai/o3-mini\\n* google/gemini-2.0-flash-001\\n* deepseek/deepseek-r1-distill-llama-8b\\n* mistralai/mistral-small-24b-instruct-2501:free\\n* qwen/qwen-turbo\\n\\nFor more see https://openrouter.ai/models\"},\"typeVersion\":1}],\"active\":false,\"pinData\":{},\"settings\":{\"executionOrder\":\"v1\"},\"versionId\":\"6d0caf5d-d6e6-4059-9211-744b0f4bc204\",\"connections\":{\"Settings\":{\"main\":[[{\"node\":\"AI Agent\",\"type\":\"main\",\"index\":0}]]},\"LLM Model\":{\"ai_languageModel\":[[{\"node\":\"AI Agent\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"Chat Memory\":{\"ai_memory\":[[{\"node\":\"AI Agent\",\"type\":\"ai_memory\",\"index\":0}]]},\"When chat message received\":{\"main\":[[{\"node\":\"Settings\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "## What it is:\n\nIn version 1.78, n8n introduced a dedicated node to use the OpenRouter service, which lets you to use a lot of different LLM models and providers and change models on the fly in an agentic workflow.\n\nFor prior n8n versions, there's a workaround to make OpenRouter accessible, by using the OpenAI node with a OpenRouter-specific BaseURL.\n\nThis trivial workflow demonstrates this for version before 1.78, so that you can use different LLM model dynamically with the available n8n nodes for OpenAI LLM and OpenAI credentials.\n\n## What you can do:\n\n  * Use any of the [OpenRouter models](https://openrouter.ai/models)\n  * Have the model even dynamically configured or changing (by some external config, some rule, or some specific chat message)\n\n\n\n## Setup steps:\n\n  * Import the workflow\n  * Ensure you have registered and account, purchased some credits and created and API key for [OpenRouter.ai](https://openrouter.ai)\n  * Configure the \"OpenRouter\" credentials with your own credentials, using an _OpenAI type_ credential, but making sure in the credential's config form its \"Base URL\" is set to _<https://openrouter.ai/api/v1_> so OpenRouter is used instead of OpenAI.\n  * Open the \"Settings\" node and change the model value to any valid model id from the [OpenRouter models list](https://openrouter.ai/models) or even have the model property set dynamically\n\n\n",
  "readme_html": "<!--[--><div data-v-50766329=\"\"><h2>What it is:</h2>\n<p>In version 1.78, n8n introduced a dedicated node to use the OpenRouter service, which lets you to use a lot of different LLM models and providers and change models on the fly in an agentic workflow.</p>\n<p>For prior n8n versions, there's a workaround to make OpenRouter accessible, by using the OpenAI node with a OpenRouter-specific BaseURL.</p>\n<p>This trivial workflow demonstrates this for version before 1.78, so that you can use different LLM model dynamically with the available n8n nodes for OpenAI LLM and OpenAI credentials.</p>\n<h2>What you can do:</h2>\n<ul>\n<li>Use any of the <a href=\"https://openrouter.ai/models\" rel=\"ugc nofollow\" target=\"_blank\">OpenRouter models</a></li>\n<li>Have the model even dynamically configured or changing (by some external config, some rule, or some specific chat message)</li>\n</ul>\n<h2>Setup steps:</h2>\n<ul>\n<li>Import the workflow</li>\n<li>Ensure you have registered and account, purchased some credits and created and API key for <a href=\"https://openrouter.ai\" rel=\"ugc nofollow\" target=\"_blank\">OpenRouter.ai</a></li>\n<li>Configure the \"OpenRouter\" credentials with your own credentials, using an <em>OpenAI  type</em> credential, but making sure in the credential's config form its \"Base URL\" is set to _<a href=\"https://openrouter.ai/api/v1_\" rel=\"ugc nofollow\" target=\"_blank\">https://openrouter.ai/api/v1_</a> so OpenRouter is used instead of OpenAI.</li>\n<li>Open the \"Settings\" node and change the model value to any valid model id from the <a href=\"https://openrouter.ai/models\" rel=\"ugc nofollow\" target=\"_blank\">OpenRouter models list</a> or even have the model property set dynamically</li>\n</ul>\n</div><!--]-->",
  "readme_zh": "## 功能说明:\n\nn8n在1.78版本中推出了专用节点支持OpenRouter服务，该服务允许您在智能体工作流中动态切换多种不同的LLM模型和服务提供商。\n\n对于早期版本的n8n，您可以通过在OpenAI节点中配置OpenRouter专属的BaseURL来实现接入。\n\n本基础工作流专为1.78之前版本设计，使您能够利用n8n现有的OpenAI LLM节点和凭证体系动态调用不同大语言模型。\n\n## 核心优势:\n\n  * 支持调用[OpenRouter平台所有模型](https://openrouter.ai/models)\n  * 支持通过外部配置、规则或特定聊天消息动态切换模型\n\n## 配置步骤:\n\n  * 导入工作流\n  * 确保您已完成[OpenRouter.ai](https://openrouter.ai)账号注册、购买额度并创建API密钥\n  * 使用_OpenAI类型_凭证配置\"OpenRouter\"凭证，但需在凭证配置中将\"Base URL\"设置为_<https://openrouter.ai/api/v1_>以替代OpenAI服务\n  * 打开\"Settings\"节点，将模型值更改为[OpenRouter模型列表](https://openrouter.ai/models)中的任一有效模型ID，或设置为动态参数",
  "title_zh": "在n8n版本<1.78中使用OpenRouter",
  "publish_date_zh": "最后更新于3个月前",
  "workflow_json_zh": "{\"id\":\"VhN3CX6QPBkX77pZ\",\"meta\":{\"instanceId\":\"98bf0d6aef1dd8b7a752798121440fb171bf7686b95727fd617f43452393daa3\",\"templateCredsSetupCompleted\":true},\"name\":\"Use any LLM-Model via OpenRouter\",\"tags\":[{\"id\":\"uumvgGHY5e6zEL7V\",\"name\":\"Published Template\",\"createdAt\":\"2025-02-10T11:18:10.923Z\",\"updatedAt\":\"2025-02-10T11:18:10.923Z\"}],\"nodes\":[{\"id\":\"b72721d2-bce7-458d-8ff1-cc9f6d099aaf\",\"name\":\"Settings\",\"type\":\"n8n-nodes-base.set\",\"position\":[-420,-640],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"3d7f9677-c753-4126-b33a-d78ef701771f\",\"name\":\"model\",\"type\":\"string\",\"value\":\"deepseek/deepseek-r1-distill-llama-8b\"},{\"id\":\"301f86ec-260f-4d69-abd9-bde982e3e0aa\",\"name\":\"prompt\",\"type\":\"string\",\"value\":\"={{ $json.chatInput }}\"},{\"id\":\"a9f65181-902d-48f5-95ce-1352d391a056\",\"name\":\"sessionId\",\"type\":\"string\",\"value\":\"={{ $json.sessionId }}\"}]}},\"typeVersion\":3.4},{\"id\":\"a4593d64-e67a-490e-9cb4-936cc46273a0\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-460,-740],\"parameters\":{\"width\":180,\"height\":400,\"content\":\"## 设置\\n指定模型\"},\"typeVersion\":1},{\"id\":\"3ea3b09a-0ab7-4e0f-bb4f-3d807d072d4e\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-240,-740],\"parameters\":{\"color\":3,\"width\":380,\"height\":400,\"content\":\"## 运行大语言模型\\n通过OpenRouter实现模型完全可配置化\"},\"typeVersion\":1},{\"id\":\"19d47fcb-af37-4daa-84fd-3f43ffcb90ff\",\"name\":\"When chat message received\",\"type\":\"@n8n/n8n-nodes-langchain.chatTrigger\",\"position\":[-660,-640],\"webhookId\":\"71f56e44-401f-44ba-b54d-c947e283d034\",\"parameters\":{\"options\":{}},\"typeVersion\":1.1},{\"id\":\"f5a793f2-1e2f-4349-a075-9b9171297277\",\"name\":\"AI Agent\",\"type\":\"@n8n/n8n-nodes-langchain.agent\",\"position\":[-180,-640],\"parameters\":{\"text\":\"={{ $json.prompt }}\",\"options\":{},\"promptType\":\"define\"},\"typeVersion\":1.7},{\"id\":\"dbbd9746-ca25-4163-91c5-a9e33bff62a4\",\"name\":\"Chat Memory\",\"type\":\"@n8n/n8n-nodes-langchain.memoryBufferWindow\",\"position\":[-80,-460],\"parameters\":{\"sessionKey\":\"={{ $json.sessionId }}\",\"sessionIdType\":\"customKey\"},\"typeVersion\":1.3},{\"id\":\"ef368cea-1b38-455b-b46a-5d0ef7a3ceb3\",\"name\":\"LLM Model\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\"position\":[-200,-460],\"parameters\":{\"model\":\"={{ $json.model }}\",\"options\":{}},\"credentials\":{\"openAiApi\":{\"id\":\"66JEQJ5kJel1P9t3\",\"name\":\"OpenRouter\"}},\"typeVersion\":1.1},{\"id\":\"32601e76-0979-4690-8dcf-149ddbf61983\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-460,-320],\"parameters\":{\"width\":600,\"height\":240,\"content\":\"## 模型示例\\n\\n* openai/o3-mini\\n* google/gemini-2.0-flash-001\\n* deepseek/deepseek-r1-distill-llama-8b\\n* mistralai/mistral-small-24b-instruct-2501:免费版\\n* qwen/qwen-turbo\\n\\n更多模型请访问 https://openrouter.ai/models\"},\"typeVersion\":1}],\"active\":false,\"pinData\":{},\"settings\":{\"executionOrder\":\"v1\"},\"versionId\":\"6d0caf5d-d6e6-4059-9211-744b0f4bc204\",\"connections\":{\"Settings\":{\"main\":[[{\"node\":\"AI Agent\",\"type\":\"main\",\"index\":0}]]},\"LLM Model\":{\"ai_languageModel\":[[{\"node\":\"AI Agent\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"Chat Memory\":{\"ai_memory\":[[{\"node\":\"AI Agent\",\"type\":\"ai_memory\",\"index\":0}]]},\"When chat message received\":{\"main\":[[{\"node\":\"Settings\",\"type\":\"main\",\"index\":0}]]}}}"
}