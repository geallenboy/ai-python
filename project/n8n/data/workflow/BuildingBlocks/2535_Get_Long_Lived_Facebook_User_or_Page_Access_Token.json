{
  "title": "Get Long Lived Facebook User or Page Access Token",
  "url": "https://n8n.io/workflows/2535-get-long-lived-facebook-user-or-page-access-token/",
  "category": "BuildingBlocks",
  "category_url": "https://n8n.io/workflows/categories/building-blocks/?sort=createdAt:desc",
  "author": "Sira Ekabut",
  "publish_date": "Last update 6 months ago",
  "publish_date_absolute": "",
  "content": "",
  "workflow_json": "{\"id\":\"iA0rm7IWi7xmY5sQ\",\"meta\":{\"instanceId\":\"08daa2aa5b6032ff63690600b74f68f5b0f34a3b100102e019b35c4419168977\",\"templateCredsSetupCompleted\":true},\"name\":\"Get Long Lived Facebook User or Page Access Token\",\"tags\":[],\"nodes\":[{\"id\":\"2a5077ad-89ee-4659-93a9-e01bcceba0ad\",\"name\":\"When clicking ‘Test workflow’\",\"type\":\"n8n-nodes-base.manualTrigger\",\"position\":[480,280],\"parameters\":{},\"typeVersion\":1},{\"id\":\"e2c7ce4c-fbf9-4552-8a9e-5b41d72c8921\",\"name\":\"Get Long Lived FB User Token\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[1000,280],\"parameters\":{\"url\":\"https://graph.facebook.com/v20.0/oauth/access_token\",\"options\":{\"response\":{\"response\":{\"fullResponse\":true}}},\"sendQuery\":true,\"queryParameters\":{\"parameters\":[{\"name\":\" grant_type\",\"value\":\"fb_exchange_token\"},{\"name\":\" client_id\",\"value\":\"={{ $json[' client_id'] }}\"},{\"name\":\" client_secret\",\"value\":\"={{ $json[' client_secret'] }}\"},{\"name\":\" fb_exchange_token\",\"value\":\"={{ $json.user_access_token }}\"}]}},\"typeVersion\":4.2},{\"id\":\"4e898760-43cd-4d4f-a76c-555175fb2a27\",\"name\":\"Get Long Lived FB Page Token\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[1280,280],\"parameters\":{\"url\":\"=https://graph.facebook.com/v20.0/{{ $('Set Parameter').item.json.app_scoped_user_id }}/accounts\",\"method\":\"=GET\",\"options\":{\"response\":{\"response\":{\"fullResponse\":true}}},\"sendQuery\":true,\"queryParameters\":{\"parameters\":[{\"name\":\" access_token\",\"value\":\"={{ $json.body.access_token }}\"}]}},\"typeVersion\":4.2},{\"id\":\"6ac48498-014f-4721-9629-acd3bd1329e7\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[640,-87.08653868552273],\"parameters\":{\"width\":260.14166686078653,\"height\":552.0076928452548,\"content\":\"## Set Required Facebook Parameter \\n- client_id\\n- client_secret\\n- user_access_token\\n- app-scoped-user-id (optional)\\n\\n## according to this doc\\n https://developers.facebook.com/docs/facebook-login/guides/access-tokens/get-long-lived/\"},\"typeVersion\":1},{\"id\":\"11a68266-f7ec-4c56-9327-c4fd0e4478f6\",\"name\":\"Set Parameter\",\"type\":\"n8n-nodes-base.set\",\"position\":[700,280],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"b1f6b8a1-dc25-4b1e-9aa3-0c0e452ae2de\",\"name\":\" client_id\",\"type\":\"string\",\"value\":\"xxxx\"},{\"id\":\"9a63879a-c359-49ad-9fec-19c9e4c78dd6\",\"name\":\" client_secret\",\"type\":\"string\",\"value\":\"yyyy\"},{\"id\":\"6971a841-ed5e-4d96-bdab-1eaec2d51ccc\",\"name\":\"user_access_token\",\"type\":\"string\",\"value\":\"zzzzz\"},{\"id\":\"c75d5e50-62ea-4ee0-bfaa-5f79cf4d147e\",\"name\":\"app_scoped_user_id\",\"type\":\"string\",\"value\":\"uuuuuu\"}]}},\"typeVersion\":3.4}],\"active\":false,\"pinData\":{},\"settings\":{\"executionOrder\":\"v1\"},\"versionId\":\"390c37ce-2c9a-4341-bcb4-2f669f65e209\",\"connections\":{\"Set Parameter\":{\"main\":[[{\"node\":\"Get Long Lived FB User Token\",\"type\":\"main\",\"index\":0}]]},\"Get Long Lived FB User Token\":{\"main\":[[{\"node\":\"Get Long Lived FB Page Token\",\"type\":\"main\",\"index\":0}]]},\"When clicking ‘Test workflow’\":{\"main\":[[{\"node\":\"Set Parameter\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "**Facebook access tokens expire quickly, requiring regular updates for continued API access.** This workflow simplifies the process of exchanging short-lived tokens for long-lived ones, saving time and reducing manual effort.\n\n**What this workflow does**\n\n  * Exchanges a short-lived Facebook User Access Token for a long-lived token using the Facebook Graph API.\n  * Optionally retrieves a long-lived Page Access Token associated with the user.\n  * Outputs both the user and page tokens for further use in automation or integrations.\n\n\n\n**Setup**  \n**Prerequisites:**\n\n  * A valid Facebook App ID and App Secret.\n  * A short-lived User Access Token from the Facebook platform.\n  * (Optional) The App-Scoped User ID for fetching associated page tokens.\n\n\n\n**Workflow Configuration:**\n\n  * Replace placeholder values in the \"Set Parameter\" node with your Facebook credentials and token.\n  * Run the workflow manually to generate long-lived tokens.\n\n\n\n**Documentation Reference:**\n\nFollow the official Facebook guide for more details: <https://developers.facebook.com/docs/facebook-login/guides/access-tokens/get-long-lived/>\n",
  "readme_html": "<!--[--><div data-v-50766329=\"\"><p><strong>Facebook access tokens expire quickly, requiring regular updates for continued API access.</strong> This workflow simplifies the process of exchanging short-lived tokens for long-lived ones, saving time and reducing manual effort.</p>\n<p><strong>What this workflow does</strong></p>\n<ul>\n<li>Exchanges a short-lived Facebook User Access Token for a long-lived token using the Facebook Graph API.</li>\n<li>Optionally retrieves a long-lived Page Access Token associated with the user.</li>\n<li>Outputs both the user and page tokens for further use in automation or integrations.</li>\n</ul>\n<p><strong>Setup</strong><br>\n<strong>Prerequisites:</strong></p>\n<ul>\n<li>A valid Facebook App ID and App Secret.</li>\n<li>A short-lived User Access Token from the Facebook platform.</li>\n<li>(Optional) The App-Scoped User ID for fetching associated page tokens.</li>\n</ul>\n<p><strong>Workflow Configuration:</strong></p>\n<ul>\n<li>Replace placeholder values in the \"Set Parameter\" node with your Facebook credentials and token.</li>\n<li>Run the workflow manually to generate long-lived tokens.</li>\n</ul>\n<p><strong>Documentation Reference:</strong></p>\n<p>Follow the official Facebook guide for more details: <a href=\"https://developers.facebook.com/docs/facebook-login/guides/access-tokens/get-long-lived/\" rel=\"ugc nofollow\" target=\"_blank\">https://developers.facebook.com/docs/facebook-login/guides/access-tokens/get-long-lived/</a></p>\n</div><!--]-->"
}