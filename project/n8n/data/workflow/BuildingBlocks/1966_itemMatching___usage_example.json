{
  "title": "itemMatching() usage example",
  "url": "https://n8n.io/workflows/1966-itemmatching-usage-example/",
  "category": "BuildingBlocks",
  "category_url": "https://n8n.io/workflows/categories/building-blocks/?sort=createdAt:desc",
  "author": "n8n Team",
  "publish_date": "Last update 10 months ago",
  "publish_date_absolute": "2024-07-07",
  "content": "",
  "workflow_json": "{\"id\":\"gkOayLvJnwcTiHbk\",\"meta\":{\"instanceId\":\"bd0e051174def82b88b5cd547222662900558d74b239c4048ea0f6b7ed61c642\"},\"name\":\"itemMatching() example\",\"tags\":[],\"nodes\":[{\"id\":\"ba0e23f6-aec6-4c22-8e7c-ab4fc65c7767\",\"name\":\"When clicking \\\"Execute Workflow\\\"\",\"type\":\"n8n-nodes-base.manualTrigger\",\"position\":[640,500],\"parameters\":{},\"typeVersion\":1},{\"id\":\"8434c3b4-5b80-48e5-803b-b84eb750b2c5\",\"name\":\"Customer Datastore (n8n training)\",\"type\":\"n8n-nodes-base.n8nTrainingCustomerDatastore\",\"position\":[880,500],\"parameters\":{\"operation\":\"getAllPeople\",\"returnAll\":true},\"typeVersion\":1},{\"id\":\"4750754a-92a6-44d2-a353-22fbb51a4d00\",\"name\":\"Code\",\"type\":\"n8n-nodes-base.code\",\"position\":[1440,500],\"parameters\":{\"language\":\"python\",\"pythonCode\":\"for i,item in enumerate(_input.all()):\\n  _input.all()[i].json.restoreEmail = _('Customer Datastore (n8n training)').itemMatching(i).json.email\\n\\nreturn _input.all();\"},\"typeVersion\":2},{\"id\":\"9ac437bd-0d0d-4d92-845a-a1c9a7976d4d\",\"name\":\"Edit Fields\",\"type\":\"n8n-nodes-base.set\",\"position\":[1180,500],\"parameters\":{\"fields\":{\"values\":[{\"name\":\"name\",\"stringValue\":\"={{ $json.name }}\"}]},\"include\":\"none\",\"options\":{}},\"typeVersion\":3.2},{\"id\":\"d59c512c-2dca-4960-b287-b4908713b0a3\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[820,400],\"parameters\":{\"height\":304,\"content\":\"## Generate example data\"},\"typeVersion\":1},{\"id\":\"fad37032-13cc-461e-b48e-a2f470d07823\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1100,398],\"parameters\":{\"height\":303,\"content\":\"## Reduce the data\\n\\nRemove all data except the names\"},\"typeVersion\":1},{\"id\":\"d0751fce-d9f0-40bf-aeb2-9dbc5d0e9bdb\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1380,400],\"parameters\":{\"height\":304,\"content\":\"## Restore\\n\\nRestore the email address data\"},\"typeVersion\":1},{\"id\":\"2b1a67e9-60d6-411e-8ae7-94b02da6be34\",\"name\":\"Sticky Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[430,220],\"parameters\":{\"width\":352,\"height\":264,\"content\":\"## About this workflow\\n\\nThis workflow provides a simple example of how to use `itemMatching(itemIndex: Number)` in the Code node to retrieve linked items from earlier in the workflow.\\n\\nThis example uses JavaScript. Refer to [Retrieve linked items from earlier in the workflow](https://docs.n8n.io/code/cookbook/builtin/itemmatching/) for the Python code.\\n\"},\"typeVersion\":1}],\"active\":false,\"pinData\":{},\"settings\":{\"executionOrder\":\"v1\"},\"versionId\":\"02e18c8e-1bec-4170-a2d0-72ec6e063273\",\"connections\":{\"Edit Fields\":{\"main\":[[{\"node\":\"Code\",\"type\":\"main\",\"index\":0}]]},\"When clicking \\\"Execute Workflow\\\"\":{\"main\":[[{\"node\":\"Customer Datastore (n8n training)\",\"type\":\"main\",\"index\":0}]]},\"Customer Datastore (n8n training)\":{\"main\":[[{\"node\":\"Edit Fields\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "This workflow provides a simple example of how to use `itemMatching(itemIndex: Number)` in the Code node to retrieve linked items from earlier in the workflow.\n",
  "readme_html": "<!--[--><div data-v-50766329=\"\"><p>This workflow provides a simple example of how to use <code>itemMatching(itemIndex: Number)</code> in the Code node to retrieve linked items from earlier in the workflow.</p>\n</div><!--]-->",
  "readme_zh": "此工作流程提供了一个简单示例，展示如何在代码节点中使用`itemMatching(itemIndex: Number)`来获取工作流中先前关联的项目。",
  "title_zh": "itemMatching() 使用示例",
  "publish_date_zh": "最后更新于10个月前",
  "workflow_json_zh": "{\n  \"id\": \"gkOayLvJnwcTiHbk\",\n  \"meta\": {\n    \"instanceId\": \"bd0e051174def82b88b5cd547222662900558d74b239c4048ea0f6b7ed61c642\"\n  },\n  \"name\": \"itemMatching() example\",\n  \"tags\": [],\n  \"nodes\": [\n    {\n      \"id\": \"ba0e23f6-aec6-4c22-8e7c-ab4fc65c7767\",\n      \"name\": \"When clicking \\\"Execute Workflow\\\"\",\n      \"type\": \"n8n-nodes-base.manualTrigger\",\n      \"position\": [\n        640,\n        500\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"8434c3b4-5b80-48e5-803b-b84eb750b2c5\",\n      \"name\": \"Customer Datastore (n8n training)\",\n      \"type\": \"n8n-nodes-base.n8nTrainingCustomerDatastore\",\n      \"position\": [\n        880,\n        500\n      ],\n      \"parameters\": {\n        \"operation\": \"getAllPeople\",\n        \"returnAll\": true\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"4750754a-92a6-44d2-a353-22fbb51a4d00\",\n      \"name\": \"Code\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        1440,\n        500\n      ],\n      \"parameters\": {\n        \"language\": \"python\",\n        \"pythonCode\": \"for i,item in enumerate(_input.all()):\\n  _input.all()[i].json.restoreEmail = _('Customer Datastore (n8n training)').itemMatching(i).json.email\\n\\nreturn _input.all();\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"9ac437bd-0d0d-4d92-845a-a1c9a7976d4d\",\n      \"name\": \"Edit Fields\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        1180,\n        500\n      ],\n      \"parameters\": {\n        \"fields\": {\n          \"values\": [\n            {\n              \"name\": \"name\",\n              \"stringValue\": \"={{ $json.name }}\"\n            }\n          ]\n        },\n        \"include\": \"none\",\n        \"options\": {}\n      },\n      \"typeVersion\": 3.2\n    },\n    {\n      \"id\": \"d59c512c-2dca-4960-b287-b4908713b0a3\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        820,\n        400\n      ],\n      \"parameters\": {\n        \"height\": 304,\n        \"content\": \"## 生成示例数据\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"fad37032-13cc-461e-b48e-a2f470d07823\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1100,\n        398\n      ],\n      \"parameters\": {\n        \"height\": 303,\n        \"content\": \"## 精简数据\\n\\n仅保留姓名，删除其余所有数据\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"d0751fce-d9f0-40bf-aeb2-9dbc5d0e9bdb\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1380,\n        400\n      ],\n      \"parameters\": {\n        \"height\": 304,\n        \"content\": \"## 恢复\\n\\n恢复邮箱地址数据\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"2b1a67e9-60d6-411e-8ae7-94b02da6be34\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        430,\n        220\n      ],\n      \"parameters\": {\n        \"width\": 352,\n        \"height\": 264,\n        \"content\": \"## 关于此工作流\\n\\n本工作流提供了一个简单示例，演示如何在代码节点中使用`itemMatching(itemIndex: Number)`来获取工作流中先前关联的数据项。\\n\\n此示例采用JavaScript编写。如需Python代码实现，请参阅文档[从工作流前序节点获取关联数据项](https://docs.n8n.io/code/cookbook/builtin/itemmatching/)。\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"active\": false,\n  \"pinData\": {},\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"02e18c8e-1bec-4170-a2d0-72ec6e063273\",\n  \"connections\": {\n    \"Edit Fields\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Code\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When clicking \\\"Execute Workflow\\\"\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Customer Datastore (n8n training)\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Customer Datastore (n8n training)\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Edit Fields\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}