{
  "title": "Query Perplexity AI from your n8n workflows",
  "url": "https://n8n.io/workflows/2824-query-perplexity-ai-from-your-n8n-workflows/",
  "category": "BuildingBlocks",
  "category_url": "https://n8n.io/workflows/categories/building-blocks/?sort=createdAt:desc",
  "author": "Emmanuel Bernard",
  "publish_date": "Last update 3 months ago",
  "publish_date_absolute": "2025-02-06",
  "content": "",
  "workflow_json": "{\"nodes\":[{\"id\":\"293b70f0-06e8-4db5-befd-bfaed1f3575a\",\"name\":\"When clicking ‘Test workflow’\",\"type\":\"n8n-nodes-base.manualTrigger\",\"position\":[-460,80],\"parameters\":{},\"typeVersion\":1},{\"id\":\"1c473546-6280-412d-9f8e-b43962365d78\",\"name\":\"Set Params\",\"type\":\"n8n-nodes-base.set\",\"position\":[-160,-60],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"8b5c6ca0-5ca8-4f67-abc1-44341cf419bc\",\"name\":\"system_prompt\",\"type\":\"string\",\"value\":\"You are an n8n fanboy.\"},{\"id\":\"7c36c362-6269-4564-b6fe-f82126bc8f5e\",\"name\":\"user_prompt\",\"type\":\"string\",\"value\":\"What are the differences between n8n and Make?\"},{\"id\":\"4366d2b5-ad22-445a-8589-fddab1caa1ab\",\"name\":\"domains\",\"type\":\"string\",\"value\":\"n8n.io, make.com\"}]}},\"typeVersion\":3.4},{\"id\":\"894bd6a4-5db7-45fb-a8e0-1a81af068bbf\",\"name\":\"Clean Output\",\"type\":\"n8n-nodes-base.set\",\"position\":[580,-100],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"5859093c-6b22-41db-ac6c-9a9f6f18b7e3\",\"name\":\"output\",\"type\":\"string\",\"value\":\"={{ $json.choices[0].message.content }}\"},{\"id\":\"13208fff-5153-45a7-a1cb-fe49e32d9a03\",\"name\":\"citations\",\"type\":\"array\",\"value\":\"={{ $json.citations }}\"}]}},\"typeVersion\":3.4},{\"id\":\"52d3a832-8c9b-4356-ad2a-377340678a58\",\"name\":\"Perplexity Request\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[240,40],\"parameters\":{\"url\":\"https://api.perplexity.ai/chat/completions\",\"method\":\"POST\",\"options\":{},\"jsonBody\":\"={\\n  \\\"model\\\": \\\"sonar\\\",\\n  \\\"messages\\\": [\\n    {\\n      \\\"role\\\": \\\"system\\\",\\n      \\\"content\\\": \\\"{{ $json.system_prompt }}\\\"\\n    },\\n    {\\n      \\\"role\\\": \\\"user\\\",\\n      \\\"content\\\": \\\"{{ $json.user_prompt }}\\\"\\n    }\\n  ],\\n  \\\"temperature\\\": 0.2,\\n  \\\"top_p\\\": 0.9,\\n  \\\"search_domain_filter\\\": {{ (JSON.stringify($json.domains.split(','))) }},\\n  \\\"return_images\\\": false,\\n  \\\"return_related_questions\\\": false,\\n  \\\"search_recency_filter\\\": \\\"month\\\",\\n  \\\"top_k\\\": 0,\\n  \\\"stream\\\": false,\\n  \\\"presence_penalty\\\": 0,\\n  \\\"frequency_penalty\\\": 1,\\n  \\\"response_format\\\": null\\n}\",\"sendBody\":true,\"specifyBody\":\"json\",\"authentication\":\"genericCredentialType\",\"genericAuthType\":\"httpHeaderAuth\"},\"credentials\":{\"httpBasicAuth\":{\"id\":\"yEocL0NSpUWzMsHG\",\"name\":\"Perplexity\"},\"httpHeaderAuth\":{\"id\":\"TngzgS09J1YvLIXl\",\"name\":\"Perplexity\"}},\"typeVersion\":4.2},{\"id\":\"48657f2c-d1dd-4d7e-8014-c27748e63e58\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-140,-440],\"parameters\":{\"width\":480,\"height\":300,\"content\":\"## Credentials Setup\\n\\n1/ Go to the perplexity dashboard, purchase some credits and create an API Key\\n\\nhttps://www.perplexity.ai/settings/api\\n\\n2/ In the perplexity Request node, use Generic Credentials, Header Auth. \\n\\nFor the name, use the value \\\"Authorization\\\"\\nAnd for the value \\\"Bearer pplx-e4...59ea\\\" (Your Perplexity Api Key)\\n\\n\"},\"typeVersion\":1},{\"id\":\"e0daabee-c145-469e-93c2-c759c303dc2a\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[100,260],\"parameters\":{\"color\":5,\"width\":480,\"height\":120,\"content\":\"**Sonar Pro** is the current top model used by perplexity. \\nIf you want to use a different one, check this page: \\n\\nhttps://docs.perplexity.ai/guides/model-cards\"},\"typeVersion\":1}],\"pinData\":{},\"connections\":{\"Set Params\":{\"main\":[[{\"node\":\"Perplexity Request\",\"type\":\"main\",\"index\":0}]]},\"Perplexity Request\":{\"main\":[[{\"node\":\"Clean Output\",\"type\":\"main\",\"index\":0}]]},\"When clicking ‘Test workflow’\":{\"main\":[[{\"node\":\"Set Params\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "This workflow illustrates how to use Perplexity AI in your n8n workflow.\n\nPerplexity is a free AI-powered answer engine that provides accurate, trusted, and real-time answers to any question.\n\n* * *\n\n### Credentials Setup\n\n1/ Go to the perplexity dashboard, purchase some credits and create an API Key\n\n<https://www.perplexity.ai/settings/api>\n\n2/ In the perplexity Request node, use Generic Credentials, Header Auth.\n\nFor the name, use the value \"Authorization\"  \nAnd for the value \"Bearer pplx-e4...59ea\" (Your Perplexity Api Key)\n\n* * *\n\n### AI Model\n\n**Sonar Pro** is the current top model used by perplexity.  \nIf you want to use a different one, check this page:\n\n<https://docs.perplexity.ai/guides/model-cards>\n",
  "readme_html": "<!--[--><div data-v-50766329=\"\"><p>This workflow illustrates how to use Perplexity AI in your n8n workflow.</p>\n<p>Perplexity is a free AI-powered answer engine that provides accurate, trusted, and real-time answers to any question.</p>\n<hr>\n<h3>Credentials Setup</h3>\n<p>1/ Go to the perplexity dashboard, purchase some credits and create an API Key</p>\n<p><a href=\"https://www.perplexity.ai/settings/api\" rel=\"ugc nofollow\" target=\"_blank\">https://www.perplexity.ai/settings/api</a></p>\n<p>2/ In the perplexity Request node, use Generic Credentials, Header Auth.</p>\n<p>For the name, use the value \"Authorization\"<br>\nAnd for the value \"Bearer pplx-e4...59ea\" (Your Perplexity Api Key)</p>\n<hr>\n<h3>AI Model</h3>\n<p><strong>Sonar Pro</strong> is the current top model used by perplexity.<br>\nIf you want to use a different one, check this page:</p>\n<p><a href=\"https://docs.perplexity.ai/guides/model-cards\" rel=\"ugc nofollow\" target=\"_blank\">https://docs.perplexity.ai/guides/model-cards</a></p>\n</div><!--]-->",
  "readme_zh": "本流程演示了如何在n8n工作流中使用Perplexity AI。\n\nPerplexity是一款免费的AI智能问答引擎，能够为任何问题提供精准、可靠且实时的解答。\n\n* * *\n\n### 凭证设置\n\n1/ 访问Perplexity仪表板，购买额度并创建API密钥  \n<https://www.perplexity.ai/settings/api>\n\n2/ 在Perplexity请求节点中，选择通用凭证类型\"Header Auth\"  \n名称字段填写\"Authorization\"  \n值字段填写\"Bearer pplx-e4...59ea\"（您的Perplexity API密钥）\n\n* * *\n\n### AI模型选择\n\n**Sonar Pro**是Perplexity当前的主力模型  \n如需选用其他模型，请查阅：  \n<https://docs.perplexity.ai/guides/model-cards>",
  "title_zh": "从您的n8n工作流中查询Perplexity AI",
  "publish_date_zh": "最后更新于3个月前",
  "workflow_json_zh": "{\n  \"nodes\": [\n    {\n      \"id\": \"293b70f0-06e8-4db5-befd-bfaed1f3575a\",\n      \"name\": \"When clicking ‘Test workflow’\",\n      \"type\": \"n8n-nodes-base.manualTrigger\",\n      \"position\": [\n        -460,\n        80\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"1c473546-6280-412d-9f8e-b43962365d78\",\n      \"name\": \"Set Params\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        -160,\n        -60\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"8b5c6ca0-5ca8-4f67-abc1-44341cf419bc\",\n              \"name\": \"system_prompt\",\n              \"type\": \"string\",\n              \"value\": \"You are an n8n fanboy.\"\n            },\n            {\n              \"id\": \"7c36c362-6269-4564-b6fe-f82126bc8f5e\",\n              \"name\": \"user_prompt\",\n              \"type\": \"string\",\n              \"value\": \"What are the differences between n8n and Make?\"\n            },\n            {\n              \"id\": \"4366d2b5-ad22-445a-8589-fddab1caa1ab\",\n              \"name\": \"domains\",\n              \"type\": \"string\",\n              \"value\": \"n8n.io, make.com\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"894bd6a4-5db7-45fb-a8e0-1a81af068bbf\",\n      \"name\": \"Clean Output\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        580,\n        -100\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"5859093c-6b22-41db-ac6c-9a9f6f18b7e3\",\n              \"name\": \"output\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.choices[0].message.content }}\"\n            },\n            {\n              \"id\": \"13208fff-5153-45a7-a1cb-fe49e32d9a03\",\n              \"name\": \"citations\",\n              \"type\": \"array\",\n              \"value\": \"={{ $json.citations }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"52d3a832-8c9b-4356-ad2a-377340678a58\",\n      \"name\": \"Perplexity Request\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        240,\n        40\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.perplexity.ai/chat/completions\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"jsonBody\": \"={\\n  \\\"model\\\": \\\"sonar\\\",\\n  \\\"messages\\\": [\\n    {\\n      \\\"role\\\": \\\"system\\\",\\n      \\\"content\\\": \\\"{{ $json.system_prompt }}\\\"\\n    },\\n    {\\n      \\\"role\\\": \\\"user\\\",\\n      \\\"content\\\": \\\"{{ $json.user_prompt }}\\\"\\n    }\\n  ],\\n  \\\"temperature\\\": 0.2,\\n  \\\"top_p\\\": 0.9,\\n  \\\"search_domain_filter\\\": {{ (JSON.stringify($json.domains.split(','))) }},\\n  \\\"return_images\\\": false,\\n  \\\"return_related_questions\\\": false,\\n  \\\"search_recency_filter\\\": \\\"month\\\",\\n  \\\"top_k\\\": 0,\\n  \\\"stream\\\": false,\\n  \\\"presence_penalty\\\": 0,\\n  \\\"frequency_penalty\\\": 1,\\n  \\\"response_format\\\": null\\n}\",\n        \"sendBody\": true,\n        \"specifyBody\": \"json\",\n        \"authentication\": \"genericCredentialType\",\n        \"genericAuthType\": \"httpHeaderAuth\"\n      },\n      \"credentials\": {\n        \"httpBasicAuth\": {\n          \"id\": \"yEocL0NSpUWzMsHG\",\n          \"name\": \"Perplexity\"\n        },\n        \"httpHeaderAuth\": {\n          \"id\": \"TngzgS09J1YvLIXl\",\n          \"name\": \"Perplexity\"\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"48657f2c-d1dd-4d7e-8014-c27748e63e58\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -140,\n        -440\n      ],\n      \"parameters\": {\n        \"width\": 480,\n        \"height\": 300,\n        \"content\": \"## 凭证设置\\n\\n1/ 访问Perplexity控制面板，购买积分并创建API密钥\\nhttps://www.perplexity.ai/settings/api\\n\\n2/ 在Perplexity请求节点中，使用通用凭证的Header认证方式\\n名称字段填写\\\"Authorization\\\"\\n值字段填写\\\"Bearer pplx-e4...59ea\\\"（替换为你的Perplexity API密钥）\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"e0daabee-c145-469e-93c2-c759c303dc2a\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        100,\n        260\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 480,\n        \"height\": 120,\n        \"content\": \"**Sonar Pro** 是目前Perplexity使用的最先进模型。  \\n如需选用其他模型，请查阅此页面：  \\n\\nhttps://docs.perplexity.ai/guides/model-cards\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"Set Params\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Perplexity Request\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Perplexity Request\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Clean Output\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When clicking ‘Test workflow’\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set Params\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}