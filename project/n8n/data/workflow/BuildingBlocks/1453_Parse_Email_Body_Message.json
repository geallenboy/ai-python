{
  "title": "Parse Email Body Message",
  "url": "https://n8n.io/workflows/1453-parse-email-body-message/",
  "category": "BuildingBlocks",
  "category_url": "https://n8n.io/workflows/categories/building-blocks/?sort=createdAt:desc",
  "author": "Miquel Colomer",
  "publish_date": "Last update 10 months ago",
  "publish_date_absolute": "2024-07-06",
  "content": "",
  "workflow_json": "{\"id\":\"340\",\"name\":\"Email body parser by aprenden8n.com\",\"nodes\":[{\"name\":\"On clicking 'execute'\",\"type\":\"n8n-nodes-base.manualTrigger\",\"position\":[250,300],\"parameters\":{},\"typeVersion\":1},{\"name\":\"Email Parser Snippet\",\"type\":\"n8n-nodes-base.functionItem\",\"position\":[670,300],\"parameters\":{\"functionCode\":\"var obj = {};\\nvar labels = item.labels.split(\\\",\\\");\\nitem.labels.split(\\\",\\\").forEach(function(label) {\\n  var re = labels.indexOf(label) === labels.length - 1 ? \\\"\\\\\\\\b\\\" + label + \\\"\\\\\\\\b[: ]+([^$]+)\\\" : \\\"\\\\\\\\b\\\" + label + \\\"\\\\\\\\b[: ]+([^\\\\\\\\n$]+)\\\";\\n  var found = item.body.match(new RegExp(re, \\\"i\\\"));\\n  if (found && found.length > 1) {\\n    obj[label] = found[1].trim();\\n  }\\n});\\n\\nreturn obj;\"},\"typeVersion\":1},{\"name\":\"Set values\",\"type\":\"n8n-nodes-base.set\",\"position\":[460,300],\"parameters\":{\"values\":{\"number\":[],\"string\":[{\"name\":\"body\",\"value\":\"Name: Miquel\\nEmail: miquel@aprenden8n.com\\nSubject: Welcome aboard\\nMessage: Hi Miquel!\\n\\nThank you for your signup!\"},{\"name\":\"labels\",\"value\":\"Name,Email,Subject,Message\"}]},\"options\":{}},\"typeVersion\":1}],\"active\":false,\"settings\":{},\"connections\":{\"Set values\":{\"main\":[[{\"node\":\"Email Parser Snippet\",\"type\":\"main\",\"index\":0}]]},\"On clicking 'execute'\":{\"main\":[[{\"node\":\"Set values\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "# Who we are\n\nWe are **Aprende n8n** , the first n8n Spanish course for all n8n lovers.  \nIf you want to learn more, you can find out more at [Aprende n8n](https://aprenden8n.com).\n\n# Task goal\n\nThis task allows extracting data from any email body with a NoCode snippet.\n\n# An small explanation\n\nYou receive an email when a user submits a form from your website.\n\nAll those emails usually have the same structure as the next one:\n    \n    \n    Name: Miquel\n    Email: miquel@aprenden8n.com\n    Subject: Welcome aboard\n    Message: Hi Miquel!\n    \n    Thank you for your signup!\n    \n\nThis task allows to parse any email body and assign all values to the defined labels, getting an output like this:\n    \n    \n    {\n    \"Name\": \"Miquel\",\n    \"Email\": \"miquel@aprenden8n.com\",\n    \"Subject\": \"Welcome aboard\",\n    \"Message\" \"Hi Miquel! Thank you for your signup!\"\n    }\n    \n\n# After importing it\n\nWhen you import the import, you get the next task in your n8n:  \n![aprenden8n.com_email_parser_task.jpeg](https://f000.backblazeb2.com/file/n8n-website-images/f30421fd57a74bd9b98895bd330abe2f.jpeg)\n\nWe recommend importing this workflow into your current task and adapting it.  \nYou define a couple of variables in the \"Set values\" SET:\n\n  * body: the email body you want to parse. You can add this as an expression from previous variables.\n  * labels: the keywords you want to detect and parse. Labels are case insensitive.\n\n\n\nWe define the next values:\n\nBody\n    \n    \n    Name: Miquel\n    Email: miquel@aprenden8n.com\n    Subject: Welcome aboard\n    Message: Hi Miquel!\n    \n    Thank you for your signup!\n    \n\nLabels\n    \n    \n    Name,Email,Subject,Message\n    \n\nA screenshot of the Set output is the next one  \n![aprenden8n.com_email_parser_set.jpeg](https://f000.backblazeb2.com/file/n8n-website-images/08fb8895849941c1881ef1f105c1d53f.jpeg)\n\nIf we check the \"Function item\" Node, we get the next content after executing the task:  \n![aprenden8n.com_email_parser_output.jpeg](https://f000.backblazeb2.com/file/n8n-website-images/e7a84395603a49d3971f25b4dc8af6c2.jpeg)\n\n# Capabilities\n\nThe task has the next features:\n\n  * You can detect as many labels as you want.\n  * Label detection is case insensitive.\n  * You can use the snippet as an independent workflow to call it generically, adding the Function item to the workflow and passing body and labels as paremeters.\n\n\n\n# Limitations\n\nThis task has limitations:\n\n  * The parser only accepts the multiline values at the end of the email.\n\n\n\n# Help and comments\n\nIf you have any doubt about this snippet, please, contact us at [miquel@aprenden8n.com](mailto:miquel@aprenden8n.com).\n\nYou can contact us at [Aprende n8n](https://aprenden8n.com) or in the [Spanish n8n community](https://t.me/comunidadn8n)\n",
  "readme_html": "<!--[--><div data-v-50766329=\"\"><h1>Who we are</h1>\n<p>We are <strong>Aprende n8n</strong>, the first n8n Spanish course for all n8n lovers.<br>\nIf you want to learn more, you can find out more at <a href=\"https://aprenden8n.com\" rel=\"ugc nofollow\" target=\"_blank\">Aprende n8n</a>.</p>\n<h1>Task goal</h1>\n<p>This task allows extracting data from any email body with a NoCode snippet.</p>\n<h1>An small explanation</h1>\n<p>You receive an email when a user submits a form from your website.</p>\n<p>All those emails usually have the same structure as the next one:</p>\n<pre><code>Name: Miquel\nEmail: miquel@aprenden8n.com\nSubject: Welcome aboard\nMessage: Hi Miquel!\n\nThank you for your signup!\n</code></pre>\n<p>This task allows to parse any email body and assign all values to the defined labels, getting an output like this:</p>\n<pre><code>{\n\"Name\": \"Miquel\",\n\"Email\": \"miquel@aprenden8n.com\",\n\"Subject\": \"Welcome aboard\",\n\"Message\" \"Hi Miquel! Thank you for your signup!\"\n}\n</code></pre>\n<h1>After importing it</h1>\n<p>When you import the import, you get the next task in your n8n:<br>\n<img src=\"https://f000.backblazeb2.com/file/n8n-website-images/f30421fd57a74bd9b98895bd330abe2f.jpeg\" alt=\"aprenden8n.com_email_parser_task.jpeg\"></p>\n<p>We recommend importing this workflow into your current task and adapting it.<br>\nYou define a couple of variables in the \"Set values\" SET:</p>\n<ul>\n<li>body: the email body you want to parse. You can add this as an expression from previous variables.</li>\n<li>labels: the keywords you want to detect and parse. Labels are case insensitive.</li>\n</ul>\n<p>We define the next values:</p>\n<p>Body</p>\n<pre><code>Name: Miquel\nEmail: miquel@aprenden8n.com\nSubject: Welcome aboard\nMessage: Hi Miquel!\n\nThank you for your signup!\n</code></pre>\n<p>Labels</p>\n<pre><code>Name,Email,Subject,Message\n</code></pre>\n<p>A screenshot of the Set output is the next one<br>\n<img src=\"https://f000.backblazeb2.com/file/n8n-website-images/08fb8895849941c1881ef1f105c1d53f.jpeg\" alt=\"aprenden8n.com_email_parser_set.jpeg\"></p>\n<p>If we check the \"Function item\" Node, we get the next content after executing the task:<br>\n<img src=\"https://f000.backblazeb2.com/file/n8n-website-images/e7a84395603a49d3971f25b4dc8af6c2.jpeg\" alt=\"aprenden8n.com_email_parser_output.jpeg\"></p>\n<h1>Capabilities</h1>\n<p>The task has the next features:</p>\n<ul>\n<li>You can detect as many labels as you want.</li>\n<li>Label detection is case insensitive.</li>\n<li>You can use the snippet as an independent workflow to call it generically, adding the Function item to the workflow and passing body and labels as paremeters.</li>\n</ul>\n<h1>Limitations</h1>\n<p>This task has limitations:</p>\n<ul>\n<li>The parser only accepts the multiline values at the end of the email.</li>\n</ul>\n<h1>Help and comments</h1>\n<p>If you have any doubt about this snippet, please, contact us at <a href=\"mailto:miquel@aprenden8n.com\" rel=\"ugc nofollow\">miquel@aprenden8n.com</a>.</p>\n<p>You can contact us at <a href=\"https://aprenden8n.com\" rel=\"ugc nofollow\" target=\"_blank\">Aprende n8n</a> or in the <a href=\"https://t.me/comunidadn8n\" rel=\"ugc nofollow\" target=\"_blank\">Spanish n8n community</a></p>\n</div><!--]-->",
  "readme_zh": "# 关于我们\n\n我们是**Aprende n8n**，首个面向所有n8n爱好者的西班牙语n8n课程。  \n若想了解更多，请访问[Aprende n8n](https://aprenden8n.com)。\n\n# 任务目标\n\n本任务支持通过NoCode代码片段从任意邮件正文中提取数据。\n\n# 简要说明\n\n当用户通过网站表单提交信息时，您会收到如下结构的标准邮件：\n    \n    \n    姓名: 米克尔\n    邮箱: miquel@aprenden8n.com\n    主题: 欢迎加入\n    留言: 嗨，米克尔！\n    \n    感谢您的注册！\n    \n\n该任务能解析邮件正文并将所有值匹配到预设标签，输出如下格式：\n    \n    \n    {\n    \"姓名\": \"米克尔\",\n    \"邮箱\": \"miquel@aprenden8n.com\",\n    \"主题\": \"欢迎加入\",\n    \"留言\": \"嗨，米克尔！感谢您的注册！\"\n    }\n    \n\n# 导入后操作\n\n导入后您将在n8n中看到如下任务节点：  \n![aprenden8n.com_email_parser_task.jpeg](https://f000.backblazeb2.com/file/n8n-website-images/f30421fd57a74bd9b98895bd330abe2f.jpeg)\n\n建议将此工作流导入现有任务并适配使用。  \n您需要在\"Set values\"节点中定义两个变量：\n\n  * body: 待解析的邮件正文（可通过表达式引用先前变量）\n  * labels: 需要识别的关键词标签（不区分大小写）",
  "title_zh": "解析邮件正文内容",
  "publish_date_zh": "最后更新于10个月前",
  "workflow_json_zh": "{\n  \"id\": \"340\",\n  \"name\": \"Email body parser by aprenden8n.com\",\n  \"nodes\": [\n    {\n      \"name\": \"On clicking 'execute'\",\n      \"type\": \"n8n-nodes-base.manualTrigger\",\n      \"position\": [\n        250,\n        300\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Email Parser Snippet\",\n      \"type\": \"n8n-nodes-base.functionItem\",\n      \"position\": [\n        670,\n        300\n      ],\n      \"parameters\": {\n        \"functionCode\": \"var obj = {};\\nvar labels = item.labels.split(\\\",\\\");\\nitem.labels.split(\\\",\\\").forEach(function(label) {\\n  var re = labels.indexOf(label) === labels.length - 1 ? \\\"\\\\\\\\b\\\" + label + \\\"\\\\\\\\b[: ]+([^$]+)\\\" : \\\"\\\\\\\\b\\\" + label + \\\"\\\\\\\\b[: ]+([^\\\\\\\\n$]+)\\\";\\n  var found = item.body.match(new RegExp(re, \\\"i\\\"));\\n  if (found && found.length > 1) {\\n    obj[label] = found[1].trim();\\n  }\\n});\\n\\nreturn obj;\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Set values\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        460,\n        300\n      ],\n      \"parameters\": {\n        \"values\": {\n          \"number\": [],\n          \"string\": [\n            {\n              \"name\": \"body\",\n              \"value\": \"Name: Miquel\\nEmail: miquel@aprenden8n.com\\nSubject: Welcome aboard\\nMessage: Hi Miquel!\\n\\nThank you for your signup!\"\n            },\n            {\n              \"name\": \"labels\",\n              \"value\": \"Name,Email,Subject,Message\"\n            }\n          ]\n        },\n        \"options\": {}\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"active\": false,\n  \"settings\": {},\n  \"connections\": {\n    \"Set values\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Email Parser Snippet\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"On clicking 'execute'\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set values\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}