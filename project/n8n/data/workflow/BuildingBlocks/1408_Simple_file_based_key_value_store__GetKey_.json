{
  "title": "Simple file based key value store (GetKey)",
  "url": "https://n8n.io/workflows/1408-simple-file-based-key-value-store-getkey/",
  "category": "BuildingBlocks",
  "category_url": "https://n8n.io/workflows/categories/building-blocks/?sort=createdAt:desc",
  "author": "Peter",
  "publish_date": "Last update 10 months ago",
  "publish_date_absolute": "2024-07-06",
  "content": "",
  "workflow_json": "{\"id\":11,\"name\":\"Storage: GetKey\",\"nodes\":[{\"name\":\"On clicking 'execute'\",\"type\":\"n8n-nodes-base.manualTrigger\",\"position\":[240,280],\"parameters\":{},\"typeVersion\":1},{\"name\":\"Config\",\"type\":\"n8n-nodes-base.functionItem\",\"position\":[420,280],\"parameters\":{\"functionCode\":\"return {\\n  file: '/home/node/.n8n/local-files' + item.file,\\n  key: item.key,\\n  default: item.default\\n}\"},\"typeVersion\":1},{\"name\":\"Read Binary File\",\"type\":\"n8n-nodes-base.readBinaryFile\",\"position\":[600,280],\"parameters\":{\"filePath\":\"={{$json[\\\"file\\\"]}}\"},\"typeVersion\":1,\"continueOnFail\":true,\"alwaysOutputData\":true},{\"name\":\"BinaryToJSON\",\"type\":\"n8n-nodes-base.moveBinaryData\",\"position\":[780,280],\"parameters\":{\"options\":{}},\"typeVersion\":1,\"alwaysOutputData\":true},{\"name\":\"ReturnValue\",\"type\":\"n8n-nodes-base.functionItem\",\"position\":[960,280],\"parameters\":{\"functionCode\":\"const key = $node[\\\"Config\\\"].json[\\\"key\\\"]\\nconst defaultValue = $node[\\\"Config\\\"].json[\\\"default\\\"]\\n\\nlet value\\nif (item) {\\n  value = item[key] || defaultValue\\n} else {\\n  value = defaultValue\\n}\\n\\nreturn {\\n  [ key ]: value\\n}\"},\"typeVersion\":1}],\"active\":false,\"settings\":{},\"connections\":{\"Config\":{\"main\":[[{\"node\":\"Read Binary File\",\"type\":\"main\",\"index\":0}]]},\"BinaryToJSON\":{\"main\":[[{\"node\":\"ReturnValue\",\"type\":\"main\",\"index\":0}]]},\"Read Binary File\":{\"main\":[[{\"node\":\"BinaryToJSON\",\"type\":\"main\",\"index\":0}]]},\"On clicking 'execute'\":{\"main\":[[{\"node\":\"Config\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "Read a value by key from a local json file.\n\nRelated workflow: [WriteKey](https://n8n.io/workflows/1407)\n\nCreate a subfolder in your n8n homedir: `/home/node/.n8n/local-files`. In docker look at the data path and create a subfolder `local-files`.  \nSet the correct access rights `chmod 1000.1000 local-files`.\n\nPut the workflow code in a new workflow named `GetKey`.\n\nCreate another workflow with a `function item`:\n    \n    \n    return  {\n      file: '/4711.json', // 4711 should be your workflow id\n      key: 'MyKey',\n      default: 'Optional returned value if key is empty / not exists'\n    }\n    \n\nPipe the `function item` to an `Execution Workflow` that calls the `GetKey` workflow.\n\nIt would be nice if we could get someday a shiny built-in n8n node that does the job. :)\n",
  "readme_html": "<!--[--><div data-v-50766329=\"\"><p>Read a value by key from a local json file.</p>\n<p>Related workflow: <a href=\"https://n8n.io/workflows/1407\" rel=\"ugc nofollow\" target=\"_blank\">WriteKey</a></p>\n<p>Create a subfolder in your n8n homedir: <code>/home/node/.n8n/local-files</code>. In docker look at the data path and create a subfolder <code>local-files</code>.<br>\nSet the correct access rights <code>chmod 1000.1000 local-files</code>.</p>\n<p>Put the workflow code in a new workflow named <code>GetKey</code>.</p>\n<p>Create another workflow with a <code>function item</code>:</p>\n<pre><code>return  {\n  file: '/4711.json', // 4711 should be your workflow id\n  key: 'MyKey',\n  default: 'Optional returned value if key is empty / not exists'\n}\n</code></pre>\n<p>Pipe the <code>function item</code> to an <code>Execution Workflow</code> that calls the <code>GetKey</code> workflow.</p>\n<p>It would be nice if we could get someday a shiny built-in n8n node that does the job. :)</p>\n</div><!--]-->",
  "readme_zh": "从本地JSON文件中通过键读取值。\n\n相关工作流：[WriteKey](https://n8n.io/workflows/1407)\n\n在n8n主目录下创建子文件夹：`/home/node/.n8n/local-files`。若使用Docker，请查看数据路径并创建`local-files`子文件夹。  \n设置正确的访问权限：`chmod 1000.1000 local-files`。\n\n将工作流代码放入名为`GetKey`的新工作流中。\n\n创建另一个包含`function item`的工作流：\n    \n    \n    return  {\n      file: '/4711.json', // 4711应替换为你的工作流ID\n      key: 'MyKey',\n      default: '当键为空/不存在时返回的可选默认值'\n    }\n    \n\n将`function item`连接至调用`GetKey`工作流的`Execution Workflow`节点。\n\n期待未来能有一个内置的n8n节点来优雅地实现这个功能。:)",
  "title_zh": "基于文件的简单键值存储（GetKey）",
  "publish_date_zh": "最后更新于10个月前",
  "workflow_json_zh": "{\n  \"id\": 11,\n  \"name\": \"Storage: GetKey\",\n  \"nodes\": [\n    {\n      \"name\": \"On clicking 'execute'\",\n      \"type\": \"n8n-nodes-base.manualTrigger\",\n      \"position\": [\n        240,\n        280\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Config\",\n      \"type\": \"n8n-nodes-base.functionItem\",\n      \"position\": [\n        420,\n        280\n      ],\n      \"parameters\": {\n        \"functionCode\": \"return {\\n  file: '/home/node/.n8n/local-files' + item.file,\\n  key: item.key,\\n  default: item.default\\n}\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Read Binary File\",\n      \"type\": \"n8n-nodes-base.readBinaryFile\",\n      \"position\": [\n        600,\n        280\n      ],\n      \"parameters\": {\n        \"filePath\": \"={{$json[\\\"file\\\"]}}\"\n      },\n      \"typeVersion\": 1,\n      \"continueOnFail\": true,\n      \"alwaysOutputData\": true\n    },\n    {\n      \"name\": \"BinaryToJSON\",\n      \"type\": \"n8n-nodes-base.moveBinaryData\",\n      \"position\": [\n        780,\n        280\n      ],\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"typeVersion\": 1,\n      \"alwaysOutputData\": true\n    },\n    {\n      \"name\": \"ReturnValue\",\n      \"type\": \"n8n-nodes-base.functionItem\",\n      \"position\": [\n        960,\n        280\n      ],\n      \"parameters\": {\n        \"functionCode\": \"const key = $node[\\\"Config\\\"].json[\\\"key\\\"]\\nconst defaultValue = $node[\\\"Config\\\"].json[\\\"default\\\"]\\n\\nlet value\\nif (item) {\\n  value = item[key] || defaultValue\\n} else {\\n  value = defaultValue\\n}\\n\\nreturn {\\n  [ key ]: value\\n}\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"active\": false,\n  \"settings\": {},\n  \"connections\": {\n    \"Config\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Read Binary File\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"BinaryToJSON\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"ReturnValue\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Read Binary File\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"BinaryToJSON\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"On clicking 'execute'\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Config\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}