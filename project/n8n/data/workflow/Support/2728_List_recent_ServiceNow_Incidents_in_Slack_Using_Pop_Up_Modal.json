{
  "title": "List recent ServiceNow Incidents in Slack Using Pop Up Modal",
  "url": "https://n8n.io/workflows/2728-list-recent-servicenow-incidents-in-slack-using-pop-up-modal/",
  "category": "Support",
  "category_url": "https://n8n.io/workflows/categories/support/?count=20",
  "author": "Angel Menendez",
  "publish_date": "Last update 3 months ago",
  "publish_date_absolute": "2025-02-06",
  "content": "",
  "workflow_json": "{\"meta\":{\"instanceId\":\"03e9d14e9196363fe7191ce21dc0bb17387a6e755dcc9acc4f5904752919dca8\"},\"nodes\":[{\"id\":\"a9a92b8a-05cf-4d9e-ae01-be3b17346893\",\"name\":\"Parse Webhook\",\"type\":\"n8n-nodes-base.set\",\"position\":[-560,660],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"e63f9299-a19d-4ba1-93b0-59f458769fb2\",\"name\":\"response\",\"type\":\"object\",\"value\":\"={{ $json.body.payload }}\"}]}},\"typeVersion\":3.3},{\"id\":\"f999011b-e54d-4514-94ec-4d544af4d145\",\"name\":\"Close Modal Popup\",\"type\":\"n8n-nodes-base.respondToWebhook\",\"position\":[-160,1120],\"parameters\":{\"options\":{},\"respondWith\":\"noData\"},\"typeVersion\":1.1},{\"id\":\"a16d64a0-fe07-4cae-b458-a91937e57a4e\",\"name\":\"Route Message\",\"type\":\"n8n-nodes-base.switch\",\"position\":[-380,660],\"parameters\":{\"rules\":{\"values\":[{\"outputKey\":\"Request Modal\",\"conditions\":{\"options\":{\"version\":1,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"operator\":{\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"={{ $json.response.callback_id }}\",\"rightValue\":\"search_recent_incidents\"}]},\"renameOutput\":true},{\"outputKey\":\"Submit Data\",\"conditions\":{\"options\":{\"version\":1,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"65daa75f-2e17-4ba0-8fd8-2ac2159399e3\",\"operator\":{\"name\":\"filter.operator.equals\",\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"={{ $json.response.type }}\",\"rightValue\":\"view_submission\"}]},\"renameOutput\":true},{\"outputKey\":\"Block Actions\",\"conditions\":{\"options\":{\"version\":1,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"c242cee2-7274-4e02-bfbe-d0e999d30ea7\",\"operator\":{\"name\":\"filter.operator.equals\",\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"={{ $json.response.type }}\",\"rightValue\":\"block_actions\"}]},\"renameOutput\":true}]},\"options\":{\"fallbackOutput\":\"none\"}},\"typeVersion\":3},{\"id\":\"54fa31d5-7259-4c19-8891-8b559af87959\",\"name\":\"ServiceNow Modal\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[260,560],\"parameters\":{\"url\":\"https://slack.com/api/views.open\",\"method\":\"POST\",\"options\":{},\"jsonBody\":\"=  {\\n    \\\"trigger_id\\\": \\\"{{ $('Parse Webhook').item.json['response']['trigger_id'] }}\\\",\\n    \\\"external_id\\\": \\\"Search SNOW Incidents\\\",\\n    \\\"view\\\": {\\n\\t\\\"title\\\": {\\n\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\\"text\\\": \\\"Search SNOW Incidents\\\",\\n\\t\\t\\\"emoji\\\": true\\n\\t},\\n\\t\\\"submit\\\": {\\n\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\\"text\\\": \\\"Search\\\",\\n\\t\\t\\\"emoji\\\": true\\n\\t},\\n\\t\\\"type\\\": \\\"modal\\\",\\n\\t\\\"external_id\\\": \\\"search_snow_incidents\\\",\\n\\t\\\"close\\\": {\\n\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\\"text\\\": \\\"Cancel\\\",\\n\\t\\t\\\"emoji\\\": true\\n\\t},\\n\\t\\\"blocks\\\": [\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"section\\\",\\n\\t\\t\\t\\\"block_id\\\": \\\"greeting_section\\\",\\n\\t\\t\\t\\\"text\\\": {\\n\\t\\t\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\t\\t\\\"text\\\": \\\":wave: Hey there!\\\\n\\\\nUse this form to search ServiceNow for incidents based on their priority and state. Both of these properties are required to search incidents properly.\\\",\\n\\t\\t\\t\\t\\\"emoji\\\": true\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"divider\\\",\\n\\t\\t\\t\\\"block_id\\\": \\\"divider_1\\\"\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"input\\\",\\n\\t\\t\\t\\\"block_id\\\": \\\"priority_selector\\\",\\n\\t\\t\\t\\\"element\\\": {\\n\\t\\t\\t\\t\\\"type\\\": \\\"external_select\\\",\\n\\t\\t\\t\\t\\\"placeholder\\\": {\\n\\t\\t\\t\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\t\\t\\t\\\"text\\\": \\\"Priority of Incidents to Search\\\",\\n\\t\\t\\t\\t\\t\\\"emoji\\\": true\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\\"action_id\\\": \\\"priority_select\\\",\\n\\t\\t\\t\\t\\\"min_query_length\\\": 0\\n\\t\\t\\t},\\n\\t\\t\\t\\\"label\\\": {\\n\\t\\t\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\t\\t\\\"text\\\": \\\"Priority Selector\\\",\\n\\t\\t\\t\\t\\\"emoji\\\": true\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"input\\\",\\n\\t\\t\\t\\\"block_id\\\": \\\"state_selector\\\",\\n\\t\\t\\t\\\"element\\\": {\\n\\t\\t\\t\\t\\\"type\\\": \\\"external_select\\\",\\n\\t\\t\\t\\t\\\"placeholder\\\": {\\n\\t\\t\\t\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\t\\t\\t\\\"text\\\": \\\"State of Incidents to Search\\\",\\n\\t\\t\\t\\t\\t\\\"emoji\\\": true\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\\"action_id\\\": \\\"state_select\\\",\\n\\t\\t\\t\\t\\\"min_query_length\\\": 0\\n\\t\\t\\t},\\n\\t\\t\\t\\\"label\\\": {\\n\\t\\t\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\t\\t\\\"text\\\": \\\"State Selector\\\",\\n\\t\\t\\t\\t\\\"emoji\\\": true\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"section\\\",\\n\\t\\t\\t\\\"text\\\": {\\n\\t\\t\\t\\t\\\"type\\\": \\\"mrkdwn\\\",\\n\\t\\t\\t\\t\\\"text\\\": \\\"Please select a channel where the results will be posted.\\\"\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"actions\\\",\\n\\t\\t\\t\\\"elements\\\": [\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\\"type\\\": \\\"channels_select\\\",\\n\\t\\t\\t\\t\\t\\\"placeholder\\\": {\\n\\t\\t\\t\\t\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\t\\t\\t\\t\\\"text\\\": \\\"Select a channel\\\",\\n\\t\\t\\t\\t\\t\\t\\\"emoji\\\": true\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\\"action_id\\\": \\\"actionId-1\\\"\\n\\t\\t\\t\\t}\\n\\t\\t\\t]\\n\\t\\t}\\n\\t]\\n}\\n}\",\"sendBody\":true,\"sendHeaders\":true,\"specifyBody\":\"json\",\"authentication\":\"predefinedCredentialType\",\"headerParameters\":{\"parameters\":[{\"name\":\"Content-Type\",\"value\":\"application/json\"}]},\"nodeCredentialType\":\"slackApi\"},\"credentials\":{\"slackApi\":{\"id\":\"K04E2FxPZozHux9J\",\"name\":\"ServiceNow Bot\"}},\"typeVersion\":4.2},{\"id\":\"d16de218-b99b-4d13-9655-8fe1a329e01f\",\"name\":\"Webhook\",\"type\":\"n8n-nodes-base.webhook\",\"position\":[-760,660],\"webhookId\":\"e03c7d39-1dce-4ac5-8db8-2b4511a85a07\",\"parameters\":{\"path\":\"e03c7d39-1dce-4ac5-8db8-2b4511a85a07\",\"options\":{},\"httpMethod\":\"POST\",\"responseMode\":\"responseNode\"},\"typeVersion\":2},{\"id\":\"57ee358a-d409-42e7-8200-4475c4c59263\",\"name\":\"Send 200\",\"type\":\"n8n-nodes-base.respondToWebhook\",\"position\":[-160,1660],\"parameters\":{\"options\":{\"responseCode\":200}},\"typeVersion\":1.1},{\"id\":\"86b0fd85-b3d5-456c-8f59-0f29f283969f\",\"name\":\"ServiceNow\",\"type\":\"n8n-nodes-base.serviceNow\",\"position\":[100,1120],\"parameters\":{\"options\":{\"sysparm_query\":\"=incident_state={{ $json.response.view.state.values.state_selector.state_select.selected_option.value }}^priority={{ $json.response.view.state.values.priority_selector.priority_select.selected_option.value }}\",\"sysparm_display_value\":\"all\"},\"resource\":\"incident\",\"operation\":\"getAll\",\"returnAll\":true,\"authentication\":\"basicAuth\"},\"credentials\":{\"serviceNowBasicApi\":{\"id\":\"wjkWiUNQxo5PzTIb\",\"name\":\"ServiceNow Basic Auth account\"}},\"typeVersion\":1,\"alwaysOutputData\":true},{\"id\":\"95fcd7f1-ac3a-4128-8b4a-84b636487d9e\",\"name\":\"Channel - Notify User no Incidents Matched\",\"type\":\"n8n-nodes-base.slack\",\"position\":[960,1360],\"webhookId\":\"5d1ecba8-d03b-47cc-9d30-fd631e7816c1\",\"parameters\":{\"text\":\"=No incidents were found with a state of {{ $('Parse Webhook').item.json.response.view.state.values.state_selector.state_select.selected_option.text.text }} and priority of {{ $('Parse Webhook').item.json.response.view.state.values.priority_selector.priority_select.selected_option.text.text }}.\",\"select\":\"channel\",\"channelId\":{\"__rl\":true,\"mode\":\"id\",\"value\":\"={{ $('Parse Webhook').item.json.response.view.state.values.pWqkN['actionId-1'].selected_channel }}\"},\"otherOptions\":{\"includeLinkToWorkflow\":false}},\"credentials\":{\"slackApi\":{\"id\":\"K04E2FxPZozHux9J\",\"name\":\"ServiceNow Bot\"}},\"typeVersion\":2.2},{\"id\":\"7f638817-6f97-42a9-9027-dd0d5fb6f560\",\"name\":\"DM - Notify User no Incidents Matched\",\"type\":\"n8n-nodes-base.slack\",\"position\":[960,1600],\"webhookId\":\"5d1ecba8-d03b-47cc-9d30-fd631e7816c1\",\"parameters\":{\"text\":\"=No incidents were found with a state of {{ $('Parse Webhook').item.json.response.view.state.values.state_selector.state_select.selected_option.text.text }} and priority of {{ $('Parse Webhook').item.json.response.view.state.values.priority_selector.priority_select.selected_option.text.text }}.\",\"user\":{\"__rl\":true,\"mode\":\"id\",\"value\":\"={{ $('Parse Webhook').item.json.response.user.id }}\"},\"select\":\"user\",\"otherOptions\":{\"includeLinkToWorkflow\":false}},\"credentials\":{\"slackApi\":{\"id\":\"K04E2FxPZozHux9J\",\"name\":\"ServiceNow Bot\"}},\"typeVersion\":2.2},{\"id\":\"f3a21223-9e74-4066-af9f-6b94f69cb01f\",\"name\":\"Were Incidents Found?\",\"type\":\"n8n-nodes-base.if\",\"position\":[360,1120],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"fcdf9a8e-6359-4a3e-bf4e-e1834945727b\",\"operator\":{\"type\":\"string\",\"operation\":\"exists\",\"singleValue\":true},\"leftValue\":\"={{ $('ServiceNow').item.json.number.value }}\",\"rightValue\":\"\"}]}},\"typeVersion\":2.2},{\"id\":\"e27438cb-ba24-4a3b-8fe8-52b7d39cb1e0\",\"name\":\"No Matches - Was a Channel Selected?\",\"type\":\"n8n-nodes-base.if\",\"position\":[580,1480],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"a0b79298-b93f-4ed3-b53b-5c28dfdb2699\",\"operator\":{\"type\":\"string\",\"operation\":\"exists\",\"singleValue\":true},\"leftValue\":\"={{ $('Parse Webhook').item.json.response.view.state.values.pWqkN['actionId-1'].selected_channel }}\",\"rightValue\":\"\"}]}},\"typeVersion\":2.2},{\"id\":\"de7d3155-1c6d-43a1-9cc0-4900d176fd3e\",\"name\":\"Sort by Most Recent\",\"type\":\"n8n-nodes-base.sort\",\"position\":[580,580],\"parameters\":{\"options\":{},\"sortFieldsUi\":{\"sortField\":[{\"order\":\"descending\",\"fieldName\":\"number.value\"}]}},\"typeVersion\":1},{\"id\":\"19f529c7-bfe6-4713-8ed3-d80ecc0078de\",\"name\":\"Retain First 5 Incidents\",\"type\":\"n8n-nodes-base.limit\",\"position\":[740,580],\"parameters\":{\"maxItems\":5},\"typeVersion\":1},{\"id\":\"9b095ad5-dedc-43e6-9ab3-947b90e7145d\",\"name\":\"Loop Over Items\",\"type\":\"n8n-nodes-base.splitInBatches\",\"position\":[920,580],\"parameters\":{\"options\":{\"reset\":false}},\"typeVersion\":3},{\"id\":\"9a236a69-3ea5-46f5-8f2d-f7421bff638a\",\"name\":\"Format Incident Details\",\"type\":\"n8n-nodes-base.set\",\"position\":[1240,680],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"62388dab-28d4-40fa-a9f9-90d68c5dc491\",\"name\":\"incident_details\",\"type\":\"string\",\"value\":\"={\\n\\t\\t\\t\\\"type\\\": \\\"section\\\",\\n\\t\\t\\t\\\"text\\\": {\\n\\t\\t\\t\\t\\\"type\\\": \\\"mrkdwn\\\",\\n\\t\\t\\t\\t\\\"text\\\": \\\"<https://dev206761.service-now.com/nav_to.do?uri=incident.do?sys_id={{ $json.sys_id.value }}|*{{ $json.task_effective_number.value }}*>\\\\n{{ $json.short_description.display_value }}\\\\n*Opened by:* {{ $json.caller_id.display_value }}\\\\n*Date Opened:* {{ $json.opened_at.display_value }}\\\\n*Severity:* {{ $json.severity.display_value }}\\\\n*Priority:* {{ $json.priority.display_value }}\\\\n*State:* {{ $json.incident_state.display_value }}\\\\n*Category:* {{ $json.category.display_value }}\\\"\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"divider\\\"\\n\\t\\t}\"}]}},\"typeVersion\":3.4},{\"id\":\"6e15b991-d9d5-4244-a3db-dbd37c248303\",\"name\":\"Format Slack Message\",\"type\":\"n8n-nodes-base.set\",\"position\":[1320,500],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"90720996-88cc-4e47-b5bb-d5570c15f95c\",\"name\":\"slack_output\",\"type\":\"string\",\"value\":\"={\\n\\t\\\"blocks\\\": [\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"section\\\",\\n\\t\\t\\t\\\"block_id\\\": \\\"greeting_section\\\",\\n\\t\\t\\t\\\"text\\\": {\\n\\t\\t\\t\\t\\\"type\\\": \\\"mrkdwn\\\",\\n\\t\\t\\t\\t\\\"text\\\": \\\":wave: Hey there!\\\\n\\\\nHere are the incident summaries you requested with a state of {{ $('Parse Webhook').item.json.response.view.state.values.state_selector.state_select.selected_option.text.text }} and priority of {{ $('Parse Webhook').item.json.response.view.state.values.priority_selector.priority_select.selected_option.text.text }}.\\\\nA total of {{ $('ServiceNow').all().length }} incident(s) were found. If more than 5 were found only the 5 most recent will be listed. You can <https://dev206761.service-now.com/now/nav/ui/classic/params/target/incident_list.do%3Fsysparm_query%3Dincident_state%253D{{ $('Parse Webhook').item.json.response.view.state.values.state_selector.state_select.selected_option.value }}%255Epriority%253D{{ $('Parse Webhook').item.json.response.view.state.values.priority_selector.priority_select.selected_option.value }}%26sysparm_first_row%3D1%26sysparm_view%3Dess|click here> to view all of the matching incidents in ServiceNow.\\\"\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"divider\\\"\\n\\t\\t},\\n\\t\\t{{ $('Concatenate Incident Details').item.json.concatenated_incident_details }}\\n\\t]\\n}\"}]}},\"typeVersion\":3.4},{\"id\":\"08182589-800d-4ce6-8654-fc53d2ee56c3\",\"name\":\"Concatenate Incident Details\",\"type\":\"n8n-nodes-base.summarize\",\"position\":[1140,500],\"parameters\":{\"options\":{},\"fieldsToSummarize\":{\"values\":[{\"field\":\"incident_details\",\"aggregation\":\"concatenate\"}]}},\"typeVersion\":1},{\"id\":\"86b698d2-2854-4393-8ee8-76f8e7b01586\",\"name\":\"DM - Send Matching Incidents\",\"type\":\"n8n-nodes-base.slack\",\"position\":[1880,720],\"webhookId\":\"5d1ecba8-d03b-47cc-9d30-fd631e7816c1\",\"parameters\":{\"text\":\"=\",\"user\":{\"__rl\":true,\"mode\":\"id\",\"value\":\"={{ $('Parse Webhook').item.json.response.user.id }}\"},\"select\":\"user\",\"blocksUi\":\"={{ $('Format Slack Message').item.json.slack_output }}\",\"messageType\":\"block\",\"otherOptions\":{\"includeLinkToWorkflow\":false}},\"credentials\":{\"slackApi\":{\"id\":\"K04E2FxPZozHux9J\",\"name\":\"ServiceNow Bot\"}},\"typeVersion\":2.2},{\"id\":\"cbd8fbc3-d589-4625-99b5-a98e6a41d4bb\",\"name\":\"Channel - Send Matching Incidents\",\"type\":\"n8n-nodes-base.slack\",\"position\":[1880,520],\"webhookId\":\"5d1ecba8-d03b-47cc-9d30-fd631e7816c1\",\"parameters\":{\"text\":\"=\",\"select\":\"channel\",\"blocksUi\":\"={{ $('Format Slack Message').item.json.slack_output }}\",\"channelId\":{\"__rl\":true,\"mode\":\"id\",\"value\":\"={{ $('Parse Webhook').item.json.response.view.state.values.pWqkN['actionId-1'].selected_channel }}\"},\"messageType\":\"block\",\"otherOptions\":{\"includeLinkToWorkflow\":false}},\"credentials\":{\"slackApi\":{\"id\":\"K04E2FxPZozHux9J\",\"name\":\"ServiceNow Bot\"}},\"typeVersion\":2.2},{\"id\":\"c3ed618f-b65e-4df2-80c0-90b2e2be3783\",\"name\":\"Sticky Note11\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-200,-709.4873251551015],\"parameters\":{\"color\":7,\"width\":709.3965558024038,\"height\":887.8719128264411,\"content\":\"![Slack](https://uploads.n8n.io/templates/servicenowmodalinterface.png)\\n## Slack Modal Interface\\n\\nWhen triggered, Slack will display this interface to allow Slack users to search ServiceNow for tickets based on priority and state, and then allow you to choose which channel to output the results. If no channel is found, the response will be sent to the Slack user via DM. \"},\"typeVersion\":1},{\"id\":\"69f47cb7-84c6-4037-b3ba-8364ec572fde\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-798.751282964615,190.55356752462308],\"parameters\":{\"color\":7,\"width\":579.6865154062818,\"height\":647.0013506366993,\"content\":\"![Slack](https://uploads.n8n.io/templates/slack.png)\\n## Receive and Parse Slack Event via Webhook\\n\\nThis section begins with the `Webhook` node, which captures events from Slack, such as modal submissions or button presses. The payload from Slack is then processed by the `Parse Webhook` node to extract relevant details like callback IDs, user inputs (e.g., priority and state), and additional metadata. Once the data is parsed, it is passed to the `Route Message` node, which evaluates the callback ID or action type using a `Switch` node. Depending on the conditions, the workflow routes the data to specific paths: handling modal requests, processing data submissions, or responding to button actions. This setup ensures seamless handling of different Slack interactions and prepares the data for subsequent steps.\"},\"typeVersion\":1},{\"id\":\"622f63e4-fd03-4a76-bb2d-04a2daea9a46\",\"name\":\"Sticky Note12\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-200,188.05676141451897],\"parameters\":{\"color\":7,\"width\":710.3172669178614,\"height\":563.0861092667175,\"content\":\"![Slack](https://uploads.n8n.io/templates/slack.png)\\n## Respond to Modal request\\n\\nThis section starts with the `Respond to Slack Webhook`, which sends an acknowledgment to Slack after a modal interaction is triggered. This ensures the Slack interface remains error-free and provides a smooth user experience. Following this, the `ServiceNow Modal` node is used to open a Slack modal via the Slack API. The modal allows users to input search parameters for ServiceNow incidents, such as priority and state. Additionally, users can select the Slack channel where the results will be posted. This integration ensures a seamless connection between Slack and ServiceNow, enabling users to perform detailed searches directly from Slack.\\n\"},\"typeVersion\":1},{\"id\":\"16d7f224-7792-4e9f-ae5c-1c0b6a39e703\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-200,760],\"parameters\":{\"color\":7,\"width\":709.0896745965773,\"height\":550.5825149622945,\"content\":\"![Servicenow](https://uploads.n8n.io/templates/servicenow.png)\\n## Close Modal and Search Service Now\\n\\nThis section starts with the `Close Modal Popup` node, which sends a response to Slack to close the modal after user input has been captured. Once the modal is closed, the workflow moves to the `ServiceNow` node. This node performs an API query to retrieve incidents from ServiceNow that match the specified state and priority provided by the user in the modal form. The query results are then evaluated by the `Were Incidents Found`? node, an If node that checks if any incidents were returned by the query. This section ensures a smooth transition from user input in Slack to backend data retrieval in ServiceNow, facilitating the identification of relevant incidents.\"},\"typeVersion\":1},{\"id\":\"3f52816d-db59-4574-b82e-8a9ca854e049\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[526.5720643091352,908.7025500703817],\"parameters\":{\"color\":7,\"width\":714.3631681325317,\"height\":911.8420872184945,\"content\":\"![Slack](https://uploads.n8n.io/templates/slack.png)\\n## No Incidents found, respond to Slack\\n\\nThis section begins with the `No Matches - Was a Channel Selected?` node, which evaluates whether the user selected a specific Slack channel for receiving notifications. If a channel was selected, the workflow proceeds to the `Channel - Notify User no Incidents Matched` node, which sends a message to the designated channel informing users that no incidents were found matching the specified criteria of state and priority.\\n\\nIf no channel was selected, the workflow uses the `DM - Notify User no Incidents Matched` node to send a direct message to the user who initiated the query. This message includes details about the search parameters, ensuring the user is informed of the results regardless of the outcome. This step ensures transparent and efficient communication, whether via a public channel or a private direct message.\"},\"typeVersion\":1},{\"id\":\"22943cc9-c79c-4465-ac9e-040d5f49a879\",\"name\":\"Sticky Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-200,1328.507039277291],\"parameters\":{\"color\":7,\"width\":709.4188646504804,\"height\":492.8100521251637,\"content\":\"![Slack](https://uploads.n8n.io/templates/slack.png)\\n## Respond to Slack Button Press with 200 Response\\n\\nThis section uses the `Send 200` node to send a 200 HTTP response back to Slack whenever a button press event is triggered in a Slack message. This response is crucial for preventing Slack from showing errors in its Block Kit user interface, ensuring a seamless and professional interaction for the user. By handling these button press events gracefully, this step maintains a positive user experience and avoids unnecessary confusion or interruptions.\"},\"typeVersion\":1},{\"id\":\"95d4d5e1-5f6b-4107-a55d-51e70c25c055\",\"name\":\"Sticky Note5\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[528.3624557345836,26.66938195987973],\"parameters\":{\"color\":7,\"width\":956.6393374313541,\"height\":870.8771447693905,\"content\":\"![n8n](https://uploads.n8n.io/templates/n8n.png)\\n## Sort and format Results for block kit\\n\\nThis section begins by organizing the incident data retrieved from ServiceNow. The `Sort by Most Recent` node arranges the incidents in descending order, ensuring that the latest ones are processed first. Next, the `Retain First 5 Incidents` node limits the output to the five most recent incidents for clarity and focus.\\n\\nThe `Loop Over Items` node iterates through each incident, allowing the workflow to process them individually. During each loop, the `Format Incident Details` node structures the details of each incident into a format compatible with Slack’s Block Kit, ensuring readability and a professional appearance.\\n\\nOnce all incidents are formatted, the `Concatenate Incident Details` node aggregates the results into a single, cohesive message. Finally, the `Format Slack Message` node prepares the Slack message with a friendly greeting, summary details, and links to view the full incidents in ServiceNow. This section ensures that incident information is not only organized but also presented in a visually appealing and actionable manner within Slack.\"},\"typeVersion\":1},{\"id\":\"2d55c76a-f7ba-46ec-acc1-13f54b22b2ee\",\"name\":\"Was a Channel Selected?\",\"type\":\"n8n-nodes-base.if\",\"position\":[1580,580],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"a0b79298-b93f-4ed3-b53b-5c28dfdb2699\",\"operator\":{\"type\":\"string\",\"operation\":\"exists\",\"singleValue\":true},\"leftValue\":\"={{ $('Parse Webhook').item.json.response.view.state.values.pWqkN['actionId-1'].selected_channel }}\",\"rightValue\":\"\"}]}},\"typeVersion\":2.2},{\"id\":\"70792926-097f-4f2b-b3b4-afc7bad60ea6\",\"name\":\"Sticky Note4\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1500,27.218710650838375],\"parameters\":{\"color\":7,\"width\":657.1120966423081,\"height\":870.9953951550463,\"content\":\"![Slack](https://uploads.n8n.io/templates/slack.png)\\n## Check if Slack channel selected and send Incident results in block kit format\\n\\nThis section begins with the `Was a Channel Selected?` node, which checks whether the user specified a Slack channel to receive the output. If a channel is selected, the workflow proceeds to the `Channel - Send Matching Incidents` node, which sends the formatted incident details to the chosen Slack channel using Block Kit. The message includes key information such as incident summaries, priorities, and state details, ensuring effective communication to the target audience.\\n\\nIf no channel was selected, the workflow uses the `DM - Send Matching Incidents` node to deliver the same information directly to the user via a Slack direct message. By dynamically adjusting the delivery method based on the user's input, this step ensures the incident results are communicated efficiently, whether to a broader audience or privately to the user.\"},\"typeVersion\":1},{\"id\":\"0ae7f5bf-7a78-42f6-95aa-c0f685e63c40\",\"name\":\"Respond to Slack Webhook\",\"type\":\"n8n-nodes-base.respondToWebhook\",\"position\":[-100,560],\"parameters\":{\"options\":{},\"respondWith\":\"noData\"},\"typeVersion\":1.1}],\"pinData\":{},\"connections\":{\"Webhook\":{\"main\":[[{\"node\":\"Parse Webhook\",\"type\":\"main\",\"index\":0}]]},\"ServiceNow\":{\"main\":[[{\"node\":\"Were Incidents Found?\",\"type\":\"main\",\"index\":0}]]},\"Parse Webhook\":{\"main\":[[{\"node\":\"Route Message\",\"type\":\"main\",\"index\":0}]]},\"Route Message\":{\"main\":[[{\"node\":\"Respond to Slack Webhook\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Close Modal Popup\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Send 200\",\"type\":\"main\",\"index\":0}]]},\"Loop Over Items\":{\"main\":[[{\"node\":\"Concatenate Incident Details\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Format Incident Details\",\"type\":\"main\",\"index\":0}]]},\"Close Modal Popup\":{\"main\":[[{\"node\":\"ServiceNow\",\"type\":\"main\",\"index\":0}]]},\"Sort by Most Recent\":{\"main\":[[{\"node\":\"Retain First 5 Incidents\",\"type\":\"main\",\"index\":0}]]},\"Format Slack Message\":{\"main\":[[{\"node\":\"Was a Channel Selected?\",\"type\":\"main\",\"index\":0}]]},\"Were Incidents Found?\":{\"main\":[[{\"node\":\"Sort by Most Recent\",\"type\":\"main\",\"index\":0}],[{\"node\":\"No Matches - Was a Channel Selected?\",\"type\":\"main\",\"index\":0}]]},\"Format Incident Details\":{\"main\":[[{\"node\":\"Loop Over Items\",\"type\":\"main\",\"index\":0}]]},\"Was a Channel Selected?\":{\"main\":[[{\"node\":\"Channel - Send Matching Incidents\",\"type\":\"main\",\"index\":0}],[{\"node\":\"DM - Send Matching Incidents\",\"type\":\"main\",\"index\":0}]]},\"Respond to Slack Webhook\":{\"main\":[[{\"node\":\"ServiceNow Modal\",\"type\":\"main\",\"index\":0}]]},\"Retain First 5 Incidents\":{\"main\":[[{\"node\":\"Loop Over Items\",\"type\":\"main\",\"index\":0}]]},\"Concatenate Incident Details\":{\"main\":[[{\"node\":\"Format Slack Message\",\"type\":\"main\",\"index\":0}]]},\"No Matches - Was a Channel Selected?\":{\"main\":[[{\"node\":\"Channel - Notify User no Incidents Matched\",\"type\":\"main\",\"index\":0}],[{\"node\":\"DM - Notify User no Incidents Matched\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "#### **Who is this for?**\n\nThis workflow is designed for IT teams, service desk personnel, and incident management professionals who need a streamlined way to monitor and report on recent ServiceNow incidents directly within Slack.\n\n#### **What problem is this workflow solving? / Use Case**\n\nManually monitoring incidents in ServiceNow can be time-consuming, and keeping teams updated about new or specific incidents often involves additional manual effort. This workflow automates the process of querying recent incidents from ServiceNow based on user-defined parameters and delivering formatted results directly to Slack. It ensures faster response times and improved incident visibility.\n\n#### **What this workflow does**\n\nThis workflow integrates Slack and ServiceNow to provide an automated system for retrieving and presenting incident details.\n\n  1. **Slack User Interaction** : Users initiate the workflow via a Slack modal form, selecting incident parameters like priority and state.\n  2. **ServiceNow Query** : The workflow queries ServiceNow for incidents matching the selected criteria.\n  3. **Results Delivery** : Incident results are sent back to Slack as a message formatted using Block Kit. If no results are found, the workflow notifies the user with a detailed message, either in a Slack channel or via direct message.\n  4. **Error Handling** : If no channel is selected or any issues arise, the workflow ensures graceful fallback with appropriate notifications.\n\n\n\n#### **Setup Instructions**\n\n  1. **Slack Setup** : \n     * Integrate Slack with n8n using a Slack app.\n     * Configure the modal form to accept parameters like priority and state.\n     * [Check out this video for setting up a modal slack app on YouTube.](https://youtu.be/z4JuK4qPJ1E)\n  2. **ServiceNow Integration** : \n     * Use ServiceNow credentials to connect with n8n.\n     * Ensure appropriate permissions for querying incidents.\n  3. **n8n Workflow Configuration** : \n     * Import this workflow into n8n.\n     * Verify all node configurations, particularly those for ServiceNow API queries and Slack outputs.\n     * Set up webhook URLs for Slack event handling.\n  4. **Testing** : \n     * Trigger the workflow from Slack to test modal inputs and incident queries.\n     * Confirm the output is correctly formatted and delivered to the intended Slack channel or user.\n\n\n\n#### **How to Customize this Workflow to Your Needs**\n\n  * Modify the ServiceNow query logic to include additional filters or fields.\n  * Adjust the Slack Block Kit formatting to match your organization’s preferred notification style.\n  * Use conditional logic to add more advanced handling for specific priorities or states.\n  * Expand the workflow to include escalation steps, such as notifying a specific team or creating follow-up tasks.\n\n\n\n#### **Workflow Highlights**\n\n  * **Slack Modal Form** : Allows users to specify search criteria for incidents interactively.\n  * **Dynamic Results Delivery** : Automatically sends results to a Slack channel or direct message based on user input.\n  * **Error Handling** : Provides fallback notifications when no incidents are found or user inputs are incomplete.\n  * **Customizable Integration** : Easily adaptable to fit different organizational needs, including advanced filtering and formatting options.\n\n\n",
  "readme_html": "<!--[--><div data-v-006f9244=\"\"><h4><strong>Who is this for?</strong></h4>\n<p>This workflow is designed for IT teams, service desk personnel, and incident management professionals who need a streamlined way to monitor and report on recent ServiceNow incidents directly within Slack.</p>\n<h4><strong>What problem is this workflow solving? / Use Case</strong></h4>\n<p>Manually monitoring incidents in ServiceNow can be time-consuming, and keeping teams updated about new or specific incidents often involves additional manual effort. This workflow automates the process of querying recent incidents from ServiceNow based on user-defined parameters and delivering formatted results directly to Slack. It ensures faster response times and improved incident visibility.</p>\n<h4><strong>What this workflow does</strong></h4>\n<p>This workflow integrates Slack and ServiceNow to provide an automated system for retrieving and presenting incident details.</p>\n<ol>\n<li><strong>Slack User Interaction</strong>: Users initiate the workflow via a Slack modal form, selecting incident parameters like priority and state.</li>\n<li><strong>ServiceNow Query</strong>: The workflow queries ServiceNow for incidents matching the selected criteria.</li>\n<li><strong>Results Delivery</strong>: Incident results are sent back to Slack as a message formatted using Block Kit. If no results are found, the workflow notifies the user with a detailed message, either in a Slack channel or via direct message.</li>\n<li><strong>Error Handling</strong>: If no channel is selected or any issues arise, the workflow ensures graceful fallback with appropriate notifications.</li>\n</ol>\n<h4><strong>Setup Instructions</strong></h4>\n<ol>\n<li><strong>Slack Setup</strong>:\n<ul>\n<li>Integrate Slack with n8n using a Slack app.</li>\n<li>Configure the modal form to accept parameters like priority and state.</li>\n<li><a href=\"https://youtu.be/z4JuK4qPJ1E\" rel=\"ugc nofollow\" target=\"_blank\">Check out this video for setting up a modal slack app on YouTube.</a></li>\n</ul>\n</li>\n<li><strong>ServiceNow Integration</strong>:\n<ul>\n<li>Use ServiceNow credentials to connect with n8n.</li>\n<li>Ensure appropriate permissions for querying incidents.</li>\n</ul>\n</li>\n<li><strong>n8n Workflow Configuration</strong>:\n<ul>\n<li>Import this workflow into n8n.</li>\n<li>Verify all node configurations, particularly those for ServiceNow API queries and Slack outputs.</li>\n<li>Set up webhook URLs for Slack event handling.</li>\n</ul>\n</li>\n<li><strong>Testing</strong>:\n<ul>\n<li>Trigger the workflow from Slack to test modal inputs and incident queries.</li>\n<li>Confirm the output is correctly formatted and delivered to the intended Slack channel or user.</li>\n</ul>\n</li>\n</ol>\n<h4><strong>How to Customize this Workflow to Your Needs</strong></h4>\n<ul>\n<li>Modify the ServiceNow query logic to include additional filters or fields.</li>\n<li>Adjust the Slack Block Kit formatting to match your organization’s preferred notification style.</li>\n<li>Use conditional logic to add more advanced handling for specific priorities or states.</li>\n<li>Expand the workflow to include escalation steps, such as notifying a specific team or creating follow-up tasks.</li>\n</ul>\n<h4><strong>Workflow Highlights</strong></h4>\n<ul>\n<li><strong>Slack Modal Form</strong>: Allows users to specify search criteria for incidents interactively.</li>\n<li><strong>Dynamic Results Delivery</strong>: Automatically sends results to a Slack channel or direct message based on user input.</li>\n<li><strong>Error Handling</strong>: Provides fallback notifications when no incidents are found or user inputs are incomplete.</li>\n<li><strong>Customizable Integration</strong>: Easily adaptable to fit different organizational needs, including advanced filtering and formatting options.</li>\n</ul>\n</div><!--]-->",
  "readme_zh": "#### **适用对象**\n\n本工作流专为IT团队、服务台人员及事件管理专业人士设计，帮助他们在Slack内直接监控和上报近期ServiceNow事件，实现高效协作。\n\n#### **解决什么问题？/ 使用场景**\n\n人工监控ServiceNow事件耗时费力，且难以及时同步事件更新。该工作流通过自动化流程解决以下痛点：  \n- 根据用户自定义参数（如优先级、状态）自动查询ServiceNow事件  \n- 将格式化结果直接推送至Slack  \n- 提升事件响应速度与团队可见性  \n\n#### **核心功能**\n\n本工作流通过Slack与ServiceNow集成实现事件自动检索与通知：  \n1. **Slack交互**：用户通过模态表单选择事件参数（如优先级、状态）触发流程  \n2. **ServiceNow查询**：根据条件实时检索匹配的事件记录  \n3. **结果推送**：  \n   - 通过Block Kit格式化消息返回查询结果  \n   - 若无结果，向指定Slack频道或用户发送详细通知  \n4. **容错机制**：未选择频道或出现异常时，自动发送友好提示  \n\n#### **配置指南**\n\n1. **Slack设置**  \n   - 通过Slack应用与n8n集成  \n   - 配置模态表单以接收优先级/状态等参数  \n   - [模态表单配置视频教程](https://youtu.be/z4JuK4qPJ1E)  \n2. **ServiceNow集成**  \n   - 使用凭证连接n8n  \n   - 确保具备事件查询权限  \n3. **n8n工作流配置**  \n   - 导入本工作流  \n   - 重点检查ServiceNow API查询节点和Slack输出节点  \n   - 设置Slack事件处理的Webhook URL  \n4. **测试验证**  \n   - 从Slack触发流程测试参数输入  \n   - 确认输出消息格式与推送路径正确  \n\n#### **自定义扩展**\n\n- **增强查询**：添加更多ServiceNow过滤条件或字段  \n- **界面优化**：按需调整Block Kit消息模板  \n- **逻辑升级**：针对特定优先级/状态设置条件分支  \n- **流程延伸**：扩展告警升级逻辑（如自动派单或创建跟进任务）  \n\n#### **核心优势**\n\n- **交互式表单**：通过Slack模态窗口灵活定义搜索条件  \n- **智能推送**：根据输入自动选择频道/DM推送结果  \n- **稳健容错**：空结果/输入异常时提供明确指引  \n- **高度可扩展**：支持自定义过滤规则与消息模板适配业务需求",
  "title_zh": "在Slack中使用弹出模态窗口列出最近的ServiceNow事件",
  "publish_date_zh": "最后更新于3个月前",
  "workflow_json_zh": "{\n  \"meta\": {\n    \"instanceId\": \"03e9d14e9196363fe7191ce21dc0bb17387a6e755dcc9acc4f5904752919dca8\"\n  },\n  \"nodes\": [\n    {\n      \"id\": \"a9a92b8a-05cf-4d9e-ae01-be3b17346893\",\n      \"name\": \"Parse Webhook\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        -560,\n        660\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"e63f9299-a19d-4ba1-93b0-59f458769fb2\",\n              \"name\": \"response\",\n              \"type\": \"object\",\n              \"value\": \"={{ $json.body.payload }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.3\n    },\n    {\n      \"id\": \"f999011b-e54d-4514-94ec-4d544af4d145\",\n      \"name\": \"Close Modal Popup\",\n      \"type\": \"n8n-nodes-base.respondToWebhook\",\n      \"position\": [\n        -160,\n        1120\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"respondWith\": \"noData\"\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"a16d64a0-fe07-4cae-b458-a91937e57a4e\",\n      \"name\": \"Route Message\",\n      \"type\": \"n8n-nodes-base.switch\",\n      \"position\": [\n        -380,\n        660\n      ],\n      \"parameters\": {\n        \"rules\": {\n          \"values\": [\n            {\n              \"outputKey\": \"Request Modal\",\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 1,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"operator\": {\n                      \"type\": \"string\",\n                      \"operation\": \"equals\"\n                    },\n                    \"leftValue\": \"={{ $json.response.callback_id }}\",\n                    \"rightValue\": \"search_recent_incidents\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            },\n            {\n              \"outputKey\": \"Submit Data\",\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 1,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"65daa75f-2e17-4ba0-8fd8-2ac2159399e3\",\n                    \"operator\": {\n                      \"name\": \"filter.operator.equals\",\n                      \"type\": \"string\",\n                      \"operation\": \"equals\"\n                    },\n                    \"leftValue\": \"={{ $json.response.type }}\",\n                    \"rightValue\": \"view_submission\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            },\n            {\n              \"outputKey\": \"Block Actions\",\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 1,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"c242cee2-7274-4e02-bfbe-d0e999d30ea7\",\n                    \"operator\": {\n                      \"name\": \"filter.operator.equals\",\n                      \"type\": \"string\",\n                      \"operation\": \"equals\"\n                    },\n                    \"leftValue\": \"={{ $json.response.type }}\",\n                    \"rightValue\": \"block_actions\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            }\n          ]\n        },\n        \"options\": {\n          \"fallbackOutput\": \"none\"\n        }\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"54fa31d5-7259-4c19-8891-8b559af87959\",\n      \"name\": \"ServiceNow Modal\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        260,\n        560\n      ],\n      \"parameters\": {\n        \"url\": \"https://slack.com/api/views.open\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"jsonBody\": \"=  {\\n    \\\"trigger_id\\\": \\\"{{ $('Parse Webhook').item.json['response']['trigger_id'] }}\\\",\\n    \\\"external_id\\\": \\\"Search SNOW Incidents\\\",\\n    \\\"view\\\": {\\n\\t\\\"title\\\": {\\n\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\\"text\\\": \\\"Search SNOW Incidents\\\",\\n\\t\\t\\\"emoji\\\": true\\n\\t},\\n\\t\\\"submit\\\": {\\n\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\\"text\\\": \\\"Search\\\",\\n\\t\\t\\\"emoji\\\": true\\n\\t},\\n\\t\\\"type\\\": \\\"modal\\\",\\n\\t\\\"external_id\\\": \\\"search_snow_incidents\\\",\\n\\t\\\"close\\\": {\\n\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\\"text\\\": \\\"Cancel\\\",\\n\\t\\t\\\"emoji\\\": true\\n\\t},\\n\\t\\\"blocks\\\": [\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"section\\\",\\n\\t\\t\\t\\\"block_id\\\": \\\"greeting_section\\\",\\n\\t\\t\\t\\\"text\\\": {\\n\\t\\t\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\t\\t\\\"text\\\": \\\":wave: Hey there!\\\\n\\\\nUse this form to search ServiceNow for incidents based on their priority and state. Both of these properties are required to search incidents properly.\\\",\\n\\t\\t\\t\\t\\\"emoji\\\": true\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"divider\\\",\\n\\t\\t\\t\\\"block_id\\\": \\\"divider_1\\\"\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"input\\\",\\n\\t\\t\\t\\\"block_id\\\": \\\"priority_selector\\\",\\n\\t\\t\\t\\\"element\\\": {\\n\\t\\t\\t\\t\\\"type\\\": \\\"external_select\\\",\\n\\t\\t\\t\\t\\\"placeholder\\\": {\\n\\t\\t\\t\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\t\\t\\t\\\"text\\\": \\\"Priority of Incidents to Search\\\",\\n\\t\\t\\t\\t\\t\\\"emoji\\\": true\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\\"action_id\\\": \\\"priority_select\\\",\\n\\t\\t\\t\\t\\\"min_query_length\\\": 0\\n\\t\\t\\t},\\n\\t\\t\\t\\\"label\\\": {\\n\\t\\t\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\t\\t\\\"text\\\": \\\"Priority Selector\\\",\\n\\t\\t\\t\\t\\\"emoji\\\": true\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"input\\\",\\n\\t\\t\\t\\\"block_id\\\": \\\"state_selector\\\",\\n\\t\\t\\t\\\"element\\\": {\\n\\t\\t\\t\\t\\\"type\\\": \\\"external_select\\\",\\n\\t\\t\\t\\t\\\"placeholder\\\": {\\n\\t\\t\\t\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\t\\t\\t\\\"text\\\": \\\"State of Incidents to Search\\\",\\n\\t\\t\\t\\t\\t\\\"emoji\\\": true\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\\"action_id\\\": \\\"state_select\\\",\\n\\t\\t\\t\\t\\\"min_query_length\\\": 0\\n\\t\\t\\t},\\n\\t\\t\\t\\\"label\\\": {\\n\\t\\t\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\t\\t\\\"text\\\": \\\"State Selector\\\",\\n\\t\\t\\t\\t\\\"emoji\\\": true\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"section\\\",\\n\\t\\t\\t\\\"text\\\": {\\n\\t\\t\\t\\t\\\"type\\\": \\\"mrkdwn\\\",\\n\\t\\t\\t\\t\\\"text\\\": \\\"Please select a channel where the results will be posted.\\\"\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"actions\\\",\\n\\t\\t\\t\\\"elements\\\": [\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\\"type\\\": \\\"channels_select\\\",\\n\\t\\t\\t\\t\\t\\\"placeholder\\\": {\\n\\t\\t\\t\\t\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\t\\t\\t\\t\\\"text\\\": \\\"Select a channel\\\",\\n\\t\\t\\t\\t\\t\\t\\\"emoji\\\": true\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\\"action_id\\\": \\\"actionId-1\\\"\\n\\t\\t\\t\\t}\\n\\t\\t\\t]\\n\\t\\t}\\n\\t]\\n}\\n}\",\n        \"sendBody\": true,\n        \"sendHeaders\": true,\n        \"specifyBody\": \"json\",\n        \"authentication\": \"predefinedCredentialType\",\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"Content-Type\",\n              \"value\": \"application/json\"\n            }\n          ]\n        },\n        \"nodeCredentialType\": \"slackApi\"\n      },\n      \"credentials\": {\n        \"slackApi\": {\n          \"id\": \"K04E2FxPZozHux9J\",\n          \"name\": \"ServiceNow Bot\"\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"d16de218-b99b-4d13-9655-8fe1a329e01f\",\n      \"name\": \"Webhook\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"position\": [\n        -760,\n        660\n      ],\n      \"webhookId\": \"e03c7d39-1dce-4ac5-8db8-2b4511a85a07\",\n      \"parameters\": {\n        \"path\": \"e03c7d39-1dce-4ac5-8db8-2b4511a85a07\",\n        \"options\": {},\n        \"httpMethod\": \"POST\",\n        \"responseMode\": \"responseNode\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"57ee358a-d409-42e7-8200-4475c4c59263\",\n      \"name\": \"Send 200\",\n      \"type\": \"n8n-nodes-base.respondToWebhook\",\n      \"position\": [\n        -160,\n        1660\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"responseCode\": 200\n        }\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"86b0fd85-b3d5-456c-8f59-0f29f283969f\",\n      \"name\": \"ServiceNow\",\n      \"type\": \"n8n-nodes-base.serviceNow\",\n      \"position\": [\n        100,\n        1120\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"sysparm_query\": \"=incident_state={{ $json.response.view.state.values.state_selector.state_select.selected_option.value }}^priority={{ $json.response.view.state.values.priority_selector.priority_select.selected_option.value }}\",\n          \"sysparm_display_value\": \"all\"\n        },\n        \"resource\": \"incident\",\n        \"operation\": \"getAll\",\n        \"returnAll\": true,\n        \"authentication\": \"basicAuth\"\n      },\n      \"credentials\": {\n        \"serviceNowBasicApi\": {\n          \"id\": \"wjkWiUNQxo5PzTIb\",\n          \"name\": \"ServiceNow Basic Auth account\"\n        }\n      },\n      \"typeVersion\": 1,\n      \"alwaysOutputData\": true\n    },\n    {\n      \"id\": \"95fcd7f1-ac3a-4128-8b4a-84b636487d9e\",\n      \"name\": \"Channel - Notify User no Incidents Matched\",\n      \"type\": \"n8n-nodes-base.slack\",\n      \"position\": [\n        960,\n        1360\n      ],\n      \"webhookId\": \"5d1ecba8-d03b-47cc-9d30-fd631e7816c1\",\n      \"parameters\": {\n        \"text\": \"=No incidents were found with a state of {{ $('Parse Webhook').item.json.response.view.state.values.state_selector.state_select.selected_option.text.text }} and priority of {{ $('Parse Webhook').item.json.response.view.state.values.priority_selector.priority_select.selected_option.text.text }}.\",\n        \"select\": \"channel\",\n        \"channelId\": {\n          \"__rl\": true,\n          \"mode\": \"id\",\n          \"value\": \"={{ $('Parse Webhook').item.json.response.view.state.values.pWqkN['actionId-1'].selected_channel }}\"\n        },\n        \"otherOptions\": {\n          \"includeLinkToWorkflow\": false\n        }\n      },\n      \"credentials\": {\n        \"slackApi\": {\n          \"id\": \"K04E2FxPZozHux9J\",\n          \"name\": \"ServiceNow Bot\"\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"7f638817-6f97-42a9-9027-dd0d5fb6f560\",\n      \"name\": \"DM - Notify User no Incidents Matched\",\n      \"type\": \"n8n-nodes-base.slack\",\n      \"position\": [\n        960,\n        1600\n      ],\n      \"webhookId\": \"5d1ecba8-d03b-47cc-9d30-fd631e7816c1\",\n      \"parameters\": {\n        \"text\": \"=No incidents were found with a state of {{ $('Parse Webhook').item.json.response.view.state.values.state_selector.state_select.selected_option.text.text }} and priority of {{ $('Parse Webhook').item.json.response.view.state.values.priority_selector.priority_select.selected_option.text.text }}.\",\n        \"user\": {\n          \"__rl\": true,\n          \"mode\": \"id\",\n          \"value\": \"={{ $('Parse Webhook').item.json.response.user.id }}\"\n        },\n        \"select\": \"user\",\n        \"otherOptions\": {\n          \"includeLinkToWorkflow\": false\n        }\n      },\n      \"credentials\": {\n        \"slackApi\": {\n          \"id\": \"K04E2FxPZozHux9J\",\n          \"name\": \"ServiceNow Bot\"\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"f3a21223-9e74-4066-af9f-6b94f69cb01f\",\n      \"name\": \"Were Incidents Found?\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        360,\n        1120\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"fcdf9a8e-6359-4a3e-bf4e-e1834945727b\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"exists\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $('ServiceNow').item.json.number.value }}\",\n              \"rightValue\": \"\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"e27438cb-ba24-4a3b-8fe8-52b7d39cb1e0\",\n      \"name\": \"No Matches - Was a Channel Selected?\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        580,\n        1480\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"a0b79298-b93f-4ed3-b53b-5c28dfdb2699\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"exists\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $('Parse Webhook').item.json.response.view.state.values.pWqkN['actionId-1'].selected_channel }}\",\n              \"rightValue\": \"\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"de7d3155-1c6d-43a1-9cc0-4900d176fd3e\",\n      \"name\": \"Sort by Most Recent\",\n      \"type\": \"n8n-nodes-base.sort\",\n      \"position\": [\n        580,\n        580\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"sortFieldsUi\": {\n          \"sortField\": [\n            {\n              \"order\": \"descending\",\n              \"fieldName\": \"number.value\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"19f529c7-bfe6-4713-8ed3-d80ecc0078de\",\n      \"name\": \"Retain First 5 Incidents\",\n      \"type\": \"n8n-nodes-base.limit\",\n      \"position\": [\n        740,\n        580\n      ],\n      \"parameters\": {\n        \"maxItems\": 5\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"9b095ad5-dedc-43e6-9ab3-947b90e7145d\",\n      \"name\": \"Loop Over Items\",\n      \"type\": \"n8n-nodes-base.splitInBatches\",\n      \"position\": [\n        920,\n        580\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"reset\": false\n        }\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"9a236a69-3ea5-46f5-8f2d-f7421bff638a\",\n      \"name\": \"Format Incident Details\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        1240,\n        680\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"62388dab-28d4-40fa-a9f9-90d68c5dc491\",\n              \"name\": \"incident_details\",\n              \"type\": \"string\",\n              \"value\": \"={\\n\\t\\t\\t\\\"type\\\": \\\"section\\\",\\n\\t\\t\\t\\\"text\\\": {\\n\\t\\t\\t\\t\\\"type\\\": \\\"mrkdwn\\\",\\n\\t\\t\\t\\t\\\"text\\\": \\\"<https://dev206761.service-now.com/nav_to.do?uri=incident.do?sys_id={{ $json.sys_id.value }}|*{{ $json.task_effective_number.value }}*>\\\\n{{ $json.short_description.display_value }}\\\\n*Opened by:* {{ $json.caller_id.display_value }}\\\\n*Date Opened:* {{ $json.opened_at.display_value }}\\\\n*Severity:* {{ $json.severity.display_value }}\\\\n*Priority:* {{ $json.priority.display_value }}\\\\n*State:* {{ $json.incident_state.display_value }}\\\\n*Category:* {{ $json.category.display_value }}\\\"\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"divider\\\"\\n\\t\\t}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"6e15b991-d9d5-4244-a3db-dbd37c248303\",\n      \"name\": \"Format Slack Message\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        1320,\n        500\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"90720996-88cc-4e47-b5bb-d5570c15f95c\",\n              \"name\": \"slack_output\",\n              \"type\": \"string\",\n              \"value\": \"={\\n\\t\\\"blocks\\\": [\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"section\\\",\\n\\t\\t\\t\\\"block_id\\\": \\\"greeting_section\\\",\\n\\t\\t\\t\\\"text\\\": {\\n\\t\\t\\t\\t\\\"type\\\": \\\"mrkdwn\\\",\\n\\t\\t\\t\\t\\\"text\\\": \\\":wave: Hey there!\\\\n\\\\nHere are the incident summaries you requested with a state of {{ $('Parse Webhook').item.json.response.view.state.values.state_selector.state_select.selected_option.text.text }} and priority of {{ $('Parse Webhook').item.json.response.view.state.values.priority_selector.priority_select.selected_option.text.text }}.\\\\nA total of {{ $('ServiceNow').all().length }} incident(s) were found. If more than 5 were found only the 5 most recent will be listed. You can <https://dev206761.service-now.com/now/nav/ui/classic/params/target/incident_list.do%3Fsysparm_query%3Dincident_state%253D{{ $('Parse Webhook').item.json.response.view.state.values.state_selector.state_select.selected_option.value }}%255Epriority%253D{{ $('Parse Webhook').item.json.response.view.state.values.priority_selector.priority_select.selected_option.value }}%26sysparm_first_row%3D1%26sysparm_view%3Dess|click here> to view all of the matching incidents in ServiceNow.\\\"\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"divider\\\"\\n\\t\\t},\\n\\t\\t{{ $('Concatenate Incident Details').item.json.concatenated_incident_details }}\\n\\t]\\n}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"08182589-800d-4ce6-8654-fc53d2ee56c3\",\n      \"name\": \"Concatenate Incident Details\",\n      \"type\": \"n8n-nodes-base.summarize\",\n      \"position\": [\n        1140,\n        500\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"fieldsToSummarize\": {\n          \"values\": [\n            {\n              \"field\": \"incident_details\",\n              \"aggregation\": \"concatenate\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"86b698d2-2854-4393-8ee8-76f8e7b01586\",\n      \"name\": \"DM - Send Matching Incidents\",\n      \"type\": \"n8n-nodes-base.slack\",\n      \"position\": [\n        1880,\n        720\n      ],\n      \"webhookId\": \"5d1ecba8-d03b-47cc-9d30-fd631e7816c1\",\n      \"parameters\": {\n        \"text\": \"=\",\n        \"user\": {\n          \"__rl\": true,\n          \"mode\": \"id\",\n          \"value\": \"={{ $('Parse Webhook').item.json.response.user.id }}\"\n        },\n        \"select\": \"user\",\n        \"blocksUi\": \"={{ $('Format Slack Message').item.json.slack_output }}\",\n        \"messageType\": \"block\",\n        \"otherOptions\": {\n          \"includeLinkToWorkflow\": false\n        }\n      },\n      \"credentials\": {\n        \"slackApi\": {\n          \"id\": \"K04E2FxPZozHux9J\",\n          \"name\": \"ServiceNow Bot\"\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"cbd8fbc3-d589-4625-99b5-a98e6a41d4bb\",\n      \"name\": \"Channel - Send Matching Incidents\",\n      \"type\": \"n8n-nodes-base.slack\",\n      \"position\": [\n        1880,\n        520\n      ],\n      \"webhookId\": \"5d1ecba8-d03b-47cc-9d30-fd631e7816c1\",\n      \"parameters\": {\n        \"text\": \"=\",\n        \"select\": \"channel\",\n        \"blocksUi\": \"={{ $('Format Slack Message').item.json.slack_output }}\",\n        \"channelId\": {\n          \"__rl\": true,\n          \"mode\": \"id\",\n          \"value\": \"={{ $('Parse Webhook').item.json.response.view.state.values.pWqkN['actionId-1'].selected_channel }}\"\n        },\n        \"messageType\": \"block\",\n        \"otherOptions\": {\n          \"includeLinkToWorkflow\": false\n        }\n      },\n      \"credentials\": {\n        \"slackApi\": {\n          \"id\": \"K04E2FxPZozHux9J\",\n          \"name\": \"ServiceNow Bot\"\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"c3ed618f-b65e-4df2-80c0-90b2e2be3783\",\n      \"name\": \"Sticky Note11\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -200,\n        -709.4873251551015\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 709.3965558024038,\n        \"height\": 887.8719128264411,\n        \"content\": \"![Slack](https://uploads.n8n.io/templates/servicenowmodalinterface.png)\\n## Slack 模态界面\\n\\n触发时，Slack 将显示此界面，允许 Slack 用户根据优先级和状态在 ServiceNow 中搜索工单，然后选择将结果输出到哪个频道。如果未找到指定频道，系统将通过私信将响应发送给该 Slack 用户。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"69f47cb7-84c6-4037-b3ba-8364ec572fde\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -798.751282964615,\n        190.55356752462308\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 579.6865154062818,\n        \"height\": 647.0013506366993,\n        \"content\": \"![Slack](https://uploads.n8n.io/templates/slack.png)\\n## 通过Webhook接收并解析Slack事件\\n\\n本流程始于`Webhook`节点，用于捕获来自Slack的事件（如模态框提交或按钮点击）。随后`Parse Webhook`节点会对Slack的有效载荷进行解析，提取关键信息如回调ID、用户输入（例如优先级和状态）及其他元数据。解析完成后，数据将传递至`Route Message`节点，该节点通过`Switch`节点评估回调ID或动作类型。根据判断条件，工作流会将数据路由至特定路径：处理模态请求、处理数据提交或响应按钮动作。此配置确保了对不同Slack交互的无缝处理，并为后续步骤准备好数据。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"622f63e4-fd03-4a76-bb2d-04a2daea9a46\",\n      \"name\": \"Sticky Note12\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -200,\n        188.05676141451897\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 710.3172669178614,\n        \"height\": 563.0861092667175,\n        \"content\": \"![Slack](https://uploads.n8n.io/templates/slack.png)\\n## 响应模态框请求\\n\\n本流程始于`响应Slack网络钩子`节点，该节点在触发模态框交互后向Slack发送确认响应，确保Slack界面无错误显示并提供流畅的用户体验。随后通过`ServiceNow模态框`节点调用Slack API打开交互式模态窗口。该模态框允许用户输入ServiceNow工单的搜索参数（如优先级和状态），并选择结果推送的Slack频道。这种集成方式实现了Slack与ServiceNow的无缝衔接，让用户能直接在Slack平台完成精细化搜索。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"16d7f224-7792-4e9f-ae5c-1c0b6a39e703\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -200,\n        760\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 709.0896745965773,\n        \"height\": 550.5825149622945,\n        \"content\": \"![Servicenow](https://uploads.n8n.io/templates/servicenow.png)\\n## 关闭模态框并搜索Service Now\\n\\n本流程始于`关闭模态弹窗`节点，该节点在捕获用户输入后向Slack发送响应以关闭模态框。随后流程进入`ServiceNow`节点，通过API查询获取与用户在模态表单中指定的状态和优先级相匹配的事件记录。查询结果将由`是否找到事件？`节点（一个条件判断节点）进行评估，用于检测查询是否返回了有效结果。该环节实现了从Slack用户输入到ServiceNow后端数据检索的无缝衔接，确保能准确识别相关事件。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"3f52816d-db59-4574-b82e-8a9ca854e049\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        526.5720643091352,\n        908.7025500703817\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 714.3631681325317,\n        \"height\": 911.8420872184945,\n        \"content\": \"![Slack](https://uploads.n8n.io/templates/slack.png)\\n## 未发现故障事件，向Slack发送响应\\n\\n本流程起始于「未匹配到结果 - 是否已选择频道？」节点，该节点会判断用户是否已选定特定的Slack频道来接收通知。若已选择频道，工作流将进入「频道通知 - 无匹配故障事件」节点，向指定频道发送消息，告知用户未发现符合所设定状态与优先级条件的故障事件。\\n\\n若未选择频道，工作流则会通过「私信通知 - 无匹配故障事件」节点，向发起查询的用户直接发送私信。该消息包含搜索参数的详细信息，确保用户无论结果如何都能获知查询情况。这一步骤保障了沟通的透明与高效，无论是通过公开频道还是私密对话。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"22943cc9-c79c-4465-ac9e-040d5f49a879\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -200,\n        1328.507039277291\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 709.4188646504804,\n        \"height\": 492.8100521251637,\n        \"content\": \"![Slack](https://uploads.n8n.io/templates/slack.png)\\n## 响应Slack按钮点击并返回200状态码\\n\\n本部分通过`Send 200`节点实现：当Slack消息中的按钮触发点击事件时，立即向Slack返回200 HTTP响应。该响应对于避免Slack在Block Kit用户界面显示错误提示至关重要，能确保用户获得流畅专业的交互体验。通过优雅处理这些按钮点击事件，此步骤既维持了良好的用户体验，又避免了可能出现的操作中断或界面混乱。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"95d4d5e1-5f6b-4107-a55d-51e70c25c055\",\n      \"name\": \"Sticky Note5\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        528.3624557345836,\n        26.66938195987973\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 956.6393374313541,\n        \"height\": 870.8771447693905,\n        \"content\": \"## 为Block Kit排序并格式化结果\\n\\n本部分首先对从ServiceNow获取的事件数据进行整理。通过\\\"按最近时间排序\\\"节点将事件按降序排列，确保优先处理最新事件。随后\\\"保留前5个事件\\\"节点将输出限制为最近的五个事件，保持界面简洁聚焦。\\n\\n\\\"遍历项目\\\"节点会对每个事件进行逐条处理，使工作流能够单独处理每条记录。在每次循环中，\\\"格式化事件详情\\\"节点会将每个事件的详细信息转换为与Slack Block Kit兼容的格式，确保内容可读且呈现专业外观。\\n\\n当所有事件格式化完成后，\\\"拼接事件详情\\\"节点会将结果聚合成一条完整连贯的消息。最后\\\"格式化Slack消息\\\"节点会准备包含友好问候语、摘要详情以及ServiceNow完整事件查看链接的Slack消息。该部分不仅实现了事件信息的有序组织，更确保其在Slack中以视觉吸引力和可操作性兼备的方式呈现。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"2d55c76a-f7ba-46ec-acc1-13f54b22b2ee\",\n      \"name\": \"Was a Channel Selected?\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        1580,\n        580\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"a0b79298-b93f-4ed3-b53b-5c28dfdb2699\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"exists\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $('Parse Webhook').item.json.response.view.state.values.pWqkN['actionId-1'].selected_channel }}\",\n              \"rightValue\": \"\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"70792926-097f-4f2b-b3b4-afc7bad60ea6\",\n      \"name\": \"Sticky Note4\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1500,\n        27.218710650838375\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 657.1120966423081,\n        \"height\": 870.9953951550463,\n        \"content\": \"![Slack](https://uploads.n8n.io/templates/slack.png)\\n## 检查是否选择Slack频道并以Block Kit格式发送事件结果\\n\\n本流程起始于\\\"是否选择频道？\\\"节点，用于检测用户是否指定了接收输出结果的Slack频道。若已选择频道，工作流将进入\\\"频道-发送匹配事件\\\"节点，通过Block Kit格式将格式化后的事件详情发送至选定频道。消息内容包含事件摘要、优先级和状态等关键信息，确保目标受众能有效接收通知。\\n\\n若未选择频道，工作流则通过\\\"私信-发送匹配事件\\\"节点，将相同信息以Slack私信形式直接发送给用户。此步骤根据用户输入动态调整信息传递方式，确保事件结果无论是面向群体还是单独用户都能实现高效传达。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"0ae7f5bf-7a78-42f6-95aa-c0f685e63c40\",\n      \"name\": \"Respond to Slack Webhook\",\n      \"type\": \"n8n-nodes-base.respondToWebhook\",\n      \"position\": [\n        -100,\n        560\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"respondWith\": \"noData\"\n      },\n      \"typeVersion\": 1.1\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"Webhook\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Parse Webhook\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"ServiceNow\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Were Incidents Found?\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Parse Webhook\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Route Message\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Route Message\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Respond to Slack Webhook\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Close Modal Popup\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Send 200\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Loop Over Items\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Concatenate Incident Details\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Format Incident Details\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Close Modal Popup\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"ServiceNow\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Sort by Most Recent\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Retain First 5 Incidents\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Format Slack Message\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Was a Channel Selected?\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Were Incidents Found?\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Sort by Most Recent\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"No Matches - Was a Channel Selected?\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Format Incident Details\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Loop Over Items\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Was a Channel Selected?\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Channel - Send Matching Incidents\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"DM - Send Matching Incidents\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Respond to Slack Webhook\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"ServiceNow Modal\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Retain First 5 Incidents\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Loop Over Items\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Concatenate Incident Details\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Format Slack Message\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"No Matches - Was a Channel Selected?\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Channel - Notify User no Incidents Matched\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"DM - Notify User no Incidents Matched\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}