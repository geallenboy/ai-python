{
  "title": "Sync Zendesk tickets with subsequent comments to Asana tasks",
  "url": "https://n8n.io/workflows/1821-sync-zendesk-tickets-with-subsequent-comments-to-asana-tasks/",
  "category": "Support",
  "category_url": "https://n8n.io/workflows/categories/support/?count=20",
  "author": "n8n Team",
  "publish_date": "Last update 9 months ago",
  "publish_date_absolute": "2024-08-06",
  "content": "",
  "workflow_json": "{\"meta\":{\"instanceId\":\"237600ca44303ce91fa31ee72babcdc8493f55ee2c0e8aa2b78b3b4ce6f70bd9\"},\"nodes\":[{\"id\":\"1c041974-2a1f-4464-be3e-70b8a700f40d\",\"name\":\"Get ticket\",\"type\":\"n8n-nodes-base.zendesk\",\"position\":[460,480],\"parameters\":{\"id\":\"={{$node[\\\"On new Zendesk ticket\\\"].json[\\\"body\\\"][\\\"id\\\"]}}\",\"operation\":\"get\"},\"credentials\":{\"zendeskApi\":{\"id\":\"24\",\"name\":\"[UPDATE ME]\"}},\"typeVersion\":1},{\"id\":\"a4a05b2a-2382-44af-8226-a2c60bee1ce3\",\"name\":\"Create task\",\"type\":\"n8n-nodes-base.asana\",\"position\":[1000,580],\"parameters\":{\"name\":\"={{$node[\\\"Get ticket\\\"].json[\\\"subject\\\"]}}\",\"workspace\":\"1177253494675264\",\"otherProperties\":{\"assignee\":\"1202718619090236\",\"assignee_status\":\"inbox\"}},\"credentials\":{\"asanaApi\":{\"id\":\"8\",\"name\":\"[UPDATE ME]\"}},\"typeVersion\":1},{\"id\":\"55128ee9-9210-4341-bf9a-2e4ea415b668\",\"name\":\"IF\",\"type\":\"n8n-nodes-base.if\",\"position\":[820,480],\"parameters\":{\"conditions\":{\"string\":[{\"value1\":\"={{$node[\\\"Determine\\\"].json[\\\"Asana GID\\\"]}}\",\"operation\":\"isNotEmpty\"}]}},\"typeVersion\":1},{\"id\":\"6319045c-7df8-4031-b738-835f8fe12d06\",\"name\":\"Update ticket\",\"type\":\"n8n-nodes-base.zendesk\",\"notes\":\"Update the Zendesk ticket by adding the Jira issue key to the \\\"Jira Issue Key\\\" field.\",\"position\":[1180,580],\"parameters\":{\"id\":\"={{$node[\\\"On new Zendesk ticket\\\"].json[\\\"body\\\"][\\\"id\\\"]}}\",\"operation\":\"update\",\"updateFields\":{\"customFieldsUi\":{\"customFieldsValues\":[{\"id\":6707064637597,\"value\":\"={{$node[\\\"Create task\\\"].json[\\\"gid\\\"]}}\"}]}}},\"credentials\":{\"zendeskApi\":{\"id\":\"24\",\"name\":\"[UPDATE ME]\"}},\"notesInFlow\":true,\"typeVersion\":1},{\"id\":\"39172e43-def7-4e05-9ce3-6d0bb1c3ff59\",\"name\":\"Determine\",\"type\":\"n8n-nodes-base.function\",\"notes\":\"if issue was created already in Jira\",\"position\":[640,480],\"parameters\":{\"functionCode\":\"/* configure here =========================================================== */\\n/*  Zendesk field ID which represents the \\\"Jira Issue Key\\\" field.\\n*/\\nconst ISSUE_KEY_FIELD_ID = 6707064637597;\\n\\n/* ========================================================================== */\\nnew_items = [];\\n\\nfor (item of $items(\\\"Get ticket\\\")) {\\n    \\n    // instantiate a new variable for status\\n    var custom_fields = item.json[\\\"custom_fields\\\"];\\n    var asana_gid = \\\"\\\";\\n    for (var i = 0; i < custom_fields.length; i++) {\\n        if (custom_fields[i].id == ISSUE_KEY_FIELD_ID) {\\n            asana_gid = custom_fields[i].value;\\n            break;\\n        }\\n    }\\n\\n    // push the new item to the new_items array\\n    new_items.push({\\n        \\\"Asana GID\\\": asana_gid\\n    });\\n}\\n\\nreturn new_items;\"},\"notesInFlow\":true,\"typeVersion\":1},{\"id\":\"26f2aaf3-8b21-429f-bfec-c5876792d4b9\",\"name\":\"Create comment on existing task\",\"type\":\"n8n-nodes-base.asana\",\"position\":[1000,380],\"parameters\":{\"id\":\"={{$node[\\\"Determine\\\"].json[\\\"Asana GID\\\"]}}\",\"text\":\"=<body>{{$node[\\\"On new Zendesk ticket\\\"].json[\\\"body\\\"][\\\"comment\\\"]}}</body>\",\"resource\":\"taskComment\",\"isTextHtml\":true,\"additionalFields\":{}},\"credentials\":{\"asanaApi\":{\"id\":\"8\",\"name\":\"[UPDATE ME]\"}},\"typeVersion\":1},{\"id\":\"bbbf0fc1-3fa7-4a15-a949-c8d9d5e32031\",\"name\":\"On new Zendesk ticket\",\"type\":\"n8n-nodes-base.webhook\",\"position\":[280,480],\"webhookId\":\"4637a853-0b3a-43d4-9d76-92e1ce87889d\",\"parameters\":{\"path\":\"4637a853-0b3a-43d4-9d76-92e1ce87889d\",\"options\":{},\"httpMethod\":\"POST\"},\"typeVersion\":1}],\"connections\":{\"IF\":{\"main\":[[{\"node\":\"Create comment on existing task\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Create task\",\"type\":\"main\",\"index\":0}]]},\"Determine\":{\"main\":[[{\"node\":\"IF\",\"type\":\"main\",\"index\":0}]]},\"Get ticket\":{\"main\":[[{\"node\":\"Determine\",\"type\":\"main\",\"index\":0}]]},\"Create task\":{\"main\":[[{\"node\":\"Update ticket\",\"type\":\"main\",\"index\":0}]]},\"On new Zendesk ticket\":{\"main\":[[{\"node\":\"Get ticket\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "This workflow creates an Asana task when a new ticket is created in Zendesk. Subsequent comments on the ticket in Zendesk are added as comments to the task in Asana.\n\n## Prerequisites\n\n  * Zendesk account and [Zendesk credentials](https://docs.n8n.io/integrations/builtin/credentials/zendesk/).\n  * Asana account and [Asana credentials](https://docs.n8n.io/integrations/builtin/credentials/Asana/).\n  * Asana workspace to create tasks in.\n\n\n\n## How it works\n\n  1. The workflow listens for new tickets in Zendesk.\n  2. When a new ticket is created, the workflow creates a new task in Asana.\n  3. The Asana GID is then saved in one of the ticket's fields (in [setup](notion://www.notion.so/n8n/a1b8c2bc7d2b4aa3b90d50fa80b766d1?v=a3106a73c9fc41b88630cc9f091cf063&p=bb3006267256456d9313fa39d8cdd591&pm=s#setup) we call this \"Asana GID\").\n  4. The next time a comment is added to the ticket, the workflow retrieves the Asana GID from the ticket's field and adds the comment to the task in Asana.\n\n\n\n## Setup\n\nThis workflow requires that you set up a webhook in Zendesk. To do so, follow the steps below:\n\n  1. In the workflow, open the `On new Zendesk ticket` node and copy the webhook URL.\n\n  2. In Zendesk, navigate to Admin Center > Apps and integrations > Webhooks > Actions > Create Webhook.\n\n  3. Add all the required details which can be retrieved from the `On new Zendesk ticket` node. The webhook URL gets added to the “Endpoint URL” field, and the “Request method” should match what is shown in n8n.\n\n  4. Save the webhook.\n\n  5. In Zendesk, navigate to Admin Center > Objects and rules > Business rules > Triggers > Add trigger.\n\n  6. Give trigger a name such as “New tickets”.\n\n  7. Under “Conditions” in “Meet ALL of the following conditions”, add “Status is New”.\n\n  8. Under “Actions”, select “Notify active webhook” and select the webhook you created previously.\n\n  9. In the JSON body, add the following:\n         \n         {\n         \t\"id\": \"{{ticket.id}}\",\n         \t\"comment\": \"{{ticket.latest_comment_html}}\"\n         }\n         \n\n  10. Save the Zendesk trigger.\n\n\n\n\nYou will also need to set up a field in Zendesk to store the Asana GID. To do so, follow the steps below:\n\n  1. In Zendesk, navigate to Admin Center > Objects and rules > Tickets > Fields > Add field.\n  2. Use the number field option and give the field a name such as “Asana GID”.\n  3. Save the field.\n  4. In n8n, open the `Update ticket` node and select the field you created in Zendesk.\n\n\n",
  "readme_html": "<!--[--><div data-v-006f9244=\"\"><p>This workflow creates an Asana task when a new ticket is created in Zendesk. Subsequent comments on the ticket in Zendesk are added as comments to the task in Asana.</p>\n<h2>Prerequisites</h2>\n<ul>\n<li>Zendesk account and <a href=\"https://docs.n8n.io/integrations/builtin/credentials/zendesk/\" rel=\"ugc nofollow\" target=\"_blank\">Zendesk credentials</a>.</li>\n<li>Asana account and <a href=\"https://docs.n8n.io/integrations/builtin/credentials/Asana/\" rel=\"ugc nofollow\" target=\"_blank\">Asana credentials</a>.</li>\n<li>Asana workspace to create tasks in.</li>\n</ul>\n<h2>How it works</h2>\n<ol>\n<li>The workflow listens for new tickets in Zendesk.</li>\n<li>When a new ticket is created, the workflow creates a new task in Asana.</li>\n<li>The Asana GID is then saved in one of the ticket's fields (in <a href=\"notion://www.notion.so/n8n/a1b8c2bc7d2b4aa3b90d50fa80b766d1?v=a3106a73c9fc41b88630cc9f091cf063&amp;p=bb3006267256456d9313fa39d8cdd591&amp;pm=s#setup\" rel=\"ugc nofollow\">setup</a> we call this \"Asana GID\").</li>\n<li>The next time a comment is added to the ticket, the workflow retrieves the Asana GID from the ticket's field and adds the comment to the task in Asana.</li>\n</ol>\n<h2>Setup</h2>\n<p>This workflow requires that you set up a webhook in Zendesk. To do so, follow the steps below:</p>\n<ol>\n<li>\n<p>In the workflow, open the <code>On new Zendesk ticket</code> node and copy the webhook URL.</p>\n</li>\n<li>\n<p>In Zendesk, navigate to Admin Center &gt; Apps and integrations &gt; Webhooks &gt; Actions &gt; Create Webhook.</p>\n</li>\n<li>\n<p>Add all the required details which can be retrieved from the <code>On new Zendesk ticket</code> node. The webhook URL gets added to the “Endpoint URL” field, and the “Request method” should match what is shown in n8n.</p>\n</li>\n<li>\n<p>Save the webhook.</p>\n</li>\n<li>\n<p>In Zendesk, navigate to Admin Center &gt; Objects and rules &gt; Business rules &gt; Triggers &gt; Add trigger.</p>\n</li>\n<li>\n<p>Give trigger a name such as “New tickets”.</p>\n</li>\n<li>\n<p>Under “Conditions” in “Meet ALL of the following conditions”, add “Status is New”.</p>\n</li>\n<li>\n<p>Under “Actions”, select “Notify active webhook” and select the webhook you created previously.</p>\n</li>\n<li>\n<p>In the JSON body, add the following:</p>\n<pre><code>{\n\t\"id\": \"{{ticket.id}}\",\n\t\"comment\": \"{{ticket.latest_comment_html}}\"\n}\n</code></pre>\n</li>\n<li>\n<p>Save the Zendesk trigger.</p>\n</li>\n</ol>\n<p>You will also need to set up a field in Zendesk to store the Asana GID. To do so, follow the steps below:</p>\n<ol>\n<li>In Zendesk, navigate to Admin Center &gt; Objects and rules &gt; Tickets &gt; Fields &gt; Add field.</li>\n<li>Use the number field option and give the field a name such as “Asana GID”.</li>\n<li>Save the field.</li>\n<li>In n8n, open the <code>Update ticket</code> node and select the field you created in Zendesk.</li>\n</ol>\n</div><!--]-->",
  "readme_zh": "该工作流程在Zendesk中创建新工单时，会自动在Asana生成对应任务。后续在Zendesk工单中添加的评论，将同步作为任务评论更新至Asana。\n\n## 前置条件\n\n* 有效的Zendesk账户及[Zendesk凭证](https://docs.n8n.io/integrations/builtin/credentials/zendesk/)\n* 有效的Asana账户及[Asana凭证](https://docs.n8n.io/integrations/builtin/credentials/Asana/)\n* 用于创建任务的Asana工作区\n\n## 运行机制\n\n1. 工作流程实时监听Zendesk新工单\n2. 当新工单产生时，自动在Asana创建对应任务\n3. 将Asana任务GID回存至工单自定义字段（在[设置环节](#setup)中命名为\"Asana GID\"）\n4. 当工单新增评论时，通过字段记录的GID定位Asana任务并同步评论\n\n## 配置说明\n\n需先在Zendesk配置Webhook，具体步骤如下：\n\n1. 在工作流中打开`On new Zendesk ticket`节点，复制Webhook URL\n2. 登录Zendesk后台：Admin Center > Apps and integrations > Webhooks > Actions > Create Webhook\n3. 填写`On new Zendesk ticket`节点中所有必填参数（Webhook URL填入\"Endpoint URL\"字段，\"Request method\"需与n8n显示一致）\n4. 保存Webhook配置\n5. 进入Zendesk后台：Admin Center > Objects and rules > Business rules > Triggers > Add trigger\n6. 命名触发器（如\"New tickets\"）\n7. 在\"Conditions\"区域的\"Meet ALL of the following conditions\"下添加\"Status is New\"\n8. 在\"Actions\"区域选择\"Notify active webhook\"，并关联刚创建的Webhook\n9. 在JSON body中添加：\n```json\n{\n    \"id\": \"{{ticket.id}}\",\n    \"comment\": \"{{ticket.latest_comment_html}}\"\n}\n```\n10. 保存触发器\n\n还需在Zendesk创建存储Asana GID的字段：\n\n1. 进入Zendesk后台：Admin Center > Objects and rules > Tickets > Fields > Add field\n2. 选择数字字段类型，命名为\"Asana GID\"\n3. 保存字段\n4. 在n8n中打开`Update ticket`节点，选择刚创建的Zendesk字段",
  "title_zh": "将Zendesk工单及后续评论同步至Asana任务",
  "publish_date_zh": "最后更新于9个月前",
  "workflow_json_zh": "{\n  \"meta\": {\n    \"instanceId\": \"237600ca44303ce91fa31ee72babcdc8493f55ee2c0e8aa2b78b3b4ce6f70bd9\"\n  },\n  \"nodes\": [\n    {\n      \"id\": \"1c041974-2a1f-4464-be3e-70b8a700f40d\",\n      \"name\": \"Get ticket\",\n      \"type\": \"n8n-nodes-base.zendesk\",\n      \"position\": [\n        460,\n        480\n      ],\n      \"parameters\": {\n        \"id\": \"={{$node[\\\"On new Zendesk ticket\\\"].json[\\\"body\\\"][\\\"id\\\"]}}\",\n        \"operation\": \"get\"\n      },\n      \"credentials\": {\n        \"zendeskApi\": {\n          \"id\": \"24\",\n          \"name\": \"[UPDATE ME]\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"a4a05b2a-2382-44af-8226-a2c60bee1ce3\",\n      \"name\": \"Create task\",\n      \"type\": \"n8n-nodes-base.asana\",\n      \"position\": [\n        1000,\n        580\n      ],\n      \"parameters\": {\n        \"name\": \"={{$node[\\\"Get ticket\\\"].json[\\\"subject\\\"]}}\",\n        \"workspace\": \"1177253494675264\",\n        \"otherProperties\": {\n          \"assignee\": \"1202718619090236\",\n          \"assignee_status\": \"inbox\"\n        }\n      },\n      \"credentials\": {\n        \"asanaApi\": {\n          \"id\": \"8\",\n          \"name\": \"[UPDATE ME]\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"55128ee9-9210-4341-bf9a-2e4ea415b668\",\n      \"name\": \"IF\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        820,\n        480\n      ],\n      \"parameters\": {\n        \"conditions\": {\n          \"string\": [\n            {\n              \"value1\": \"={{$node[\\\"Determine\\\"].json[\\\"Asana GID\\\"]}}\",\n              \"operation\": \"isNotEmpty\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"6319045c-7df8-4031-b738-835f8fe12d06\",\n      \"name\": \"Update ticket\",\n      \"type\": \"n8n-nodes-base.zendesk\",\n      \"notes\": \"Update the Zendesk ticket by adding the Jira issue key to the \\\"Jira Issue Key\\\" field.\",\n      \"position\": [\n        1180,\n        580\n      ],\n      \"parameters\": {\n        \"id\": \"={{$node[\\\"On new Zendesk ticket\\\"].json[\\\"body\\\"][\\\"id\\\"]}}\",\n        \"operation\": \"update\",\n        \"updateFields\": {\n          \"customFieldsUi\": {\n            \"customFieldsValues\": [\n              {\n                \"id\": 6707064637597,\n                \"value\": \"={{$node[\\\"Create task\\\"].json[\\\"gid\\\"]}}\"\n              }\n            ]\n          }\n        }\n      },\n      \"credentials\": {\n        \"zendeskApi\": {\n          \"id\": \"24\",\n          \"name\": \"[UPDATE ME]\"\n        }\n      },\n      \"notesInFlow\": true,\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"39172e43-def7-4e05-9ce3-6d0bb1c3ff59\",\n      \"name\": \"Determine\",\n      \"type\": \"n8n-nodes-base.function\",\n      \"notes\": \"if issue was created already in Jira\",\n      \"position\": [\n        640,\n        480\n      ],\n      \"parameters\": {\n        \"functionCode\": \"/* configure here =========================================================== */\\n/*  Zendesk field ID which represents the \\\"Jira Issue Key\\\" field.\\n*/\\nconst ISSUE_KEY_FIELD_ID = 6707064637597;\\n\\n/* ========================================================================== */\\nnew_items = [];\\n\\nfor (item of $items(\\\"Get ticket\\\")) {\\n    \\n    // instantiate a new variable for status\\n    var custom_fields = item.json[\\\"custom_fields\\\"];\\n    var asana_gid = \\\"\\\";\\n    for (var i = 0; i < custom_fields.length; i++) {\\n        if (custom_fields[i].id == ISSUE_KEY_FIELD_ID) {\\n            asana_gid = custom_fields[i].value;\\n            break;\\n        }\\n    }\\n\\n    // push the new item to the new_items array\\n    new_items.push({\\n        \\\"Asana GID\\\": asana_gid\\n    });\\n}\\n\\nreturn new_items;\"\n      },\n      \"notesInFlow\": true,\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"26f2aaf3-8b21-429f-bfec-c5876792d4b9\",\n      \"name\": \"Create comment on existing task\",\n      \"type\": \"n8n-nodes-base.asana\",\n      \"position\": [\n        1000,\n        380\n      ],\n      \"parameters\": {\n        \"id\": \"={{$node[\\\"Determine\\\"].json[\\\"Asana GID\\\"]}}\",\n        \"text\": \"=<body>{{$node[\\\"On new Zendesk ticket\\\"].json[\\\"body\\\"][\\\"comment\\\"]}}</body>\",\n        \"resource\": \"taskComment\",\n        \"isTextHtml\": true,\n        \"additionalFields\": {}\n      },\n      \"credentials\": {\n        \"asanaApi\": {\n          \"id\": \"8\",\n          \"name\": \"[UPDATE ME]\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"bbbf0fc1-3fa7-4a15-a949-c8d9d5e32031\",\n      \"name\": \"On new Zendesk ticket\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"position\": [\n        280,\n        480\n      ],\n      \"webhookId\": \"4637a853-0b3a-43d4-9d76-92e1ce87889d\",\n      \"parameters\": {\n        \"path\": \"4637a853-0b3a-43d4-9d76-92e1ce87889d\",\n        \"options\": {},\n        \"httpMethod\": \"POST\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"connections\": {\n    \"IF\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Create comment on existing task\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Create task\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Determine\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"IF\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get ticket\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Determine\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Create task\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Update ticket\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"On new Zendesk ticket\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get ticket\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}