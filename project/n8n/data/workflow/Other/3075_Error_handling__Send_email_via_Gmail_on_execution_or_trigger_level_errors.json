{
  "title": "Error handling: Send email via Gmail on execution or trigger-level errors",
  "url": "https://n8n.io/workflows/3075-error-handling-send-email-via-gmail-on-execution-or-trigger-level-errors/",
  "category": "Other",
  "category_url": "https://n8n.io/workflows/categories/other/?sort=createdAt:desc",
  "author": "Olek",
  "publish_date": "Last update 2 months ago",
  "publish_date_absolute": "2025-03-23",
  "content": "",
  "workflow_json": "{\"id\":\"vnhhf9aNsw0kzdBV\",\"meta\":{\"instanceId\":\"8fccc85e4982eaaf920505127420cfb3a600b56930a56e499973488bb6dc5e3a\",\"templateCredsSetupCompleted\":true},\"name\":\"CV Evaluation - Error Handling\",\"tags\":[{\"id\":\"GLfSiUrpHvSix03S\",\"name\":\"Error Handling\",\"createdAt\":\"2025-03-03T17:54:29.858Z\",\"updatedAt\":\"2025-03-03T17:54:29.858Z\"}],\"nodes\":[{\"id\":\"e2fd6e88-ae06-48ea-a73f-8e523b747a33\",\"name\":\"Error Trigger\",\"type\":\"n8n-nodes-base.errorTrigger\",\"position\":[-40,180],\"parameters\":{},\"typeVersion\":1},{\"id\":\"6b75ee9b-4540-4199-a393-c3e2583fd6bb\",\"name\":\"Gmail\",\"type\":\"n8n-nodes-base.gmail\",\"position\":[1360,160],\"webhookId\":\"d9c9328c-5be7-4ebe-a20a-c025e52cdf46\",\"parameters\":{\"sendTo\":\"={{ $json.config.emailing.sendTo }}\",\"message\":\"=<p>Workflow <a href=\\\"{{ $json.workflow.url }}\\\">{{ $json.workflow.id }}</a> ({{ $json.workflow.name }})<br/>\\nhas triggered the error handling workflow <a href=\\\"{{ $json.errorHandlingWorkflow.url }}\\\">{{ $json.errorHandlingWorkflow.id }}</a> ({{ $json.errorHandlingWorkflow.name }})<br/>\\nwith the error details below.</p>\\n{{ $json.html }}\\n<h2>Error handling JSON (complete error handling data)</h2>\\n<pre>\\n{{ JSON.stringify({\\n  execution: $json.execution,\\n  trigger: $json.trigger,\\n  workflow: $json.workflow,\\n  errorHandlingWorkflow: $json.errorHandlingWorkflow,\\n}, null, 2) }}\\n</pre>\",\"options\":{\"senderName\":\"={{ $json.config.emailing.senderName }}\"},\"subject\":\"=Workflow {{ $json.workflow.id }} ({{ $json.workflow.name }}) {{ $json.workflow.isExecutionError ? \\\"execution error\\\" : \\\"trigger failure\\\" }}: {{ $json.execution.error.message || $json.trigger.error.message }}\"},\"credentials\":{\"gmailOAuth2\":{\"id\":\"DsQxovsVtYdErSwk\",\"name\":\"Gmail m42g@g\"}},\"typeVersion\":2.1},{\"id\":\"2a3fd36f-a04b-4b43-bc5a-ac9d18adea82\",\"name\":\"Merge\",\"type\":\"n8n-nodes-base.merge\",\"position\":[1160,160],\"parameters\":{\"mode\":\"combine\",\"options\":{},\"combineBy\":\"combineByPosition\"},\"typeVersion\":3},{\"id\":\"b93cf843-42a2-4f64-873a-afdef2451934\",\"name\":\"Config\",\"type\":\"n8n-nodes-base.set\",\"position\":[120,180],\"parameters\":{\"options\":{\"dotNotation\":true},\"assignments\":{\"assignments\":[{\"id\":\"53ac5417-db98-41e5-bc6d-acb6dd1fec42\",\"name\":\"config.appUrl\",\"type\":\"string\",\"value\":\"https://YourAccountName.app.n8n.cloud/\"},{\"id\":\"0f85c65a-80bb-4977-90b9-1b4e741b5f70\",\"name\":\"config.emailing.sendTo\",\"type\":\"string\",\"value\":\"recipient@gmail.com\"},{\"id\":\"138c091f-7cd4-453a-9c75-5d193b617a39\",\"name\":\"config.emailing.senderName\",\"type\":\"string\",\"value\":\"Marvin the Yeoman Warder\"}]},\"includeOtherFields\":true},\"typeVersion\":3.4},{\"id\":\"5da22c60-fa54-4ddf-add8-f2b26610ef92\",\"name\":\"Constants\",\"type\":\"n8n-nodes-base.set\",\"position\":[280,180],\"parameters\":{\"options\":{\"dotNotation\":true},\"assignments\":{\"assignments\":[{\"id\":\"d69f8081-b58c-4283-a424-a2804c51258a\",\"name\":\"workflow.url\",\"type\":\"string\",\"value\":\"={{ $json.config.appUrl + \\\"workflow/\\\" + $json.workflow.id }}\"},{\"id\":\"735040f7-8f6e-4bda-a1be-e7784132ead8\",\"name\":\"workflow.isExecutionError\",\"type\":\"boolean\",\"value\":\"={{ Boolean($json.execution) }}\"},{\"id\":\"9206cdcc-4387-47e9-902e-f7d6b1f6893f\",\"name\":\"errorHandlingWorkflow.id\",\"type\":\"string\",\"value\":\"={{ $workflow.id }}\"},{\"id\":\"21de1fda-f4e4-4aef-afee-e3d7e6635f42\",\"name\":\"errorHandlingWorkflow.name\",\"type\":\"string\",\"value\":\"={{ $workflow.name }}\"},{\"id\":\"651ff8f3-be7b-4990-8248-38383f6d5f6a\",\"name\":\"errorHandlingWorkflow.url\",\"type\":\"string\",\"value\":\"={{ $json.config.appUrl + \\\"workflow/\\\" + $workflow.id }}\"}]},\"includeOtherFields\":true},\"typeVersion\":3.4},{\"id\":\"a3e45087-e799-4b1b-b420-8d106bdd6daf\",\"name\":\"If\",\"type\":\"n8n-nodes-base.if\",\"position\":[460,40],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"a757d78d-799b-401b-8c01-3103fddfe757\",\"operator\":{\"type\":\"boolean\",\"operation\":\"true\",\"singleValue\":true},\"leftValue\":\"={{ $json.workflow.isExecutionError }}\",\"rightValue\":\"={{ true }}\"}]}},\"typeVersion\":2.2},{\"id\":\"249a330d-1e9f-412c-a067-c96fbbcd1e6f\",\"name\":\"HTML for Execution Error\",\"type\":\"n8n-nodes-base.html\",\"position\":[660,-140],\"parameters\":{\"html\":\"<h2>Execution details</h2>\\n<p>See execution details at <a href=\\\"{{ $json.execution.url }}\\\">{{ $json.execution.url }}</a></p>\\n<p>Execution id: {{ $json.execution.id }}</p>\\n<p>retryOf: {{ $json.execution.retryOf }}</p>\\n<p>lastNodeExecuted: {{ $json.execution.lastNodeExecuted }}</p>\\n<p>mode: {{ $json.execution.mode }}</p>\\n<p>Message: {{ $json.execution.error.message }}</p>\\n<h3>Stack trace</h3>\\n<pre>\\n{{ $json.execution.error.stack }}\\n</pre>\"},\"typeVersion\":1.2,\"alwaysOutputData\":true},{\"id\":\"cc9e2e40-7858-4d86-bfda-65b4ad9f6ada\",\"name\":\"HTML for Trigger Error\",\"type\":\"n8n-nodes-base.html\",\"position\":[660,40],\"parameters\":{\"html\":\"<h2>Trigger failure details</h2>\\n<p>A trigger on main workflow has thrown an error.</p>\\n<h3>Mode</h3>\\n<p>{{ $json.trigger.mode }}</p>\\n<h3>Error</h3>\\n<p>Message: {{ $json.trigger.error.message }}</p>\\n<p>DateTime: {{ DateTime.fromMillis($json.trigger.error.timestamp) }}</p>\\n<p>Name: {{ $json.trigger.error.name }}</p>\\n<p>Description: {{ $json.trigger.error.description }}</p>\\n<p>Context:<br/>\\n<pre>{{ JSON.stringify($json.trigger.error.context, null, 2) }}</pre></p>\\n\\n<h3>Cause</h3>\\n<p>Message: {{ $json.trigger.error.cause.message }}</p>\\n<p>Name: {{ $json.trigger.error.cause.name }}</p>\\n<p>Code:{{ $json.trigger.error.cause.code }} </p>\\n<p>Status: {{ $json.trigger.error.cause.status }}</p>\\n<h3>Stack trace</h3>\\n<pre>\\n{{ $json.trigger.error.cause.stack }}\\n</pre>\"},\"typeVersion\":1.2,\"alwaysOutputData\":true},{\"id\":\"865dc047-69fc-4409-888b-701468746945\",\"name\":\"KeepEitherOfHTMLs\",\"type\":\"n8n-nodes-base.merge\",\"position\":[900,-40],\"parameters\":{\"mode\":\"combine\",\"options\":{\"includeUnpaired\":true},\"combineBy\":\"combineByPosition\"},\"typeVersion\":3},{\"id\":\"4d975de4-b458-43ac-9bfd-d6ab8205dc9a\",\"name\":\"Code\",\"type\":\"n8n-nodes-base.code\",\"position\":[100,480],\"parameters\":{},\"typeVersion\":2},{\"id\":\"e85a2fd7-eaff-4390-93ed-27c038aab890\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[60,-40],\"parameters\":{\"color\":5,\"width\":220,\"height\":380,\"content\":\"## Config\\n\\nDefine\\n- your n8n app base url\\n- notifications recipient email \\n- sender name\"},\"typeVersion\":1},{\"id\":\"efedfd1a-8e4f-44cb-aa0b-e10608f2328d\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[60,-1000],\"parameters\":{\"color\":4,\"width\":1060,\"height\":820,\"content\":\"## Send email via Gmail on workflow error (execution and trigger-level errors)\\n\\nThis error handling workflow sends an email via Gmail on workflow errors with details.\\n\\nIt extends https://n8n.io/workflows/696-send-email-via-gmail-on-workflow-error/ by adding functionality covering also trigger-level errors.\\n\\n\\n---\\n\\n### Features\\n- Get notifications on both main workflow trigger and execution time errors.\\n- Subject line will have the failed workflow id, name, error source (execution or trigger), error message.\\n- Body will contain links to both failed and error handling workflows as well as execution or trigger error details.\\n- Body will also contain a machine readable and enriched JSON from **`Error Trigger`** describing the error.\\n\\nUse this **error handling workflow** for as many workflows as you wish.\\n\\n\\n---\\n\\n### Configiration\\n- Copy this workflow to your workspace and, optionally, move it under the project that contains your main workflow\\n- In this **error handling workflow** settings, set **This workflow can be called by** as appropriate\\n- In **`Config`** node, define your app url, notifications recipient email, and sender name (useful to build filters in your inbox)\\n- In **`Gmail`** node, create and select **credentials**\\n- In your **main workflow** settings, pick this error handling workflow in the **Error Workflow** field ([How to...](https://docs.n8n.io/flow-logic/error-handling/#create-and-set-an-error-workflow))\\n\\n\\n---\\n\\n### Related resources\\n- [n8n Error Trigger](https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.errortrigger/) documentation.\\n\\n\\n---\\n\\n### Author\\n- Reach out [Olek](https://community.n8n.io/u/olek/summary) on community.n8n.io\\n- [Olek](https://n8n.io/creators/olek/) on n8n creators hub\"},\"typeVersion\":1},{\"id\":\"98d42327-3d06-4fc0-a31c-64114ae5cfc2\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1300,-40],\"parameters\":{\"height\":380,\"content\":\"## Gmail credentials\\nSetup your Gmail account credentials here.\"},\"typeVersion\":1}],\"active\":false,\"pinData\":{},\"settings\":{\"executionOrder\":\"v1\"},\"versionId\":\"aef68c1b-3efa-4f48-97ba-23c686cb7683\",\"connections\":{\"If\":{\"main\":[[{\"node\":\"HTML for Execution Error\",\"type\":\"main\",\"index\":0}],[{\"node\":\"HTML for Trigger Error\",\"type\":\"main\",\"index\":0}]]},\"Merge\":{\"main\":[[{\"node\":\"Gmail\",\"type\":\"main\",\"index\":0}]]},\"Config\":{\"main\":[[{\"node\":\"Constants\",\"type\":\"main\",\"index\":0}]]},\"Constants\":{\"main\":[[{\"node\":\"Merge\",\"type\":\"main\",\"index\":1},{\"node\":\"If\",\"type\":\"main\",\"index\":0}]]},\"Error Trigger\":{\"main\":[[{\"node\":\"Config\",\"type\":\"main\",\"index\":0}]]},\"KeepEitherOfHTMLs\":{\"main\":[[{\"node\":\"Merge\",\"type\":\"main\",\"index\":0}]]},\"HTML for Trigger Error\":{\"main\":[[{\"node\":\"KeepEitherOfHTMLs\",\"type\":\"main\",\"index\":1}]]},\"HTML for Execution Error\":{\"main\":[[{\"node\":\"KeepEitherOfHTMLs\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "This error handling workflow emails detailed notifications on workflow execution and trigger errors.\n\nIt extends [Send email via Gmail on workflow error](https://n8n.io/workflows/696-send-email-via-gmail-on-workflow-error/) template by covering trigger-level errors.\n\n* * *\n\n### Features\n\n  * Get notifications on both main workflow trigger and execution time errors.\n  * Subject line will have failed workflow id, name, error source (execution or trigger), error message.\n  * Body will contain links to **both** failed and error handling workflows as well as execution or trigger-level error details.\n  * Body will also contain a machine readable and enriched JSON from `Error Trigger` describing the error.\n\n\n\nUse this **error handling workflow** for as many workflows as you need.\n\n* * *\n\n### Configiration\n\n  * Copy this workflow to your workspace and, optionally, move it under the project that contains your main workflow\n  * In this **error handling workflow** settings, set **This workflow can be called by** as appropriate\n  * In `Config` node, define your app url, notifications recipient email, and sender name (useful to build filters in your inbox)\n  * In `Gmail` node, create and select **credentials**\n  * In your **main workflow** settings, pick this error handling workflow in the **Error Workflow** field ([How to...](https://docs.n8n.io/flow-logic/error-handling/#create-and-set-an-error-workflow))\n\n\n\n* * *\n\n### Related resources\n\n  * [n8n Error Trigger](https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.errortrigger/) documentation.\n\n\n\n* * *\n\n### Author\n\n  * Reach out [Olek](https://community.n8n.io/u/olek/summary) on [community.n8n.io](http://community.n8n.io)\n  * [Olek](https://n8n.io/creators/olek/) on n8n creators hub\n\n\n",
  "readme_html": "<!--[--><div data-v-50766329=\"\"><p>This error handling workflow emails detailed notifications on workflow execution and trigger errors.</p>\n<p>It extends <a href=\"https://n8n.io/workflows/696-send-email-via-gmail-on-workflow-error/\" rel=\"ugc nofollow\" target=\"_blank\">Send email via Gmail on workflow error</a> template by covering trigger-level errors.</p>\n<hr>\n<h3>Features</h3>\n<ul>\n<li>Get notifications on both main workflow trigger and execution time errors.</li>\n<li>Subject line will have failed workflow id, name, error source (execution or trigger), error message.</li>\n<li>Body will contain links to <strong>both</strong> failed and error handling workflows as well as execution or trigger-level error details.</li>\n<li>Body will also contain a machine readable and enriched JSON from <code>Error Trigger</code> describing the error.</li>\n</ul>\n<p>Use this <strong>error handling workflow</strong> for as many workflows as you need.</p>\n<hr>\n<h3>Configiration</h3>\n<ul>\n<li>Copy this workflow to your workspace and, optionally, move it under the project that contains your main workflow</li>\n<li>In this <strong>error handling workflow</strong> settings, set <strong>This workflow can be called by</strong> as appropriate</li>\n<li>In <code>Config</code> node, define your app url, notifications recipient email, and sender name (useful to build filters in your inbox)</li>\n<li>In <code>Gmail</code> node, create and select <strong>credentials</strong></li>\n<li>In your <strong>main workflow</strong> settings, pick this error handling workflow in the <strong>Error Workflow</strong> field (<a href=\"https://docs.n8n.io/flow-logic/error-handling/#create-and-set-an-error-workflow\" rel=\"ugc nofollow\" target=\"_blank\">How to...</a>)</li>\n</ul>\n<hr>\n<h3>Related resources</h3>\n<ul>\n<li><a href=\"https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.errortrigger/\" rel=\"ugc nofollow\" target=\"_blank\">n8n Error Trigger</a> documentation.</li>\n</ul>\n<hr>\n<h3>Author</h3>\n<ul>\n<li>Reach out <a href=\"https://community.n8n.io/u/olek/summary\" rel=\"ugc nofollow\" target=\"_blank\">Olek</a> on <a href=\"http://community.n8n.io\" rel=\"ugc nofollow\" target=\"_blank\">community.n8n.io</a></li>\n<li><a href=\"https://n8n.io/creators/olek/\" rel=\"ugc nofollow\" target=\"_blank\">Olek</a> on n8n creators hub</li>\n</ul>\n</div><!--]-->",
  "readme_zh": "该错误处理工作流会通过邮件发送关于工作流执行及触发器错误的详细通知。\n\n它是对[工作流出错时通过Gmail发送邮件](https://n8n.io/workflows/696-send-email-via-gmail-on-workflow-error/)模板的扩展，新增了对触发器层级错误的覆盖。\n\n* * *\n\n### 功能特性\n\n  * 同时接收主工作流触发阶段和执行阶段的错误通知\n  * 邮件主题包含失败工作流ID、名称、错误来源（执行或触发）、错误信息\n  * 正文提供**失败工作流**和**错误处理工作流**的双向链接，以及执行或触发层级的错误详情\n  * 正文还包含来自`Error Trigger`节点的机器可读增强版JSON错误描述",
  "title_zh": "错误处理：在执行或触发级别错误时通过Gmail发送邮件",
  "publish_date_zh": "最后更新于2个月前",
  "workflow_json_zh": "{\n  \"id\": \"vnhhf9aNsw0kzdBV\",\n  \"meta\": {\n    \"instanceId\": \"8fccc85e4982eaaf920505127420cfb3a600b56930a56e499973488bb6dc5e3a\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"name\": \"CV Evaluation - Error Handling\",\n  \"tags\": [\n    {\n      \"id\": \"GLfSiUrpHvSix03S\",\n      \"name\": \"Error Handling\",\n      \"createdAt\": \"2025-03-03T17:54:29.858Z\",\n      \"updatedAt\": \"2025-03-03T17:54:29.858Z\"\n    }\n  ],\n  \"nodes\": [\n    {\n      \"id\": \"e2fd6e88-ae06-48ea-a73f-8e523b747a33\",\n      \"name\": \"Error Trigger\",\n      \"type\": \"n8n-nodes-base.errorTrigger\",\n      \"position\": [\n        -40,\n        180\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"6b75ee9b-4540-4199-a393-c3e2583fd6bb\",\n      \"name\": \"Gmail\",\n      \"type\": \"n8n-nodes-base.gmail\",\n      \"position\": [\n        1360,\n        160\n      ],\n      \"webhookId\": \"d9c9328c-5be7-4ebe-a20a-c025e52cdf46\",\n      \"parameters\": {\n        \"sendTo\": \"={{ $json.config.emailing.sendTo }}\",\n        \"message\": \"=<p>Workflow <a href=\\\"{{ $json.workflow.url }}\\\">{{ $json.workflow.id }}</a> ({{ $json.workflow.name }})<br/>\\nhas triggered the error handling workflow <a href=\\\"{{ $json.errorHandlingWorkflow.url }}\\\">{{ $json.errorHandlingWorkflow.id }}</a> ({{ $json.errorHandlingWorkflow.name }})<br/>\\nwith the error details below.</p>\\n{{ $json.html }}\\n<h2>Error handling JSON (complete error handling data)</h2>\\n<pre>\\n{{ JSON.stringify({\\n  execution: $json.execution,\\n  trigger: $json.trigger,\\n  workflow: $json.workflow,\\n  errorHandlingWorkflow: $json.errorHandlingWorkflow,\\n}, null, 2) }}\\n</pre>\",\n        \"options\": {\n          \"senderName\": \"={{ $json.config.emailing.senderName }}\"\n        },\n        \"subject\": \"=Workflow {{ $json.workflow.id }} ({{ $json.workflow.name }}) {{ $json.workflow.isExecutionError ? \\\"execution error\\\" : \\\"trigger failure\\\" }}: {{ $json.execution.error.message || $json.trigger.error.message }}\"\n      },\n      \"credentials\": {\n        \"gmailOAuth2\": {\n          \"id\": \"DsQxovsVtYdErSwk\",\n          \"name\": \"Gmail m42g@g\"\n        }\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"2a3fd36f-a04b-4b43-bc5a-ac9d18adea82\",\n      \"name\": \"Merge\",\n      \"type\": \"n8n-nodes-base.merge\",\n      \"position\": [\n        1160,\n        160\n      ],\n      \"parameters\": {\n        \"mode\": \"combine\",\n        \"options\": {},\n        \"combineBy\": \"combineByPosition\"\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"b93cf843-42a2-4f64-873a-afdef2451934\",\n      \"name\": \"Config\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        120,\n        180\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"dotNotation\": true\n        },\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"53ac5417-db98-41e5-bc6d-acb6dd1fec42\",\n              \"name\": \"config.appUrl\",\n              \"type\": \"string\",\n              \"value\": \"https://YourAccountName.app.n8n.cloud/\"\n            },\n            {\n              \"id\": \"0f85c65a-80bb-4977-90b9-1b4e741b5f70\",\n              \"name\": \"config.emailing.sendTo\",\n              \"type\": \"string\",\n              \"value\": \"recipient@gmail.com\"\n            },\n            {\n              \"id\": \"138c091f-7cd4-453a-9c75-5d193b617a39\",\n              \"name\": \"config.emailing.senderName\",\n              \"type\": \"string\",\n              \"value\": \"Marvin the Yeoman Warder\"\n            }\n          ]\n        },\n        \"includeOtherFields\": true\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"5da22c60-fa54-4ddf-add8-f2b26610ef92\",\n      \"name\": \"Constants\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        280,\n        180\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"dotNotation\": true\n        },\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"d69f8081-b58c-4283-a424-a2804c51258a\",\n              \"name\": \"workflow.url\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.config.appUrl + \\\"workflow/\\\" + $json.workflow.id }}\"\n            },\n            {\n              \"id\": \"735040f7-8f6e-4bda-a1be-e7784132ead8\",\n              \"name\": \"workflow.isExecutionError\",\n              \"type\": \"boolean\",\n              \"value\": \"={{ Boolean($json.execution) }}\"\n            },\n            {\n              \"id\": \"9206cdcc-4387-47e9-902e-f7d6b1f6893f\",\n              \"name\": \"errorHandlingWorkflow.id\",\n              \"type\": \"string\",\n              \"value\": \"={{ $workflow.id }}\"\n            },\n            {\n              \"id\": \"21de1fda-f4e4-4aef-afee-e3d7e6635f42\",\n              \"name\": \"errorHandlingWorkflow.name\",\n              \"type\": \"string\",\n              \"value\": \"={{ $workflow.name }}\"\n            },\n            {\n              \"id\": \"651ff8f3-be7b-4990-8248-38383f6d5f6a\",\n              \"name\": \"errorHandlingWorkflow.url\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.config.appUrl + \\\"workflow/\\\" + $workflow.id }}\"\n            }\n          ]\n        },\n        \"includeOtherFields\": true\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"a3e45087-e799-4b1b-b420-8d106bdd6daf\",\n      \"name\": \"If\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        460,\n        40\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"a757d78d-799b-401b-8c01-3103fddfe757\",\n              \"operator\": {\n                \"type\": \"boolean\",\n                \"operation\": \"true\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $json.workflow.isExecutionError }}\",\n              \"rightValue\": \"={{ true }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"249a330d-1e9f-412c-a067-c96fbbcd1e6f\",\n      \"name\": \"HTML for Execution Error\",\n      \"type\": \"n8n-nodes-base.html\",\n      \"position\": [\n        660,\n        -140\n      ],\n      \"parameters\": {\n        \"html\": \"<h2>Execution details</h2>\\n<p>See execution details at <a href=\\\"{{ $json.execution.url }}\\\">{{ $json.execution.url }}</a></p>\\n<p>Execution id: {{ $json.execution.id }}</p>\\n<p>retryOf: {{ $json.execution.retryOf }}</p>\\n<p>lastNodeExecuted: {{ $json.execution.lastNodeExecuted }}</p>\\n<p>mode: {{ $json.execution.mode }}</p>\\n<p>Message: {{ $json.execution.error.message }}</p>\\n<h3>Stack trace</h3>\\n<pre>\\n{{ $json.execution.error.stack }}\\n</pre>\"\n      },\n      \"typeVersion\": 1.2,\n      \"alwaysOutputData\": true\n    },\n    {\n      \"id\": \"cc9e2e40-7858-4d86-bfda-65b4ad9f6ada\",\n      \"name\": \"HTML for Trigger Error\",\n      \"type\": \"n8n-nodes-base.html\",\n      \"position\": [\n        660,\n        40\n      ],\n      \"parameters\": {\n        \"html\": \"<h2>Trigger failure details</h2>\\n<p>A trigger on main workflow has thrown an error.</p>\\n<h3>Mode</h3>\\n<p>{{ $json.trigger.mode }}</p>\\n<h3>Error</h3>\\n<p>Message: {{ $json.trigger.error.message }}</p>\\n<p>DateTime: {{ DateTime.fromMillis($json.trigger.error.timestamp) }}</p>\\n<p>Name: {{ $json.trigger.error.name }}</p>\\n<p>Description: {{ $json.trigger.error.description }}</p>\\n<p>Context:<br/>\\n<pre>{{ JSON.stringify($json.trigger.error.context, null, 2) }}</pre></p>\\n\\n<h3>Cause</h3>\\n<p>Message: {{ $json.trigger.error.cause.message }}</p>\\n<p>Name: {{ $json.trigger.error.cause.name }}</p>\\n<p>Code:{{ $json.trigger.error.cause.code }} </p>\\n<p>Status: {{ $json.trigger.error.cause.status }}</p>\\n<h3>Stack trace</h3>\\n<pre>\\n{{ $json.trigger.error.cause.stack }}\\n</pre>\"\n      },\n      \"typeVersion\": 1.2,\n      \"alwaysOutputData\": true\n    },\n    {\n      \"id\": \"865dc047-69fc-4409-888b-701468746945\",\n      \"name\": \"KeepEitherOfHTMLs\",\n      \"type\": \"n8n-nodes-base.merge\",\n      \"position\": [\n        900,\n        -40\n      ],\n      \"parameters\": {\n        \"mode\": \"combine\",\n        \"options\": {\n          \"includeUnpaired\": true\n        },\n        \"combineBy\": \"combineByPosition\"\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"4d975de4-b458-43ac-9bfd-d6ab8205dc9a\",\n      \"name\": \"Code\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        100,\n        480\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"e85a2fd7-eaff-4390-93ed-27c038aab890\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        60,\n        -40\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 220,\n        \"height\": 380,\n        \"content\": \"## 配置\\n\\n定义\\n- 您的n8n应用基础URL\\n- 通知接收邮箱\\n- 发送者名称\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"efedfd1a-8e4f-44cb-aa0b-e10608f2328d\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        60,\n        -1000\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 1060,\n        \"height\": 820,\n        \"content\": \"## 通过Gmail在流程错误时发送邮件（执行与触发级错误）\\n\\n该错误处理工作流会在流程出错时通过Gmail发送包含详细信息的邮件。\\n\\n它在https://n8n.io/workflows/696-send-email-via-gmail-on-workflow-error/基础上扩展了功能，新增了对触发级错误的支持。\\n\\n\\n---\\n\\n### 功能特点\\n- 同时接收主工作流触发阶段和执行阶段的错误通知\\n- 邮件主题包含失败工作流ID、名称、错误来源（执行/触发）及错误信息\\n- 正文包含失败工作流与错误处理工作流的超链接，以及执行/触发错误详情\\n- 正文还提供**`Error Trigger`**节点生成的机器可读增强版JSON错误描述\\n\\n本**错误处理工作流**可无限复用于多个主工作流\\n\\n\\n---\\n\\n### 配置说明\\n1. 复制本工作流到您的工作区（可选：移至主工作流所在项目下）\\n2. 在**错误处理工作流**设置中，配置**允许调用者**权限\\n3. 在**`Config`**节点填写应用URL、通知接收邮箱及发件人名称（便于收件箱过滤）\\n4. 在**`Gmail`**节点创建并选择凭据\\n5. 在**主工作流**设置的**错误工作流**字段中选择本流程（[配置指南...](https://docs.n8n.io/flow-logic/error-handling/#create-and-set-an-error-workflow)）\\n\\n\\n---\\n\\n### 相关资源\\n- [n8n错误触发器](https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.errortrigger/)文档\\n\\n\\n---\\n\\n### 作者信息\\n- 社区联系：[Olek](https://community.n8n.io/u/olek/summary) @ community.n8n.io\\n- 创作者主页：[Olek](https://n8n.io/creators/olek/) @ n8n创作者中心\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"98d42327-3d06-4fc0-a31c-64114ae5cfc2\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1300,\n        -40\n      ],\n      \"parameters\": {\n        \"height\": 380,\n        \"content\": \"## Gmail 账户凭证\\n在此设置您的 Gmail 账户凭证。\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"active\": false,\n  \"pinData\": {},\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"aef68c1b-3efa-4f48-97ba-23c686cb7683\",\n  \"connections\": {\n    \"If\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"HTML for Execution Error\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"HTML for Trigger Error\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Merge\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Gmail\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Config\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Constants\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Constants\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge\",\n            \"type\": \"main\",\n            \"index\": 1\n          },\n          {\n            \"node\": \"If\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Error Trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Config\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"KeepEitherOfHTMLs\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"HTML for Trigger Error\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"KeepEitherOfHTMLs\",\n            \"type\": \"main\",\n            \"index\": 1\n          }\n        ]\n      ]\n    },\n    \"HTML for Execution Error\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"KeepEitherOfHTMLs\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}