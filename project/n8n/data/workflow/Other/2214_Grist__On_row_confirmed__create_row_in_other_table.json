{
  "title": "Grist: On row confirmed, create row in other table",
  "url": "https://n8n.io/workflows/2214-grist-on-row-confirmed-create-row-in-other-table/",
  "category": "Other",
  "category_url": "https://n8n.io/workflows/categories/other/?sort=createdAt:desc",
  "author": "Manu",
  "publish_date": "Last update a year ago",
  "publish_date_absolute": "",
  "content": "",
  "workflow_json": "{\"meta\":{\"instanceId\":\"11cdc3de0458a725de3bc4f700573556888270388b4b36af8a7651aaafd542a8\"},\"nodes\":[{\"id\":\"93eba4f0-218d-47d3-a55f-09d490d5e0bb\",\"name\":\"Webhook\",\"type\":\"n8n-nodes-base.webhook\",\"position\":[100,320],\"webhookId\":\"03e24572-a381-455e-a5b8-ae697647f7d4\",\"parameters\":{\"path\":\"03e24572-a381-455e-a5b8-ae697647f7d4\",\"options\":{},\"httpMethod\":\"POST\"},\"typeVersion\":1.1},{\"id\":\"e2c8d43e-79f9-45a4-9d6d-37e8768e7f81\",\"name\":\"Create Row\",\"type\":\"n8n-nodes-base.grist\",\"position\":[940,240],\"parameters\":{\"docId\":\"\",\"tableId\":\"\",\"operation\":\"create\",\"fieldsToSend\":{\"properties\":[{\"fieldId\":\"Source\",\"fieldValue\":\"={{ $json.body[0].id }}\"}]}},\"credentials\":{\"gristApi\":{\"id\":\"2\",\"name\":\"Grist\"}},\"typeVersion\":1},{\"id\":\"1e6e741e-2890-4e08-a97a-efae1812d507\",\"name\":\"Confirmed?\",\"type\":\"n8n-nodes-base.if\",\"position\":[300,320],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"df1c1dba-dc96-42e9-86ee-8ccd4c82b048\",\"operator\":{\"type\":\"boolean\",\"operation\":\"true\",\"singleValue\":true},\"leftValue\":\"={{ $json.body[0].Confirmed }}\",\"rightValue\":\"\"}]}},\"notesInFlow\":true,\"typeVersion\":2},{\"id\":\"c6b1b482-6121-4484-b524-bc3e7e175fe8\",\"name\":\"get existing\",\"type\":\"n8n-nodes-base.grist\",\"position\":[560,160],\"parameters\":{\"docId\":\"\",\"tableId\":\"\",\"additionalOptions\":{\"filter\":{\"filterProperties\":[{\"field\":\"Source\",\"values\":\"={{ $json.body[0].id }}\"}]}}},\"credentials\":{\"gristApi\":{\"id\":\"2\",\"name\":\"Grist\"}},\"typeVersion\":1,\"alwaysOutputData\":true},{\"id\":\"a52e000c-73ef-4f2d-811d-cbcaf45e2b75\",\"name\":\"has existing?\",\"type\":\"n8n-nodes-base.if\",\"position\":[700,160],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"6f08b500-956e-493c-abbe-845b5352110c\",\"operator\":{\"type\":\"object\",\"operation\":\"notEmpty\",\"singleValue\":true},\"leftValue\":\"={{ $json }}\",\"rightValue\":\"\"}]}},\"typeVersion\":2},{\"id\":\"fe609754-3dd6-4bbd-932a-a30f7d100911\",\"name\":\"Confirmation-based\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[460,420],\"parameters\":{\"width\":346.820338983051,\"height\":144.13559322033893,\"content\":\"## Confirmation-based\\nIn the source table there is a boolean column \\\"Confirmed\\\" that will trigger the transfer.\\nThis way there is a manual check involved & it's a conscious step to trigger the workflow.\"},\"typeVersion\":1},{\"id\":\"edb074f6-b264-45ec-87e2-cf91063ca63b\",\"name\":\"Runs once\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[900,60],\"parameters\":{\"width\":253.74915254237288,\"height\":139.9050847457627,\"content\":\"## Runs once\\nIf the destination table already contains an entry, **we will not re-create/update** it (as it might've already been changed manually)\\n\"},\"typeVersion\":1}],\"pinData\":{\"Webhook\":[{\"body\":[{\"id\":2,\"Datum\":1712275200,\"Confirmed\":true,\"manualSort\":2}],\"query\":{},\"params\":{},\"headers\":{\"host\":\"wh.n8n.zt.ax\",\"accept\":\"*/*\",\"x-real-ip\":\"52.2.246.35\",\"user-agent\":\"node-fetch/1.0 (+https://github.com/bitinn/node-fetch)\",\"content-type\":\"application/json\",\"content-length\":\"1097\",\"accept-encoding\":\"gzip,deflate\",\"x-forwarded-for\":\"52.2.246.35\",\"x-forwarded-host\":\"wh.n8n.zt.ax\",\"x-forwarded-port\":\"443\",\"x-forwarded-proto\":\"https\",\"x-forwarded-server\":\"5d1c8421e216\"}}]},\"connections\":{\"Webhook\":{\"main\":[[{\"node\":\"Confirmed?\",\"type\":\"main\",\"index\":0}]]},\"Confirmed?\":{\"main\":[[{\"node\":\"get existing\",\"type\":\"main\",\"index\":0}]]},\"get existing\":{\"main\":[[{\"node\":\"has existing?\",\"type\":\"main\",\"index\":0}]]},\"has existing?\":{\"main\":[null,[{\"node\":\"Create Row\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "In Grist, when I mark a row as confirmed (via a toggle):  \n![image.png](https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/image_bebf08a4c8.png)\n\na webhook is set up to notify n8n, and this workflow will create derived records in the destination table.\n\n### Design decisions\n\n#### Confirmation-based\n\nIn the source table **there is a boolean column \"Confirmed\" that will trigger the transfer**.  \nThis way there is a manual check involved & it's a conscious step to trigger the workflow.\n\n#### Runs once\n\nIf the destination table already contains an entry, **we will not re-create/update** it (as it might've already been changed manually)\n\n### Setup\n\n  1. Create a boolean column `Confirmed` in source table\n  2. **Add a webhook** in [Grist Settings](https://support.getgrist.com/newsletters/2023-05/#webhooks)\n  3. Add grist **API credentials** in n8n\n  4. Set **document ID** & source **table ID/Name** in the '**get existing** ' node\n  5. Set **docID** , the destination **table ID/Name** \\- and the **columns & values** you want in the **Create Row** node\n\n\n",
  "readme_html": "<!--[--><div data-v-50766329=\"\"><p>In Grist, when I mark a row as confirmed (via a toggle):<br>\n<img src=\"https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/image_bebf08a4c8.png\" alt=\"image.png\"></p>\n<p>a webhook is set up to notify n8n, and this workflow will create derived records in the destination table.</p>\n<h3>Design decisions</h3>\n<h4>Confirmation-based</h4>\n<p>In the source table <strong>there is a boolean column \"Confirmed\" that will trigger the transfer</strong>.<br>\nThis way there is a manual check involved &amp; it's a conscious step to trigger the workflow.</p>\n<h4>Runs once</h4>\n<p>If the destination table already contains an entry, <strong>we will not re-create/update</strong> it (as it might've already been changed manually)</p>\n<h3>Setup</h3>\n<ol>\n<li>Create a boolean column <code>Confirmed</code> in source table</li>\n<li><strong>Add a webhook</strong> in <a href=\"https://support.getgrist.com/newsletters/2023-05/#webhooks\" rel=\"ugc nofollow\" target=\"_blank\">Grist Settings</a></li>\n<li>Add grist <strong>API credentials</strong> in n8n</li>\n<li>Set <strong>document ID</strong> &amp; source <strong>table ID/Name</strong> in the '<strong>get existing</strong>' node</li>\n<li>Set <strong>docID</strong>, the destination <strong>table ID/Name</strong> - and the <strong>columns &amp; values</strong> you want in the <strong>Create Row</strong> node</li>\n</ol>\n</div><!--]-->"
}