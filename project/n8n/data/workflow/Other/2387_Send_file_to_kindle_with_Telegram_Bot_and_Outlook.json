{
  "title": "Send file to kindle with Telegram Bot and Outlook",
  "url": "https://n8n.io/workflows/2387-send-file-to-kindle-with-telegram-bot-and-outlook/",
  "category": "Other",
  "category_url": "https://n8n.io/workflows/categories/other/?sort=createdAt:desc",
  "author": "CreativeCreature",
  "publish_date": "Last update 8 months ago",
  "publish_date_absolute": "2024-09-22",
  "content": "",
  "workflow_json": "{\"id\":\"okMME97B70fXzK5U\",\"meta\":{\"instanceId\":\"2ed3d505bdd5b40b1b0ebc27913bd00ac94bca7476c7375336a42d5c4724f977\",\"templateCredsSetupCompleted\":true},\"name\":\"send file to kindle through telegram bot\",\"tags\":[],\"nodes\":[{\"id\":\"6e581437-28dc-4573-88f2-ce44ec497819\",\"name\":\"receive file message from telegram bot\",\"type\":\"n8n-nodes-base.telegramTrigger\",\"position\":[460,520],\"webhookId\":\"5d8d9b97-672d-461a-83c5-1665136494dd\",\"parameters\":{\"updates\":[\"message\"],\"additionalFields\":{\"download\":true}},\"typeVersion\":1.1},{\"id\":\"6eb48c62-69a9-4bd2-a6ab-cffb5cde03df\",\"name\":\"check if there is a file in the message\",\"type\":\"n8n-nodes-base.if\",\"position\":[680,520],\"parameters\":{\"options\":{\"ignoreCase\":false},\"conditions\":{\"options\":{\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"4ad69b1f-c19f-436d-8af3-203722f4dd4c\",\"operator\":{\"type\":\"object\",\"operation\":\"exists\",\"singleValue\":true},\"leftValue\":\"={{ $json.message.document }}\",\"rightValue\":\"\"}]}},\"typeVersion\":2,\"alwaysOutputData\":false},{\"id\":\"5dec7f0b-e650-4249-a5fb-e31cebda8e81\",\"name\":\"reply to warn that file is missing\",\"type\":\"n8n-nodes-base.telegram\",\"position\":[900,720],\"parameters\":{\"text\":\"There is no file in message.Please check.\",\"chatId\":\"={{ $('receive file message from telegram bot').item.json.message.chat.id }}\",\"additionalFields\":{\"reply_to_message_id\":\"={{ $('receive file message from telegram bot').item.json.message.message_id }}\"}},\"typeVersion\":1.1},{\"id\":\"79f49881-6cb0-4207-8143-11f021e71083\",\"name\":\"rename file to as attachment out email\",\"type\":\"n8n-nodes-base.code\",\"position\":[900,320],\"parameters\":{\"jsCode\":\"// Loop over input items and add a new field called 'myNewField' to the JSON of each one\\nfor (const item of $input.all()) {\\n  item.binary.data.fileName = item.json.message.document.file_name;\\n}\\n\\nreturn $input.all();\"},\"typeVersion\":2},{\"id\":\"059babdc-eb35-416a-9ff4-31a34bd6a4f9\",\"name\":\"send email with the file as attchament to kindle\",\"type\":\"n8n-nodes-base.microsoftOutlook\",\"position\":[1160,320],\"parameters\":{\"subject\":\"book from telegram bot\",\"bodyContent\":\"=This is a book named  {{ $json.message.document.file_name }} from telegram bot.\",\"toRecipients\":\"hulb.kindle11@kindle.com\",\"additionalFields\":{\"attachments\":{\"attachments\":[{\"binaryPropertyName\":\"data\"}]}}},\"notesInFlow\":false,\"typeVersion\":2},{\"id\":\"8c927ee3-5b65-4aeb-861c-fe459db1e4c9\",\"name\":\"reply to telegram chat that the file has been sent successfully\",\"type\":\"n8n-nodes-base.telegram\",\"position\":[1380,320],\"parameters\":{\"text\":\"file  is sent to kindle successfully!\",\"chatId\":\"={{ $('receive file message from telegram bot').item.json.message.chat.id }}\",\"additionalFields\":{\"reply_to_message_id\":\"={{ $('receive file message from telegram bot').item.json.message.message_id }}\"}},\"typeVersion\":1.1},{\"id\":\"ceba7af1-b23c-426e-a1e7-5fd996021ffe\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[360,200],\"parameters\":{\"width\":252,\"height\":229,\"content\":\"## preparations\\n1. create a new telegram bot through bot father and save the credential on n8n\\n2. save your email credential on n8n\\n3. setup your kindle on amazon to allow your email address send to your kindle.\"},\"typeVersion\":1},{\"id\":\"989939ec-b7ea-4903-b375-6f0fc6c4cee1\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1080,140],\"parameters\":{\"content\":\"## email setup\\nmake sure you have allowed your email address as the sender to kindle on amazon. And use the kindle address as the email receiver\"},\"typeVersion\":1}],\"active\":false,\"pinData\":{},\"settings\":{\"callerPolicy\":\"workflowsFromSameOwner\",\"errorWorkflow\":\"XNlgpSG3BUF32PIk\",\"executionOrder\":\"v1\",\"saveManualExecutions\":true},\"versionId\":\"624798e9-5f62-4c14-9bf3-5ad92b8713e6\",\"connections\":{\"receive file message from telegram bot\":{\"main\":[[{\"node\":\"check if there is a file in the message\",\"type\":\"main\",\"index\":0}]]},\"rename file to as attachment out email\":{\"main\":[[{\"node\":\"send email with the file as attchament to kindle\",\"type\":\"main\",\"index\":0}]]},\"check if there is a file in the message\":{\"main\":[[{\"node\":\"rename file to as attachment out email\",\"type\":\"main\",\"index\":0}],[{\"node\":\"reply to warn that file is missing\",\"type\":\"main\",\"index\":0}]]},\"send email with the file as attchament to kindle\":{\"main\":[[{\"node\":\"reply to telegram chat that the file has been sent successfully\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "## Workflow Overview\n\nThis workflow automates the process of forwarding e-book files to a Kindle device using a Telegram bot and Outlook email.\n\n## Setup Steps:\n\n  1. **Telegram Bot Setup** :  \nCreate a Telegram bot via BotFather and configure its credentials in the workflow.\n\n  2. **Outlook Email Configuration** :  \nSet up your Outlook email credentials. (Currently, only Outlook is supported, but you can modify the workflow to support other email providers.)\n\n  3. **Amazon Kindle Email Setup** :  \nFind your Kindle device's email address from your Amazon account. This will be the recipient address for the e-books.\n\n  4. **Allow Email Sending to Kindle** :  \nEnsure your Amazon account is configured to allow emails from your Outlook address to send files to your Kindle.\n\n\n\n\n## Workflow Explanation:\n\n  * The workflow begins with a **Telegram bot trigger** node that listens for new chat messages.\n\n  * When a new message is received, the workflow checks if the message contains a file attachment.\n\n    * If no file is detected, the bot will send a warning reply to the user in the chat.\n  * If a file is found, it will be renamed to ensure it appears correctly on the Kindle device when sent.\n\n  * The workflow then composes an email with the file attached and sends it to the Kindle's receiving address.\n\n    * If the email is sent successfully, the bot will notify the user with a success message in the chat.\n  * Only Amazon-supported file types will be accepted by Kindle.\n\n    * If sending fails, you will receive a notification email from Amazon in your Outlook inbox.\n    * In case of delivery issues, retry sending the file as network issues may occasionally interfere with the process.\n\n\n",
  "readme_html": "<!--[--><div data-v-50766329=\"\"><h2>Workflow Overview</h2>\n<p>This workflow automates the process of forwarding e-book files to a Kindle device using a Telegram bot and Outlook email.</p>\n<h2>Setup Steps:</h2>\n<ol>\n<li>\n<p><strong>Telegram Bot Setup</strong>:<br>\nCreate a Telegram bot via BotFather and configure its credentials in the workflow.</p>\n</li>\n<li>\n<p><strong>Outlook Email Configuration</strong>:<br>\nSet up your Outlook email credentials. (Currently, only Outlook is supported, but you can modify the workflow to support other email providers.)</p>\n</li>\n<li>\n<p><strong>Amazon Kindle Email Setup</strong>:<br>\nFind your Kindle device's email address from your Amazon account. This will be the recipient address for the e-books.</p>\n</li>\n<li>\n<p><strong>Allow Email Sending to Kindle</strong>:<br>\nEnsure your Amazon account is configured to allow emails from your Outlook address to send files to your Kindle.</p>\n</li>\n</ol>\n<h2>Workflow Explanation:</h2>\n<ul>\n<li>\n<p>The workflow begins with a <strong>Telegram bot trigger</strong> node that listens for new chat messages.</p>\n</li>\n<li>\n<p>When a new message is received, the workflow checks if the message contains a file attachment.</p>\n<ul>\n<li>If no file is detected, the bot will send a warning reply to the user in the chat.</li>\n</ul>\n</li>\n<li>\n<p>If a file is found, it will be renamed to ensure it appears correctly on the Kindle device when sent.</p>\n</li>\n<li>\n<p>The workflow then composes an email with the file attached and sends it to the Kindle's receiving address.</p>\n<ul>\n<li>If the email is sent successfully, the bot will notify the user with a success message in the chat.</li>\n</ul>\n</li>\n<li>\n<p>Only Amazon-supported file types will be accepted by Kindle.</p>\n<ul>\n<li>If sending fails, you will receive a notification email from Amazon in your Outlook inbox.</li>\n<li>In case of delivery issues, retry sending the file as network issues may occasionally interfere with the process.</li>\n</ul>\n</li>\n</ul>\n</div><!--]-->",
  "readme_zh": "## 工作流程概述\n\n本流程通过Telegram机器人和Outlook邮箱实现电子书文件自动推送至Kindle设备的功能。\n\n## 配置步骤：\n\n  1. **Telegram机器人设置**：  \n通过BotFather创建Telegram机器人，并在流程中配置其访问凭证。\n\n  2. **Outlook邮箱配置**：  \n设置您的Outlook邮箱账号信息（当前仅支持Outlook，但可修改流程适配其他邮箱服务商）。\n\n  3. **亚马逊Kindle邮箱设置**：  \n从亚马逊账户中获取您的Kindle设备专属邮箱地址，该地址将作为电子书接收方。\n\n  4. **配置Kindle接收权限**：  \n确保在亚马逊账户中已授权您的Outlook邮箱地址可向Kindle发送文件。\n\n## 流程说明：\n\n  * 流程始于**Telegram机器人触发器**节点，该节点持续监听聊天消息\n  \n  * 当收到新消息时，系统会检测是否包含文件附件\n  \n    * 若未检测到文件，机器人将在聊天界面向用户发送警告提示\n  * 检测到文件后，系统将重命名文件以确保发送至Kindle后能正确显示\n  \n  * 流程随后会创建包含附件的邮件，并发送至Kindle接收邮箱\n  \n    * 邮件发送成功后，机器人将在聊天界面向用户发送成功通知\n  * Kindle仅支持亚马逊规定的文件格式\n  \n    * 若发送失败，您的Outlook收件箱将收到亚马逊的系统通知邮件\n    * 如遇投递问题，可尝试重新发送文件（网络波动可能导致传输中断）",
  "title_zh": "通过Telegram机器人和Outlook发送文件至Kindle",
  "publish_date_zh": "最后更新于8个月前",
  "workflow_json_zh": "{\n  \"id\": \"okMME97B70fXzK5U\",\n  \"meta\": {\n    \"instanceId\": \"2ed3d505bdd5b40b1b0ebc27913bd00ac94bca7476c7375336a42d5c4724f977\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"name\": \"send file to kindle through telegram bot\",\n  \"tags\": [],\n  \"nodes\": [\n    {\n      \"id\": \"6e581437-28dc-4573-88f2-ce44ec497819\",\n      \"name\": \"receive file message from telegram bot\",\n      \"type\": \"n8n-nodes-base.telegramTrigger\",\n      \"position\": [\n        460,\n        520\n      ],\n      \"webhookId\": \"5d8d9b97-672d-461a-83c5-1665136494dd\",\n      \"parameters\": {\n        \"updates\": [\n          \"message\"\n        ],\n        \"additionalFields\": {\n          \"download\": true\n        }\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"6eb48c62-69a9-4bd2-a6ab-cffb5cde03df\",\n      \"name\": \"check if there is a file in the message\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        680,\n        520\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"ignoreCase\": false\n        },\n        \"conditions\": {\n          \"options\": {\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"4ad69b1f-c19f-436d-8af3-203722f4dd4c\",\n              \"operator\": {\n                \"type\": \"object\",\n                \"operation\": \"exists\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $json.message.document }}\",\n              \"rightValue\": \"\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2,\n      \"alwaysOutputData\": false\n    },\n    {\n      \"id\": \"5dec7f0b-e650-4249-a5fb-e31cebda8e81\",\n      \"name\": \"reply to warn that file is missing\",\n      \"type\": \"n8n-nodes-base.telegram\",\n      \"position\": [\n        900,\n        720\n      ],\n      \"parameters\": {\n        \"text\": \"There is no file in message.Please check.\",\n        \"chatId\": \"={{ $('receive file message from telegram bot').item.json.message.chat.id }}\",\n        \"additionalFields\": {\n          \"reply_to_message_id\": \"={{ $('receive file message from telegram bot').item.json.message.message_id }}\"\n        }\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"79f49881-6cb0-4207-8143-11f021e71083\",\n      \"name\": \"rename file to as attachment out email\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        900,\n        320\n      ],\n      \"parameters\": {\n        \"jsCode\": \"// Loop over input items and add a new field called 'myNewField' to the JSON of each one\\nfor (const item of $input.all()) {\\n  item.binary.data.fileName = item.json.message.document.file_name;\\n}\\n\\nreturn $input.all();\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"059babdc-eb35-416a-9ff4-31a34bd6a4f9\",\n      \"name\": \"send email with the file as attchament to kindle\",\n      \"type\": \"n8n-nodes-base.microsoftOutlook\",\n      \"position\": [\n        1160,\n        320\n      ],\n      \"parameters\": {\n        \"subject\": \"book from telegram bot\",\n        \"bodyContent\": \"=This is a book named  {{ $json.message.document.file_name }} from telegram bot.\",\n        \"toRecipients\": \"hulb.kindle11@kindle.com\",\n        \"additionalFields\": {\n          \"attachments\": {\n            \"attachments\": [\n              {\n                \"binaryPropertyName\": \"data\"\n              }\n            ]\n          }\n        }\n      },\n      \"notesInFlow\": false,\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"8c927ee3-5b65-4aeb-861c-fe459db1e4c9\",\n      \"name\": \"reply to telegram chat that the file has been sent successfully\",\n      \"type\": \"n8n-nodes-base.telegram\",\n      \"position\": [\n        1380,\n        320\n      ],\n      \"parameters\": {\n        \"text\": \"file  is sent to kindle successfully!\",\n        \"chatId\": \"={{ $('receive file message from telegram bot').item.json.message.chat.id }}\",\n        \"additionalFields\": {\n          \"reply_to_message_id\": \"={{ $('receive file message from telegram bot').item.json.message.message_id }}\"\n        }\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"ceba7af1-b23c-426e-a1e7-5fd996021ffe\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        360,\n        200\n      ],\n      \"parameters\": {\n        \"width\": 252,\n        \"height\": 229,\n        \"content\": \"## 准备工作\\n1. 通过Bot Father创建新的Telegram机器人，并将凭证保存在n8n中\\n2. 在n8n中保存您的邮箱凭证\\n3. 在亚马逊上设置您的Kindle设备，允许通过您的邮箱地址向Kindle发送内容\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"989939ec-b7ea-4903-b375-6f0fc6c4cee1\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1080,\n        140\n      ],\n      \"parameters\": {\n        \"content\": \"## 邮箱设置\\n请确保您已在亚马逊上授权您的邮箱地址作为向Kindle发送邮件的发件人。同时，请使用Kindle邮箱地址作为邮件接收方。\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"active\": false,\n  \"pinData\": {},\n  \"settings\": {\n    \"callerPolicy\": \"workflowsFromSameOwner\",\n    \"errorWorkflow\": \"XNlgpSG3BUF32PIk\",\n    \"executionOrder\": \"v1\",\n    \"saveManualExecutions\": true\n  },\n  \"versionId\": \"624798e9-5f62-4c14-9bf3-5ad92b8713e6\",\n  \"connections\": {\n    \"receive file message from telegram bot\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"check if there is a file in the message\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"rename file to as attachment out email\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"send email with the file as attchament to kindle\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"check if there is a file in the message\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"rename file to as attachment out email\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"reply to warn that file is missing\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"send email with the file as attchament to kindle\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"reply to telegram chat that the file has been sent successfully\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}