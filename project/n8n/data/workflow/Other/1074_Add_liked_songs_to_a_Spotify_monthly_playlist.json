{
  "title": "Add liked songs to a Spotify monthly playlist",
  "url": "https://n8n.io/workflows/1074-add-liked-songs-to-a-spotify-monthly-playlist/",
  "category": "Other",
  "category_url": "https://n8n.io/workflows/categories/other/?sort=createdAt:desc",
  "author": "Lucas",
  "publish_date": "Last update 10 months ago",
  "publish_date_absolute": "2024-07-23",
  "content": "",
  "workflow_json": "{\"meta\":{\"instanceId\":\"0c99324b4b0921a9febd4737c606882881f3ca11d9b1d7e22b0dad4784eb24c7\"},\"nodes\":[{\"id\":\"f418ae01-01ea-4794-8903-d5709a29c735\",\"name\":\"Get current date\",\"type\":\"n8n-nodes-base.code\",\"position\":[240,2460],\"parameters\":{\"jsCode\":\"const monthNames = [\\n  'January',\\n  'February',\\n  'March',\\n  'April',\\n  'May',\\n  'June',\\n  'July',\\n  'August',\\n  'September',\\n  'October',\\n  'November',\\n  'December',\\n]\\n\\nconst date = new Date()\\nconst year = date.getFullYear()\\nconst month = date.getMonth()\\n\\nlet currentDate = {\\n  month: month,\\n  year: year,\\n  text: `${monthNames[month]} '${year.toString().slice(-2)}`\\n}\\n\\nitems[0].json.currentDate = currentDate\\n\\nreturn items\\n\\n// Month > Number e.g. July = 6, December = 11\\n// Year > Text\\n// Text > Playlist name\\n\\n// let currentDate = {\\n//   month: 8, \\n//   year: '2024',\\n//   text: `September '23`\\n// }\\n\\n// items[0].json.currentDate = currentDate\\n\\n// return items\\n\\n\"},\"typeVersion\":1},{\"id\":\"855e493a-a232-45ef-8fdd-4a8225065c95\",\"name\":\"Sticky Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[460,2580],\"parameters\":{\"width\":1290.936043660723,\"height\":407.6508589002549,\"content\":\"## Check if the song is present in the database\"},\"typeVersion\":1},{\"id\":\"672ef06c-b812-41c8-8501-cde8b61a4aef\",\"name\":\"Get last 10 liked tracks\",\"type\":\"n8n-nodes-base.spotify\",\"position\":[500,2680],\"parameters\":{\"limit\":10,\"resource\":\"library\"},\"credentials\":{\"spotifyOAuth2Api\":{\"id\":\"zQrMRwwU6DLh4W77\",\"name\":\"Spotify account\"}},\"typeVersion\":1},{\"id\":\"da13c571-6af4-49bf-b8ff-2d54245f6d3e\",\"name\":\"Check if track is saved\",\"type\":\"n8n-nodes-base.nocoDb\",\"position\":[940,2780],\"parameters\":{\"table\":\"m0dm2y304t7vmuk\",\"options\":{\"where\":\"=(uri,eq,{{ $json.track.uri }})\",\"fields\":[\"uri\"]},\"operation\":\"getAll\",\"projectId\":\"pepq760y5lwt5tm\",\"returnAll\":true,\"authentication\":\"nocoDbApiToken\"},\"credentials\":{\"nocoDbApiToken\":{\"id\":\"9uSbSrDz8EL2OIL7\",\"name\":\"NocoDB Token account\"}},\"typeVersion\":3,\"alwaysOutputData\":true},{\"id\":\"9144cda9-f18f-46d9-be2d-9fca4b192dbb\",\"name\":\"Is not saved\",\"type\":\"n8n-nodes-base.if\",\"position\":[1160,2780],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"dbb259d9-e2ec-4a7b-b375-601346dc2571\",\"operator\":{\"type\":\"object\",\"operation\":\"empty\",\"singleValue\":true},\"leftValue\":\"={{ $json }}\",\"rightValue\":\"\"}]}},\"typeVersion\":2},{\"id\":\"66b430e2-f46c-43b2-84e7-35c85d2b4403\",\"name\":\"Create song entry\",\"type\":\"n8n-nodes-base.nocoDb\",\"position\":[1380,2700],\"parameters\":{\"table\":\"m0dm2y304t7vmuk\",\"fieldsUi\":{\"fieldValues\":[{\"fieldName\":\"uri\",\"fieldValue\":\"={{ $('For each tracks in liked song').item.json.track.uri }}\"},{\"fieldName\":\"added_at\",\"fieldValue\":\"={{ $('For each tracks in liked song').item.json.added_at }}\"},{\"fieldName\":\"playlistName\",\"fieldValue\":\"={{ $('Get current date').item.json.currentDate.text }}\"}]},\"operation\":\"create\",\"projectId\":\"pepq760y5lwt5tm\",\"authentication\":\"nocoDbApiToken\"},\"credentials\":{\"nocoDbApiToken\":{\"id\":\"9uSbSrDz8EL2OIL7\",\"name\":\"NocoDB Token account\"}},\"typeVersion\":3},{\"id\":\"9bd883ea-2e87-45aa-b8a0-b361ba7c5d9f\",\"name\":\"Get all user playlist\",\"type\":\"n8n-nodes-base.spotify\",\"position\":[500,2220],\"parameters\":{\"resource\":\"playlist\",\"operation\":\"getUserPlaylists\",\"returnAll\":true},\"credentials\":{\"spotifyOAuth2Api\":{\"id\":\"zQrMRwwU6DLh4W77\",\"name\":\"Spotify account\"}},\"typeVersion\":1},{\"id\":\"3a0dad98-4571-4fb7-b366-0060d35b65fe\",\"name\":\"Sticky Note4\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[460,2080],\"parameters\":{\"width\":1481.5336029736159,\"height\":416.7665808180022,\"content\":\"## Check if the playlist present in the database\"},\"typeVersion\":1},{\"id\":\"e793b97c-cc29-47b0-8aa7-015fa631bc37\",\"name\":\"Get monthly playlist\",\"type\":\"n8n-nodes-base.filter\",\"position\":[720,2220],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"56173299-d774-4cb4-b26f-4dca294dda1d\",\"operator\":{\"name\":\"filter.operator.equals\",\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"={{ $json.name }}\",\"rightValue\":\"={{ $('Get current date').item.json.currentDate.text }}\"}]}},\"typeVersion\":2,\"alwaysOutputData\":true},{\"id\":\"502ea9e2-7f03-4a8a-860e-90d63e42ee33\",\"name\":\"Get playlist in DB\",\"type\":\"n8n-nodes-base.nocoDb\",\"position\":[1160,2120],\"parameters\":{\"table\":\"mchan0xys9h7h7e\",\"options\":{\"where\":\"=(name,eq,{{ $('Get current date').item.json.currentDate.text }})\"},\"operation\":\"getAll\",\"projectId\":\"pepq760y5lwt5tm\",\"returnAll\":true,\"authentication\":\"nocoDbApiToken\"},\"credentials\":{\"nocoDbApiToken\":{\"id\":\"9uSbSrDz8EL2OIL7\",\"name\":\"NocoDB Token account\"}},\"typeVersion\":3,\"alwaysOutputData\":true},{\"id\":\"3d2bece0-8096-4ee1-a3b9-ae91b83f0957\",\"name\":\"Monthly playlist exist in Spotify ?\",\"type\":\"n8n-nodes-base.if\",\"position\":[940,2220],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"a2d9e3e0-a906-4ed9-9e23-166f781c86b1\",\"operator\":{\"type\":\"object\",\"operation\":\"notEmpty\",\"singleValue\":true},\"leftValue\":\"={{ $json }}\",\"rightValue\":\"\"}]}},\"typeVersion\":2},{\"id\":\"d983b940-2f8d-4823-aaaf-d1bfa4428b41\",\"name\":\"Playlist exist  in DB ?\",\"type\":\"n8n-nodes-base.if\",\"position\":[1380,2120],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"9485c9d4-ecdc-4d0e-a576-c7db5787c069\",\"operator\":{\"type\":\"object\",\"operation\":\"notEmpty\",\"singleValue\":true},\"leftValue\":\"={{ $json }}\",\"rightValue\":\"\"}]}},\"typeVersion\":2},{\"id\":\"c694ab19-bca7-4dd4-8d10-cf8a1adab341\",\"name\":\"Create playlist in Spotify\",\"type\":\"n8n-nodes-base.spotify\",\"position\":[1160,2320],\"parameters\":{\"name\":\"={{ $('Get current date').item.json.currentDate.text }}\",\"resource\":\"playlist\",\"operation\":\"create\",\"additionalFields\":{\"description\":\"Monthly playlist\"}},\"credentials\":{\"spotifyOAuth2Api\":{\"id\":\"zQrMRwwU6DLh4W77\",\"name\":\"Spotify account\"}},\"typeVersion\":1},{\"id\":\"dc9dc3b5-cef7-412b-b3f8-5ec011c2746d\",\"name\":\"Create playlist in DB1\",\"type\":\"n8n-nodes-base.nocoDb\",\"position\":[1380,2320],\"parameters\":{\"table\":\"mchan0xys9h7h7e\",\"fieldsUi\":{\"fieldValues\":[{\"fieldName\":\"uri\",\"fieldValue\":\"={{ $json.uri }}\"},{\"fieldName\":\"name\",\"fieldValue\":\"={{ $json.name }}\"},{\"fieldName\":\"description\",\"fieldValue\":\"={{ $json.description}}\"}]},\"operation\":\"create\",\"projectId\":\"pepq760y5lwt5tm\",\"authentication\":\"nocoDbApiToken\"},\"credentials\":{\"nocoDbApiToken\":{\"id\":\"9uSbSrDz8EL2OIL7\",\"name\":\"NocoDB Token account\"}},\"typeVersion\":3},{\"id\":\"0356c3a4-dc20-42b0-b069-045048768939\",\"name\":\"Create playlist in DB\",\"type\":\"n8n-nodes-base.nocoDb\",\"position\":[1600,2200],\"parameters\":{\"table\":\"mchan0xys9h7h7e\",\"fieldsUi\":{\"fieldValues\":[{\"fieldName\":\"uri\",\"fieldValue\":\"={{ $('Get monthly playlist').item.json.uri }}\"},{\"fieldName\":\"name\",\"fieldValue\":\"={{ $('Get monthly playlist').item.json.name }}\"},{\"fieldName\":\"description\",\"fieldValue\":\"={{ $('Get monthly playlist').item.json.description }}\"}]},\"operation\":\"create\",\"projectId\":\"pepq760y5lwt5tm\",\"authentication\":\"nocoDbApiToken\"},\"credentials\":{\"nocoDbApiToken\":{\"id\":\"9uSbSrDz8EL2OIL7\",\"name\":\"NocoDB Token account\"}},\"typeVersion\":3},{\"id\":\"e2c86f04-725c-4af7-b3c2-9c22e2dc64bf\",\"name\":\"Merge\",\"type\":\"n8n-nodes-base.merge\",\"position\":[2040,2460],\"parameters\":{\"mode\":\"chooseBranch\",\"output\":\"empty\"},\"typeVersion\":2.1},{\"id\":\"036e0d74-3383-44e9-991d-7e062b982b51\",\"name\":\"Clean op\",\"type\":\"n8n-nodes-base.noOp\",\"position\":[1820,2200],\"parameters\":{},\"typeVersion\":1},{\"id\":\"323c9746-f713-4a3d-9af5-9579ec767fca\",\"name\":\"Clean op2\",\"type\":\"n8n-nodes-base.noOp\",\"position\":[1600,2800],\"parameters\":{},\"typeVersion\":1},{\"id\":\"3b0be7ca-c47b-4524-b72a-c37f25c5e4d0\",\"name\":\"Get this month playlist in DB\",\"type\":\"n8n-nodes-base.nocoDb\",\"position\":[2260,2460],\"parameters\":{\"table\":\"mchan0xys9h7h7e\",\"options\":{\"where\":\"=(name,eq,{{ $('Get current date').item.json.currentDate.text }})\"},\"operation\":\"getAll\",\"projectId\":\"pepq760y5lwt5tm\",\"returnAll\":true,\"authentication\":\"nocoDbApiToken\"},\"credentials\":{\"nocoDbApiToken\":{\"id\":\"9uSbSrDz8EL2OIL7\",\"name\":\"NocoDB Token account\"}},\"typeVersion\":3},{\"id\":\"733077e4-c474-4c95-ba05-d0b2375475ad\",\"name\":\"Get this month tracks in DB\",\"type\":\"n8n-nodes-base.nocoDb\",\"position\":[2480,2460],\"parameters\":{\"table\":\"m0dm2y304t7vmuk\",\"options\":{\"where\":\"=(playlistName,eq,{{ $('Get current date').item.json.currentDate.text }})\"},\"operation\":\"getAll\",\"projectId\":\"pepq760y5lwt5tm\",\"returnAll\":true,\"authentication\":\"nocoDbApiToken\"},\"credentials\":{\"nocoDbApiToken\":{\"id\":\"9uSbSrDz8EL2OIL7\",\"name\":\"NocoDB Token account\"}},\"typeVersion\":3},{\"id\":\"6c8ef70f-542d-4454-9ae6-8f4e9778beb0\",\"name\":\"Add song to the playlist\",\"type\":\"n8n-nodes-base.spotify\",\"position\":[3580,2460],\"parameters\":{\"id\":\"={{ $('Get this month playlist in DB').item.json.uri }}\",\"trackID\":\"={{ $('For each monthly tracks in DB').item.json.uri }}\",\"resource\":\"playlist\",\"additionalFields\":{}},\"credentials\":{\"spotifyOAuth2Api\":{\"id\":\"zQrMRwwU6DLh4W77\",\"name\":\"Spotify account\"}},\"typeVersion\":1},{\"id\":\"034cd38d-4800-4f9c-9b67-453fdb2afa3c\",\"name\":\"For each tracks in liked song\",\"type\":\"n8n-nodes-base.splitInBatches\",\"position\":[720,2680],\"parameters\":{\"options\":{\"reset\":false}},\"typeVersion\":3},{\"id\":\"90ff5c0b-e842-437f-be85-a5938288c513\",\"name\":\"For each monthly tracks in DB\",\"type\":\"n8n-nodes-base.splitInBatches\",\"position\":[2700,2460],\"parameters\":{\"options\":{}},\"typeVersion\":3},{\"id\":\"decf36a4-fb8c-41eb-ae15-7ba36d621ad7\",\"name\":\"Get this month tracks in Spotify\",\"type\":\"n8n-nodes-base.spotify\",\"position\":[2920,2560],\"parameters\":{\"id\":\"={{ $('Get this month playlist in DB').item.json.uri }}\",\"resource\":\"playlist\",\"operation\":\"getTracks\",\"returnAll\":true},\"credentials\":{\"spotifyOAuth2Api\":{\"id\":\"zQrMRwwU6DLh4W77\",\"name\":\"Spotify account\"}},\"typeVersion\":1,\"alwaysOutputData\":true},{\"id\":\"d322a655-e80b-4277-87d9-93e927b2f372\",\"name\":\"Filter1\",\"type\":\"n8n-nodes-base.filter\",\"position\":[3140,2560],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"a11640e1-f22a-4ce9-abff-976efc57e1d3\",\"operator\":{\"name\":\"filter.operator.equals\",\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"={{ $('For each monthly tracks in DB').item.json.uri }}\",\"rightValue\":\"={{ $json.track.uri }}\"}]}},\"executeOnce\":false,\"typeVersion\":2,\"alwaysOutputData\":true},{\"id\":\"5027f98d-b973-405f-81cf-534df794325f\",\"name\":\"Song is not present in the playlist ?\",\"type\":\"n8n-nodes-base.if\",\"position\":[3360,2560],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"1beb843e-53da-48ce-9717-d7797232e4ae\",\"operator\":{\"type\":\"object\",\"operation\":\"empty\",\"singleValue\":true},\"leftValue\":\"={{ $json }}\",\"rightValue\":\"\"}]}},\"typeVersion\":2},{\"id\":\"cd2e3a28-24c1-47d7-ad30-c836e08ad40f\",\"name\":\"Clean op1\",\"type\":\"n8n-nodes-base.noOp\",\"position\":[3800,2560],\"parameters\":{},\"typeVersion\":1},{\"id\":\"56bbb0e9-3ee5-48e3-b0bf-48e8d026daa9\",\"name\":\"Sticky Note5\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[2220,2400],\"parameters\":{\"width\":1733.785946789966,\"height\":351.94195615011336,\"content\":\"## Check if the song is in the Spotify playlist. If not, add it.\"},\"typeVersion\":1},{\"id\":\"9834163b-0991-4910-bb4f-cf4557bfa0d5\",\"name\":\"Schedule Trigger\",\"type\":\"n8n-nodes-base.scheduleTrigger\",\"position\":[20,2460],\"parameters\":{\"rule\":{\"interval\":[{\"field\":\"minutes\"}]}},\"typeVersion\":1.2},{\"id\":\"72a3c48f-a759-4e0c-b7bb-9f69a5f4377e\",\"name\":\"End\",\"type\":\"n8n-nodes-base.noOp\",\"position\":[4100,2260],\"parameters\":{},\"typeVersion\":1}],\"pinData\":{},\"connections\":{\"Merge\":{\"main\":[[{\"node\":\"Get this month playlist in DB\",\"type\":\"main\",\"index\":0}]]},\"Filter1\":{\"main\":[[{\"node\":\"Song is not present in the playlist ?\",\"type\":\"main\",\"index\":0}]]},\"Clean op\":{\"main\":[[{\"node\":\"Merge\",\"type\":\"main\",\"index\":0}]]},\"Clean op1\":{\"main\":[[{\"node\":\"For each monthly tracks in DB\",\"type\":\"main\",\"index\":0}]]},\"Clean op2\":{\"main\":[[{\"node\":\"For each tracks in liked song\",\"type\":\"main\",\"index\":0}]]},\"Is not saved\":{\"main\":[[{\"node\":\"Create song entry\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Clean op2\",\"type\":\"main\",\"index\":0}]]},\"Get current date\":{\"main\":[[{\"node\":\"Get all user playlist\",\"type\":\"main\",\"index\":0},{\"node\":\"Get last 10 liked tracks\",\"type\":\"main\",\"index\":0}]]},\"Schedule Trigger\":{\"main\":[[{\"node\":\"Get current date\",\"type\":\"main\",\"index\":0}]]},\"Create song entry\":{\"main\":[[{\"node\":\"Clean op2\",\"type\":\"main\",\"index\":0}]]},\"Get playlist in DB\":{\"main\":[[{\"node\":\"Playlist exist  in DB ?\",\"type\":\"main\",\"index\":0}]]},\"Get monthly playlist\":{\"main\":[[{\"node\":\"Monthly playlist exist in Spotify ?\",\"type\":\"main\",\"index\":0}]]},\"Create playlist in DB\":{\"main\":[[{\"node\":\"Clean op\",\"type\":\"main\",\"index\":0}]]},\"Get all user playlist\":{\"main\":[[{\"node\":\"Get monthly playlist\",\"type\":\"main\",\"index\":0}]]},\"Create playlist in DB1\":{\"main\":[[{\"node\":\"Clean op\",\"type\":\"main\",\"index\":0}]]},\"Check if track is saved\":{\"main\":[[{\"node\":\"Is not saved\",\"type\":\"main\",\"index\":0}]]},\"Playlist exist  in DB ?\":{\"main\":[[{\"node\":\"Clean op\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Create playlist in DB\",\"type\":\"main\",\"index\":0}]]},\"Add song to the playlist\":{\"main\":[[{\"node\":\"Clean op1\",\"type\":\"main\",\"index\":0}]]},\"Get last 10 liked tracks\":{\"main\":[[{\"node\":\"For each tracks in liked song\",\"type\":\"main\",\"index\":0}]]},\"Create playlist in Spotify\":{\"main\":[[{\"node\":\"Create playlist in DB1\",\"type\":\"main\",\"index\":0}]]},\"Get this month tracks in DB\":{\"main\":[[{\"node\":\"For each monthly tracks in DB\",\"type\":\"main\",\"index\":0}]]},\"For each monthly tracks in DB\":{\"main\":[[{\"node\":\"End\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Get this month tracks in Spotify\",\"type\":\"main\",\"index\":0}]]},\"For each tracks in liked song\":{\"main\":[[{\"node\":\"Merge\",\"type\":\"main\",\"index\":1}],[{\"node\":\"Check if track is saved\",\"type\":\"main\",\"index\":0}]]},\"Get this month playlist in DB\":{\"main\":[[{\"node\":\"Get this month tracks in DB\",\"type\":\"main\",\"index\":0}]]},\"Get this month tracks in Spotify\":{\"main\":[[{\"node\":\"Filter1\",\"type\":\"main\",\"index\":0}]]},\"Monthly playlist exist in Spotify ?\":{\"main\":[[{\"node\":\"Get playlist in DB\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Create playlist in Spotify\",\"type\":\"main\",\"index\":0}]]},\"Song is not present in the playlist ?\":{\"main\":[[{\"node\":\"Add song to the playlist\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Clean op1\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "# 🎶 Add liked songs to a monthly playlist\n\n> This Workflow is a port of **Add saved songs to a monthly playlist** from IFTTT.\n\n![image.png](https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/image_ebf3fdc07c.png)\n\nWhen you like a song, the workflow will save this song in a monthly playlist.\n\nE.g.: It's June 2024, I liked a song. The workflow will save this song in a playlist called `June '24`. If this playlist does not exist, the workflow will create it for me.\n\n## ⚙ How it works\n\nEach 5 minutes, the workflow will start automatically. He will do 3 things :\n\n  1. Get the last 10 songs you saved in the \"Liked song\" playlist (by clicking on the heart in the app) and save them in a NocoDB table (of course, the workflow avoid to create duplicates).\n  2. Check if the monthly playlist is already created. Otherwise, the playlist is created. The created playlist is also saved in NocoDB to avoid any problems.\n  3. Check if the monthly playlist contains all the song liked this month by getting them from NocoDB. If they are not present, add them one by one in the playlist.\n\n\n\nYou may have a question regarding the need of NocoDB. Over the last few weeks/months, I've had duplication problems in my playlists and some playlists have been created twice because Spotify wasn't returning all the information but only partial information.  \nHaving the database means I don't have to rely on Spotify's data but on my own, which is accurate and represents reality.\n\n## 📝 Prerequisites\n\nYou need to have :\n\n  * Spotify API keys, which you can obtain by creating a Spotify application here: <https://developer.spotify.com/dashboard>.\n  * Create a NocoDB API token\n\n\n\n## 📚 Instructions\n\n  1. Follow the [instructions below](https://n8n.io/workflows/1074#instructions)\n  2. Create your Spotify API credential\n  3. Create your NocoDB credential\n  4. Populate all Spotify nodes with your credentials\n  5. Populate all Spotify nodes with your credentials\n  6. Enjoy !\n\n\n\nIf you need help, feel free to ping me on the N8N Discord server or send me a DM at \"LucasAlt\"\n\n## Show your support\n\n  * Share your workflow on X and mention @LucasCtrlAlt\n  * Consider buying me a coffee 😉\n\n\n\n[![yellowbutton.png](https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/yellow_button_0b0d2ee0e1.png)](https://www.buymeacoffee.com/lucasalt)\n",
  "readme_html": "<!--[--><div data-v-50766329=\"\"><h1>🎶 Add liked songs to a monthly playlist</h1>\n<blockquote>\n<p>This Workflow is a port of <strong>Add saved songs to a monthly playlist</strong> from IFTTT.</p>\n</blockquote>\n<p><img src=\"https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/image_ebf3fdc07c.png\" alt=\"image.png\"></p>\n<p>When you like a song, the workflow will save this song in a monthly playlist.</p>\n<p>E.g.: It's June 2024, I liked a song. The workflow will save this song in a playlist called <code>June '24</code>. If this playlist does not exist, the workflow will create it for me.</p>\n<h2>⚙ How it works</h2>\n<p>Each 5 minutes, the workflow will start automatically. He will do 3 things :</p>\n<ol>\n<li>Get the last 10 songs you saved in the \"Liked song\" playlist (by clicking on the heart in the app) and save them in a NocoDB table (of course, the workflow avoid to create duplicates).</li>\n<li>Check if the monthly playlist is already created. Otherwise, the playlist is created. The created playlist is also saved in NocoDB to avoid any problems.</li>\n<li>Check if the monthly playlist contains all the song liked this month by getting them from NocoDB. If they are not present, add them one by one in the playlist.</li>\n</ol>\n<p>You may have a question regarding the need of NocoDB. Over the last few weeks/months, I've had duplication problems in my playlists and some playlists have been created twice because Spotify wasn't returning all the information but only partial information.<br>\nHaving the database means I don't have to rely on Spotify's data but on my own, which is accurate and represents reality.</p>\n<h2>📝 Prerequisites</h2>\n<p>You need to have :</p>\n<ul>\n<li>Spotify API keys, which you can obtain by creating a Spotify application here: <a href=\"https://developer.spotify.com/dashboard\" rel=\"ugc nofollow\" target=\"_blank\">https://developer.spotify.com/dashboard</a>.</li>\n<li>Create a NocoDB API token</li>\n</ul>\n<h2>📚 Instructions</h2>\n<ol>\n<li>Follow the <a href=\"https://n8n.io/workflows/1074#instructions\" rel=\"ugc nofollow\" target=\"_blank\">instructions below</a></li>\n<li>Create your Spotify API credential</li>\n<li>Create your NocoDB credential</li>\n<li>Populate all Spotify nodes with your credentials</li>\n<li>Populate all Spotify nodes with your credentials</li>\n<li>Enjoy !</li>\n</ol>\n<p>If you need help, feel free to ping me on the N8N Discord server or send me a DM at \"LucasAlt\"</p>\n<h2>Show your support</h2>\n<ul>\n<li>Share your workflow on X and mention @LucasCtrlAlt</li>\n<li>Consider buying me a coffee 😉</li>\n</ul>\n<p><a href=\"https://www.buymeacoffee.com/lucasalt\" rel=\"ugc nofollow\" target=\"_blank\"><img src=\"https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/yellow_button_0b0d2ee0e1.png\" alt=\"yellowbutton.png\"></a></p>\n</div><!--]-->",
  "readme_zh": "# 🎶 将喜欢的歌曲添加到月度歌单\n\n> 此工作流移植自IFTTT的**将收藏歌曲添加到月度歌单**功能。\n\n![image.png](https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/image_ebf3fdc07c.png)\n\n当你喜欢一首歌曲时，该工作流会将此歌曲保存到月度歌单中。\n\n例如：现在是2024年6月，我喜欢了一首歌。工作流会将这首歌保存到名为`June '24`的歌单中。如果该歌单不存在，工作流会为我创建它。\n\n## ⚙ 工作原理\n\n每5分钟，工作流会自动启动。它会做3件事：\n\n1. 获取你最近在\"喜欢的歌曲\"歌单中保存的10首歌曲（通过点击应用中的心形按钮），并将它们保存到NocoDB表中（当然，工作流会避免重复创建）。\n2. 检查月度歌单是否已创建。如果未创建，则会创建该歌单。创建的歌单也会保存在NocoDB中以避免任何问题。\n3. 通过从NocoDB获取数据，检查月度歌单是否包含本月所有喜欢的歌曲。如果未包含，则逐一将它们添加到歌单中。\n\n你可能对NocoDB的必要性有疑问。在过去几周/几个月里，我遇到了歌单重复的问题，有些歌单被创建了两次，因为Spotify没有返回完整信息，只返回了部分信息。  \n拥有数据库意味着我不必依赖Spotify的数据，而是依赖我自己的数据，这些数据是准确的且反映实际情况。\n\n## 📝 先决条件\n\n你需要拥有：\n\n* Spotify API密钥，你可以通过在此处创建Spotify应用程序获取：<https://developer.spotify.com/dashboard>。\n* 创建一个NocoDB API令牌\n\n## 📚 使用说明\n\n1. 按照[以下说明](https://n8n.io/workflows/1074#instructions)操作\n2. 创建你的Spotify API凭证\n3. 创建你的NocoDB凭证\n4. 在所有Spotify节点中填入你的凭证\n5. 在所有Spotify节点中填入你的凭证\n6. 尽情享受吧！\n\n如果你需要帮助，随时可以在N8N Discord服务器上@我，或直接私信\"LucasAlt\"。\n\n## 支持我\n\n* 在X上分享你的工作流并@LucasCtrlAlt\n* 考虑请我喝杯咖啡 😉\n\n[![yellowbutton.png](https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/yellow_button_0b0d2ee0e1.png)](https://www.buymeacoffee.com/lucasalt)",
  "title_zh": "将喜欢的歌曲添加到Spotify月度歌单",
  "publish_date_zh": "最后更新于10个月前",
  "workflow_json_zh": "{\n  \"meta\": {\n    \"instanceId\": \"0c99324b4b0921a9febd4737c606882881f3ca11d9b1d7e22b0dad4784eb24c7\"\n  },\n  \"nodes\": [\n    {\n      \"id\": \"f418ae01-01ea-4794-8903-d5709a29c735\",\n      \"name\": \"Get current date\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        240,\n        2460\n      ],\n      \"parameters\": {\n        \"jsCode\": \"const monthNames = [\\n  'January',\\n  'February',\\n  'March',\\n  'April',\\n  'May',\\n  'June',\\n  'July',\\n  'August',\\n  'September',\\n  'October',\\n  'November',\\n  'December',\\n]\\n\\nconst date = new Date()\\nconst year = date.getFullYear()\\nconst month = date.getMonth()\\n\\nlet currentDate = {\\n  month: month,\\n  year: year,\\n  text: `${monthNames[month]} '${year.toString().slice(-2)}`\\n}\\n\\nitems[0].json.currentDate = currentDate\\n\\nreturn items\\n\\n// Month > Number e.g. July = 6, December = 11\\n// Year > Text\\n// Text > Playlist name\\n\\n// let currentDate = {\\n//   month: 8, \\n//   year: '2024',\\n//   text: `September '23`\\n// }\\n\\n// items[0].json.currentDate = currentDate\\n\\n// return items\\n\\n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"855e493a-a232-45ef-8fdd-4a8225065c95\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        460,\n        2580\n      ],\n      \"parameters\": {\n        \"width\": 1290.936043660723,\n        \"height\": 407.6508589002549,\n        \"content\": \"## 检查歌曲是否存在于数据库中\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"672ef06c-b812-41c8-8501-cde8b61a4aef\",\n      \"name\": \"Get last 10 liked tracks\",\n      \"type\": \"n8n-nodes-base.spotify\",\n      \"position\": [\n        500,\n        2680\n      ],\n      \"parameters\": {\n        \"limit\": 10,\n        \"resource\": \"library\"\n      },\n      \"credentials\": {\n        \"spotifyOAuth2Api\": {\n          \"id\": \"zQrMRwwU6DLh4W77\",\n          \"name\": \"Spotify account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"da13c571-6af4-49bf-b8ff-2d54245f6d3e\",\n      \"name\": \"Check if track is saved\",\n      \"type\": \"n8n-nodes-base.nocoDb\",\n      \"position\": [\n        940,\n        2780\n      ],\n      \"parameters\": {\n        \"table\": \"m0dm2y304t7vmuk\",\n        \"options\": {\n          \"where\": \"=(uri,eq,{{ $json.track.uri }})\",\n          \"fields\": [\n            \"uri\"\n          ]\n        },\n        \"operation\": \"getAll\",\n        \"projectId\": \"pepq760y5lwt5tm\",\n        \"returnAll\": true,\n        \"authentication\": \"nocoDbApiToken\"\n      },\n      \"credentials\": {\n        \"nocoDbApiToken\": {\n          \"id\": \"9uSbSrDz8EL2OIL7\",\n          \"name\": \"NocoDB Token account\"\n        }\n      },\n      \"typeVersion\": 3,\n      \"alwaysOutputData\": true\n    },\n    {\n      \"id\": \"9144cda9-f18f-46d9-be2d-9fca4b192dbb\",\n      \"name\": \"Is not saved\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        1160,\n        2780\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"dbb259d9-e2ec-4a7b-b375-601346dc2571\",\n              \"operator\": {\n                \"type\": \"object\",\n                \"operation\": \"empty\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $json }}\",\n              \"rightValue\": \"\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"66b430e2-f46c-43b2-84e7-35c85d2b4403\",\n      \"name\": \"Create song entry\",\n      \"type\": \"n8n-nodes-base.nocoDb\",\n      \"position\": [\n        1380,\n        2700\n      ],\n      \"parameters\": {\n        \"table\": \"m0dm2y304t7vmuk\",\n        \"fieldsUi\": {\n          \"fieldValues\": [\n            {\n              \"fieldName\": \"uri\",\n              \"fieldValue\": \"={{ $('For each tracks in liked song').item.json.track.uri }}\"\n            },\n            {\n              \"fieldName\": \"added_at\",\n              \"fieldValue\": \"={{ $('For each tracks in liked song').item.json.added_at }}\"\n            },\n            {\n              \"fieldName\": \"playlistName\",\n              \"fieldValue\": \"={{ $('Get current date').item.json.currentDate.text }}\"\n            }\n          ]\n        },\n        \"operation\": \"create\",\n        \"projectId\": \"pepq760y5lwt5tm\",\n        \"authentication\": \"nocoDbApiToken\"\n      },\n      \"credentials\": {\n        \"nocoDbApiToken\": {\n          \"id\": \"9uSbSrDz8EL2OIL7\",\n          \"name\": \"NocoDB Token account\"\n        }\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"9bd883ea-2e87-45aa-b8a0-b361ba7c5d9f\",\n      \"name\": \"Get all user playlist\",\n      \"type\": \"n8n-nodes-base.spotify\",\n      \"position\": [\n        500,\n        2220\n      ],\n      \"parameters\": {\n        \"resource\": \"playlist\",\n        \"operation\": \"getUserPlaylists\",\n        \"returnAll\": true\n      },\n      \"credentials\": {\n        \"spotifyOAuth2Api\": {\n          \"id\": \"zQrMRwwU6DLh4W77\",\n          \"name\": \"Spotify account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"3a0dad98-4571-4fb7-b366-0060d35b65fe\",\n      \"name\": \"Sticky Note4\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        460,\n        2080\n      ],\n      \"parameters\": {\n        \"width\": 1481.5336029736159,\n        \"height\": 416.7665808180022,\n        \"content\": \"## 检查数据库中是否存在该播放列表\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"e793b97c-cc29-47b0-8aa7-015fa631bc37\",\n      \"name\": \"Get monthly playlist\",\n      \"type\": \"n8n-nodes-base.filter\",\n      \"position\": [\n        720,\n        2220\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"56173299-d774-4cb4-b26f-4dca294dda1d\",\n              \"operator\": {\n                \"name\": \"filter.operator.equals\",\n                \"type\": \"string\",\n                \"operation\": \"equals\"\n              },\n              \"leftValue\": \"={{ $json.name }}\",\n              \"rightValue\": \"={{ $('Get current date').item.json.currentDate.text }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2,\n      \"alwaysOutputData\": true\n    },\n    {\n      \"id\": \"502ea9e2-7f03-4a8a-860e-90d63e42ee33\",\n      \"name\": \"Get playlist in DB\",\n      \"type\": \"n8n-nodes-base.nocoDb\",\n      \"position\": [\n        1160,\n        2120\n      ],\n      \"parameters\": {\n        \"table\": \"mchan0xys9h7h7e\",\n        \"options\": {\n          \"where\": \"=(name,eq,{{ $('Get current date').item.json.currentDate.text }})\"\n        },\n        \"operation\": \"getAll\",\n        \"projectId\": \"pepq760y5lwt5tm\",\n        \"returnAll\": true,\n        \"authentication\": \"nocoDbApiToken\"\n      },\n      \"credentials\": {\n        \"nocoDbApiToken\": {\n          \"id\": \"9uSbSrDz8EL2OIL7\",\n          \"name\": \"NocoDB Token account\"\n        }\n      },\n      \"typeVersion\": 3,\n      \"alwaysOutputData\": true\n    },\n    {\n      \"id\": \"3d2bece0-8096-4ee1-a3b9-ae91b83f0957\",\n      \"name\": \"Monthly playlist exist in Spotify ?\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        940,\n        2220\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"a2d9e3e0-a906-4ed9-9e23-166f781c86b1\",\n              \"operator\": {\n                \"type\": \"object\",\n                \"operation\": \"notEmpty\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $json }}\",\n              \"rightValue\": \"\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"d983b940-2f8d-4823-aaaf-d1bfa4428b41\",\n      \"name\": \"Playlist exist  in DB ?\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        1380,\n        2120\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"9485c9d4-ecdc-4d0e-a576-c7db5787c069\",\n              \"operator\": {\n                \"type\": \"object\",\n                \"operation\": \"notEmpty\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $json }}\",\n              \"rightValue\": \"\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"c694ab19-bca7-4dd4-8d10-cf8a1adab341\",\n      \"name\": \"Create playlist in Spotify\",\n      \"type\": \"n8n-nodes-base.spotify\",\n      \"position\": [\n        1160,\n        2320\n      ],\n      \"parameters\": {\n        \"name\": \"={{ $('Get current date').item.json.currentDate.text }}\",\n        \"resource\": \"playlist\",\n        \"operation\": \"create\",\n        \"additionalFields\": {\n          \"description\": \"Monthly playlist\"\n        }\n      },\n      \"credentials\": {\n        \"spotifyOAuth2Api\": {\n          \"id\": \"zQrMRwwU6DLh4W77\",\n          \"name\": \"Spotify account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"dc9dc3b5-cef7-412b-b3f8-5ec011c2746d\",\n      \"name\": \"Create playlist in DB1\",\n      \"type\": \"n8n-nodes-base.nocoDb\",\n      \"position\": [\n        1380,\n        2320\n      ],\n      \"parameters\": {\n        \"table\": \"mchan0xys9h7h7e\",\n        \"fieldsUi\": {\n          \"fieldValues\": [\n            {\n              \"fieldName\": \"uri\",\n              \"fieldValue\": \"={{ $json.uri }}\"\n            },\n            {\n              \"fieldName\": \"name\",\n              \"fieldValue\": \"={{ $json.name }}\"\n            },\n            {\n              \"fieldName\": \"description\",\n              \"fieldValue\": \"={{ $json.description}}\"\n            }\n          ]\n        },\n        \"operation\": \"create\",\n        \"projectId\": \"pepq760y5lwt5tm\",\n        \"authentication\": \"nocoDbApiToken\"\n      },\n      \"credentials\": {\n        \"nocoDbApiToken\": {\n          \"id\": \"9uSbSrDz8EL2OIL7\",\n          \"name\": \"NocoDB Token account\"\n        }\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"0356c3a4-dc20-42b0-b069-045048768939\",\n      \"name\": \"Create playlist in DB\",\n      \"type\": \"n8n-nodes-base.nocoDb\",\n      \"position\": [\n        1600,\n        2200\n      ],\n      \"parameters\": {\n        \"table\": \"mchan0xys9h7h7e\",\n        \"fieldsUi\": {\n          \"fieldValues\": [\n            {\n              \"fieldName\": \"uri\",\n              \"fieldValue\": \"={{ $('Get monthly playlist').item.json.uri }}\"\n            },\n            {\n              \"fieldName\": \"name\",\n              \"fieldValue\": \"={{ $('Get monthly playlist').item.json.name }}\"\n            },\n            {\n              \"fieldName\": \"description\",\n              \"fieldValue\": \"={{ $('Get monthly playlist').item.json.description }}\"\n            }\n          ]\n        },\n        \"operation\": \"create\",\n        \"projectId\": \"pepq760y5lwt5tm\",\n        \"authentication\": \"nocoDbApiToken\"\n      },\n      \"credentials\": {\n        \"nocoDbApiToken\": {\n          \"id\": \"9uSbSrDz8EL2OIL7\",\n          \"name\": \"NocoDB Token account\"\n        }\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"e2c86f04-725c-4af7-b3c2-9c22e2dc64bf\",\n      \"name\": \"Merge\",\n      \"type\": \"n8n-nodes-base.merge\",\n      \"position\": [\n        2040,\n        2460\n      ],\n      \"parameters\": {\n        \"mode\": \"chooseBranch\",\n        \"output\": \"empty\"\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"036e0d74-3383-44e9-991d-7e062b982b51\",\n      \"name\": \"Clean op\",\n      \"type\": \"n8n-nodes-base.noOp\",\n      \"position\": [\n        1820,\n        2200\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"323c9746-f713-4a3d-9af5-9579ec767fca\",\n      \"name\": \"Clean op2\",\n      \"type\": \"n8n-nodes-base.noOp\",\n      \"position\": [\n        1600,\n        2800\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"3b0be7ca-c47b-4524-b72a-c37f25c5e4d0\",\n      \"name\": \"Get this month playlist in DB\",\n      \"type\": \"n8n-nodes-base.nocoDb\",\n      \"position\": [\n        2260,\n        2460\n      ],\n      \"parameters\": {\n        \"table\": \"mchan0xys9h7h7e\",\n        \"options\": {\n          \"where\": \"=(name,eq,{{ $('Get current date').item.json.currentDate.text }})\"\n        },\n        \"operation\": \"getAll\",\n        \"projectId\": \"pepq760y5lwt5tm\",\n        \"returnAll\": true,\n        \"authentication\": \"nocoDbApiToken\"\n      },\n      \"credentials\": {\n        \"nocoDbApiToken\": {\n          \"id\": \"9uSbSrDz8EL2OIL7\",\n          \"name\": \"NocoDB Token account\"\n        }\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"733077e4-c474-4c95-ba05-d0b2375475ad\",\n      \"name\": \"Get this month tracks in DB\",\n      \"type\": \"n8n-nodes-base.nocoDb\",\n      \"position\": [\n        2480,\n        2460\n      ],\n      \"parameters\": {\n        \"table\": \"m0dm2y304t7vmuk\",\n        \"options\": {\n          \"where\": \"=(playlistName,eq,{{ $('Get current date').item.json.currentDate.text }})\"\n        },\n        \"operation\": \"getAll\",\n        \"projectId\": \"pepq760y5lwt5tm\",\n        \"returnAll\": true,\n        \"authentication\": \"nocoDbApiToken\"\n      },\n      \"credentials\": {\n        \"nocoDbApiToken\": {\n          \"id\": \"9uSbSrDz8EL2OIL7\",\n          \"name\": \"NocoDB Token account\"\n        }\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"6c8ef70f-542d-4454-9ae6-8f4e9778beb0\",\n      \"name\": \"Add song to the playlist\",\n      \"type\": \"n8n-nodes-base.spotify\",\n      \"position\": [\n        3580,\n        2460\n      ],\n      \"parameters\": {\n        \"id\": \"={{ $('Get this month playlist in DB').item.json.uri }}\",\n        \"trackID\": \"={{ $('For each monthly tracks in DB').item.json.uri }}\",\n        \"resource\": \"playlist\",\n        \"additionalFields\": {}\n      },\n      \"credentials\": {\n        \"spotifyOAuth2Api\": {\n          \"id\": \"zQrMRwwU6DLh4W77\",\n          \"name\": \"Spotify account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"034cd38d-4800-4f9c-9b67-453fdb2afa3c\",\n      \"name\": \"For each tracks in liked song\",\n      \"type\": \"n8n-nodes-base.splitInBatches\",\n      \"position\": [\n        720,\n        2680\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"reset\": false\n        }\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"90ff5c0b-e842-437f-be85-a5938288c513\",\n      \"name\": \"For each monthly tracks in DB\",\n      \"type\": \"n8n-nodes-base.splitInBatches\",\n      \"position\": [\n        2700,\n        2460\n      ],\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"decf36a4-fb8c-41eb-ae15-7ba36d621ad7\",\n      \"name\": \"Get this month tracks in Spotify\",\n      \"type\": \"n8n-nodes-base.spotify\",\n      \"position\": [\n        2920,\n        2560\n      ],\n      \"parameters\": {\n        \"id\": \"={{ $('Get this month playlist in DB').item.json.uri }}\",\n        \"resource\": \"playlist\",\n        \"operation\": \"getTracks\",\n        \"returnAll\": true\n      },\n      \"credentials\": {\n        \"spotifyOAuth2Api\": {\n          \"id\": \"zQrMRwwU6DLh4W77\",\n          \"name\": \"Spotify account\"\n        }\n      },\n      \"typeVersion\": 1,\n      \"alwaysOutputData\": true\n    },\n    {\n      \"id\": \"d322a655-e80b-4277-87d9-93e927b2f372\",\n      \"name\": \"Filter1\",\n      \"type\": \"n8n-nodes-base.filter\",\n      \"position\": [\n        3140,\n        2560\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"a11640e1-f22a-4ce9-abff-976efc57e1d3\",\n              \"operator\": {\n                \"name\": \"filter.operator.equals\",\n                \"type\": \"string\",\n                \"operation\": \"equals\"\n              },\n              \"leftValue\": \"={{ $('For each monthly tracks in DB').item.json.uri }}\",\n              \"rightValue\": \"={{ $json.track.uri }}\"\n            }\n          ]\n        }\n      },\n      \"executeOnce\": false,\n      \"typeVersion\": 2,\n      \"alwaysOutputData\": true\n    },\n    {\n      \"id\": \"5027f98d-b973-405f-81cf-534df794325f\",\n      \"name\": \"Song is not present in the playlist ?\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        3360,\n        2560\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"1beb843e-53da-48ce-9717-d7797232e4ae\",\n              \"operator\": {\n                \"type\": \"object\",\n                \"operation\": \"empty\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $json }}\",\n              \"rightValue\": \"\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"cd2e3a28-24c1-47d7-ad30-c836e08ad40f\",\n      \"name\": \"Clean op1\",\n      \"type\": \"n8n-nodes-base.noOp\",\n      \"position\": [\n        3800,\n        2560\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"56bbb0e9-3ee5-48e3-b0bf-48e8d026daa9\",\n      \"name\": \"Sticky Note5\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        2220,\n        2400\n      ],\n      \"parameters\": {\n        \"width\": 1733.785946789966,\n        \"height\": 351.94195615011336,\n        \"content\": \"## 检查歌曲是否在Spotify播放列表中。如果不在，将其添加进去。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"9834163b-0991-4910-bb4f-cf4557bfa0d5\",\n      \"name\": \"Schedule Trigger\",\n      \"type\": \"n8n-nodes-base.scheduleTrigger\",\n      \"position\": [\n        20,\n        2460\n      ],\n      \"parameters\": {\n        \"rule\": {\n          \"interval\": [\n            {\n              \"field\": \"minutes\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"72a3c48f-a759-4e0c-b7bb-9f69a5f4377e\",\n      \"name\": \"End\",\n      \"type\": \"n8n-nodes-base.noOp\",\n      \"position\": [\n        4100,\n        2260\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"Merge\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get this month playlist in DB\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Filter1\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Song is not present in the playlist ?\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Clean op\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Clean op1\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"For each monthly tracks in DB\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Clean op2\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"For each tracks in liked song\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Is not saved\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Create song entry\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Clean op2\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get current date\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get all user playlist\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Get last 10 liked tracks\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Schedule Trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get current date\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Create song entry\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Clean op2\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get playlist in DB\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Playlist exist  in DB ?\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get monthly playlist\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Monthly playlist exist in Spotify ?\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Create playlist in DB\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Clean op\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get all user playlist\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get monthly playlist\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Create playlist in DB1\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Clean op\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Check if track is saved\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Is not saved\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Playlist exist  in DB ?\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Clean op\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Create playlist in DB\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Add song to the playlist\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Clean op1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get last 10 liked tracks\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"For each tracks in liked song\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Create playlist in Spotify\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Create playlist in DB1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get this month tracks in DB\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"For each monthly tracks in DB\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"For each monthly tracks in DB\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"End\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Get this month tracks in Spotify\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"For each tracks in liked song\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge\",\n            \"type\": \"main\",\n            \"index\": 1\n          }\n        ],\n        [\n          {\n            \"node\": \"Check if track is saved\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get this month playlist in DB\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get this month tracks in DB\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get this month tracks in Spotify\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Filter1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Monthly playlist exist in Spotify ?\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get playlist in DB\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Create playlist in Spotify\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Song is not present in the playlist ?\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Add song to the playlist\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Clean op1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}