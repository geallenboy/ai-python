{
  "title": "Voice Activated Multi-Agent Demo for Vagent.io using Notion and Google Calendar",
  "url": "https://n8n.io/workflows/2446-voice-activated-multi-agent-demo-for-vagentio-using-notion-and-google-calendar/",
  "category": "AI",
  "category_url": "https://n8n.io/workflows/categories/ai/?count=20",
  "author": "Mario",
  "publish_date": "Last update 7 months ago",
  "content": "",
  "workflow_json": "{\"meta\":{\"instanceId\":\"84ba6d895254e080ac2b4916d987aa66b000f88d4d919a6b9c76848f9b8a7616\",\"templateId\":\"2446\"},\"nodes\":[{\"id\":\"af0765f4-75b5-445c-80d7-51b0aa180fe5\",\"name\":\"OpenAI Chat Model2\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\"position\":[820,620],\"parameters\":{\"model\":\"gpt-4o\",\"options\":{\"temperature\":0,\"responseFormat\":\"text\"}},\"typeVersion\":1},{\"id\":\"497c534e-e117-4592-b76f-bef424a7fd5a\",\"name\":\"Respond to Webhook\",\"type\":\"n8n-nodes-base.respondToWebhook\",\"position\":[1500,400],\"parameters\":{\"options\":{}},\"typeVersion\":1.1},{\"id\":\"5b358850-cbc3-4a8c-b2b8-12e3b7aa1e44\",\"name\":\"calendarAgent\",\"type\":\"@n8n/n8n-nodes-langchain.toolWorkflow\",\"position\":[1060,620],\"parameters\":{\"name\":\"calendarAgent\",\"fields\":{\"values\":[{\"name\":\"sessionId\",\"stringValue\":\"={{ $json.sessionId }}\"},{\"name\":\"prompt\",\"stringValue\":\"={{ $json.chatInput }}\"}]},\"workflowId\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"yPCMz4zxB291oM31\",\"cachedResultName\":\"Google Calendar Agent\"},\"description\":\"Call this workflow to do handle every request regarding calendar management.\",\"responsePropertyName\":\"output\"},\"typeVersion\":1.2},{\"id\":\"8bcc4b27-59b9-4ce3-8525-34221c10f11a\",\"name\":\"When chat message received\",\"type\":\"@n8n/n8n-nodes-langchain.chatTrigger\",\"position\":[460,480],\"webhookId\":\"96e410fe-ef91-4767-aa9a-bf95ba50f972\",\"parameters\":{\"public\":true,\"options\":{}},\"typeVersion\":1.1},{\"id\":\"0aa8e0ff-7ed3-4fef-9b7c-f2caa8f85612\",\"name\":\"taskAgent\",\"type\":\"@n8n/n8n-nodes-langchain.toolWorkflow\",\"position\":[1180,620],\"parameters\":{\"name\":\"taskAgent\",\"fields\":{\"values\":[{\"name\":\"sessionId\",\"stringValue\":\"={{ $json.sessionId }}\"},{\"name\":\"prompt\",\"stringValue\":\"={{ $json.chatInput }}\"}]},\"workflowId\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"ICTXOidW1oyJDYP7\",\"cachedResultName\":\"Notion Task Agent\"},\"description\":\"Call this workflow to do handle every request regarding task management.\",\"responsePropertyName\":\"output\"},\"typeVersion\":1.2},{\"id\":\"b46f4ed0-6de6-44ab-8b91-521b011d7869\",\"name\":\"Window Buffer Memory\",\"type\":\"@n8n/n8n-nodes-langchain.memoryBufferWindow\",\"position\":[940,620],\"parameters\":{\"sessionKey\":\"={{ $json.sessionId }}\",\"sessionIdType\":\"customKey\",\"contextWindowLength\":15},\"typeVersion\":1.2},{\"id\":\"e778c2bf-1681-418d-a434-d1a0cdeaa5d7\",\"name\":\"Map Fields\",\"type\":\"n8n-nodes-base.set\",\"position\":[680,320],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"f8c5a03f-ea21-4877-a71b-32e8b4dd30fb\",\"name\":\"chatInput\",\"type\":\"string\",\"value\":\"={{ $json.body.prompt }}\"},{\"id\":\"3d4fecc4-78a5-47ba-a239-5fdc9b224d82\",\"name\":\"sessionId\",\"type\":\"string\",\"value\":\"={{ $json.body.sessionID }}\"}]}},\"typeVersion\":3.4},{\"id\":\"c54d0fab-b25c-48fc-b027-dcdf78dd2b09\",\"name\":\"Map Fields1\",\"type\":\"n8n-nodes-base.set\",\"position\":[680,480],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"36f24729-17ae-4d69-961f-424a1797b42c\",\"name\":\"chatInput\",\"type\":\"string\",\"value\":\"={{ $json.chatInput }}\"},{\"id\":\"05ea359a-d82e-4917-9245-38016314ad10\",\"name\":\"sessionId\",\"type\":\"string\",\"value\":\"={{ $json.sessionId }}\"}]}},\"typeVersion\":3.4},{\"id\":\"cefe6cc8-4a87-47c8-a518-c0bf06f96a2a\",\"name\":\"Exclude Previews from Speech\",\"type\":\"n8n-nodes-base.set\",\"position\":[1280,400],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"424b3c35-fd3d-4021-86e7-0d90529550b0\",\"name\":\"response.text\",\"type\":\"string\",\"value\":\"={{ $json.output }}\"},{\"id\":\"0cbe6fd9-3464-4bd1-b9c0-365548dc232a\",\"name\":\"response.speech\",\"type\":\"string\",\"value\":\"={{ $if($json.output.search(/>\\\\s/) > -1, $json.output.substring(0, $json.output.search(/>\\\\s/)), $json.output) }}\"}]}},\"typeVersion\":3.4},{\"id\":\"815eb1a4-ef2d-430d-8884-217164214440\",\"name\":\"Main Agent\",\"type\":\"@n8n/n8n-nodes-langchain.agent\",\"position\":[900,400],\"parameters\":{\"text\":\"={{ $json.chatInput }}\",\"options\":{\"systemMessage\":\"=# Role:\\nYou are a helpful assistant. Your sole responsibility is to determine which tool to forward the original chat input to. Do not process, modify, or interpret the input or output in any way. Only route it to the correct tool.\\n\\n# Behavior:\\nBe clear, very concise, and accurate in tool routing. Do not modify, interpret, or analyze the incoming input or the tool's response. If the request is ambiguous, ask for clarification regarding tool selection only.\\n\\n# Command:\\nRoute all incoming requests to the available tools if they match their description.\\nCheck the memory to route ongoing conversations correctly — only choose another tool if a new task has been requested or the context clearly has been switched. If the context has changed (e.g. you were asked to create a task before, but now the user asks to create an event), forget everything before the context switch.\\n\\nOnly call one tool at a time.\\n\\nDo not modify or alter the input before sending it to the tool or the output after receiving it from the tool. Simply pass through both input and output as they are.\\n\\n# Format:\\nPass every response of each tool in raw format to the output. Do not modify, interpret, or add any information at all.\"},\"promptType\":\"define\"},\"typeVersion\":1.6},{\"id\":\"07b6d7e2-ab73-4f23-8dca-7c8b0309574c\",\"name\":\"OpenAI Chat Model\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\"position\":[1520,1100],\"parameters\":{\"model\":\"gpt-4o\",\"options\":{\"temperature\":0}},\"typeVersion\":1},{\"id\":\"882a93d8-886e-465d-9c81-cc8069abd281\",\"name\":\"HTTP Request\",\"type\":\"@n8n/n8n-nodes-langchain.toolHttpRequest\",\"position\":[1760,1100],\"parameters\":{\"url\":\"https://api.notion.com/v1/pages\",\"method\":\"POST\",\"jsonBody\":\"={\\n  \\\"parent\\\": {\\n    \\\"database_id\\\": \\\"{{ $json.databaseID }}\\\"\\n  },\\n  \\\"properties\\\": {\\n    \\\"Name\\\": {\\n      \\\"title\\\": [\\n        {\\n          \\\"text\\\": {\\n            \\\"content\\\": \\\"{title}\\\"\\n          }\\n        }\\n      ]\\n    },\\n    \\\"Priority\\\": {\\n      \\\"select\\\": {\\n        \\\"name\\\": \\\"{priority}\\\"\\n      }\\n    }\\n  },\\n  \\\"children\\\": [\\n    {\\n      \\\"object\\\": \\\"block\\\",\\n      \\\"type\\\": \\\"paragraph\\\",\\n      \\\"paragraph\\\": {\\n        \\\"rich_text\\\": [\\n          {\\n            \\\"type\\\": \\\"text\\\",\\n            \\\"text\\\": {\\n              \\\"content\\\": \\\"{description}\\\"\\n            }\\n          }\\n        ]\\n      }\\n    }\\n  ]\\n}\",\"sendBody\":true,\"specifyBody\":\"json\",\"authentication\":\"predefinedCredentialType\",\"toolDescription\":\"Create a Task in Notion using a title, description and priority.\",\"nodeCredentialType\":\"notionApi\",\"placeholderDefinitions\":{\"values\":[{\"name\":\"title\",\"type\":\"string\",\"description\":\"The name / title of the task.\"},{\"name\":\"description\",\"type\":\"string\",\"description\":\"The description of the task.\"},{\"name\":\"priority\",\"type\":\"string\",\"description\":\"The priority of the task. One of these values: \\\"do first\\\", \\\"important\\\", \\\"urgent\\\"\"}]}},\"typeVersion\":1.1},{\"id\":\"e19aad2c-132e-454f-a091-334f128b0636\",\"name\":\"Settings\",\"type\":\"n8n-nodes-base.set\",\"position\":[1320,880],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"3f65df4c-fae1-4da3-acfd-acf352a3f8d2\",\"name\":\"sessionId\",\"type\":\"string\",\"value\":\"={{ $json.sessionId }}\"},{\"id\":\"9745bdbd-fd97-46db-a742-6540f86dd43c\",\"name\":\"chatInput\",\"type\":\"string\",\"value\":\"={{ $json.prompt }}\"},{\"id\":\"5e757768-d780-4b11-a6e0-593b08f32cc3\",\"name\":\"databaseID\",\"type\":\"string\",\"value\":\"92da2aa018ed4095afc0f1a0670f36e9\"}]}},\"typeVersion\":3.4},{\"id\":\"0fe6aa57-7a64-40f4-af2d-30f4286b8aee\",\"name\":\"Format output\",\"type\":\"n8n-nodes-base.set\",\"position\":[1920,880],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"934c387a-71a5-4549-a68a-312708368117\",\"name\":\"output\",\"type\":\"string\",\"value\":\"=Please respond this to the user without modifications:\\n\\n{{ $json.output }}\"}]}},\"typeVersion\":3.4},{\"id\":\"b2170997-5ebb-4261-92ce-70b33d68931f\",\"name\":\"Notion Task Agent\",\"type\":\"@n8n/n8n-nodes-langchain.agent\",\"position\":[1540,880],\"parameters\":{\"options\":{\"systemMessage\":\"=# Role:\\nYou are a helpful assistant. Your job is to create Tasks in Notion.\\n\\n# Behavior:\\nBe clear, very concise, efficient, and accurate in responses. If the request is ambiguous, ask for clarification.\\n\\n# Command:\\nYou create tasks in Notion. Each task consists of the mandatory fields title, description and priority. Priority is an enum value consisting of 'do first', 'important' and 'urgent'.\\n\\n# Ask questions:\\nIf required information is missing, ask the user about the missing information and only the missing ones. Ask priority as last.\\n\\nIf the user only describes the task within a few words, use that as the title. In that case, ask the user, if he wants to add a more detailed description. If he responds with \\\"No\\\", leave the description empty when creating the task.\\nOn the other hand if the user describes the task more detailed from the beginning, use that as the description and create a short meaningful title for that. \\n\\nIf you have all the required information, ask for approval, before creating the task. In that case, always return a draft, containing the title, description and priority.\\n\\n# Format:\\nThe output of the draft for approval should always be in markdown and in this format (placeholders in angle brackets):\\n\\nHere is the drafted task. Shall I create it?\\n\\n> **<title>**  \\n> *<priority>*  \\n>  \\n> <description (optional)>\\n\\n# Responses:\\nAfter successfully created event, only respond with \\\"Okay, done.\\\"\"}},\"typeVersion\":1.6},{\"id\":\"a83fdec9-8c0e-45d0-8439-41c23440a21e\",\"name\":\"Window Buffer Memory1\",\"type\":\"@n8n/n8n-nodes-langchain.memoryBufferWindow\",\"position\":[1640,1100],\"parameters\":{\"sessionKey\":\"={{ $json.sessionId }}-{{ $workflow.id }}\",\"sessionIdType\":\"customKey\",\"contextWindowLength\":15},\"typeVersion\":1.2},{\"id\":\"80ae1a6f-5811-407a-a287-5150b8ecba22\",\"name\":\"Get calendar availability\",\"type\":\"@n8n/n8n-nodes-langchain.toolHttpRequest\",\"position\":[820,1100],\"parameters\":{\"url\":\"https://www.googleapis.com/calendar/v3/freeBusy\",\"method\":\"POST\",\"jsonBody\":\"={\\n  \\\"timeMin\\\": \\\"{timeMin}\\\",\\n  \\\"timeMax\\\": \\\"{timeMax}\\\",\\n  \\\"timeZone\\\": \\\"{{ $json.timeZone }}\\\",\\n  \\\"groupExpansionMax\\\": 20,\\n  \\\"calendarExpansionMax\\\": 10,\\n  \\\"items\\\": [\\n    {\\n      \\\"id\\\": \\\"{{ $json.calendarID }}\\\"\\n    }\\n  ]\\n}\",\"sendBody\":true,\"specifyBody\":\"json\",\"authentication\":\"predefinedCredentialType\",\"toolDescription\":\"Call this tool to get the calendar availability for a particular period on the calendar. The tool may refer to availability as \\\"Free\\\" or \\\"Busy\\\". \\n\\nUse {timeMin} and {timeMax} to specify the window for the availability query. For example, to get availability for 25 July, 2024 the {timeMin} would be 2024-07-25T00:00:00+02:00 and {timeMax} would be 2024-07-26T00:00:00+02:00.\\n\\nIf the tool returns an empty response, it means that something went wrong. It does not mean that there is no availability.\",\"nodeCredentialType\":\"googleCalendarOAuth2Api\"},\"typeVersion\":1},{\"id\":\"1d44a1eb-1b14-4ce8-b874-673db7be482c\",\"name\":\"Book appointment\",\"type\":\"@n8n/n8n-nodes-langchain.toolHttpRequest\",\"position\":[940,1100],\"parameters\":{\"url\":\"=https://www.googleapis.com/calendar/v3/calendars/{{ $json.calendarID }}/events\",\"method\":\"POST\",\"jsonBody\":\"={\\n  \\\"summary\\\": \\\"{eventName}\\\",\\n  \\\"start\\\": {\\n    \\\"dateTime\\\": \\\"{startTime}\\\",\\n    \\\"timeZone\\\": \\\"Europe/Berlin\\\"\\n  },\\n  \\\"end\\\": {\\n    \\\"dateTime\\\": \\\"{endTime}\\\",\\n    \\\"timeZone\\\": \\\"Europe/Berlin\\\"\\n  }\\n}\",\"sendBody\":true,\"specifyBody\":\"json\",\"authentication\":\"predefinedCredentialType\",\"toolDescription\":\"Call this tool to create an event in the calendar.\",\"nodeCredentialType\":\"googleCalendarOAuth2Api\",\"placeholderDefinitions\":{\"values\":[{\"name\":\"eventName\",\"description\":\"A short but precise title for the event.\"},{\"name\":\"startTime\",\"description\":\"The start time of the event in Europe/Berlin timezone. For example, 2024-07-24T10:00:00+02:00\"},{\"name\":\"endTime\",\"description\":\"The end time of the event in Europe/Berlin timezone. It should always be 30 minutes after the startTime. \"}]}},\"typeVersion\":1},{\"id\":\"d814abe2-fe6f-43ba-99b7-8380ed78dd26\",\"name\":\"Google Calendar Agent\",\"type\":\"@n8n/n8n-nodes-langchain.agent\",\"position\":[660,880],\"parameters\":{\"options\":{\"systemMessage\":\"=# Role:\\nYou are a helpful assistant. Your job is to schedule Google Calendar Events.\\n\\n# Behavior:\\nBe clear, very concise, efficient, and accurate in responses. If the request is ambiguous, ask for clarification.\\n\\n# Command:\\nYou create Google Calendar events. Each event requires a title, date and time. The default duration - if not provided by the user - is 1 hour.\\n\\nBefore creating even showing a draft of the event, use the provided tool to check for the availibilty in the calendar. If there are any conflicts, tell the user about the timespans which are blocked, propose another time slot close by and ask the user if he would like to change the time to that.\\n\\n# Ask questions:\\nIf required information is missing, ask the user about the missing information and only the missing ones.\\n\\nIf you have all the required information, ask for approval, before creating the event. In that case, always return a draft, containing the title, date and time.\\n\\n# Format:\\nThe output of the draft for approval should always be in markdown and in this format (placeholders in angle brackets):\\n\\nHere is the event. Shall I create it?\\n\\n> **<title>**  \\n> <date e.g., September 15, 2024>  \\n> <time e.g., 10am-12pm>\\n\\n# Responses:\\nAfter successfully created event, only respond with \\\"You are all set.\\\"\\n\\n# Additional Guidelines:\\nToday’s date is {{ $now.setZone($json.timeZone).format('dd LLL yyyy') }}.\\n\"}},\"typeVersion\":1.6},{\"id\":\"9c4738b9-c7bc-4e90-9dc3-7f99822a19ca\",\"name\":\"OpenAI Chat Model1\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\"position\":[580,1100],\"parameters\":{\"options\":{\"temperature\":0}},\"typeVersion\":1},{\"id\":\"40b9b4e0-0e84-43fa-a4bc-a5eb99988cbd\",\"name\":\"Settings1\",\"type\":\"n8n-nodes-base.set\",\"position\":[440,880],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"3f65df4c-fae1-4da3-acfd-acf352a3f8d2\",\"name\":\"sessionId\",\"type\":\"string\",\"value\":\"={{ $json.sessionId }}\"},{\"id\":\"9745bdbd-fd97-46db-a742-6540f86dd43c\",\"name\":\"chatInput\",\"type\":\"string\",\"value\":\"={{ $json.prompt }}\"},{\"id\":\"5e757768-d780-4b11-a6e0-593b08f32cc3\",\"name\":\"calendarID\",\"type\":\"string\",\"value\":\"primary\"},{\"id\":\"4085421e-7f2c-429c-a85f-c6170a655823\",\"name\":\"timeZone\",\"type\":\"string\",\"value\":\"Europe/Berlin\"}]}},\"typeVersion\":3.4},{\"id\":\"4bafef7b-3474-42c0-9f21-5c0c02cd9e73\",\"name\":\"Format output1\",\"type\":\"n8n-nodes-base.set\",\"position\":[1040,880],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"934c387a-71a5-4549-a68a-312708368117\",\"name\":\"output\",\"type\":\"string\",\"value\":\"=Please respond this to the user without modifications:\\n\\n{{ $json.output }}\"}]}},\"typeVersion\":3.4},{\"id\":\"6ebcf3cd-8ff2-4605-b4b6-69155918b290\",\"name\":\"Window Buffer Memory2\",\"type\":\"@n8n/n8n-nodes-langchain.memoryBufferWindow\",\"position\":[700,1100],\"parameters\":{\"sessionKey\":\"={{ $json.sessionId }}-{{ $workflow.id }}\",\"sessionIdType\":\"customKey\",\"contextWindowLength\":15},\"typeVersion\":1.2},{\"id\":\"1269083c-aac7-4a4f-9b3b-bb82a670ff94\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[380,800],\"parameters\":{\"width\":857.6171119733089,\"height\":469.7141529250314,\"content\":\"## Sub-Agent for scheduling calendar events\"},\"typeVersion\":1},{\"id\":\"48df65e9-4628-4b5d-bbad-a8a68289d8b8\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1260,800],\"parameters\":{\"width\":859.4283058500632,\"height\":469.7141529250314,\"content\":\"## Sub-Agent for crating notion tasks\\n\"},\"typeVersion\":1},{\"id\":\"48f050ec-3bda-4105-a859-e8f2039abe8e\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[380,240],\"parameters\":{\"width\":1323.0939382992326,\"height\":537.6599060701709,\"content\":\"## Main Agent which is connected to Vagent.io\"},\"typeVersion\":1},{\"id\":\"c768a760-9511-4543-b3ea-f1d83c263098\",\"name\":\"Sticky Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1720,240],\"parameters\":{\"color\":5,\"width\":398.5850611544016,\"height\":537.9088390659099,\"content\":\"## Setup\\n\\n### Create workflows\\n- Create a separate workflow for each Sub-Agent and move over the nodes from here\\n- In each of those workflows add an **Execute Workflow Trigger** node and connect it to the beginning of the copied nodes\\n\\n### Configure main workflow\\n- Select the corresponding credentials\\n- Update the Webhook URL and create a Header Auth (Key: Authorization)\\n- Update the tools \\\"claendarAgent\\\" and \\\"task Agent\\\" by choosing the corresponding sub-workflows you just created in the \\\"Workflow\\\" dropdown menu\\n- Activate the workflow\\n\\n### Configure sub-workflows\\n- Select the corresponding credentials\\n- Update the \\\"Settings\\\" node (do not touch the first two values), e.g. set your Notion DB ID\"},\"typeVersion\":1},{\"id\":\"42abacd3-02ba-466e-a8d4-f1c2f5c96c00\",\"name\":\"Webhook\",\"type\":\"n8n-nodes-base.webhook\",\"position\":[460,320],\"webhookId\":\"46116445-3b13-48c0-9a38-cd034bee92ac\",\"parameters\":{\"path\":\"46116445-3b13-48c0-9a38-cd034bee92ac\",\"options\":{},\"httpMethod\":\"POST\",\"responseMode\":\"responseNode\",\"authentication\":\"headerAuth\"},\"typeVersion\":2}],\"pinData\":{},\"connections\":{\"Webhook\":{\"main\":[[{\"node\":\"Map Fields\",\"type\":\"main\",\"index\":0}]]},\"Settings\":{\"main\":[[{\"node\":\"Notion Task Agent\",\"type\":\"main\",\"index\":0}]]},\"Settings1\":{\"main\":[[{\"node\":\"Google Calendar Agent\",\"type\":\"main\",\"index\":0}]]},\"taskAgent\":{\"ai_tool\":[[{\"node\":\"Main Agent\",\"type\":\"ai_tool\",\"index\":0}]]},\"Main Agent\":{\"main\":[[{\"node\":\"Exclude Previews from Speech\",\"type\":\"main\",\"index\":0}]]},\"Map Fields\":{\"main\":[[{\"node\":\"Main Agent\",\"type\":\"main\",\"index\":0}]]},\"Map Fields1\":{\"main\":[[{\"node\":\"Main Agent\",\"type\":\"main\",\"index\":0}]]},\"HTTP Request\":{\"ai_tool\":[[{\"node\":\"Notion Task Agent\",\"type\":\"ai_tool\",\"index\":0}]]},\"calendarAgent\":{\"ai_tool\":[[{\"node\":\"Main Agent\",\"type\":\"ai_tool\",\"index\":0}]]},\"Book appointment\":{\"ai_tool\":[[{\"node\":\"Google Calendar Agent\",\"type\":\"ai_tool\",\"index\":0}]]},\"Notion Task Agent\":{\"main\":[[{\"node\":\"Format output\",\"type\":\"main\",\"index\":0}]]},\"OpenAI Chat Model\":{\"ai_languageModel\":[[{\"node\":\"Notion Task Agent\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"OpenAI Chat Model1\":{\"ai_languageModel\":[[{\"node\":\"Google Calendar Agent\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"OpenAI Chat Model2\":{\"ai_languageModel\":[[{\"node\":\"Main Agent\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"Window Buffer Memory\":{\"ai_memory\":[[{\"node\":\"Main Agent\",\"type\":\"ai_memory\",\"index\":0}]]},\"Google Calendar Agent\":{\"main\":[[{\"node\":\"Format output1\",\"type\":\"main\",\"index\":0}]]},\"Window Buffer Memory1\":{\"ai_memory\":[[{\"node\":\"Notion Task Agent\",\"type\":\"ai_memory\",\"index\":0}]]},\"Window Buffer Memory2\":{\"ai_memory\":[[{\"node\":\"Google Calendar Agent\",\"type\":\"ai_memory\",\"index\":0}]]},\"Get calendar availability\":{\"ai_tool\":[[{\"node\":\"Google Calendar Agent\",\"type\":\"ai_tool\",\"index\":0}]]},\"When chat message received\":{\"main\":[[{\"node\":\"Map Fields1\",\"type\":\"main\",\"index\":0}]]},\"Exclude Previews from Speech\":{\"main\":[[{\"node\":\"Respond to Webhook\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "## Purpose\n\nUse a lightweight Voice Interface, for you and your entire organization, to interact with an AI Supervisor, a personal AI Assistant, which has access to your custom workflows. You can also connect the supervisor to your already existing Agents.\n\n## Demo & Explanation\n\n[![IMAGE ALT TEXT HERE](https://img.youtube.com/vi/qe23D1hgLwY/0.jpg)](https://youtu.be/qe23D1hgLwY)\n\n## How it works\n\n  * After recording a message in the Vagent App, it gets transcribed and sent in combination with a session ID to the registered webhook\n  * The Main Agent acts as a router. I interprets the message while using the stored chat history (bound to the session ID) and chooses which tool to use to perform the required action and. Tools on this level are workflows, which contain subordinated Agents. Since the Main Agent interprets the original message, the raw input is passed to the Tools/Sub-Agents as a separate parameter\n  * Within the Sub-Agents the actual processing takes place. Each of those has it’s separate chat memory (with a suffix to the main session ID), to achieve a clear separation of concerns\n  * Depending on the required action an HTTP Request Tool is called. The result is being formatted in Markdown and returned to the Main Agent with an additional short prompt, so it does not get interpreted by the Main Agent.\n  * Drafts are separated from a short message by added indentation (angle brackets). If some information is missing, no tool is called just yet, instead a message is returned back to the user\n  * The Main Agent then outputs the result from the called Sub-Agent. If a draft is included, it gets separated from the spoken output\n  * Finally the formatted output is returned as response to the webhook. The message is split into a spoken and a text version, which enables the App to read out loud unnecessary information like drafts in this example\n\n\n\nSee the full documentation of Vagent: <https://vagent.io/docs>\n\n## Setup\n\n  * Import this workflow into your n8n instance\n  * Follow the instructions given in the sticky notes on the canvas\n  * Setup your credentials. OpenAI can be replaced by another LLM in the workflow, but is required for the App to work. Google Calendar and Notion are required for all scenarios to work\n  * Copy the Webhook URL from the Webhook node of the main workflow\n  * Download the Vagent App from <https://vagent.io>\n  * In the settings paste your OpenAI API Token, the Webhook URL and the password defined for Header Auth\n  * Now you can use the App to interact with the Multi-Agent using your Voice by tapping the Mic symbol in the App to record your message.\n\n\n\n_To use the chat trigger (for testing) properly, temporarily disable the nodes after the Tools Agent._\n",
  "readme_html": "<!--[--><div data-v-006f9244=\"\"><h2>Purpose</h2>\n<p>Use a lightweight Voice Interface, for you and your entire organization, to interact with an AI Supervisor, a personal AI Assistant, which has access to your custom workflows. You can also connect the supervisor to your already existing Agents.</p>\n<h2>Demo &amp; Explanation</h2>\n<p><a href=\"https://youtu.be/qe23D1hgLwY\" rel=\"ugc nofollow\" target=\"_blank\"><img src=\"https://img.youtube.com/vi/qe23D1hgLwY/0.jpg\" alt=\"IMAGE ALT TEXT HERE\"></a></p>\n<h2>How it works</h2>\n<ul>\n<li>After recording a message in the Vagent App, it gets transcribed and sent in combination with a session ID to the registered webhook</li>\n<li>The Main Agent acts as a router. I interprets the message while using the stored chat history (bound to the session ID) and chooses which tool to use to perform the required action and. Tools on this level are workflows, which contain subordinated Agents. Since the Main Agent interprets the original message, the raw input is passed to the Tools/Sub-Agents as a separate parameter</li>\n<li>Within the Sub-Agents the actual processing takes place. Each of those has it’s separate chat memory (with a suffix to the main session ID), to achieve a clear separation of concerns</li>\n<li>Depending on the required action an HTTP Request Tool is called. The result is being formatted in Markdown and returned to the Main Agent with an additional short prompt, so it does not get interpreted by the Main Agent.</li>\n<li>Drafts are separated from a short message by added indentation (angle brackets). If some information is missing, no tool is called just yet, instead a message is returned back to the user</li>\n<li>The Main Agent then outputs the result from the called Sub-Agent. If a draft is included, it gets separated from the spoken output</li>\n<li>Finally the formatted output is returned as response to the webhook. The message is split into a spoken and a text version, which enables the App to read out loud unnecessary information like drafts in this example</li>\n</ul>\n<p>See the full documentation of Vagent: <a href=\"https://vagent.io/docs\" rel=\"ugc nofollow\" target=\"_blank\">https://vagent.io/docs</a></p>\n<h2>Setup</h2>\n<ul>\n<li>Import this workflow into your n8n instance</li>\n<li>Follow the instructions given in the sticky notes on the canvas</li>\n<li>Setup your credentials. OpenAI can be replaced by another LLM in the workflow, but is required for the App to work. Google Calendar and Notion are required for all scenarios to work</li>\n<li>Copy the Webhook URL from the Webhook node of the main workflow</li>\n<li>Download the Vagent App from <a href=\"https://vagent.io\" rel=\"ugc nofollow\" target=\"_blank\">https://vagent.io</a></li>\n<li>In the settings paste your OpenAI API Token, the Webhook URL and the password defined for Header Auth</li>\n<li>Now you can use the App to interact with the Multi-Agent using your Voice by tapping the Mic symbol in the App to record your message.</li>\n</ul>\n<p><em>To use the chat trigger (for testing) properly, temporarily disable the nodes after the Tools Agent.</em></p>\n</div><!--]-->",
  "readme_zh": "## 目的\n\n通过轻量级语音界面，为您及整个团队配备一位可访问定制工作流的AI督导——您的私人智能助手。该督导还能与现有智能体无缝对接。\n\n## 演示视频\n\n[![视频预览](https://img.youtube.com/vi/qe23D1hgLwY/0.jpg)](https://youtu.be/qe23D1hgLwY)\n\n## 运作原理\n\n* Vagent应用录制语音后，将转写文本与会话ID发送至注册的Webhook\n* 主控智能体担任路由角色：结合会话历史记录解析指令，选择工具执行操作。该层工具为包含子智能体的工作流，原始输入会作为独立参数传递给子智能体\n* 子智能体负责实际处理，每个子智能体拥有独立会话内存（主会话ID加后缀），实现关注点分离\n* 根据操作需求调用HTTP请求工具，返回结果以Markdown格式化并附加简短提示（避免被主控智能体二次解析）\n* 草稿内容通过尖括号缩进标识。若信息不完整，系统将直接返回提示而非调用工具\n* 主控智能体输出子智能体返回结果，草稿内容将与语音播报分离\n* 最终格式化输出通过Webhook返回，消息分为语音版和文本版（示例中草稿等非必要信息仅显示不播报）\n\n完整文档详见：<https://vagent.io/docs>\n\n## 配置指南\n\n* 将本工作流导入n8n实例\n* 按照画布便签提示操作\n* 配置凭证：OpenAI可替换为其他LLM（但应用运行必需），Google日历和Notion为全场景必需\n* 从主工作流Webhook节点复制URL\n* 前往<https://vagent.io>下载应用\n* 在设置中填入：OpenAI API密钥、Webhook URL及预设的Header Auth密码\n* 点击应用内麦克风图标即可开始语音交互\n\n_测试时如需使用聊天触发器，请暂时停用Tools Agent后的节点_",
  "title_zh": "Vagent.io 使用 Notion 和 Google Calendar 的语音激活多智能体演示",
  "publish_date_absolute": "2024-10-07",
  "publish_date_zh": "最后更新于7个月前",
  "workflow_json_zh": "{\n  \"meta\": {\n    \"instanceId\": \"84ba6d895254e080ac2b4916d987aa66b000f88d4d919a6b9c76848f9b8a7616\",\n    \"templateId\": \"2446\"\n  },\n  \"nodes\": [\n    {\n      \"id\": \"af0765f4-75b5-445c-80d7-51b0aa180fe5\",\n      \"name\": \"OpenAI Chat Model2\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\n      \"position\": [\n        820,\n        620\n      ],\n      \"parameters\": {\n        \"model\": \"gpt-4o\",\n        \"options\": {\n          \"temperature\": 0,\n          \"responseFormat\": \"text\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"497c534e-e117-4592-b76f-bef424a7fd5a\",\n      \"name\": \"Respond to Webhook\",\n      \"type\": \"n8n-nodes-base.respondToWebhook\",\n      \"position\": [\n        1500,\n        400\n      ],\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"5b358850-cbc3-4a8c-b2b8-12e3b7aa1e44\",\n      \"name\": \"calendarAgent\",\n      \"type\": \"@n8n/n8n-nodes-langchain.toolWorkflow\",\n      \"position\": [\n        1060,\n        620\n      ],\n      \"parameters\": {\n        \"name\": \"calendarAgent\",\n        \"fields\": {\n          \"values\": [\n            {\n              \"name\": \"sessionId\",\n              \"stringValue\": \"={{ $json.sessionId }}\"\n            },\n            {\n              \"name\": \"prompt\",\n              \"stringValue\": \"={{ $json.chatInput }}\"\n            }\n          ]\n        },\n        \"workflowId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"yPCMz4zxB291oM31\",\n          \"cachedResultName\": \"Google Calendar Agent\"\n        },\n        \"description\": \"Call this workflow to do handle every request regarding calendar management.\",\n        \"responsePropertyName\": \"output\"\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"8bcc4b27-59b9-4ce3-8525-34221c10f11a\",\n      \"name\": \"When chat message received\",\n      \"type\": \"@n8n/n8n-nodes-langchain.chatTrigger\",\n      \"position\": [\n        460,\n        480\n      ],\n      \"webhookId\": \"96e410fe-ef91-4767-aa9a-bf95ba50f972\",\n      \"parameters\": {\n        \"public\": true,\n        \"options\": {}\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"0aa8e0ff-7ed3-4fef-9b7c-f2caa8f85612\",\n      \"name\": \"taskAgent\",\n      \"type\": \"@n8n/n8n-nodes-langchain.toolWorkflow\",\n      \"position\": [\n        1180,\n        620\n      ],\n      \"parameters\": {\n        \"name\": \"taskAgent\",\n        \"fields\": {\n          \"values\": [\n            {\n              \"name\": \"sessionId\",\n              \"stringValue\": \"={{ $json.sessionId }}\"\n            },\n            {\n              \"name\": \"prompt\",\n              \"stringValue\": \"={{ $json.chatInput }}\"\n            }\n          ]\n        },\n        \"workflowId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"ICTXOidW1oyJDYP7\",\n          \"cachedResultName\": \"Notion Task Agent\"\n        },\n        \"description\": \"Call this workflow to do handle every request regarding task management.\",\n        \"responsePropertyName\": \"output\"\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"b46f4ed0-6de6-44ab-8b91-521b011d7869\",\n      \"name\": \"Window Buffer Memory\",\n      \"type\": \"@n8n/n8n-nodes-langchain.memoryBufferWindow\",\n      \"position\": [\n        940,\n        620\n      ],\n      \"parameters\": {\n        \"sessionKey\": \"={{ $json.sessionId }}\",\n        \"sessionIdType\": \"customKey\",\n        \"contextWindowLength\": 15\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"e778c2bf-1681-418d-a434-d1a0cdeaa5d7\",\n      \"name\": \"Map Fields\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        680,\n        320\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"f8c5a03f-ea21-4877-a71b-32e8b4dd30fb\",\n              \"name\": \"chatInput\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.body.prompt }}\"\n            },\n            {\n              \"id\": \"3d4fecc4-78a5-47ba-a239-5fdc9b224d82\",\n              \"name\": \"sessionId\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.body.sessionID }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"c54d0fab-b25c-48fc-b027-dcdf78dd2b09\",\n      \"name\": \"Map Fields1\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        680,\n        480\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"36f24729-17ae-4d69-961f-424a1797b42c\",\n              \"name\": \"chatInput\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.chatInput }}\"\n            },\n            {\n              \"id\": \"05ea359a-d82e-4917-9245-38016314ad10\",\n              \"name\": \"sessionId\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.sessionId }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"cefe6cc8-4a87-47c8-a518-c0bf06f96a2a\",\n      \"name\": \"Exclude Previews from Speech\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        1280,\n        400\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"424b3c35-fd3d-4021-86e7-0d90529550b0\",\n              \"name\": \"response.text\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.output }}\"\n            },\n            {\n              \"id\": \"0cbe6fd9-3464-4bd1-b9c0-365548dc232a\",\n              \"name\": \"response.speech\",\n              \"type\": \"string\",\n              \"value\": \"={{ $if($json.output.search(/>\\\\s/) > -1, $json.output.substring(0, $json.output.search(/>\\\\s/)), $json.output) }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"815eb1a4-ef2d-430d-8884-217164214440\",\n      \"name\": \"Main Agent\",\n      \"type\": \"@n8n/n8n-nodes-langchain.agent\",\n      \"position\": [\n        900,\n        400\n      ],\n      \"parameters\": {\n        \"text\": \"={{ $json.chatInput }}\",\n        \"options\": {\n          \"systemMessage\": \"=# Role:\\nYou are a helpful assistant. Your sole responsibility is to determine which tool to forward the original chat input to. Do not process, modify, or interpret the input or output in any way. Only route it to the correct tool.\\n\\n# Behavior:\\nBe clear, very concise, and accurate in tool routing. Do not modify, interpret, or analyze the incoming input or the tool's response. If the request is ambiguous, ask for clarification regarding tool selection only.\\n\\n# Command:\\nRoute all incoming requests to the available tools if they match their description.\\nCheck the memory to route ongoing conversations correctly — only choose another tool if a new task has been requested or the context clearly has been switched. If the context has changed (e.g. you were asked to create a task before, but now the user asks to create an event), forget everything before the context switch.\\n\\nOnly call one tool at a time.\\n\\nDo not modify or alter the input before sending it to the tool or the output after receiving it from the tool. Simply pass through both input and output as they are.\\n\\n# Format:\\nPass every response of each tool in raw format to the output. Do not modify, interpret, or add any information at all.\"\n        },\n        \"promptType\": \"define\"\n      },\n      \"typeVersion\": 1.6\n    },\n    {\n      \"id\": \"07b6d7e2-ab73-4f23-8dca-7c8b0309574c\",\n      \"name\": \"OpenAI Chat Model\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\n      \"position\": [\n        1520,\n        1100\n      ],\n      \"parameters\": {\n        \"model\": \"gpt-4o\",\n        \"options\": {\n          \"temperature\": 0\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"882a93d8-886e-465d-9c81-cc8069abd281\",\n      \"name\": \"HTTP Request\",\n      \"type\": \"@n8n/n8n-nodes-langchain.toolHttpRequest\",\n      \"position\": [\n        1760,\n        1100\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.notion.com/v1/pages\",\n        \"method\": \"POST\",\n        \"jsonBody\": \"={\\n  \\\"parent\\\": {\\n    \\\"database_id\\\": \\\"{{ $json.databaseID }}\\\"\\n  },\\n  \\\"properties\\\": {\\n    \\\"Name\\\": {\\n      \\\"title\\\": [\\n        {\\n          \\\"text\\\": {\\n            \\\"content\\\": \\\"{title}\\\"\\n          }\\n        }\\n      ]\\n    },\\n    \\\"Priority\\\": {\\n      \\\"select\\\": {\\n        \\\"name\\\": \\\"{priority}\\\"\\n      }\\n    }\\n  },\\n  \\\"children\\\": [\\n    {\\n      \\\"object\\\": \\\"block\\\",\\n      \\\"type\\\": \\\"paragraph\\\",\\n      \\\"paragraph\\\": {\\n        \\\"rich_text\\\": [\\n          {\\n            \\\"type\\\": \\\"text\\\",\\n            \\\"text\\\": {\\n              \\\"content\\\": \\\"{description}\\\"\\n            }\\n          }\\n        ]\\n      }\\n    }\\n  ]\\n}\",\n        \"sendBody\": true,\n        \"specifyBody\": \"json\",\n        \"authentication\": \"predefinedCredentialType\",\n        \"toolDescription\": \"Create a Task in Notion using a title, description and priority.\",\n        \"nodeCredentialType\": \"notionApi\",\n        \"placeholderDefinitions\": {\n          \"values\": [\n            {\n              \"name\": \"title\",\n              \"type\": \"string\",\n              \"description\": \"The name / title of the task.\"\n            },\n            {\n              \"name\": \"description\",\n              \"type\": \"string\",\n              \"description\": \"The description of the task.\"\n            },\n            {\n              \"name\": \"priority\",\n              \"type\": \"string\",\n              \"description\": \"The priority of the task. One of these values: \\\"do first\\\", \\\"important\\\", \\\"urgent\\\"\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"e19aad2c-132e-454f-a091-334f128b0636\",\n      \"name\": \"Settings\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        1320,\n        880\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"3f65df4c-fae1-4da3-acfd-acf352a3f8d2\",\n              \"name\": \"sessionId\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.sessionId }}\"\n            },\n            {\n              \"id\": \"9745bdbd-fd97-46db-a742-6540f86dd43c\",\n              \"name\": \"chatInput\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.prompt }}\"\n            },\n            {\n              \"id\": \"5e757768-d780-4b11-a6e0-593b08f32cc3\",\n              \"name\": \"databaseID\",\n              \"type\": \"string\",\n              \"value\": \"92da2aa018ed4095afc0f1a0670f36e9\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"0fe6aa57-7a64-40f4-af2d-30f4286b8aee\",\n      \"name\": \"Format output\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        1920,\n        880\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"934c387a-71a5-4549-a68a-312708368117\",\n              \"name\": \"output\",\n              \"type\": \"string\",\n              \"value\": \"=Please respond this to the user without modifications:\\n\\n{{ $json.output }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"b2170997-5ebb-4261-92ce-70b33d68931f\",\n      \"name\": \"Notion Task Agent\",\n      \"type\": \"@n8n/n8n-nodes-langchain.agent\",\n      \"position\": [\n        1540,\n        880\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"systemMessage\": \"=# Role:\\nYou are a helpful assistant. Your job is to create Tasks in Notion.\\n\\n# Behavior:\\nBe clear, very concise, efficient, and accurate in responses. If the request is ambiguous, ask for clarification.\\n\\n# Command:\\nYou create tasks in Notion. Each task consists of the mandatory fields title, description and priority. Priority is an enum value consisting of 'do first', 'important' and 'urgent'.\\n\\n# Ask questions:\\nIf required information is missing, ask the user about the missing information and only the missing ones. Ask priority as last.\\n\\nIf the user only describes the task within a few words, use that as the title. In that case, ask the user, if he wants to add a more detailed description. If he responds with \\\"No\\\", leave the description empty when creating the task.\\nOn the other hand if the user describes the task more detailed from the beginning, use that as the description and create a short meaningful title for that. \\n\\nIf you have all the required information, ask for approval, before creating the task. In that case, always return a draft, containing the title, description and priority.\\n\\n# Format:\\nThe output of the draft for approval should always be in markdown and in this format (placeholders in angle brackets):\\n\\nHere is the drafted task. Shall I create it?\\n\\n> **<title>**  \\n> *<priority>*  \\n>  \\n> <description (optional)>\\n\\n# Responses:\\nAfter successfully created event, only respond with \\\"Okay, done.\\\"\"\n        }\n      },\n      \"typeVersion\": 1.6\n    },\n    {\n      \"id\": \"a83fdec9-8c0e-45d0-8439-41c23440a21e\",\n      \"name\": \"Window Buffer Memory1\",\n      \"type\": \"@n8n/n8n-nodes-langchain.memoryBufferWindow\",\n      \"position\": [\n        1640,\n        1100\n      ],\n      \"parameters\": {\n        \"sessionKey\": \"={{ $json.sessionId }}-{{ $workflow.id }}\",\n        \"sessionIdType\": \"customKey\",\n        \"contextWindowLength\": 15\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"80ae1a6f-5811-407a-a287-5150b8ecba22\",\n      \"name\": \"Get calendar availability\",\n      \"type\": \"@n8n/n8n-nodes-langchain.toolHttpRequest\",\n      \"position\": [\n        820,\n        1100\n      ],\n      \"parameters\": {\n        \"url\": \"https://www.googleapis.com/calendar/v3/freeBusy\",\n        \"method\": \"POST\",\n        \"jsonBody\": \"={\\n  \\\"timeMin\\\": \\\"{timeMin}\\\",\\n  \\\"timeMax\\\": \\\"{timeMax}\\\",\\n  \\\"timeZone\\\": \\\"{{ $json.timeZone }}\\\",\\n  \\\"groupExpansionMax\\\": 20,\\n  \\\"calendarExpansionMax\\\": 10,\\n  \\\"items\\\": [\\n    {\\n      \\\"id\\\": \\\"{{ $json.calendarID }}\\\"\\n    }\\n  ]\\n}\",\n        \"sendBody\": true,\n        \"specifyBody\": \"json\",\n        \"authentication\": \"predefinedCredentialType\",\n        \"toolDescription\": \"Call this tool to get the calendar availability for a particular period on the calendar. The tool may refer to availability as \\\"Free\\\" or \\\"Busy\\\". \\n\\nUse {timeMin} and {timeMax} to specify the window for the availability query. For example, to get availability for 25 July, 2024 the {timeMin} would be 2024-07-25T00:00:00+02:00 and {timeMax} would be 2024-07-26T00:00:00+02:00.\\n\\nIf the tool returns an empty response, it means that something went wrong. It does not mean that there is no availability.\",\n        \"nodeCredentialType\": \"googleCalendarOAuth2Api\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"1d44a1eb-1b14-4ce8-b874-673db7be482c\",\n      \"name\": \"Book appointment\",\n      \"type\": \"@n8n/n8n-nodes-langchain.toolHttpRequest\",\n      \"position\": [\n        940,\n        1100\n      ],\n      \"parameters\": {\n        \"url\": \"=https://www.googleapis.com/calendar/v3/calendars/{{ $json.calendarID }}/events\",\n        \"method\": \"POST\",\n        \"jsonBody\": \"={\\n  \\\"summary\\\": \\\"{eventName}\\\",\\n  \\\"start\\\": {\\n    \\\"dateTime\\\": \\\"{startTime}\\\",\\n    \\\"timeZone\\\": \\\"Europe/Berlin\\\"\\n  },\\n  \\\"end\\\": {\\n    \\\"dateTime\\\": \\\"{endTime}\\\",\\n    \\\"timeZone\\\": \\\"Europe/Berlin\\\"\\n  }\\n}\",\n        \"sendBody\": true,\n        \"specifyBody\": \"json\",\n        \"authentication\": \"predefinedCredentialType\",\n        \"toolDescription\": \"Call this tool to create an event in the calendar.\",\n        \"nodeCredentialType\": \"googleCalendarOAuth2Api\",\n        \"placeholderDefinitions\": {\n          \"values\": [\n            {\n              \"name\": \"eventName\",\n              \"description\": \"A short but precise title for the event.\"\n            },\n            {\n              \"name\": \"startTime\",\n              \"description\": \"The start time of the event in Europe/Berlin timezone. For example, 2024-07-24T10:00:00+02:00\"\n            },\n            {\n              \"name\": \"endTime\",\n              \"description\": \"The end time of the event in Europe/Berlin timezone. It should always be 30 minutes after the startTime. \"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"d814abe2-fe6f-43ba-99b7-8380ed78dd26\",\n      \"name\": \"Google Calendar Agent\",\n      \"type\": \"@n8n/n8n-nodes-langchain.agent\",\n      \"position\": [\n        660,\n        880\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"systemMessage\": \"=# Role:\\nYou are a helpful assistant. Your job is to schedule Google Calendar Events.\\n\\n# Behavior:\\nBe clear, very concise, efficient, and accurate in responses. If the request is ambiguous, ask for clarification.\\n\\n# Command:\\nYou create Google Calendar events. Each event requires a title, date and time. The default duration - if not provided by the user - is 1 hour.\\n\\nBefore creating even showing a draft of the event, use the provided tool to check for the availibilty in the calendar. If there are any conflicts, tell the user about the timespans which are blocked, propose another time slot close by and ask the user if he would like to change the time to that.\\n\\n# Ask questions:\\nIf required information is missing, ask the user about the missing information and only the missing ones.\\n\\nIf you have all the required information, ask for approval, before creating the event. In that case, always return a draft, containing the title, date and time.\\n\\n# Format:\\nThe output of the draft for approval should always be in markdown and in this format (placeholders in angle brackets):\\n\\nHere is the event. Shall I create it?\\n\\n> **<title>**  \\n> <date e.g., September 15, 2024>  \\n> <time e.g., 10am-12pm>\\n\\n# Responses:\\nAfter successfully created event, only respond with \\\"You are all set.\\\"\\n\\n# Additional Guidelines:\\nToday’s date is {{ $now.setZone($json.timeZone).format('dd LLL yyyy') }}.\\n\"\n        }\n      },\n      \"typeVersion\": 1.6\n    },\n    {\n      \"id\": \"9c4738b9-c7bc-4e90-9dc3-7f99822a19ca\",\n      \"name\": \"OpenAI Chat Model1\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\n      \"position\": [\n        580,\n        1100\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"temperature\": 0\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"40b9b4e0-0e84-43fa-a4bc-a5eb99988cbd\",\n      \"name\": \"Settings1\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        440,\n        880\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"3f65df4c-fae1-4da3-acfd-acf352a3f8d2\",\n              \"name\": \"sessionId\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.sessionId }}\"\n            },\n            {\n              \"id\": \"9745bdbd-fd97-46db-a742-6540f86dd43c\",\n              \"name\": \"chatInput\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.prompt }}\"\n            },\n            {\n              \"id\": \"5e757768-d780-4b11-a6e0-593b08f32cc3\",\n              \"name\": \"calendarID\",\n              \"type\": \"string\",\n              \"value\": \"primary\"\n            },\n            {\n              \"id\": \"4085421e-7f2c-429c-a85f-c6170a655823\",\n              \"name\": \"timeZone\",\n              \"type\": \"string\",\n              \"value\": \"Europe/Berlin\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"4bafef7b-3474-42c0-9f21-5c0c02cd9e73\",\n      \"name\": \"Format output1\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        1040,\n        880\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"934c387a-71a5-4549-a68a-312708368117\",\n              \"name\": \"output\",\n              \"type\": \"string\",\n              \"value\": \"=Please respond this to the user without modifications:\\n\\n{{ $json.output }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"6ebcf3cd-8ff2-4605-b4b6-69155918b290\",\n      \"name\": \"Window Buffer Memory2\",\n      \"type\": \"@n8n/n8n-nodes-langchain.memoryBufferWindow\",\n      \"position\": [\n        700,\n        1100\n      ],\n      \"parameters\": {\n        \"sessionKey\": \"={{ $json.sessionId }}-{{ $workflow.id }}\",\n        \"sessionIdType\": \"customKey\",\n        \"contextWindowLength\": 15\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"1269083c-aac7-4a4f-9b3b-bb82a670ff94\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        380,\n        800\n      ],\n      \"parameters\": {\n        \"width\": 857.6171119733089,\n        \"height\": 469.7141529250314,\n        \"content\": \"## 用于安排日历事件的子代理\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"48df65e9-4628-4b5d-bbad-a8a68289d8b8\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1260,\n        800\n      ],\n      \"parameters\": {\n        \"width\": 859.4283058500632,\n        \"height\": 469.7141529250314,\n        \"content\": \"## 用于创建Notion任务的子代理\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"48f050ec-3bda-4105-a859-e8f2039abe8e\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        380,\n        240\n      ],\n      \"parameters\": {\n        \"width\": 1323.0939382992326,\n        \"height\": 537.6599060701709,\n        \"content\": \"## 连接到Vagent.io的主代理\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"c768a760-9511-4543-b3ea-f1d83c263098\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1720,\n        240\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 398.5850611544016,\n        \"height\": 537.9088390659099,\n        \"content\": \"## 设置\\n\\n### 创建工作流\\n- 为每个子代理创建独立的工作流，并将现有节点迁移至对应工作流\\n- 在每个子工作流中添加**执行工作流触发器**节点，并将其连接到复制节点的起始位置\\n\\n### 配置主工作流\\n- 选择对应的凭证\\n- 更新Webhook URL并创建Header认证（密钥：Authorization）\\n- 通过\\\"Workflow\\\"下拉菜单选择刚创建的子工作流，更新\\\"日历代理\\\"和\\\"任务代理\\\"工具配置\\n- 激活工作流\\n\\n### 配置子工作流\\n- 选择对应的凭证\\n- 更新\\\"设置\\\"节点（前两个值保持不变），例如设置您的Notion数据库ID\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"42abacd3-02ba-466e-a8d4-f1c2f5c96c00\",\n      \"name\": \"Webhook\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"position\": [\n        460,\n        320\n      ],\n      \"webhookId\": \"46116445-3b13-48c0-9a38-cd034bee92ac\",\n      \"parameters\": {\n        \"path\": \"46116445-3b13-48c0-9a38-cd034bee92ac\",\n        \"options\": {},\n        \"httpMethod\": \"POST\",\n        \"responseMode\": \"responseNode\",\n        \"authentication\": \"headerAuth\"\n      },\n      \"typeVersion\": 2\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"Webhook\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Map Fields\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Settings\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Notion Task Agent\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Settings1\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Google Calendar Agent\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"taskAgent\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"Main Agent\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Main Agent\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Exclude Previews from Speech\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Map Fields\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Main Agent\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Map Fields1\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Main Agent\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"HTTP Request\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"Notion Task Agent\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"calendarAgent\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"Main Agent\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Book appointment\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"Google Calendar Agent\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Notion Task Agent\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Format output\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"OpenAI Chat Model\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"Notion Task Agent\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"OpenAI Chat Model1\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"Google Calendar Agent\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"OpenAI Chat Model2\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"Main Agent\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Window Buffer Memory\": {\n      \"ai_memory\": [\n        [\n          {\n            \"node\": \"Main Agent\",\n            \"type\": \"ai_memory\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Google Calendar Agent\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Format output1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Window Buffer Memory1\": {\n      \"ai_memory\": [\n        [\n          {\n            \"node\": \"Notion Task Agent\",\n            \"type\": \"ai_memory\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Window Buffer Memory2\": {\n      \"ai_memory\": [\n        [\n          {\n            \"node\": \"Google Calendar Agent\",\n            \"type\": \"ai_memory\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get calendar availability\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"Google Calendar Agent\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When chat message received\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Map Fields1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Exclude Previews from Speech\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Respond to Webhook\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}