{
  "title": "Monitor Amazon Product Prices with Bright Data and Google Sheets",
  "url": "https://n8n.io/workflows/3878-monitor-amazon-product-prices-with-bright-data-and-google-sheets/",
  "category": "AI",
  "category_url": "https://n8n.io/workflows/categories/ai/?sort=createdAt:desc",
  "author": "Cyril Nicko Gaspar",
  "publish_date": "Last update 3 days ago",
  "publish_date_absolute": "2025-05-19",
  "content": "",
  "workflow_json": "{\"meta\":{\"instanceId\":\"4e6be3a68285934388a854ac0ffdc5e5500688d5cdb88d0ec2d734e85f097355\",\"templateCredsSetupCompleted\":true},\"nodes\":[{\"id\":\"0e56a2f3-4977-498b-9434-e10b717779b9\",\"name\":\"Wait\",\"type\":\"n8n-nodes-base.wait\",\"position\":[160,-1400],\"webhookId\":\"cea23372-8fb1-44e5-baa5-a58aa42b6db0\",\"parameters\":{},\"typeVersion\":1.1},{\"id\":\"88ac7caa-6408-4b4b-96ef-b5b575da9d52\",\"name\":\"Schedule Trigger\",\"type\":\"n8n-nodes-base.scheduleTrigger\",\"position\":[-800,-840],\"parameters\":{\"rule\":{\"interval\":[{}]}},\"typeVersion\":1.2},{\"id\":\"170b1458-07a1-4295-af4b-c87022eef71c\",\"name\":\"Check Status by Snapshot ID\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[380,-1400],\"parameters\":{\"url\":\"=https://api.brightdata.com/datasets/v3/progress/{{ $json.snapshot_id }}\",\"options\":{},\"authentication\":\"genericCredentialType\",\"genericAuthType\":\"httpBearerAuth\"},\"credentials\":{\"httpBearerAuth\":{\"id\":\"MR4HBU5dH9phpxNO\",\"name\":\"Bright Data API Key\"}},\"typeVersion\":4.2},{\"id\":\"9c020893-da19-48b1-8816-594bed76ae16\",\"name\":\"Get the data\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[1180,-1400],\"parameters\":{\"url\":\"=https://api.brightdata.com/datasets/v3/snapshot/{{ $json.snapshot_id }}\",\"options\":{},\"sendQuery\":true,\"authentication\":\"genericCredentialType\",\"genericAuthType\":\"httpBearerAuth\",\"queryParameters\":{\"parameters\":[{\"name\":\"format\",\"value\":\"json\"}]}},\"credentials\":{\"httpBearerAuth\":{\"id\":\"MR4HBU5dH9phpxNO\",\"name\":\"Bright Data API Key\"}},\"typeVersion\":4.2},{\"id\":\"02f3e1e6-55af-4472-999b-9a656ba8c76f\",\"name\":\"Initiate request from URLs\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[440,-700],\"parameters\":{\"url\":\"https://api.brightdata.com/datasets/v3/trigger\",\"method\":\"POST\",\"options\":{},\"jsonBody\":\"={{ $json.data.map(i => {\\nreturn {url:i['Product URL'],\\nzipcode: i['ZIP code']\\n}\\n}).toJsonString() }}\",\"sendBody\":true,\"sendQuery\":true,\"sendHeaders\":true,\"specifyBody\":\"json\",\"authentication\":\"genericCredentialType\",\"genericAuthType\":\"httpBearerAuth\",\"queryParameters\":{\"parameters\":[{\"name\":\"dataset_id\",\"value\":\"gd_l7q7dkf244hwjntr0\"},{\"name\":\"include_errors\",\"value\":\"true\"}]},\"headerParameters\":{\"parameters\":[{}]}},\"credentials\":{\"brightdataApi\":{\"id\":\"DQaiy0yJ0lNutzIl\",\"name\":\"BrightData account\"},\"httpBearerAuth\":{\"id\":\"MR4HBU5dH9phpxNO\",\"name\":\"Bright Data API Key\"}},\"typeVersion\":4.2},{\"id\":\"ecf9d3e8-5435-4426-a82b-b5dd6ff85e86\",\"name\":\"Read data from Google Sheet\",\"type\":\"n8n-nodes-base.googleSheets\",\"position\":[-420,-840],\"parameters\":{\"options\":{},\"sheetName\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"gid=0\",\"cachedResultUrl\":\"https://docs.google.com/spreadsheets/d/1-cX3l_oxylIH2J8rzC-LN0XmFoOOXjJGW0bUe-4bsAw/edit#gid=0\",\"cachedResultName\":\"Sheet1\"},\"documentId\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"1-cX3l_oxylIH2J8rzC-LN0XmFoOOXjJGW0bUe-4bsAw\",\"cachedResultUrl\":\"https://docs.google.com/spreadsheets/d/1-cX3l_oxylIH2J8rzC-LN0XmFoOOXjJGW0bUe-4bsAw/edit?usp=drivesdk\",\"cachedResultName\":\"Sample Amazon Products Monitoring\"}},\"credentials\":{\"googleSheetsOAuth2Api\":{\"id\":\"TB3Rn9lCQhQ5vKyg\",\"name\":\"Google Sheets account\"}},\"typeVersion\":4.5},{\"id\":\"c079c769-406e-43d0-9f41-11db53da340f\",\"name\":\"Process URLs by batch of 10s\",\"type\":\"n8n-nodes-base.splitInBatches\",\"position\":[20,-720],\"parameters\":{\"options\":{},\"batchSize\":10},\"typeVersion\":3},{\"id\":\"89930387-958b-48c3-8583-8f2aac59718b\",\"name\":\"Combine the batch\",\"type\":\"n8n-nodes-base.aggregate\",\"position\":[240,-720],\"parameters\":{\"options\":{},\"aggregate\":\"aggregateAllItemData\"},\"typeVersion\":1},{\"id\":\"8ad0c86a-5107-4ccc-b2d6-e4dda7c98b4f\",\"name\":\"Update the records by ASIN\",\"type\":\"n8n-nodes-base.googleSheets\",\"position\":[1520,-1400],\"parameters\":{\"columns\":{\"value\":{\"ASIN\":\"={{ $json.asin }}\",\"Price\":\"={{ $json.final_price }}\"},\"schema\":[{\"id\":\"Product URL\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"Product URL\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"Price\",\"type\":\"string\",\"display\":true,\"required\":false,\"displayName\":\"Price\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"Product Title\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"Product Title\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"ZIP code\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"ZIP code\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"ASIN\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"ASIN\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"row_number\",\"type\":\"string\",\"display\":true,\"removed\":true,\"readOnly\":true,\"required\":false,\"displayName\":\"row_number\",\"defaultMatch\":false,\"canBeUsedToMatch\":true}],\"mappingMode\":\"defineBelow\",\"matchingColumns\":[\"ASIN\"],\"attemptToConvertTypes\":false,\"convertFieldsToString\":false},\"options\":{},\"operation\":\"update\",\"sheetName\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"gid=0\",\"cachedResultUrl\":\"https://docs.google.com/spreadsheets/d/1-cX3l_oxylIH2J8rzC-LN0XmFoOOXjJGW0bUe-4bsAw/edit#gid=0\",\"cachedResultName\":\"Sheet1\"},\"documentId\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"1-cX3l_oxylIH2J8rzC-LN0XmFoOOXjJGW0bUe-4bsAw\",\"cachedResultUrl\":\"https://docs.google.com/spreadsheets/d/1-cX3l_oxylIH2J8rzC-LN0XmFoOOXjJGW0bUe-4bsAw/edit?usp=drivesdk\",\"cachedResultName\":\"Sample Amazon Products Monitoring\"}},\"credentials\":{\"googleSheetsOAuth2Api\":{\"id\":\"TB3Rn9lCQhQ5vKyg\",\"name\":\"Google Sheets account\"}},\"typeVersion\":4.5},{\"id\":\"636aa558-8973-4493-8788-f566edf5021b\",\"name\":\"Check the status of snapshot\",\"type\":\"n8n-nodes-base.switch\",\"position\":[620,-1400],\"parameters\":{\"rules\":{\"values\":[{\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"a2198ad8-e1ae-411d-8c6b-38e74b727560\",\"operator\":{\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"={{ $json.status }}\",\"rightValue\":\"ready\"}]}},{\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"b8fa19aa-f90c-4da5-a039-9962f2a34776\",\"operator\":{\"name\":\"filter.operator.equals\",\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"={{ $json.status }}\",\"rightValue\":\"running\"}]}}]},\"options\":{}},\"typeVersion\":3.2},{\"id\":\"920f766f-2815-46c9-bd24-30d6f4490c58\",\"name\":\"Space the request by 1 second\",\"type\":\"n8n-nodes-base.wait\",\"position\":[660,-660],\"webhookId\":\"ec33605d-d09e-4309-9c8f-10c5128677a2\",\"parameters\":{\"amount\":1},\"typeVersion\":1.1},{\"id\":\"1d79897c-2139-4579-b86e-d9b0bea9e0bc\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-840,-1080],\"parameters\":{\"color\":4,\"width\":700,\"height\":460,\"content\":\"## Schedule and Read from Google Sheets\\nSet up or modify a Google Sheet. The sheet should have columns named “Product URL,” “ZIP code,” and “ASIN.” The “ASIN” column should be a function that extracts the ASIN from the product URL. The formula to achieve this is:\\n```\\n=REGEXEXTRACT(A4, “/(?:dp|gp/product|product)/([A-Z0-9]{10})”)\"},\"typeVersion\":1},{\"id\":\"9e8866c2-8ae1-467f-a6fb-ce0d1a9e1ac5\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-60,-860],\"parameters\":{\"color\":5,\"width\":940,\"height\":460,\"content\":\"## Process Data into Bright Data by batch\\n\\n Obtain an API key from Bright Data and create a generic bearer authentication credential.\"},\"typeVersion\":1},{\"id\":\"b894627b-e326-40a8-8656-db4e1c18a8d2\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[80,-1540],\"parameters\":{\"width\":740,\"height\":460,\"content\":\"## Check the requested data from Bright Data using snapshot ID\\n\\nThis checks if the snapshot has processed the data. If the data is ready, it proceeds to the ‘true’ branch of the If node.\"},\"typeVersion\":1},{\"id\":\"5439d333-922f-4a6f-a391-6963f57be0be\",\"name\":\"Sticky Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1060,-1540],\"parameters\":{\"color\":3,\"width\":720,\"height\":460,\"content\":\"## Obtain the data from the snapshot and update it to Google Sheets\"},\"typeVersion\":1}],\"pinData\":{},\"connections\":{\"Wait\":{\"main\":[[{\"node\":\"Check Status by Snapshot ID\",\"type\":\"main\",\"index\":0}]]},\"Get the data\":{\"main\":[[{\"node\":\"Update the records by ASIN\",\"type\":\"main\",\"index\":0}]]},\"Schedule Trigger\":{\"main\":[[{\"node\":\"Read data from Google Sheet\",\"type\":\"main\",\"index\":0}]]},\"Combine the batch\":{\"main\":[[{\"node\":\"Initiate request from URLs\",\"type\":\"main\",\"index\":0}]]},\"Initiate request from URLs\":{\"main\":[[{\"node\":\"Space the request by 1 second\",\"type\":\"main\",\"index\":0}]]},\"Check Status by Snapshot ID\":{\"main\":[[{\"node\":\"Check the status of snapshot\",\"type\":\"main\",\"index\":0}]]},\"Read data from Google Sheet\":{\"main\":[[{\"node\":\"Process URLs by batch of 10s\",\"type\":\"main\",\"index\":0}]]},\"Check the status of snapshot\":{\"main\":[[{\"node\":\"Get the data\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Wait\",\"type\":\"main\",\"index\":0}]]},\"Process URLs by batch of 10s\":{\"main\":[[{\"node\":\"Wait\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Combine the batch\",\"type\":\"main\",\"index\":0}]]},\"Space the request by 1 second\":{\"main\":[[{\"node\":\"Process URLs by batch of 10s\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "## Amazon Price Monitoring Workflow\n\nThis workflow enables you to monitor the prices of Amazon product listings directly from a Google Sheet, using data provided by Bright Data’s Amazon Scraper API. It automates the retrieval of price data for specified products and is ideal for market research, competitor analysis, or personal price tracking.\n\n### ✅ Requirements\n\nBefore using this template, ensure you have the following:\n\n  * A Bright Data account and access to the Amazon Scraper API.\n  * An active API key from Bright Data.\n  * A Google Sheet set up with the required columns.\n  * N8N account (self-host or cloud version)\n\n\n\n⸻\n\n## ⚙️ Setup\n\n#### 1\\. Create a Google Sheet with the following columns:\n\n  * Product URL\n  * ZIP Code (used for regional price variations)\n  * ASIN (Amazon Standard Identification Number)\n\n\n\n#### 2\\. Extract ASIN Automatically using the following formula in the ASIN column:\n    \n    \n    =REGEXEXTRACT(A2, \"/(?:dp|gp/product|product)/([A-Z0-9]{10})\")\n    \n\n  * Replace A2 with the appropriate cell reference\n\n\n\n#### 3\\. Obtain an API Key:\n\n  * Sign in to your Bright Data account.\n  * Go to the API section to generate an API key.\n  * Create a Bearer Authentication Credential using this key in your automation tool.\n\n\n\n#### 4\\. Configure the Workflow:\n\n  * Use a node (e.g., “Google Sheets”) to read data from your sheet.\n  * Use an HTTP Request node to send a query to Bright Data’s Amazon API with the ASIN and ZIP code.\n  * Parse the returned JSON response to extract product price and other relevant data.\n  * Optionally write the output (e.g., current price, timestamp) back into the sheet or another data store.\n\n\n\n⸻\n\n## Workflow Functionality\n\n  * The workflow is triggered periodically (or manually) and reads product details from your Google Sheet.\n  * For each row, it extracts the Product URL and ZIP code and sends a request to the Bright Data API.\n  * The API returns product price information, which is then logged or updated back into the sheet using ASIN.\n  * You can also map the product URL to the product URL, but ensure that the URL has no parameters. If the URL has appended parameters, refer to the input field from the Bright Data snapshot result.\n\n\n\n⸻\n\n### 💡 Use Cases\n\n  * E-commerce sellers monitoring competitors’ prices.\n  * Consumers tracking price drops on wishlist items.\n  * Market researchers collecting pricing data across ZIP codes.\n  * Affiliate marketers ensuring accurate product pricing on their platforms.\n\n\n\n⸻\n\n### 🛠️ Customization\n\n  * Add columns for additional product data such as rating, seller, or stock availability.\n  * Schedule the workflow to run hourly, daily, or weekly depending on your needs.\n  * Implement email or Slack alerts for significant price changes.\n  * Filter by product category or brand to narrow your tracking focus.\n\n\n",
  "readme_html": "<!--[--><div data-v-859c7806=\"\"><h2>Amazon Price Monitoring Workflow</h2>\n<p>This workflow enables you to monitor the prices of Amazon product listings directly from a Google Sheet, using data provided by Bright Data’s Amazon Scraper API. It automates the retrieval of price data for specified products and is ideal for market research, competitor analysis, or personal price tracking.</p>\n<h3>✅ Requirements</h3>\n<p>Before using this template, ensure you have the following:</p>\n<ul>\n<li>A Bright Data account and access to the Amazon Scraper API.</li>\n<li>An active API key from Bright Data.</li>\n<li>A Google Sheet set up with the required columns.</li>\n<li>N8N account (self-host or cloud version)</li>\n</ul>\n<p>⸻</p>\n<h2>⚙️ Setup</h2>\n<h4>1. Create a Google Sheet with the following columns:</h4>\n<ul>\n<li>Product URL</li>\n<li>ZIP Code (used for regional price variations)</li>\n<li>ASIN (Amazon Standard Identification Number)</li>\n</ul>\n<h4>2. Extract ASIN Automatically using the following formula in the ASIN column:</h4>\n<pre><code>=REGEXEXTRACT(A2, \"/(?:dp|gp/product|product)/([A-Z0-9]{10})\")\n</code></pre>\n<ul>\n<li>Replace A2 with the appropriate cell reference</li>\n</ul>\n<h4>3. Obtain an API Key:</h4>\n<ul>\n<li>Sign in to your Bright Data account.</li>\n<li>Go to the API section to generate an API key.</li>\n<li>Create a Bearer Authentication Credential using this key in your automation tool.</li>\n</ul>\n<h4>4. Configure the Workflow:</h4>\n<ul>\n<li>Use a node (e.g., “Google Sheets”) to read data from your sheet.</li>\n<li>Use an HTTP Request node to send a query to Bright Data’s Amazon API with the ASIN and ZIP code.</li>\n<li>Parse the returned JSON response to extract product price and other relevant data.</li>\n<li>Optionally write the output (e.g., current price, timestamp) back into the sheet or another data store.</li>\n</ul>\n<p>⸻</p>\n<h2>Workflow Functionality</h2>\n<ul>\n<li>The workflow is triggered periodically (or manually) and reads product details from your Google Sheet.</li>\n<li>For each row, it extracts the Product URL and ZIP code and sends a request to the Bright Data API.</li>\n<li>The API returns product price information, which is then logged or updated back into the sheet using ASIN.</li>\n<li>You can also map the product URL to the product URL, but ensure that the URL has no parameters. If the URL has appended parameters, refer to the input field from the Bright Data snapshot result.</li>\n</ul>\n<p>⸻</p>\n<h3>💡 Use Cases</h3>\n<ul>\n<li>E-commerce sellers monitoring competitors’ prices.</li>\n<li>Consumers tracking price drops on wishlist items.</li>\n<li>Market researchers collecting pricing data across ZIP codes.</li>\n<li>Affiliate marketers ensuring accurate product pricing on their platforms.</li>\n</ul>\n<p>⸻</p>\n<h3>🛠️ Customization</h3>\n<ul>\n<li>Add columns for additional product data such as rating, seller, or stock availability.</li>\n<li>Schedule the workflow to run hourly, daily, or weekly depending on your needs.</li>\n<li>Implement email or Slack alerts for significant price changes.</li>\n<li>Filter by product category or brand to narrow your tracking focus.</li>\n</ul>\n</div><!--]-->",
  "readme_zh": "## 亚马逊价格监控工作流\n\n本工作流支持您通过谷歌表格直接监控亚马逊商品列表价格，数据来源于Bright Data亚马逊爬虫API。它能自动获取指定商品的价格数据，是市场调研、竞品分析或个人价格追踪的理想工具。\n\n### ✅ 使用前提\n\n使用前请确保满足以下条件：\n  * 拥有Bright Data账号及亚马逊爬虫API访问权限\n  * 已获取有效的Bright Data API密钥\n  * 已创建包含必要字段的谷歌表格\n  * 配置好n8n账户（自托管或云端版）\n\n⸻\n\n## ⚙️ 配置步骤\n\n#### 1. 创建包含以下字段的谷歌表格：\n  * 商品链接\n  * 邮政编码（用于获取区域价格差异）\n  * ASIN（亚马逊标准识别码）\n\n#### 2. 在ASIN列使用公式自动提取编号：\n```    \n=REGEXEXTRACT(A2, \"/(?:dp|gp/product|product)/([A-Z0-9]{10})\")\n```\n  * 将A2替换为实际单元格坐标\n\n#### 3. 获取API密钥：\n  * 登录Bright Data账户\n  * 进入API版块生成密钥\n  * 在自动化工具中创建Bearer身份验证凭证\n\n#### 4. 配置工作流：\n  * 使用\"Google Sheets\"节点读取表格数据\n  * 通过HTTP请求节点向Bright Data API发送ASIN和邮编查询\n  * 解析返回的JSON数据提取价格等信息\n  * 可选：将当前价格、时间戳等数据回写至表格\n\n⸻\n\n## 工作流机制\n\n  * 定期（或手动）触发工作流读取表格中的商品信息\n  * 每行数据自动提取商品链接和邮编发送至API\n  * 通过ASIN匹配API返回的实时价格数据\n  * 若需映射商品链接，请确保URL无附加参数（含参数时需引用Bright Data快照结果中的对应字段）\n\n⸻\n\n### 💡 应用场景\n\n  * 电商卖家监控竞品价格波动\n  * 消费者追踪心愿单商品降价\n  * 市场研究人员收集跨区域定价数据\n  * 联盟营销人员确保平台报价准确性\n\n⸻\n\n### 🛠️ 定制扩展\n\n  * 增加商品评分、卖家、库存等数据字段\n  * 按需设置每小时/每日/每周执行计划\n  * 配置价格异动邮件/Slack警报\n  * 按商品类别或品牌进行筛选追踪",
  "title_zh": "使用Bright Data和Google表格监控亚马逊产品价格",
  "publish_date_zh": "最后更新于3天前",
  "workflow_json_zh": "{\"meta\":{\"instanceId\":\"4e6be3a68285934388a854ac0ffdc5e5500688d5cdb88d0ec2d734e85f097355\",\"templateCredsSetupCompleted\":true},\"nodes\":[{\"id\":\"0e56a2f3-4977-498b-9434-e10b717779b9\",\"name\":\"Wait\",\"type\":\"n8n-nodes-base.wait\",\"position\":[160,-1400],\"webhookId\":\"cea23372-8fb1-44e5-baa5-a58aa42b6db0\",\"parameters\":{},\"typeVersion\":1.1},{\"id\":\"88ac7caa-6408-4b4b-96ef-b5b575da9d52\",\"name\":\"Schedule Trigger\",\"type\":\"n8n-nodes-base.scheduleTrigger\",\"position\":[-800,-840],\"parameters\":{\"rule\":{\"interval\":[{}]}},\"typeVersion\":1.2},{\"id\":\"170b1458-07a1-4295-af4b-c87022eef71c\",\"name\":\"Check Status by Snapshot ID\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[380,-1400],\"parameters\":{\"url\":\"=https://api.brightdata.com/datasets/v3/progress/{{ $json.snapshot_id }}\",\"options\":{},\"authentication\":\"genericCredentialType\",\"genericAuthType\":\"httpBearerAuth\"},\"credentials\":{\"httpBearerAuth\":{\"id\":\"MR4HBU5dH9phpxNO\",\"name\":\"Bright Data API Key\"}},\"typeVersion\":4.2},{\"id\":\"9c020893-da19-48b1-8816-594bed76ae16\",\"name\":\"Get the data\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[1180,-1400],\"parameters\":{\"url\":\"=https://api.brightdata.com/datasets/v3/snapshot/{{ $json.snapshot_id }}\",\"options\":{},\"sendQuery\":true,\"authentication\":\"genericCredentialType\",\"genericAuthType\":\"httpBearerAuth\",\"queryParameters\":{\"parameters\":[{\"name\":\"format\",\"value\":\"json\"}]}},\"credentials\":{\"httpBearerAuth\":{\"id\":\"MR4HBU5dH9phpxNO\",\"name\":\"Bright Data API Key\"}},\"typeVersion\":4.2},{\"id\":\"02f3e1e6-55af-4472-999b-9a656ba8c76f\",\"name\":\"Initiate request from URLs\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[440,-700],\"parameters\":{\"url\":\"https://api.brightdata.com/datasets/v3/trigger\",\"method\":\"POST\",\"options\":{},\"jsonBody\":\"={{ $json.data.map(i => {\\nreturn {url:i['Product URL'],\\nzipcode: i['ZIP code']\\n}\\n}).toJsonString() }}\",\"sendBody\":true,\"sendQuery\":true,\"sendHeaders\":true,\"specifyBody\":\"json\",\"authentication\":\"genericCredentialType\",\"genericAuthType\":\"httpBearerAuth\",\"queryParameters\":{\"parameters\":[{\"name\":\"dataset_id\",\"value\":\"gd_l7q7dkf244hwjntr0\"},{\"name\":\"include_errors\",\"value\":\"true\"}]},\"headerParameters\":{\"parameters\":[{}]}},\"credentials\":{\"brightdataApi\":{\"id\":\"DQaiy0yJ0lNutzIl\",\"name\":\"BrightData account\"},\"httpBearerAuth\":{\"id\":\"MR4HBU5dH9phpxNO\",\"name\":\"Bright Data API Key\"}},\"typeVersion\":4.2},{\"id\":\"ecf9d3e8-5435-4426-a82b-b5dd6ff85e86\",\"name\":\"Read data from Google Sheet\",\"type\":\"n8n-nodes-base.googleSheets\",\"position\":[-420,-840],\"parameters\":{\"options\":{},\"sheetName\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"gid=0\",\"cachedResultUrl\":\"https://docs.google.com/spreadsheets/d/1-cX3l_oxylIH2J8rzC-LN0XmFoOOXjJGW0bUe-4bsAw/edit#gid=0\",\"cachedResultName\":\"Sheet1\"},\"documentId\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"1-cX3l_oxylIH2J8rzC-LN0XmFoOOXjJGW0bUe-4bsAw\",\"cachedResultUrl\":\"https://docs.google.com/spreadsheets/d/1-cX3l_oxylIH2J8rzC-LN0XmFoOOXjJGW0bUe-4bsAw/edit?usp=drivesdk\",\"cachedResultName\":\"Sample Amazon Products Monitoring\"}},\"credentials\":{\"googleSheetsOAuth2Api\":{\"id\":\"TB3Rn9lCQhQ5vKyg\",\"name\":\"Google Sheets account\"}},\"typeVersion\":4.5},{\"id\":\"c079c769-406e-43d0-9f41-11db53da340f\",\"name\":\"Process URLs by batch of 10s\",\"type\":\"n8n-nodes-base.splitInBatches\",\"position\":[20,-720],\"parameters\":{\"options\":{},\"batchSize\":10},\"typeVersion\":3},{\"id\":\"89930387-958b-48c3-8583-8f2aac59718b\",\"name\":\"Combine the batch\",\"type\":\"n8n-nodes-base.aggregate\",\"position\":[240,-720],\"parameters\":{\"options\":{},\"aggregate\":\"aggregateAllItemData\"},\"typeVersion\":1},{\"id\":\"8ad0c86a-5107-4ccc-b2d6-e4dda7c98b4f\",\"name\":\"Update the records by ASIN\",\"type\":\"n8n-nodes-base.googleSheets\",\"position\":[1520,-1400],\"parameters\":{\"columns\":{\"value\":{\"ASIN\":\"={{ $json.asin }}\",\"Price\":\"={{ $json.final_price }}\"},\"schema\":[{\"id\":\"Product URL\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"Product URL\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"Price\",\"type\":\"string\",\"display\":true,\"required\":false,\"displayName\":\"Price\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"Product Title\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"Product Title\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"ZIP code\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"ZIP code\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"ASIN\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"ASIN\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"row_number\",\"type\":\"string\",\"display\":true,\"removed\":true,\"readOnly\":true,\"required\":false,\"displayName\":\"row_number\",\"defaultMatch\":false,\"canBeUsedToMatch\":true}],\"mappingMode\":\"defineBelow\",\"matchingColumns\":[\"ASIN\"],\"attemptToConvertTypes\":false,\"convertFieldsToString\":false},\"options\":{},\"operation\":\"update\",\"sheetName\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"gid=0\",\"cachedResultUrl\":\"https://docs.google.com/spreadsheets/d/1-cX3l_oxylIH2J8rzC-LN0XmFoOOXjJGW0bUe-4bsAw/edit#gid=0\",\"cachedResultName\":\"Sheet1\"},\"documentId\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"1-cX3l_oxylIH2J8rzC-LN0XmFoOOXjJGW0bUe-4bsAw\",\"cachedResultUrl\":\"https://docs.google.com/spreadsheets/d/1-cX3l_oxylIH2J8rzC-LN0XmFoOOXjJGW0bUe-4bsAw/edit?usp=drivesdk\",\"cachedResultName\":\"Sample Amazon Products Monitoring\"}},\"credentials\":{\"googleSheetsOAuth2Api\":{\"id\":\"TB3Rn9lCQhQ5vKyg\",\"name\":\"Google Sheets account\"}},\"typeVersion\":4.5},{\"id\":\"636aa558-8973-4493-8788-f566edf5021b\",\"name\":\"Check the status of snapshot\",\"type\":\"n8n-nodes-base.switch\",\"position\":[620,-1400],\"parameters\":{\"rules\":{\"values\":[{\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"a2198ad8-e1ae-411d-8c6b-38e74b727560\",\"operator\":{\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"={{ $json.status }}\",\"rightValue\":\"ready\"}]}},{\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"b8fa19aa-f90c-4da5-a039-9962f2a34776\",\"operator\":{\"name\":\"filter.operator.equals\",\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"={{ $json.status }}\",\"rightValue\":\"running\"}]}}]},\"options\":{}},\"typeVersion\":3.2},{\"id\":\"920f766f-2815-46c9-bd24-30d6f4490c58\",\"name\":\"Space the request by 1 second\",\"type\":\"n8n-nodes-base.wait\",\"position\":[660,-660],\"webhookId\":\"ec33605d-d09e-4309-9c8f-10c5128677a2\",\"parameters\":{\"amount\":1},\"typeVersion\":1.1},{\"id\":\"1d79897c-2139-4579-b86e-d9b0bea9e0bc\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-840,-1080],\"parameters\":{\"color\":4,\"width\":700,\"height\":460,\"content\":\"## 从Google Sheets设置定时读取与数据提取\\n创建或修改一个Google表格。该表格需包含名为\\\"产品URL\\\"、\\\"邮编\\\"和\\\"ASIN\\\"的列。其中\\\"ASIN\\\"列应设置为从产品URL中提取ASIN码的公式，具体函数如下：\\n```\\n=REGEXEXTRACT(A4, \\\"/(?:dp|gp/product|product)/([A-Z0-9]{10})\\\")\\n```\"},\"typeVersion\":1},{\"id\":\"9e8866c2-8ae1-467f-a6fb-ce0d1a9e1ac5\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-60,-860],\"parameters\":{\"color\":5,\"width\":940,\"height\":460,\"content\":\"## 批量处理数据至Bright Data\\n\\n从Bright Data获取API密钥，并创建通用承载认证凭证。\"},\"typeVersion\":1},{\"id\":\"b894627b-e326-40a8-8656-db4e1c18a8d2\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[80,-1540],\"parameters\":{\"width\":740,\"height\":460,\"content\":\"## 使用快照ID从Bright Data检查请求的数据\\n\\n此操作用于确认快照是否已完成数据处理。若数据准备就绪，则进入If节点的'true'分支继续执行。\"},\"typeVersion\":1},{\"id\":\"5439d333-922f-4a6f-a391-6963f57be0be\",\"name\":\"Sticky Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1060,-1540],\"parameters\":{\"color\":3,\"width\":720,\"height\":460,\"content\":\"## 从快照中获取数据并更新到Google Sheets\"},\"typeVersion\":1}],\"pinData\":{},\"connections\":{\"Wait\":{\"main\":[[{\"node\":\"Check Status by Snapshot ID\",\"type\":\"main\",\"index\":0}]]},\"Get the data\":{\"main\":[[{\"node\":\"Update the records by ASIN\",\"type\":\"main\",\"index\":0}]]},\"Schedule Trigger\":{\"main\":[[{\"node\":\"Read data from Google Sheet\",\"type\":\"main\",\"index\":0}]]},\"Combine the batch\":{\"main\":[[{\"node\":\"Initiate request from URLs\",\"type\":\"main\",\"index\":0}]]},\"Initiate request from URLs\":{\"main\":[[{\"node\":\"Space the request by 1 second\",\"type\":\"main\",\"index\":0}]]},\"Check Status by Snapshot ID\":{\"main\":[[{\"node\":\"Check the status of snapshot\",\"type\":\"main\",\"index\":0}]]},\"Read data from Google Sheet\":{\"main\":[[{\"node\":\"Process URLs by batch of 10s\",\"type\":\"main\",\"index\":0}]]},\"Check the status of snapshot\":{\"main\":[[{\"node\":\"Get the data\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Wait\",\"type\":\"main\",\"index\":0}]]},\"Process URLs by batch of 10s\":{\"main\":[[{\"node\":\"Wait\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Combine the batch\",\"type\":\"main\",\"index\":0}]]},\"Space the request by 1 second\":{\"main\":[[{\"node\":\"Process URLs by batch of 10s\",\"type\":\"main\",\"index\":0}]]}}}"
}