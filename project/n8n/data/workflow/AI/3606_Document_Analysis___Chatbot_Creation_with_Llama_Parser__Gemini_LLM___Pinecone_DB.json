{
  "title": "Document Analysis & Chatbot Creation with Llama Parser, Gemini LLM & Pinecone DB",
  "url": "https://n8n.io/workflows/3606-document-analysis-and-chatbot-creation-with-llama-parser-gemini-llm-and-pinecone-db/",
  "category": "AI",
  "category_url": "https://n8n.io/workflows/categories/ai/",
  "author": "pavith",
  "publish_date": "Last update 4 days ago",
  "content": "",
  "workflow_json": "{\"id\":\"cGNK44mkCzIh4113\",\"meta\":{\"instanceId\":\"44c282b5a828cd0d7dda8a13c9168fe32406aaef7e8faa5a847408311387e400\"},\"name\":\"My workflow 3\",\"tags\":[],\"nodes\":[{\"id\":\"4db348cf-bd5a-408e-b212-d75b792460b4\",\"name\":\"On form submission4\",\"type\":\"n8n-nodes-base.formTrigger\",\"position\":[-1720,20],\"webhookId\":\"34a4ae98-8eb8-486b-8d7e-dd5fdde15cd5\",\"parameters\":{\"options\":{},\"formTitle\":\"form which gets multiple files\",\"formFields\":{\"values\":[{\"fieldType\":\"file\",\"fieldLabel\":\"file1\",\"requiredField\":true},{\"fieldType\":\"file\",\"fieldLabel\":\"file2\"},{\"fieldLabel\":\"provide your mail Id\",\"requiredField\":true}]}},\"typeVersion\":2.2},{\"id\":\"6a1f197f-310e-4eb1-926f-60cfbae60a49\",\"name\":\"Loop Over Items1\",\"type\":\"n8n-nodes-base.splitInBatches\",\"position\":[-380,20],\"parameters\":{\"options\":{}},\"typeVersion\":3,\"alwaysOutputData\":false},{\"id\":\"7eb210e4-687c-4e9d-b2e7-50d0b85da8dc\",\"name\":\"If2\",\"type\":\"n8n-nodes-base.if\",\"position\":[700,100],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"1edbcd59-130d-4053-9db3-cb8dec068fe0\",\"operator\":{\"name\":\"filter.operator.equals\",\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"={{ $json.status }}\",\"rightValue\":\"SUCCESS\"}]}},\"typeVersion\":2.2},{\"id\":\"e76b9523-3f87-4ad3-87df-1e4e93ead090\",\"name\":\"Aggregate1\",\"type\":\"n8n-nodes-base.aggregate\",\"position\":[0,0],\"parameters\":{\"options\":{},\"fieldsToAggregate\":{\"fieldToAggregate\":[{\"fieldToAggregate\":\"markdown\"}]}},\"typeVersion\":1},{\"id\":\"21234dcf-52dc-4ae0-975e-36a1a18ed456\",\"name\":\"Google Gemini Chat Model5\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatGoogleGemini\",\"position\":[1060,180],\"parameters\":{\"options\":{},\"modelName\":\"models/gemini-1.5-flash\"},\"typeVersion\":1},{\"id\":\"52fcaca7-c49d-4004-96a3-0094ed0e510f\",\"name\":\"split the binary item\",\"type\":\"n8n-nodes-base.code\",\"position\":[-1000,20],\"parameters\":{\"jsCode\":\"// Get the input data\\nconst items = $input.all()\\n\\n// Initialize an array to hold the split items\\nconst splitItems = [];\\n\\n// Iterate over each item\\nitems.forEach(item => {\\n  // Check if the item has binary data\\n  if (item.binary) {\\n    // Iterate over each binary field\\n    for (const [key, value] of Object.entries(item.binary)) {\\n      // Create a new item for each binary file\\n      splitItems.push({\\n        json: {},\\n        binary: {\\n          data: value\\n        }\\n      });\\n    }\\n  }\\n});\\n\\n// Return the split items\\nreturn splitItems;\"},\"typeVersion\":2,\"alwaysOutputData\":true},{\"id\":\"4660eef4-de62-4b13-9f51-05000b1afa33\",\"name\":\"Parsing the document\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[260,100],\"parameters\":{\"url\":\"https://api.cloud.llamaindex.ai/api/parsing/upload\",\"method\":\"POST\",\"options\":{\"redirect\":{\"redirect\":{}}},\"sendBody\":true,\"contentType\":\"multipart-form-data\",\"sendHeaders\":true,\"bodyParameters\":{\"parameters\":[{\"name\":\"=file\",\"parameterType\":\"formBinaryData\",\"inputDataFieldName\":\"=data\"}]},\"headerParameters\":{\"parameters\":[{\"name\":\"accept\",\"value\":\"application/json\"},{\"name\":\"Authorization\",\"value\":\"Bearer $secret token\"}]}},\"typeVersion\":4.2},{\"id\":\"07e76215-b9d4-4adb-b8f3-f8c8615abb56\",\"name\":\"Check the parsing status\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[480,100],\"parameters\":{\"url\":\"=https://api.cloud.llamaindex.ai/api/parsing/job/{{ $json.id }}\",\"options\":{},\"sendHeaders\":true,\"headerParameters\":{\"parameters\":[{\"name\":\"accept\",\"value\":\"application/json\"},{\"name\":\"Authorization\",\"value\":\"Bearer $secret token\"}]}},\"typeVersion\":4.2},{\"id\":\"3909a632-7002-4d60-a53b-3f73e4958c27\",\"name\":\"Provide the markdown\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[1180,400],\"parameters\":{\"url\":\"=https://api.cloud.llamaindex.ai/api/parsing/job/{{ $json.id }}/result/markdown\",\"options\":{},\"sendHeaders\":true,\"headerParameters\":{\"parameters\":[{\"name\":\"accept\",\"value\":\"application/json\"},{\"name\":\"Authorization\",\"value\":\"Bearer $secret token\"}]}},\"typeVersion\":4.2},{\"id\":\"89c25b95-8bc6-4bb5-82d2-1f870416c4af\",\"name\":\"Google Gemini Chat Model6\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatGoogleGemini\",\"position\":[1600,300],\"parameters\":{\"options\":{},\"modelName\":\"models/gemini-1.5-flash\"},\"typeVersion\":1},{\"id\":\"8ddf6e94-6da0-4ef9-a6dc-0db8967914a6\",\"name\":\"Markdown\",\"type\":\"n8n-nodes-base.markdown\",\"position\":[2140,0],\"parameters\":{\"mode\":\"markdownToHtml\",\"options\":{},\"markdown\":\"={{ $json.output }}\",\"destinationKey\":\"html\"},\"typeVersion\":1},{\"id\":\"59c33f95-6f8f-4992-8421-dc3a0b668861\",\"name\":\"Gmail\",\"type\":\"n8n-nodes-base.gmail\",\"position\":[4540,0],\"webhookId\":\"35fdc2a2-b8f8-4217-be0b-66ed98a548f1\",\"parameters\":{\"sendTo\":\"={{ $('On form submission4').item.json['provide your mail Id'] }}\",\"message\":\"=Hi user,\\nThe below document contains the detailed analysis of the provided document.\\n\\nYou can also use the below link to interact with the assistant regarding your doubts on the analysis\\nhttps://pavithranvh28.app.n8n.cloud/webhook/8c5c9e83-f595-4e4b-b45c-544a9a0840c4/chat\\n\\n\\n\",\"options\":{\"attachmentsUi\":{\"attachmentsBinary\":[{}]}},\"subject\":\"Analysis of the documents provided\",\"emailType\":\"text\"},\"typeVersion\":2.1},{\"id\":\"b9bb8338-d52e-4f5b-bd2f-d517851b6014\",\"name\":\"Code\",\"type\":\"n8n-nodes-base.code\",\"position\":[3200,0],\"parameters\":{\"jsCode\":\"const items = $input.first().json.html;\\n\\n// Ensure items is an array\\nconst htmlArray = Array.isArray(items) ? items : [items];\\n\\nfunction htmlToFormattedText(html) {\\n    // Replace heading tags (h1-h6) with bold text\\n    html = html.replace(/<h[1-6]>(.*?)<\\\\/h[1-6]>/gi, \\\"\\\\n**$1**\\\\n\\\");\\n\\n    // Replace paragraph tags with spacing\\n    html = html.replace(/<p>(.*?)<\\\\/p>/gi, \\\"\\\\n$1\\\\n\\\");\\n\\n    // Replace line breaks with newline characters\\n    html = html.replace(/<br\\\\s*\\\\/?>/gi, \\\"\\\\n\\\");\\n\\n    // Remove all other HTML tags\\n    html = html.replace(/<[^>]+>/g, \\\"\\\").trim();\\n\\n    // Remove extra newlines\\n    return html.replace(/\\\\n{2,}/g, \\\"\\\\n\\\").trim();\\n}\\n\\nconst updatedItems = htmlArray.map((item) => {\\n    const htmlContent = item?.json?.html || item;\\n    const textContent = htmlToFormattedText(htmlContent);\\n    return { textContent };\\n});\\n\\nreturn updatedItems;\\n\"},\"typeVersion\":2},{\"id\":\"e8176d99-3625-47a5-8989-80fdce053ba7\",\"name\":\"Convert to File\",\"type\":\"n8n-nodes-base.convertToFile\",\"position\":[3840,0],\"parameters\":{\"options\":{},\"operation\":\"toText\",\"sourceProperty\":\"textContent\"},\"typeVersion\":1.1},{\"id\":\"9fb1a6a0-c49f-48f5-93bc-f0c6e9b8a138\",\"name\":\"AI Agent\",\"type\":\"@n8n/n8n-nodes-langchain.agent\",\"position\":[2600,460],\"parameters\":{\"text\":\"={{ $json.output }}\",\"options\":{\"systemMessage\":\"You are a helpful assistant.\\nObjective:\\nThe agent must process the input content to enhance readability, apply structured formatting, and bold necessary text elements while preserving the original meaning.\\n\\nProcessing Rules:\\nApply Text Formatting:\\n\\nConvert any text enclosed with * (asterisks) into bold.\\nStructurize the Content:\\n\\nOrganize the content using clear section headers.\\nSeparate sections with line breaks for readability.\\nEnsure proper indentation and bullet point usage for clarity.\\nMaintain Clarity & Coherence:\\n\\nReformat the text without changing the core meaning.\\nRemove redundancy while ensuring key details remain intact.\\nText File Compatibility:\\n\\nResponse NEEDS TO BE A TEXT FILE\"},\"promptType\":\"define\"},\"typeVersion\":1.8},{\"id\":\"9995921a-ca41-40c5-9159-350908ca8213\",\"name\":\"Google Gemini Chat Model\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatGoogleGemini\",\"position\":[2780,740],\"parameters\":{\"options\":{},\"modelName\":\"models/gemini-1.5-flash\"},\"typeVersion\":1},{\"id\":\"bd281ef9-bc33-4b3a-9d3f-41d00521b14e\",\"name\":\"Information Extractor\",\"type\":\"@n8n/n8n-nodes-langchain.informationExtractor\",\"position\":[2820,880],\"parameters\":{\"text\":\"={{ $json.output }}\",\"options\":{\"systemPromptTemplate\":\"You are an expert extraction algorithm.\\nOnly extract relevant information from the text.\\nIf you do not know the value of an attribute asked to extract, you may omit the attribute's value.\"},\"attributes\":{\"attributes\":[{\"name\":\"Project Overview\",\"description\":\"overview of the content extracted\"},{\"name\":\"System and prerequisites\",\"description\":\"=which contains the information about the system and the prerequisites needed\"}]}},\"typeVersion\":1},{\"id\":\"2f1c4efb-6885-48c9-b2a6-a13d2e9b4f66\",\"name\":\"Google Gemini Chat Model1\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatGoogleGemini\",\"position\":[3140,1100],\"parameters\":{\"options\":{},\"modelName\":\"models/gemini-1.5-flash\"},\"typeVersion\":1},{\"id\":\"b7a0276a-d253-43a8-a7f3-fb3b83599d7f\",\"name\":\"Convert to File4\",\"type\":\"n8n-nodes-base.convertToFile\",\"position\":[1840,740],\"parameters\":{\"options\":{},\"operation\":\"toText\",\"sourceProperty\":\"output\"},\"typeVersion\":1.1},{\"id\":\"7441e1ff-1966-4535-abaa-ee565db787de\",\"name\":\"Pinecone Vector Store\",\"type\":\"@n8n/n8n-nodes-langchain.vectorStorePinecone\",\"position\":[2080,980],\"parameters\":{\"mode\":\"insert\",\"options\":{},\"pineconeIndex\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"samuraichamploo\",\"cachedResultName\":\"samuraichamploo\"}},\"typeVersion\":1.1},{\"id\":\"82d9d9fb-6f8c-4c86-9287-d5e7e73f58a7\",\"name\":\"Embeddings Mistral Cloud\",\"type\":\"@n8n/n8n-nodes-langchain.embeddingsMistralCloud\",\"position\":[2140,1200],\"parameters\":{\"options\":{}},\"typeVersion\":1},{\"id\":\"3a3332f7-3fda-4898-999e-c5020c0ea02e\",\"name\":\"Default Data Loader\",\"type\":\"@n8n/n8n-nodes-langchain.documentDefaultDataLoader\",\"position\":[2240,1280],\"parameters\":{\"options\":{},\"dataType\":\"binary\"},\"typeVersion\":1},{\"id\":\"4a625913-5c98-4075-9022-058e863af326\",\"name\":\"Recursive Character Text Splitter\",\"type\":\"@n8n/n8n-nodes-langchain.textSplitterRecursiveCharacterTextSplitter\",\"position\":[2320,1460],\"parameters\":{\"options\":{}},\"typeVersion\":1},{\"id\":\"5e38e72b-390f-433f-a638-522537bf1369\",\"name\":\"When chat message received\",\"type\":\"@n8n/n8n-nodes-langchain.chatTrigger\",\"position\":[-1820,660],\"webhookId\":\"8c5c9e83-f595-4e4b-b45c-544a9a0840c4\",\"parameters\":{\"public\":true,\"options\":{}},\"typeVersion\":1.1},{\"id\":\"77ea1fd6-73a9-42f6-835f-b945ce7fd294\",\"name\":\"Question and Answer Chain\",\"type\":\"@n8n/n8n-nodes-langchain.chainRetrievalQa\",\"position\":[-1400,680],\"parameters\":{\"options\":{\"systemPromptTemplate\":\"You are an assistant for question-answering tasks. Use the following pieces of retrieved context to answer the question.\\nIf you don't know the answer, just say that you don't know, don't try to make up an answer.\\n----------------\\nContext: {context}\"}},\"typeVersion\":1.5},{\"id\":\"d71b0efe-7e27-44f8-beb4-370c02ef1d5f\",\"name\":\"Google Gemini Chat Model2\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatGoogleGemini\",\"position\":[-1380,1020],\"parameters\":{\"options\":{},\"modelName\":\"models/gemini-1.5-flash\"},\"typeVersion\":1},{\"id\":\"eb967c9d-415f-4992-bacd-517b7dddd6bf\",\"name\":\"Vector Store Retriever\",\"type\":\"@n8n/n8n-nodes-langchain.retrieverVectorStore\",\"position\":[-1220,900],\"parameters\":{},\"typeVersion\":1},{\"id\":\"690eacb5-1d47-430b-8914-4c474833be0b\",\"name\":\"Pinecone Vector Store1\",\"type\":\"@n8n/n8n-nodes-langchain.vectorStorePinecone\",\"position\":[-900,1060],\"parameters\":{\"options\":{},\"pineconeIndex\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"samuraichamploo\",\"cachedResultName\":\"samuraichamploo\"}},\"typeVersion\":1.1},{\"id\":\"6d289625-ca46-49d7-8ee2-5996dc645ebe\",\"name\":\"Embeddings Mistral Cloud1\",\"type\":\"@n8n/n8n-nodes-langchain.embeddingsMistralCloud\",\"position\":[-780,1460],\"parameters\":{\"options\":{}},\"typeVersion\":1},{\"id\":\"dcc8bb20-e5f3-428e-93be-dc4081e1463c\",\"name\":\"AI Agent1\",\"type\":\"@n8n/n8n-nodes-langchain.agent\",\"position\":[-460,680],\"parameters\":{\"text\":\"={{ $json.response }}\",\"options\":{\"systemMessage\":\"You are a helpful assistant.rephrase the prompt provided and Provide ONLY the response in a text format\"},\"promptType\":\"define\"},\"typeVersion\":1.8},{\"id\":\"777b4e63-7a0a-42fa-9069-83ab006e19a9\",\"name\":\"Google Gemini Chat Model3\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatGoogleGemini\",\"position\":[-400,980],\"parameters\":{\"options\":{},\"modelName\":\"models/gemini-1.5-flash\"},\"typeVersion\":1},{\"id\":\"f5d69ecd-9cdc-4bef-a8ae-7477dfc3f7c7\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-1900,440],\"parameters\":{\"width\":360,\"content\":\"## I'm a note \\nThe below workflow is a chatbot workflow which will be triggered when a user types his/her prompt related to document the user provided for analysis on the chatbot link which was ent to the user via mail.\"},\"typeVersion\":1},{\"id\":\"7140d564-a636-4937-b2c6-811b48dde851\",\"name\":\"Translator Agent\",\"type\":\"@n8n/n8n-nodes-langchain.agent\",\"position\":[1060,0],\"parameters\":{\"text\":\"={{ $('Aggregate1').item.json.markdown }}\",\"options\":{\"systemMessage\":\"You are a helpful assistant. Kindly check the prompt fed and  find the language of the  prompt you receive  and if the prompt is in other language except english translate it and provide that as a response and also ATTACH THE REMAINING PROMPT WHICH IS IN ENGLISH WITH THE RESPONSE\"},\"promptType\":\"define\"},\"typeVersion\":1.8},{\"id\":\"496d49f1-5b7f-48ab-b759-2facd8fade8d\",\"name\":\"Analyzer Agent\",\"type\":\"@n8n/n8n-nodes-langchain.agent\",\"position\":[1420,0],\"parameters\":{\"text\":\"={{ $json.output }}\",\"options\":{\"systemMessage\":\"=You are a helpful assistant. \\n1️⃣ Comprehensive Prompt Analysis\\n\\nCarefully examine the entire prompt provided by the user.\\nEnsure all details are considered before formulating a response.\\n2️⃣ Interactive and Clear Breakdown\\n\\nStructure the response in a well-organized manner with clear topic separation.\\nPresent insights in a way that enhances understanding and usability.\\n3️⃣ Duplicate Check and Handling\\n\\nIdentify and highlight any repeated information within the prompt.\\nIf duplicates exist, consolidate the relevant details to avoid redundancy.\\n4️⃣ Reliable and Actionable Resolutions\\n\\nProvide resolutions that are dependable and practical.\\nEnsure the solutions align with the context and user’s intent.\\nWhere applicable, offer alternative approaches for flexibility.\\nAlso make sure not to add too much of star or hash to indicate the difference\"},\"promptType\":\"define\"},\"typeVersion\":1.8},{\"id\":\"4218f320-c580-41ae-91ca-134bd2cc8128\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[2880,640],\"parameters\":{\"content\":\"## I'm a note \\nThese two subflows are for trial purpose\"},\"typeVersion\":1},{\"id\":\"bc0a3e52-1259-4651-bbe4-9ba727d8e46a\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1420,700],\"parameters\":{\"content\":\"## I'm a note \\nThis subflow is responsible for storing the translated as well as the analyzed contents into the vector database to feed as a knowledge to the chatbot\"},\"typeVersion\":1}],\"active\":false,\"pinData\":{},\"settings\":{\"executionOrder\":\"v1\"},\"versionId\":\"7c6e0b7c-dfbb-45e5-bc16-038ff6175cdc\",\"connections\":{\"If2\":{\"main\":[[{\"node\":\"Provide the markdown\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Check the parsing status\",\"type\":\"main\",\"index\":0}]]},\"Code\":{\"main\":[[{\"node\":\"Convert to File\",\"type\":\"main\",\"index\":0}]]},\"AI Agent\":{\"main\":[[]]},\"Markdown\":{\"main\":[[{\"node\":\"Code\",\"type\":\"main\",\"index\":0}]]},\"Aggregate1\":{\"main\":[[{\"node\":\"Translator Agent\",\"type\":\"main\",\"index\":0}]]},\"Analyzer Agent\":{\"main\":[[{\"node\":\"Markdown\",\"type\":\"main\",\"index\":0},{\"node\":\"AI Agent\",\"type\":\"main\",\"index\":0},{\"node\":\"Information Extractor\",\"type\":\"main\",\"index\":0},{\"node\":\"Convert to File4\",\"type\":\"main\",\"index\":0}]]},\"Convert to File\":{\"main\":[[{\"node\":\"Gmail\",\"type\":\"main\",\"index\":0}]]},\"Convert to File4\":{\"main\":[[{\"node\":\"Pinecone Vector Store\",\"type\":\"main\",\"index\":0}]]},\"Loop Over Items1\":{\"main\":[[{\"node\":\"Aggregate1\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Parsing the document\",\"type\":\"main\",\"index\":0}]]},\"Translator Agent\":{\"main\":[[{\"node\":\"Analyzer Agent\",\"type\":\"main\",\"index\":0},{\"node\":\"Convert to File4\",\"type\":\"main\",\"index\":0}]]},\"Default Data Loader\":{\"ai_document\":[[{\"node\":\"Pinecone Vector Store\",\"type\":\"ai_document\",\"index\":0}]]},\"On form submission4\":{\"main\":[[{\"node\":\"split the binary item\",\"type\":\"main\",\"index\":0}]]},\"Parsing the document\":{\"main\":[[{\"node\":\"Check the parsing status\",\"type\":\"main\",\"index\":0}]]},\"Provide the markdown\":{\"main\":[[{\"node\":\"Loop Over Items1\",\"type\":\"main\",\"index\":0}]]},\"split the binary item\":{\"main\":[[{\"node\":\"Loop Over Items1\",\"type\":\"main\",\"index\":0}]]},\"Pinecone Vector Store1\":{\"ai_vectorStore\":[[{\"node\":\"Vector Store Retriever\",\"type\":\"ai_vectorStore\",\"index\":0}]]},\"Vector Store Retriever\":{\"ai_retriever\":[[{\"node\":\"Question and Answer Chain\",\"type\":\"ai_retriever\",\"index\":0}]]},\"Check the parsing status\":{\"main\":[[{\"node\":\"If2\",\"type\":\"main\",\"index\":0}]]},\"Embeddings Mistral Cloud\":{\"ai_embedding\":[[{\"node\":\"Pinecone Vector Store\",\"type\":\"ai_embedding\",\"index\":0}]]},\"Google Gemini Chat Model\":{\"ai_languageModel\":[[{\"node\":\"AI Agent\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"Embeddings Mistral Cloud1\":{\"ai_embedding\":[[{\"node\":\"Pinecone Vector Store1\",\"type\":\"ai_embedding\",\"index\":0}]]},\"Google Gemini Chat Model1\":{\"ai_languageModel\":[[{\"node\":\"Information Extractor\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"Google Gemini Chat Model2\":{\"ai_languageModel\":[[{\"node\":\"Question and Answer Chain\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"Google Gemini Chat Model3\":{\"ai_languageModel\":[[{\"node\":\"AI Agent1\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"Google Gemini Chat Model5\":{\"ai_languageModel\":[[{\"node\":\"Translator Agent\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"Google Gemini Chat Model6\":{\"ai_languageModel\":[[{\"node\":\"Analyzer Agent\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"Question and Answer Chain\":{\"main\":[[{\"node\":\"AI Agent1\",\"type\":\"main\",\"index\":0}]]},\"When chat message received\":{\"main\":[[{\"node\":\"Question and Answer Chain\",\"type\":\"main\",\"index\":0}]]},\"Recursive Character Text Splitter\":{\"ai_textSplitter\":[[{\"node\":\"Default Data Loader\",\"type\":\"ai_textSplitter\",\"index\":0}]]}}}",
  "readme": "### 📄Description\n\nThis automation workflow enables users to upload files via an N8N form, automatically analyzes the content using Google Gemini agents, and delivers the analyzed results via email along with a chatbot link. The system leverages Llama Cloud API, Google Gemini LLM, Pinecone vector database, and Gmail to provide a seamless, multilingual content analysis experience.\n\n### ✅ Prerequisites\n\nBefore setting up this workflow, ensure the following are in place:\n\nAn active N8N instance.\n\nAccess to Llama Cloud API.\n\nGoogle Gemini LLM API keys (for Translator & Analyzer agents).\n\nA Pinecone account with an active index.\n\nA Gmail account with API access configured.\n\nBasic knowledge of N8N workflow setup.\n\n### ⚙️ Setup Instructions\n\nDeploy the N8N Form\n\nCreate a public-facing form using N8N.\n\nConfigure it to accept:\n\nFile uploads.\n\nUser email input.\n\nFile Preprocessing\n\nStore the uploaded files temporarily.\n\nOrganize and preprocess them as needed.\n\nContent Extraction using Llama Cloud API\n\nFeed the files into the Llama Cloud API.\n\nExtract and parse the content for further processing.\n\n### Translation (if required)\n\nUse a Translator Agent (Google Gemini).\n\nCheck if the content is in English. If not, translate it.\n\n### Content Analysis\n\nForward the (translated) content to the Analyzer Agent (Google Gemini).\n\nPerform deep analysis to extract insights.\n\nVector Storage in Pinecone\n\n### Store both:\n\nThe parsed and translated content.\n\nThe analyzed content.\n\nUse Pinecone to store the content as embeddings for chatbot use.\n\n### User Notification via Gmail\n\nSend the analyzed content and chatbot link to the user’s provided email using Gmail API.\n\n### 🧩 Customization Guidance\n\nTo add more languages: Update the translation logic to include additional language support.\n\nTo modify analysis depth: Adjust the prompts sent to the Gemini Analyzer Agent.\n\nTo change the chatbot behavior: Retrain or reconfigure the chatbot to utilize the new Pinecone index contextually.\n\n### 🔁 Workflow Summary\n\nUser uploads files and email via N8N form.\n\nFiles are parsed using Llama Cloud API.\n\nContent is translated (if needed) using Gemini Translator Agent.\n\nTranslated content is analyzed by the Gemini Analyzer Agent.\n\nParsed and analyzed data is stored in Pinecone.\n\nUser receives email with analyzed results and a chatbot link.\n",
  "readme_html": "<!--[--><div data-v-006f9244=\"\"><h3>📄Description</h3>\n<p>This automation workflow enables users to upload files via an N8N form, automatically analyzes the content using Google Gemini agents, and delivers the analyzed results via email along with a chatbot link. The system leverages Llama Cloud API, Google Gemini LLM, Pinecone vector database, and Gmail to provide a seamless, multilingual content analysis experience.</p>\n<h3>✅ Prerequisites</h3>\n<p>Before setting up this workflow, ensure the following are in place:</p>\n<p>An active N8N instance.</p>\n<p>Access to Llama Cloud API.</p>\n<p>Google Gemini LLM API keys (for Translator &amp; Analyzer agents).</p>\n<p>A Pinecone account with an active index.</p>\n<p>A Gmail account with API access configured.</p>\n<p>Basic knowledge of N8N workflow setup.</p>\n<h3>⚙️ Setup Instructions</h3>\n<p>Deploy the N8N Form</p>\n<p>Create a public-facing form using N8N.</p>\n<p>Configure it to accept:</p>\n<p>File uploads.</p>\n<p>User email input.</p>\n<p>File Preprocessing</p>\n<p>Store the uploaded files temporarily.</p>\n<p>Organize and preprocess them as needed.</p>\n<p>Content Extraction using Llama Cloud API</p>\n<p>Feed the files into the Llama Cloud API.</p>\n<p>Extract and parse the content for further processing.</p>\n<h3>Translation (if required)</h3>\n<p>Use a Translator Agent (Google Gemini).</p>\n<p>Check if the content is in English. If not, translate it.</p>\n<h3>Content Analysis</h3>\n<p>Forward the (translated) content to the Analyzer Agent (Google Gemini).</p>\n<p>Perform deep analysis to extract insights.</p>\n<p>Vector Storage in Pinecone</p>\n<h3>Store both:</h3>\n<p>The parsed and translated content.</p>\n<p>The analyzed content.</p>\n<p>Use Pinecone to store the content as embeddings for chatbot use.</p>\n<h3>User Notification via Gmail</h3>\n<p>Send the analyzed content and chatbot link to the user’s provided email using Gmail API.</p>\n<h3>🧩 Customization Guidance</h3>\n<p>To add more languages: Update the translation logic to include additional language support.</p>\n<p>To modify analysis depth: Adjust the prompts sent to the Gemini Analyzer Agent.</p>\n<p>To change the chatbot behavior: Retrain or reconfigure the chatbot to utilize the new Pinecone index contextually.</p>\n<h3>🔁 Workflow Summary</h3>\n<p>User uploads files and email via N8N form.</p>\n<p>Files are parsed using Llama Cloud API.</p>\n<p>Content is translated (if needed) using Gemini Translator Agent.</p>\n<p>Translated content is analyzed by the Gemini Analyzer Agent.</p>\n<p>Parsed and analyzed data is stored in Pinecone.</p>\n<p>User receives email with analyzed results and a chatbot link.</p>\n</div><!--]-->",
  "readme_zh": "### 📄 功能说明  \n\n本自动化流程允许用户通过N8N表单上传文件，利用Google Gemini智能代理自动分析内容，并通过电子邮件发送分析结果及聊天机器人链接。系统整合了Llama Cloud API、Google Gemini大语言模型、Pinecone向量数据库和Gmail服务，提供流畅的多语言内容分析体验。  \n\n### ✅ 前置条件  \n\n部署前请确保已具备：  \n\n- 运行中的N8N实例  \n- Llama Cloud API访问权限  \n- Google Gemini大语言模型API密钥（用于翻译与分析代理）  \n- 已创建索引的Pinecone账户  \n- 已配置API访问的Gmail账户  \n- 基础的N8N工作流配置知识  \n\n### ⚙️ 配置步骤  \n\n**1. 部署N8N表单**  \n- 使用N8N创建公开表单  \n- 配置表单接收以下内容：  \n  - 文件上传  \n  - 用户邮箱输入  \n\n**2. 文件预处理**  \n- 临时存储上传文件  \n- 按需进行文件整理与预处理  \n\n**3. 通过Llama Cloud API提取内容**  \n- 将文件输入Llama Cloud API  \n- 解析提取的内容以供后续处理  \n\n**4. 翻译（如需要）**  \n- 调用Google Gemini翻译代理  \n- 检测内容语言非英语时自动翻译  \n\n**5. 内容分析**  \n- 将（翻译后的）内容发送至Gemini分析代理  \n- 执行深度分析提取关键信息  \n\n**6. Pinecone向量存储**  \n- 存储以下两类内容至Pinecone：  \n  - 解析后的原始/翻译内容  \n  - 分析生成的内容  \n- 将内容转化为嵌入向量供聊天机器人调用  \n\n**7. 通过Gmail通知用户**  \n- 使用Gmail API向用户发送分析结果与聊天机器人链接  \n\n### 🧩 定制指南  \n\n- **扩展多语言支持**：更新翻译逻辑以增加新语种  \n- **调整分析深度**：修改发送给Gemini分析代理的提示词  \n- **更改聊天机器人行为**：基于新的Pinecone索引上下文重新训练或配置机器人  \n\n### 🔁 流程概览  \n\n1. 用户通过N8N表单提交文件及邮箱  \n2. Llama Cloud API解析文件内容  \n3. Gemini翻译代理处理非英语内容  \n4. Gemini分析代理执行深度分析  \n5. 原始数据与分析结果存入Pinecone  \n6. 用户邮箱接收分析报告及聊天机器人链接",
  "title_zh": "使用Llama解析器、Gemini大语言模型与Pinecone数据库实现文档分析与聊天机器人构建",
  "publish_date_absolute": "2025-05-03",
  "publish_date_zh": "上次更新于4天前",
  "workflow_json_zh": "{\n  \"id\": \"cGNK44mkCzIh4113\",\n  \"meta\": {\n    \"instanceId\": \"44c282b5a828cd0d7dda8a13c9168fe32406aaef7e8faa5a847408311387e400\"\n  },\n  \"name\": \"My workflow 3\",\n  \"tags\": [],\n  \"nodes\": [\n    {\n      \"id\": \"4db348cf-bd5a-408e-b212-d75b792460b4\",\n      \"name\": \"On form submission4\",\n      \"type\": \"n8n-nodes-base.formTrigger\",\n      \"position\": [\n        -1720,\n        20\n      ],\n      \"webhookId\": \"34a4ae98-8eb8-486b-8d7e-dd5fdde15cd5\",\n      \"parameters\": {\n        \"options\": {},\n        \"formTitle\": \"form which gets multiple files\",\n        \"formFields\": {\n          \"values\": [\n            {\n              \"fieldType\": \"file\",\n              \"fieldLabel\": \"file1\",\n              \"requiredField\": true\n            },\n            {\n              \"fieldType\": \"file\",\n              \"fieldLabel\": \"file2\"\n            },\n            {\n              \"fieldLabel\": \"provide your mail Id\",\n              \"requiredField\": true\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"6a1f197f-310e-4eb1-926f-60cfbae60a49\",\n      \"name\": \"Loop Over Items1\",\n      \"type\": \"n8n-nodes-base.splitInBatches\",\n      \"position\": [\n        -380,\n        20\n      ],\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"typeVersion\": 3,\n      \"alwaysOutputData\": false\n    },\n    {\n      \"id\": \"7eb210e4-687c-4e9d-b2e7-50d0b85da8dc\",\n      \"name\": \"If2\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        700,\n        100\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"1edbcd59-130d-4053-9db3-cb8dec068fe0\",\n              \"operator\": {\n                \"name\": \"filter.operator.equals\",\n                \"type\": \"string\",\n                \"operation\": \"equals\"\n              },\n              \"leftValue\": \"={{ $json.status }}\",\n              \"rightValue\": \"SUCCESS\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"e76b9523-3f87-4ad3-87df-1e4e93ead090\",\n      \"name\": \"Aggregate1\",\n      \"type\": \"n8n-nodes-base.aggregate\",\n      \"position\": [\n        0,\n        0\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"fieldsToAggregate\": {\n          \"fieldToAggregate\": [\n            {\n              \"fieldToAggregate\": \"markdown\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"21234dcf-52dc-4ae0-975e-36a1a18ed456\",\n      \"name\": \"Google Gemini Chat Model5\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatGoogleGemini\",\n      \"position\": [\n        1060,\n        180\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"modelName\": \"models/gemini-1.5-flash\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"52fcaca7-c49d-4004-96a3-0094ed0e510f\",\n      \"name\": \"split the binary item\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        -1000,\n        20\n      ],\n      \"parameters\": {\n        \"jsCode\": \"// Get the input data\\nconst items = $input.all()\\n\\n// Initialize an array to hold the split items\\nconst splitItems = [];\\n\\n// Iterate over each item\\nitems.forEach(item => {\\n  // Check if the item has binary data\\n  if (item.binary) {\\n    // Iterate over each binary field\\n    for (const [key, value] of Object.entries(item.binary)) {\\n      // Create a new item for each binary file\\n      splitItems.push({\\n        json: {},\\n        binary: {\\n          data: value\\n        }\\n      });\\n    }\\n  }\\n});\\n\\n// Return the split items\\nreturn splitItems;\"\n      },\n      \"typeVersion\": 2,\n      \"alwaysOutputData\": true\n    },\n    {\n      \"id\": \"4660eef4-de62-4b13-9f51-05000b1afa33\",\n      \"name\": \"Parsing the document\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        260,\n        100\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.cloud.llamaindex.ai/api/parsing/upload\",\n        \"method\": \"POST\",\n        \"options\": {\n          \"redirect\": {\n            \"redirect\": {}\n          }\n        },\n        \"sendBody\": true,\n        \"contentType\": \"multipart-form-data\",\n        \"sendHeaders\": true,\n        \"bodyParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"=file\",\n              \"parameterType\": \"formBinaryData\",\n              \"inputDataFieldName\": \"=data\"\n            }\n          ]\n        },\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"accept\",\n              \"value\": \"application/json\"\n            },\n            {\n              \"name\": \"Authorization\",\n              \"value\": \"Bearer $secret token\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"07e76215-b9d4-4adb-b8f3-f8c8615abb56\",\n      \"name\": \"Check the parsing status\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        480,\n        100\n      ],\n      \"parameters\": {\n        \"url\": \"=https://api.cloud.llamaindex.ai/api/parsing/job/{{ $json.id }}\",\n        \"options\": {},\n        \"sendHeaders\": true,\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"accept\",\n              \"value\": \"application/json\"\n            },\n            {\n              \"name\": \"Authorization\",\n              \"value\": \"Bearer $secret token\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"3909a632-7002-4d60-a53b-3f73e4958c27\",\n      \"name\": \"Provide the markdown\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1180,\n        400\n      ],\n      \"parameters\": {\n        \"url\": \"=https://api.cloud.llamaindex.ai/api/parsing/job/{{ $json.id }}/result/markdown\",\n        \"options\": {},\n        \"sendHeaders\": true,\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"accept\",\n              \"value\": \"application/json\"\n            },\n            {\n              \"name\": \"Authorization\",\n              \"value\": \"Bearer $secret token\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"89c25b95-8bc6-4bb5-82d2-1f870416c4af\",\n      \"name\": \"Google Gemini Chat Model6\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatGoogleGemini\",\n      \"position\": [\n        1600,\n        300\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"modelName\": \"models/gemini-1.5-flash\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"8ddf6e94-6da0-4ef9-a6dc-0db8967914a6\",\n      \"name\": \"Markdown\",\n      \"type\": \"n8n-nodes-base.markdown\",\n      \"position\": [\n        2140,\n        0\n      ],\n      \"parameters\": {\n        \"mode\": \"markdownToHtml\",\n        \"options\": {},\n        \"markdown\": \"={{ $json.output }}\",\n        \"destinationKey\": \"html\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"59c33f95-6f8f-4992-8421-dc3a0b668861\",\n      \"name\": \"Gmail\",\n      \"type\": \"n8n-nodes-base.gmail\",\n      \"position\": [\n        4540,\n        0\n      ],\n      \"webhookId\": \"35fdc2a2-b8f8-4217-be0b-66ed98a548f1\",\n      \"parameters\": {\n        \"sendTo\": \"={{ $('On form submission4').item.json['provide your mail Id'] }}\",\n        \"message\": \"=Hi user,\\nThe below document contains the detailed analysis of the provided document.\\n\\nYou can also use the below link to interact with the assistant regarding your doubts on the analysis\\nhttps://pavithranvh28.app.n8n.cloud/webhook/8c5c9e83-f595-4e4b-b45c-544a9a0840c4/chat\\n\\n\\n\",\n        \"options\": {\n          \"attachmentsUi\": {\n            \"attachmentsBinary\": [\n              {}\n            ]\n          }\n        },\n        \"subject\": \"Analysis of the documents provided\",\n        \"emailType\": \"text\"\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"b9bb8338-d52e-4f5b-bd2f-d517851b6014\",\n      \"name\": \"Code\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        3200,\n        0\n      ],\n      \"parameters\": {\n        \"jsCode\": \"const items = $input.first().json.html;\\n\\n// Ensure items is an array\\nconst htmlArray = Array.isArray(items) ? items : [items];\\n\\nfunction htmlToFormattedText(html) {\\n    // Replace heading tags (h1-h6) with bold text\\n    html = html.replace(/<h[1-6]>(.*?)<\\\\/h[1-6]>/gi, \\\"\\\\n**$1**\\\\n\\\");\\n\\n    // Replace paragraph tags with spacing\\n    html = html.replace(/<p>(.*?)<\\\\/p>/gi, \\\"\\\\n$1\\\\n\\\");\\n\\n    // Replace line breaks with newline characters\\n    html = html.replace(/<br\\\\s*\\\\/?>/gi, \\\"\\\\n\\\");\\n\\n    // Remove all other HTML tags\\n    html = html.replace(/<[^>]+>/g, \\\"\\\").trim();\\n\\n    // Remove extra newlines\\n    return html.replace(/\\\\n{2,}/g, \\\"\\\\n\\\").trim();\\n}\\n\\nconst updatedItems = htmlArray.map((item) => {\\n    const htmlContent = item?.json?.html || item;\\n    const textContent = htmlToFormattedText(htmlContent);\\n    return { textContent };\\n});\\n\\nreturn updatedItems;\\n\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"e8176d99-3625-47a5-8989-80fdce053ba7\",\n      \"name\": \"Convert to File\",\n      \"type\": \"n8n-nodes-base.convertToFile\",\n      \"position\": [\n        3840,\n        0\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"operation\": \"toText\",\n        \"sourceProperty\": \"textContent\"\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"9fb1a6a0-c49f-48f5-93bc-f0c6e9b8a138\",\n      \"name\": \"AI Agent\",\n      \"type\": \"@n8n/n8n-nodes-langchain.agent\",\n      \"position\": [\n        2600,\n        460\n      ],\n      \"parameters\": {\n        \"text\": \"={{ $json.output }}\",\n        \"options\": {\n          \"systemMessage\": \"You are a helpful assistant.\\nObjective:\\nThe agent must process the input content to enhance readability, apply structured formatting, and bold necessary text elements while preserving the original meaning.\\n\\nProcessing Rules:\\nApply Text Formatting:\\n\\nConvert any text enclosed with * (asterisks) into bold.\\nStructurize the Content:\\n\\nOrganize the content using clear section headers.\\nSeparate sections with line breaks for readability.\\nEnsure proper indentation and bullet point usage for clarity.\\nMaintain Clarity & Coherence:\\n\\nReformat the text without changing the core meaning.\\nRemove redundancy while ensuring key details remain intact.\\nText File Compatibility:\\n\\nResponse NEEDS TO BE A TEXT FILE\"\n        },\n        \"promptType\": \"define\"\n      },\n      \"typeVersion\": 1.8\n    },\n    {\n      \"id\": \"9995921a-ca41-40c5-9159-350908ca8213\",\n      \"name\": \"Google Gemini Chat Model\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatGoogleGemini\",\n      \"position\": [\n        2780,\n        740\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"modelName\": \"models/gemini-1.5-flash\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"bd281ef9-bc33-4b3a-9d3f-41d00521b14e\",\n      \"name\": \"Information Extractor\",\n      \"type\": \"@n8n/n8n-nodes-langchain.informationExtractor\",\n      \"position\": [\n        2820,\n        880\n      ],\n      \"parameters\": {\n        \"text\": \"={{ $json.output }}\",\n        \"options\": {\n          \"systemPromptTemplate\": \"You are an expert extraction algorithm.\\nOnly extract relevant information from the text.\\nIf you do not know the value of an attribute asked to extract, you may omit the attribute's value.\"\n        },\n        \"attributes\": {\n          \"attributes\": [\n            {\n              \"name\": \"Project Overview\",\n              \"description\": \"overview of the content extracted\"\n            },\n            {\n              \"name\": \"System and prerequisites\",\n              \"description\": \"=which contains the information about the system and the prerequisites needed\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"2f1c4efb-6885-48c9-b2a6-a13d2e9b4f66\",\n      \"name\": \"Google Gemini Chat Model1\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatGoogleGemini\",\n      \"position\": [\n        3140,\n        1100\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"modelName\": \"models/gemini-1.5-flash\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"b7a0276a-d253-43a8-a7f3-fb3b83599d7f\",\n      \"name\": \"Convert to File4\",\n      \"type\": \"n8n-nodes-base.convertToFile\",\n      \"position\": [\n        1840,\n        740\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"operation\": \"toText\",\n        \"sourceProperty\": \"output\"\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"7441e1ff-1966-4535-abaa-ee565db787de\",\n      \"name\": \"Pinecone Vector Store\",\n      \"type\": \"@n8n/n8n-nodes-langchain.vectorStorePinecone\",\n      \"position\": [\n        2080,\n        980\n      ],\n      \"parameters\": {\n        \"mode\": \"insert\",\n        \"options\": {},\n        \"pineconeIndex\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"samuraichamploo\",\n          \"cachedResultName\": \"samuraichamploo\"\n        }\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"82d9d9fb-6f8c-4c86-9287-d5e7e73f58a7\",\n      \"name\": \"Embeddings Mistral Cloud\",\n      \"type\": \"@n8n/n8n-nodes-langchain.embeddingsMistralCloud\",\n      \"position\": [\n        2140,\n        1200\n      ],\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"3a3332f7-3fda-4898-999e-c5020c0ea02e\",\n      \"name\": \"Default Data Loader\",\n      \"type\": \"@n8n/n8n-nodes-langchain.documentDefaultDataLoader\",\n      \"position\": [\n        2240,\n        1280\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"dataType\": \"binary\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"4a625913-5c98-4075-9022-058e863af326\",\n      \"name\": \"Recursive Character Text Splitter\",\n      \"type\": \"@n8n/n8n-nodes-langchain.textSplitterRecursiveCharacterTextSplitter\",\n      \"position\": [\n        2320,\n        1460\n      ],\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"5e38e72b-390f-433f-a638-522537bf1369\",\n      \"name\": \"When chat message received\",\n      \"type\": \"@n8n/n8n-nodes-langchain.chatTrigger\",\n      \"position\": [\n        -1820,\n        660\n      ],\n      \"webhookId\": \"8c5c9e83-f595-4e4b-b45c-544a9a0840c4\",\n      \"parameters\": {\n        \"public\": true,\n        \"options\": {}\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"77ea1fd6-73a9-42f6-835f-b945ce7fd294\",\n      \"name\": \"Question and Answer Chain\",\n      \"type\": \"@n8n/n8n-nodes-langchain.chainRetrievalQa\",\n      \"position\": [\n        -1400,\n        680\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"systemPromptTemplate\": \"You are an assistant for question-answering tasks. Use the following pieces of retrieved context to answer the question.\\nIf you don't know the answer, just say that you don't know, don't try to make up an answer.\\n----------------\\nContext: {context}\"\n        }\n      },\n      \"typeVersion\": 1.5\n    },\n    {\n      \"id\": \"d71b0efe-7e27-44f8-beb4-370c02ef1d5f\",\n      \"name\": \"Google Gemini Chat Model2\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatGoogleGemini\",\n      \"position\": [\n        -1380,\n        1020\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"modelName\": \"models/gemini-1.5-flash\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"eb967c9d-415f-4992-bacd-517b7dddd6bf\",\n      \"name\": \"Vector Store Retriever\",\n      \"type\": \"@n8n/n8n-nodes-langchain.retrieverVectorStore\",\n      \"position\": [\n        -1220,\n        900\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"690eacb5-1d47-430b-8914-4c474833be0b\",\n      \"name\": \"Pinecone Vector Store1\",\n      \"type\": \"@n8n/n8n-nodes-langchain.vectorStorePinecone\",\n      \"position\": [\n        -900,\n        1060\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"pineconeIndex\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"samuraichamploo\",\n          \"cachedResultName\": \"samuraichamploo\"\n        }\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"6d289625-ca46-49d7-8ee2-5996dc645ebe\",\n      \"name\": \"Embeddings Mistral Cloud1\",\n      \"type\": \"@n8n/n8n-nodes-langchain.embeddingsMistralCloud\",\n      \"position\": [\n        -780,\n        1460\n      ],\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"dcc8bb20-e5f3-428e-93be-dc4081e1463c\",\n      \"name\": \"AI Agent1\",\n      \"type\": \"@n8n/n8n-nodes-langchain.agent\",\n      \"position\": [\n        -460,\n        680\n      ],\n      \"parameters\": {\n        \"text\": \"={{ $json.response }}\",\n        \"options\": {\n          \"systemMessage\": \"You are a helpful assistant.rephrase the prompt provided and Provide ONLY the response in a text format\"\n        },\n        \"promptType\": \"define\"\n      },\n      \"typeVersion\": 1.8\n    },\n    {\n      \"id\": \"777b4e63-7a0a-42fa-9069-83ab006e19a9\",\n      \"name\": \"Google Gemini Chat Model3\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatGoogleGemini\",\n      \"position\": [\n        -400,\n        980\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"modelName\": \"models/gemini-1.5-flash\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"f5d69ecd-9cdc-4bef-a8ae-7477dfc3f7c7\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -1900,\n        440\n      ],\n      \"parameters\": {\n        \"width\": 360,\n        \"content\": \"## 我是一个说明  \\n以下工作流程是一个聊天机器人流程，当用户在聊天机器人链接中输入与其提供的待分析文档相关的提示时，该流程将被触发。该链接已通过邮件发送给用户。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"7140d564-a636-4937-b2c6-811b48dde851\",\n      \"name\": \"Translator Agent\",\n      \"type\": \"@n8n/n8n-nodes-langchain.agent\",\n      \"position\": [\n        1060,\n        0\n      ],\n      \"parameters\": {\n        \"text\": \"={{ $('Aggregate1').item.json.markdown }}\",\n        \"options\": {\n          \"systemMessage\": \"You are a helpful assistant. Kindly check the prompt fed and  find the language of the  prompt you receive  and if the prompt is in other language except english translate it and provide that as a response and also ATTACH THE REMAINING PROMPT WHICH IS IN ENGLISH WITH THE RESPONSE\"\n        },\n        \"promptType\": \"define\"\n      },\n      \"typeVersion\": 1.8\n    },\n    {\n      \"id\": \"496d49f1-5b7f-48ab-b759-2facd8fade8d\",\n      \"name\": \"Analyzer Agent\",\n      \"type\": \"@n8n/n8n-nodes-langchain.agent\",\n      \"position\": [\n        1420,\n        0\n      ],\n      \"parameters\": {\n        \"text\": \"={{ $json.output }}\",\n        \"options\": {\n          \"systemMessage\": \"=You are a helpful assistant. \\n1️⃣ Comprehensive Prompt Analysis\\n\\nCarefully examine the entire prompt provided by the user.\\nEnsure all details are considered before formulating a response.\\n2️⃣ Interactive and Clear Breakdown\\n\\nStructure the response in a well-organized manner with clear topic separation.\\nPresent insights in a way that enhances understanding and usability.\\n3️⃣ Duplicate Check and Handling\\n\\nIdentify and highlight any repeated information within the prompt.\\nIf duplicates exist, consolidate the relevant details to avoid redundancy.\\n4️⃣ Reliable and Actionable Resolutions\\n\\nProvide resolutions that are dependable and practical.\\nEnsure the solutions align with the context and user’s intent.\\nWhere applicable, offer alternative approaches for flexibility.\\nAlso make sure not to add too much of star or hash to indicate the difference\"\n        },\n        \"promptType\": \"define\"\n      },\n      \"typeVersion\": 1.8\n    },\n    {\n      \"id\": \"4218f320-c580-41ae-91ca-134bd2cc8128\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        2880,\n        640\n      ],\n      \"parameters\": {\n        \"content\": \"## 我是备注\\n这两个子流程仅供试用\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"bc0a3e52-1259-4651-bbe4-9ba727d8e46a\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1420,\n        700\n      ],\n      \"parameters\": {\n        \"content\": \"## 我是一个笔记  \\n该子流程负责将翻译和分析后的内容存储到向量数据库中，作为聊天机器人的知识库来源。\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"active\": false,\n  \"pinData\": {},\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"7c6e0b7c-dfbb-45e5-bc16-038ff6175cdc\",\n  \"connections\": {\n    \"If2\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Provide the markdown\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Check the parsing status\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Code\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Convert to File\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"AI Agent\": {\n      \"main\": [\n        []\n      ]\n    },\n    \"Markdown\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Code\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Aggregate1\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Translator Agent\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Analyzer Agent\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Markdown\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Information Extractor\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Convert to File4\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Convert to File\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Gmail\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Convert to File4\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Pinecone Vector Store\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Loop Over Items1\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Aggregate1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Parsing the document\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Translator Agent\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Analyzer Agent\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Convert to File4\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Default Data Loader\": {\n      \"ai_document\": [\n        [\n          {\n            \"node\": \"Pinecone Vector Store\",\n            \"type\": \"ai_document\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"On form submission4\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"split the binary item\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Parsing the document\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Check the parsing status\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Provide the markdown\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Loop Over Items1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"split the binary item\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Loop Over Items1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Pinecone Vector Store1\": {\n      \"ai_vectorStore\": [\n        [\n          {\n            \"node\": \"Vector Store Retriever\",\n            \"type\": \"ai_vectorStore\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Vector Store Retriever\": {\n      \"ai_retriever\": [\n        [\n          {\n            \"node\": \"Question and Answer Chain\",\n            \"type\": \"ai_retriever\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Check the parsing status\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"If2\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Embeddings Mistral Cloud\": {\n      \"ai_embedding\": [\n        [\n          {\n            \"node\": \"Pinecone Vector Store\",\n            \"type\": \"ai_embedding\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Google Gemini Chat Model\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Embeddings Mistral Cloud1\": {\n      \"ai_embedding\": [\n        [\n          {\n            \"node\": \"Pinecone Vector Store1\",\n            \"type\": \"ai_embedding\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Google Gemini Chat Model1\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"Information Extractor\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Google Gemini Chat Model2\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"Question and Answer Chain\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Google Gemini Chat Model3\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"AI Agent1\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Google Gemini Chat Model5\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"Translator Agent\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Google Gemini Chat Model6\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"Analyzer Agent\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Question and Answer Chain\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"AI Agent1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When chat message received\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Question and Answer Chain\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Recursive Character Text Splitter\": {\n      \"ai_textSplitter\": [\n        [\n          {\n            \"node\": \"Default Data Loader\",\n            \"type\": \"ai_textSplitter\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}