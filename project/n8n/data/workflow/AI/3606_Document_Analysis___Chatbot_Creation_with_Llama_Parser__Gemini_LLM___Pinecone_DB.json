{
  "title": "Document Analysis & Chatbot Creation with Llama Parser, Gemini LLM & Pinecone DB",
  "url": "https://n8n.io/workflows/3606-document-analysis-and-chatbot-creation-with-llama-parser-gemini-llm-and-pinecone-db/",
  "category": "AI",
  "category_url": "https://n8n.io/workflows/categories/ai/",
  "author": "pavith",
  "publish_date": "Last update 4 days ago",
  "content": "",
  "workflow_json": "{\"id\":\"cGNK44mkCzIh4113\",\"meta\":{\"instanceId\":\"44c282b5a828cd0d7dda8a13c9168fe32406aaef7e8faa5a847408311387e400\"},\"name\":\"My workflow 3\",\"tags\":[],\"nodes\":[{\"id\":\"4db348cf-bd5a-408e-b212-d75b792460b4\",\"name\":\"On form submission4\",\"type\":\"n8n-nodes-base.formTrigger\",\"position\":[-1720,20],\"webhookId\":\"34a4ae98-8eb8-486b-8d7e-dd5fdde15cd5\",\"parameters\":{\"options\":{},\"formTitle\":\"form which gets multiple files\",\"formFields\":{\"values\":[{\"fieldType\":\"file\",\"fieldLabel\":\"file1\",\"requiredField\":true},{\"fieldType\":\"file\",\"fieldLabel\":\"file2\"},{\"fieldLabel\":\"provide your mail Id\",\"requiredField\":true}]}},\"typeVersion\":2.2},{\"id\":\"6a1f197f-310e-4eb1-926f-60cfbae60a49\",\"name\":\"Loop Over Items1\",\"type\":\"n8n-nodes-base.splitInBatches\",\"position\":[-380,20],\"parameters\":{\"options\":{}},\"typeVersion\":3,\"alwaysOutputData\":false},{\"id\":\"7eb210e4-687c-4e9d-b2e7-50d0b85da8dc\",\"name\":\"If2\",\"type\":\"n8n-nodes-base.if\",\"position\":[700,100],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"1edbcd59-130d-4053-9db3-cb8dec068fe0\",\"operator\":{\"name\":\"filter.operator.equals\",\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"={{ $json.status }}\",\"rightValue\":\"SUCCESS\"}]}},\"typeVersion\":2.2},{\"id\":\"e76b9523-3f87-4ad3-87df-1e4e93ead090\",\"name\":\"Aggregate1\",\"type\":\"n8n-nodes-base.aggregate\",\"position\":[0,0],\"parameters\":{\"options\":{},\"fieldsToAggregate\":{\"fieldToAggregate\":[{\"fieldToAggregate\":\"markdown\"}]}},\"typeVersion\":1},{\"id\":\"21234dcf-52dc-4ae0-975e-36a1a18ed456\",\"name\":\"Google Gemini Chat Model5\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatGoogleGemini\",\"position\":[1060,180],\"parameters\":{\"options\":{},\"modelName\":\"models/gemini-1.5-flash\"},\"typeVersion\":1},{\"id\":\"52fcaca7-c49d-4004-96a3-0094ed0e510f\",\"name\":\"split the binary item\",\"type\":\"n8n-nodes-base.code\",\"position\":[-1000,20],\"parameters\":{\"jsCode\":\"// Get the input data\\nconst items = $input.all()\\n\\n// Initialize an array to hold the split items\\nconst splitItems = [];\\n\\n// Iterate over each item\\nitems.forEach(item => {\\n  // Check if the item has binary data\\n  if (item.binary) {\\n    // Iterate over each binary field\\n    for (const [key, value] of Object.entries(item.binary)) {\\n      // Create a new item for each binary file\\n      splitItems.push({\\n        json: {},\\n        binary: {\\n          data: value\\n        }\\n      });\\n    }\\n  }\\n});\\n\\n// Return the split items\\nreturn splitItems;\"},\"typeVersion\":2,\"alwaysOutputData\":true},{\"id\":\"4660eef4-de62-4b13-9f51-05000b1afa33\",\"name\":\"Parsing the document\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[260,100],\"parameters\":{\"url\":\"https://api.cloud.llamaindex.ai/api/parsing/upload\",\"method\":\"POST\",\"options\":{\"redirect\":{\"redirect\":{}}},\"sendBody\":true,\"contentType\":\"multipart-form-data\",\"sendHeaders\":true,\"bodyParameters\":{\"parameters\":[{\"name\":\"=file\",\"parameterType\":\"formBinaryData\",\"inputDataFieldName\":\"=data\"}]},\"headerParameters\":{\"parameters\":[{\"name\":\"accept\",\"value\":\"application/json\"},{\"name\":\"Authorization\",\"value\":\"Bearer $secret token\"}]}},\"typeVersion\":4.2},{\"id\":\"07e76215-b9d4-4adb-b8f3-f8c8615abb56\",\"name\":\"Check the parsing status\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[480,100],\"parameters\":{\"url\":\"=https://api.cloud.llamaindex.ai/api/parsing/job/{{ $json.id }}\",\"options\":{},\"sendHeaders\":true,\"headerParameters\":{\"parameters\":[{\"name\":\"accept\",\"value\":\"application/json\"},{\"name\":\"Authorization\",\"value\":\"Bearer $secret token\"}]}},\"typeVersion\":4.2},{\"id\":\"3909a632-7002-4d60-a53b-3f73e4958c27\",\"name\":\"Provide the markdown\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[1180,400],\"parameters\":{\"url\":\"=https://api.cloud.llamaindex.ai/api/parsing/job/{{ $json.id }}/result/markdown\",\"options\":{},\"sendHeaders\":true,\"headerParameters\":{\"parameters\":[{\"name\":\"accept\",\"value\":\"application/json\"},{\"name\":\"Authorization\",\"value\":\"Bearer $secret token\"}]}},\"typeVersion\":4.2},{\"id\":\"89c25b95-8bc6-4bb5-82d2-1f870416c4af\",\"name\":\"Google Gemini Chat Model6\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatGoogleGemini\",\"position\":[1600,300],\"parameters\":{\"options\":{},\"modelName\":\"models/gemini-1.5-flash\"},\"typeVersion\":1},{\"id\":\"8ddf6e94-6da0-4ef9-a6dc-0db8967914a6\",\"name\":\"Markdown\",\"type\":\"n8n-nodes-base.markdown\",\"position\":[2140,0],\"parameters\":{\"mode\":\"markdownToHtml\",\"options\":{},\"markdown\":\"={{ $json.output }}\",\"destinationKey\":\"html\"},\"typeVersion\":1},{\"id\":\"59c33f95-6f8f-4992-8421-dc3a0b668861\",\"name\":\"Gmail\",\"type\":\"n8n-nodes-base.gmail\",\"position\":[4540,0],\"webhookId\":\"35fdc2a2-b8f8-4217-be0b-66ed98a548f1\",\"parameters\":{\"sendTo\":\"={{ $('On form submission4').item.json['provide your mail Id'] }}\",\"message\":\"=Hi user,\\nThe below document contains the detailed analysis of the provided document.\\n\\nYou can also use the below link to interact with the assistant regarding your doubts on the analysis\\nhttps://pavithranvh28.app.n8n.cloud/webhook/8c5c9e83-f595-4e4b-b45c-544a9a0840c4/chat\\n\\n\\n\",\"options\":{\"attachmentsUi\":{\"attachmentsBinary\":[{}]}},\"subject\":\"Analysis of the documents provided\",\"emailType\":\"text\"},\"typeVersion\":2.1},{\"id\":\"b9bb8338-d52e-4f5b-bd2f-d517851b6014\",\"name\":\"Code\",\"type\":\"n8n-nodes-base.code\",\"position\":[3200,0],\"parameters\":{\"jsCode\":\"const items = $input.first().json.html;\\n\\n// Ensure items is an array\\nconst htmlArray = Array.isArray(items) ? items : [items];\\n\\nfunction htmlToFormattedText(html) {\\n    // Replace heading tags (h1-h6) with bold text\\n    html = html.replace(/<h[1-6]>(.*?)<\\\\/h[1-6]>/gi, \\\"\\\\n**$1**\\\\n\\\");\\n\\n    // Replace paragraph tags with spacing\\n    html = html.replace(/<p>(.*?)<\\\\/p>/gi, \\\"\\\\n$1\\\\n\\\");\\n\\n    // Replace line breaks with newline characters\\n    html = html.replace(/<br\\\\s*\\\\/?>/gi, \\\"\\\\n\\\");\\n\\n    // Remove all other HTML tags\\n    html = html.replace(/<[^>]+>/g, \\\"\\\").trim();\\n\\n    // Remove extra newlines\\n    return html.replace(/\\\\n{2,}/g, \\\"\\\\n\\\").trim();\\n}\\n\\nconst updatedItems = htmlArray.map((item) => {\\n    const htmlContent = item?.json?.html || item;\\n    const textContent = htmlToFormattedText(htmlContent);\\n    return { textContent };\\n});\\n\\nreturn updatedItems;\\n\"},\"typeVersion\":2},{\"id\":\"e8176d99-3625-47a5-8989-80fdce053ba7\",\"name\":\"Convert to File\",\"type\":\"n8n-nodes-base.convertToFile\",\"position\":[3840,0],\"parameters\":{\"options\":{},\"operation\":\"toText\",\"sourceProperty\":\"textContent\"},\"typeVersion\":1.1},{\"id\":\"9fb1a6a0-c49f-48f5-93bc-f0c6e9b8a138\",\"name\":\"AI Agent\",\"type\":\"@n8n/n8n-nodes-langchain.agent\",\"position\":[2600,460],\"parameters\":{\"text\":\"={{ $json.output }}\",\"options\":{\"systemMessage\":\"You are a helpful assistant.\\nObjective:\\nThe agent must process the input content to enhance readability, apply structured formatting, and bold necessary text elements while preserving the original meaning.\\n\\nProcessing Rules:\\nApply Text Formatting:\\n\\nConvert any text enclosed with * (asterisks) into bold.\\nStructurize the Content:\\n\\nOrganize the content using clear section headers.\\nSeparate sections with line breaks for readability.\\nEnsure proper indentation and bullet point usage for clarity.\\nMaintain Clarity & Coherence:\\n\\nReformat the text without changing the core meaning.\\nRemove redundancy while ensuring key details remain intact.\\nText File Compatibility:\\n\\nResponse NEEDS TO BE A TEXT FILE\"},\"promptType\":\"define\"},\"typeVersion\":1.8},{\"id\":\"9995921a-ca41-40c5-9159-350908ca8213\",\"name\":\"Google Gemini Chat Model\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatGoogleGemini\",\"position\":[2780,740],\"parameters\":{\"options\":{},\"modelName\":\"models/gemini-1.5-flash\"},\"typeVersion\":1},{\"id\":\"bd281ef9-bc33-4b3a-9d3f-41d00521b14e\",\"name\":\"Information Extractor\",\"type\":\"@n8n/n8n-nodes-langchain.informationExtractor\",\"position\":[2820,880],\"parameters\":{\"text\":\"={{ $json.output }}\",\"options\":{\"systemPromptTemplate\":\"You are an expert extraction algorithm.\\nOnly extract relevant information from the text.\\nIf you do not know the value of an attribute asked to extract, you may omit the attribute's value.\"},\"attributes\":{\"attributes\":[{\"name\":\"Project Overview\",\"description\":\"overview of the content extracted\"},{\"name\":\"System and prerequisites\",\"description\":\"=which contains the information about the system and the prerequisites needed\"}]}},\"typeVersion\":1},{\"id\":\"2f1c4efb-6885-48c9-b2a6-a13d2e9b4f66\",\"name\":\"Google Gemini Chat Model1\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatGoogleGemini\",\"position\":[3140,1100],\"parameters\":{\"options\":{},\"modelName\":\"models/gemini-1.5-flash\"},\"typeVersion\":1},{\"id\":\"b7a0276a-d253-43a8-a7f3-fb3b83599d7f\",\"name\":\"Convert to File4\",\"type\":\"n8n-nodes-base.convertToFile\",\"position\":[1840,740],\"parameters\":{\"options\":{},\"operation\":\"toText\",\"sourceProperty\":\"output\"},\"typeVersion\":1.1},{\"id\":\"7441e1ff-1966-4535-abaa-ee565db787de\",\"name\":\"Pinecone Vector Store\",\"type\":\"@n8n/n8n-nodes-langchain.vectorStorePinecone\",\"position\":[2080,980],\"parameters\":{\"mode\":\"insert\",\"options\":{},\"pineconeIndex\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"samuraichamploo\",\"cachedResultName\":\"samuraichamploo\"}},\"typeVersion\":1.1},{\"id\":\"82d9d9fb-6f8c-4c86-9287-d5e7e73f58a7\",\"name\":\"Embeddings Mistral Cloud\",\"type\":\"@n8n/n8n-nodes-langchain.embeddingsMistralCloud\",\"position\":[2140,1200],\"parameters\":{\"options\":{}},\"typeVersion\":1},{\"id\":\"3a3332f7-3fda-4898-999e-c5020c0ea02e\",\"name\":\"Default Data Loader\",\"type\":\"@n8n/n8n-nodes-langchain.documentDefaultDataLoader\",\"position\":[2240,1280],\"parameters\":{\"options\":{},\"dataType\":\"binary\"},\"typeVersion\":1},{\"id\":\"4a625913-5c98-4075-9022-058e863af326\",\"name\":\"Recursive Character Text Splitter\",\"type\":\"@n8n/n8n-nodes-langchain.textSplitterRecursiveCharacterTextSplitter\",\"position\":[2320,1460],\"parameters\":{\"options\":{}},\"typeVersion\":1},{\"id\":\"5e38e72b-390f-433f-a638-522537bf1369\",\"name\":\"When chat message received\",\"type\":\"@n8n/n8n-nodes-langchain.chatTrigger\",\"position\":[-1820,660],\"webhookId\":\"8c5c9e83-f595-4e4b-b45c-544a9a0840c4\",\"parameters\":{\"public\":true,\"options\":{}},\"typeVersion\":1.1},{\"id\":\"77ea1fd6-73a9-42f6-835f-b945ce7fd294\",\"name\":\"Question and Answer Chain\",\"type\":\"@n8n/n8n-nodes-langchain.chainRetrievalQa\",\"position\":[-1400,680],\"parameters\":{\"options\":{\"systemPromptTemplate\":\"You are an assistant for question-answering tasks. Use the following pieces of retrieved context to answer the question.\\nIf you don't know the answer, just say that you don't know, don't try to make up an answer.\\n----------------\\nContext: {context}\"}},\"typeVersion\":1.5},{\"id\":\"d71b0efe-7e27-44f8-beb4-370c02ef1d5f\",\"name\":\"Google Gemini Chat Model2\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatGoogleGemini\",\"position\":[-1380,1020],\"parameters\":{\"options\":{},\"modelName\":\"models/gemini-1.5-flash\"},\"typeVersion\":1},{\"id\":\"eb967c9d-415f-4992-bacd-517b7dddd6bf\",\"name\":\"Vector Store Retriever\",\"type\":\"@n8n/n8n-nodes-langchain.retrieverVectorStore\",\"position\":[-1220,900],\"parameters\":{},\"typeVersion\":1},{\"id\":\"690eacb5-1d47-430b-8914-4c474833be0b\",\"name\":\"Pinecone Vector Store1\",\"type\":\"@n8n/n8n-nodes-langchain.vectorStorePinecone\",\"position\":[-900,1060],\"parameters\":{\"options\":{},\"pineconeIndex\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"samuraichamploo\",\"cachedResultName\":\"samuraichamploo\"}},\"typeVersion\":1.1},{\"id\":\"6d289625-ca46-49d7-8ee2-5996dc645ebe\",\"name\":\"Embeddings Mistral Cloud1\",\"type\":\"@n8n/n8n-nodes-langchain.embeddingsMistralCloud\",\"position\":[-780,1460],\"parameters\":{\"options\":{}},\"typeVersion\":1},{\"id\":\"dcc8bb20-e5f3-428e-93be-dc4081e1463c\",\"name\":\"AI Agent1\",\"type\":\"@n8n/n8n-nodes-langchain.agent\",\"position\":[-460,680],\"parameters\":{\"text\":\"={{ $json.response }}\",\"options\":{\"systemMessage\":\"You are a helpful assistant.rephrase the prompt provided and Provide ONLY the response in a text format\"},\"promptType\":\"define\"},\"typeVersion\":1.8},{\"id\":\"777b4e63-7a0a-42fa-9069-83ab006e19a9\",\"name\":\"Google Gemini Chat Model3\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatGoogleGemini\",\"position\":[-400,980],\"parameters\":{\"options\":{},\"modelName\":\"models/gemini-1.5-flash\"},\"typeVersion\":1},{\"id\":\"f5d69ecd-9cdc-4bef-a8ae-7477dfc3f7c7\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-1900,440],\"parameters\":{\"width\":360,\"content\":\"## I'm a note \\nThe below workflow is a chatbot workflow which will be triggered when a user types his/her prompt related to document the user provided for analysis on the chatbot link which was ent to the user via mail.\"},\"typeVersion\":1},{\"id\":\"7140d564-a636-4937-b2c6-811b48dde851\",\"name\":\"Translator Agent\",\"type\":\"@n8n/n8n-nodes-langchain.agent\",\"position\":[1060,0],\"parameters\":{\"text\":\"={{ $('Aggregate1').item.json.markdown }}\",\"options\":{\"systemMessage\":\"You are a helpful assistant. Kindly check the prompt fed and  find the language of the  prompt you receive  and if the prompt is in other language except english translate it and provide that as a response and also ATTACH THE REMAINING PROMPT WHICH IS IN ENGLISH WITH THE RESPONSE\"},\"promptType\":\"define\"},\"typeVersion\":1.8},{\"id\":\"496d49f1-5b7f-48ab-b759-2facd8fade8d\",\"name\":\"Analyzer Agent\",\"type\":\"@n8n/n8n-nodes-langchain.agent\",\"position\":[1420,0],\"parameters\":{\"text\":\"={{ $json.output }}\",\"options\":{\"systemMessage\":\"=You are a helpful assistant. \\n1️⃣ Comprehensive Prompt Analysis\\n\\nCarefully examine the entire prompt provided by the user.\\nEnsure all details are considered before formulating a response.\\n2️⃣ Interactive and Clear Breakdown\\n\\nStructure the response in a well-organized manner with clear topic separation.\\nPresent insights in a way that enhances understanding and usability.\\n3️⃣ Duplicate Check and Handling\\n\\nIdentify and highlight any repeated information within the prompt.\\nIf duplicates exist, consolidate the relevant details to avoid redundancy.\\n4️⃣ Reliable and Actionable Resolutions\\n\\nProvide resolutions that are dependable and practical.\\nEnsure the solutions align with the context and user’s intent.\\nWhere applicable, offer alternative approaches for flexibility.\\nAlso make sure not to add too much of star or hash to indicate the difference\"},\"promptType\":\"define\"},\"typeVersion\":1.8},{\"id\":\"4218f320-c580-41ae-91ca-134bd2cc8128\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[2880,640],\"parameters\":{\"content\":\"## I'm a note \\nThese two subflows are for trial purpose\"},\"typeVersion\":1},{\"id\":\"bc0a3e52-1259-4651-bbe4-9ba727d8e46a\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1420,700],\"parameters\":{\"content\":\"## I'm a note \\nThis subflow is responsible for storing the translated as well as the analyzed contents into the vector database to feed as a knowledge to the chatbot\"},\"typeVersion\":1}],\"active\":false,\"pinData\":{},\"settings\":{\"executionOrder\":\"v1\"},\"versionId\":\"7c6e0b7c-dfbb-45e5-bc16-038ff6175cdc\",\"connections\":{\"If2\":{\"main\":[[{\"node\":\"Provide the markdown\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Check the parsing status\",\"type\":\"main\",\"index\":0}]]},\"Code\":{\"main\":[[{\"node\":\"Convert to File\",\"type\":\"main\",\"index\":0}]]},\"AI Agent\":{\"main\":[[]]},\"Markdown\":{\"main\":[[{\"node\":\"Code\",\"type\":\"main\",\"index\":0}]]},\"Aggregate1\":{\"main\":[[{\"node\":\"Translator Agent\",\"type\":\"main\",\"index\":0}]]},\"Analyzer Agent\":{\"main\":[[{\"node\":\"Markdown\",\"type\":\"main\",\"index\":0},{\"node\":\"AI Agent\",\"type\":\"main\",\"index\":0},{\"node\":\"Information Extractor\",\"type\":\"main\",\"index\":0},{\"node\":\"Convert to File4\",\"type\":\"main\",\"index\":0}]]},\"Convert to File\":{\"main\":[[{\"node\":\"Gmail\",\"type\":\"main\",\"index\":0}]]},\"Convert to File4\":{\"main\":[[{\"node\":\"Pinecone Vector Store\",\"type\":\"main\",\"index\":0}]]},\"Loop Over Items1\":{\"main\":[[{\"node\":\"Aggregate1\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Parsing the document\",\"type\":\"main\",\"index\":0}]]},\"Translator Agent\":{\"main\":[[{\"node\":\"Analyzer Agent\",\"type\":\"main\",\"index\":0},{\"node\":\"Convert to File4\",\"type\":\"main\",\"index\":0}]]},\"Default Data Loader\":{\"ai_document\":[[{\"node\":\"Pinecone Vector Store\",\"type\":\"ai_document\",\"index\":0}]]},\"On form submission4\":{\"main\":[[{\"node\":\"split the binary item\",\"type\":\"main\",\"index\":0}]]},\"Parsing the document\":{\"main\":[[{\"node\":\"Check the parsing status\",\"type\":\"main\",\"index\":0}]]},\"Provide the markdown\":{\"main\":[[{\"node\":\"Loop Over Items1\",\"type\":\"main\",\"index\":0}]]},\"split the binary item\":{\"main\":[[{\"node\":\"Loop Over Items1\",\"type\":\"main\",\"index\":0}]]},\"Pinecone Vector Store1\":{\"ai_vectorStore\":[[{\"node\":\"Vector Store Retriever\",\"type\":\"ai_vectorStore\",\"index\":0}]]},\"Vector Store Retriever\":{\"ai_retriever\":[[{\"node\":\"Question and Answer Chain\",\"type\":\"ai_retriever\",\"index\":0}]]},\"Check the parsing status\":{\"main\":[[{\"node\":\"If2\",\"type\":\"main\",\"index\":0}]]},\"Embeddings Mistral Cloud\":{\"ai_embedding\":[[{\"node\":\"Pinecone Vector Store\",\"type\":\"ai_embedding\",\"index\":0}]]},\"Google Gemini Chat Model\":{\"ai_languageModel\":[[{\"node\":\"AI Agent\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"Embeddings Mistral Cloud1\":{\"ai_embedding\":[[{\"node\":\"Pinecone Vector Store1\",\"type\":\"ai_embedding\",\"index\":0}]]},\"Google Gemini Chat Model1\":{\"ai_languageModel\":[[{\"node\":\"Information Extractor\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"Google Gemini Chat Model2\":{\"ai_languageModel\":[[{\"node\":\"Question and Answer Chain\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"Google Gemini Chat Model3\":{\"ai_languageModel\":[[{\"node\":\"AI Agent1\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"Google Gemini Chat Model5\":{\"ai_languageModel\":[[{\"node\":\"Translator Agent\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"Google Gemini Chat Model6\":{\"ai_languageModel\":[[{\"node\":\"Analyzer Agent\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"Question and Answer Chain\":{\"main\":[[{\"node\":\"AI Agent1\",\"type\":\"main\",\"index\":0}]]},\"When chat message received\":{\"main\":[[{\"node\":\"Question and Answer Chain\",\"type\":\"main\",\"index\":0}]]},\"Recursive Character Text Splitter\":{\"ai_textSplitter\":[[{\"node\":\"Default Data Loader\",\"type\":\"ai_textSplitter\",\"index\":0}]]}}}",
  "readme": "### 📄Description\n\nThis automation workflow enables users to upload files via an N8N form, automatically analyzes the content using Google Gemini agents, and delivers the analyzed results via email along with a chatbot link. The system leverages Llama Cloud API, Google Gemini LLM, Pinecone vector database, and Gmail to provide a seamless, multilingual content analysis experience.\n\n### ✅ Prerequisites\n\nBefore setting up this workflow, ensure the following are in place:\n\nAn active N8N instance.\n\nAccess to Llama Cloud API.\n\nGoogle Gemini LLM API keys (for Translator & Analyzer agents).\n\nA Pinecone account with an active index.\n\nA Gmail account with API access configured.\n\nBasic knowledge of N8N workflow setup.\n\n### ⚙️ Setup Instructions\n\nDeploy the N8N Form\n\nCreate a public-facing form using N8N.\n\nConfigure it to accept:\n\nFile uploads.\n\nUser email input.\n\nFile Preprocessing\n\nStore the uploaded files temporarily.\n\nOrganize and preprocess them as needed.\n\nContent Extraction using Llama Cloud API\n\nFeed the files into the Llama Cloud API.\n\nExtract and parse the content for further processing.\n\n### Translation (if required)\n\nUse a Translator Agent (Google Gemini).\n\nCheck if the content is in English. If not, translate it.\n\n### Content Analysis\n\nForward the (translated) content to the Analyzer Agent (Google Gemini).\n\nPerform deep analysis to extract insights.\n\nVector Storage in Pinecone\n\n### Store both:\n\nThe parsed and translated content.\n\nThe analyzed content.\n\nUse Pinecone to store the content as embeddings for chatbot use.\n\n### User Notification via Gmail\n\nSend the analyzed content and chatbot link to the user’s provided email using Gmail API.\n\n### 🧩 Customization Guidance\n\nTo add more languages: Update the translation logic to include additional language support.\n\nTo modify analysis depth: Adjust the prompts sent to the Gemini Analyzer Agent.\n\nTo change the chatbot behavior: Retrain or reconfigure the chatbot to utilize the new Pinecone index contextually.\n\n### 🔁 Workflow Summary\n\nUser uploads files and email via N8N form.\n\nFiles are parsed using Llama Cloud API.\n\nContent is translated (if needed) using Gemini Translator Agent.\n\nTranslated content is analyzed by the Gemini Analyzer Agent.\n\nParsed and analyzed data is stored in Pinecone.\n\nUser receives email with analyzed results and a chatbot link.\n",
  "readme_html": "<!--[--><div data-v-006f9244=\"\"><h3>📄Description</h3>\n<p>This automation workflow enables users to upload files via an N8N form, automatically analyzes the content using Google Gemini agents, and delivers the analyzed results via email along with a chatbot link. The system leverages Llama Cloud API, Google Gemini LLM, Pinecone vector database, and Gmail to provide a seamless, multilingual content analysis experience.</p>\n<h3>✅ Prerequisites</h3>\n<p>Before setting up this workflow, ensure the following are in place:</p>\n<p>An active N8N instance.</p>\n<p>Access to Llama Cloud API.</p>\n<p>Google Gemini LLM API keys (for Translator &amp; Analyzer agents).</p>\n<p>A Pinecone account with an active index.</p>\n<p>A Gmail account with API access configured.</p>\n<p>Basic knowledge of N8N workflow setup.</p>\n<h3>⚙️ Setup Instructions</h3>\n<p>Deploy the N8N Form</p>\n<p>Create a public-facing form using N8N.</p>\n<p>Configure it to accept:</p>\n<p>File uploads.</p>\n<p>User email input.</p>\n<p>File Preprocessing</p>\n<p>Store the uploaded files temporarily.</p>\n<p>Organize and preprocess them as needed.</p>\n<p>Content Extraction using Llama Cloud API</p>\n<p>Feed the files into the Llama Cloud API.</p>\n<p>Extract and parse the content for further processing.</p>\n<h3>Translation (if required)</h3>\n<p>Use a Translator Agent (Google Gemini).</p>\n<p>Check if the content is in English. If not, translate it.</p>\n<h3>Content Analysis</h3>\n<p>Forward the (translated) content to the Analyzer Agent (Google Gemini).</p>\n<p>Perform deep analysis to extract insights.</p>\n<p>Vector Storage in Pinecone</p>\n<h3>Store both:</h3>\n<p>The parsed and translated content.</p>\n<p>The analyzed content.</p>\n<p>Use Pinecone to store the content as embeddings for chatbot use.</p>\n<h3>User Notification via Gmail</h3>\n<p>Send the analyzed content and chatbot link to the user’s provided email using Gmail API.</p>\n<h3>🧩 Customization Guidance</h3>\n<p>To add more languages: Update the translation logic to include additional language support.</p>\n<p>To modify analysis depth: Adjust the prompts sent to the Gemini Analyzer Agent.</p>\n<p>To change the chatbot behavior: Retrain or reconfigure the chatbot to utilize the new Pinecone index contextually.</p>\n<h3>🔁 Workflow Summary</h3>\n<p>User uploads files and email via N8N form.</p>\n<p>Files are parsed using Llama Cloud API.</p>\n<p>Content is translated (if needed) using Gemini Translator Agent.</p>\n<p>Translated content is analyzed by the Gemini Analyzer Agent.</p>\n<p>Parsed and analyzed data is stored in Pinecone.</p>\n<p>User receives email with analyzed results and a chatbot link.</p>\n</div><!--]-->",
  "readme_zh": "### 📄功能描述\n\n本自动化工作流支持用户通过N8N表单上传文件，利用Google Gemini智能体自动解析内容，并通过邮件发送分析结果及聊天机器人链接。系统集成Llama Cloud API、Google Gemini大语言模型、Pinecone向量数据库和Gmail服务，提供流畅的多语言内容分析体验。\n\n### ✅ 前置条件\n\n部署前请确保已具备：\n\n运行中的N8N实例\n\nLlama Cloud API访问权限\n\nGoogle Gemini大语言模型API密钥（翻译与分析智能体）\n\n已创建索引的Pinecone账户\n\n已配置API访问的Gmail账户\n\n基础的N8N工作流配置知识\n\n### ⚙️ 配置步骤\n\n部署N8N表单\n\n使用N8N创建公开表单\n\n配置表单接收：\n\n文件上传功能\n\n用户邮箱输入栏\n\n文件预处理\n\n临时存储上传文件\n\n按需进行文件整理与预处理\n\nLlama Cloud内容提取\n\n将文件输入Llama Cloud API\n\n提取并解析内容以供后续处理\n\n翻译模块（如需要）\n\n调用Google Gemini翻译智能体\n\n检测非英语内容并进行翻译\n\n内容分析\n\n将（翻译后的）内容传送至Gemini分析智能体\n\n执行深度分析提取关键信息\n\nPinecone向量存储\n\n存储以下内容至向量数据库：\n\n解析后的翻译文本\n\n分析生成的内容\n\n使用Pinecone将内容转化为嵌入向量供聊天机器人调用\n\nGmail用户通知\n\n通过Gmail API向用户发送：\n\n分析结果报告\n\n聊天机器人访问链接\n\n### 🧩 定制指南\n\n多语言扩展：更新翻译逻辑以支持更多语种\n\n分析深度调整：修改发送给Gemini分析智能体的提示词\n\n聊天机器人优化：基于Pinecone索引上下文重新训练或配置聊天机器人\n\n### 🔁 工作流概览\n\n用户通过N8N表单提交文件及邮箱\n\nLlama Cloud API解析文件内容\n\nGemini翻译智能体执行多语言转换（如需要）\n\nGemini分析智能体处理翻译后内容\n\n原始数据与分析结果存入Pinecone\n\n用户收取含分析报告和聊天链接的邮件",
  "title_zh": "使用Llama解析器、Gemini大语言模型与Pinecone数据库实现文档分析与聊天机器人构建",
  "publish_date_zh": "最后更新于4天前",
  "workflow_json_zh": "{\"id\": \"cGNK44mkCzIh4113\", \"meta\": {\"instanceId\": \"44c282b5a828cd0d7dda8a13c9168fe32406aaef7e8faa5a847408311387e400\"}, \"name\": \"我的工作流程3\", \"tags\": [], \"nodes\": [{\"id\": \"4db348cf-bd5a-408e-b212-d75b792460b4\", \"name\": \"提交表单时\", \"type\": \"n8n-nodes-base.formTrigger\", \"position\": [-1720, 20], \"webhookId\": \"34a4ae98-8eb8-486b-8d7e-dd5fdde15cd5\", \"parameters\": {\"options\": {}, \"formTitle\": \"接收多个文件的表单\", \"formFields\": {\"values\": [{\"fieldType\": \"file\", \"fieldLabel\": \"file1\", \"requiredField\": true}, {\"fieldType\": \"file\", \"fieldLabel\": \"file2\"}, {\"fieldLabel\": \"provide your mail Id\", \"requiredField\": true}]}}, \"typeVersion\": 2.2}, {\"id\": \"6a1f197f-310e-4eb1-926f-60cfbae60a49\", \"name\": \"遍历项目1\", \"type\": \"n8n-nodes-base.splitInBatches\", \"position\": [-380, 20], \"parameters\": {\"options\": {}}, \"typeVersion\": 3, \"alwaysOutputData\": false}, {\"id\": \"7eb210e4-687c-4e9d-b2e7-50d0b85da8dc\", \"name\": \"如果2\", \"type\": \"n8n-nodes-base.if\", \"position\": [700, 100], \"parameters\": {\"options\": {}, \"conditions\": {\"options\": {\"version\": 2, \"leftValue\": \"\", \"caseSensitive\": true, \"typeValidation\": \"strict\"}, \"combinator\": \"and\", \"conditions\": [{\"id\": \"1edbcd59-130d-4053-9db3-cb8dec068fe0\", \"operator\": {\"name\": \"filter.operator.equals\", \"type\": \"string\", \"operation\": \"equals\"}, \"leftValue\": \"={{ $json.status }}\", \"rightValue\": \"SUCCESS\"}]}}, \"typeVersion\": 2.2}, {\"id\": \"e76b9523-3f87-4ad3-87df-1e4e93ead090\", \"name\": \"总计1\", \"type\": \"n8n-nodes-base.aggregate\", \"position\": [0, 0], \"parameters\": {\"options\": {}, \"fieldsToAggregate\": {\"fieldToAggregate\": [{\"fieldToAggregate\": \"markdown\"}]}}, \"typeVersion\": 1}, {\"id\": \"21234dcf-52dc-4ae0-975e-36a1a18ed456\", \"name\": \"谷歌双子座聊天模型5\", \"type\": \"@n8n/n8n-nodes-langchain.lmChatGoogleGemini\", \"position\": [1060, 180], \"parameters\": {\"options\": {}, \"modelName\": \"模型/双子星-1.5-闪电版\"}, \"typeVersion\": 1}, {\"id\": \"52fcaca7-c49d-4004-96a3-0094ed0e510f\", \"name\": \"拆分二进制项\", \"type\": \"n8n-nodes-base.code\", \"position\": [-1000, 20], \"parameters\": {\"jsCode\": \"// 获取输入数据\\nconst items = $input.all()\\n\\n// 初始化一个数组来存放拆分后的条目\\nconst splitItems = [];\\n\\n// 遍历每个条目\\nitems.forEach(item => {\\n  // 检查条目是否包含二进制数据\\n  if (item.binary) {\\n    // 遍历每个二进制字段\\n    for (const [key, value] of Object.entries(item.binary)) {\\n      // 为每个二进制文件创建新条目\\n      splitItems.push({\\n        json: {},\\n        binary: {\\n          data: value\\n        }\\n      });\\n    }\\n  }\\n});\\n\\n// 返回拆分后的条目\\nreturn splitItems;\"}, \"typeVersion\": 2, \"alwaysOutputData\": true}, {\"id\": \"4660eef4-de62-4b13-9f51-05000b1afa33\", \"name\": \"解析文档\", \"type\": \"n8n-nodes-base.httpRequest\", \"position\": [260, 100], \"parameters\": {\"url\": \"https://api.cloud.llamaindex.ai/api/parsing/上传\", \"method\": \"邮政\", \"options\": {\"redirect\": {\"redirect\": {}}}, \"sendBody\": true, \"contentType\": \"多部分表单数据\", \"sendHeaders\": true, \"bodyParameters\": {\"parameters\": [{\"name\": \"=file\", \"parameterType\": \"formBinaryData\", \"inputDataFieldName\": \"=data\"}]}, \"headerParameters\": {\"parameters\": [{\"name\": \"accept\", \"value\": \"application/json\"}, {\"name\": \"Authorization\", \"value\": \"Bearer $secret token\"}]}}, \"typeVersion\": 4.2}, {\"id\": \"07e76215-b9d4-4adb-b8f3-f8c8615abb56\", \"name\": \"检查解析状态\", \"type\": \"n8n-nodes-base.httpRequest\", \"position\": [480, 100], \"parameters\": {\"url\": \"https://api.cloud.llamaindex.ai/api/parsing/job/{{ $json.id }}\", \"options\": {}, \"sendHeaders\": true, \"headerParameters\": {\"parameters\": [{\"name\": \"accept\", \"value\": \"application/json\"}, {\"name\": \"Authorization\", \"value\": \"Bearer $secret token\"}]}}, \"typeVersion\": 4.2}, {\"id\": \"3909a632-7002-4d60-a53b-3f73e4958c27\", \"name\": \"提供Markdown\", \"type\": \"n8n-nodes-base.httpRequest\", \"position\": [1180, 400], \"parameters\": {\"url\": \"https://api.cloud.llamaindex.ai/api/parsing/job/{{ $json.id }}/result/markdown\", \"options\": {}, \"sendHeaders\": true, \"headerParameters\": {\"parameters\": [{\"name\": \"accept\", \"value\": \"application/json\"}, {\"name\": \"Authorization\", \"value\": \"Bearer $secret token\"}]}}, \"typeVersion\": 4.2}, {\"id\": \"89c25b95-8bc6-4bb5-82d2-1f870416c4af\", \"name\": \"谷歌双子座聊天模型6\", \"type\": \"@n8n/n8n-nodes-langchain.lmChatGoogleGemini\", \"position\": [1600, 300], \"parameters\": {\"options\": {}, \"modelName\": \"模型/双子座-1.5-闪存版\"}, \"typeVersion\": 1}, {\"id\": \"8ddf6e94-6da0-4ef9-a6dc-0db8967914a6\", \"name\": \"Markdown\", \"type\": \"n8n-nodes-base.markdown\", \"position\": [2140, 0], \"parameters\": {\"mode\": \"标记语言转超文本\", \"options\": {}, \"markdown\": \"={{ $json.输出 }}\", \"destinationKey\": \"超文本标记语言\"}, \"typeVersion\": 1}, {\"id\": \"59c33f95-6f8f-4992-8421-dc3a0b668861\", \"name\": \"Gmail\", \"type\": \"n8n-nodes-base.gmail\", \"position\": [4540, 0], \"webhookId\": \"35fdc2a2-b8f8-4217-be0b-66ed98a548f1\", \"parameters\": {\"sendTo\": \"={{ $('提交表单4').item.json['提供您的邮箱ID'] }}\", \"message\": \"=用户您好，\\n以下文档包含对所提供文件的详细分析。\\n\\n您也可以通过下方链接与助手互动，解答分析中的疑问：\\nhttps://pavithranvh28.app.n8n.cloud/webhook/8c5c9e83-f595-4e4b-b45c-544a9a0840c4/chat\", \"options\": {\"attachmentsUi\": {\"attachmentsBinary\": [{}]}}, \"subject\": \"对所提供文件的分析\", \"emailType\": \"文本\"}, \"typeVersion\": 2.1}, {\"id\": \"b9bb8338-d52e-4f5b-bd2f-d517851b6014\", \"name\": \"代码\", \"type\": \"n8n-nodes-base.code\", \"position\": [3200, 0], \"parameters\": {\"jsCode\": \"const items = $input.first().json.html;\\n\\n// Ensure items is an array\\nconst htmlArray = Array.isArray(items) ? items : [items];\\n\\nfunction htmlToFormattedText(html) {\\n    // Replace heading tags (h1-h6) with bold text\\n    html = html.replace(/<h[1-6]>(.*?)<\\\\/h[1-6]>/gi, \\\"\\\\n**$1**\\\\n\\\");\\n\\n    // Replace paragraph tags with spacing\\n    html = html.replace(/<p>(.*?)<\\\\/p>/gi, \\\"\\\\n$1\\\\n\\\");\\n\\n    // Replace line breaks with newline characters\\n    html = html.replace(/<br\\\\s*\\\\/?>/gi, \\\"\\\\n\\\");\\n\\n    // Remove all other HTML tags\\n    html = html.replace(/<[^>]+>/g, \\\"\\\").trim();\\n\\n    // Remove extra newlines\\n    return html.replace(/\\\\n{2,}/g, \\\"\\\\n\\\").trim();\\n}\\n\\nconst updatedItems = htmlArray.map((item) => {\\n    const htmlContent = item?.json?.html || item;\\n    const textContent = htmlToFormattedText(htmlContent);\\n    return { textContent };\\n});\\n\\nreturn updatedItems;\\n\"}, \"typeVersion\": 2}, {\"id\": \"e8176d99-3625-47a5-8989-80fdce053ba7\", \"name\": \"转换为文件\", \"type\": \"n8n-nodes-base.convertToFile\", \"position\": [3840, 0], \"parameters\": {\"options\": {}, \"operation\": \"转为文本\", \"sourceProperty\": \"文本内容\"}, \"typeVersion\": 1.1}, {\"id\": \"9fb1a6a0-c49f-48f5-93bc-f0c6e9b8a138\", \"name\": \"AI代理\", \"type\": \"@n8n/n8n-nodes-langchain.agent\", \"position\": [2600, 460], \"parameters\": {\"text\": \"= {{ $json.output }}\", \"options\": {\"systemMessage\": \"You are a helpful assistant.\\nObjective:\\nThe agent must process the input content to enhance readability, apply structured formatting, and bold necessary text elements while preserving the original meaning.\\n\\nProcessing Rules:\\nApply Text Formatting:\\n\\nConvert any text enclosed with * (asterisks) into bold.\\nStructurize the Content:\\n\\nOrganize the content using clear section headers.\\nSeparate sections with line breaks for readability.\\nEnsure proper indentation and bullet point usage for clarity.\\nMaintain Clarity & Coherence:\\n\\nReformat the text without changing the core meaning.\\nRemove redundancy while ensuring key details remain intact.\\nText File Compatibility:\\n\\nResponse NEEDS TO BE A TEXT FILE\"}, \"promptType\": \"定义\"}, \"typeVersion\": 1.8}, {\"id\": \"9995921a-ca41-40c5-9159-350908ca8213\", \"name\": \"谷歌双子座聊天模型\", \"type\": \"@n8n/n8n-nodes-langchain.lmChatGoogleGemini\", \"position\": [2780, 740], \"parameters\": {\"options\": {}, \"modelName\": \"模型/双子座-1.5-闪电版\"}, \"typeVersion\": 1}, {\"id\": \"bd281ef9-bc33-4b3a-9d3f-41d00521b14e\", \"name\": \"信息提取器\", \"type\": \"@n8n/n8n-nodes-langchain.informationExtractor\", \"position\": [2820, 880], \"parameters\": {\"text\": \"={{ $json.output }}\", \"options\": {\"systemPromptTemplate\": \"You are an expert extraction algorithm.\\nOnly extract relevant information from the text.\\nIf you do not know the value of an attribute asked to extract, you may omit the attribute's value.\"}, \"attributes\": {\"attributes\": [{\"name\": \"Project Overview\", \"description\": \"overview of the content extracted\"}, {\"name\": \"System and prerequisites\", \"description\": \"=which contains the information about the system and the prerequisites needed\"}]}}, \"typeVersion\": 1}, {\"id\": \"2f1c4efb-6885-48c9-b2a6-a13d2e9b4f66\", \"name\": \"谷歌双子座聊天模型1\", \"type\": \"@n8n/n8n-nodes-langchain.lmChatGoogleGemini\", \"position\": [3140, 1100], \"parameters\": {\"options\": {}, \"modelName\": \"模型/双子座-1.5-闪电版\"}, \"typeVersion\": 1}, {\"id\": \"b7a0276a-d253-43a8-a7f3-fb3b83599d7f\", \"name\": \"转换为文件4\", \"type\": \"n8n-nodes-base.convertToFile\", \"position\": [1840, 740], \"parameters\": {\"options\": {}, \"operation\": \"转为文本\", \"sourceProperty\": \"输出\"}, \"typeVersion\": 1.1}, {\"id\": \"7441e1ff-1966-4535-abaa-ee565db787de\", \"name\": \"松果向量存储\", \"type\": \"@n8n/n8n-nodes-langchain.vectorStorePinecone\", \"position\": [2080, 980], \"parameters\": {\"mode\": \"插入\", \"options\": {}, \"pineconeIndex\": {\"__rl\": true, \"mode\": \"list\", \"value\": \"samuraichamploo\", \"cachedResultName\": \"samuraichamploo\"}}, \"typeVersion\": 1.1}, {\"id\": \"82d9d9fb-6f8c-4c86-9287-d5e7e73f58a7\", \"name\": \"嵌入Mistral云\", \"type\": \"@n8n/n8n-nodes-langchain.embeddingsMistralCloud\", \"position\": [2140, 1200], \"parameters\": {\"options\": {}}, \"typeVersion\": 1}, {\"id\": \"3a3332f7-3fda-4898-999e-c5020c0ea02e\", \"name\": \"默认数据加载器\", \"type\": \"@n8n/n8n-nodes-langchain.documentDefaultDataLoader\", \"position\": [2240, 1280], \"parameters\": {\"options\": {}, \"dataType\": \"二进制\"}, \"typeVersion\": 1}, {\"id\": \"4a625913-5c98-4075-9022-058e863af326\", \"name\": \"递归字符文本分割器\", \"type\": \"@n8n/n8n-nodes-langchain.textSplitterRecursiveCharacterTextSplitter\", \"position\": [2320, 1460], \"parameters\": {\"options\": {}}, \"typeVersion\": 1}, {\"id\": \"5e38e72b-390f-433f-a638-522537bf1369\", \"name\": \"当收到聊天消息时\", \"type\": \"@n8n/n8n-nodes-langchain.chatTrigger\", \"position\": [-1820, 660], \"webhookId\": \"8c5c9e83-f595-4e4b-b45c-544a9a0840c4\", \"parameters\": {\"public\": true, \"options\": {}}, \"typeVersion\": 1.1}, {\"id\": \"77ea1fd6-73a9-42f6-835f-b945ce7fd294\", \"name\": \"问答链\", \"type\": \"@n8n/n8n-nodes-langchain.chainRetrievalQa\", \"position\": [-1400, 680], \"parameters\": {\"options\": {\"systemPromptTemplate\": \"You are an assistant for question-answering tasks. Use the following pieces of retrieved context to answer the question.\\nIf you don't know the answer, just say that you don't know, don't try to make up an answer.\\n----------------\\nContext: {context}\"}}, \"typeVersion\": 1.5}, {\"id\": \"d71b0efe-7e27-44f8-beb4-370c02ef1d5f\", \"name\": \"谷歌双子座聊天模型2\", \"type\": \"@n8n/n8n-nodes-langchain.lmChatGoogleGemini\", \"position\": [-1380, 1020], \"parameters\": {\"options\": {}, \"modelName\": \"模型/双子座-1.5-闪电\"}, \"typeVersion\": 1}, {\"id\": \"eb967c9d-415f-4992-bacd-517b7dddd6bf\", \"name\": \"向量存储检索器\", \"type\": \"@n8n/n8n-nodes-langchain.retrieverVectorStore\", \"position\": [-1220, 900], \"parameters\": {}, \"typeVersion\": 1}, {\"id\": \"690eacb5-1d47-430b-8914-4c474833be0b\", \"name\": \"Pinecone 向量存储1\", \"type\": \"@n8n/n8n-nodes-langchain.vectorStorePinecone\", \"position\": [-900, 1060], \"parameters\": {\"options\": {}, \"pineconeIndex\": {\"__rl\": true, \"mode\": \"list\", \"value\": \"samuraichamploo\", \"cachedResultName\": \"samuraichamploo\"}}, \"typeVersion\": 1.1}, {\"id\": \"6d289625-ca46-49d7-8ee2-5996dc645ebe\", \"name\": \"嵌入Mistral云1\", \"type\": \"@n8n/n8n-nodes-langchain.embeddingsMistralCloud\", \"position\": [-780, 1460], \"parameters\": {\"options\": {}}, \"typeVersion\": 1}, {\"id\": \"dcc8bb20-e5f3-428e-93be-dc4081e1463c\", \"name\": \"AI代理1\", \"type\": \"@n8n/n8n-nodes-langchain.agent\", \"position\": [-460, 680], \"parameters\": {\"text\": \"= {{ $json.response }}\", \"options\": {\"systemMessage\": \"You are a helpful assistant.rephrase the prompt provided and Provide ONLY the response in a text format\"}, \"promptType\": \"定义\"}, \"typeVersion\": 1.8}, {\"id\": \"777b4e63-7a0a-42fa-9069-83ab006e19a9\", \"name\": \"谷歌双子座聊天模型3\", \"type\": \"@n8n/n8n-nodes-langchain.lmChatGoogleGemini\", \"position\": [-400, 980], \"parameters\": {\"options\": {}, \"modelName\": \"模型/双子座-1.5-闪电版\"}, \"typeVersion\": 1}, {\"id\": \"f5d69ecd-9cdc-4bef-a8ae-7477dfc3f7c7\", \"name\": \"便利贴\", \"type\": \"n8n-nodes-base.stickyNote\", \"position\": [-1900, 440], \"parameters\": {\"width\": 360, \"content\": \"## 我是一个说明  \\n以下工作流程是一个聊天机器人工作流程，当用户在聊天机器人链接中输入与其提供的用于分析的文档相关的提示时，该流程将被触发。该链接已通过邮件发送给用户。\"}, \"typeVersion\": 1}, {\"id\": \"7140d564-a636-4937-b2c6-811b48dde851\", \"name\": \"翻译代理\", \"type\": \"@n8n/n8n-nodes-langchain.agent\", \"position\": [1060, 0], \"parameters\": {\"text\": \"=聚合1\", \"options\": {\"systemMessage\": \"You are a helpful assistant. Kindly check the prompt fed and  find the language of the  prompt you receive  and if the prompt is in other language except english translate it and provide that as a response and also ATTACH THE REMAINING PROMPT WHICH IS IN ENGLISH WITH THE RESPONSE\"}, \"promptType\": \"定义\"}, \"typeVersion\": 1.8}, {\"id\": \"496d49f1-5b7f-48ab-b759-2facd8fade8d\", \"name\": \"分析器代理\", \"type\": \"@n8n/n8n-nodes-langchain.agent\", \"position\": [1420, 0], \"parameters\": {\"text\": \"= {{ $json.output }}\", \"options\": {\"systemMessage\": \"=You are a helpful assistant. \\n1️⃣ Comprehensive Prompt Analysis\\n\\nCarefully examine the entire prompt provided by the user.\\nEnsure all details are considered before formulating a response.\\n2️⃣ Interactive and Clear Breakdown\\n\\nStructure the response in a well-organized manner with clear topic separation.\\nPresent insights in a way that enhances understanding and usability.\\n3️⃣ Duplicate Check and Handling\\n\\nIdentify and highlight any repeated information within the prompt.\\nIf duplicates exist, consolidate the relevant details to avoid redundancy.\\n4️⃣ Reliable and Actionable Resolutions\\n\\nProvide resolutions that are dependable and practical.\\nEnsure the solutions align with the context and user’s intent.\\nWhere applicable, offer alternative approaches for flexibility.\\nAlso make sure not to add too much of star or hash to indicate the difference\"}, \"promptType\": \"定义\"}, \"typeVersion\": 1.8}, {\"id\": \"4218f320-c580-41ae-91ca-134bd2cc8128\", \"name\": \"便利贴1\", \"type\": \"n8n-nodes-base.stickyNote\", \"position\": [2880, 640], \"parameters\": {\"content\": \"## 我是一个说明  \\n这两个子流程仅供试用\"}, \"typeVersion\": 1}, {\"id\": \"bc0a3e52-1259-4651-bbe4-9ba727d8e46a\", \"name\": \"便利贴2\", \"type\": \"n8n-nodes-base.stickyNote\", \"position\": [1420, 700], \"parameters\": {\"content\": \"## 我是一个说明  \\n此子流程负责将翻译和分析后的内容存储到向量数据库中，作为聊天机器人的知识库。\"}, \"typeVersion\": 1}], \"active\": false, \"pinData\": {}, \"settings\": {\"executionOrder\": \"v1\"}, \"versionId\": \"7c6e0b7c-dfbb-45e5-bc16-038ff6175cdc\", \"connections\": {\"If2\": {\"main\": [[{\"node\": \"Provide the markdown\", \"type\": \"main\", \"index\": 0}], [{\"node\": \"Check the parsing status\", \"type\": \"main\", \"index\": 0}]]}, \"Code\": {\"main\": [[{\"node\": \"Convert to File\", \"type\": \"main\", \"index\": 0}]]}, \"AI Agent\": {\"main\": [[]]}, \"Markdown\": {\"main\": [[{\"node\": \"Code\", \"type\": \"main\", \"index\": 0}]]}, \"Aggregate1\": {\"main\": [[{\"node\": \"Translator Agent\", \"type\": \"main\", \"index\": 0}]]}, \"Analyzer Agent\": {\"main\": [[{\"node\": \"Markdown\", \"type\": \"main\", \"index\": 0}, {\"node\": \"AI Agent\", \"type\": \"main\", \"index\": 0}, {\"node\": \"Information Extractor\", \"type\": \"main\", \"index\": 0}, {\"node\": \"Convert to File4\", \"type\": \"main\", \"index\": 0}]]}, \"Convert to File\": {\"main\": [[{\"node\": \"Gmail\", \"type\": \"main\", \"index\": 0}]]}, \"Convert to File4\": {\"main\": [[{\"node\": \"Pinecone Vector Store\", \"type\": \"main\", \"index\": 0}]]}, \"Loop Over Items1\": {\"main\": [[{\"node\": \"Aggregate1\", \"type\": \"main\", \"index\": 0}], [{\"node\": \"Parsing the document\", \"type\": \"main\", \"index\": 0}]]}, \"Translator Agent\": {\"main\": [[{\"node\": \"Analyzer Agent\", \"type\": \"main\", \"index\": 0}, {\"node\": \"Convert to File4\", \"type\": \"main\", \"index\": 0}]]}, \"Default Data Loader\": {\"ai_document\": [[{\"node\": \"Pinecone Vector Store\", \"type\": \"ai_document\", \"index\": 0}]]}, \"On form submission4\": {\"main\": [[{\"node\": \"split the binary item\", \"type\": \"main\", \"index\": 0}]]}, \"Parsing the document\": {\"main\": [[{\"node\": \"Check the parsing status\", \"type\": \"main\", \"index\": 0}]]}, \"Provide the markdown\": {\"main\": [[{\"node\": \"Loop Over Items1\", \"type\": \"main\", \"index\": 0}]]}, \"split the binary item\": {\"main\": [[{\"node\": \"Loop Over Items1\", \"type\": \"main\", \"index\": 0}]]}, \"Pinecone Vector Store1\": {\"ai_vectorStore\": [[{\"node\": \"Vector Store Retriever\", \"type\": \"ai_vectorStore\", \"index\": 0}]]}, \"Vector Store Retriever\": {\"ai_retriever\": [[{\"node\": \"Question and Answer Chain\", \"type\": \"ai_retriever\", \"index\": 0}]]}, \"Check the parsing status\": {\"main\": [[{\"node\": \"If2\", \"type\": \"main\", \"index\": 0}]]}, \"Embeddings Mistral Cloud\": {\"ai_embedding\": [[{\"node\": \"Pinecone Vector Store\", \"type\": \"ai_embedding\", \"index\": 0}]]}, \"Google Gemini Chat Model\": {\"ai_languageModel\": [[{\"node\": \"AI Agent\", \"type\": \"ai_languageModel\", \"index\": 0}]]}, \"Embeddings Mistral Cloud1\": {\"ai_embedding\": [[{\"node\": \"Pinecone Vector Store1\", \"type\": \"ai_embedding\", \"index\": 0}]]}, \"Google Gemini Chat Model1\": {\"ai_languageModel\": [[{\"node\": \"Information Extractor\", \"type\": \"ai_languageModel\", \"index\": 0}]]}, \"Google Gemini Chat Model2\": {\"ai_languageModel\": [[{\"node\": \"Question and Answer Chain\", \"type\": \"ai_languageModel\", \"index\": 0}]]}, \"Google Gemini Chat Model3\": {\"ai_languageModel\": [[{\"node\": \"AI Agent1\", \"type\": \"ai_languageModel\", \"index\": 0}]]}, \"Google Gemini Chat Model5\": {\"ai_languageModel\": [[{\"node\": \"Translator Agent\", \"type\": \"ai_languageModel\", \"index\": 0}]]}, \"Google Gemini Chat Model6\": {\"ai_languageModel\": [[{\"node\": \"Analyzer Agent\", \"type\": \"ai_languageModel\", \"index\": 0}]]}, \"Question and Answer Chain\": {\"main\": [[{\"node\": \"AI Agent1\", \"type\": \"main\", \"index\": 0}]]}, \"When chat message received\": {\"main\": [[{\"node\": \"Question and Answer Chain\", \"type\": \"main\", \"index\": 0}]]}, \"Recursive Character Text Splitter\": {\"ai_textSplitter\": [[{\"node\": \"Default Data Loader\", \"type\": \"ai_textSplitter\", \"index\": 0}]]}}}"
}