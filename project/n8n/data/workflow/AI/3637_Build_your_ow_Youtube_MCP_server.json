{
  "title": "Build your ow Youtube MCP server",
  "url": "https://n8n.io/workflows/3637-build-your-ow-youtube-mcp-server/",
  "category": "AI",
  "category_url": "https://n8n.io/workflows/categories/ai/",
  "author": "Jimleuk",
  "publish_date": "Last update 4 days ago",
  "content": "",
  "workflow_json": "{\"meta\":{\"instanceId\":\"408f9fb9940c3cb18ffdef0e0150fe342d6e655c3a9fac21f0f644e8bedabcd9\",\"templateCredsSetupCompleted\":true},\"nodes\":[{\"id\":\"aef123fd-3481-4708-ae85-684529e4f05f\",\"name\":\"When Executed by Another Workflow\",\"type\":\"n8n-nodes-base.executeWorkflowTrigger\",\"position\":[340,300],\"parameters\":{\"workflowInputs\":{\"values\":[{\"name\":\"operation\"},{\"name\":\"query\"},{\"name\":\"urls\"}]}},\"typeVersion\":1.1},{\"id\":\"d77e695b-8340-4715-9862-b6428d7d12e4\",\"name\":\"Operation\",\"type\":\"n8n-nodes-base.switch\",\"position\":[580,300],\"parameters\":{\"rules\":{\"values\":[{\"outputKey\":\"Youtube Search\",\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"81b134bc-d671-4493-b3ad-8df9be3f49a6\",\"operator\":{\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"={{ $json.operation }}\",\"rightValue\":\"youtube_search\"}]},\"renameOutput\":true},{\"outputKey\":\"Youtube Transcripts\",\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"8d57914f-6587-4fb3-88e0-aa1de6ba56c1\",\"operator\":{\"name\":\"filter.operator.equals\",\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"={{ $json.operation }}\",\"rightValue\":\"youtube_transcripts\"}]},\"renameOutput\":true},{\"outputKey\":\"Usage Metrics\",\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"7c38f238-213a-46ec-aefe-22e0bcb8dffc\",\"operator\":{\"name\":\"filter.operator.equals\",\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"={{ $json.operation }}\",\"rightValue\":\"usage_metrics\"}]},\"renameOutput\":true}]},\"options\":{}},\"typeVersion\":3.2},{\"id\":\"b2d3e630-9664-481e-b250-9d5a3ff065ee\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-440,-100],\"parameters\":{\"color\":7,\"width\":680,\"height\":660,\"content\":\"## 1. Set up an MCP Server Trigger\\n[Read more about the MCP Server Trigger](https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-langchain.mcptrigger)\"},\"typeVersion\":1},{\"id\":\"6facfbdf-bc66-4652-8ae6-a1513962fe2e\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[260,-100],\"parameters\":{\"color\":7,\"width\":1240,\"height\":820,\"content\":\"## 2. [APIFY.com](https://www.apify.com?fpr=414q6) for Easy Youtube Search and Transcripts\\n[Sign up for Apify.com using 20JIMLEUK for 20% discount](https://www.apify.com?fpr=414q6)\\n\\nI've used Apify's Youtube scrapers a couple of times already and I find them quite fast and dependable for production use-cases.\\nI particularly like that my workflows don't break when I inevitably hit the official Youtube rate limits which are quite low.\\nFor this MCP server, I'm using the following youtube scraper for search and downloading transcripts: [https://apify.com/streamers/youtube-scraper](https://apify.com/streamers/youtube-scraper?fpr=414q6)\"},\"typeVersion\":1},{\"id\":\"3473a800-6bdc-412d-82f2-aa5befd2dfe4\",\"name\":\"Sticky Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-440,-220],\"parameters\":{\"color\":5,\"width\":380,\"height\":100,\"content\":\"### Always Authenticate Your Server!\\nBefore going to production, it's always advised to enable authentication on your MCP server trigger.\"},\"typeVersion\":1},{\"id\":\"adddb2c3-5823-426e-bd10-4ae2f3ed0f8c\",\"name\":\"Youtube Transcripts\",\"type\":\"@n8n/n8n-nodes-langchain.toolWorkflow\",\"position\":[0,280],\"parameters\":{\"name\":\"youtube_transcripts\",\"workflowId\":{\"__rl\":true,\"mode\":\"id\",\"value\":\"={{ $workflow.id }}\"},\"description\":\"Fetch the transcript from a youtube video using the youtube video url.\",\"workflowInputs\":{\"value\":{\"urls\":\"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('urls', ``, 'string') }}\",\"query\":\"null\",\"operation\":\"youtube_transcripts\"},\"schema\":[{\"id\":\"operation\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"operation\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"query\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"query\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"urls\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"urls\",\"defaultMatch\":false,\"canBeUsedToMatch\":true}],\"mappingMode\":\"defineBelow\",\"matchingColumns\":[],\"attemptToConvertTypes\":false,\"convertFieldsToString\":false}},\"typeVersion\":2.1},{\"id\":\"bce90f0f-a0d8-4e43-98f2-70426b28759d\",\"name\":\"Youtube Search\",\"type\":\"@n8n/n8n-nodes-langchain.toolWorkflow\",\"position\":[-280,280],\"parameters\":{\"name\":\"websearch_contents\",\"workflowId\":{\"__rl\":true,\"mode\":\"id\",\"value\":\"={{ $workflow.id }}\"},\"description\":\"Performs a youtube search and retrieves relevant videos with metadata only.\",\"workflowInputs\":{\"value\":{\"urls\":\"null\",\"query\":\"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('query', ``, 'string') }}\",\"operation\":\"youtube_search\"},\"schema\":[{\"id\":\"operation\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"operation\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"query\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"query\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"urls\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"urls\",\"defaultMatch\":false,\"canBeUsedToMatch\":true}],\"mappingMode\":\"defineBelow\",\"matchingColumns\":[],\"attemptToConvertTypes\":false,\"convertFieldsToString\":false}},\"typeVersion\":2.1},{\"id\":\"42cb7bd5-bdb4-40d4-9f69-d49fe066aaa2\",\"name\":\"Apify Youtube Search\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[860,100],\"parameters\":{\"url\":\"https://api.apify.com/v2/acts/streamers~youtube-scraper/run-sync-get-dataset-items\",\"options\":{},\"jsonBody\":\"={{\\n{\\n  \\\"searchQueries\\\": [$json.query],\\n  \\\"maxResultStreams\\\": 0,\\n  \\\"maxResults\\\": 5\\n}\\n}}\",\"sendBody\":true,\"specifyBody\":\"json\",\"authentication\":\"genericCredentialType\",\"genericAuthType\":\"httpHeaderAuth\"},\"credentials\":{\"httpHeaderAuth\":{\"id\":\"SV9BDKc1cRbZBeoL\",\"name\":\"Apify.com (personal token)\"}},\"executeOnce\":true,\"typeVersion\":4.2},{\"id\":\"ea57908b-f927-466c-86ff-2265a5ee001a\",\"name\":\"Simplify Search Results\",\"type\":\"n8n-nodes-base.set\",\"position\":[1060,100],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"9d1db837-e256-4124-80d1-8b103dbbefbb\",\"name\":\"channelName\",\"type\":\"string\",\"value\":\"={{ $json.channelName }}\"},{\"id\":\"94cebccb-b499-4fab-a1ff-187179dcd5ce\",\"name\":\"title\",\"type\":\"string\",\"value\":\"={{ $json.title }}\"},{\"id\":\"cc68698a-221a-49b8-a349-d16ad4fa746c\",\"name\":\"url\",\"type\":\"string\",\"value\":\"={{ $json.url }}\"},{\"id\":\"de8ae3e0-685d-4e40-839f-13c798d4e5e2\",\"name\":\"description\",\"type\":\"string\",\"value\":\"={{ $json.text.substr(0,2_000) }}\"},{\"id\":\"e933cbca-486c-45c9-8ed0-89a3d1efe003\",\"name\":\"viewCount\",\"type\":\"number\",\"value\":\"={{ $json.viewCount }}\"},{\"id\":\"417846bb-5e8c-42af-b1dc-8b1de9fa426c\",\"name\":\"likes\",\"type\":\"number\",\"value\":\"={{ $json.likes }}\"}]}},\"typeVersion\":3.4},{\"id\":\"aed4a7c8-f41e-4e14-90c9-4e298465e7f4\",\"name\":\"Apify Youtube Transcripts\",\"type\":\"n8n-nodes-base.httpRequest\",\"maxTries\":2,\"position\":[860,300],\"parameters\":{\"url\":\"https://api.apify.com/v2/acts/streamers~youtube-scraper/run-sync-get-dataset-items\",\"options\":{},\"jsonBody\":\"={{\\n{\\n  \\\"downloadSubtitles\\\": true,\\n  \\\"hasCC\\\": false,\\n  \\\"hasLocation\\\": false,\\n  \\\"hasSubtitles\\\": false,\\n  \\\"is360\\\": false,\\n  \\\"is3D\\\": false,\\n  \\\"is4K\\\": false,\\n  \\\"isBought\\\": false,\\n  \\\"isHD\\\": false,\\n  \\\"isHDR\\\": false,\\n  \\\"isLive\\\": false,\\n  \\\"isVR180\\\": false,\\n  \\\"maxResultStreams\\\": 0,\\n  \\\"maxResults\\\": 1,\\n  \\\"maxResultsShorts\\\": 0,\\n  \\\"preferAutoGeneratedSubtitles\\\": false,\\n  \\\"saveSubsToKVS\\\": false,\\n  \\\"startUrls\\\": $json.urls.split(',').map(url => ({\\n    \\\"url\\\": url,\\n    \\\"method\\\": \\\"GET\\\"\\n  })),\\n  \\\"subtitlesFormat\\\": \\\"plaintext\\\",\\n  \\\"subtitlesLanguage\\\": \\\"en\\\"\\n}\\n}}\",\"sendBody\":true,\"specifyBody\":\"json\",\"authentication\":\"genericCredentialType\",\"genericAuthType\":\"httpHeaderAuth\"},\"credentials\":{\"httpHeaderAuth\":{\"id\":\"SV9BDKc1cRbZBeoL\",\"name\":\"Apify.com (personal token)\"}},\"retryOnFail\":true,\"typeVersion\":4.2,\"waitBetweenTries\":5000},{\"id\":\"a73c672c-c36a-4ac0-bb0f-a87ed4dd9329\",\"name\":\"Simplify Transcript Results\",\"type\":\"n8n-nodes-base.set\",\"position\":[1060,300],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"94cebccb-b499-4fab-a1ff-187179dcd5ce\",\"name\":\"title\",\"type\":\"string\",\"value\":\"={{ $json.title }}\"},{\"id\":\"cc68698a-221a-49b8-a349-d16ad4fa746c\",\"name\":\"url\",\"type\":\"string\",\"value\":\"={{ $json.url }}\"},{\"id\":\"7501fe60-f43d-42fe-9087-6f70a1cf12af\",\"name\":\"transcript\",\"type\":\"string\",\"value\":\"={{ $json.subtitles[0].plaintext }}\"}]}},\"typeVersion\":3.4},{\"id\":\"c62ef6f9-6a81-4f00-aa68-433e3378e6ff\",\"name\":\"Aggregate Search Results\",\"type\":\"n8n-nodes-base.aggregate\",\"position\":[1260,100],\"parameters\":{\"options\":{},\"aggregate\":\"aggregateAllItemData\",\"destinationFieldName\":\"response\"},\"typeVersion\":1},{\"id\":\"53f6c967-bca1-4322-9939-7e0078ef99ed\",\"name\":\"Aggregate Transcript Results\",\"type\":\"n8n-nodes-base.aggregate\",\"position\":[1260,300],\"parameters\":{\"options\":{},\"aggregate\":\"aggregateAllItemData\",\"destinationFieldName\":\"response\"},\"typeVersion\":1},{\"id\":\"04590cf0-38e5-4113-abb8-14c141524b1c\",\"name\":\"Simplify Usage Metrics\",\"type\":\"n8n-nodes-base.set\",\"position\":[1260,500],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"ff43aa98-4e32-478d-9e43-619b7b808948\",\"name\":\"monthlyUsageCycle_startAt\",\"type\":\"string\",\"value\":\"={{ $json.data.monthlyUsageCycle.startAt }}\"},{\"id\":\"145eefd3-5248-40e9-a988-9e0e578d930a\",\"name\":\"monthlyUsageCycle_endAt\",\"type\":\"string\",\"value\":\"={{ $json.data.monthlyUsageCycle.endAt }}\"},{\"id\":\"020d1e4f-d7ec-4d69-b9be-b6c4ba5971eb\",\"name\":\"monthlyUsageUsd\",\"type\":\"string\",\"value\":\"={{ $json.data.current.monthlyUsageUsd.toFixed(2) }} of {{ $json.data.limits.maxMonthlyUsageUsd.toFixed(2) }}\"},{\"id\":\"112fb245-b35b-45ce-ad29-e05d0f352010\",\"name\":\"ACTOR_COMPUTE_UNITS\",\"type\":\"number\",\"value\":\"={{ $('Get Usage Metrics').item.json.data.monthlyServiceUsage.ACTOR_COMPUTE_UNITS.amountAfterVolumeDiscountUsd }}\"},{\"id\":\"4b451afb-eba7-49c6-8c3c-7279fb315ec6\",\"name\":\"DATASET_READS\",\"type\":\"number\",\"value\":\"={{ $('Get Usage Metrics').item.json.data.monthlyServiceUsage.DATASET_READS.amountAfterVolumeDiscountUsd }}\"},{\"id\":\"c002234c-955e-41f4-a27f-7f031ae6111e\",\"name\":\"DATASET_TIMED_STORAGE_GBYTE_HOURS\",\"type\":\"number\",\"value\":\"={{ $('Get Usage Metrics').item.json.data.monthlyServiceUsage.DATASET_TIMED_STORAGE_GBYTE_HOURS.amountAfterVolumeDiscountUsd }}\"},{\"id\":\"0108085d-1bb4-44c5-bc3b-845a7206abfe\",\"name\":\"DATASET_WRITES\",\"type\":\"number\",\"value\":\"={{ $('Get Usage Metrics').item.json.data.monthlyServiceUsage.DATASET_WRITES.amountAfterVolumeDiscountUsd }}\"},{\"id\":\"df993499-7410-450c-b5b1-50052e6d061e\",\"name\":\"DATA_TRANSFER_EXTERNAL_GBYTES\",\"type\":\"number\",\"value\":\"={{ $('Get Usage Metrics').item.json.data.monthlyServiceUsage.DATA_TRANSFER_EXTERNAL_GBYTES.amountAfterVolumeDiscountUsd }}\"},{\"id\":\"1627a2dd-15a6-4b69-b480-4e1b792c403d\",\"name\":\"DATA_TRANSFER_INTERNAL_GBYTES\",\"type\":\"number\",\"value\":\"={{ $('Get Usage Metrics').item.json.data.monthlyServiceUsage.DATA_TRANSFER_INTERNAL_GBYTES.amountAfterVolumeDiscountUsd }}\"},{\"id\":\"73037e97-e43d-4ecd-bb7e-6c5ce4740e4d\",\"name\":\"KEY_VALUE_STORE_READS\",\"type\":\"number\",\"value\":\"={{ $('Get Usage Metrics').item.json.data.monthlyServiceUsage.KEY_VALUE_STORE_READS.amountAfterVolumeDiscountUsd }}\"},{\"id\":\"5de9ba3b-bf62-4525-9cd9-5008bafe73c5\",\"name\":\"KEY_VALUE_STORE_TIMED_STORAGE_GBYTE_HOURS\",\"type\":\"number\",\"value\":\"={{ $('Get Usage Metrics').item.json.data.monthlyServiceUsage.KEY_VALUE_STORE_TIMED_STORAGE_GBYTE_HOURS.amountAfterVolumeDiscountUsd }}\"},{\"id\":\"6d1997f2-46c0-468b-b50f-fc37512417d2\",\"name\":\"KEY_VALUE_STORE_WRITES\",\"type\":\"number\",\"value\":\"={{ $('Get Usage Metrics').item.json.data.monthlyServiceUsage.KEY_VALUE_STORE_WRITES.amountAfterVolumeDiscountUsd }}\"},{\"id\":\"b579cb9e-d18f-4877-b808-a177195a364a\",\"name\":\"PAID_ACTORS_PER_DATASET_ITEM\",\"type\":\"number\",\"value\":\"={{ $('Get Usage Metrics').item.json.data.monthlyServiceUsage.PAID_ACTORS_PER_DATASET_ITEM.amountAfterVolumeDiscountUsd }}\"},{\"id\":\"5c69831c-3c62-421d-afff-bd8cfb68fb29\",\"name\":\"REQUEST_QUEUE_READS\",\"type\":\"number\",\"value\":\"={{ $('Get Usage Metrics').item.json.data.monthlyServiceUsage.REQUEST_QUEUE_READS.amountAfterVolumeDiscountUsd }}\"},{\"id\":\"21d54d4d-515b-4fa7-b099-c8b193fc4436\",\"name\":\"=REQUEST_QUEUE_TIMED_STORAGE_GBYTE_HOURS\",\"type\":\"number\",\"value\":\"={{ $('Get Usage Metrics').item.json.data.monthlyServiceUsage.REQUEST_QUEUE_TIMED_STORAGE_GBYTE_HOURS.amountAfterVolumeDiscountUsd }}\"},{\"id\":\"68168fc6-0052-4fa6-b631-942d972af340\",\"name\":\"REQUEST_QUEUE_WRITES\",\"type\":\"number\",\"value\":\"={{ $('Get Usage Metrics').item.json.data.monthlyServiceUsage.REQUEST_QUEUE_WRITES.amountAfterVolumeDiscountUsd }}\"}]}},\"typeVersion\":3.4},{\"id\":\"dee72606-aeea-41bf-97e3-037afbd03efc\",\"name\":\"Get Usage Limits\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[1060,500],\"parameters\":{\"url\":\"https://api.apify.com/v2/users/me/limits\",\"options\":{},\"authentication\":\"genericCredentialType\",\"genericAuthType\":\"httpHeaderAuth\"},\"credentials\":{\"httpHeaderAuth\":{\"id\":\"SV9BDKc1cRbZBeoL\",\"name\":\"Apify.com (personal token)\"}},\"typeVersion\":4.2},{\"id\":\"49715bf8-56a9-41ee-a756-eb05ea4f1e7d\",\"name\":\"Usage Report\",\"type\":\"@n8n/n8n-nodes-langchain.toolWorkflow\",\"position\":[-140,400],\"parameters\":{\"name\":\"Apfiy_Usage_Metrics\",\"workflowId\":{\"__rl\":true,\"mode\":\"id\",\"value\":\"={{ $workflow.id }}\"},\"description\":\"Returns current month's usage metrics.\",\"workflowInputs\":{\"value\":{\"urls\":\"null\",\"query\":\"null\",\"operation\":\"=usage_report\"},\"schema\":[{\"id\":\"operation\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"operation\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"query\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"query\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"urls\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"urls\",\"defaultMatch\":false,\"canBeUsedToMatch\":true}],\"mappingMode\":\"defineBelow\",\"matchingColumns\":[],\"attemptToConvertTypes\":false,\"convertFieldsToString\":false}},\"typeVersion\":2.1},{\"id\":\"737eca46-cb1f-443f-8243-33d429f0bfe3\",\"name\":\"Get Usage Metrics\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[860,500],\"parameters\":{\"url\":\"https://api.apify.com/v2/users/me/usage/monthly\",\"options\":{},\"authentication\":\"genericCredentialType\",\"genericAuthType\":\"httpHeaderAuth\"},\"credentials\":{\"httpHeaderAuth\":{\"id\":\"SV9BDKc1cRbZBeoL\",\"name\":\"Apify.com (personal token)\"}},\"typeVersion\":4.2},{\"id\":\"90da2c29-a1fc-4772-a271-602cdd14b679\",\"name\":\"Apify Youtube MCP Server\",\"type\":\"@n8n/n8n-nodes-langchain.mcpTrigger\",\"position\":[-300,60],\"webhookId\":\"b975bb25-be7c-49fb-8cd2-8e135d91ed4e\",\"parameters\":{\"path\":\"b975bb25-be7c-49fb-8cd2-8e135d91ed4e\"},\"typeVersion\":1},{\"id\":\"b427a01f-099d-43f8-8b8d-04186a5d330e\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-960,-460],\"parameters\":{\"width\":480,\"height\":1020,\"content\":\"## Try It Out!\\n### This n8n demonstrates how to build a simple Youtube Search MCP server to look up videos on Youtube and download their transcripts for research purposes.\\n\\n### How it works\\n* A MCP server trigger is used and connected to 3 custom workflow tools: Youtube Search, Youtube Transcripts and Usage Reports.\\n* Both Youtube tools use an external scraping service called [APIFY.com](https://www.apify.com?fpr=414q6). This is my preference as it's a much simpler interface and there are no rate limits.  \\n* The Youtube Search fetches 10 results based on the user's query.\\n* The Youtube Transcripts downloads the subtitles from one or more given urls.\\n* The usage reports pulls in your monthly [APIFY.com](https://www.apify.com?fpr=414q6) monthly spending and limits as a way to check your account.\\n\\n### How to use\\n* This Apify Youtube MCP server allows any compatible MCP client to research youtube videos for any desired topic. An Apify account is required however to connect and use the service.\\n* Connect your MCP client by following the n8n guidelines here - https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-langchain.mcptrigger/#integrating-with-claude-desktop\\n* Alternatively, connect any n8n AI agent with the MCP client tool.\\n* Try the following queries in your MCP client:\\n  * \\\"what is MCP?\\\"\\n  * \\\"How can I use MCP in n8n?\\\"\\n  * \\\"How can I use Apify's official MCP server?\\\"\\n\\n### Requirements\\n* [APIFY.com](https://www.apify.com?fpr=414q6) for Youtube Scraping. This is a paid service but there is a $5 free tier which is ample for this template.\\n* MCP Client or Agent for usage such as Claude Desktop - https://claude.ai/download\\n\\n### Customising this workflow\\n* Add as many [APIFY.com](https://www.apify.com?fpr=414q6) actors as required for your use-case or users. Consider using Apify's official MCP server for 4000+ available tools.\\n* Remember to set the MCP server to require credentials before going to production and sharing this MCP server with others!\"},\"typeVersion\":1},{\"id\":\"e11a8af0-0a53-4b9b-a499-4bbd956858f8\",\"name\":\"Sticky Note4\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[260,-360],\"parameters\":{\"width\":280,\"height\":240,\"content\":\"[![](https://d2gdx5nv84sdx2.cloudfront.net/uploads/35gj8m4w/marketing_asset/banner/13734/Large_rectangle_336x280_Light__1_.png)](https://www.apify.com?fpr=414q6)\"},\"typeVersion\":1}],\"pinData\":{},\"connections\":{\"Operation\":{\"main\":[[{\"node\":\"Apify Youtube Search\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Apify Youtube Transcripts\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Get Usage Metrics\",\"type\":\"main\",\"index\":0}]]},\"Usage Report\":{\"ai_tool\":[[{\"node\":\"Apify Youtube MCP Server\",\"type\":\"ai_tool\",\"index\":0}]]},\"Youtube Search\":{\"ai_tool\":[[{\"node\":\"Apify Youtube MCP Server\",\"type\":\"ai_tool\",\"index\":0}]]},\"Get Usage Limits\":{\"main\":[[{\"node\":\"Simplify Usage Metrics\",\"type\":\"main\",\"index\":0}]]},\"Get Usage Metrics\":{\"main\":[[{\"node\":\"Get Usage Limits\",\"type\":\"main\",\"index\":0}]]},\"Youtube Transcripts\":{\"ai_tool\":[[{\"node\":\"Apify Youtube MCP Server\",\"type\":\"ai_tool\",\"index\":0}]]},\"Apify Youtube Search\":{\"main\":[[{\"node\":\"Simplify Search Results\",\"type\":\"main\",\"index\":0}]]},\"Simplify Search Results\":{\"main\":[[{\"node\":\"Aggregate Search Results\",\"type\":\"main\",\"index\":0}]]},\"Apify Youtube Transcripts\":{\"main\":[[{\"node\":\"Simplify Transcript Results\",\"type\":\"main\",\"index\":0}]]},\"Simplify Transcript Results\":{\"main\":[[{\"node\":\"Aggregate Transcript Results\",\"type\":\"main\",\"index\":0}]]},\"When Executed by Another Workflow\":{\"main\":[[{\"node\":\"Operation\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "### This n8n demonstrates how to build a simple Youtube MCP server to look up videos on Youtube and download their transcripts for research purposes.\n\nYoutube videos are a great source of new and updated information on a variety of cutting edge developments but they''re are not always simple to understand and lengthy videos may take too much time. Using this MCP server, you extract and feed their transcripts for your AI agents which then allows it to breakdown the content into manageble learnings and insights.\n\n### How it works\n\n  * A MCP server trigger is used and connected to 3 custom workflow tools: Youtube Search, Youtube Transcripts and Usage Reports.\n  * Both Youtube tools use an external scraping service called [APIFY.com](https://www.apify.com?fpr=414q6). This is my preference as it's a much simpler interface and there are no rate limits.\n  * The Youtube Search fetches 10 results based on the user's query.\n  * The Youtube Transcripts downloads the subtitles from one or more given URL.\n  * The usage reports pulls in your monthly [APIFY.com](https://www.apify.com?fpr=414q6) monthly spending and limits as a way to check your account.\n\n\n\n### How to use\n\n  * This Apify Youtube MCP server allows any compatible MCP client to research YouTube videos for any desired topic. An Apify account is required however to connect and use the service.\n  * Connect your MCP client by following the n8n guidelines here - <https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-langchain.mcptrigger/#integrating-with-claude-desktop>\n  * Alternatively, connect any n8n AI agent with the MCP client tool.\n  * Try the following queries in your MCP client: \n    * \"what is MCP?\"\n    * \"How can I use MCP in n8n?\"\n    * \"How can I use Apify's official MCP server?\"\n\n\n\n### Requirements\n\n  * [APIFY.com](https://www.apify.com?fpr=414q6) for Youtube Scraping. This is a paid service but there is a $5 free tier which is ample for this template.\n  * MCP Client or Agent for usage such as Claude Desktop - <https://claude.ai/download>\n\n\n\n### Customising this workflow\n\n  * Add as many [APIFY.com](https://www.apify.com?fpr=414q6) actors as required for your use-case or users. Consider using Apify's official MCP server for 4000+ available tools.\n  * Remember to set the MCP server to require credentials before going to production and sharing this MCP server with others!\n\n\n",
  "readme_html": "<!--[--><div data-v-006f9244=\"\"><h3>This n8n demonstrates how to build a simple Youtube MCP server to look up videos on Youtube and download their transcripts for research purposes.</h3>\n<p>Youtube videos are a great source of new and updated information on a variety of cutting edge developments but they''re are not always simple to understand and lengthy videos may take too much time. Using this MCP server, you extract and feed their transcripts for your AI agents which then allows it to breakdown the content into manageble learnings and insights.</p>\n<h3>How it works</h3>\n<ul>\n<li>A MCP server trigger is used and connected to 3 custom workflow tools: Youtube Search, Youtube Transcripts and Usage Reports.</li>\n<li>Both Youtube tools use an external scraping service called <a href=\"https://www.apify.com?fpr=414q6\" rel=\"ugc nofollow\" target=\"_blank\">APIFY.com</a>. This is my preference as it's a much simpler interface and there are no rate limits.</li>\n<li>The Youtube Search fetches 10 results based on the user's query.</li>\n<li>The Youtube Transcripts downloads the subtitles from one or more given URL.</li>\n<li>The usage reports pulls in your monthly <a href=\"https://www.apify.com?fpr=414q6\" rel=\"ugc nofollow\" target=\"_blank\">APIFY.com</a> monthly spending and limits as a way to check your account.</li>\n</ul>\n<h3>How to use</h3>\n<ul>\n<li>This Apify Youtube MCP server allows any compatible MCP client to research YouTube videos for any desired topic. An Apify account is required however to connect and use the service.</li>\n<li>Connect your MCP client by following the n8n guidelines here - <a href=\"https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-langchain.mcptrigger/#integrating-with-claude-desktop\" rel=\"ugc nofollow\" target=\"_blank\">https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-langchain.mcptrigger/#integrating-with-claude-desktop</a></li>\n<li>Alternatively, connect any n8n AI agent with the MCP client tool.</li>\n<li>Try the following queries in your MCP client:\n<ul>\n<li>\"what is MCP?\"</li>\n<li>\"How can I use MCP in n8n?\"</li>\n<li>\"How can I use Apify's official MCP server?\"</li>\n</ul>\n</li>\n</ul>\n<h3>Requirements</h3>\n<ul>\n<li><a href=\"https://www.apify.com?fpr=414q6\" rel=\"ugc nofollow\" target=\"_blank\">APIFY.com</a> for Youtube Scraping. This is a paid service but there is a $5 free tier which is ample for this template.</li>\n<li>MCP Client or Agent for usage such as Claude Desktop - <a href=\"https://claude.ai/download\" rel=\"ugc nofollow\" target=\"_blank\">https://claude.ai/download</a></li>\n</ul>\n<h3>Customising this workflow</h3>\n<ul>\n<li>Add as many <a href=\"https://www.apify.com?fpr=414q6\" rel=\"ugc nofollow\" target=\"_blank\">APIFY.com</a> actors as required for your use-case or users. Consider using Apify's official MCP server for 4000+ available tools.</li>\n<li>Remember to set the MCP server to require credentials before going to production and sharing this MCP server with others!</li>\n</ul>\n</div><!--]-->",
  "readme_zh": "### 本n8n示例演示如何构建一个简易的YouTube MCP服务器，用于搜索YouTube视频并下载字幕以供研究使用。\n\nYouTube视频是获取各类前沿领域最新动态的优质资源，但其内容往往不易理解且冗长耗时。通过该MCP服务器，您可以提取视频字幕并输入AI智能体，从而将内容分解为易于消化的知识点与洞察。\n\n### 运作原理\n\n* 采用MCP服务器触发器连接三个定制工作流工具：YouTube搜索、YouTube字幕及使用报告\n* 两个YouTube工具均使用[APIFY.com](https://www.apify.com?fpr=414q6)外部爬取服务，该平台界面简洁且无速率限制\n* YouTube搜索工具根据用户查询获取10条结果\n* YouTube字幕工具从指定URL下载单/多视频字幕\n* 使用报告工具可查询[APIFY.com](https://www.apify.com?fpr=414q6)账户的月度消费额度\n\n### 使用指南\n\n* 该Apify版YouTube MCP服务器支持所有兼容MCP客户端进行主题视频研究，需注册Apify账号方可使用\n* 按n8n官方文档连接MCP客户端：<https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-langchain.mcptrigger/#integrating-with-claude-desktop>\n* 或通过MCP客户端工具连接任意n8n AI智能体\n* 可尝试以下查询指令：\n  * \"什么是MCP？\"\n  * \"如何在n8n中使用MCP？\"\n  * \"如何使用Apify官方MCP服务器？\"\n\n### 环境要求\n\n* YouTube爬取需使用[APIFY.com](https://www.apify.com?fpr=414q6)服务（含5美元免费额度）\n* 需安装MCP客户端（如Claude Desktop：<https://claude.ai/download>）\n\n### 定制建议\n\n* 可根据需求添加多个[APIFY.com](https://www.apify.com?fpr=414q6)执行器，或直接使用Apify官方MCP服务器（含4000+工具）\n* 正式部署前请务必启用MCP服务器身份验证，特别是在共享服务器时",
  "title_zh": "搭建你自己的YouTube MCP服务器",
  "publish_date_zh": "最后更新于4天前",
  "workflow_json_zh": "{\"meta\": {\"instanceId\": \"408f9fb9940c3cb18ffdef0e0150fe342d6e655c3a9fac21f0f644e8bedabcd9\", \"templateCredsSetupCompleted\": true}, \"nodes\": [{\"id\": \"aef123fd-3481-4708-ae85-684529e4f05f\", \"name\": \"当由另一个工作流执行时\", \"type\": \"n8n-nodes-base.executeWorkflowTrigger\", \"position\": [340, 300], \"parameters\": {\"workflowInputs\": {\"values\": [{\"name\": \"operation\"}, {\"name\": \"query\"}, {\"name\": \"urls\"}]}}, \"typeVersion\": 1.1}, {\"id\": \"d77e695b-8340-4715-9862-b6428d7d12e4\", \"name\": \"行动\", \"type\": \"n8n-nodes-base.switch\", \"position\": [580, 300], \"parameters\": {\"rules\": {\"values\": [{\"outputKey\": \"Youtube Search\", \"conditions\": {\"options\": {\"version\": 2, \"leftValue\": \"\", \"caseSensitive\": true, \"typeValidation\": \"strict\"}, \"combinator\": \"and\", \"conditions\": [{\"id\": \"81b134bc-d671-4493-b3ad-8df9be3f49a6\", \"operator\": {\"type\": \"string\", \"operation\": \"equals\"}, \"leftValue\": \"={{ $json.operation }}\", \"rightValue\": \"youtube_search\"}]}, \"renameOutput\": true}, {\"outputKey\": \"Youtube Transcripts\", \"conditions\": {\"options\": {\"version\": 2, \"leftValue\": \"\", \"caseSensitive\": true, \"typeValidation\": \"strict\"}, \"combinator\": \"and\", \"conditions\": [{\"id\": \"8d57914f-6587-4fb3-88e0-aa1de6ba56c1\", \"operator\": {\"name\": \"filter.operator.equals\", \"type\": \"string\", \"operation\": \"equals\"}, \"leftValue\": \"={{ $json.operation }}\", \"rightValue\": \"youtube_transcripts\"}]}, \"renameOutput\": true}, {\"outputKey\": \"Usage Metrics\", \"conditions\": {\"options\": {\"version\": 2, \"leftValue\": \"\", \"caseSensitive\": true, \"typeValidation\": \"strict\"}, \"combinator\": \"and\", \"conditions\": [{\"id\": \"7c38f238-213a-46ec-aefe-22e0bcb8dffc\", \"operator\": {\"name\": \"filter.operator.equals\", \"type\": \"string\", \"operation\": \"equals\"}, \"leftValue\": \"={{ $json.operation }}\", \"rightValue\": \"usage_metrics\"}]}, \"renameOutput\": true}]}, \"options\": {}}, \"typeVersion\": 3.2}, {\"id\": \"b2d3e630-9664-481e-b250-9d5a3ff065ee\", \"name\": \"便利贴\", \"type\": \"n8n-nodes-base.stickyNote\", \"position\": [-440, -100], \"parameters\": {\"color\": 7, \"width\": 680, \"height\": 660, \"content\": \"## 1. 设置MCP服务器触发器\\n[了解更多关于MCP服务器触发器的信息](https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-langchain.mcptrigger)\"}, \"typeVersion\": 1}, {\"id\": \"6facfbdf-bc66-4652-8ae6-a1513962fe2e\", \"name\": \"便利贴1\", \"type\": \"n8n-nodes-base.stickyNote\", \"position\": [260, -100], \"parameters\": {\"color\": 7, \"width\": 1240, \"height\": 820, \"content\": \"## 2. [APIFY.com](https://www.apify.com?fpr=414q6) 轻松实现YouTube搜索与字幕提取  \\n[注册Apify.com时使用优惠码20JIMLEUK可享8折优惠](https://www.apify.com?fpr=414q6)  \\n\\n我已多次使用Apify的YouTube爬虫工具，发现它们不仅响应迅速，而且在生产环境中表现稳定可靠。  \\n最让我满意的是，当不可避免地触碰到官方YouTube较低的速率限制时，我的工作流程仍能保持正常运行。  \\n针对这个MCP服务器项目，我正在使用以下YouTube爬虫工具进行视频搜索和字幕下载：[https://apify.com/streamers/youtube-scraper](https://apify.com/streamers/youtube-scraper?fpr=414q6)\"}, \"typeVersion\": 1}, {\"id\": \"3473a800-6bdc-412d-82f2-aa5befd2dfe4\", \"name\": \"便利贴3\", \"type\": \"n8n-nodes-base.stickyNote\", \"position\": [-440, -220], \"parameters\": {\"color\": 5, \"width\": 380, \"height\": 100, \"content\": \"### 始终验证您的服务器身份！\\n在投入生产环境前，务必为您的MCP服务器触发器启用身份验证功能。\"}, \"typeVersion\": 1}, {\"id\": \"adddb2c3-5823-426e-bd10-4ae2f3ed0f8c\", \"name\": \"YouTube 字幕\", \"type\": \"@n8n/n8n-nodes-langchain.toolWorkflow\", \"position\": [0, 280], \"parameters\": {\"name\": \"YouTube 字幕\", \"workflowId\": {\"__rl\": true, \"mode\": \"id\", \"value\": \"={{ $workflow.id }}\"}, \"description\": \"使用YouTube视频网址获取视频的文字记录。\", \"workflowInputs\": {\"value\": {\"urls\": \"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('urls', ``, 'string') }}\", \"query\": \"null\", \"operation\": \"youtube_transcripts\"}, \"schema\": [{\"id\": \"operation\", \"type\": \"string\", \"display\": true, \"removed\": false, \"required\": false, \"displayName\": \"operation\", \"defaultMatch\": false, \"canBeUsedToMatch\": true}, {\"id\": \"query\", \"type\": \"string\", \"display\": true, \"removed\": false, \"required\": false, \"displayName\": \"query\", \"defaultMatch\": false, \"canBeUsedToMatch\": true}, {\"id\": \"urls\", \"type\": \"string\", \"display\": true, \"removed\": false, \"required\": false, \"displayName\": \"urls\", \"defaultMatch\": false, \"canBeUsedToMatch\": true}], \"mappingMode\": \"defineBelow\", \"matchingColumns\": [], \"attemptToConvertTypes\": false, \"convertFieldsToString\": false}}, \"typeVersion\": 2.1}, {\"id\": \"bce90f0f-a0d8-4e43-98f2-70426b28759d\", \"name\": \"YouTube 搜索\", \"type\": \"@n8n/n8n-nodes-langchain.toolWorkflow\", \"position\": [-280, 280], \"parameters\": {\"name\": \"网络搜索内容\", \"workflowId\": {\"__rl\": true, \"mode\": \"id\", \"value\": \"={{ $workflow.id }}\"}, \"description\": \"执行YouTube搜索并仅获取带元数据的相关视频。\", \"workflowInputs\": {\"value\": {\"urls\": \"null\", \"query\": \"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('query', ``, 'string') }}\", \"operation\": \"youtube_search\"}, \"schema\": [{\"id\": \"operation\", \"type\": \"string\", \"display\": true, \"removed\": false, \"required\": false, \"displayName\": \"operation\", \"defaultMatch\": false, \"canBeUsedToMatch\": true}, {\"id\": \"query\", \"type\": \"string\", \"display\": true, \"removed\": false, \"required\": false, \"displayName\": \"query\", \"defaultMatch\": false, \"canBeUsedToMatch\": true}, {\"id\": \"urls\", \"type\": \"string\", \"display\": true, \"removed\": false, \"required\": false, \"displayName\": \"urls\", \"defaultMatch\": false, \"canBeUsedToMatch\": true}], \"mappingMode\": \"defineBelow\", \"matchingColumns\": [], \"attemptToConvertTypes\": false, \"convertFieldsToString\": false}}, \"typeVersion\": 2.1}, {\"id\": \"42cb7bd5-bdb4-40d4-9f69-d49fe066aaa2\", \"name\": \"Apify YouTube搜索\", \"type\": \"n8n-nodes-base.httpRequest\", \"position\": [860, 100], \"parameters\": {\"url\": \"https://api.apify.com/v2/acts/streamers~youtube-scraper/run-sync-get-dataset-items\", \"options\": {}, \"jsonBody\": \"={{\\n{\\n  \\\"搜索查询\\\": [$json.query],\\n  \\\"最大结果流数\\\": 0,\\n  \\\"最大结果数\\\": 5\\n}\\n}}\", \"sendBody\": true, \"specifyBody\": \"JSON\", \"authentication\": \"通用凭证类型\", \"genericAuthType\": \"HTTP头部认证\"}, \"credentials\": {\"httpHeaderAuth\": {\"id\": \"SV9BDKc1cRbZBeoL\", \"name\": \"Apify.com (personal token)\"}}, \"executeOnce\": true, \"typeVersion\": 4.2}, {\"id\": \"ea57908b-f927-466c-86ff-2265a5ee001a\", \"name\": \"简化搜索结果\", \"type\": \"n8n-nodes-base.set\", \"position\": [1060, 100], \"parameters\": {\"options\": {}, \"assignments\": {\"assignments\": [{\"id\": \"9d1db837-e256-4124-80d1-8b103dbbefbb\", \"name\": \"channelName\", \"type\": \"string\", \"value\": \"={{ $json.channelName }}\"}, {\"id\": \"94cebccb-b499-4fab-a1ff-187179dcd5ce\", \"name\": \"title\", \"type\": \"string\", \"value\": \"={{ $json.title }}\"}, {\"id\": \"cc68698a-221a-49b8-a349-d16ad4fa746c\", \"name\": \"url\", \"type\": \"string\", \"value\": \"={{ $json.url }}\"}, {\"id\": \"de8ae3e0-685d-4e40-839f-13c798d4e5e2\", \"name\": \"description\", \"type\": \"string\", \"value\": \"={{ $json.text.substr(0,2_000) }}\"}, {\"id\": \"e933cbca-486c-45c9-8ed0-89a3d1efe003\", \"name\": \"viewCount\", \"type\": \"number\", \"value\": \"={{ $json.viewCount }}\"}, {\"id\": \"417846bb-5e8c-42af-b1dc-8b1de9fa426c\", \"name\": \"likes\", \"type\": \"number\", \"value\": \"={{ $json.likes }}\"}]}}, \"typeVersion\": 3.4}, {\"id\": \"aed4a7c8-f41e-4e14-90c9-4e298465e7f4\", \"name\": \"Apify YouTube 转录工具\", \"type\": \"n8n-nodes-base.httpRequest\", \"maxTries\": 2, \"position\": [860, 300], \"parameters\": {\"url\": \"https://api.apify.com/v2/acts/streamers~youtube-scraper/run-sync-get-dataset-items\", \"options\": {}, \"jsonBody\": \"={{\\n{\\n  \\\"下载字幕\\\": true,\\n  \\\"含CC字幕\\\": false,\\n  \\\"含地理位置\\\": false,\\n  \\\"含字幕\\\": false,\\n  \\\"360度视频\\\": false,\\n  \\\"3D视频\\\": false,\\n  \\\"4K视频\\\": false,\\n  \\\"已购买\\\": false,\\n  \\\"高清视频\\\": false,\\n  \\\"HDR视频\\\": false,\\n  \\\"直播流\\\": false,\\n  \\\"VR180视频\\\": false,\\n  \\\"最大结果流数\\\": 0,\\n  \\\"最大结果数\\\": 1,\\n  \\\"短视频最大结果数\\\": 0,\\n  \\\"偏好自动生成字幕\\\": false,\\n  \\\"保存字幕至KVS\\\": false,\\n  \\\"起始网址\\\": $json.urls.split(',').map(url => ({\\n    \\\"网址\\\": url,\\n    \\\"方法\\\": \\\"GET\\\"\\n  })),\\n  \\\"字幕格式\\\": \\\"纯文本\\\",\\n  \\\"字幕语言\\\": \\\"英文\\\"\\n}\\n}}\", \"sendBody\": true, \"specifyBody\": \"JSON\", \"authentication\": \"通用凭证类型\", \"genericAuthType\": \"HTTP头部认证\"}, \"credentials\": {\"httpHeaderAuth\": {\"id\": \"SV9BDKc1cRbZBeoL\", \"name\": \"Apify.com (personal token)\"}}, \"retryOnFail\": true, \"typeVersion\": 4.2, \"waitBetweenTries\": 5000}, {\"id\": \"a73c672c-c36a-4ac0-bb0f-a87ed4dd9329\", \"name\": \"简化转录结果\", \"type\": \"n8n-nodes-base.set\", \"position\": [1060, 300], \"parameters\": {\"options\": {}, \"assignments\": {\"assignments\": [{\"id\": \"94cebccb-b499-4fab-a1ff-187179dcd5ce\", \"name\": \"title\", \"type\": \"string\", \"value\": \"={{ $json.title }}\"}, {\"id\": \"cc68698a-221a-49b8-a349-d16ad4fa746c\", \"name\": \"url\", \"type\": \"string\", \"value\": \"={{ $json.url }}\"}, {\"id\": \"7501fe60-f43d-42fe-9087-6f70a1cf12af\", \"name\": \"transcript\", \"type\": \"string\", \"value\": \"={{ $json.subtitles[0].plaintext }}\"}]}}, \"typeVersion\": 3.4}, {\"id\": \"c62ef6f9-6a81-4f00-aa68-433e3378e6ff\", \"name\": \"聚合搜索结果\", \"type\": \"n8n-nodes-base.aggregate\", \"position\": [1260, 100], \"parameters\": {\"options\": {}, \"aggregate\": \"汇总所有项目数据\", \"destinationFieldName\": \"回应\"}, \"typeVersion\": 1}, {\"id\": \"53f6c967-bca1-4322-9939-7e0078ef99ed\", \"name\": \"总成绩单汇总\", \"type\": \"n8n-nodes-base.aggregate\", \"position\": [1260, 300], \"parameters\": {\"options\": {}, \"aggregate\": \"汇总所有项目数据\", \"destinationFieldName\": \"回应\"}, \"typeVersion\": 1}, {\"id\": \"04590cf0-38e5-4113-abb8-14c141524b1c\", \"name\": \"简化使用指标\", \"type\": \"n8n-nodes-base.set\", \"position\": [1260, 500], \"parameters\": {\"options\": {}, \"assignments\": {\"assignments\": [{\"id\": \"ff43aa98-4e32-478d-9e43-619b7b808948\", \"name\": \"monthlyUsageCycle_startAt\", \"type\": \"string\", \"value\": \"={{ $json.data.monthlyUsageCycle.startAt }}\"}, {\"id\": \"145eefd3-5248-40e9-a988-9e0e578d930a\", \"name\": \"monthlyUsageCycle_endAt\", \"type\": \"string\", \"value\": \"={{ $json.data.monthlyUsageCycle.endAt }}\"}, {\"id\": \"020d1e4f-d7ec-4d69-b9be-b6c4ba5971eb\", \"name\": \"monthlyUsageUsd\", \"type\": \"string\", \"value\": \"={{ $json.data.current.monthlyUsageUsd.toFixed(2) }} of {{ $json.data.limits.maxMonthlyUsageUsd.toFixed(2) }}\"}, {\"id\": \"112fb245-b35b-45ce-ad29-e05d0f352010\", \"name\": \"ACTOR_COMPUTE_UNITS\", \"type\": \"number\", \"value\": \"={{ $('Get Usage Metrics').item.json.data.monthlyServiceUsage.ACTOR_COMPUTE_UNITS.amountAfterVolumeDiscountUsd }}\"}, {\"id\": \"4b451afb-eba7-49c6-8c3c-7279fb315ec6\", \"name\": \"DATASET_READS\", \"type\": \"number\", \"value\": \"={{ $('Get Usage Metrics').item.json.data.monthlyServiceUsage.DATASET_READS.amountAfterVolumeDiscountUsd }}\"}, {\"id\": \"c002234c-955e-41f4-a27f-7f031ae6111e\", \"name\": \"DATASET_TIMED_STORAGE_GBYTE_HOURS\", \"type\": \"number\", \"value\": \"={{ $('Get Usage Metrics').item.json.data.monthlyServiceUsage.DATASET_TIMED_STORAGE_GBYTE_HOURS.amountAfterVolumeDiscountUsd }}\"}, {\"id\": \"0108085d-1bb4-44c5-bc3b-845a7206abfe\", \"name\": \"DATASET_WRITES\", \"type\": \"number\", \"value\": \"={{ $('Get Usage Metrics').item.json.data.monthlyServiceUsage.DATASET_WRITES.amountAfterVolumeDiscountUsd }}\"}, {\"id\": \"df993499-7410-450c-b5b1-50052e6d061e\", \"name\": \"DATA_TRANSFER_EXTERNAL_GBYTES\", \"type\": \"number\", \"value\": \"={{ $('Get Usage Metrics').item.json.data.monthlyServiceUsage.DATA_TRANSFER_EXTERNAL_GBYTES.amountAfterVolumeDiscountUsd }}\"}, {\"id\": \"1627a2dd-15a6-4b69-b480-4e1b792c403d\", \"name\": \"DATA_TRANSFER_INTERNAL_GBYTES\", \"type\": \"number\", \"value\": \"={{ $('Get Usage Metrics').item.json.data.monthlyServiceUsage.DATA_TRANSFER_INTERNAL_GBYTES.amountAfterVolumeDiscountUsd }}\"}, {\"id\": \"73037e97-e43d-4ecd-bb7e-6c5ce4740e4d\", \"name\": \"KEY_VALUE_STORE_READS\", \"type\": \"number\", \"value\": \"={{ $('Get Usage Metrics').item.json.data.monthlyServiceUsage.KEY_VALUE_STORE_READS.amountAfterVolumeDiscountUsd }}\"}, {\"id\": \"5de9ba3b-bf62-4525-9cd9-5008bafe73c5\", \"name\": \"KEY_VALUE_STORE_TIMED_STORAGE_GBYTE_HOURS\", \"type\": \"number\", \"value\": \"={{ $('Get Usage Metrics').item.json.data.monthlyServiceUsage.KEY_VALUE_STORE_TIMED_STORAGE_GBYTE_HOURS.amountAfterVolumeDiscountUsd }}\"}, {\"id\": \"6d1997f2-46c0-468b-b50f-fc37512417d2\", \"name\": \"KEY_VALUE_STORE_WRITES\", \"type\": \"number\", \"value\": \"={{ $('Get Usage Metrics').item.json.data.monthlyServiceUsage.KEY_VALUE_STORE_WRITES.amountAfterVolumeDiscountUsd }}\"}, {\"id\": \"b579cb9e-d18f-4877-b808-a177195a364a\", \"name\": \"PAID_ACTORS_PER_DATASET_ITEM\", \"type\": \"number\", \"value\": \"={{ $('Get Usage Metrics').item.json.data.monthlyServiceUsage.PAID_ACTORS_PER_DATASET_ITEM.amountAfterVolumeDiscountUsd }}\"}, {\"id\": \"5c69831c-3c62-421d-afff-bd8cfb68fb29\", \"name\": \"REQUEST_QUEUE_READS\", \"type\": \"number\", \"value\": \"={{ $('Get Usage Metrics').item.json.data.monthlyServiceUsage.REQUEST_QUEUE_READS.amountAfterVolumeDiscountUsd }}\"}, {\"id\": \"21d54d4d-515b-4fa7-b099-c8b193fc4436\", \"name\": \"=REQUEST_QUEUE_TIMED_STORAGE_GBYTE_HOURS\", \"type\": \"number\", \"value\": \"={{ $('Get Usage Metrics').item.json.data.monthlyServiceUsage.REQUEST_QUEUE_TIMED_STORAGE_GBYTE_HOURS.amountAfterVolumeDiscountUsd }}\"}, {\"id\": \"68168fc6-0052-4fa6-b631-942d972af340\", \"name\": \"REQUEST_QUEUE_WRITES\", \"type\": \"number\", \"value\": \"={{ $('Get Usage Metrics').item.json.data.monthlyServiceUsage.REQUEST_QUEUE_WRITES.amountAfterVolumeDiscountUsd }}\"}]}}, \"typeVersion\": 3.4}, {\"id\": \"dee72606-aeea-41bf-97e3-037afbd03efc\", \"name\": \"获取使用限制\", \"type\": \"n8n-nodes-base.httpRequest\", \"position\": [1060, 500], \"parameters\": {\"url\": \"https://api.apify.com/v2/users/me/limits\", \"options\": {}, \"authentication\": \"通用凭证类型\", \"genericAuthType\": \"HTTP头部认证\"}, \"credentials\": {\"httpHeaderAuth\": {\"id\": \"SV9BDKc1cRbZBeoL\", \"name\": \"Apify.com (personal token)\"}}, \"typeVersion\": 4.2}, {\"id\": \"49715bf8-56a9-41ee-a756-eb05ea4f1e7d\", \"name\": \"使用报告\", \"type\": \"@n8n/n8n-nodes-langchain.toolWorkflow\", \"position\": [-140, 400], \"parameters\": {\"name\": \"Apfiy_使用指标\", \"workflowId\": {\"__rl\": true, \"mode\": \"id\", \"value\": \"={{ $workflow.id }}\"}, \"description\": \"返回当前月份的使用指标。\", \"workflowInputs\": {\"value\": {\"urls\": \"null\", \"query\": \"null\", \"operation\": \"=usage_report\"}, \"schema\": [{\"id\": \"operation\", \"type\": \"string\", \"display\": true, \"removed\": false, \"required\": false, \"displayName\": \"operation\", \"defaultMatch\": false, \"canBeUsedToMatch\": true}, {\"id\": \"query\", \"type\": \"string\", \"display\": true, \"removed\": false, \"required\": false, \"displayName\": \"query\", \"defaultMatch\": false, \"canBeUsedToMatch\": true}, {\"id\": \"urls\", \"type\": \"string\", \"display\": true, \"removed\": false, \"required\": false, \"displayName\": \"urls\", \"defaultMatch\": false, \"canBeUsedToMatch\": true}], \"mappingMode\": \"defineBelow\", \"matchingColumns\": [], \"attemptToConvertTypes\": false, \"convertFieldsToString\": false}}, \"typeVersion\": 2.1}, {\"id\": \"737eca46-cb1f-443f-8243-33d429f0bfe3\", \"name\": \"获取使用指标\", \"type\": \"n8n-nodes-base.httpRequest\", \"position\": [860, 500], \"parameters\": {\"url\": \"https://api.apify.com/v2/users/me/usage/monthly\", \"options\": {}, \"authentication\": \"通用凭证类型\", \"genericAuthType\": \"HTTP头部认证\"}, \"credentials\": {\"httpHeaderAuth\": {\"id\": \"SV9BDKc1cRbZBeoL\", \"name\": \"Apify.com (personal token)\"}}, \"typeVersion\": 4.2}, {\"id\": \"90da2c29-a1fc-4772-a271-602cdd14b679\", \"name\": \"Apify YouTube MCP 服务器\", \"type\": \"@n8n/n8n-nodes-langchain.mcpTrigger\", \"position\": [-300, 60], \"webhookId\": \"b975bb25-be7c-49fb-8cd2-8e135d91ed4e\", \"parameters\": {\"path\": \"（注：原文“b975bb25-be7c-49fb-8cd2-8e135d91ed4e”为一串标准UUID编码，此类标识符通常无需翻译，直接保留原格式即可。若需中文对应，可称为“UUID编码”或“通用唯一识别码”，但此处按常规处理不作转换。）  \\n\\n翻译结果：  \\nb975bb25-be7c-49fb-8cd2-8e135d91ed4e\"}, \"typeVersion\": 1}, {\"id\": \"b427a01f-099d-43f8-8b8d-04186a5d330e\", \"name\": \"便利贴2\", \"type\": \"n8n-nodes-base.stickyNote\", \"position\": [-960, -460], \"parameters\": {\"width\": 480, \"height\": 1020, \"content\": \"## 动手试试吧！\\n### 本n8n模板演示如何构建一个简易的Youtube搜索MCP服务器，用于检索Youtube视频并下载字幕以供研究使用。\\n\\n### 工作原理\\n* 采用MCP服务器触发器连接三个自定义工作流工具：Youtube搜索、Youtube字幕和用量报告\\n* 两个Youtube工具均使用[APIFY.com](https://www.apify.com?fpr=414q6)外部爬虫服务（本人推荐该平台因其简洁接口且无速率限制）\\n* Youtube搜索工具根据用户查询返回10条结果\\n* Youtube字幕工具可从单个或多个链接下载字幕\\n* 用量报告模块会同步您在[APIFY.com](https://www.apify.com?fpr=414q6)的月度消费额度和限额\\n\\n### 使用方法\\n* 该Apify版Youtube MCP服务器支持所有兼容MCP客户端进行视频主题研究（需注册Apify账号）\\n* 参照n8n官方文档连接MCP客户端：https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-langchain.mcptrigger/#integrating-with-claude-desktop\\n* 或通过MCP客户端工具连接任意n8n AI代理\\n* 尝试在客户端输入以下查询：\\n  * \\\"什么是MCP？\\\"\\n  * \\\"如何在n8n中使用MCP？\\\"\\n  * \\\"如何使用Apify官方MCP服务器？\\\"\\n\\n### 环境要求\\n* Youtube爬虫需使用[APIFY.com](https://www.apify.com?fpr=414q6)服务（付费平台但提供5美元免费额度，足够本模板使用）\\n* MCP客户端或代理程序（推荐Claude桌面版：https://claude.ai/download）\\n\\n### 定制建议\\n* 可根据需求添加任意数量的[APIFY.com](https://www.apify.com?fpr=414q6)执行器，或直接使用Apify官方MCP服务器（内含4000+工具）\\n* 正式部署前请务必启用MCP服务器身份验证，特别是在共享服务器时！\"}, \"typeVersion\": 1}, {\"id\": \"e11a8af0-0a53-4b9b-a499-4bbd956858f8\", \"name\": \"便利贴4\", \"type\": \"n8n-nodes-base.stickyNote\", \"position\": [260, -360], \"parameters\": {\"width\": 280, \"height\": 240, \"content\": \"[![](https://d2gdx5nv84sdx2.cloudfront.net/uploads/35gj8m4w/marketing_asset/banner/13734/Large_rectangle_336x280_Light__1_.png)](https://www.apify.com?fpr=414q6)\"}, \"typeVersion\": 1}], \"pinData\": {}, \"connections\": {\"Operation\": {\"main\": [[{\"node\": \"Apify Youtube Search\", \"type\": \"main\", \"index\": 0}], [{\"node\": \"Apify Youtube Transcripts\", \"type\": \"main\", \"index\": 0}], [{\"node\": \"Get Usage Metrics\", \"type\": \"main\", \"index\": 0}]]}, \"Usage Report\": {\"ai_tool\": [[{\"node\": \"Apify Youtube MCP Server\", \"type\": \"ai_tool\", \"index\": 0}]]}, \"Youtube Search\": {\"ai_tool\": [[{\"node\": \"Apify Youtube MCP Server\", \"type\": \"ai_tool\", \"index\": 0}]]}, \"Get Usage Limits\": {\"main\": [[{\"node\": \"Simplify Usage Metrics\", \"type\": \"main\", \"index\": 0}]]}, \"Get Usage Metrics\": {\"main\": [[{\"node\": \"Get Usage Limits\", \"type\": \"main\", \"index\": 0}]]}, \"Youtube Transcripts\": {\"ai_tool\": [[{\"node\": \"Apify Youtube MCP Server\", \"type\": \"ai_tool\", \"index\": 0}]]}, \"Apify Youtube Search\": {\"main\": [[{\"node\": \"Simplify Search Results\", \"type\": \"main\", \"index\": 0}]]}, \"Simplify Search Results\": {\"main\": [[{\"node\": \"Aggregate Search Results\", \"type\": \"main\", \"index\": 0}]]}, \"Apify Youtube Transcripts\": {\"main\": [[{\"node\": \"Simplify Transcript Results\", \"type\": \"main\", \"index\": 0}]]}, \"Simplify Transcript Results\": {\"main\": [[{\"node\": \"Aggregate Transcript Results\", \"type\": \"main\", \"index\": 0}]]}, \"When Executed by Another Workflow\": {\"main\": [[{\"node\": \"Operation\", \"type\": \"main\", \"index\": 0}]]}}}"
}