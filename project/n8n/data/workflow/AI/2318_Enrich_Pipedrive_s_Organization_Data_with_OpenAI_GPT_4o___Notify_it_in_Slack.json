{
  "title": "Enrich Pipedrive's Organization Data with OpenAI GPT-4o & Notify it in Slack",
  "url": "https://n8n.io/workflows/2318-enrich-pipedrives-organization-data-with-openai-gpt-4o-and-notify-it-in-slack/",
  "category": "AI",
  "category_url": "https://n8n.io/workflows/categories/ai/?count=20",
  "author": "Dataki",
  "publish_date": "Last update 10 months ago",
  "content": "",
  "workflow_json": "{\"id\":\"\",\"meta\":{\"instanceId\":\"\",\"templateCredsSetupCompleted\":true},\"name\":\"piepdrive-test\",\"tags\":[],\"nodes\":[{\"id\":\"b2838678-c796-4c99-a3da-a2cd1b42ea97\",\"name\":\"Pipedrive Trigger - An Organization is created\",\"type\":\"n8n-nodes-base.pipedriveTrigger\",\"position\":[820,380],\"webhookId\":\"f5de09a8-6601-4ad5-8bc8-9b3f4b83e997\",\"parameters\":{\"action\":\"added\",\"object\":\"organization\"},\"credentials\":{\"pipedriveApi\":{\"id\":\"\",\"name\":\"Pipedrive Connection\"}},\"typeVersion\":1},{\"id\":\"5aa05d79-b2fa-4040-b4ca-cad83adf2798\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-20,120],\"parameters\":{\"width\":656.3637637842876,\"height\":1455.9537026322007,\"content\":\"# Enrich Pipedrive's Organization Data with GPT-4o When an Organization is Created in Pipedrive\\n\\nThis workflow **enriches a Pipedrive organization's data by adding a note to the organization object in Pipedrive**. It assumes there is a custom \\\"website\\\" field in your Pipedrive setup, as data will be scraped from this website to generate a note using OpenAI.\\n\\n## ⚠️ Disclaimer\\n**These workflows use a scraping API. Before using it, ensure you comply with the regulations regarding web scraping in your country or state**.\\n\\n## Important Notes\\n- The OpenAI model used is GPT-4o, chosen for its large input token context capacity. However, it is also **the most expensive option**, you should take cost into consideration.\\n\\n- The system prompt in the OpenAI Node generates output with relevant information, but feel free to improve or **modify it according to your needs**.\\n\\n## **How It Works**\\n\\n### Node 1: `Pipedrive Trigger - An Organization is Created`\\nThis is the trigger of the workflow. When **an organization object is created in Pipedrive**, this node is triggered and retrieves the data. Make sure you have a \\\"website\\\" custom field (the name of the field in the n8n node will appear as a random ID and not with the Pipedrive custom field name).\\n\\n### Node 2: `ScrapingBee - Get Organization's Website's Homepage Content`\\nThis node **scrapes the content** from the URL of the website associated with the **Pipedrive Organization** created in Node 1. The workflow uses the [ScrapingBee](https://www.scrapingbee.com/) API, but you can use any preferred API or simply the HTTP request node in n8n.\\n\\n### Node 3: `OpenAI - Message GPT-4o with Scraped Data`\\nThis node sends HTML-scraped data from the previous node to the **OpenAI GPT-4 model**. The system prompt instructs the model to **extract company data**, such as products or services offered and competitors (if known by the model), and format it as HTML for optimal use in a Pipedrive Note.\\n\\n### Node 4: `Pipedrive - Create a Note with OpenAI Output`\\nThis node **adds a Note to the Organization created in Pipedrive** using the OpenAI node output. The Note will include the company description, target market, selling products, and competitors (if GPT-4 was able to determine them).\\n\\n### Node 5 & 6: `HTML To Markdown` & `Code - Markdown to Slack Markdown`\\nThese two nodes **format the HTML output to Slack Markdown**.\\n\\nThe Note created in Pipedrive is in HTML format, **as specified by the System Prompt of the OpenAI Node**. To send it to Slack, it needs to be converted to Markdown and then to Slack-specific Markdown.\\n\\n### Node 7: `Slack - Notify`\\nThis node **sends a message in Slack containing the Pipedrive Organization Note** created with this workflow.\\n\"},\"typeVersion\":1},{\"id\":\"47ee8bfb-2f9d-4790-a929-1533215d6746\",\"name\":\"Pipedrive - Create a Note with OpenAI output\",\"type\":\"n8n-nodes-base.pipedrive\",\"position\":[1640,380],\"parameters\":{\"content\":\"={{ $json.message.content }}\",\"resource\":\"note\",\"additionalFields\":{\"org_id\":\"={{ $('Pipedrive Trigger - An Organization is created').item.json.meta.id }}\"}},\"credentials\":{\"pipedriveApi\":{\"id\":\"\",\"name\":\"Pipedrive Connection\"}},\"typeVersion\":1},{\"id\":\"7783b531-0469-4bee-868e-4b26a1bb41ba\",\"name\":\"Code - Markdown to Slack Markdown\",\"type\":\"n8n-nodes-base.code\",\"position\":[2080,380],\"parameters\":{\"jsCode\":\"const inputMarkdown = items[0].json.data;\\n\\nfunction convertMarkdownToSlackFormat(markdown) {\\n    let slackFormatted = markdown;\\n    \\n    // Convert headers\\n    slackFormatted = slackFormatted.replace(/^# (.*$)/gim, '*$1*');\\n    slackFormatted = slackFormatted.replace(/^## (.*$)/gim, '*$1*');\\n    \\n    // Convert unordered lists\\n    slackFormatted = slackFormatted.replace(/^\\\\* (.*$)/gim, '➡️ $1');\\n    \\n    // Convert tables\\n    const tableRegex = /\\\\n\\\\|.*\\\\|\\\\n\\\\|.*\\\\|\\\\n((\\\\|.*\\\\|\\\\n)+)/;\\n    const tableMatch = slackFormatted.match(tableRegex);\\n    if (tableMatch) {\\n        const table = tableMatch[0];\\n        const rows = table.split('\\\\n').slice(3, -1);\\n        const formattedRows = rows.map(row => {\\n            const columns = row.split('|').slice(1, -1).map(col => col.trim());\\n            return `*${columns[0]}*: ${columns[1]}`;\\n        }).join('\\\\n');\\n        slackFormatted = slackFormatted.replace(table, formattedRows);\\n    }\\n    \\n    return slackFormatted;\\n}\\n\\nconst slackMarkdown = convertMarkdownToSlackFormat(inputMarkdown);\\nconsole.log(slackMarkdown);\\n\\n// Return data\\nreturn [{ slackFormattedMarkdown: slackMarkdown }];\\n\"},\"typeVersion\":2},{\"id\":\"cf2b02df-07e8-4ebb-ba3d-bfd294dcfab0\",\"name\":\"Scrapingbee - Get Organization's URL content\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[1040,380],\"parameters\":{\"url\":\"https://app.scrapingbee.com/api/v1\",\"options\":{},\"sendQuery\":true,\"queryParameters\":{\"parameters\":[{\"name\":\"api_key\",\"value\":\"<YOUR_SCRAPINGBEE_API_KEY>\"},{\"name\":\"url\",\"value\":\"={{ $json.current.<random_api_id_custom_website_field> }}\"},{\"name\":\"render_js\",\"value\":\"false\"}]}},\"typeVersion\":4.2},{\"id\":\"906d44f0-7582-4742-9fd8-4c8dfba918e0\",\"name\":\"HTML To Markdown\",\"type\":\"n8n-nodes-base.markdown\",\"position\":[1860,380],\"parameters\":{\"html\":\"={{ $json.content }}\",\"options\":{}},\"typeVersion\":1},{\"id\":\"8c1a5d64-4f38-4f9e-8878-443f750206b7\",\"name\":\"Slack - Notify \",\"type\":\"n8n-nodes-base.slack\",\"position\":[2300,380],\"parameters\":{\"text\":\"=*New Organizaton {{ $('Pipedrive Trigger - An Organization is created').item.json.current.name }} created on Pipedrive* :\\n\\n\\n {{ $json.slackFormattedMarkdown }}\",\"select\":\"channel\",\"channelId\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"\",\"cachedResultName\":\"pipedrive-notification\"},\"otherOptions\":{},\"authentication\":\"oAuth2\"},\"credentials\":{\"slackOAuth2Api\":{\"id\":\"\",\"name\":\"Slack Connection\"}},\"typeVersion\":2.2},{\"id\":\"2414a5d3-1d4b-447b-b401-4b6f823a0cf9\",\"name\":\"OpenAI - Message GPT-4o with Scraped Data\",\"type\":\"@n8n/n8n-nodes-langchain.openAi\",\"position\":[1260,380],\"parameters\":{\"modelId\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"gpt-4o\",\"cachedResultName\":\"GPT-4O\"},\"options\":{},\"messages\":{\"values\":[{\"content\":\"={{ $json.data }}\"},{\"role\":\"system\",\"content\":\"You're an assistant that summarizes website content for CRM entries. The user will provide HTML content from a company's website. Your task is to analyze the HTML content and create a concise summary that includes:\\n\\n1. A brief description of the company's services or products.\\n2. Any information about the company's target market or customer base.\\n3. Key points about the company's unique selling propositions or competitive advantages.\\n4. Based on the provided information, suggest potential competitors if you know any.\\n\\nFormat your response as HTML.\\n\\nExample response :\\n\\n    <h1>Company Description</h1>\\n    <p>Company1 specializes in services related to electric vehicles. The company focuses on providing resources and information about electric car chargers, battery life, different car brands, and the environmental impact of electric vehicles.</p>\\n\\n    <h2>Target Market</h2>\\n    <p>The target market for Company1 includes electric vehicle owners and potential buyers who are interested in making the shift from traditional fossil fuel vehicles to electric cars. The company also targets environmentally conscious consumers who are looking for sustainable mobility solutions.</p>\\n\\n    <h2>Unique Selling Propositions</h2>\\n    <ul>\\n        <li>Comprehensive information about electric vehicle charging solutions, including how to install home charging stations.</li>\\n        <li>Detailed articles on the advantages of electric vehicles such as ecology and reliability.</li>\\n        <li>Educational resources on the autonomy and battery life of different electric car models.</li>\\n        <li>Insights into premier electric vehicle brands.</li>\\n    </ul>\\n\\n    <h2>Potential Competitors</h2>\\n    <table border=\\\"1\\\">\\n        <tr>\\n            <th>Competitor Name</th>\\n            <th>Website</th>\\n        </tr>\\n        <tr>\\n            <td>Competitor1</td>\\n            <td><a href=\\\"https://www.example1.com\\\">https://www.example1.com</a></td>\\n        </tr>\\n        <tr>\\n            <td>Competitor2</td>\\n            <td><a href=\\\"https://www.example2.com\\\">https://www.example2.com</a></td>\\n        </tr>\\n        <tr>\\n            <td>Competitor3</td>\\n            <td><a href=\\\"https://www.example3.com\\\">https://www.example3.com</a></td>\\n        </tr>\\n        <tr>\\n            <td>Competitor4</td>\\n            <td><a href=\\\"https://www.example4.com\\\">https://www.example4.com</a></td>\\n        </tr>\\n    </table>\\n\"}]}},\"credentials\":{\"openAiApi\":{\"id\":\"\",\"name\":\"OpenAi Connection\"}},\"typeVersion\":1.3}],\"active\":false,\"pinData\":{},\"settings\":{\"executionOrder\":\"v1\"},\"versionId\":\"\",\"connections\":{\"HTML To Markdown\":{\"main\":[[{\"node\":\"Code - Markdown to Slack Markdown\",\"type\":\"main\",\"index\":0}]]},\"Code - Markdown to Slack Markdown\":{\"main\":[[{\"node\":\"Slack - Notify \",\"type\":\"main\",\"index\":0}]]},\"OpenAI - Message GPT-4o with Scraped Data\":{\"main\":[[{\"node\":\"Pipedrive - Create a Note with OpenAI output\",\"type\":\"main\",\"index\":0}]]},\"Pipedrive - Create a Note with OpenAI output\":{\"main\":[[{\"node\":\"HTML To Markdown\",\"type\":\"main\",\"index\":0}]]},\"Scrapingbee - Get Organization's URL content\":{\"main\":[[{\"node\":\"OpenAI - Message GPT-4o with Scraped Data\",\"type\":\"main\",\"index\":0}]]},\"Pipedrive Trigger - An Organization is created\":{\"main\":[[{\"node\":\"Scrapingbee - Get Organization's URL content\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "This workflow **enriches new Pipedrive organization's data by adding a note to the organization object in Pipedrive**. It assumes there is a custom \"website\" field in your Pipedrive setup, as data will be scraped from this website to generate a note using OpenAI. Then, a notification is sent in Slack.\n\n## ⚠️ Disclaimer\n\n**This workflow uses a scraping API. Before using it, ensure you comply with the regulations regarding web scraping in your country or state**.\n\n## Important Notes\n\n  * The **OpenAI model used is GPT-4o** , chosen for its large input token capacity. However, it is not the cheapest model if cost is very important to you.\n\n  * The system prompt in the OpenAI Node generates output with relevant information, but feel free to improve or **modify it according to your needs**.\n\n\n\n\n## **How It Works**\n\n### Node 1: `Pipedrive Trigger - An Organization is Created`\n\nThis is the trigger of the workflow. When **an organization object is created in Pipedrive** , this node is triggered and retrieves the data. **Make sure you have a \"website\" custom field in Pipedrive** (the name of the field in the n8n node will appear as a random ID and not with the Pipedrive custom field name).\n\n### Node 2: `ScrapingBee - Get Organization's Website's Homepage Content`\n\nThis node **scrapes the content** from the URL of the website associated with the **Pipedrive Organization** created in Node 1. The workflow uses the [ScrapingBee](https://www.scrapingbee.com/) API, but **you can use any preferred API or simply the HTTP request node in n8n**.\n\n### Node 3: `OpenAI - Message GPT-4o with Scraped Data`\n\nThis node sends HTML-scraped data from the previous node to the **OpenAI GPT-4o model**. The system prompt instructs the model to **extract company data** , such as products or services offered and competitors (if known by the model), and format it as HTML for optimal use in a Pipedrive Note.\n\n### Node 4: `Pipedrive - Create a Note with OpenAI Output`\n\nThis node **adds a Note to the Organization created in Pipedrive** using the OpenAI node output. The Note will include the company description, target market, selling products, and competitors (if GPT-4o was able to determine them).\n\n### Node 5 & 6: `HTML To Markdown` & `Code - Markdown to Slack Markdown`\n\nThese two nodes **format the HTML output to Slack Markdown**.\n\nThe Note created in Pipedrive is in HTML format, **as specified by the System Prompt of the OpenAI Node**. To send it to Slack, it needs to be converted to Markdown and then to Slack Markdown.\n\n### Node 7: `Slack - Notify`\n\nThis node **sends a message in Slack containing the Pipedrive Organization Note** created with this workflow.\n",
  "readme_html": "<!--[--><div data-v-006f9244=\"\"><p>This workflow <strong>enriches new Pipedrive organization's data by adding a note to the organization object in Pipedrive</strong>. It assumes there is a custom \"website\" field in your Pipedrive setup, as data will be scraped from this website to generate a note using OpenAI. Then, a notification is sent in Slack.</p>\n<h2>⚠️ Disclaimer</h2>\n<p><strong>This workflow uses a scraping API. Before using it, ensure you comply with the regulations regarding web scraping in your country or state</strong>.</p>\n<h2>Important Notes</h2>\n<ul>\n<li>\n<p>The <strong>OpenAI model used is GPT-4o</strong>, chosen for its large input token capacity. However, it is not the cheapest model if cost is very important to you.</p>\n</li>\n<li>\n<p>The system prompt in the OpenAI Node generates output with relevant information, but feel free to improve or <strong>modify it according to your needs</strong>.</p>\n</li>\n</ul>\n<h2><strong>How It Works</strong></h2>\n<h3>Node 1: <code>Pipedrive Trigger - An Organization is Created</code></h3>\n<p>This is the trigger of the workflow. When <strong>an organization object is created in Pipedrive</strong>, this node is triggered and retrieves the data. <strong>Make sure you have a \"website\" custom field in Pipedrive</strong> (the name of the field in the n8n node will appear as a random ID and not with the Pipedrive custom field name).</p>\n<h3>Node 2: <code>ScrapingBee - Get Organization's Website's Homepage Content</code></h3>\n<p>This node <strong>scrapes the content</strong> from the URL of the website associated with the <strong>Pipedrive Organization</strong> created in Node 1. The workflow uses the <a href=\"https://www.scrapingbee.com/\" rel=\"ugc nofollow\" target=\"_blank\">ScrapingBee</a> API, but <strong>you can use any preferred API or simply the HTTP request node in n8n</strong>.</p>\n<h3>Node 3: <code>OpenAI - Message GPT-4o with Scraped Data</code></h3>\n<p>This node sends HTML-scraped data from the previous node to the <strong>OpenAI GPT-4o model</strong>. The system prompt instructs the model to <strong>extract company data</strong>, such as products or services offered and competitors (if known by the model), and format it as HTML for optimal use in a Pipedrive Note.</p>\n<h3>Node 4: <code>Pipedrive - Create a Note with OpenAI Output</code></h3>\n<p>This node <strong>adds a Note to the Organization created in Pipedrive</strong> using the OpenAI node output. The Note will include the company description, target market, selling products, and competitors (if GPT-4o was able to determine them).</p>\n<h3>Node 5 &amp; 6: <code>HTML To Markdown</code> &amp; <code>Code - Markdown to Slack Markdown</code></h3>\n<p>These two nodes <strong>format the HTML output to Slack Markdown</strong>.</p>\n<p>The Note created in Pipedrive is in HTML format, <strong>as specified by the System Prompt of the OpenAI Node</strong>. To send it to Slack, it needs to be converted to Markdown and then to Slack Markdown.</p>\n<h3>Node 7: <code>Slack - Notify</code></h3>\n<p>This node <strong>sends a message in Slack containing the Pipedrive Organization Note</strong> created with this workflow.</p>\n</div><!--]-->",
  "readme_zh": "该工作流**通过向Pipedrive中的组织对象添加备注来丰富新创建的组织数据**。其前提是您的Pipedrive设置中包含自定义\"website\"字段，系统将从此字段对应的网址抓取数据，并利用OpenAI生成备注内容，最后通过Slack发送通知。\n\n## ⚠️ 免责声明\n\n**本工作流使用网页抓取API，使用前请确保您所在国家或地区关于网络爬虫的法律法规允许此类操作**。\n\n## 重要说明\n\n  * **使用的OpenAI模型为GPT-4o**，选择该模型因其具备超大输入令牌容量。但若成本敏感需注意，这并非最经济的模型选择。\n\n  * OpenAI节点中的系统提示会生成包含关键信息的输出，您可以根据需求**自由优化或修改该提示模板**。\n\n## **运作原理**\n\n### 节点1: `Pipedrive触发器 - 创建新组织`\n\n作为工作流的触发节点。当**Pipedrive中新建组织对象时**，该节点将获取相关数据。**请确保Pipedrive中存在\"website\"自定义字段**（n8n节点中该字段会显示为随机ID而非原始字段名）。\n\n### 节点2: `ScrapingBee - 获取组织官网首页内容`\n\n该节点从**节点1创建的组织关联网址**抓取网页内容。工作流使用[ScrapingBee](https://www.scrapingbee.com/) API，但**您可替换为任意爬虫API或直接使用n8n的HTTP请求节点**。\n\n### 节点3: `OpenAI - 向GPT-4o发送抓取数据`\n\n将前节点获取的HTML数据发送至**OpenAI GPT-4o模型**。系统提示会指导模型**提取公司数据**（包括产品/服务信息及已知竞争对手），并格式化为HTML以便在Pipedrive备注中优化显示。\n\n### 节点4: `Pipedrive - 用OpenAI输出创建备注`\n\n该节点**为Pipedrive中的新建组织添加备注**，内容包含公司描述、目标市场、销售产品及竞争对手信息（若GPT-4o能识别）。\n\n### 节点5 & 6: `HTML转Markdown` & `代码 - Markdown转Slack格式`\n\n这两个节点**将HTML输出转换为Slack支持的Markdown格式**。由于OpenAI节点生成的Pipedrive备注为HTML格式，需经转换才能适配Slack消息。\n\n### 节点7: `Slack - 发送通知`\n\n该节点**向Slack频道发送包含工作流所创备注内容的消息**。",
  "title_zh": "利用OpenAI GPT-4o增强Pipedrive的组织数据并在Slack中通知",
  "publish_date_absolute": "2024-07-06",
  "publish_date_zh": "最后更新于10个月前",
  "workflow_json_zh": "{\n  \"id\": \"\",\n  \"meta\": {\n    \"instanceId\": \"\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"name\": \"piepdrive-test\",\n  \"tags\": [],\n  \"nodes\": [\n    {\n      \"id\": \"b2838678-c796-4c99-a3da-a2cd1b42ea97\",\n      \"name\": \"Pipedrive Trigger - An Organization is created\",\n      \"type\": \"n8n-nodes-base.pipedriveTrigger\",\n      \"position\": [\n        820,\n        380\n      ],\n      \"webhookId\": \"f5de09a8-6601-4ad5-8bc8-9b3f4b83e997\",\n      \"parameters\": {\n        \"action\": \"added\",\n        \"object\": \"organization\"\n      },\n      \"credentials\": {\n        \"pipedriveApi\": {\n          \"id\": \"\",\n          \"name\": \"Pipedrive Connection\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"5aa05d79-b2fa-4040-b4ca-cad83adf2798\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -20,\n        120\n      ],\n      \"parameters\": {\n        \"width\": 656.3637637842876,\n        \"height\": 1455.9537026322007,\n        \"content\": \"# 在Pipedrive创建组织时用GPT-4o完善组织数据\\n\\n该工作流**通过向Pipedrive中的组织对象添加备注来完善组织数据**。前提是您的Pipedrive设置中包含自定义\\\"website\\\"字段，系统将从该网站抓取数据并通过OpenAI生成备注。\\n\\n## ⚠️ 免责声明\\n**这些工作流使用了网页抓取API。使用前请确保您所在国家或地区关于网络爬虫的法律法规**。\\n\\n## 重要说明\\n- 使用的OpenAI模型是GPT-4o，因其具有大容量输入token上下文而被选用。但这也是**最昂贵的选择**，请将成本纳入考量。\\n\\n- OpenAI节点中的系统提示会生成包含相关信息的输出，您可以根据需求**自由调整或改进**该提示。\\n\\n## **工作原理**\\n\\n### 节点1: `Pipedrive触发器 - 创建组织时`\\n这是工作流的触发器。当**在Pipedrive中创建组织对象时**，该节点被触发并获取数据。请确保您有\\\"website\\\"自定义字段（n8n节点中该字段名称会显示为随机ID而非Pipedrive中的自定义字段名）。\\n\\n### 节点2: `ScrapingBee - 获取组织官网首页内容`\\n该节点从**节点1创建的组织关联网址**抓取内容。工作流使用[ScrapingBee](https://www.scrapingbee.com/) API，但您可以使用任何偏好的API或直接使用n8n的HTTP请求节点。\\n\\n### 节点3: `OpenAI - 向GPT-4o发送抓取数据`\\n该节点将前个节点抓取的HTML数据发送至**OpenAI GPT-4模型**。系统提示会指导模型**提取公司数据**（如提供的产品或服务、已知竞争对手等），并格式化为HTML以便在Pipedrive备注中优化使用。\\n\\n### 节点4: `Pipedrive - 用OpenAI输出创建备注`\\n该节点**为Pipedrive中创建的组织添加备注**，内容来自OpenAI节点的输出。备注将包含公司描述、目标市场、销售产品和竞争对手（如果GPT-4能识别）。\\n\\n### 节点5 & 6: `HTML转Markdown` & `代码 - Markdown转Slack格式`\\n这两个节点**将HTML输出转换为Slack专用Markdown格式**。\\n\\nPipedrive中创建的备注采用HTML格式（根据OpenAI节点的系统提示要求）。要发送到Slack，需先转为Markdown再转为Slack专用格式。\\n\\n### 节点7: `Slack - 通知`\\n该节点**向Slack发送包含本工作流创建的Pipedrive组织备注**的消息。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"47ee8bfb-2f9d-4790-a929-1533215d6746\",\n      \"name\": \"Pipedrive - Create a Note with OpenAI output\",\n      \"type\": \"n8n-nodes-base.pipedrive\",\n      \"position\": [\n        1640,\n        380\n      ],\n      \"parameters\": {\n        \"content\": \"={{ $json.message.content }}\",\n        \"resource\": \"note\",\n        \"additionalFields\": {\n          \"org_id\": \"={{ $('Pipedrive Trigger - An Organization is created').item.json.meta.id }}\"\n        }\n      },\n      \"credentials\": {\n        \"pipedriveApi\": {\n          \"id\": \"\",\n          \"name\": \"Pipedrive Connection\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"7783b531-0469-4bee-868e-4b26a1bb41ba\",\n      \"name\": \"Code - Markdown to Slack Markdown\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        2080,\n        380\n      ],\n      \"parameters\": {\n        \"jsCode\": \"const inputMarkdown = items[0].json.data;\\n\\nfunction convertMarkdownToSlackFormat(markdown) {\\n    let slackFormatted = markdown;\\n    \\n    // Convert headers\\n    slackFormatted = slackFormatted.replace(/^# (.*$)/gim, '*$1*');\\n    slackFormatted = slackFormatted.replace(/^## (.*$)/gim, '*$1*');\\n    \\n    // Convert unordered lists\\n    slackFormatted = slackFormatted.replace(/^\\\\* (.*$)/gim, '➡️ $1');\\n    \\n    // Convert tables\\n    const tableRegex = /\\\\n\\\\|.*\\\\|\\\\n\\\\|.*\\\\|\\\\n((\\\\|.*\\\\|\\\\n)+)/;\\n    const tableMatch = slackFormatted.match(tableRegex);\\n    if (tableMatch) {\\n        const table = tableMatch[0];\\n        const rows = table.split('\\\\n').slice(3, -1);\\n        const formattedRows = rows.map(row => {\\n            const columns = row.split('|').slice(1, -1).map(col => col.trim());\\n            return `*${columns[0]}*: ${columns[1]}`;\\n        }).join('\\\\n');\\n        slackFormatted = slackFormatted.replace(table, formattedRows);\\n    }\\n    \\n    return slackFormatted;\\n}\\n\\nconst slackMarkdown = convertMarkdownToSlackFormat(inputMarkdown);\\nconsole.log(slackMarkdown);\\n\\n// Return data\\nreturn [{ slackFormattedMarkdown: slackMarkdown }];\\n\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"cf2b02df-07e8-4ebb-ba3d-bfd294dcfab0\",\n      \"name\": \"Scrapingbee - Get Organization's URL content\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1040,\n        380\n      ],\n      \"parameters\": {\n        \"url\": \"https://app.scrapingbee.com/api/v1\",\n        \"options\": {},\n        \"sendQuery\": true,\n        \"queryParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"api_key\",\n              \"value\": \"<YOUR_SCRAPINGBEE_API_KEY>\"\n            },\n            {\n              \"name\": \"url\",\n              \"value\": \"={{ $json.current.<random_api_id_custom_website_field> }}\"\n            },\n            {\n              \"name\": \"render_js\",\n              \"value\": \"false\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"906d44f0-7582-4742-9fd8-4c8dfba918e0\",\n      \"name\": \"HTML To Markdown\",\n      \"type\": \"n8n-nodes-base.markdown\",\n      \"position\": [\n        1860,\n        380\n      ],\n      \"parameters\": {\n        \"html\": \"={{ $json.content }}\",\n        \"options\": {}\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"8c1a5d64-4f38-4f9e-8878-443f750206b7\",\n      \"name\": \"Slack - Notify \",\n      \"type\": \"n8n-nodes-base.slack\",\n      \"position\": [\n        2300,\n        380\n      ],\n      \"parameters\": {\n        \"text\": \"=*New Organizaton {{ $('Pipedrive Trigger - An Organization is created').item.json.current.name }} created on Pipedrive* :\\n\\n\\n {{ $json.slackFormattedMarkdown }}\",\n        \"select\": \"channel\",\n        \"channelId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"\",\n          \"cachedResultName\": \"pipedrive-notification\"\n        },\n        \"otherOptions\": {},\n        \"authentication\": \"oAuth2\"\n      },\n      \"credentials\": {\n        \"slackOAuth2Api\": {\n          \"id\": \"\",\n          \"name\": \"Slack Connection\"\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"2414a5d3-1d4b-447b-b401-4b6f823a0cf9\",\n      \"name\": \"OpenAI - Message GPT-4o with Scraped Data\",\n      \"type\": \"@n8n/n8n-nodes-langchain.openAi\",\n      \"position\": [\n        1260,\n        380\n      ],\n      \"parameters\": {\n        \"modelId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gpt-4o\",\n          \"cachedResultName\": \"GPT-4O\"\n        },\n        \"options\": {},\n        \"messages\": {\n          \"values\": [\n            {\n              \"content\": \"={{ $json.data }}\"\n            },\n            {\n              \"role\": \"system\",\n              \"content\": \"You're an assistant that summarizes website content for CRM entries. The user will provide HTML content from a company's website. Your task is to analyze the HTML content and create a concise summary that includes:\\n\\n1. A brief description of the company's services or products.\\n2. Any information about the company's target market or customer base.\\n3. Key points about the company's unique selling propositions or competitive advantages.\\n4. Based on the provided information, suggest potential competitors if you know any.\\n\\nFormat your response as HTML.\\n\\nExample response :\\n\\n    <h1>Company Description</h1>\\n    <p>Company1 specializes in services related to electric vehicles. The company focuses on providing resources and information about electric car chargers, battery life, different car brands, and the environmental impact of electric vehicles.</p>\\n\\n    <h2>Target Market</h2>\\n    <p>The target market for Company1 includes electric vehicle owners and potential buyers who are interested in making the shift from traditional fossil fuel vehicles to electric cars. The company also targets environmentally conscious consumers who are looking for sustainable mobility solutions.</p>\\n\\n    <h2>Unique Selling Propositions</h2>\\n    <ul>\\n        <li>Comprehensive information about electric vehicle charging solutions, including how to install home charging stations.</li>\\n        <li>Detailed articles on the advantages of electric vehicles such as ecology and reliability.</li>\\n        <li>Educational resources on the autonomy and battery life of different electric car models.</li>\\n        <li>Insights into premier electric vehicle brands.</li>\\n    </ul>\\n\\n    <h2>Potential Competitors</h2>\\n    <table border=\\\"1\\\">\\n        <tr>\\n            <th>Competitor Name</th>\\n            <th>Website</th>\\n        </tr>\\n        <tr>\\n            <td>Competitor1</td>\\n            <td><a href=\\\"https://www.example1.com\\\">https://www.example1.com</a></td>\\n        </tr>\\n        <tr>\\n            <td>Competitor2</td>\\n            <td><a href=\\\"https://www.example2.com\\\">https://www.example2.com</a></td>\\n        </tr>\\n        <tr>\\n            <td>Competitor3</td>\\n            <td><a href=\\\"https://www.example3.com\\\">https://www.example3.com</a></td>\\n        </tr>\\n        <tr>\\n            <td>Competitor4</td>\\n            <td><a href=\\\"https://www.example4.com\\\">https://www.example4.com</a></td>\\n        </tr>\\n    </table>\\n\"\n            }\n          ]\n        }\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"\",\n          \"name\": \"OpenAi Connection\"\n        }\n      },\n      \"typeVersion\": 1.3\n    }\n  ],\n  \"active\": false,\n  \"pinData\": {},\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"\",\n  \"connections\": {\n    \"HTML To Markdown\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Code - Markdown to Slack Markdown\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Code - Markdown to Slack Markdown\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Slack - Notify \",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"OpenAI - Message GPT-4o with Scraped Data\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Pipedrive - Create a Note with OpenAI output\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Pipedrive - Create a Note with OpenAI output\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"HTML To Markdown\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Scrapingbee - Get Organization's URL content\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"OpenAI - Message GPT-4o with Scraped Data\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Pipedrive Trigger - An Organization is created\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Scrapingbee - Get Organization's URL content\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}