{
  "title": "Automated Instagram Comment Replies using Gemini AI with Context-Aware Responses",
  "url": "https://n8n.io/workflows/3713-automated-instagram-comment-replies-using-gemini-ai-with-context-aware-responses/",
  "category": "AI",
  "category_url": "https://n8n.io/workflows/categories/ai/?count=20",
  "author": "Luciano Gutierrez",
  "publish_date": "Last update 2 days ago",
  "content": "",
  "workflow_json": "{\"id\":\"4rXRDurF4mQKrHyB\",\"meta\":{\"instanceId\":\"6d46e25379ef430a7067964d1096b885c773564549240cb3ad4c087f6cf94bd3\",\"templateCredsSetupCompleted\":true},\"name\":\"comentarios automaticos\",\"tags\":[],\"nodes\":[{\"id\":\"5c5322a4-10cf-43a1-8286-101c96d8c356\",\"name\":\"Webhook\",\"type\":\"n8n-nodes-base.webhook\",\"position\":[40,100],\"webhookId\":\"ea7d37ac-9e82-40d7-bbb3-e9b7ce180fc9\",\"parameters\":{\"path\":\"ea7d37ac-9e82-40d7-bbb3-e9b7ce180fc9\",\"options\":{},\"responseMode\":\"responseNode\"},\"typeVersion\":2},{\"id\":\"c281b25f-4f5a-46a3-b2ca-c9fba1cf98e1\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-980,0],\"parameters\":{\"width\":1440,\"height\":320,\"content\":\"# Webhook Verification\\nDescription:\\nHandles the initial verification handshake with Instagram's Webhook API.\\nInstructions:\\n\\nEnsure the hub.verify_token matches the token configured in your Instagram App settings.\\n\\nThe response should echo the hub.challenge parameter to confirm the webhook setup.â€‹\\n\\n\"},\"typeVersion\":1},{\"id\":\"f890a4d2-f897-4103-a52f-48fa3555f9a6\",\"name\":\"Respond to Webhook\",\"type\":\"n8n-nodes-base.respondToWebhook\",\"position\":[260,100],\"parameters\":{\"options\":{},\"respondWith\":\"text\",\"responseBody\":\"={{ $json.query['hub.challenge'] }}\"},\"typeVersion\":1.1},{\"id\":\"4afb4f9b-7f0f-41b8-afd0-d5c134a6a622\",\"name\":\"AI Agent\",\"type\":\"@n8n/n8n-nodes-langchain.agent\",\"position\":[140,1200],\"parameters\":{\"text\":\"=### CONTEXTO E PERSONA ###\\nVocÃª Ã© um assistente de IA especialista, responsÃ¡vel por gerenciar os comentÃ¡rios de um perfil no Instagram focado em InteligÃªncia Artificial e AutomaÃ§Ãµes. O objetivo do perfil Ã© educar e engajar a comunidade sobre esses temas. Seu tom deve ser amigÃ¡vel, acessÃ­vel, mas tambÃ©m demonstrar conhecimento e profissionalismo. Responda sempre em portuguÃªs brasileiro.\\n\\n### DADOS DE ENTRADA ###\\n- Nome de UsuÃ¡rio: {{ $('data').item.json.usuario.name }}\\n- Texto do ComentÃ¡rio:{{ $('data').item.json.usuario.message.text }}\\n- Contexto da Publicacao\\n\\n### TAREFA ###\\nAnalise o comentÃ¡rio fornecido e gere uma resposta apropriada, seguindo estas diretrizes:\\n\\n1.  **AnÃ¡lise e Filtragem:**\\n    * **Identifique a IntenÃ§Ã£o:** Ã‰ uma pergunta tÃ©cnica? Uma dÃºvida simples? Um elogio? Uma crÃ­tica construtiva? Um pedido de ajuda? Spam? ConteÃºdo irrelevante?\\n    * **RelevÃ¢ncia:** O comentÃ¡rio estÃ¡ relacionado a IA, automaÃ§Ã£o ou ao conteÃºdo do perfil?\\n\\n2.  **GeraÃ§Ã£o da Resposta:**\\n    * **PersonalizaÃ§Ã£o:** Comece a resposta mencionando o nome de usuÃ¡rio (ex: \\\"OlÃ¡ @{{ $('data').item.json.usuario.name }},\\\").\\n    * **Perguntas Relevantes:** Se for uma pergunta sobre IA/automaÃ§Ã£o que vocÃª pode responder, forneÃ§a uma resposta clara e Ãºtil. Se for muito complexa, agradeÃ§a a pergunta e sugira buscar um post especÃ­fico no perfil, ou diga que o tema Ã© interessante para um futuro conteÃºdo.\\n    * **Elogios:** AgradeÃ§a sinceramente o elogio e, se possÃ­vel, conecte-o a um aspecto do perfil ou do conteÃºdo sobre IA/automaÃ§Ã£o.\\n    * **CrÃ­ticas Construtivas:** AgradeÃ§a o feedback, mostre que ele foi considerado e responda polidamente.\\n    * **Pedidos de Ajuda EspecÃ­ficos (nÃ£o relacionados a conteÃºdo):** Se for um pedido de suporte tÃ©cnico nÃ£o relacionado ao tema central, direcione para o canal adequado ou explique educadamente que nÃ£o pode ajudar com isso ali.\\n    * **ComentÃ¡rios Vagos ou de Engajamento Simples (ex: \\\"Legal!\\\", \\\"ğŸ‘\\\"):** Responda de forma curta e amigÃ¡vel, talvez com um emoji relevante ou incentivando a continuar acompanhando.\\n    * **Spam ou Irrelevante:** Se o comentÃ¡rio for claramente spam, promocional nÃ£o solicitado, ofensivo ou totalmente fora do tÃ³pico de IA/automaÃ§Ã£o, NÃƒO gere uma resposta. Neste caso, retorne APENAS a palavra `[IGNORE]`.\\n\\n3.  **Tom e Estilo:**\\n    * Mantenha o tom amigÃ¡vel, Ãºtil e alinhado com um perfil de tecnologia/educaÃ§Ã£o.\\n    * Evite respostas genÃ©ricas demais quando uma especÃ­fica for possÃ­vel.\\n    * Mantenha as respostas relativamente concisas, adequadas para comentÃ¡rios do Instagram.\\n\\n### SAÃDA ESPERADA ###\\nRetorne APENAS o texto da resposta a ser publicada no Instagram. Se o comentÃ¡rio for classificado como spam/irrelevante conforme a regra 2.7, retorne APENAS a palavra `[IGNORE]`. NÃ£o inclua nenhuma outra explicaÃ§Ã£o ou texto adicional fora da resposta ou da palavra `[IGNORE]`.\",\"options\":{},\"promptType\":\"define\"},\"typeVersion\":1.8},{\"id\":\"e56a220b-f4aa-4505-9157-31980ccb547b\",\"name\":\"OpenRouter Chat Model\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatOpenRouter\",\"position\":[60,1340],\"parameters\":{\"model\":\"google/gemini-2.0-flash-exp:free\",\"options\":{}},\"credentials\":{\"openRouterApi\":{\"id\":\"eGPA8rbskZCfFPBn\",\"name\":\"OpenRouter account\"}},\"typeVersion\":1},{\"id\":\"9f318cf1-d99f-482d-a6d4-03ec4f603c05\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-980,380],\"parameters\":{\"color\":5,\"width\":1440,\"height\":320,\"content\":\"# Data Extraction\\nDescription:\\nExtracts relevant data from the incoming webhook payload.\\nInstructions:\\n\\nVerify that all necessary fields (e.g., entry.id, from.id, from.username, message.id, message.text, media.id) are correctly mapped.\\n\\nThis data will be used in subsequent steps for processing and responding.\\n\"},\"typeVersion\":1},{\"id\":\"a413c839-fa19-44b9-ae33-2638dd45436e\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-980,780],\"parameters\":{\"color\":6,\"width\":1440,\"height\":320,\"content\":\"# User Validation\\nDescription:\\nChecks if the comment originates from a user other than the account owner.\\nInstructions:\\n\\nCompare conta.id with usuario.id.\\n\\nProceed only if they differ, indicating the comment is from another user.\"},\"typeVersion\":1},{\"id\":\"b19d4891-5f7e-478b-9458-464af1fd409c\",\"name\":\"Sticky Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-980,1160],\"parameters\":{\"color\":2,\"width\":1440,\"height\":320,\"content\":\"# AI Response Generation\\nDescription:\\nUtilizes an AI agent to generate a context-aware response to the user's comment.\\nInstructions:\\n\\nEnsure the AI model is properly configured and has access to the necessary input data.\\n\\nThe prompt should guide the AI to produce responses that are friendly, informative, and aligned with the profile's focus on AI and automation.\"},\"typeVersion\":1},{\"id\":\"1f8b05ee-0380-4dc7-8671-f0ae87a7d08f\",\"name\":\"Sticky Note4\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-980,1560],\"parameters\":{\"color\":3,\"width\":1440,\"height\":320,\"content\":\"# Sending the Response\\nDescription:\\nSends the AI-generated reply back to the user via Instagram's API.\\nInstructions:\\n\\nConfirm that the HTTP request is correctly formatted with the appropriate endpoint and authentication headers.\\n\\nHandle any potential errors or exceptions that may arise during the API call.\"},\"typeVersion\":1},{\"id\":\"ff54a7c0-40b9-4ad8-a3de-47a8a20cd3e1\",\"name\":\"Get post data\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[-80,880],\"parameters\":{\"url\":\"=https://graph.instagram.com/v22.0/{{ $json.usuario.media.id }}?fields=id,caption\",\"options\":{},\"authentication\":\"genericCredentialType\",\"genericAuthType\":\"httpHeaderAuth\"},\"credentials\":{\"httpHeaderAuth\":{\"id\":\"6H4syU3wzaoNBy2k\",\"name\":\"Header Auth account\"},\"facebookGraphApi\":{\"id\":\"z7CU24qbafckHljY\",\"name\":\"Facebook Graph account\"}},\"typeVersion\":4.2},{\"id\":\"d7a66f78-83f2-4173-8602-c34210364149\",\"name\":\"get_new_comments\",\"type\":\"n8n-nodes-base.webhook\",\"position\":[40,480],\"webhookId\":\"ea7d37ac-9e82-40d7-bbb3-e9b7ce180fc9\",\"parameters\":{\"path\":\"ea7d37ac-9e82-40d7-bbb3-e9b7ce180fc9\",\"options\":{},\"httpMethod\":\"POST\"},\"typeVersion\":2},{\"id\":\"0924d70a-45a2-49c9-9459-eb6e7261005e\",\"name\":\"data\",\"type\":\"n8n-nodes-base.set\",\"position\":[280,480],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"1a3c5a2e-115d-4072-9d27-9baa47e84d6f\",\"name\":\"endpoint\",\"type\":\"string\",\"value\":\"https://graph.instagram.com/v22.0\"},{\"id\":\"ae83344d-abe5-43d6-991f-e757965e4557\",\"name\":\"conta.id\",\"type\":\"string\",\"value\":\"={{ $json.body.entry[0].id }}\"},{\"id\":\"d18887fa-b882-4d69-a1c0-d161291fe5fb\",\"name\":\"usuario.id\",\"type\":\"string\",\"value\":\"={{ $json.body.entry[0].changes[0].value.from.id }}\"},{\"id\":\"000f2d0e-6fbf-4e58-ae9c-cac4a3c54b33\",\"name\":\"usuario.name\",\"type\":\"string\",\"value\":\"={{ $json.body.entry[0].changes[0].value.from.username }}\"},{\"id\":\"d6fa2b24-abbe-48f7-96ff-2fc69f17b61b\",\"name\":\"usuario.message.id\",\"type\":\"string\",\"value\":\"={{ $json.body.entry[0].changes[0].value.id }}\"},{\"id\":\"605e9c4c-f2fc-49eb-8639-573c60ef33bb\",\"name\":\"usuario.message.text\",\"type\":\"string\",\"value\":\"={{ $json.body.entry[0].changes[0].value.text }}\"},{\"id\":\"198afc5d-3fd1-4d9d-aa5a-8baf75f06d29\",\"name\":\"usuario.media.id\",\"type\":\"string\",\"value\":\"={{ $json.body.entry[0].changes[0].value.media.id }}\"}]}},\"typeVersion\":3.4},{\"id\":\"2836ec33-b19f-4875-bfeb-08d9f9feae49\",\"name\":\"its me?\",\"type\":\"n8n-nodes-base.filter\",\"position\":[200,880],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"54c0a2d1-f812-4d6a-b50b-c272cfbba772\",\"operator\":{\"type\":\"string\",\"operation\":\"notEquals\"},\"leftValue\":\"={{ $('data').item.json.conta.id }}\",\"rightValue\":\"={{ $('data').item.json.usuario.id }}\"}]}},\"typeVersion\":2.2},{\"id\":\"fdf8ff5e-9c17-43f3-a747-79228ca68e03\",\"name\":\"Post comment\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[260,1660],\"parameters\":{\"url\":\"={{ $('data').item.json.endpoint }}/{{ $('data').item.json.usuario.message.id }}/replies\",\"method\":\"POST\",\"options\":{},\"sendBody\":true,\"authentication\":\"genericCredentialType\",\"bodyParameters\":{\"parameters\":[{\"name\":\"message\",\"value\":\"={{ $json.output }}\"}]},\"genericAuthType\":\"httpHeaderAuth\"},\"credentials\":{\"httpHeaderAuth\":{\"id\":\"6H4syU3wzaoNBy2k\",\"name\":\"Header Auth account\"}},\"typeVersion\":4.2}],\"active\":true,\"pinData\":{\"get_new_comments\":[{\"json\":{\"body\":{\"entry\":[{\"id\":\"17841458749050638\",\"time\":1745696027,\"changes\":[{\"field\":\"comments\",\"value\":{\"id\":\"17992882022637707\",\"from\":{\"id\":\"1797582914152092\",\"username\":\"luchiogutierrez\"},\"text\":\"ğŸ˜\",\"media\":{\"id\":\"17969449379894182\",\"media_product_type\":\"FEED\"}}}]}],\"object\":\"instagram\"},\"query\":{},\"params\":{},\"headers\":{\"host\":\"host.docker.internal:5678\",\"accept\":\"*/*\",\"x-scheme\":\"https\",\"forwarded\":\"by=_exposr;for=173.252.95.16;host=engaging-seahorse-19.rshare.io;proto=https\",\"x-real-ip\":\"173.252.95.16\",\"connection\":\"keep-alive\",\"exposr-via\":\"77940acbe1755f6fca18880bd02e462ee55d0cde,0374ae5bede6d70d299155239dbb7e045533e1f4\",\"user-agent\":\"Webhooks/1.0 (https://fb.me/webhooks)\",\"content-type\":\"application/json\",\"x-request-id\":\"b0c4e9d6dd2baa18bab7eab283ad4788\",\"content-length\":\"316\",\"x-forwarded-for\":\"173.252.95.16\",\"x-hub-signature\":\"sha1=b3d396ac784244a020268dd9599e708b21688b75\",\"x-forwarded-host\":\"engaging-seahorse-19.rshare.io\",\"x-forwarded-port\":\"443\",\"x-forwarded-proto\":\"https\",\"x-forwarded-scheme\":\"https\",\"x-hub-signature-256\":\"sha256=40e1e91b67c7fa82afca10c81ff4b1200d9561384ee5ba690bf9bc22814cb09b\"},\"webhookUrl\":\"https://engaging-seahorse-19.rshare.io/webhook/ea7d37ac-9e82-40d7-bbb3-e9b7ce180fc9\",\"executionMode\":\"production\"}}],\"Respond to Webhook\":[{\"json\":{\"body\":{},\"query\":{\"hub.mode\":\"subscribe\",\"hub.challenge\":\"219585499\",\"hub.verify_token\":\"teste\"},\"params\":{},\"headers\":{\"host\":\"host.docker.internal:5678\",\"accept\":\"*/*\",\"x-scheme\":\"https\",\"forwarded\":\"by=_exposr;for=173.252.107.25;host=actual-beagle-88.rshare.io;proto=https\",\"x-real-ip\":\"173.252.107.25\",\"connection\":\"keep-alive\",\"exposr-via\":\"b37bd560bd173ee1195fceaef48a1468e8fa83f0,f06a3ed204e476a5915fc6fff7228b77c1c9e1d3\",\"user-agent\":\"facebookplatform/1.0 (+http://developers.facebook.com)\",\"x-request-id\":\"037b358cf28db9e3bffdf52703fd9069\",\"accept-encoding\":\"deflate, gzip\",\"x-forwarded-for\":\"173.252.107.25\",\"x-forwarded-host\":\"actual-beagle-88.rshare.io\",\"x-forwarded-port\":\"443\",\"x-forwarded-proto\":\"https\",\"x-forwarded-scheme\":\"https\"},\"webhookUrl\":\"http://localhost:5678/webhook-test/ea7d37ac-9e82-40d7-bbb3-e9b7ce180fc9\",\"executionMode\":\"test\"}}]},\"settings\":{\"executionOrder\":\"v1\"},\"versionId\":\"2a39918c-36c8-486e-acb3-3420a4a8b8b1\",\"connections\":{\"data\":{\"main\":[[{\"node\":\"Get post data\",\"type\":\"main\",\"index\":0}]]},\"Webhook\":{\"main\":[[{\"node\":\"Respond to Webhook\",\"type\":\"main\",\"index\":0}]]},\"its me?\":{\"main\":[[{\"node\":\"AI Agent\",\"type\":\"main\",\"index\":0}]]},\"AI Agent\":{\"main\":[[{\"node\":\"Post comment\",\"type\":\"main\",\"index\":0}]]},\"Get post data\":{\"main\":[[{\"node\":\"its me?\",\"type\":\"main\",\"index\":0}]]},\"get_new_comments\":{\"main\":[[{\"node\":\"data\",\"type\":\"main\",\"index\":0}]]},\"OpenRouter Chat Model\":{\"ai_languageModel\":[[{\"node\":\"AI Agent\",\"type\":\"ai_languageModel\",\"index\":0}]]}}}",
  "readme": "## Instagram Auto-Comment Responder with AI Agent Integration\n\n**Version:** 1.1.0 â€§ **n8n Version:** 1.88.0+ â€§ **License:** MIT\n\nA fully automated workflow for managing and responding to Instagram comments using AI agents. Designed to improve engagement and save time, this system listens for new Instagram comments, verifies and filters them, fetches relevant post data, processes valid messages with a natural language AI, and posts context-aware replies directly on the original post.\n\n* * *\n\n## Key Features\n\n  * ğŸ’¬ **AI-Driven Engagement** : Intelligent responses to comments via a GPT-powered agent.\n  * âœ… **Webhook Verification** : Handles Instagram webhook handshake to ensure secure integration.\n  * ğŸ“¦ **Data Extraction** : Maps incoming payload fields (user ID, username, message text, media ID) for processing.\n  * ğŸš« **Self-Comment Filtering** : Automatically skips comments made by the account owner to prevent loops.\n  * ğŸ“¡ **Post Data Retrieval** : Fetches the mediaâ€™s `id` and `caption` from the Graph API (v22.0) before generating a reply.\n  * ğŸ§  **Natural Language Processing** : Uses a custom system prompt to maintain brand tone and context.\n  * ğŸ” **Automated Replies** : Posts the AI-generated message back to the comment thread using Instagramâ€™s API.\n  * ğŸ§© **Modular Architecture** : Clear separation of steps via sticky notes and dedicated HTTP Request and Agent nodes.\n\n\n\n## Use Cases\n\n  * **Social Media Automation** : Keep followers engaged 24/7 with instant, relevant replies.\n  * **Community Building** : Maintain a consistent voice and tone across all interactions.\n  * **Brand Reputation Management** : Ensure no valid comment goes unanswered.\n  * **AI Customer Support** : Triage simple questions and direct followers to resources or support.\n\n\n\n## Technical Implementation\n\n  1. **Webhook Verification**\n\n     * Node: **Webhook** \\+ **Respond to Webhook**\n     * Echoes `hub.challenge` to confirm subscription and secure incoming events.\n  2. **Data Extraction**\n\n     * Node: **Set**\n     * Maps payload fields into structured variables: `conta.id`, `usuario.id`, `usuario.name`, `usuario.message.id`, `usuario.message.text`, `usuario.media.id`, `endpoint`.\n  3. **User Validation**\n\n     * Node: **Filter**\n     * Skips processing if `conta.id` equals `usuario.id` (self-comments).\n  4. **Post Data Retrieval**\n\n     * Node: **HTTP Request (Get post data)**\n     * GET `https://graph.instagram.com/v22.0/{{ $json.usuario.media.id }}?fields=id,caption&access_token={{ credentials }}`\n     * Captures the mediaâ€™s caption for richer context in replies.\n  5. **AI Response Generation**\n\n     * Nodes: **AI Agent** \\+ **OpenRouter Chat Model**\n     * Uses a detailed system prompt with: \n       * Profile persona (expert in AI & automations, friendly tone).\n       * Input data (username, comment text, post caption).\n       * Filtering logic (spam, praise, questions, vague comments).\n     * Returns either the reply text or `[IGNORE]` for irrelevant content.\n  6. **Posting the Reply**\n\n     * Node: **HTTP Request (Post comment)**\n     * POST `{{ $json.endpoint }}/{{ $json.usuario.message.id }}/replies` with `message={{ $json.output }}`\n     * Sends the AI answer back under the original comment.\n\n\n\n* * *\n\n## Instructions for Setup\n\n  1. **Import Workflow**  \nIn **n8n > Workflows > Import from File**, upload the provided `.json` template.\n\n  2. **Configure Credentials**\n\n     * **Instagram Graph API** (Header Auth or FacebookGraphApi) with `instagram_basic`, `instagram_manage_comments` scopes.\n     * **OpenRouter/OpenAI API** key for AI agent.\n  3. **Customize System Prompt**\n\n     * Edit the AI Agentâ€™s prompt to adjust brand tone, language (Brazilian Portuguese), length, or emoji usage.\n  4. **Test & Activate**\n\n     * Publish a test comment on an Instagram post.\n     * Verify each nodeâ€™s execution, ensuring the webhook, filter, data extraction, HTTP requests, and AI Agent respond as expected.\n  5. **Extend & Monitor**\n\n     * Add sentiment analysis or lead capture nodes as needed.\n     * Monitor execution logs for errors or rate-limit events.\n\n\n\n* * *\n\n## Tags\n\nSocial Media â€¢ Instagram Automation â€¢ Webhook Verification â€¢ AI Agent â€¢ HTTP Request â€¢ Auto Reply â€¢ Community Management\n",
  "readme_html": "<!--[--><div data-v-006f9244=\"\"><h2>Instagram Auto-Comment Responder with AI Agent Integration</h2>\n<p><strong>Version:</strong> 1.1.0 â€§ <strong>n8n Version:</strong> 1.88.0+ â€§ <strong>License:</strong> MIT</p>\n<p>A fully automated workflow for managing and responding to Instagram comments using AI agents. Designed to improve engagement and save time, this system listens for new Instagram comments, verifies and filters them, fetches relevant post data, processes valid messages with a natural language AI, and posts context-aware replies directly on the original post.</p>\n<hr>\n<h2>Key Features</h2>\n<ul>\n<li>ğŸ’¬ <strong>AI-Driven Engagement</strong>: Intelligent responses to comments via a GPT-powered agent.</li>\n<li>âœ… <strong>Webhook Verification</strong>: Handles Instagram webhook handshake to ensure secure integration.</li>\n<li>ğŸ“¦ <strong>Data Extraction</strong>: Maps incoming payload fields (user ID, username, message text, media ID) for processing.</li>\n<li>ğŸš« <strong>Self-Comment Filtering</strong>: Automatically skips comments made by the account owner to prevent loops.</li>\n<li>ğŸ“¡ <strong>Post Data Retrieval</strong>: Fetches the mediaâ€™s <code>id</code> and <code>caption</code> from the Graph API (v22.0) before generating a reply.</li>\n<li>ğŸ§  <strong>Natural Language Processing</strong>: Uses a custom system prompt to maintain brand tone and context.</li>\n<li>ğŸ” <strong>Automated Replies</strong>: Posts the AI-generated message back to the comment thread using Instagramâ€™s API.</li>\n<li>ğŸ§© <strong>Modular Architecture</strong>: Clear separation of steps via sticky notes and dedicated HTTP Request and Agent nodes.</li>\n</ul>\n<h2>Use Cases</h2>\n<ul>\n<li><strong>Social Media Automation</strong>: Keep followers engaged 24/7 with instant, relevant replies.</li>\n<li><strong>Community Building</strong>: Maintain a consistent voice and tone across all interactions.</li>\n<li><strong>Brand Reputation Management</strong>: Ensure no valid comment goes unanswered.</li>\n<li><strong>AI Customer Support</strong>: Triage simple questions and direct followers to resources or support.</li>\n</ul>\n<h2>Technical Implementation</h2>\n<ol>\n<li>\n<p><strong>Webhook Verification</strong></p>\n<ul>\n<li>Node: <strong>Webhook</strong> + <strong>Respond to Webhook</strong></li>\n<li>Echoes <code>hub.challenge</code> to confirm subscription and secure incoming events.</li>\n</ul>\n</li>\n<li>\n<p><strong>Data Extraction</strong></p>\n<ul>\n<li>Node: <strong>Set</strong></li>\n<li>Maps payload fields into structured variables: <code>conta.id</code>, <code>usuario.id</code>, <code>usuario.name</code>, <code>usuario.message.id</code>, <code>usuario.message.text</code>, <code>usuario.media.id</code>, <code>endpoint</code>.</li>\n</ul>\n</li>\n<li>\n<p><strong>User Validation</strong></p>\n<ul>\n<li>Node: <strong>Filter</strong></li>\n<li>Skips processing if <code>conta.id</code> equals <code>usuario.id</code> (self-comments).</li>\n</ul>\n</li>\n<li>\n<p><strong>Post Data Retrieval</strong></p>\n<ul>\n<li>Node: <strong>HTTP Request (Get post data)</strong></li>\n<li>GET <code>https://graph.instagram.com/v22.0/{{ $json.usuario.media.id }}?fields=id,caption&amp;access_token={{ credentials }}</code></li>\n<li>Captures the mediaâ€™s caption for richer context in replies.</li>\n</ul>\n</li>\n<li>\n<p><strong>AI Response Generation</strong></p>\n<ul>\n<li>Nodes: <strong>AI Agent</strong> + <strong>OpenRouter Chat Model</strong></li>\n<li>Uses a detailed system prompt with:\n<ul>\n<li>Profile persona (expert in AI &amp; automations, friendly tone).</li>\n<li>Input data (username, comment text, post caption).</li>\n<li>Filtering logic (spam, praise, questions, vague comments).</li>\n</ul>\n</li>\n<li>Returns either the reply text or <code>[IGNORE]</code> for irrelevant content.</li>\n</ul>\n</li>\n<li>\n<p><strong>Posting the Reply</strong></p>\n<ul>\n<li>Node: <strong>HTTP Request (Post comment)</strong></li>\n<li>POST <code>{{ $json.endpoint }}/{{ $json.usuario.message.id }}/replies</code> with <code>message={{ $json.output }}</code></li>\n<li>Sends the AI answer back under the original comment.</li>\n</ul>\n</li>\n</ol>\n<hr>\n<h2>Instructions for Setup</h2>\n<ol>\n<li>\n<p><strong>Import Workflow</strong><br>\nIn <strong>n8n &gt; Workflows &gt; Import from File</strong>, upload the provided <code>.json</code> template.</p>\n</li>\n<li>\n<p><strong>Configure Credentials</strong></p>\n<ul>\n<li><strong>Instagram Graph API</strong> (Header Auth or FacebookGraphApi) with <code>instagram_basic</code>, <code>instagram_manage_comments</code> scopes.</li>\n<li><strong>OpenRouter/OpenAI API</strong> key for AI agent.</li>\n</ul>\n</li>\n<li>\n<p><strong>Customize System Prompt</strong></p>\n<ul>\n<li>Edit the AI Agentâ€™s prompt to adjust brand tone, language (Brazilian Portuguese), length, or emoji usage.</li>\n</ul>\n</li>\n<li>\n<p><strong>Test &amp; Activate</strong></p>\n<ul>\n<li>Publish a test comment on an Instagram post.</li>\n<li>Verify each nodeâ€™s execution, ensuring the webhook, filter, data extraction, HTTP requests, and AI Agent respond as expected.</li>\n</ul>\n</li>\n<li>\n<p><strong>Extend &amp; Monitor</strong></p>\n<ul>\n<li>Add sentiment analysis or lead capture nodes as needed.</li>\n<li>Monitor execution logs for errors or rate-limit events.</li>\n</ul>\n</li>\n</ol>\n<hr>\n<h2>Tags</h2>\n<p>Social Media â€¢ Instagram Automation â€¢ Webhook Verification â€¢ AI Agent â€¢ HTTP Request â€¢ Auto Reply â€¢ Community Management</p>\n</div><!--]-->",
  "readme_zh": "## Instagram æ™ºèƒ½è¯„è®ºè‡ªåŠ¨å›å¤ç³»ç»Ÿï¼ˆé›†æˆAIä»£ç†ï¼‰\n\n**ç‰ˆæœ¬å·ï¼š** 1.1.0 â€§ **n8nç‰ˆæœ¬è¦æ±‚ï¼š** 1.88.0+ â€§ **å¼€æºåè®®ï¼š** MIT\n\nä¸€å¥—å…¨è‡ªåŠ¨åŒ–çš„Instagramè¯„è®ºç®¡ç†ä¸å›å¤å·¥ä½œæµç³»ç»Ÿï¼Œé€šè¿‡AIä»£ç†å®ç°æ™ºèƒ½äº’åŠ¨ã€‚è¯¥ç³»ç»Ÿèƒ½å®æ—¶ç›‘å¬æ–°è¯„è®ºã€è¿›è¡ŒéªŒè¯ç­›é€‰ã€è·å–å…³è”å¸–å­æ•°æ®ã€ä½¿ç”¨è‡ªç„¶è¯­è¨€AIå¤„ç†æœ‰æ•ˆæ¶ˆæ¯ï¼Œå¹¶åœ¨åŸå¸–ä¸‹å‘å¸ƒç¬¦åˆè¯­å¢ƒçš„å›å¤ï¼Œæ˜¾è‘—æå‡äº’åŠ¨æ•ˆç‡å¹¶èŠ‚çœæ—¶é—´ã€‚\n\n* * *\n\n## æ ¸å¿ƒåŠŸèƒ½\n\n  * ğŸ’¬ **AIæ™ºèƒ½äº’åŠ¨** ï¼šé€šè¿‡GPTé©±åŠ¨çš„ä»£ç†ç”Ÿæˆæ™ºèƒ½å›å¤\n  * âœ… **WebhookéªŒè¯** ï¼šå¤„ç†Instagramçš„webhookæ¡æ‰‹åè®®ç¡®ä¿å®‰å…¨æ¥å…¥\n  * ğŸ“¦ **æ•°æ®æå–** ï¼šæ˜ å°„è¾“å…¥å­—æ®µï¼ˆç”¨æˆ·IDã€ç”¨æˆ·åã€æ¶ˆæ¯æ–‡æœ¬ã€åª’ä½“IDï¼‰ä»¥ä¾›å¤„ç†\n  * ğŸš« **è‡ªè¯„è¿‡æ»¤** ï¼šè‡ªåŠ¨è·³è¿‡è´¦å·æŒæœ‰è€…çš„è¯„è®ºé˜²æ­¢å¾ªç¯å›å¤\n  * ğŸ“¡ **å¸–å­æ•°æ®è·å–** ï¼šé€šè¿‡Graph APIï¼ˆv22.0ï¼‰è·å–åª’ä½“`id`å’Œ`caption`ç”¨äºç”Ÿæˆå›å¤\n  * ğŸ§  **è‡ªç„¶è¯­è¨€å¤„ç†** ï¼šå®šåˆ¶ç³»ç»Ÿæç¤ºè¯ä¿æŒå“ç‰Œè°ƒæ€§ä¸è¯­å¢ƒä¸€è‡´æ€§\n  * ğŸ” **è‡ªåŠ¨å›å¤** ï¼šé€šè¿‡Instagram APIå°†AIç”Ÿæˆå†…å®¹å‘å¸ƒè‡³åŸè¯„è®ºçº¿ç¨‹\n  * ğŸ§© **æ¨¡å—åŒ–æ¶æ„** ï¼šé€šè¿‡ä¾¿ç­¾æ³¨é‡Šå’Œä¸“ç”¨HTTPè¯·æ±‚/ä»£ç†èŠ‚ç‚¹å®ç°æ­¥éª¤è§£è€¦",
  "title_zh": "åˆ©ç”¨Gemini AIå®ç°ä¸Šä¸‹æ–‡æ„ŸçŸ¥çš„è‡ªåŠ¨Instagramè¯„è®ºå›å¤",
  "publish_date_absolute": "2025-05-04",
  "publish_date_zh": "æœ€åæ›´æ–°äº2å¤©å‰",
  "workflow_json_zh": "{\n  \"id\": \"4rXRDurF4mQKrHyB\",\n  \"meta\": {\n    \"instanceId\": \"6d46e25379ef430a7067964d1096b885c773564549240cb3ad4c087f6cf94bd3\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"name\": \"comentarios automaticos\",\n  \"tags\": [],\n  \"nodes\": [\n    {\n      \"id\": \"5c5322a4-10cf-43a1-8286-101c96d8c356\",\n      \"name\": \"Webhook\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"position\": [\n        40,\n        100\n      ],\n      \"webhookId\": \"ea7d37ac-9e82-40d7-bbb3-e9b7ce180fc9\",\n      \"parameters\": {\n        \"path\": \"ea7d37ac-9e82-40d7-bbb3-e9b7ce180fc9\",\n        \"options\": {},\n        \"responseMode\": \"responseNode\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"c281b25f-4f5a-46a3-b2ca-c9fba1cf98e1\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -980,\n        0\n      ],\n      \"parameters\": {\n        \"width\": 1440,\n        \"height\": 320,\n        \"content\": \"# WebhookéªŒè¯  \\næè¿°ï¼š  \\nå¤„ç†ä¸Instagram Webhook APIçš„åˆå§‹éªŒè¯æ¡æ‰‹ã€‚  \\n\\næ“ä½œæŒ‡å—ï¼š  \\nç¡®ä¿hub.verify_tokenä¸æ‚¨åœ¨Instagramåº”ç”¨è®¾ç½®ä¸­é…ç½®çš„ä»¤ç‰ŒåŒ¹é…ã€‚  \\n\\nå“åº”åº”è¿”å›hub.challengeå‚æ•°ä»¥ç¡®è®¤webhookè®¾ç½®å®Œæˆã€‚\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"f890a4d2-f897-4103-a52f-48fa3555f9a6\",\n      \"name\": \"Respond to Webhook\",\n      \"type\": \"n8n-nodes-base.respondToWebhook\",\n      \"position\": [\n        260,\n        100\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"respondWith\": \"text\",\n        \"responseBody\": \"={{ $json.query['hub.challenge'] }}\"\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"4afb4f9b-7f0f-41b8-afd0-d5c134a6a622\",\n      \"name\": \"AI Agent\",\n      \"type\": \"@n8n/n8n-nodes-langchain.agent\",\n      \"position\": [\n        140,\n        1200\n      ],\n      \"parameters\": {\n        \"text\": \"=### CONTEXTO E PERSONA ###\\nVocÃª Ã© um assistente de IA especialista, responsÃ¡vel por gerenciar os comentÃ¡rios de um perfil no Instagram focado em InteligÃªncia Artificial e AutomaÃ§Ãµes. O objetivo do perfil Ã© educar e engajar a comunidade sobre esses temas. Seu tom deve ser amigÃ¡vel, acessÃ­vel, mas tambÃ©m demonstrar conhecimento e profissionalismo. Responda sempre em portuguÃªs brasileiro.\\n\\n### DADOS DE ENTRADA ###\\n- Nome de UsuÃ¡rio: {{ $('data').item.json.usuario.name }}\\n- Texto do ComentÃ¡rio:{{ $('data').item.json.usuario.message.text }}\\n- Contexto da Publicacao\\n\\n### TAREFA ###\\nAnalise o comentÃ¡rio fornecido e gere uma resposta apropriada, seguindo estas diretrizes:\\n\\n1.  **AnÃ¡lise e Filtragem:**\\n    * **Identifique a IntenÃ§Ã£o:** Ã‰ uma pergunta tÃ©cnica? Uma dÃºvida simples? Um elogio? Uma crÃ­tica construtiva? Um pedido de ajuda? Spam? ConteÃºdo irrelevante?\\n    * **RelevÃ¢ncia:** O comentÃ¡rio estÃ¡ relacionado a IA, automaÃ§Ã£o ou ao conteÃºdo do perfil?\\n\\n2.  **GeraÃ§Ã£o da Resposta:**\\n    * **PersonalizaÃ§Ã£o:** Comece a resposta mencionando o nome de usuÃ¡rio (ex: \\\"OlÃ¡ @{{ $('data').item.json.usuario.name }},\\\").\\n    * **Perguntas Relevantes:** Se for uma pergunta sobre IA/automaÃ§Ã£o que vocÃª pode responder, forneÃ§a uma resposta clara e Ãºtil. Se for muito complexa, agradeÃ§a a pergunta e sugira buscar um post especÃ­fico no perfil, ou diga que o tema Ã© interessante para um futuro conteÃºdo.\\n    * **Elogios:** AgradeÃ§a sinceramente o elogio e, se possÃ­vel, conecte-o a um aspecto do perfil ou do conteÃºdo sobre IA/automaÃ§Ã£o.\\n    * **CrÃ­ticas Construtivas:** AgradeÃ§a o feedback, mostre que ele foi considerado e responda polidamente.\\n    * **Pedidos de Ajuda EspecÃ­ficos (nÃ£o relacionados a conteÃºdo):** Se for um pedido de suporte tÃ©cnico nÃ£o relacionado ao tema central, direcione para o canal adequado ou explique educadamente que nÃ£o pode ajudar com isso ali.\\n    * **ComentÃ¡rios Vagos ou de Engajamento Simples (ex: \\\"Legal!\\\", \\\"ğŸ‘\\\"):** Responda de forma curta e amigÃ¡vel, talvez com um emoji relevante ou incentivando a continuar acompanhando.\\n    * **Spam ou Irrelevante:** Se o comentÃ¡rio for claramente spam, promocional nÃ£o solicitado, ofensivo ou totalmente fora do tÃ³pico de IA/automaÃ§Ã£o, NÃƒO gere uma resposta. Neste caso, retorne APENAS a palavra `[IGNORE]`.\\n\\n3.  **Tom e Estilo:**\\n    * Mantenha o tom amigÃ¡vel, Ãºtil e alinhado com um perfil de tecnologia/educaÃ§Ã£o.\\n    * Evite respostas genÃ©ricas demais quando uma especÃ­fica for possÃ­vel.\\n    * Mantenha as respostas relativamente concisas, adequadas para comentÃ¡rios do Instagram.\\n\\n### SAÃDA ESPERADA ###\\nRetorne APENAS o texto da resposta a ser publicada no Instagram. Se o comentÃ¡rio for classificado como spam/irrelevante conforme a regra 2.7, retorne APENAS a palavra `[IGNORE]`. NÃ£o inclua nenhuma outra explicaÃ§Ã£o ou texto adicional fora da resposta ou da palavra `[IGNORE]`.\",\n        \"options\": {},\n        \"promptType\": \"define\"\n      },\n      \"typeVersion\": 1.8\n    },\n    {\n      \"id\": \"e56a220b-f4aa-4505-9157-31980ccb547b\",\n      \"name\": \"OpenRouter Chat Model\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatOpenRouter\",\n      \"position\": [\n        60,\n        1340\n      ],\n      \"parameters\": {\n        \"model\": \"google/gemini-2.0-flash-exp:free\",\n        \"options\": {}\n      },\n      \"credentials\": {\n        \"openRouterApi\": {\n          \"id\": \"eGPA8rbskZCfFPBn\",\n          \"name\": \"OpenRouter account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"9f318cf1-d99f-482d-a6d4-03ec4f603c05\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -980,\n        380\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 1440,\n        \"height\": 320,\n        \"content\": \"# æ•°æ®æå–\\næè¿°ï¼š\\nä»ä¼ å…¥çš„webhookè´Ÿè½½ä¸­æå–ç›¸å…³æ•°æ®ã€‚\\næ“ä½œè¯´æ˜ï¼š\\n\\nç¡®ä¿æ‰€æœ‰å¿…è¦å­—æ®µï¼ˆå¦‚entry.idã€from.idã€from.usernameã€message.idã€message.textã€media.idï¼‰å‡å·²æ­£ç¡®æ˜ å°„ã€‚\\n\\nè¿™äº›æ•°æ®å°†ç”¨äºåç»­çš„å¤„ç†å’Œå“åº”æ­¥éª¤ã€‚\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"a413c839-fa19-44b9-ae33-2638dd45436e\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -980,\n        780\n      ],\n      \"parameters\": {\n        \"color\": 6,\n        \"width\": 1440,\n        \"height\": 320,\n        \"content\": \"# ç”¨æˆ·éªŒè¯\\næè¿°ï¼š\\næ£€æŸ¥è¯„è®ºæ˜¯å¦æ¥è‡ªè´¦æˆ·æ‰€æœ‰è€…ä»¥å¤–çš„å…¶ä»–ç”¨æˆ·ã€‚\\n\\næ“ä½œè¯´æ˜ï¼š\\næ¯”è¾ƒconta.idä¸usuario.idã€‚\\n\\nä»…å½“ä¸¤è€…ä¸åŒæ—¶ï¼ˆè¡¨ç¤ºè¯„è®ºæ¥è‡ªå…¶ä»–ç”¨æˆ·ï¼‰æ‰ç»§ç»­æ‰§è¡Œã€‚\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"b19d4891-5f7e-478b-9458-464af1fd409c\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -980,\n        1160\n      ],\n      \"parameters\": {\n        \"color\": 2,\n        \"width\": 1440,\n        \"height\": 320,\n        \"content\": \"# AIå›å¤ç”Ÿæˆ\\nåŠŸèƒ½æè¿°ï¼š\\nåˆ©ç”¨AIæ™ºèƒ½ä½“é’ˆå¯¹ç”¨æˆ·è¯„è®ºç”Ÿæˆå…·æœ‰ä¸Šä¸‹æ–‡æ„ŸçŸ¥èƒ½åŠ›çš„å›å¤ã€‚\\n\\né…ç½®è¯´æ˜ï¼š\\n\\n1. ç¡®ä¿AIæ¨¡å‹å·²æ­£ç¡®é…ç½®å¹¶å…·å¤‡å¿…è¦è¾“å…¥æ•°æ®çš„è®¿é—®æƒé™\\n\\n2. æç¤ºè¯åº”å¼•å¯¼AIç”Ÿæˆç¬¦åˆä»¥ä¸‹è¦æ±‚çš„å›å¤ï¼š\\n   - ä¿æŒå‹å¥½äº²åˆ‡çš„è¯­æ°”\\n   - æä¾›æœ‰ä»·å€¼çš„ä¿¡æ¯\\n   - å†…å®¹èšç„¦äººå·¥æ™ºèƒ½ä¸è‡ªåŠ¨åŒ–é¢†åŸŸ\\n   - ä¸è´¦å·ä¸“ä¸šå®šä½ä¿æŒä¸€è‡´\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"1f8b05ee-0380-4dc7-8671-f0ae87a7d08f\",\n      \"name\": \"Sticky Note4\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -980,\n        1560\n      ],\n      \"parameters\": {\n        \"color\": 3,\n        \"width\": 1440,\n        \"height\": 320,\n        \"content\": \"# å‘é€å›å¤\\nåŠŸèƒ½æè¿°ï¼š\\né€šè¿‡Instagramçš„APIå°†AIç”Ÿæˆçš„å›å¤å‘é€ç»™ç”¨æˆ·ã€‚\\n\\næ“ä½œæŒ‡å—ï¼š\\n1. ç¡®è®¤HTTPè¯·æ±‚å·²æ­£ç¡®é…ç½®ï¼ŒåŒ…å«æ°å½“çš„APIç«¯ç‚¹åŠè®¤è¯å¤´éƒ¨ä¿¡æ¯\\n2. å¤„ç†APIè°ƒç”¨è¿‡ç¨‹ä¸­å¯èƒ½å‡ºç°çš„é”™è¯¯æˆ–å¼‚å¸¸æƒ…å†µ\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"ff54a7c0-40b9-4ad8-a3de-47a8a20cd3e1\",\n      \"name\": \"Get post data\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        -80,\n        880\n      ],\n      \"parameters\": {\n        \"url\": \"=https://graph.instagram.com/v22.0/{{ $json.usuario.media.id }}?fields=id,caption\",\n        \"options\": {},\n        \"authentication\": \"genericCredentialType\",\n        \"genericAuthType\": \"httpHeaderAuth\"\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": {\n          \"id\": \"6H4syU3wzaoNBy2k\",\n          \"name\": \"Header Auth account\"\n        },\n        \"facebookGraphApi\": {\n          \"id\": \"z7CU24qbafckHljY\",\n          \"name\": \"Facebook Graph account\"\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"d7a66f78-83f2-4173-8602-c34210364149\",\n      \"name\": \"get_new_comments\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"position\": [\n        40,\n        480\n      ],\n      \"webhookId\": \"ea7d37ac-9e82-40d7-bbb3-e9b7ce180fc9\",\n      \"parameters\": {\n        \"path\": \"ea7d37ac-9e82-40d7-bbb3-e9b7ce180fc9\",\n        \"options\": {},\n        \"httpMethod\": \"POST\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"0924d70a-45a2-49c9-9459-eb6e7261005e\",\n      \"name\": \"data\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        280,\n        480\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"1a3c5a2e-115d-4072-9d27-9baa47e84d6f\",\n              \"name\": \"endpoint\",\n              \"type\": \"string\",\n              \"value\": \"https://graph.instagram.com/v22.0\"\n            },\n            {\n              \"id\": \"ae83344d-abe5-43d6-991f-e757965e4557\",\n              \"name\": \"conta.id\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.body.entry[0].id }}\"\n            },\n            {\n              \"id\": \"d18887fa-b882-4d69-a1c0-d161291fe5fb\",\n              \"name\": \"usuario.id\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.body.entry[0].changes[0].value.from.id }}\"\n            },\n            {\n              \"id\": \"000f2d0e-6fbf-4e58-ae9c-cac4a3c54b33\",\n              \"name\": \"usuario.name\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.body.entry[0].changes[0].value.from.username }}\"\n            },\n            {\n              \"id\": \"d6fa2b24-abbe-48f7-96ff-2fc69f17b61b\",\n              \"name\": \"usuario.message.id\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.body.entry[0].changes[0].value.id }}\"\n            },\n            {\n              \"id\": \"605e9c4c-f2fc-49eb-8639-573c60ef33bb\",\n              \"name\": \"usuario.message.text\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.body.entry[0].changes[0].value.text }}\"\n            },\n            {\n              \"id\": \"198afc5d-3fd1-4d9d-aa5a-8baf75f06d29\",\n              \"name\": \"usuario.media.id\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.body.entry[0].changes[0].value.media.id }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"2836ec33-b19f-4875-bfeb-08d9f9feae49\",\n      \"name\": \"its me?\",\n      \"type\": \"n8n-nodes-base.filter\",\n      \"position\": [\n        200,\n        880\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"54c0a2d1-f812-4d6a-b50b-c272cfbba772\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"notEquals\"\n              },\n              \"leftValue\": \"={{ $('data').item.json.conta.id }}\",\n              \"rightValue\": \"={{ $('data').item.json.usuario.id }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"fdf8ff5e-9c17-43f3-a747-79228ca68e03\",\n      \"name\": \"Post comment\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        260,\n        1660\n      ],\n      \"parameters\": {\n        \"url\": \"={{ $('data').item.json.endpoint }}/{{ $('data').item.json.usuario.message.id }}/replies\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"sendBody\": true,\n        \"authentication\": \"genericCredentialType\",\n        \"bodyParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"message\",\n              \"value\": \"={{ $json.output }}\"\n            }\n          ]\n        },\n        \"genericAuthType\": \"httpHeaderAuth\"\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": {\n          \"id\": \"6H4syU3wzaoNBy2k\",\n          \"name\": \"Header Auth account\"\n        }\n      },\n      \"typeVersion\": 4.2\n    }\n  ],\n  \"active\": true,\n  \"pinData\": {\n    \"get_new_comments\": [\n      {\n        \"json\": {\n          \"body\": {\n            \"entry\": [\n              {\n                \"id\": \"17841458749050638\",\n                \"time\": 1745696027,\n                \"changes\": [\n                  {\n                    \"field\": \"comments\",\n                    \"value\": {\n                      \"id\": \"17992882022637707\",\n                      \"from\": {\n                        \"id\": \"1797582914152092\",\n                        \"username\": \"luchiogutierrez\"\n                      },\n                      \"text\": \"ğŸ˜\",\n                      \"media\": {\n                        \"id\": \"17969449379894182\",\n                        \"media_product_type\": \"FEED\"\n                      }\n                    }\n                  }\n                ]\n              }\n            ],\n            \"object\": \"instagram\"\n          },\n          \"query\": {},\n          \"params\": {},\n          \"headers\": {\n            \"host\": \"host.docker.internal:5678\",\n            \"accept\": \"*/*\",\n            \"x-scheme\": \"https\",\n            \"forwarded\": \"by=_exposr;for=173.252.95.16;host=engaging-seahorse-19.rshare.io;proto=https\",\n            \"x-real-ip\": \"173.252.95.16\",\n            \"connection\": \"keep-alive\",\n            \"exposr-via\": \"77940acbe1755f6fca18880bd02e462ee55d0cde,0374ae5bede6d70d299155239dbb7e045533e1f4\",\n            \"user-agent\": \"Webhooks/1.0 (https://fb.me/webhooks)\",\n            \"content-type\": \"application/json\",\n            \"x-request-id\": \"b0c4e9d6dd2baa18bab7eab283ad4788\",\n            \"content-length\": \"316\",\n            \"x-forwarded-for\": \"173.252.95.16\",\n            \"x-hub-signature\": \"sha1=b3d396ac784244a020268dd9599e708b21688b75\",\n            \"x-forwarded-host\": \"engaging-seahorse-19.rshare.io\",\n            \"x-forwarded-port\": \"443\",\n            \"x-forwarded-proto\": \"https\",\n            \"x-forwarded-scheme\": \"https\",\n            \"x-hub-signature-256\": \"sha256=40e1e91b67c7fa82afca10c81ff4b1200d9561384ee5ba690bf9bc22814cb09b\"\n          },\n          \"webhookUrl\": \"https://engaging-seahorse-19.rshare.io/webhook/ea7d37ac-9e82-40d7-bbb3-e9b7ce180fc9\",\n          \"executionMode\": \"production\"\n        }\n      }\n    ],\n    \"Respond to Webhook\": [\n      {\n        \"json\": {\n          \"body\": {},\n          \"query\": {\n            \"hub.mode\": \"subscribe\",\n            \"hub.challenge\": \"219585499\",\n            \"hub.verify_token\": \"teste\"\n          },\n          \"params\": {},\n          \"headers\": {\n            \"host\": \"host.docker.internal:5678\",\n            \"accept\": \"*/*\",\n            \"x-scheme\": \"https\",\n            \"forwarded\": \"by=_exposr;for=173.252.107.25;host=actual-beagle-88.rshare.io;proto=https\",\n            \"x-real-ip\": \"173.252.107.25\",\n            \"connection\": \"keep-alive\",\n            \"exposr-via\": \"b37bd560bd173ee1195fceaef48a1468e8fa83f0,f06a3ed204e476a5915fc6fff7228b77c1c9e1d3\",\n            \"user-agent\": \"facebookplatform/1.0 (+http://developers.facebook.com)\",\n            \"x-request-id\": \"037b358cf28db9e3bffdf52703fd9069\",\n            \"accept-encoding\": \"deflate, gzip\",\n            \"x-forwarded-for\": \"173.252.107.25\",\n            \"x-forwarded-host\": \"actual-beagle-88.rshare.io\",\n            \"x-forwarded-port\": \"443\",\n            \"x-forwarded-proto\": \"https\",\n            \"x-forwarded-scheme\": \"https\"\n          },\n          \"webhookUrl\": \"http://localhost:5678/webhook-test/ea7d37ac-9e82-40d7-bbb3-e9b7ce180fc9\",\n          \"executionMode\": \"test\"\n        }\n      }\n    ]\n  },\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"2a39918c-36c8-486e-acb3-3420a4a8b8b1\",\n  \"connections\": {\n    \"data\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get post data\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Webhook\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Respond to Webhook\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"its me?\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"AI Agent\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Post comment\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get post data\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"its me?\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"get_new_comments\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"data\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"OpenRouter Chat Model\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}