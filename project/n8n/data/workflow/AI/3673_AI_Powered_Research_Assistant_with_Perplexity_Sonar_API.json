{
  "title": "AI-Powered Research Assistant with Perplexity Sonar API",
  "url": "https://n8n.io/workflows/3673-ai-powered-research-assistant-with-perplexity-sonar-api/",
  "category": "AI",
  "category_url": "https://n8n.io/workflows/categories/ai/?sort=createdAt:desc",
  "author": "HoangSP",
  "publish_date": "Last update 13 days ago",
  "publish_date_absolute": "2025-05-09",
  "content": "",
  "workflow_json": "{\"id\":\"5uapJIjLLhwnhX0n\",\"meta\":{\"instanceId\":\"2b69b24ad1a51b447e1a0d6f8c70b16aca715ccfaf123eb531f92865766fce1c\",\"templateCredsSetupCompleted\":true},\"name\":\"Perplexity Researcher\",\"tags\":[],\"nodes\":[{\"id\":\"5790066d-4157-4844-aeaa-47706140ed7a\",\"name\":\"When Executed by Another Workflow\",\"type\":\"n8n-nodes-base.executeWorkflowTrigger\",\"notes\":\"Find the latest content related to the field/knowledge you are interested in.\\nIn-depth materials to prepare for the writing section\",\"position\":[-60,-380],\"parameters\":{\"inputSource\":\"passthrough\"},\"typeVersion\":1.1},{\"id\":\"311eb2bf-3b79-46cf-abb1-9d90791167c3\",\"name\":\"Set Prompt Variables\",\"type\":\"n8n-nodes-base.set\",\"position\":[220,-380],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"bab0ccff-a856-49d5-833b-80e65874475e\",\"name\":\"System\",\"type\":\"string\",\"value\":\"Assisstant is a language model. Assistant is designed to be able to assist with a wide range of task, form answering simple question to providing in-depth explanations and discussions on a wide range of topics.  As a language model, assistant is able to generate human-like text based on the imput it receives, allowing it to engage in natural-sounding evoling.  It’s able to process and understand large amounts of text,  and can use this knowledge to provide accurate and informative responses to a wide range of question. Additionally, Assistant is able to generate its own text based on the imput it receives, allowing it to engage in discussions and provide explanations and description on a wide range of topics. Overall, Assistant is a powerfull system that can help with a wide range of task and provide valuable insights and information on a wide range of topics. What you need help with a specific question or just want to have a conversation about a particular topic, Assistant is here to assist\"},{\"id\":\"1a6d7638-e2a4-495c-92d4-e0626b676b18\",\"name\":\"User\",\"type\":\"string\",\"value\":\"={{ $json.query }}\"}]}},\"typeVersion\":3.4},{\"id\":\"4385053f-c9c8-4aae-b0d2-4cf7a7817164\",\"name\":\"Extract API Response\",\"type\":\"n8n-nodes-base.set\",\"position\":[620,-380],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"c5869f36-70cb-439a-8ad0-0382b37f9798\",\"name\":\"Respone Message Content\",\"type\":\"string\",\"value\":\"={{ $json.choices[0].message.content }}\"}]}},\"typeVersion\":3.4},{\"id\":\"b8e3f54b-5148-4e04-a8b1-e3003a0ee128\",\"name\":\"Workflow Overview\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-160,-480],\"parameters\":{\"width\":1080,\"height\":300,\"content\":\"## Perplexity Research Workflow Overview\\nThis workflow takes a user query, formats it using a system prompt, and sends it to the Perplexity AI Sonar model for search.\\nResponses are extracted and returned as clean output.\"},\"typeVersion\":1},{\"id\":\"7b77de3d-279a-4c33-b4c1-a796ab94a7fa\",\"name\":\"Perplexity Research Content1\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[420,-380],\"parameters\":{\"url\":\"https://api.perplexity.ai/chat/completions\",\"method\":\"POST\",\"options\":{},\"jsonBody\":\"={\\n  \\\"model\\\": \\\"sonar\\\",\\n  \\\"messages\\\": [\\n    {\\n      \\\"role\\\": \\\"system\\\",\\n      \\\"content\\\": \\\"{{ $json.System }}\\\"\\n    },\\n    {\\n      \\\"role\\\": \\\"user\\\",\\n      \\\"content\\\": \\\"{{ $json.User || $json.query || $json.question || $json['Research Query'] || 'No input provided' }}\\\"\\n    }\\n  ],\\n  \\\"max_tokens\\\": 4000,\\n  \\\"temperature\\\": 0.2,\\n  \\\"top_p\\\": 0.9,\\n  \\\"return_citations\\\": true,\\n  \\\"search_domain_filter\\\": [\\n    \\\"perplexity.ai\\\"\\n  ],\\n  \\\"return_images\\\": false,\\n  \\\"return_related_questions\\\": false,\\n  \\\"search_recency_filter\\\": \\\"month\\\",\\n  \\\"top_k\\\": 0,\\n  \\\"stream\\\": false,\\n  \\\"presence_penalty\\\": 0,\\n  \\\"frequency_penalty\\\": 1\\n}\\n\\n\",\"sendBody\":true,\"specifyBody\":\"json\",\"authentication\":\"genericCredentialType\",\"genericAuthType\":\"httpHeaderAuth\"},\"credentials\":{\"httpHeaderAuth\":{\"id\":\"XTRc36olCHOn9XQP\",\"name\":\"Header Auth account 2\"}},\"notesInFlow\":false,\"typeVersion\":4.2}],\"active\":false,\"pinData\":{},\"settings\":{\"callerPolicy\":\"any\",\"executionOrder\":\"v1\"},\"versionId\":\"d506eade-acc3-40ed-9dfc-909cdf373969\",\"connections\":{\"When Executed by Another Workflow\":{\"main\":[[{\"node\":\"Set Prompt Variables\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "Name:  \nAI-Powered Research Agent using Perplexity Sonar\n\nDescription:  \nThis workflow acts as an AI-powered research assistant using the Perplexity Sonar model. When triggered by another workflow, it sends a user-defined prompt to the Perplexity API to retrieve up-to-date search results. The response is then parsed into a clean format for downstream processing.\n\nHow it Works:  \nTrigger: Activated from another workflow via Execute Workflow Trigger.\n\nPrompt Setup: Sets a system role message and user query dynamically.\n\nAPI Call: Sends a POST request to Perplexity's /chat/completions endpoint with your credentials.\n\nResponse Handling: Extracts the message content from the API response.\n\nOutput: Returns the result, ready for display or further processing.\n\nRequirements:  \nA Perplexity AI API Key\n\nSet up authentication via Header Auth with Bearer token\n\nEnsure your account allows outbound HTTP requests in n8n\n\nCustomization Tips:  \nModify the system prompt to suit your research domain\n\nChain this workflow with other automation like blog creation, summaries, etc.\n\nReplace the output handling logic to fit into Google Sheets, Notion, or Telegram\n",
  "readme_html": "<!--[--><div data-v-859c7806=\"\"><p>Name:<br>\nAI-Powered Research Agent using Perplexity Sonar</p>\n<p>Description:<br>\nThis workflow acts as an AI-powered research assistant using the Perplexity Sonar model. When triggered by another workflow, it sends a user-defined prompt to the Perplexity API to retrieve up-to-date search results. The response is then parsed into a clean format for downstream processing.</p>\n<p>How it Works:<br>\nTrigger: Activated from another workflow via Execute Workflow Trigger.</p>\n<p>Prompt Setup: Sets a system role message and user query dynamically.</p>\n<p>API Call: Sends a POST request to Perplexity's /chat/completions endpoint with your credentials.</p>\n<p>Response Handling: Extracts the message content from the API response.</p>\n<p>Output: Returns the result, ready for display or further processing.</p>\n<p>Requirements:<br>\nA Perplexity AI API Key</p>\n<p>Set up authentication via Header Auth with Bearer token</p>\n<p>Ensure your account allows outbound HTTP requests in n8n</p>\n<p>Customization Tips:<br>\nModify the system prompt to suit your research domain</p>\n<p>Chain this workflow with other automation like blog creation, summaries, etc.</p>\n<p>Replace the output handling logic to fit into Google Sheets, Notion, or Telegram</p>\n</div><!--]-->",
  "readme_zh": "名称：  \n基于Perplexity Sonar的AI研究助手  \n\n描述：  \n该工作流作为AI驱动的研究助手，采用Perplexity Sonar模型运作。当被其他工作流触发时，它会将用户自定义的查询发送至Perplexity API以获取最新搜索结果，并将响应解析为简洁格式供后续处理使用。  \n\n运作原理：  \n触发机制：通过\"执行工作流触发器\"从其他工作流激活  \n\n查询设置：动态配置系统角色消息和用户提问  \n\nAPI调用：携带凭证向Perplexity的/chat/completions接口发送POST请求  \n\n响应处理：从API返回数据中提取消息内容  \n\n输出结果：返回可直接展示或进一步处理的数据  \n\n使用要求：  \n需配备Perplexity AI API密钥  \n\n通过Header Auth使用Bearer token设置认证  \n\n确保n8n中账户允许外发HTTP请求  \n\n定制建议：  \n根据研究领域调整系统提示词  \n\n可与博客生成、摘要制作等自动化流程串联使用  \n\n替换输出处理逻辑以适配Google Sheets、Notion或Telegram等平台",
  "title_zh": "基于Perplexity Sonar API的AI研究助手",
  "publish_date_zh": "上次更新于13天前",
  "workflow_json_zh": "{\n  \"id\": \"5uapJIjLLhwnhX0n\",\n  \"meta\": {\n    \"instanceId\": \"2b69b24ad1a51b447e1a0d6f8c70b16aca715ccfaf123eb531f92865766fce1c\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"name\": \"Perplexity Researcher\",\n  \"tags\": [],\n  \"nodes\": [\n    {\n      \"id\": \"5790066d-4157-4844-aeaa-47706140ed7a\",\n      \"name\": \"When Executed by Another Workflow\",\n      \"type\": \"n8n-nodes-base.executeWorkflowTrigger\",\n      \"notes\": \"Find the latest content related to the field/knowledge you are interested in.\\nIn-depth materials to prepare for the writing section\",\n      \"position\": [\n        -60,\n        -380\n      ],\n      \"parameters\": {\n        \"inputSource\": \"passthrough\"\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"311eb2bf-3b79-46cf-abb1-9d90791167c3\",\n      \"name\": \"Set Prompt Variables\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        220,\n        -380\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"bab0ccff-a856-49d5-833b-80e65874475e\",\n              \"name\": \"System\",\n              \"type\": \"string\",\n              \"value\": \"Assisstant is a language model. Assistant is designed to be able to assist with a wide range of task, form answering simple question to providing in-depth explanations and discussions on a wide range of topics.  As a language model, assistant is able to generate human-like text based on the imput it receives, allowing it to engage in natural-sounding evoling.  It’s able to process and understand large amounts of text,  and can use this knowledge to provide accurate and informative responses to a wide range of question. Additionally, Assistant is able to generate its own text based on the imput it receives, allowing it to engage in discussions and provide explanations and description on a wide range of topics. Overall, Assistant is a powerfull system that can help with a wide range of task and provide valuable insights and information on a wide range of topics. What you need help with a specific question or just want to have a conversation about a particular topic, Assistant is here to assist\"\n            },\n            {\n              \"id\": \"1a6d7638-e2a4-495c-92d4-e0626b676b18\",\n              \"name\": \"User\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.query }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"4385053f-c9c8-4aae-b0d2-4cf7a7817164\",\n      \"name\": \"Extract API Response\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        620,\n        -380\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"c5869f36-70cb-439a-8ad0-0382b37f9798\",\n              \"name\": \"Respone Message Content\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.choices[0].message.content }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"b8e3f54b-5148-4e04-a8b1-e3003a0ee128\",\n      \"name\": \"Workflow Overview\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -160,\n        -480\n      ],\n      \"parameters\": {\n        \"width\": 1080,\n        \"height\": 300,\n        \"content\": \"## 困惑度研究工作流程概述  \\n该流程接收用户查询，通过系统提示进行格式化后，发送至Perplexity AI Sonar模型进行搜索。  \\n响应结果经提取后以简洁格式返回。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"7b77de3d-279a-4c33-b4c1-a796ab94a7fa\",\n      \"name\": \"Perplexity Research Content1\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        420,\n        -380\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.perplexity.ai/chat/completions\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"jsonBody\": \"={\\n  \\\"model\\\": \\\"sonar\\\",\\n  \\\"messages\\\": [\\n    {\\n      \\\"role\\\": \\\"system\\\",\\n      \\\"content\\\": \\\"{{ $json.System }}\\\"\\n    },\\n    {\\n      \\\"role\\\": \\\"user\\\",\\n      \\\"content\\\": \\\"{{ $json.User || $json.query || $json.question || $json['Research Query'] || 'No input provided' }}\\\"\\n    }\\n  ],\\n  \\\"max_tokens\\\": 4000,\\n  \\\"temperature\\\": 0.2,\\n  \\\"top_p\\\": 0.9,\\n  \\\"return_citations\\\": true,\\n  \\\"search_domain_filter\\\": [\\n    \\\"perplexity.ai\\\"\\n  ],\\n  \\\"return_images\\\": false,\\n  \\\"return_related_questions\\\": false,\\n  \\\"search_recency_filter\\\": \\\"month\\\",\\n  \\\"top_k\\\": 0,\\n  \\\"stream\\\": false,\\n  \\\"presence_penalty\\\": 0,\\n  \\\"frequency_penalty\\\": 1\\n}\\n\\n\",\n        \"sendBody\": true,\n        \"specifyBody\": \"json\",\n        \"authentication\": \"genericCredentialType\",\n        \"genericAuthType\": \"httpHeaderAuth\"\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": {\n          \"id\": \"XTRc36olCHOn9XQP\",\n          \"name\": \"Header Auth account 2\"\n        }\n      },\n      \"notesInFlow\": false,\n      \"typeVersion\": 4.2\n    }\n  ],\n  \"active\": false,\n  \"pinData\": {},\n  \"settings\": {\n    \"callerPolicy\": \"any\",\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"d506eade-acc3-40ed-9dfc-909cdf373969\",\n  \"connections\": {\n    \"When Executed by Another Workflow\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set Prompt Variables\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}