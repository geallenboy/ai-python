{
  "title": "Email Subscription Service with n8n Forms, Airtable and AI",
  "url": "https://n8n.io/workflows/2618-email-subscription-service-with-n8n-forms-airtable-and-ai/",
  "category": "AI",
  "category_url": "https://n8n.io/workflows/categories/ai/?count=20",
  "author": "Jimleuk",
  "publish_date": "Last update 5 months ago",
  "content": "",
  "workflow_json": "{\"nodes\":[{\"id\":\"4dd52c72-9a9b-4db4-8de5-5b12b1e5c4be\",\"name\":\"Schedule Trigger\",\"type\":\"n8n-nodes-base.scheduleTrigger\",\"position\":[180,1480],\"parameters\":{\"rule\":{\"interval\":[{\"triggerAtHour\":9}]}},\"typeVersion\":1.2},{\"id\":\"9226181c-b84c-4ea1-a5b4-eedb6c62037b\",\"name\":\"Search daily\",\"type\":\"n8n-nodes-base.airtable\",\"position\":[440,1480],\"parameters\":{\"base\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"appL3dptT6ZTSzY9v\",\"cachedResultUrl\":\"https://airtable.com/appL3dptT6ZTSzY9v\",\"cachedResultName\":\"Scheduled Emails\"},\"table\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"tblzR9vSuFUzlQNMI\",\"cachedResultUrl\":\"https://airtable.com/appL3dptT6ZTSzY9v/tblzR9vSuFUzlQNMI\",\"cachedResultName\":\"Table 1\"},\"options\":{},\"operation\":\"search\",\"filterByFormula\":\"AND({Status} = 'active', {Interval} = 'daily')\"},\"credentials\":{\"airtableTokenApi\":{\"id\":\"Und0frCQ6SNVX3VV\",\"name\":\"Airtable Personal Access Token account\"}},\"typeVersion\":2.1},{\"id\":\"1a3b6224-2f66-41c6-8b3d-be286cf16370\",\"name\":\"Search weekly\",\"type\":\"n8n-nodes-base.airtable\",\"position\":[440,1660],\"parameters\":{\"base\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"appL3dptT6ZTSzY9v\",\"cachedResultUrl\":\"https://airtable.com/appL3dptT6ZTSzY9v\",\"cachedResultName\":\"Scheduled Emails\"},\"table\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"tblzR9vSuFUzlQNMI\",\"cachedResultUrl\":\"https://airtable.com/appL3dptT6ZTSzY9v/tblzR9vSuFUzlQNMI\",\"cachedResultName\":\"Table 1\"},\"options\":{},\"operation\":\"search\",\"filterByFormula\":\"=AND(\\n  {Status} = 'active', \\n  {Interval} = 'weekly', \\n  {Last Sent} <= DATEADD(TODAY(), -7, 'days')\\n)\"},\"credentials\":{\"airtableTokenApi\":{\"id\":\"Und0frCQ6SNVX3VV\",\"name\":\"Airtable Personal Access Token account\"}},\"typeVersion\":2.1},{\"id\":\"1ea47e14-0a28-4780-95c7-31e24eb724d5\",\"name\":\"confirmation email1\",\"type\":\"n8n-nodes-base.gmail\",\"position\":[620,820],\"webhookId\":\"dd8bd6df-2013-4f8d-a2cc-cd9b3913e3d2\",\"parameters\":{\"sendTo\":\"={{ $('Subscribe Form').item.json.email }}\",\"message\":\"=This is to confirm your request to subscribe to \\\"Learn something every day!\\\" - a free service to send you facts about your favourite topics.\\n\\nTopic: {{ $('Subscribe Form').item.json.topic }}\\nSchedule: {{ $('Subscribe Form').item.json.frequency }}\",\"options\":{\"appendAttribution\":false},\"subject\":\"Learn something every day confirmation\"},\"credentials\":{\"gmailOAuth2\":{\"id\":\"Sf5Gfl9NiFTNXFWb\",\"name\":\"Gmail account\"}},\"typeVersion\":2.1},{\"id\":\"d95262af-1b52-4f9c-8346-183b4eee8544\",\"name\":\"Execute Workflow\",\"type\":\"n8n-nodes-base.executeWorkflow\",\"position\":[1140,1480],\"parameters\":{\"mode\":\"each\",\"options\":{\"waitForSubWorkflow\":false},\"workflowId\":{\"__rl\":true,\"mode\":\"id\",\"value\":\"={{ $workflow.id }}\"}},\"typeVersion\":1.1},{\"id\":\"075292af-7a66-4275-ac2d-3c392189a10c\",\"name\":\"Create Event\",\"type\":\"n8n-nodes-base.set\",\"position\":[980,1480],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"b28a0142-a028-471a-8180-9883e930feea\",\"name\":\"email\",\"type\":\"string\",\"value\":\"={{ $json.Email }}\"},{\"id\":\"970f5495-05df-42b6-a422-b2ac27f8eb95\",\"name\":\"topic\",\"type\":\"string\",\"value\":\"={{ $json.Topic }}\"},{\"id\":\"e871c431-948f-4b80-aa17-1e4266674663\",\"name\":\"interval\",\"type\":\"string\",\"value\":\"={{ $json.Interval }}\"},{\"id\":\"9b72597d-1446-4ef3-86e5-0a071c69155b\",\"name\":\"id\",\"type\":\"string\",\"value\":\"={{ $json.id }}\"},{\"id\":\"b17039c2-14a2-4811-9528-88ae963e44f7\",\"name\":\"created_at\",\"type\":\"string\",\"value\":\"={{ $json.Created }}\"}]}},\"typeVersion\":3.4},{\"id\":\"28776aaf-6bd9-4f9f-bcf0-3d4401a74219\",\"name\":\"Execute Workflow Trigger\",\"type\":\"n8n-nodes-base.executeWorkflowTrigger\",\"position\":[1360,1480],\"parameters\":{},\"typeVersion\":1},{\"id\":\"0eb62e75-228b-452b-80ab-f9ef3ad33204\",\"name\":\"Unsubscribe Form\",\"type\":\"n8n-nodes-base.formTrigger\",\"position\":[180,1160],\"webhookId\":\"e64db96d-5e61-40d5-88fb-761621a829ab\",\"parameters\":{\"options\":{\"path\":\"free-factoids-unsubscribe\"},\"formTitle\":\"Unsubscribe from Learn Something Every Day\",\"formFields\":{\"values\":[{\"fieldLabel\":\"ID\",\"requiredField\":true},{\"fieldType\":\"dropdown\",\"fieldLabel\":\"Reason For Unsubscribe\",\"multiselect\":true,\"fieldOptions\":{\"values\":[{\"option\":\"Emails not relevant\"},{\"option\":\"Too many Emails\"},{\"option\":\"I did not sign up to this service\"}]}}]},\"formDescription\":\"We're sorry to see you go! Please take a moment to help us improve the service.\"},\"typeVersion\":2.2},{\"id\":\"f889efe9-dc3c-428b-ad8e-4f7d17f23e75\",\"name\":\"Set Email Vars\",\"type\":\"n8n-nodes-base.set\",\"position\":[2500,1480],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"62a684fb-16f9-4326-8eeb-777d604b305a\",\"name\":\"to\",\"type\":\"string\",\"value\":\"={{ $('Execute Workflow Trigger').first().json.email }},jim@height.io\"},{\"id\":\"4270849e-c805-4580-9088-e8d1c3ef2fb4\",\"name\":\"subject\",\"type\":\"string\",\"value\":\"=Your {{ $('Execute Workflow Trigger').first().json.interval }} factoid\"},{\"id\":\"81d0e897-2496-4a3c-b16c-9319338f899f\",\"name\":\"message\",\"type\":\"string\",\"value\":\"=<p>\\n<strong>You asked about \\\"{{ $('Execution Data').first().json.topic.replace('\\\"','') }}\\\"</strong>\\n</p>\\n<p>\\n<i>{{ $('Content Generation Agent').first().json.output }}</i>\\n</p>\"},{\"id\":\"ee05de7b-5342-4deb-8118-edaf235d92cc\",\"name\":\"unsubscribe_link\",\"type\":\"string\",\"value\":\"=https://<MY_HOST>/form/inspiration-unsubscribe?ID={{ $('Execute Workflow Trigger').first().json.id }}\"}]},\"includeOtherFields\":true},\"typeVersion\":3.4},{\"id\":\"84741e6d-f5be-440d-8633-4eb30ccce170\",\"name\":\"Log Last Sent\",\"type\":\"n8n-nodes-base.airtable\",\"position\":[2860,1480],\"parameters\":{\"base\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"appL3dptT6ZTSzY9v\",\"cachedResultUrl\":\"https://airtable.com/appL3dptT6ZTSzY9v\",\"cachedResultName\":\"Scheduled Emails\"},\"table\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"tblzR9vSuFUzlQNMI\",\"cachedResultUrl\":\"https://airtable.com/appL3dptT6ZTSzY9v/tblzR9vSuFUzlQNMI\",\"cachedResultName\":\"Table 1\"},\"columns\":{\"value\":{\"id\":\"={{ $('Execute Workflow Trigger').first().json.id }}\",\"Last Sent\":\"2024-11-29T13:34:11\"},\"schema\":[{\"id\":\"id\",\"type\":\"string\",\"display\":true,\"removed\":false,\"readOnly\":true,\"required\":false,\"displayName\":\"id\",\"defaultMatch\":true},{\"id\":\"Name\",\"type\":\"string\",\"display\":true,\"removed\":true,\"readOnly\":false,\"required\":false,\"displayName\":\"Name\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"Email\",\"type\":\"string\",\"display\":true,\"removed\":true,\"readOnly\":false,\"required\":false,\"displayName\":\"Email\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"Status\",\"type\":\"options\",\"display\":true,\"options\":[{\"name\":\"inactive\",\"value\":\"inactive\"},{\"name\":\"active\",\"value\":\"active\"}],\"removed\":true,\"readOnly\":false,\"required\":false,\"displayName\":\"Status\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"Interval\",\"type\":\"options\",\"display\":true,\"options\":[{\"name\":\"daily\",\"value\":\"daily\"},{\"name\":\"weekly\",\"value\":\"weekly\"},{\"name\":\"surprise\",\"value\":\"surprise\"}],\"removed\":true,\"readOnly\":false,\"required\":false,\"displayName\":\"Interval\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"Start Day\",\"type\":\"options\",\"display\":true,\"options\":[{\"name\":\"Mon\",\"value\":\"Mon\"},{\"name\":\"Tue\",\"value\":\"Tue\"},{\"name\":\"Wed\",\"value\":\"Wed\"},{\"name\":\"Thu\",\"value\":\"Thu\"},{\"name\":\"Fri\",\"value\":\"Fri\"},{\"name\":\"Sat\",\"value\":\"Sat\"},{\"name\":\"Sun\",\"value\":\"Sun\"}],\"removed\":true,\"readOnly\":false,\"required\":false,\"displayName\":\"Start Day\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"Topic\",\"type\":\"string\",\"display\":true,\"removed\":true,\"readOnly\":false,\"required\":false,\"displayName\":\"Topic\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"Created\",\"type\":\"string\",\"display\":true,\"removed\":true,\"readOnly\":true,\"required\":false,\"displayName\":\"Created\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"Last Modified\",\"type\":\"string\",\"display\":true,\"removed\":true,\"readOnly\":true,\"required\":false,\"displayName\":\"Last Modified\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"Last Sent\",\"type\":\"dateTime\",\"display\":true,\"removed\":false,\"readOnly\":false,\"required\":false,\"displayName\":\"Last Sent\",\"defaultMatch\":false,\"canBeUsedToMatch\":true}],\"mappingMode\":\"defineBelow\",\"matchingColumns\":[\"id\"]},\"options\":{},\"operation\":\"update\"},\"credentials\":{\"airtableTokenApi\":{\"id\":\"Und0frCQ6SNVX3VV\",\"name\":\"Airtable Personal Access Token account\"}},\"typeVersion\":2.1},{\"id\":\"88f864d6-13fb-4f09-b22d-030d016678e1\",\"name\":\"Search surprise\",\"type\":\"n8n-nodes-base.airtable\",\"position\":[440,1840],\"parameters\":{\"base\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"appL3dptT6ZTSzY9v\",\"cachedResultUrl\":\"https://airtable.com/appL3dptT6ZTSzY9v\",\"cachedResultName\":\"Scheduled Emails\"},\"table\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"tblzR9vSuFUzlQNMI\",\"cachedResultUrl\":\"https://airtable.com/appL3dptT6ZTSzY9v/tblzR9vSuFUzlQNMI\",\"cachedResultName\":\"Table 1\"},\"options\":{},\"operation\":\"search\",\"filterByFormula\":\"=AND(\\n  {Status} = 'active', \\n  {Interval} = 'surprise'\\n)\"},\"credentials\":{\"airtableTokenApi\":{\"id\":\"Und0frCQ6SNVX3VV\",\"name\":\"Airtable Personal Access Token account\"}},\"typeVersion\":2.1},{\"id\":\"28238d9a-7bc0-4a22-bb4e-a7a2827e4da3\",\"name\":\"Should Send = True\",\"type\":\"n8n-nodes-base.filter\",\"position\":[800,1840],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"9aaf9ae2-8f96-443a-8294-c04270296b22\",\"operator\":{\"type\":\"boolean\",\"operation\":\"true\",\"singleValue\":true},\"leftValue\":\"={{ $json.should_send }}\",\"rightValue\":\"\"}]}},\"typeVersion\":2.2},{\"id\":\"3a46dd3d-48a6-40ca-8823-0516aa9f73a4\",\"name\":\"Should Send?\",\"type\":\"n8n-nodes-base.code\",\"position\":[620,1840],\"parameters\":{\"mode\":\"runOnceForEachItem\",\"jsCode\":\"const luckyPick = Math.floor(Math.random() * 10) + 1;\\n$input.item.json.should_send = luckyPick == 8;\\nreturn $input.item;\"},\"typeVersion\":2},{\"id\":\"3611da19-920b-48e6-84a4-f7be0b3a78fc\",\"name\":\"Create Subscriber\",\"type\":\"n8n-nodes-base.airtable\",\"position\":[440,820],\"parameters\":{\"base\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"appL3dptT6ZTSzY9v\",\"cachedResultUrl\":\"https://airtable.com/appL3dptT6ZTSzY9v\",\"cachedResultName\":\"Scheduled Emails\"},\"table\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"tblzR9vSuFUzlQNMI\",\"cachedResultUrl\":\"https://airtable.com/appL3dptT6ZTSzY9v/tblzR9vSuFUzlQNMI\",\"cachedResultName\":\"Table 1\"},\"columns\":{\"value\":{\"Email\":\"={{ $json.email }}\",\"Topic\":\"={{ $json.topic }}\",\"Status\":\"active\",\"Interval\":\"={{ $json.frequency }}\",\"Start Day\":\"={{ $json.submittedAt.toDateTime().format('EEE') }}\"},\"schema\":[{\"id\":\"Name\",\"type\":\"string\",\"display\":true,\"removed\":true,\"readOnly\":false,\"required\":false,\"displayName\":\"Name\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"Email\",\"type\":\"string\",\"display\":true,\"removed\":false,\"readOnly\":false,\"required\":false,\"displayName\":\"Email\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"Status\",\"type\":\"options\",\"display\":true,\"options\":[{\"name\":\"inactive\",\"value\":\"inactive\"},{\"name\":\"active\",\"value\":\"active\"}],\"removed\":false,\"readOnly\":false,\"required\":false,\"displayName\":\"Status\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"Interval\",\"type\":\"options\",\"display\":true,\"options\":[{\"name\":\"daily\",\"value\":\"daily\"},{\"name\":\"weekly\",\"value\":\"weekly\"},{\"name\":\"surprise\",\"value\":\"surprise\"}],\"removed\":false,\"readOnly\":false,\"required\":false,\"displayName\":\"Interval\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"Start Day\",\"type\":\"options\",\"display\":true,\"options\":[{\"name\":\"Mon\",\"value\":\"Mon\"},{\"name\":\"Tue\",\"value\":\"Tue\"},{\"name\":\"Wed\",\"value\":\"Wed\"},{\"name\":\"Thu\",\"value\":\"Thu\"},{\"name\":\"Fri\",\"value\":\"Fri\"},{\"name\":\"Sat\",\"value\":\"Sat\"},{\"name\":\"Sun\",\"value\":\"Sun\"}],\"removed\":false,\"readOnly\":false,\"required\":false,\"displayName\":\"Start Day\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"Topic\",\"type\":\"string\",\"display\":true,\"removed\":false,\"readOnly\":false,\"required\":false,\"displayName\":\"Topic\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"Created\",\"type\":\"string\",\"display\":true,\"removed\":true,\"readOnly\":true,\"required\":false,\"displayName\":\"Created\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"Last Modified\",\"type\":\"string\",\"display\":true,\"removed\":true,\"readOnly\":true,\"required\":false,\"displayName\":\"Last Modified\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"Last Sent\",\"type\":\"dateTime\",\"display\":true,\"removed\":true,\"readOnly\":false,\"required\":false,\"displayName\":\"Last Sent\",\"defaultMatch\":false,\"canBeUsedToMatch\":true}],\"mappingMode\":\"defineBelow\",\"matchingColumns\":[\"Email\"]},\"options\":{},\"operation\":\"upsert\"},\"credentials\":{\"airtableTokenApi\":{\"id\":\"Und0frCQ6SNVX3VV\",\"name\":\"Airtable Personal Access Token account\"}},\"typeVersion\":2.1},{\"id\":\"2213a81f-53a9-4142-9586-e87b88710eec\",\"name\":\"Update Subscriber\",\"type\":\"n8n-nodes-base.airtable\",\"position\":[440,1160],\"parameters\":{\"base\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"appL3dptT6ZTSzY9v\",\"cachedResultUrl\":\"https://airtable.com/appL3dptT6ZTSzY9v\",\"cachedResultName\":\"Scheduled Emails\"},\"table\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"tblzR9vSuFUzlQNMI\",\"cachedResultUrl\":\"https://airtable.com/appL3dptT6ZTSzY9v/tblzR9vSuFUzlQNMI\",\"cachedResultName\":\"Table 1\"},\"columns\":{\"value\":{\"id\":\"={{ $json.ID }}\",\"Status\":\"inactive\"},\"schema\":[{\"id\":\"id\",\"type\":\"string\",\"display\":true,\"removed\":false,\"readOnly\":true,\"required\":false,\"displayName\":\"id\",\"defaultMatch\":true},{\"id\":\"Name\",\"type\":\"string\",\"display\":true,\"removed\":true,\"readOnly\":false,\"required\":false,\"displayName\":\"Name\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"Email\",\"type\":\"string\",\"display\":true,\"removed\":true,\"readOnly\":false,\"required\":false,\"displayName\":\"Email\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"Status\",\"type\":\"options\",\"display\":true,\"options\":[{\"name\":\"inactive\",\"value\":\"inactive\"},{\"name\":\"active\",\"value\":\"active\"}],\"removed\":false,\"readOnly\":false,\"required\":false,\"displayName\":\"Status\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"Interval\",\"type\":\"options\",\"display\":true,\"options\":[{\"name\":\"daily\",\"value\":\"daily\"},{\"name\":\"weekly\",\"value\":\"weekly\"}],\"removed\":true,\"readOnly\":false,\"required\":false,\"displayName\":\"Interval\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"Start Day\",\"type\":\"options\",\"display\":true,\"options\":[{\"name\":\"Mon\",\"value\":\"Mon\"},{\"name\":\"Tue\",\"value\":\"Tue\"},{\"name\":\"Wed\",\"value\":\"Wed\"},{\"name\":\"Thu\",\"value\":\"Thu\"},{\"name\":\"Fri\",\"value\":\"Fri\"},{\"name\":\"Sat\",\"value\":\"Sat\"},{\"name\":\"Sun\",\"value\":\"Sun\"}],\"removed\":true,\"readOnly\":false,\"required\":false,\"displayName\":\"Start Day\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"Topic\",\"type\":\"string\",\"display\":true,\"removed\":true,\"readOnly\":false,\"required\":false,\"displayName\":\"Topic\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"Created\",\"type\":\"string\",\"display\":true,\"removed\":true,\"readOnly\":true,\"required\":false,\"displayName\":\"Created\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"Last Modified\",\"type\":\"string\",\"display\":true,\"removed\":true,\"readOnly\":true,\"required\":false,\"displayName\":\"Last Modified\",\"defaultMatch\":false,\"canBeUsedToMatch\":true}],\"mappingMode\":\"defineBelow\",\"matchingColumns\":[\"id\"]},\"options\":{},\"operation\":\"update\"},\"credentials\":{\"airtableTokenApi\":{\"id\":\"Und0frCQ6SNVX3VV\",\"name\":\"Airtable Personal Access Token account\"}},\"typeVersion\":2.1},{\"id\":\"c94ec18b-e0cf-4859-8b89-23abdd63739c\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[900,1280],\"parameters\":{\"color\":7,\"width\":335,\"height\":173,\"content\":\"### 4. Using Subworkflows to run executions concurrently\\nThis configuration is desired when sequential execution is slow and unnecessary. Also if one email fails, it doesn't fail the execution for everyone else.\"},\"typeVersion\":1},{\"id\":\"c14cab28-13eb-4d91-8578-8187a95a8909\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[180,700],\"parameters\":{\"color\":7,\"width\":380,\"height\":80,\"content\":\"### 1. Subscribe flow\\nUse a form to allow users to subscribe to the service.\"},\"typeVersion\":1},{\"id\":\"0e44ada0-f8a7-440e-aded-33b446190a08\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[180,1020],\"parameters\":{\"color\":7,\"width\":355,\"height\":115,\"content\":\"### 2. Unsubscribe flow\\n* Uses Form's pre-fill field feature to identify user\\n* Doesn't use \\\"email\\\" as identifier so you can't unsubscribe others\"},\"typeVersion\":1},{\"id\":\"e67bdffe-ccfc-4818-990d-b2a5ab613035\",\"name\":\"Sticky Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[180,1340],\"parameters\":{\"color\":7,\"width\":347,\"height\":114,\"content\":\"### 3. Scheduled Trigger\\n* Runs every day at 9am\\n* Handles all 3 frequency types\\n* Send emails concurrently\"},\"typeVersion\":1},{\"id\":\"ce7d5310-7170-46d3-b8d8-3f97407f9dfd\",\"name\":\"Subscribe Form\",\"type\":\"n8n-nodes-base.formTrigger\",\"position\":[180,820],\"webhookId\":\"c6abe3e3-ba87-4124-a227-84e253581b58\",\"parameters\":{\"options\":{\"path\":\"free-factoids-subscribe\",\"appendAttribution\":false,\"respondWithOptions\":{\"values\":{\"formSubmittedText\":\"Thanks! Your factoid is on its way!\"}}},\"formTitle\":\"Learn something every day!\",\"formFields\":{\"values\":[{\"fieldType\":\"textarea\",\"fieldLabel\":\"topic\",\"placeholder\":\"What topic(s) would you like to learn about?\",\"requiredField\":true},{\"fieldType\":\"email\",\"fieldLabel\":\"email\",\"placeholder\":\"eg. jim@example.com\",\"requiredField\":true},{\"fieldType\":\"dropdown\",\"fieldLabel\":\"frequency\",\"fieldOptions\":{\"values\":[{\"option\":\"daily\"},{\"option\":\"weekly\"},{\"option\":\"surprise me\"}]},\"requiredField\":true}]},\"formDescription\":\"Get a fact a day (or week) about any subject sent to your inbox.\"},\"typeVersion\":2.2},{\"id\":\"a5d50886-7d6b-4bf8-b376-b23c12a60608\",\"name\":\"Execution Data\",\"type\":\"n8n-nodes-base.executionData\",\"position\":[1560,1480],\"parameters\":{\"dataToSave\":{\"values\":[{\"key\":\"email\",\"value\":\"={{ $json.email }}\"}]}},\"typeVersion\":1},{\"id\":\"69b40d8d-7734-47f1-89fe-9ea0378424b7\",\"name\":\"Window Buffer Memory\",\"type\":\"@n8n/n8n-nodes-langchain.memoryBufferWindow\",\"position\":[1860,1680],\"parameters\":{\"sessionKey\":\"=scheduled_send_{{ $json.email }}\",\"sessionIdType\":\"customKey\"},\"typeVersion\":1.3},{\"id\":\"f83cff18-f41f-4a63-9d43-7e3947aae386\",\"name\":\"Wikipedia\",\"type\":\"@n8n/n8n-nodes-langchain.toolWikipedia\",\"position\":[2020,1680],\"parameters\":{},\"typeVersion\":1},{\"id\":\"77457037-e3ab-42f1-948b-b994d42f2f6e\",\"name\":\"Content Generation Agent\",\"type\":\"@n8n/n8n-nodes-langchain.agent\",\"position\":[1780,1460],\"parameters\":{\"text\":\"=Generate an new factoid on the following topic: \\\"{{ $json.topic.replace('\\\"','') }}\\\"\\nEnsure it is unique and not one generated previously.\",\"options\":{},\"promptType\":\"define\"},\"typeVersion\":1.7},{\"id\":\"cdfdd870-48b6-4c7d-a7d1-a22d70423e37\",\"name\":\"Groq Chat Model\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatGroq\",\"position\":[1720,1680],\"parameters\":{\"model\":\"llama-3.3-70b-versatile\",\"options\":{}},\"credentials\":{\"groqApi\":{\"id\":\"02xZ4o87lUMUFmbT\",\"name\":\"Groq account\"}},\"typeVersion\":1},{\"id\":\"87df322d-a544-476f-b2ff-83feb619fe7f\",\"name\":\"Generate Image\",\"type\":\"@n8n/n8n-nodes-langchain.openAi\",\"position\":[2120,1460],\"parameters\":{\"prompt\":\"=Generate a child-friendly illustration which compliments the following paragraph:\\n{{ $json.output }}\",\"options\":{},\"resource\":\"image\"},\"credentials\":{\"openAiApi\":{\"id\":\"8gccIjcuf3gvaoEr\",\"name\":\"OpenAi account\"}},\"typeVersion\":1.7},{\"id\":\"5c8d9e72-4015-44da-b5d5-829864d33672\",\"name\":\"Resize Image\",\"type\":\"n8n-nodes-base.editImage\",\"position\":[2280,1460],\"parameters\":{\"width\":480,\"height\":360,\"options\":{},\"operation\":\"resize\"},\"typeVersion\":1},{\"id\":\"a9939fad-98b3-4894-aae0-c11fa40d09da\",\"name\":\"Send Message\",\"type\":\"n8n-nodes-base.gmail\",\"position\":[2680,1480],\"webhookId\":\"dd8bd6df-2013-4f8d-a2cc-cd9b3913e3d2\",\"parameters\":{\"sendTo\":\"={{ $json.to }}\",\"message\":\"=<!DOCTYPE html>\\n<html lang=\\\"en\\\">\\n<head>\\n    <meta charset=\\\"UTF-8\\\">\\n    <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\">\\n    <title>{{ $json.subject }}</title>\\n</head>\\n<body>\\n    {{ $json.message }}\\n<p>\\n<a href=\\\"{{ $json.unsubscribe_link }}\\\">Unsubscribe</a>\\n</p>\\n</body>\\n</html>\\n\",\"options\":{\"attachmentsUi\":{\"attachmentsBinary\":[{}]},\"appendAttribution\":false},\"subject\":\"={{ $json.subject }}\"},\"credentials\":{\"gmailOAuth2\":{\"id\":\"Sf5Gfl9NiFTNXFWb\",\"name\":\"Gmail account\"}},\"typeVersion\":2.1},{\"id\":\"10b6ad35-fc1c-47a2-b234-5de3557d1164\",\"name\":\"Sticky Note4\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1320,1660],\"parameters\":{\"color\":7,\"width\":335,\"height\":113,\"content\":\"### 5. Use Execution Data to Filter Logs\\nIf you've registered for community+ or are on n8n cloud, best practice is to use execution node to allow filtering of execution logs.\"},\"typeVersion\":1},{\"id\":\"e3563fae-ff35-457b-9fb1-784eda637518\",\"name\":\"Sticky Note5\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1780,1280],\"parameters\":{\"color\":7,\"width\":340,\"height\":140,\"content\":\"### 6. Use AI to Generate Factoid and Image\\nUse an AI agent to automate the generation of factoids as requested by the user. This is a simple example but we recommend a adding a unique touch to stand out from the crowd!\"},\"typeVersion\":1},{\"id\":\"d1016c5d-c855-44c5-8ad3-a534bedaa8cf\",\"name\":\"Sticky Note6\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[2500,1040],\"parameters\":{\"color\":7,\"width\":460,\"height\":400,\"content\":\"### 7. Send Email to User\\nFinally, send a message to the user with both text and image.\\nLog the event in the Airtable for later analysis if required.\\n\\n![Screenshot of email result](https://res.cloudinary.com/daglih2g8/image/upload/f_auto,q_auto/v1/n8n-workflows/dbpctdhohj3vlewy6oyc)\"},\"typeVersion\":1},{\"id\":\"773075fa-e5a2-4d4f-8527-eb07c7038b00\",\"name\":\"Sticky Note7\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-420,680],\"parameters\":{\"width\":480,\"height\":900,\"content\":\"## Try It Out!\\n\\n### This n8n templates demonstrates how to build a simple subscriber service entirely in n8n using n8n forms as a frontend, n8n generally as the backend and Airtable as the storage layer.\\n\\nThis template in particular shows a fully automated service to send automated messages containing facts about a topic the user requested for.\\n\\n### How it works\\n* An n8n form is setup up to allow users to subscribe with a desired topic and interval of which to recieve messages via n8n forms which is then added to the Airtable.\\n* A scheduled trigger is executed every morning and searches for subscribers to send messages for based on their desired intervals.\\n* Once found, Subscribers are sent to a subworkflow which performs the text content generation via an AI agent and also uses a vision model to generate an image.\\n* Both are attached to an email which is sent to the subscriber. This email also includes an unsubscribe link.\\n* The unsubscribe flow works similarly via n8n form interface which when submitted disables further scheduled emails to the user.\\n\\n## How to use\\n* Make a copy of sample Airtable here: https://airtable.com/appL3dptT6ZTSzY9v/shrLukHafy5bwDRfD\\n* Make sure the workflow is \\\"activated\\\" and the forms are available and reachable by your audience.\\n\\n\\n### Need Help?\\nJoin the [Discord](https://discord.com/invite/XPKeKXeB7d) or ask in the [Forum](https://community.n8n.io/)!\\n\\nHappy Hacking!\"},\"typeVersion\":1}],\"pinData\":{},\"connections\":{\"Wikipedia\":{\"ai_tool\":[[{\"node\":\"Content Generation Agent\",\"type\":\"ai_tool\",\"index\":0}]]},\"Create Event\":{\"main\":[[{\"node\":\"Execute Workflow\",\"type\":\"main\",\"index\":0}]]},\"Resize Image\":{\"main\":[[{\"node\":\"Set Email Vars\",\"type\":\"main\",\"index\":0}]]},\"Search daily\":{\"main\":[[{\"node\":\"Create Event\",\"type\":\"main\",\"index\":0}]]},\"Send Message\":{\"main\":[[{\"node\":\"Log Last Sent\",\"type\":\"main\",\"index\":0}]]},\"Should Send?\":{\"main\":[[{\"node\":\"Should Send = True\",\"type\":\"main\",\"index\":0}]]},\"Search weekly\":{\"main\":[[{\"node\":\"Create Event\",\"type\":\"main\",\"index\":0}]]},\"Execution Data\":{\"main\":[[{\"node\":\"Content Generation Agent\",\"type\":\"main\",\"index\":0}]]},\"Generate Image\":{\"main\":[[{\"node\":\"Resize Image\",\"type\":\"main\",\"index\":0}]]},\"Set Email Vars\":{\"main\":[[{\"node\":\"Send Message\",\"type\":\"main\",\"index\":0}]]},\"Subscribe Form\":{\"main\":[[{\"node\":\"Create Subscriber\",\"type\":\"main\",\"index\":0}]]},\"Groq Chat Model\":{\"ai_languageModel\":[[{\"node\":\"Content Generation Agent\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"Search surprise\":{\"main\":[[{\"node\":\"Should Send?\",\"type\":\"main\",\"index\":0}]]},\"Schedule Trigger\":{\"main\":[[{\"node\":\"Search surprise\",\"type\":\"main\",\"index\":0},{\"node\":\"Search daily\",\"type\":\"main\",\"index\":0},{\"node\":\"Search weekly\",\"type\":\"main\",\"index\":0}]]},\"Unsubscribe Form\":{\"main\":[[{\"node\":\"Update Subscriber\",\"type\":\"main\",\"index\":0}]]},\"Create Subscriber\":{\"main\":[[{\"node\":\"confirmation email1\",\"type\":\"main\",\"index\":0}]]},\"Should Send = True\":{\"main\":[[{\"node\":\"Create Event\",\"type\":\"main\",\"index\":0}]]},\"Window Buffer Memory\":{\"ai_memory\":[[{\"node\":\"Content Generation Agent\",\"type\":\"ai_memory\",\"index\":0}]]},\"Content Generation Agent\":{\"main\":[[{\"node\":\"Generate Image\",\"type\":\"main\",\"index\":0}]]},\"Execute Workflow Trigger\":{\"main\":[[{\"node\":\"Execution Data\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "This n8n template shows how anyone can build a simple newsletter-like subscription service where users can enrol themselves to receive messages/content on a regular basis. It uses n8n forms for data capture, Airtable for database, AI for content generation and Gmail for email sending.\n\n### How it works\n\n  * An n8n form is setup up to allow users to subscribe with a desired topic and interval of which to recieve messages via n8n forms which is then added to the Airtable.\n  * A scheduled trigger is executed every morning and searches for subscribers to send messages for based on their desired intervals.\n  * Once found, Subscribers are sent to a subworkflow which performs the text content generation via an AI agent and also uses a vision model to generate an image.\n  * Both are attached to an email which is sent to the subscriber. This email also includes an unsubscribe link.\n  * The unsubscribe flow works similarly via n8n form interface which when submitted disables further scheduled emails to the user.\n\n\n\n## How to use\n\n  * Make a copy of sample Airtable here: <https://airtable.com/appL3dptT6ZTSzY9v/shrLukHafy5bwDRfD>\n  * Make sure the workflow is \"activated\" and the forms are available and reachable by your audience.\n\n\n\n## Requirements\n\n  * Airtable for Database\n  * OpenAI for LLM (but compatible with others)\n  * Gmail for Email (but can be replaced with others)\n\n\n\n## Customising this workflow\n\n  * This simple use can be extended to deliver any types of content such as your company newsletter, promotions, social media posts etc.\n  * Doesn't have to be limited to just email - try social messaging, Whatsapp, Telegram and others.\n\n\n",
  "readme_html": "<!--[--><div data-v-006f9244=\"\"><p>This n8n template shows how anyone can build a simple newsletter-like subscription service where users can enrol themselves to receive messages/content on a regular basis. It uses n8n forms for data capture, Airtable for database, AI for content generation and Gmail for email sending.</p>\n<h3>How it works</h3>\n<ul>\n<li>An n8n form is setup up to allow users to subscribe with a desired topic and interval of which to recieve messages via n8n forms which is then added to the Airtable.</li>\n<li>A scheduled trigger is executed every morning and searches for subscribers to send messages for based on their desired intervals.</li>\n<li>Once found, Subscribers are sent to a subworkflow which performs the text content generation via an AI agent and also uses a vision model to generate an image.</li>\n<li>Both are attached to an email which is sent to the subscriber. This email also includes an unsubscribe link.</li>\n<li>The unsubscribe flow works similarly via n8n form interface which when submitted disables further scheduled emails to the user.</li>\n</ul>\n<h2>How to use</h2>\n<ul>\n<li>Make a copy of sample Airtable here: <a href=\"https://airtable.com/appL3dptT6ZTSzY9v/shrLukHafy5bwDRfD\" rel=\"ugc nofollow\" target=\"_blank\">https://airtable.com/appL3dptT6ZTSzY9v/shrLukHafy5bwDRfD</a></li>\n<li>Make sure the workflow is \"activated\" and the forms are available and reachable by your audience.</li>\n</ul>\n<h2>Requirements</h2>\n<ul>\n<li>Airtable for Database</li>\n<li>OpenAI for LLM (but compatible with others)</li>\n<li>Gmail for Email (but can be replaced with others)</li>\n</ul>\n<h2>Customising this workflow</h2>\n<ul>\n<li>This simple use can be extended to deliver any types of content such as your company newsletter, promotions, social media posts etc.</li>\n<li>Doesn't have to be limited to just email - try social messaging, Whatsapp, Telegram and others.</li>\n</ul>\n</div><!--]-->",
  "readme_zh": "这个n8n模板展示了如何构建一个简易的新闻订阅服务，用户可自主注册以定期接收消息/内容。它采用n8n表单收集数据，Airtable作为数据库，AI生成内容，并通过Gmail发送邮件。\n\n### 运作原理\n\n* 通过n8n表单设置订阅功能，用户可选择感兴趣的主题和接收频率，数据将存入Airtable\n* 每日早晨定时触发器启动，根据订阅者设置的频率筛选当日需发送消息的对象\n* 匹配的订阅者进入子工作流：通过AI代理生成文本内容，并调用视觉模型生成配图\n* 图文内容以邮件形式发送，邮件内附退订链接\n* 退订流程同样通过n8n表单实现，提交后将停止向该用户发送定时邮件\n\n## 使用指南\n\n* 复制示例Airtable模板：<https://airtable.com/appL3dptT6ZTSzY9v/shrLukHafy5bwDRfD>\n* 确保工作流处于\"激活\"状态，且目标用户能正常访问表单页面\n\n## 环境要求\n\n* 数据库：Airtable\n* 大语言模型：OpenAI（兼容其他同类服务）\n* 邮件服务：Gmail（可替换为其他服务商）\n\n## 定制拓展\n\n* 本基础方案可扩展用于公司简报、促销活动、社交媒体推文等多种内容推送\n* 不仅限于邮件渠道，可尝试社交消息平台（Whatsapp/Telegram等）",
  "title_zh": "使用n8n表单、Airtable和AI的电子邮件订阅服务",
  "publish_date_absolute": "2024-12-07",
  "publish_date_zh": "最后更新于5个月前",
  "workflow_json_zh": "{\n  \"nodes\": [\n    {\n      \"id\": \"4dd52c72-9a9b-4db4-8de5-5b12b1e5c4be\",\n      \"name\": \"Schedule Trigger\",\n      \"type\": \"n8n-nodes-base.scheduleTrigger\",\n      \"position\": [\n        180,\n        1480\n      ],\n      \"parameters\": {\n        \"rule\": {\n          \"interval\": [\n            {\n              \"triggerAtHour\": 9\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"9226181c-b84c-4ea1-a5b4-eedb6c62037b\",\n      \"name\": \"Search daily\",\n      \"type\": \"n8n-nodes-base.airtable\",\n      \"position\": [\n        440,\n        1480\n      ],\n      \"parameters\": {\n        \"base\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"appL3dptT6ZTSzY9v\",\n          \"cachedResultUrl\": \"https://airtable.com/appL3dptT6ZTSzY9v\",\n          \"cachedResultName\": \"Scheduled Emails\"\n        },\n        \"table\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"tblzR9vSuFUzlQNMI\",\n          \"cachedResultUrl\": \"https://airtable.com/appL3dptT6ZTSzY9v/tblzR9vSuFUzlQNMI\",\n          \"cachedResultName\": \"Table 1\"\n        },\n        \"options\": {},\n        \"operation\": \"search\",\n        \"filterByFormula\": \"AND({Status} = 'active', {Interval} = 'daily')\"\n      },\n      \"credentials\": {\n        \"airtableTokenApi\": {\n          \"id\": \"Und0frCQ6SNVX3VV\",\n          \"name\": \"Airtable Personal Access Token account\"\n        }\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"1a3b6224-2f66-41c6-8b3d-be286cf16370\",\n      \"name\": \"Search weekly\",\n      \"type\": \"n8n-nodes-base.airtable\",\n      \"position\": [\n        440,\n        1660\n      ],\n      \"parameters\": {\n        \"base\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"appL3dptT6ZTSzY9v\",\n          \"cachedResultUrl\": \"https://airtable.com/appL3dptT6ZTSzY9v\",\n          \"cachedResultName\": \"Scheduled Emails\"\n        },\n        \"table\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"tblzR9vSuFUzlQNMI\",\n          \"cachedResultUrl\": \"https://airtable.com/appL3dptT6ZTSzY9v/tblzR9vSuFUzlQNMI\",\n          \"cachedResultName\": \"Table 1\"\n        },\n        \"options\": {},\n        \"operation\": \"search\",\n        \"filterByFormula\": \"=AND(\\n  {Status} = 'active', \\n  {Interval} = 'weekly', \\n  {Last Sent} <= DATEADD(TODAY(), -7, 'days')\\n)\"\n      },\n      \"credentials\": {\n        \"airtableTokenApi\": {\n          \"id\": \"Und0frCQ6SNVX3VV\",\n          \"name\": \"Airtable Personal Access Token account\"\n        }\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"1ea47e14-0a28-4780-95c7-31e24eb724d5\",\n      \"name\": \"confirmation email1\",\n      \"type\": \"n8n-nodes-base.gmail\",\n      \"position\": [\n        620,\n        820\n      ],\n      \"webhookId\": \"dd8bd6df-2013-4f8d-a2cc-cd9b3913e3d2\",\n      \"parameters\": {\n        \"sendTo\": \"={{ $('Subscribe Form').item.json.email }}\",\n        \"message\": \"=This is to confirm your request to subscribe to \\\"Learn something every day!\\\" - a free service to send you facts about your favourite topics.\\n\\nTopic: {{ $('Subscribe Form').item.json.topic }}\\nSchedule: {{ $('Subscribe Form').item.json.frequency }}\",\n        \"options\": {\n          \"appendAttribution\": false\n        },\n        \"subject\": \"Learn something every day confirmation\"\n      },\n      \"credentials\": {\n        \"gmailOAuth2\": {\n          \"id\": \"Sf5Gfl9NiFTNXFWb\",\n          \"name\": \"Gmail account\"\n        }\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"d95262af-1b52-4f9c-8346-183b4eee8544\",\n      \"name\": \"Execute Workflow\",\n      \"type\": \"n8n-nodes-base.executeWorkflow\",\n      \"position\": [\n        1140,\n        1480\n      ],\n      \"parameters\": {\n        \"mode\": \"each\",\n        \"options\": {\n          \"waitForSubWorkflow\": false\n        },\n        \"workflowId\": {\n          \"__rl\": true,\n          \"mode\": \"id\",\n          \"value\": \"={{ $workflow.id }}\"\n        }\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"075292af-7a66-4275-ac2d-3c392189a10c\",\n      \"name\": \"Create Event\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        980,\n        1480\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"b28a0142-a028-471a-8180-9883e930feea\",\n              \"name\": \"email\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.Email }}\"\n            },\n            {\n              \"id\": \"970f5495-05df-42b6-a422-b2ac27f8eb95\",\n              \"name\": \"topic\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.Topic }}\"\n            },\n            {\n              \"id\": \"e871c431-948f-4b80-aa17-1e4266674663\",\n              \"name\": \"interval\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.Interval }}\"\n            },\n            {\n              \"id\": \"9b72597d-1446-4ef3-86e5-0a071c69155b\",\n              \"name\": \"id\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.id }}\"\n            },\n            {\n              \"id\": \"b17039c2-14a2-4811-9528-88ae963e44f7\",\n              \"name\": \"created_at\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.Created }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"28776aaf-6bd9-4f9f-bcf0-3d4401a74219\",\n      \"name\": \"Execute Workflow Trigger\",\n      \"type\": \"n8n-nodes-base.executeWorkflowTrigger\",\n      \"position\": [\n        1360,\n        1480\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"0eb62e75-228b-452b-80ab-f9ef3ad33204\",\n      \"name\": \"Unsubscribe Form\",\n      \"type\": \"n8n-nodes-base.formTrigger\",\n      \"position\": [\n        180,\n        1160\n      ],\n      \"webhookId\": \"e64db96d-5e61-40d5-88fb-761621a829ab\",\n      \"parameters\": {\n        \"options\": {\n          \"path\": \"free-factoids-unsubscribe\"\n        },\n        \"formTitle\": \"Unsubscribe from Learn Something Every Day\",\n        \"formFields\": {\n          \"values\": [\n            {\n              \"fieldLabel\": \"ID\",\n              \"requiredField\": true\n            },\n            {\n              \"fieldType\": \"dropdown\",\n              \"fieldLabel\": \"Reason For Unsubscribe\",\n              \"multiselect\": true,\n              \"fieldOptions\": {\n                \"values\": [\n                  {\n                    \"option\": \"Emails not relevant\"\n                  },\n                  {\n                    \"option\": \"Too many Emails\"\n                  },\n                  {\n                    \"option\": \"I did not sign up to this service\"\n                  }\n                ]\n              }\n            }\n          ]\n        },\n        \"formDescription\": \"We're sorry to see you go! Please take a moment to help us improve the service.\"\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"f889efe9-dc3c-428b-ad8e-4f7d17f23e75\",\n      \"name\": \"Set Email Vars\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        2500,\n        1480\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"62a684fb-16f9-4326-8eeb-777d604b305a\",\n              \"name\": \"to\",\n              \"type\": \"string\",\n              \"value\": \"={{ $('Execute Workflow Trigger').first().json.email }},jim@height.io\"\n            },\n            {\n              \"id\": \"4270849e-c805-4580-9088-e8d1c3ef2fb4\",\n              \"name\": \"subject\",\n              \"type\": \"string\",\n              \"value\": \"=Your {{ $('Execute Workflow Trigger').first().json.interval }} factoid\"\n            },\n            {\n              \"id\": \"81d0e897-2496-4a3c-b16c-9319338f899f\",\n              \"name\": \"message\",\n              \"type\": \"string\",\n              \"value\": \"=<p>\\n<strong>You asked about \\\"{{ $('Execution Data').first().json.topic.replace('\\\"','') }}\\\"</strong>\\n</p>\\n<p>\\n<i>{{ $('Content Generation Agent').first().json.output }}</i>\\n</p>\"\n            },\n            {\n              \"id\": \"ee05de7b-5342-4deb-8118-edaf235d92cc\",\n              \"name\": \"unsubscribe_link\",\n              \"type\": \"string\",\n              \"value\": \"=https://<MY_HOST>/form/inspiration-unsubscribe?ID={{ $('Execute Workflow Trigger').first().json.id }}\"\n            }\n          ]\n        },\n        \"includeOtherFields\": true\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"84741e6d-f5be-440d-8633-4eb30ccce170\",\n      \"name\": \"Log Last Sent\",\n      \"type\": \"n8n-nodes-base.airtable\",\n      \"position\": [\n        2860,\n        1480\n      ],\n      \"parameters\": {\n        \"base\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"appL3dptT6ZTSzY9v\",\n          \"cachedResultUrl\": \"https://airtable.com/appL3dptT6ZTSzY9v\",\n          \"cachedResultName\": \"Scheduled Emails\"\n        },\n        \"table\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"tblzR9vSuFUzlQNMI\",\n          \"cachedResultUrl\": \"https://airtable.com/appL3dptT6ZTSzY9v/tblzR9vSuFUzlQNMI\",\n          \"cachedResultName\": \"Table 1\"\n        },\n        \"columns\": {\n          \"value\": {\n            \"id\": \"={{ $('Execute Workflow Trigger').first().json.id }}\",\n            \"Last Sent\": \"2024-11-29T13:34:11\"\n          },\n          \"schema\": [\n            {\n              \"id\": \"id\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"readOnly\": true,\n              \"required\": false,\n              \"displayName\": \"id\",\n              \"defaultMatch\": true\n            },\n            {\n              \"id\": \"Name\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"readOnly\": false,\n              \"required\": false,\n              \"displayName\": \"Name\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Email\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"readOnly\": false,\n              \"required\": false,\n              \"displayName\": \"Email\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Status\",\n              \"type\": \"options\",\n              \"display\": true,\n              \"options\": [\n                {\n                  \"name\": \"inactive\",\n                  \"value\": \"inactive\"\n                },\n                {\n                  \"name\": \"active\",\n                  \"value\": \"active\"\n                }\n              ],\n              \"removed\": true,\n              \"readOnly\": false,\n              \"required\": false,\n              \"displayName\": \"Status\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Interval\",\n              \"type\": \"options\",\n              \"display\": true,\n              \"options\": [\n                {\n                  \"name\": \"daily\",\n                  \"value\": \"daily\"\n                },\n                {\n                  \"name\": \"weekly\",\n                  \"value\": \"weekly\"\n                },\n                {\n                  \"name\": \"surprise\",\n                  \"value\": \"surprise\"\n                }\n              ],\n              \"removed\": true,\n              \"readOnly\": false,\n              \"required\": false,\n              \"displayName\": \"Interval\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Start Day\",\n              \"type\": \"options\",\n              \"display\": true,\n              \"options\": [\n                {\n                  \"name\": \"Mon\",\n                  \"value\": \"Mon\"\n                },\n                {\n                  \"name\": \"Tue\",\n                  \"value\": \"Tue\"\n                },\n                {\n                  \"name\": \"Wed\",\n                  \"value\": \"Wed\"\n                },\n                {\n                  \"name\": \"Thu\",\n                  \"value\": \"Thu\"\n                },\n                {\n                  \"name\": \"Fri\",\n                  \"value\": \"Fri\"\n                },\n                {\n                  \"name\": \"Sat\",\n                  \"value\": \"Sat\"\n                },\n                {\n                  \"name\": \"Sun\",\n                  \"value\": \"Sun\"\n                }\n              ],\n              \"removed\": true,\n              \"readOnly\": false,\n              \"required\": false,\n              \"displayName\": \"Start Day\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Topic\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"readOnly\": false,\n              \"required\": false,\n              \"displayName\": \"Topic\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Created\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"readOnly\": true,\n              \"required\": false,\n              \"displayName\": \"Created\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Last Modified\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"readOnly\": true,\n              \"required\": false,\n              \"displayName\": \"Last Modified\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Last Sent\",\n              \"type\": \"dateTime\",\n              \"display\": true,\n              \"removed\": false,\n              \"readOnly\": false,\n              \"required\": false,\n              \"displayName\": \"Last Sent\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            }\n          ],\n          \"mappingMode\": \"defineBelow\",\n          \"matchingColumns\": [\n            \"id\"\n          ]\n        },\n        \"options\": {},\n        \"operation\": \"update\"\n      },\n      \"credentials\": {\n        \"airtableTokenApi\": {\n          \"id\": \"Und0frCQ6SNVX3VV\",\n          \"name\": \"Airtable Personal Access Token account\"\n        }\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"88f864d6-13fb-4f09-b22d-030d016678e1\",\n      \"name\": \"Search surprise\",\n      \"type\": \"n8n-nodes-base.airtable\",\n      \"position\": [\n        440,\n        1840\n      ],\n      \"parameters\": {\n        \"base\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"appL3dptT6ZTSzY9v\",\n          \"cachedResultUrl\": \"https://airtable.com/appL3dptT6ZTSzY9v\",\n          \"cachedResultName\": \"Scheduled Emails\"\n        },\n        \"table\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"tblzR9vSuFUzlQNMI\",\n          \"cachedResultUrl\": \"https://airtable.com/appL3dptT6ZTSzY9v/tblzR9vSuFUzlQNMI\",\n          \"cachedResultName\": \"Table 1\"\n        },\n        \"options\": {},\n        \"operation\": \"search\",\n        \"filterByFormula\": \"=AND(\\n  {Status} = 'active', \\n  {Interval} = 'surprise'\\n)\"\n      },\n      \"credentials\": {\n        \"airtableTokenApi\": {\n          \"id\": \"Und0frCQ6SNVX3VV\",\n          \"name\": \"Airtable Personal Access Token account\"\n        }\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"28238d9a-7bc0-4a22-bb4e-a7a2827e4da3\",\n      \"name\": \"Should Send = True\",\n      \"type\": \"n8n-nodes-base.filter\",\n      \"position\": [\n        800,\n        1840\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"9aaf9ae2-8f96-443a-8294-c04270296b22\",\n              \"operator\": {\n                \"type\": \"boolean\",\n                \"operation\": \"true\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $json.should_send }}\",\n              \"rightValue\": \"\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"3a46dd3d-48a6-40ca-8823-0516aa9f73a4\",\n      \"name\": \"Should Send?\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        620,\n        1840\n      ],\n      \"parameters\": {\n        \"mode\": \"runOnceForEachItem\",\n        \"jsCode\": \"const luckyPick = Math.floor(Math.random() * 10) + 1;\\n$input.item.json.should_send = luckyPick == 8;\\nreturn $input.item;\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"3611da19-920b-48e6-84a4-f7be0b3a78fc\",\n      \"name\": \"Create Subscriber\",\n      \"type\": \"n8n-nodes-base.airtable\",\n      \"position\": [\n        440,\n        820\n      ],\n      \"parameters\": {\n        \"base\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"appL3dptT6ZTSzY9v\",\n          \"cachedResultUrl\": \"https://airtable.com/appL3dptT6ZTSzY9v\",\n          \"cachedResultName\": \"Scheduled Emails\"\n        },\n        \"table\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"tblzR9vSuFUzlQNMI\",\n          \"cachedResultUrl\": \"https://airtable.com/appL3dptT6ZTSzY9v/tblzR9vSuFUzlQNMI\",\n          \"cachedResultName\": \"Table 1\"\n        },\n        \"columns\": {\n          \"value\": {\n            \"Email\": \"={{ $json.email }}\",\n            \"Topic\": \"={{ $json.topic }}\",\n            \"Status\": \"active\",\n            \"Interval\": \"={{ $json.frequency }}\",\n            \"Start Day\": \"={{ $json.submittedAt.toDateTime().format('EEE') }}\"\n          },\n          \"schema\": [\n            {\n              \"id\": \"Name\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"readOnly\": false,\n              \"required\": false,\n              \"displayName\": \"Name\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Email\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"readOnly\": false,\n              \"required\": false,\n              \"displayName\": \"Email\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Status\",\n              \"type\": \"options\",\n              \"display\": true,\n              \"options\": [\n                {\n                  \"name\": \"inactive\",\n                  \"value\": \"inactive\"\n                },\n                {\n                  \"name\": \"active\",\n                  \"value\": \"active\"\n                }\n              ],\n              \"removed\": false,\n              \"readOnly\": false,\n              \"required\": false,\n              \"displayName\": \"Status\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Interval\",\n              \"type\": \"options\",\n              \"display\": true,\n              \"options\": [\n                {\n                  \"name\": \"daily\",\n                  \"value\": \"daily\"\n                },\n                {\n                  \"name\": \"weekly\",\n                  \"value\": \"weekly\"\n                },\n                {\n                  \"name\": \"surprise\",\n                  \"value\": \"surprise\"\n                }\n              ],\n              \"removed\": false,\n              \"readOnly\": false,\n              \"required\": false,\n              \"displayName\": \"Interval\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Start Day\",\n              \"type\": \"options\",\n              \"display\": true,\n              \"options\": [\n                {\n                  \"name\": \"Mon\",\n                  \"value\": \"Mon\"\n                },\n                {\n                  \"name\": \"Tue\",\n                  \"value\": \"Tue\"\n                },\n                {\n                  \"name\": \"Wed\",\n                  \"value\": \"Wed\"\n                },\n                {\n                  \"name\": \"Thu\",\n                  \"value\": \"Thu\"\n                },\n                {\n                  \"name\": \"Fri\",\n                  \"value\": \"Fri\"\n                },\n                {\n                  \"name\": \"Sat\",\n                  \"value\": \"Sat\"\n                },\n                {\n                  \"name\": \"Sun\",\n                  \"value\": \"Sun\"\n                }\n              ],\n              \"removed\": false,\n              \"readOnly\": false,\n              \"required\": false,\n              \"displayName\": \"Start Day\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Topic\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"readOnly\": false,\n              \"required\": false,\n              \"displayName\": \"Topic\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Created\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"readOnly\": true,\n              \"required\": false,\n              \"displayName\": \"Created\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Last Modified\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"readOnly\": true,\n              \"required\": false,\n              \"displayName\": \"Last Modified\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Last Sent\",\n              \"type\": \"dateTime\",\n              \"display\": true,\n              \"removed\": true,\n              \"readOnly\": false,\n              \"required\": false,\n              \"displayName\": \"Last Sent\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            }\n          ],\n          \"mappingMode\": \"defineBelow\",\n          \"matchingColumns\": [\n            \"Email\"\n          ]\n        },\n        \"options\": {},\n        \"operation\": \"upsert\"\n      },\n      \"credentials\": {\n        \"airtableTokenApi\": {\n          \"id\": \"Und0frCQ6SNVX3VV\",\n          \"name\": \"Airtable Personal Access Token account\"\n        }\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"2213a81f-53a9-4142-9586-e87b88710eec\",\n      \"name\": \"Update Subscriber\",\n      \"type\": \"n8n-nodes-base.airtable\",\n      \"position\": [\n        440,\n        1160\n      ],\n      \"parameters\": {\n        \"base\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"appL3dptT6ZTSzY9v\",\n          \"cachedResultUrl\": \"https://airtable.com/appL3dptT6ZTSzY9v\",\n          \"cachedResultName\": \"Scheduled Emails\"\n        },\n        \"table\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"tblzR9vSuFUzlQNMI\",\n          \"cachedResultUrl\": \"https://airtable.com/appL3dptT6ZTSzY9v/tblzR9vSuFUzlQNMI\",\n          \"cachedResultName\": \"Table 1\"\n        },\n        \"columns\": {\n          \"value\": {\n            \"id\": \"={{ $json.ID }}\",\n            \"Status\": \"inactive\"\n          },\n          \"schema\": [\n            {\n              \"id\": \"id\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"readOnly\": true,\n              \"required\": false,\n              \"displayName\": \"id\",\n              \"defaultMatch\": true\n            },\n            {\n              \"id\": \"Name\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"readOnly\": false,\n              \"required\": false,\n              \"displayName\": \"Name\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Email\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"readOnly\": false,\n              \"required\": false,\n              \"displayName\": \"Email\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Status\",\n              \"type\": \"options\",\n              \"display\": true,\n              \"options\": [\n                {\n                  \"name\": \"inactive\",\n                  \"value\": \"inactive\"\n                },\n                {\n                  \"name\": \"active\",\n                  \"value\": \"active\"\n                }\n              ],\n              \"removed\": false,\n              \"readOnly\": false,\n              \"required\": false,\n              \"displayName\": \"Status\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Interval\",\n              \"type\": \"options\",\n              \"display\": true,\n              \"options\": [\n                {\n                  \"name\": \"daily\",\n                  \"value\": \"daily\"\n                },\n                {\n                  \"name\": \"weekly\",\n                  \"value\": \"weekly\"\n                }\n              ],\n              \"removed\": true,\n              \"readOnly\": false,\n              \"required\": false,\n              \"displayName\": \"Interval\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Start Day\",\n              \"type\": \"options\",\n              \"display\": true,\n              \"options\": [\n                {\n                  \"name\": \"Mon\",\n                  \"value\": \"Mon\"\n                },\n                {\n                  \"name\": \"Tue\",\n                  \"value\": \"Tue\"\n                },\n                {\n                  \"name\": \"Wed\",\n                  \"value\": \"Wed\"\n                },\n                {\n                  \"name\": \"Thu\",\n                  \"value\": \"Thu\"\n                },\n                {\n                  \"name\": \"Fri\",\n                  \"value\": \"Fri\"\n                },\n                {\n                  \"name\": \"Sat\",\n                  \"value\": \"Sat\"\n                },\n                {\n                  \"name\": \"Sun\",\n                  \"value\": \"Sun\"\n                }\n              ],\n              \"removed\": true,\n              \"readOnly\": false,\n              \"required\": false,\n              \"displayName\": \"Start Day\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Topic\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"readOnly\": false,\n              \"required\": false,\n              \"displayName\": \"Topic\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Created\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"readOnly\": true,\n              \"required\": false,\n              \"displayName\": \"Created\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Last Modified\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"readOnly\": true,\n              \"required\": false,\n              \"displayName\": \"Last Modified\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            }\n          ],\n          \"mappingMode\": \"defineBelow\",\n          \"matchingColumns\": [\n            \"id\"\n          ]\n        },\n        \"options\": {},\n        \"operation\": \"update\"\n      },\n      \"credentials\": {\n        \"airtableTokenApi\": {\n          \"id\": \"Und0frCQ6SNVX3VV\",\n          \"name\": \"Airtable Personal Access Token account\"\n        }\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"c94ec18b-e0cf-4859-8b89-23abdd63739c\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        900,\n        1280\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 335,\n        \"height\": 173,\n        \"content\": \"### 4. 使用子工作流实现并发执行\\n当顺序执行速度缓慢且不必要时，这种配置尤为理想。此外，若某封邮件发送失败，也不会影响其他邮件的执行流程。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"c14cab28-13eb-4d91-8578-8187a95a8909\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        180,\n        700\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 380,\n        \"height\": 80,\n        \"content\": \"### 1. 订阅流程  \\n通过表单让用户订阅服务。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"0e44ada0-f8a7-440e-aded-33b446190a08\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        180,\n        1020\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 355,\n        \"height\": 115,\n        \"content\": \"### 2. 退订流程\\n* 利用表单的预填字段功能识别用户\\n* 不使用\\\"邮箱\\\"作为标识符，防止他人恶意退订\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"e67bdffe-ccfc-4818-990d-b2a5ab613035\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        180,\n        1340\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 347,\n        \"height\": 114,\n        \"content\": \"### 3. 定时触发\\n* 每天上午9点自动运行\\n* 支持处理全部3种频率类型\\n* 并发发送电子邮件\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"ce7d5310-7170-46d3-b8d8-3f97407f9dfd\",\n      \"name\": \"Subscribe Form\",\n      \"type\": \"n8n-nodes-base.formTrigger\",\n      \"position\": [\n        180,\n        820\n      ],\n      \"webhookId\": \"c6abe3e3-ba87-4124-a227-84e253581b58\",\n      \"parameters\": {\n        \"options\": {\n          \"path\": \"free-factoids-subscribe\",\n          \"appendAttribution\": false,\n          \"respondWithOptions\": {\n            \"values\": {\n              \"formSubmittedText\": \"Thanks! Your factoid is on its way!\"\n            }\n          }\n        },\n        \"formTitle\": \"Learn something every day!\",\n        \"formFields\": {\n          \"values\": [\n            {\n              \"fieldType\": \"textarea\",\n              \"fieldLabel\": \"topic\",\n              \"placeholder\": \"What topic(s) would you like to learn about?\",\n              \"requiredField\": true\n            },\n            {\n              \"fieldType\": \"email\",\n              \"fieldLabel\": \"email\",\n              \"placeholder\": \"eg. jim@example.com\",\n              \"requiredField\": true\n            },\n            {\n              \"fieldType\": \"dropdown\",\n              \"fieldLabel\": \"frequency\",\n              \"fieldOptions\": {\n                \"values\": [\n                  {\n                    \"option\": \"daily\"\n                  },\n                  {\n                    \"option\": \"weekly\"\n                  },\n                  {\n                    \"option\": \"surprise me\"\n                  }\n                ]\n              },\n              \"requiredField\": true\n            }\n          ]\n        },\n        \"formDescription\": \"Get a fact a day (or week) about any subject sent to your inbox.\"\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"a5d50886-7d6b-4bf8-b376-b23c12a60608\",\n      \"name\": \"Execution Data\",\n      \"type\": \"n8n-nodes-base.executionData\",\n      \"position\": [\n        1560,\n        1480\n      ],\n      \"parameters\": {\n        \"dataToSave\": {\n          \"values\": [\n            {\n              \"key\": \"email\",\n              \"value\": \"={{ $json.email }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"69b40d8d-7734-47f1-89fe-9ea0378424b7\",\n      \"name\": \"Window Buffer Memory\",\n      \"type\": \"@n8n/n8n-nodes-langchain.memoryBufferWindow\",\n      \"position\": [\n        1860,\n        1680\n      ],\n      \"parameters\": {\n        \"sessionKey\": \"=scheduled_send_{{ $json.email }}\",\n        \"sessionIdType\": \"customKey\"\n      },\n      \"typeVersion\": 1.3\n    },\n    {\n      \"id\": \"f83cff18-f41f-4a63-9d43-7e3947aae386\",\n      \"name\": \"Wikipedia\",\n      \"type\": \"@n8n/n8n-nodes-langchain.toolWikipedia\",\n      \"position\": [\n        2020,\n        1680\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"77457037-e3ab-42f1-948b-b994d42f2f6e\",\n      \"name\": \"Content Generation Agent\",\n      \"type\": \"@n8n/n8n-nodes-langchain.agent\",\n      \"position\": [\n        1780,\n        1460\n      ],\n      \"parameters\": {\n        \"text\": \"=Generate an new factoid on the following topic: \\\"{{ $json.topic.replace('\\\"','') }}\\\"\\nEnsure it is unique and not one generated previously.\",\n        \"options\": {},\n        \"promptType\": \"define\"\n      },\n      \"typeVersion\": 1.7\n    },\n    {\n      \"id\": \"cdfdd870-48b6-4c7d-a7d1-a22d70423e37\",\n      \"name\": \"Groq Chat Model\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatGroq\",\n      \"position\": [\n        1720,\n        1680\n      ],\n      \"parameters\": {\n        \"model\": \"llama-3.3-70b-versatile\",\n        \"options\": {}\n      },\n      \"credentials\": {\n        \"groqApi\": {\n          \"id\": \"02xZ4o87lUMUFmbT\",\n          \"name\": \"Groq account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"87df322d-a544-476f-b2ff-83feb619fe7f\",\n      \"name\": \"Generate Image\",\n      \"type\": \"@n8n/n8n-nodes-langchain.openAi\",\n      \"position\": [\n        2120,\n        1460\n      ],\n      \"parameters\": {\n        \"prompt\": \"=Generate a child-friendly illustration which compliments the following paragraph:\\n{{ $json.output }}\",\n        \"options\": {},\n        \"resource\": \"image\"\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"8gccIjcuf3gvaoEr\",\n          \"name\": \"OpenAi account\"\n        }\n      },\n      \"typeVersion\": 1.7\n    },\n    {\n      \"id\": \"5c8d9e72-4015-44da-b5d5-829864d33672\",\n      \"name\": \"Resize Image\",\n      \"type\": \"n8n-nodes-base.editImage\",\n      \"position\": [\n        2280,\n        1460\n      ],\n      \"parameters\": {\n        \"width\": 480,\n        \"height\": 360,\n        \"options\": {},\n        \"operation\": \"resize\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"a9939fad-98b3-4894-aae0-c11fa40d09da\",\n      \"name\": \"Send Message\",\n      \"type\": \"n8n-nodes-base.gmail\",\n      \"position\": [\n        2680,\n        1480\n      ],\n      \"webhookId\": \"dd8bd6df-2013-4f8d-a2cc-cd9b3913e3d2\",\n      \"parameters\": {\n        \"sendTo\": \"={{ $json.to }}\",\n        \"message\": \"=<!DOCTYPE html>\\n<html lang=\\\"en\\\">\\n<head>\\n    <meta charset=\\\"UTF-8\\\">\\n    <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\">\\n    <title>{{ $json.subject }}</title>\\n</head>\\n<body>\\n    {{ $json.message }}\\n<p>\\n<a href=\\\"{{ $json.unsubscribe_link }}\\\">Unsubscribe</a>\\n</p>\\n</body>\\n</html>\\n\",\n        \"options\": {\n          \"attachmentsUi\": {\n            \"attachmentsBinary\": [\n              {}\n            ]\n          },\n          \"appendAttribution\": false\n        },\n        \"subject\": \"={{ $json.subject }}\"\n      },\n      \"credentials\": {\n        \"gmailOAuth2\": {\n          \"id\": \"Sf5Gfl9NiFTNXFWb\",\n          \"name\": \"Gmail account\"\n        }\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"10b6ad35-fc1c-47a2-b234-5de3557d1164\",\n      \"name\": \"Sticky Note4\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1320,\n        1660\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 335,\n        \"height\": 113,\n        \"content\": \"### 5. 利用执行数据筛选日志  \\n若您已注册community+版本或使用n8n云服务，最佳实践是通过执行节点实现执行日志的筛选功能。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"e3563fae-ff35-457b-9fb1-784eda637518\",\n      \"name\": \"Sticky Note5\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1780,\n        1280\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 340,\n        \"height\": 140,\n        \"content\": \"### 6. 利用AI生成趣味知识和图片  \\n通过AI智能体自动生成用户所需的趣味知识。虽然这是个简单示例，但我们建议添加独特创意以脱颖而出！\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"d1016c5d-c855-44c5-8ad3-a534bedaa8cf\",\n      \"name\": \"Sticky Note6\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        2500,\n        1040\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 460,\n        \"height\": 400,\n        \"content\": \"### 7. 发送邮件给用户  \\n最后，向用户发送包含文字和图片的邮件。  \\n将事件记录到Airtable中，以便后续需要时进行分析。  \\n\\n![邮件结果截图](https://res.cloudinary.com/daglih2g8/image/upload/f_auto,q_auto/v1/n8n-workflows/dbpctdhohj3vlewy6oyc)\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"773075fa-e5a2-4d4f-8527-eb07c7038b00\",\n      \"name\": \"Sticky Note7\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -420,\n        680\n      ],\n      \"parameters\": {\n        \"width\": 480,\n        \"height\": 900,\n        \"content\": \"## 试试看吧！\\n\\n### 本n8n模板展示了如何完全通过n8n构建简易订阅服务——使用n8n表单作为前端界面，n8n整体作为后端系统，Airtable作为数据存储层。\\n\\n该模板特别演示了全自动推送服务：根据用户订阅主题定期发送相关趣味知识的自动化消息。\\n\\n### 运作原理\\n* 通过n8n表单收集用户订阅信息（包括兴趣主题和消息接收频率），数据将存储至Airtable\\n* 每日早晨定时触发器启动，根据订阅者设定的频率筛选当日需推送消息的用户\\n* 匹配到的订阅者将进入子工作流：通过AI代理生成文本内容，并调用视觉模型生成配图\\n* 图文内容以邮件形式发送至订阅者，邮件内包含退订链接\\n* 退订流程同样通过n8n表单实现，提交后将禁用该用户的定时邮件推送\\n\\n## 使用指南\\n* 复制示例Airtable模板：https://airtable.com/appL3dptT6ZTSzY9v/shrLukHafy5bwDRfD\\n* 确保工作流处于\\\"激活\\\"状态，且目标用户可正常访问相关表单页面\\n\\n### 需要帮助？\\n加入[Discord讨论群](https://discord.com/invite/XPKeKXeB7d) 或访问[官方论坛](https://community.n8n.io/)提问！\\n\\n祝您探索愉快！\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"Wikipedia\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"Content Generation Agent\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Create Event\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Execute Workflow\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Resize Image\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set Email Vars\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Search daily\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Create Event\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Send Message\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Log Last Sent\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Should Send?\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Should Send = True\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Search weekly\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Create Event\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Execution Data\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Content Generation Agent\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Generate Image\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Resize Image\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Set Email Vars\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Send Message\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Subscribe Form\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Create Subscriber\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Groq Chat Model\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"Content Generation Agent\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Search surprise\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Should Send?\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Schedule Trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Search surprise\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Search daily\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Search weekly\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Unsubscribe Form\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Update Subscriber\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Create Subscriber\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"confirmation email1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Should Send = True\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Create Event\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Window Buffer Memory\": {\n      \"ai_memory\": [\n        [\n          {\n            \"node\": \"Content Generation Agent\",\n            \"type\": \"ai_memory\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Content Generation Agent\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Generate Image\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Execute Workflow Trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Execution Data\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}