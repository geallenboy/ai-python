{
  "title": "Generate Business Leads by Scraping Google Maps with Mistral AI and Google Sheets",
  "url": "https://n8n.io/workflows/3674-generate-business-leads-by-scraping-google-maps-with-mistral-ai-and-google-sheets/",
  "category": "AI",
  "category_url": "https://n8n.io/workflows/categories/ai/",
  "author": "Akram Kadri",
  "publish_date": "Last update 3 days ago",
  "content": "",
  "workflow_json": "{\"name\":\"Automated Lead Generation System\",\"tags\":[],\"nodes\":[{\"id\":\"7d0b6678-4d6e-4bb1-af8d-5a945bf4f4b5\",\"name\":\"Run workflow\",\"type\":\"n8n-nodes-base.manualTrigger\",\"position\":[-3320,-660],\"parameters\":{},\"typeVersion\":1},{\"id\":\"0a47ca31-6229-48b7-b3e7-f6563c63b9a4\",\"name\":\"Loop Over Items\",\"type\":\"n8n-nodes-base.splitInBatches\",\"position\":[-3080,-660],\"parameters\":{},\"typeVersion\":3},{\"id\":\"0690b3de-a9db-4721-93f1-edc698a8d4c9\",\"name\":\"Execute Workflow\",\"type\":\"n8n-nodes-base.executeWorkflow\",\"onError\":\"continueRegularOutput\",\"position\":[-2600,-560],\"parameters\":{},\"retryOnFail\":true,\"typeVersion\":1.2,\"waitBetweenTries\":3000},{\"id\":\"25acd35b-e659-4cff-b3b7-ad74621d645c\",\"name\":\"Wait\",\"type\":\"n8n-nodes-base.wait\",\"position\":[-2820,-560],\"parameters\":{},\"typeVersion\":1.1},{\"id\":\"76e92d76-c37c-47de-b462-fd895d556b2c\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-2820,-720],\"parameters\":{\"content\":\"\"},\"typeVersion\":1},{\"id\":\"48cb7fe3-1a36-453f-b4f0-f827389f3e19\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-3400,-840],\"parameters\":{\"content\":\"\"},\"typeVersion\":1},{\"id\":\"1d42f2d8-e788-4202-b940-62f77cf2f91b\",\"name\":\"Transform to default data structure\",\"type\":\"n8n-nodes-base.splitOut\",\"position\":[-2520,-180],\"parameters\":{},\"typeVersion\":1},{\"id\":\"29c496aa-c1cb-49f1-9d39-6496229637c5\",\"name\":\"Extract queries\",\"type\":\"n8n-nodes-base.set\",\"position\":[-2740,-180],\"parameters\":{},\"typeVersion\":3.4},{\"id\":\"7c1d1e28-6ff8-4ffa-afe5-591e45e971d7\",\"name\":\"Generate queries from keywords\",\"type\":\"@n8n/n8n-nodes-langchain.chainLlm\",\"position\":[-3140,-180],\"parameters\":{},\"typeVersion\":1.4},{\"id\":\"7c4415b9-27d9-4eef-bc8e-0568dadb33c3\",\"name\":\"Loop over queries\",\"type\":\"n8n-nodes-base.splitInBatches\",\"position\":[-2120,-280],\"parameters\":{},\"typeVersion\":3},{\"id\":\"4e310b4a-f213-4590-8b2a-1c024a014b1a\",\"name\":\"Structured Output Parser\",\"type\":\"@n8n/n8n-nodes-langchain.outputParserStructured\",\"position\":[-2960,20],\"parameters\":{},\"typeVersion\":1.2},{\"id\":\"bb94ddac-192d-49c9-9013-9be1532c3832\",\"name\":\"Mistral Cloud Chat Model\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatMistralCloud\",\"position\":[-3140,20],\"parameters\":{},\"typeVersion\":1},{\"id\":\"34167b9a-5502-4166-b0c1-6c109372b279\",\"name\":\"When Executed by Another Workflow\",\"type\":\"n8n-nodes-base.executeWorkflowTrigger\",\"position\":[-3360,-180],\"parameters\":{},\"typeVersion\":1.1},{\"id\":\"a5aea011-0715-427d-9ae8-bff0800c3b9b\",\"name\":\"Wait between executions\",\"type\":\"n8n-nodes-base.wait\",\"position\":[-1580,-180],\"parameters\":{},\"typeVersion\":1.1},{\"id\":\"2f623834-4a3d-4977-81d8-65a4ccb69146\",\"name\":\"Execute scraper for query\",\"type\":\"n8n-nodes-base.executeWorkflow\",\"onError\":\"continueRegularOutput\",\"position\":[-1840,-180],\"parameters\":{},\"typeVersion\":1.1},{\"id\":\"0acd176a-adc0-4c5b-a34c-ca4f7f71677d\",\"name\":\"Sticky Note4\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-3160,160],\"parameters\":{\"content\":\"\"},\"typeVersion\":1},{\"id\":\"5844053a-ce04-4a43-85cf-6238ad48e97a\",\"name\":\"Sticky Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-1580,-360],\"parameters\":{\"content\":\"\"},\"typeVersion\":1},{\"id\":\"401f0f31-4cbc-4b18-a9a6-0e926c1d36fb\",\"name\":\"Remove Duplicate URLs\",\"type\":\"n8n-nodes-base.removeDuplicates\",\"position\":[-2580,600],\"parameters\":{},\"typeVersion\":1.1},{\"id\":\"d3f3a6d9-52cb-433a-8ddd-276b642f1903\",\"name\":\"Search Google Maps with query\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[-3180,600],\"parameters\":{},\"executeOnce\":false,\"typeVersion\":4.2,\"alwaysOutputData\":false},{\"id\":\"2a2273c1-15f7-4777-af6d-f8a240c31efc\",\"name\":\"Scrape URLs from results\",\"type\":\"n8n-nodes-base.code\",\"position\":[-2980,600],\"parameters\":{},\"typeVersion\":2},{\"id\":\"6324ae8c-61e0-4e12-a4f7-3240cbdff65a\",\"name\":\"Filter irrelevant URLs\",\"type\":\"n8n-nodes-base.filter\",\"position\":[-2780,600],\"parameters\":{},\"typeVersion\":2.2},{\"id\":\"1ed57504-41be-41ac-b9c8-b4c7c5baf073\",\"name\":\"Scrape HomePage\",\"type\":\"n8n-nodes-base.code\",\"onError\":\"continueRegularOutput\",\"position\":[-1660,580],\"parameters\":{},\"typeVersion\":2},{\"id\":\"dbd53c95-1a25-41d7-a0f0-3160f2c248f2\",\"name\":\"Save emails to Google Sheet\",\"type\":\"n8n-nodes-base.googleSheets\",\"position\":[-940,400],\"parameters\":{},\"typeVersion\":4.5},{\"id\":\"f1375d60-a01f-4014-803d-568ea4d5a44e\",\"name\":\"Remove duplicate entries\",\"type\":\"n8n-nodes-base.removeDuplicates\",\"position\":[-1200,400],\"parameters\":{},\"typeVersion\":1.1},{\"id\":\"f6f68fda-c876-4b70-b1a6-204485a82249\",\"name\":\"Loop over URLs\",\"type\":\"n8n-nodes-base.splitInBatches\",\"onError\":\"continueErrorOutput\",\"position\":[-2100,420],\"parameters\":{},\"typeVersion\":3},{\"id\":\"3dc3a026-6c3d-4410-99d8-a627397a832a\",\"name\":\"Request web page for URL\",\"type\":\"n8n-nodes-base.httpRequest\",\"onError\":\"continueRegularOutput\",\"position\":[-1880,500],\"parameters\":{},\"typeVersion\":4.2,\"alwaysOutputData\":false},{\"id\":\"d5674908-ec7e-4141-88a9-7eaaef1c946d\",\"name\":\"Clean Emails\",\"type\":\"n8n-nodes-base.code\",\"position\":[-1460,400],\"parameters\":{},\"typeVersion\":2},{\"id\":\"b9c3ab8a-a215-4ceb-ae8c-4783a4a3066f\",\"name\":\"Sticky Note5\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-3420,440],\"parameters\":{\"content\":\"\"},\"typeVersion\":1},{\"id\":\"fb859214-46c9-48a4-b1cf-1690e5b67285\",\"name\":\"Sticky Note6\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-940,600],\"parameters\":{\"content\":\"\"},\"typeVersion\":1}],\"active\":false,\"pinData\":{\"Run workflow\":[{\"json\":{\"region\":\"London\",\"business\":\"restaurant\"}},{\"json\":{\"region\":\"Birmingham\",\"business\":\"restaurant\"}},{\"json\":{\"region\":\"Manchester\",\"business\":\"restaurant\"}},{\"json\":{\"region\":\"Liverpool\",\"business\":\"restaurant\"}},{\"json\":{\"region\":\"Leeds\",\"business\":\"restaurant\"}},{\"json\":{\"region\":\"Glasgow\",\"business\":\"restaurant\"}}]},\"settings\":{\"executionOrder\":\"v1\"},\"versionId\":\"bc914965-2925-42ea-a906-f1c8aee4b154\",\"connections\":{\"Wait\":{\"main\":[[{\"node\":\"Execute Workflow\",\"type\":\"main\",\"index\":0}]]},\"Clean Emails\":{\"main\":[[{\"node\":\"Remove duplicate entries\",\"type\":\"main\",\"index\":0}]]},\"Run workflow\":{\"main\":[[{\"node\":\"Loop Over Items\",\"type\":\"main\",\"index\":0}]]},\"Loop over URLs\":{\"main\":[[{\"node\":\"Clean Emails\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Request web page for URL\",\"type\":\"main\",\"index\":0}]]},\"Extract queries\":{\"main\":[[{\"node\":\"Transform to default data structure\",\"type\":\"main\",\"index\":0}]]},\"Loop Over Items\":{\"main\":[[],[{\"node\":\"Wait\",\"type\":\"main\",\"index\":0}]]},\"Scrape HomePage\":{\"main\":[[{\"node\":\"Loop over URLs\",\"type\":\"main\",\"index\":0}]]},\"Execute Workflow\":{\"main\":[[{\"node\":\"Loop Over Items\",\"type\":\"main\",\"index\":0}]]},\"Loop over queries\":{\"main\":[[],[{\"node\":\"Execute scraper for query\",\"type\":\"main\",\"index\":0}]]},\"Remove Duplicate URLs\":{\"main\":[[{\"node\":\"Loop over URLs\",\"type\":\"main\",\"index\":0}]]},\"Filter irrelevant URLs\":{\"main\":[[{\"node\":\"Remove Duplicate URLs\",\"type\":\"main\",\"index\":0}]]},\"Wait between executions\":{\"main\":[[{\"node\":\"Loop over queries\",\"type\":\"main\",\"index\":0}]]},\"Mistral Cloud Chat Model\":{\"ai_languageModel\":[[{\"node\":\"Generate queries from keywords\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"Remove duplicate entries\":{\"main\":[[{\"node\":\"Save emails to Google Sheet\",\"type\":\"main\",\"index\":0}]]},\"Request web page for URL\":{\"main\":[[{\"node\":\"Scrape HomePage\",\"type\":\"main\",\"index\":0}]]},\"Scrape URLs from results\":{\"main\":[[{\"node\":\"Filter irrelevant URLs\",\"type\":\"main\",\"index\":0}]]},\"Structured Output Parser\":{\"ai_outputParser\":[[{\"node\":\"Generate queries from keywords\",\"type\":\"ai_outputParser\",\"index\":0}]]},\"Execute scraper for query\":{\"main\":[[{\"node\":\"Wait between executions\",\"type\":\"main\",\"index\":0}]]},\"Search Google Maps with query\":{\"main\":[[{\"node\":\"Scrape URLs from results\",\"type\":\"main\",\"index\":0}]]},\"Generate queries from keywords\":{\"main\":[[{\"node\":\"Extract queries\",\"type\":\"main\",\"index\":0}]]},\"When Executed by Another Workflow\":{\"main\":[[{\"node\":\"Generate queries from keywords\",\"type\":\"main\",\"index\":0}]]},\"Transform to default data structure\":{\"main\":[[{\"node\":\"Loop over queries\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "# Who is this template for?\n\nThis workflow template is an enhanced solution for sales, marketing, and business development professionals seeking a powerful, automated system for lead generation. Building upon previous versions, it allows users to efficiently scrape business data—including emails, phone numbers, business names, and website URLs—directly from Google Maps. It's ideal for small business owners, freelancers, and agencies aiming to scale their prospecting and outreach efforts significantly without incurring recurring third-party service costs. This template automates the web scraping process for lead generation, running entirely within your n8n instance.\n\n# What's New in This Enhanced Version?\n\n**Multi-Field Data Scraping** : Extracts not just emails, but also phone numbers, business names, and website URLs for richer lead profiles.\n\n**Batch Automation** : Process an entire list of search queries (keywords and locations) in a single run, enabling true \"set and forget\" operation.\n\n**AI-Enhanced Search Depth** : Integrates with the Mistral free API to intelligently generate relevant sub-queries for each primary search term, significantly expanding the scope and uncovering more leads from Google Maps automatically.\n\n# How it Works\n\nThis template orchestrates a sophisticated web scraping process for lead generation using n8n nodes and AI assistance:\n\n**Input Query List** : You provide a list of target queries, each typically containing business keywords and a geographic location (e.g., \"dentists in London\", \"HVAC services Austin TX\").\n\n**AI Query Expansion** : For each input query, the workflow uses AI to generate related sub-queries, aiming for broader coverage within the target category and region.\n\n**Iterative Scraping** : The workflow systematically processes each original query and its AI-generated sub-queries.\n\n**Google Maps Data Retrieval** : It performs searches on Google Maps based on these queries to identify relevant business listings.\n\n**Multi-Data Extraction** : For each identified business, the workflow attempts to extract the business name, website URL, email address, and phone number from the available data.\n\n**Data Aggregation** : All successfully scraped lead information is compiled and saved directly into your specified Google Sheet, organized for easy use.\n\n# Setup\n\n  1. **Add Queries** : Open the initial node (Manual Trigger) and input your list of search queries.\n\n  2. **Configure AI** : Add your free Mistral API key to the designated AI node.\n\n  3. **Configure Google Sheets Node** : Select or create a Google Sheet document and specify the sheet where the scraped lead data should be stored. Ensure your Google Sheets credentials are correctly configured in n8n.\n\n  4. **Run the Workflow** : Execute the workflow (\"Test Workflow\" or activate it). The system will begin the automated web scraping and lead generation process, populating your Google Sheet over time.\n\n\n\n\n# Customize as Needed:\n\nThe workflow is designed for flexibility. You can adjust the AI prompts for sub-query generation, modify the data extraction logic, or integrate additional steps (like data cleaning or CRM pushing) as required for your specific lead generation strategy.\n",
  "readme_html": "<!--[--><div data-v-006f9244=\"\"><h1>Who is this template for?</h1>\n<p>This workflow template is an enhanced solution for sales, marketing, and business development professionals seeking a powerful, automated system for lead generation. Building upon previous versions, it allows users to efficiently scrape business data—including emails, phone numbers, business names, and website URLs—directly from Google Maps. It's ideal for small business owners, freelancers, and agencies aiming to scale their prospecting and outreach efforts significantly without incurring recurring third-party service costs. This template automates the web scraping process for lead generation, running entirely within your n8n instance.</p>\n<h1>What's New in This Enhanced Version?</h1>\n<p><strong>Multi-Field Data Scraping</strong>: Extracts not just emails, but also phone numbers, business names, and website URLs for richer lead profiles.</p>\n<p><strong>Batch Automation</strong>: Process an entire list of search queries (keywords and locations) in a single run, enabling true \"set and forget\" operation.</p>\n<p><strong>AI-Enhanced Search Depth</strong>: Integrates with the Mistral free API to intelligently generate relevant sub-queries for each primary search term, significantly expanding the scope and uncovering more leads from Google Maps automatically.</p>\n<h1>How it Works</h1>\n<p>This template orchestrates a sophisticated web scraping process for lead generation using n8n nodes and AI assistance:</p>\n<p><strong>Input Query List</strong>: You provide a list of target queries, each typically containing business keywords and a geographic location (e.g., \"dentists in London\", \"HVAC services Austin TX\").</p>\n<p><strong>AI Query Expansion</strong>: For each input query, the workflow uses AI to generate related sub-queries, aiming for broader coverage within the target category and region.</p>\n<p><strong>Iterative Scraping</strong>: The workflow systematically processes each original query and its AI-generated sub-queries.</p>\n<p><strong>Google Maps Data Retrieval</strong>: It performs searches on Google Maps based on these queries to identify relevant business listings.</p>\n<p><strong>Multi-Data Extraction</strong>: For each identified business, the workflow attempts to extract the business name, website URL, email address, and phone number from the available data.</p>\n<p><strong>Data Aggregation</strong>: All successfully scraped lead information is compiled and saved directly into your specified Google Sheet, organized for easy use.</p>\n<h1>Setup</h1>\n<ol>\n<li>\n<p><strong>Add Queries</strong>: Open the initial node (Manual Trigger) and input your list of search queries.</p>\n</li>\n<li>\n<p><strong>Configure AI</strong>: Add your free Mistral API key to the designated AI node.</p>\n</li>\n<li>\n<p><strong>Configure Google Sheets Node</strong>: Select or create a Google Sheet document and specify the sheet where the scraped lead data should be stored. Ensure your Google Sheets credentials are correctly configured in n8n.</p>\n</li>\n<li>\n<p><strong>Run the Workflow</strong>: Execute the workflow (\"Test Workflow\" or activate it). The system will begin the automated web scraping and lead generation process, populating your Google Sheet over time.</p>\n</li>\n</ol>\n<h1>Customize as Needed:</h1>\n<p>The workflow is designed for flexibility. You can adjust the AI prompts for sub-query generation, modify the data extraction logic, or integrate additional steps (like data cleaning or CRM pushing) as required for your specific lead generation strategy.</p>\n</div><!--]-->"
}