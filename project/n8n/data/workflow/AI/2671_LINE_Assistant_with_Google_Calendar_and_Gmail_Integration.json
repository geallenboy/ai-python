{
  "title": "LINE Assistant with Google Calendar and Gmail Integration",
  "url": "https://n8n.io/workflows/2671-line-assistant-with-google-calendar-and-gmail-integration/",
  "category": "AI",
  "category_url": "https://n8n.io/workflows/categories/ai/?count=20",
  "author": "Boriwat Chanruang",
  "publish_date": "Last update 4 months ago",
  "content": "",
  "workflow_json": "{\"id\":\"Z5OgwYfK4reCTv9y\",\"meta\":{\"instanceId\":\"c59c4acfed171bdc864e7c432be610946898c3ee271693e0303565c953d88c1d\"},\"name\":\"LINE Assistant with Google Calendar and Gmail Integration\",\"tags\":[],\"nodes\":[{\"id\":\"9e1e1c11-f406-47de-8f65-9669cf078d3d\",\"name\":\"AI Agent\",\"type\":\"@n8n/n8n-nodes-langchain.agent\",\"position\":[-1140,120],\"parameters\":{\"text\":\"={{ $json.body.events[0].message.text }}\",\"options\":{\"systemMessage\":\"=You are a helpful assistant.\\n\\nHere is the current date {{ $now }}\"},\"promptType\":\"define\"},\"typeVersion\":1.7},{\"id\":\"fa722820-8804-47da-bb21-02c0d2b5d665\",\"name\":\"Window Buffer Memory\",\"type\":\"@n8n/n8n-nodes-langchain.memoryBufferWindow\",\"position\":[-1020,580],\"parameters\":{\"sessionKey\":\"={{ $json.body.events[0].source.userId }}\",\"sessionIdType\":\"customKey\"},\"typeVersion\":1.3},{\"id\":\"5149b91a-5934-4037-a444-dfdb93d0cd16\",\"name\":\"OpenAI Chat Model\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\"position\":[-1180,580],\"parameters\":{\"options\":{}},\"typeVersion\":1},{\"id\":\"211a120d-d65f-4708-adc2-66dc8f4a40d6\",\"name\":\"Wikipedia\",\"type\":\"@n8n/n8n-nodes-langchain.toolWikipedia\",\"position\":[-360,380],\"parameters\":{},\"typeVersion\":1},{\"id\":\"0e03137d-0300-47a4-bbd8-03c87c93d6e2\",\"name\":\"OpenAI\",\"type\":\"@n8n/n8n-nodes-langchain.openAi\",\"position\":[-780,120],\"parameters\":{\"modelId\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"gpt-4o-mini\",\"cachedResultName\":\"GPT-4O-MINI\"},\"options\":{},\"messages\":{\"values\":[{\"role\":\"system\",\"content\":\"Your task is to extract and condense the answer into an easily readable format. Don't provide a link or details such as \\\"ดูเพิ่มเติม\\\" or \\\"ดูรายละเอียดได้ที่นี่.\\\"\"},{\"content\":\"={{ $json.output }}\"}]}},\"typeVersion\":1.7},{\"id\":\"8c6e96bc-aa9d-44d1-b7ce-6bb85b175cf1\",\"name\":\"Switch Between Text and Others\",\"type\":\"n8n-nodes-base.switch\",\"position\":[-1820,640],\"parameters\":{\"rules\":{\"values\":[{\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"operator\":{\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"={{ $('Line Receiving').item.json.body.events[0].message.type }}\",\"rightValue\":\"text\"}]}}]},\"options\":{\"fallbackOutput\":\"extra\"}},\"typeVersion\":3.2},{\"id\":\"721a5e5e-3a9a-435e-9302-03ca7cf64fb7\",\"name\":\"Line Receiving\",\"type\":\"n8n-nodes-base.webhook\",\"position\":[-2320,560],\"webhookId\":\"********-****-****-****-************\",\"parameters\":{\"path\":\"linechatbotagent\",\"options\":{},\"httpMethod\":\"POST\"},\"typeVersion\":2},{\"id\":\"2b47f8f1-a501-4204-9221-c838edfceae7\",\"name\":\"Error Handling from AI Response\",\"type\":\"n8n-nodes-base.switch\",\"position\":[-220,100],\"parameters\":{\"rules\":{\"values\":[{\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"operator\":{\"type\":\"string\",\"operation\":\"exists\",\"singleValue\":true},\"leftValue\":\"={{ $json.message.content }}\",\"rightValue\":\"={{ $json.output }}\"}]}}]},\"options\":{\"fallbackOutput\":\"extra\"}},\"typeVersion\":3.2},{\"id\":\"99218c08-5ec7-44b9-a795-e98f1ec4aab3\",\"name\":\"Text Cleansing\",\"type\":\"n8n-nodes-base.set\",\"position\":[0,0],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"********-****-****-****-************\",\"name\":\"message.content\",\"type\":\"string\",\"value\":\"={{ $json.message.content.replaceAll(\\\"\\\\n\\\",\\\"\\\\\\\\n\\\").replaceAll(\\\"\\\\n\\\",\\\"\\\").removeMarkdown().removeTags().replaceAll('\\\"',\\\"\\\") }}\"}]}},\"typeVersion\":3.4},{\"id\":\"39476f44-9dc7-4c72-a857-9e79f85ccd72\",\"name\":\"Line Answering (Error Case)\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[760,680],\"parameters\":{\"url\":\"https://api.line.me/v2/bot/message/reply\",\"method\":\"POST\",\"options\":{},\"jsonBody\":\"={\\n  \\\"replyToken\\\": \\\"{{ $('Line Receiving').item.json.body.events[0].replyToken }}\\\",\\n  \\\"messages\\\": [\\n    {\\n      \\\"type\\\": \\\"text\\\",\\n      \\\"text\\\": \\\"กรุณาส่งอย่างอื่นเถอะนะเตงอัว\\\"\\n    }\\n  ]}\",\"sendBody\":true,\"jsonHeaders\":\"{\\n\\\"Authorization\\\": \\\"Bearer ****************************************\\\",\\n\\\"Content-Type\\\": \\\"application/json\\\"\\n}\",\"sendHeaders\":true,\"specifyBody\":\"json\",\"specifyHeaders\":\"json\"},\"typeVersion\":4.2},{\"id\":\"a7f8837d-c21b-457d-ad8b-b0b69e3c1ba7\",\"name\":\"Line Answering (Ordinary Case)\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[600,120],\"parameters\":{\"url\":\"https://api.line.me/v2/bot/message/reply\",\"method\":\"POST\",\"options\":{},\"jsonBody\":\"={\\n  \\\"replyToken\\\": \\\"{{ $('Line Receiving').item.json.body.events[0].replyToken }}\\\",\\n  \\\"messages\\\": [\\n    {\\n      \\\"type\\\": \\\"text\\\",\\n      \\\"text\\\": \\\"{{ $json.message.content }}\\\"\\n    }\\n  ]}\",\"sendBody\":true,\"jsonHeaders\":\"{\\n\\\"Authorization\\\": \\\"Bearer ****************************************\\\",\\n\\\"Content-Type\\\": \\\"application/json\\\"\\n}\",\"sendHeaders\":true,\"specifyBody\":\"json\",\"specifyHeaders\":\"json\"},\"typeVersion\":4.2},{\"id\":\"3280f331-0130-41c2-a581-14feccf76514\",\"name\":\"Google Calendar Create\",\"type\":\"n8n-nodes-base.googleCalendarTool\",\"position\":[-640,400],\"parameters\":{\"end\":\"=  {{ $fromAI(\\\"createenddate\\\",\\\"end date and time to create event\\\") }}\",\"start\":\"=  {{ $fromAI(\\\"createstartdate\\\",\\\"start date and time to create event\\\") }}\",\"calendar\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"***********@gmail.com\",\"cachedResultName\":\"***********@gmail.com\"},\"additionalFields\":{\"summary\":\"={{ $fromAI(\\\"event_name\\\",\\\"Name of an Event\\\") }}\"}},\"credentials\":{\"googleCalendarOAuth2Api\":{\"id\":\"0PzHsuCKdTBU5E2Q\",\"name\":\"Google Calendar account\"}},\"typeVersion\":1.2},{\"id\":\"7701895f-9781-41b9-aa80-8440e4e9cbd3\",\"name\":\"Google Calendar Read\",\"type\":\"n8n-nodes-base.googleCalendarTool\",\"position\":[-880,580],\"parameters\":{\"limit\":5,\"options\":{\"timeMax\":\"={{ $fromAI(\\\"enddate\\\",\\\"end date user mentioned about\\\") }}\",\"timeMin\":\"={{ $fromAI(\\\"startdate\\\",\\\"start date user mentioned about\\\") }}\"},\"calendar\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"***********@gmail.com\",\"cachedResultName\":\"***********@gmail.com\"},\"operation\":\"getAll\"},\"credentials\":{\"googleCalendarOAuth2Api\":{\"id\":\"0PzHsuCKdTBU5E2Q\",\"name\":\"Google Calendar account\"}},\"typeVersion\":1.2},{\"id\":\"881daa7f-cf9a-4d1f-8235-55d206925ac0\",\"name\":\"Gmail Read\",\"type\":\"n8n-nodes-base.gmailTool\",\"position\":[-700,560],\"webhookId\":\"********-****-****-****-************\",\"parameters\":{\"limit\":5,\"filters\":{\"receivedAfter\":\"={{ $fromAI(\\\"receiveddate\\\",\\\"the date email received\\\") }}\"},\"operation\":\"getAll\"},\"credentials\":{\"gmailOAuth2\":{\"id\":\"cZmU8EQya5OtXVgQ\",\"name\":\"Gmail account\"}},\"typeVersion\":2.1}],\"active\":false,\"pinData\":{\"Line Receiving\":[{\"json\":{\"body\":{\"events\":[{\"mode\":\"active\",\"type\":\"message\",\"source\":{\"type\":\"user\",\"userId\":\"****************************************\"},\"message\":{\"id\":\"539986086979174564\",\"text\":\"\",\"type\":\"text\",\"quoteToken\":\"****************************************\"},\"timestamp\":1734688093030,\"replyToken\":\"********************************\",\"webhookEventId\":\"01JFHQFD2KQE4BA5VVW32YDBZV\",\"deliveryContext\":{\"isRedelivery\":false}}],\"destination\":\"****************************************\"},\"query\":{},\"params\":{},\"headers\":{\"host\":\"n8n-9pul.onrender.com\",\"cf-ray\":\"****************\",\"rndr-id\":\"****************\",\"cdn-loop\":\"cloudflare; loops=1; subreqs=1\",\"cf-ew-via\":\"15\",\"cf-worker\":\"onrender.com\",\"cf-visitor\":\"{\\\"scheme\\\":\\\"https\\\"}\",\"user-agent\":\"LineBotWebhook/2.0\",\"cf-ipcountry\":\"JP\",\"content-type\":\"application/json; charset=utf-8\",\"content-length\":\"619\",\"true-client-ip\":\"***.***.***.**\",\"accept-encoding\":\"gzip, br\",\"x-forwarded-for\":\"***.***.***.***, ***.***.***.**\",\"x-request-start\":\"1734688093431195\",\"cf-connecting-ip\":\"***.***.***.**\",\"render-proxy-ttl\":\"4\",\"x-line-signature\":\"****************************************\",\"x-forwarded-proto\":\"https\"},\"webhookUrl\":\"https://n8n-9pul.onrender.com/webhook/linechatbotagent\",\"executionMode\":\"production\"}}]},\"settings\":{\"executionOrder\":\"v1\"},\"versionId\":\"14065639-6706-4161-9380-4f4dde6eb501\",\"connections\":{\"OpenAI\":{\"main\":[[{\"node\":\"Error Handling from AI Response\",\"type\":\"main\",\"index\":0}]]},\"AI Agent\":{\"main\":[[{\"node\":\"OpenAI\",\"type\":\"main\",\"index\":0}]]},\"Wikipedia\":{\"ai_tool\":[[{\"node\":\"AI Agent\",\"type\":\"ai_tool\",\"index\":0}]]},\"Gmail Read\":{\"ai_tool\":[[{\"node\":\"AI Agent\",\"type\":\"ai_tool\",\"index\":0}]]},\"Line Receiving\":{\"main\":[[{\"node\":\"Switch Between Text and Others\",\"type\":\"main\",\"index\":0}]]},\"Text Cleansing\":{\"main\":[[{\"node\":\"Line Answering (Ordinary Case)\",\"type\":\"main\",\"index\":0}]]},\"OpenAI Chat Model\":{\"ai_languageModel\":[[{\"node\":\"AI Agent\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"Google Calendar Read\":{\"ai_tool\":[[{\"node\":\"AI Agent\",\"type\":\"ai_tool\",\"index\":0}]]},\"Window Buffer Memory\":{\"ai_memory\":[[{\"node\":\"AI Agent\",\"type\":\"ai_memory\",\"index\":0}]]},\"Google Calendar Create\":{\"ai_tool\":[[{\"node\":\"AI Agent\",\"type\":\"ai_tool\",\"index\":0}]]},\"Switch Between Text and Others\":{\"main\":[[{\"node\":\"AI Agent\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Line Answering (Error Case)\",\"type\":\"main\",\"index\":0}]]},\"Error Handling from AI Response\":{\"main\":[[{\"node\":\"Text Cleansing\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Line Answering (Error Case)\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "### **Who is this for?**\n\n  * This workflow is for small business owners, personal assistants, or project managers who rely on multiple platforms for communication and scheduling.\n  * Ideal for users managing customer support, personal scheduling, or group event coordination via LINE, Google Calendar, and Gmail.\n\n\n\n* * *\n\n### **What problem is this workflow solving?**\n\n  * Reduces the manual effort needed to manage conversations, schedule events, and handle email communications.\n  * Provides an intelligent system for replying to user messages and fetching relevant calendar or email information in real time.\n  * Bridges the gap between messaging platforms and productivity tools, improving efficiency.\n\n\n\n* * *\n\n### **What this workflow does**\n\n  * **LINE Chatbot Automation** : Automatically processes and responds to messages received via LINE.\n  * **Google Calendar Management** : Retrieves upcoming events or schedules new events dynamically based on user queries.\n  * **Email Retrieval** : Fetches recent emails using Gmail and filters them based on user instructions.\n  * **AI-Powered Replies** : Uses OpenAI GPT to interpret user queries and provide tailored responses.\n\n\n\n* * *\n\n### **Setup**\n\n  1. **Prerequisites** :\n\n     * LINE Developer account and API access.\n     * Google Calendar and Gmail accounts with OAuth credentials.\n     * An n8n instance with access to environment variables.\n  2. **Steps** :\n\n     * Set up environment variables (`LINE_API_TOKEN` and `DYNAMIC_EMAIL`).\n     * Configure API credentials for Google Calendar and Gmail in n8n.\n     * Test the workflow by sending a sample message via LINE.\n  3. **Enhancements** :\n\n     * Use sticky notes to provide inline instructions for each node.\n     * Include a video walkthrough or a step-by-step document for first-time users.\n\n\n\n* * *\n\n### **How to customize this workflow to your needs**\n\n  * **Localization** : Modify responses in the AI Agent node to match the language and tone of your audience.\n  * **Integration** : Add more integrations like Slack or Microsoft Teams for additional notifications.\n  * **Advanced Filters** : Add specific conditions to Gmail or Google Calendar nodes to fetch only relevant data, such as events with specific keywords or emails from certain senders.\n\n\n\n* * *\n\n### **Advanced Use Cases**\n\n  * **Customer Support** : Automatically schedule meetings with clients based on their messages in LINE.\n  * **Event Management** : Handle RSVP confirmations, event reminders, and email follow-ups for planned events.\n  * **Personalized Assistant** : Use the workflow to act as a personal virtual assistant that syncs your schedule, replies to messages, and summarizes emails.\n\n\n\n* * *\n\n### **Tips for Optimization**\n\n  * **Edit Fields Node** : Add a centralized node to configure dynamic inputs (e.g., tokens, emails, or thresholds) for easy updates.\n  * **Fallback Responses** : Use a switch node to handle unrecognized input gracefully and provide clear feedback to users.\n  * **Logs and Monitoring** : Add nodes to log interactions and track message flows for debugging or analytics.\n\n\n\n* * *\n\nLet me know if you'd like me to expand on any specific section or add more customization ideas!\n",
  "readme_html": "<!--[--><div data-v-006f9244=\"\"><h3><strong>Who is this for?</strong></h3>\n<ul>\n<li>This workflow is for small business owners, personal assistants, or project managers who rely on multiple platforms for communication and scheduling.</li>\n<li>Ideal for users managing customer support, personal scheduling, or group event coordination via LINE, Google Calendar, and Gmail.</li>\n</ul>\n<hr>\n<h3><strong>What problem is this workflow solving?</strong></h3>\n<ul>\n<li>Reduces the manual effort needed to manage conversations, schedule events, and handle email communications.</li>\n<li>Provides an intelligent system for replying to user messages and fetching relevant calendar or email information in real time.</li>\n<li>Bridges the gap between messaging platforms and productivity tools, improving efficiency.</li>\n</ul>\n<hr>\n<h3><strong>What this workflow does</strong></h3>\n<ul>\n<li><strong>LINE Chatbot Automation</strong>: Automatically processes and responds to messages received via LINE.</li>\n<li><strong>Google Calendar Management</strong>: Retrieves upcoming events or schedules new events dynamically based on user queries.</li>\n<li><strong>Email Retrieval</strong>: Fetches recent emails using Gmail and filters them based on user instructions.</li>\n<li><strong>AI-Powered Replies</strong>: Uses OpenAI GPT to interpret user queries and provide tailored responses.</li>\n</ul>\n<hr>\n<h3><strong>Setup</strong></h3>\n<ol>\n<li>\n<p><strong>Prerequisites</strong>:</p>\n<ul>\n<li>LINE Developer account and API access.</li>\n<li>Google Calendar and Gmail accounts with OAuth credentials.</li>\n<li>An n8n instance with access to environment variables.</li>\n</ul>\n</li>\n<li>\n<p><strong>Steps</strong>:</p>\n<ul>\n<li>Set up environment variables (<code>LINE_API_TOKEN</code> and <code>DYNAMIC_EMAIL</code>).</li>\n<li>Configure API credentials for Google Calendar and Gmail in n8n.</li>\n<li>Test the workflow by sending a sample message via LINE.</li>\n</ul>\n</li>\n<li>\n<p><strong>Enhancements</strong>:</p>\n<ul>\n<li>Use sticky notes to provide inline instructions for each node.</li>\n<li>Include a video walkthrough or a step-by-step document for first-time users.</li>\n</ul>\n</li>\n</ol>\n<hr>\n<h3><strong>How to customize this workflow to your needs</strong></h3>\n<ul>\n<li><strong>Localization</strong>: Modify responses in the AI Agent node to match the language and tone of your audience.</li>\n<li><strong>Integration</strong>: Add more integrations like Slack or Microsoft Teams for additional notifications.</li>\n<li><strong>Advanced Filters</strong>: Add specific conditions to Gmail or Google Calendar nodes to fetch only relevant data, such as events with specific keywords or emails from certain senders.</li>\n</ul>\n<hr>\n<h3><strong>Advanced Use Cases</strong></h3>\n<ul>\n<li><strong>Customer Support</strong>: Automatically schedule meetings with clients based on their messages in LINE.</li>\n<li><strong>Event Management</strong>: Handle RSVP confirmations, event reminders, and email follow-ups for planned events.</li>\n<li><strong>Personalized Assistant</strong>: Use the workflow to act as a personal virtual assistant that syncs your schedule, replies to messages, and summarizes emails.</li>\n</ul>\n<hr>\n<h3><strong>Tips for Optimization</strong></h3>\n<ul>\n<li><strong>Edit Fields Node</strong>: Add a centralized node to configure dynamic inputs (e.g., tokens, emails, or thresholds) for easy updates.</li>\n<li><strong>Fallback Responses</strong>: Use a switch node to handle unrecognized input gracefully and provide clear feedback to users.</li>\n<li><strong>Logs and Monitoring</strong>: Add nodes to log interactions and track message flows for debugging or analytics.</li>\n</ul>\n<hr>\n<p>Let me know if you'd like me to expand on any specific section or add more customization ideas!</p>\n</div><!--]-->",
  "readme_zh": "### **适用对象**\n\n* 本工作流专为依赖多平台进行沟通与日程管理的小型企业主、私人助理或项目经理设计。\n* 适合通过LINE、Google日历和Gmail处理客户支持、个人日程安排或团体活动协调的用户。\n\n---\n\n### **解决痛点**\n\n* 减少手动处理对话、安排日程和邮件沟通的时间成本\n* 提供智能系统实时回复消息并调取相关日历/邮件信息\n* 打通即时通讯与效率工具间的壁垒，提升协同效能\n\n---\n\n### **核心功能**\n\n* **LINE机器人自动化**：自动处理并响应LINE消息\n* **Google日历管理**：根据查询动态获取近期日程或创建新事件\n* **邮件检索**：通过Gmail获取近期邮件并按指令筛选\n* **AI智能回复**：调用OpenAI GPT解析需求并生成定制化响应\n\n---\n\n### **配置指南**\n\n1. **先决条件**：\n   * LINE开发者账号及API权限\n   * 已配置OAuth凭证的Google日历和Gmail账户\n   * 可访问环境变量的n8n实例\n\n2. **部署步骤**：\n   * 设置环境变量（`LINE_API_TOKEN`和`DYNAMIC_EMAIL`）\n   * 在n8n中配置Google日历和Gmail的API凭证\n   * 通过LINE发送测试消息验证流程\n\n3. **增强建议**：\n   * 使用便签节点为每个模块添加操作说明\n   * 为新用户准备视频教程或图文指引文档\n\n---\n\n### **个性化定制**\n\n* **本地化适配**：在AI代理节点调整回复话术以符合目标用户语言习惯\n* **扩展集成**：新增Slack或Microsoft Teams等通知渠道\n* **高级筛选**：为邮件/日历节点添加关键词过滤或指定发件人等条件\n\n---\n\n### **高阶应用场景**\n\n* **客户服务**：根据LINE消息自动安排客户会议\n* **活动管理**：处理活动确认、提醒通知及邮件跟进\n* **私人助理**：作为智能秘书同步日程、代回消息并汇总邮件\n\n---\n\n### **优化建议**\n\n* **编辑字段节点**：集中配置动态参数（如令牌/邮箱/阈值）便于维护\n* **兜底回复机制**：使用条件分支节点优雅处理未知指令\n* **日志监控**：添加交互记录节点用于流程追踪与问题排查\n\n---\n\n如需扩展特定功能模块或获取更多定制方案，欢迎随时告知！",
  "title_zh": "集成Google日历与Gmail的LINE助手",
  "publish_date_absolute": "2025-01-07",
  "publish_date_zh": "最后更新于4个月前",
  "workflow_json_zh": "{\n  \"id\": \"Z5OgwYfK4reCTv9y\",\n  \"meta\": {\n    \"instanceId\": \"c59c4acfed171bdc864e7c432be610946898c3ee271693e0303565c953d88c1d\"\n  },\n  \"name\": \"LINE Assistant with Google Calendar and Gmail Integration\",\n  \"tags\": [],\n  \"nodes\": [\n    {\n      \"id\": \"9e1e1c11-f406-47de-8f65-9669cf078d3d\",\n      \"name\": \"AI Agent\",\n      \"type\": \"@n8n/n8n-nodes-langchain.agent\",\n      \"position\": [\n        -1140,\n        120\n      ],\n      \"parameters\": {\n        \"text\": \"={{ $json.body.events[0].message.text }}\",\n        \"options\": {\n          \"systemMessage\": \"=You are a helpful assistant.\\n\\nHere is the current date {{ $now }}\"\n        },\n        \"promptType\": \"define\"\n      },\n      \"typeVersion\": 1.7\n    },\n    {\n      \"id\": \"fa722820-8804-47da-bb21-02c0d2b5d665\",\n      \"name\": \"Window Buffer Memory\",\n      \"type\": \"@n8n/n8n-nodes-langchain.memoryBufferWindow\",\n      \"position\": [\n        -1020,\n        580\n      ],\n      \"parameters\": {\n        \"sessionKey\": \"={{ $json.body.events[0].source.userId }}\",\n        \"sessionIdType\": \"customKey\"\n      },\n      \"typeVersion\": 1.3\n    },\n    {\n      \"id\": \"5149b91a-5934-4037-a444-dfdb93d0cd16\",\n      \"name\": \"OpenAI Chat Model\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\n      \"position\": [\n        -1180,\n        580\n      ],\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"211a120d-d65f-4708-adc2-66dc8f4a40d6\",\n      \"name\": \"Wikipedia\",\n      \"type\": \"@n8n/n8n-nodes-langchain.toolWikipedia\",\n      \"position\": [\n        -360,\n        380\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"0e03137d-0300-47a4-bbd8-03c87c93d6e2\",\n      \"name\": \"OpenAI\",\n      \"type\": \"@n8n/n8n-nodes-langchain.openAi\",\n      \"position\": [\n        -780,\n        120\n      ],\n      \"parameters\": {\n        \"modelId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gpt-4o-mini\",\n          \"cachedResultName\": \"GPT-4O-MINI\"\n        },\n        \"options\": {},\n        \"messages\": {\n          \"values\": [\n            {\n              \"role\": \"system\",\n              \"content\": \"Your task is to extract and condense the answer into an easily readable format. Don't provide a link or details such as \\\"ดูเพิ่มเติม\\\" or \\\"ดูรายละเอียดได้ที่นี่.\\\"\"\n            },\n            {\n              \"content\": \"={{ $json.output }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1.7\n    },\n    {\n      \"id\": \"8c6e96bc-aa9d-44d1-b7ce-6bb85b175cf1\",\n      \"name\": \"Switch Between Text and Others\",\n      \"type\": \"n8n-nodes-base.switch\",\n      \"position\": [\n        -1820,\n        640\n      ],\n      \"parameters\": {\n        \"rules\": {\n          \"values\": [\n            {\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 2,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"operator\": {\n                      \"type\": \"string\",\n                      \"operation\": \"equals\"\n                    },\n                    \"leftValue\": \"={{ $('Line Receiving').item.json.body.events[0].message.type }}\",\n                    \"rightValue\": \"text\"\n                  }\n                ]\n              }\n            }\n          ]\n        },\n        \"options\": {\n          \"fallbackOutput\": \"extra\"\n        }\n      },\n      \"typeVersion\": 3.2\n    },\n    {\n      \"id\": \"721a5e5e-3a9a-435e-9302-03ca7cf64fb7\",\n      \"name\": \"Line Receiving\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"position\": [\n        -2320,\n        560\n      ],\n      \"webhookId\": \"********-****-****-****-************\",\n      \"parameters\": {\n        \"path\": \"linechatbotagent\",\n        \"options\": {},\n        \"httpMethod\": \"POST\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"2b47f8f1-a501-4204-9221-c838edfceae7\",\n      \"name\": \"Error Handling from AI Response\",\n      \"type\": \"n8n-nodes-base.switch\",\n      \"position\": [\n        -220,\n        100\n      ],\n      \"parameters\": {\n        \"rules\": {\n          \"values\": [\n            {\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 2,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"operator\": {\n                      \"type\": \"string\",\n                      \"operation\": \"exists\",\n                      \"singleValue\": true\n                    },\n                    \"leftValue\": \"={{ $json.message.content }}\",\n                    \"rightValue\": \"={{ $json.output }}\"\n                  }\n                ]\n              }\n            }\n          ]\n        },\n        \"options\": {\n          \"fallbackOutput\": \"extra\"\n        }\n      },\n      \"typeVersion\": 3.2\n    },\n    {\n      \"id\": \"99218c08-5ec7-44b9-a795-e98f1ec4aab3\",\n      \"name\": \"Text Cleansing\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        0,\n        0\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"********-****-****-****-************\",\n              \"name\": \"message.content\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.message.content.replaceAll(\\\"\\\\n\\\",\\\"\\\\\\\\n\\\").replaceAll(\\\"\\\\n\\\",\\\"\\\").removeMarkdown().removeTags().replaceAll('\\\"',\\\"\\\") }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"39476f44-9dc7-4c72-a857-9e79f85ccd72\",\n      \"name\": \"Line Answering (Error Case)\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        760,\n        680\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.line.me/v2/bot/message/reply\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"jsonBody\": \"={\\n  \\\"replyToken\\\": \\\"{{ $('Line Receiving').item.json.body.events[0].replyToken }}\\\",\\n  \\\"messages\\\": [\\n    {\\n      \\\"type\\\": \\\"text\\\",\\n      \\\"text\\\": \\\"กรุณาส่งอย่างอื่นเถอะนะเตงอัว\\\"\\n    }\\n  ]}\",\n        \"sendBody\": true,\n        \"jsonHeaders\": \"{\\n\\\"Authorization\\\": \\\"Bearer ****************************************\\\",\\n\\\"Content-Type\\\": \\\"application/json\\\"\\n}\",\n        \"sendHeaders\": true,\n        \"specifyBody\": \"json\",\n        \"specifyHeaders\": \"json\"\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"a7f8837d-c21b-457d-ad8b-b0b69e3c1ba7\",\n      \"name\": \"Line Answering (Ordinary Case)\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        600,\n        120\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.line.me/v2/bot/message/reply\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"jsonBody\": \"={\\n  \\\"replyToken\\\": \\\"{{ $('Line Receiving').item.json.body.events[0].replyToken }}\\\",\\n  \\\"messages\\\": [\\n    {\\n      \\\"type\\\": \\\"text\\\",\\n      \\\"text\\\": \\\"{{ $json.message.content }}\\\"\\n    }\\n  ]}\",\n        \"sendBody\": true,\n        \"jsonHeaders\": \"{\\n\\\"Authorization\\\": \\\"Bearer ****************************************\\\",\\n\\\"Content-Type\\\": \\\"application/json\\\"\\n}\",\n        \"sendHeaders\": true,\n        \"specifyBody\": \"json\",\n        \"specifyHeaders\": \"json\"\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"3280f331-0130-41c2-a581-14feccf76514\",\n      \"name\": \"Google Calendar Create\",\n      \"type\": \"n8n-nodes-base.googleCalendarTool\",\n      \"position\": [\n        -640,\n        400\n      ],\n      \"parameters\": {\n        \"end\": \"=  {{ $fromAI(\\\"createenddate\\\",\\\"end date and time to create event\\\") }}\",\n        \"start\": \"=  {{ $fromAI(\\\"createstartdate\\\",\\\"start date and time to create event\\\") }}\",\n        \"calendar\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"***********@gmail.com\",\n          \"cachedResultName\": \"***********@gmail.com\"\n        },\n        \"additionalFields\": {\n          \"summary\": \"={{ $fromAI(\\\"event_name\\\",\\\"Name of an Event\\\") }}\"\n        }\n      },\n      \"credentials\": {\n        \"googleCalendarOAuth2Api\": {\n          \"id\": \"0PzHsuCKdTBU5E2Q\",\n          \"name\": \"Google Calendar account\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"7701895f-9781-41b9-aa80-8440e4e9cbd3\",\n      \"name\": \"Google Calendar Read\",\n      \"type\": \"n8n-nodes-base.googleCalendarTool\",\n      \"position\": [\n        -880,\n        580\n      ],\n      \"parameters\": {\n        \"limit\": 5,\n        \"options\": {\n          \"timeMax\": \"={{ $fromAI(\\\"enddate\\\",\\\"end date user mentioned about\\\") }}\",\n          \"timeMin\": \"={{ $fromAI(\\\"startdate\\\",\\\"start date user mentioned about\\\") }}\"\n        },\n        \"calendar\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"***********@gmail.com\",\n          \"cachedResultName\": \"***********@gmail.com\"\n        },\n        \"operation\": \"getAll\"\n      },\n      \"credentials\": {\n        \"googleCalendarOAuth2Api\": {\n          \"id\": \"0PzHsuCKdTBU5E2Q\",\n          \"name\": \"Google Calendar account\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"881daa7f-cf9a-4d1f-8235-55d206925ac0\",\n      \"name\": \"Gmail Read\",\n      \"type\": \"n8n-nodes-base.gmailTool\",\n      \"position\": [\n        -700,\n        560\n      ],\n      \"webhookId\": \"********-****-****-****-************\",\n      \"parameters\": {\n        \"limit\": 5,\n        \"filters\": {\n          \"receivedAfter\": \"={{ $fromAI(\\\"receiveddate\\\",\\\"the date email received\\\") }}\"\n        },\n        \"operation\": \"getAll\"\n      },\n      \"credentials\": {\n        \"gmailOAuth2\": {\n          \"id\": \"cZmU8EQya5OtXVgQ\",\n          \"name\": \"Gmail account\"\n        }\n      },\n      \"typeVersion\": 2.1\n    }\n  ],\n  \"active\": false,\n  \"pinData\": {\n    \"Line Receiving\": [\n      {\n        \"json\": {\n          \"body\": {\n            \"events\": [\n              {\n                \"mode\": \"active\",\n                \"type\": \"message\",\n                \"source\": {\n                  \"type\": \"user\",\n                  \"userId\": \"****************************************\"\n                },\n                \"message\": {\n                  \"id\": \"539986086979174564\",\n                  \"text\": \"\",\n                  \"type\": \"text\",\n                  \"quoteToken\": \"****************************************\"\n                },\n                \"timestamp\": 1734688093030,\n                \"replyToken\": \"********************************\",\n                \"webhookEventId\": \"01JFHQFD2KQE4BA5VVW32YDBZV\",\n                \"deliveryContext\": {\n                  \"isRedelivery\": false\n                }\n              }\n            ],\n            \"destination\": \"****************************************\"\n          },\n          \"query\": {},\n          \"params\": {},\n          \"headers\": {\n            \"host\": \"n8n-9pul.onrender.com\",\n            \"cf-ray\": \"****************\",\n            \"rndr-id\": \"****************\",\n            \"cdn-loop\": \"cloudflare; loops=1; subreqs=1\",\n            \"cf-ew-via\": \"15\",\n            \"cf-worker\": \"onrender.com\",\n            \"cf-visitor\": \"{\\\"scheme\\\":\\\"https\\\"}\",\n            \"user-agent\": \"LineBotWebhook/2.0\",\n            \"cf-ipcountry\": \"JP\",\n            \"content-type\": \"application/json; charset=utf-8\",\n            \"content-length\": \"619\",\n            \"true-client-ip\": \"***.***.***.**\",\n            \"accept-encoding\": \"gzip, br\",\n            \"x-forwarded-for\": \"***.***.***.***, ***.***.***.**\",\n            \"x-request-start\": \"1734688093431195\",\n            \"cf-connecting-ip\": \"***.***.***.**\",\n            \"render-proxy-ttl\": \"4\",\n            \"x-line-signature\": \"****************************************\",\n            \"x-forwarded-proto\": \"https\"\n          },\n          \"webhookUrl\": \"https://n8n-9pul.onrender.com/webhook/linechatbotagent\",\n          \"executionMode\": \"production\"\n        }\n      }\n    ]\n  },\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"14065639-6706-4161-9380-4f4dde6eb501\",\n  \"connections\": {\n    \"OpenAI\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Error Handling from AI Response\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"AI Agent\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"OpenAI\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Wikipedia\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Gmail Read\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Line Receiving\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Switch Between Text and Others\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Text Cleansing\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Line Answering (Ordinary Case)\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"OpenAI Chat Model\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Google Calendar Read\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Window Buffer Memory\": {\n      \"ai_memory\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"ai_memory\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Google Calendar Create\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Switch Between Text and Others\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Line Answering (Error Case)\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Error Handling from AI Response\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Text Cleansing\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Line Answering (Error Case)\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}