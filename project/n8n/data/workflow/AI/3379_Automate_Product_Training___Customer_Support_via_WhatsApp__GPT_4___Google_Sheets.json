{
  "title": "Automate Product Training & Customer Support via WhatsApp, GPT-4 & Google Sheets",
  "url": "https://n8n.io/workflows/3379-automate-product-training-and-customer-support-via-whatsapp-gpt-4-and-google-sheets/",
  "category": "AI",
  "category_url": "https://n8n.io/workflows/categories/ai/",
  "author": "Dr. Firas",
  "publish_date": "Last update 25 days ago",
  "content": "",
  "workflow_json": "{\"id\":\"GvlLeSOUPfar0DQS\",\"meta\":{\"instanceId\":\"a2b23892dd6989fda7c1209b381f5850373a7d2b85609624d7c2b7a092671d44\",\"templateCredsSetupCompleted\":true},\"name\":\"Automate Product Data Collection & Customer Support via WhatsApp + GPT-4 + Google Sheets\",\"tags\":[],\"nodes\":[{\"id\":\"370611ee-2725-4ee4-a73a-68d4eaabfe3a\",\"name\":\"WhatsApp Business Cloud\",\"type\":\"n8n-nodes-base.whatsApp\",\"position\":[1020,220],\"webhookId\":\"ef261fd4-e3b8-42e9-a0e2-2c3c44b6b15e\",\"parameters\":{\"textBody\":\"={{ $json.output }}\",\"operation\":\"send\",\"phoneNumberId\":\"574583382412256\",\"additionalFields\":{},\"recipientPhoneNumber\":\"+212722542056\"},\"credentials\":{\"whatsAppApi\":{\"id\":\"TzeEzaeiZOOqcLOZ\",\"name\":\"WhatsApp account\"}},\"typeVersion\":1},{\"id\":\"30520fe8-a423-4942-85b2-9e8776b45939\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-740,-20],\"parameters\":{\"width\":400,\"height\":440,\"content\":\"## üü° STEP 1 ‚Äì Incoming WhatsApp Message\\nListens for new WhatsApp messages.\\nIf the message starts with train:, it triggers the product training flow.\\nOtherwise, it goes to the customer support flow.\\n**WhatsApp Business Cloud node** : [Here](https://www.notion.so/automatisation/WHATSAPP-WORKFLOW-1c63d6550fd980559679e7535938a68d?pvs=4#1c63d6550fd980f9a2a5e25a3654da82)\"},\"typeVersion\":1},{\"id\":\"d3259e0e-5368-407d-8ac6-993784c939c9\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-300,280],\"parameters\":{\"color\":6,\"width\":1180,\"height\":420,\"content\":\"## üîµ STEP 3 ‚Äì Customer Support Flow\\nTriggered when the message **does NOT start with `train:`**.\\n\\n1. **AI Analyzes the Message**  \\n   Understands the customer's question or problem.\\n\\n2. **Fetch Product Data if Needed**  \\n   Reads relevant product info from Google Sheets.\\n\\n3. **Detect Issues Automatically**  \\n   Identifies if the user is facing a specific issue.\\n\\n4. **Suggest Solutions**  \\n   Proposes a helpful, clear response to solve the issue.\\n\\n5. **Log Customer Problems**  \\n   Saves the problem, suggested solution, and category.\\n\\n6. **Respond to the User**  \\n   Sends a professional and helpful WhatsApp reply.\"},\"typeVersion\":1},{\"id\":\"455ce4ab-6d14-4d4e-8ff8-04612cf532b9\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-300,-400],\"parameters\":{\"color\":3,\"width\":1180,\"height\":660,\"content\":\"## üî¥ STEP 2 ‚Äì Product Data Training (Triggered by train:)\\nTriggered when the message starts with `train:`.\\n**OpenAI API keys** : [Here](https://platform.openai.com/api-keys)\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n1. **Extract URL from Message**  \\n   Uses regex to detect and extract the product link.\\n\\n2. **Fetch HTML Content**  \\n   Sends an HTTP request to retrieve the full page content.\\n\\n3. **Clean HTML Data**  \\n   Strips HTML tags, scripts, and formats the text.\\n\\n4. **Save Raw Product Info**  \\n   Appends the cleaned content and URL into Google Sheets.\\n\\n5. **AI: Enhance Product Details**  \\n   - Extracts Product Name  \\n   - Detects Price (subscription or one-time)  \\n   - Identifies Product Topic  \\n   - Generates FAQs\\n\\n6. **Update Product Sheet**  \\n   Enriches the row in Sheets with structured product data.\\n\"},\"typeVersion\":1},{\"id\":\"15251a04-a139-4a71-9e96-d5ecd9c2e66c\",\"name\":\"Sticky Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[920,-20],\"parameters\":{\"color\":4,\"width\":320,\"height\":440,\"content\":\"## üü¢ STEP 4 ‚Äì Client Response\\nFinal step of the flow.\\n\\n- Sends the AI-generated response back to the customer via WhatsApp.\\n- Ensures the message is clear, helpful, and personalized.\"},\"typeVersion\":1},{\"id\":\"f028f5a3-fed3-4f90-89cc-2af211da7362\",\"name\":\"Incoming Message Trigger\",\"type\":\"n8n-nodes-base.whatsAppTrigger\",\"position\":[-700,220],\"webhookId\":\"48ce9bac-c7ea-4cb7-a40a-b010ea5ac743\",\"parameters\":{\"options\":{},\"updates\":[\"messages\"]},\"credentials\":{\"whatsAppTriggerApi\":{\"id\":\"zYvcHcxGBNdN9Ptf\",\"name\":\"WhatsApp OAuth account\"}},\"typeVersion\":1},{\"id\":\"54edaa0c-005e-4810-a2fa-76fbcc009b2b\",\"name\":\"Check If Training\",\"type\":\"n8n-nodes-base.switch\",\"position\":[-520,220],\"parameters\":{\"rules\":{\"values\":[{\"outputKey\":\"train\",\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"9865cb5b-33da-490c-afc3-186457d5b564\",\"operator\":{\"type\":\"string\",\"operation\":\"startsWith\"},\"leftValue\":\"={{ $json.messages[0].text.body }}\",\"rightValue\":\"train:\"}]},\"renameOutput\":true},{\"outputKey\":\"text\",\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"5a9a1fee-b408-469f-a08c-e8d690fc9792\",\"operator\":{\"type\":\"string\",\"operation\":\"notStartsWith\"},\"leftValue\":\"={{ $json.messages[0].text.body }}\",\"rightValue\":\"train:\"}]},\"renameOutput\":true}]},\"options\":{}},\"typeVersion\":3.2},{\"id\":\"b4187b28-efd9-46cb-8d1c-23d89d3f6125\",\"name\":\"Extract URL from Text\",\"type\":\"n8n-nodes-base.code\",\"position\":[-260,-320],\"parameters\":{\"jsCode\":\"// R√©cup√©rer le texte √† analyser depuis l'input\\nconst texteExemple = $input.first().json.messages[0].text.body;\\n\\n// Expression r√©guli√®re modifi√©e pour capturer les URL avec ou sans protocole\\nconst regex = /((?:https?:\\\\/\\\\/)?(?:www\\\\.)?[a-zA-Z0-9.-]+\\\\.[a-zA-Z]{2,6}(?:\\\\/\\\\S*)?)/g;\\n\\n// Extraction des URL √† partir du texte\\nconst matches = texteExemple.match(regex) || [];\\n\\n// Si des URL ont √©t√© trouv√©es, on les mappe en objets\\nif (matches.length > 0) {\\n    const output = matches.map(url => ({ url }));\\n    return output;\\n} else {\\n    // Si aucune URL n'est trouv√©e, on retourne les items d'entr√©e pour que le workflow continue\\n    return $input.all();\\n}\\n\"},\"typeVersion\":2},{\"id\":\"dbbcc8cf-2544-4de1-bcfd-6292d96a1017\",\"name\":\"Fetch HTML Page\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[-100,-320],\"parameters\":{\"url\":\"={{ $json.url }}\",\"options\":{\"response\":{\"response\":{\"responseFormat\":\"text\"}}}},\"typeVersion\":4.2},{\"id\":\"91e711d0-26c0-41dd-a9c5-28100f0f44f6\",\"name\":\"Clean HTML Content\",\"type\":\"n8n-nodes-base.code\",\"position\":[60,-320],\"parameters\":{\"jsCode\":\"// Exemple : r√©cup√©ration du contenu HTML depuis le premier item\\n// Si vous avez un champ nomm√© \\\"html\\\" dans un noeud pr√©c√©dent.\\nconst htmlContent = $input.first().json.html;\\n\\n// Fonction de nettoyage du HTML\\nfunction nettoyerHTML(input) {\\n  if (typeof input !== 'string') {\\n    throw new Error(\\\"Expected HTML content as a string.\\\");\\n  }\\n  let cleanedText = input;\\n\\n  // 1. Retirer les liens <a> et leur contenu\\n  cleanedText = cleanedText.replace(/<a[^>]*>.*?<\\\\/a>/gs, '');\\n\\n  // 2. Retirer <script>, <style>, commentaires, etc.\\n  cleanedText = cleanedText.replace(/<script[^>]*>.*?<\\\\/script>/gs, '');\\n  cleanedText = cleanedText.replace(/<style[^>]*>.*?<\\\\/style>/gs, '');\\n  cleanedText = cleanedText.replace(/<!--[\\\\s\\\\S]*?-->/g, '');\\n\\n  // 3. Ins√©rer des retours √† la ligne pour certaines balises\\n  cleanedText = cleanedText.replace(/<h[1-6][^>]*>/gi, '\\\\n');\\n  cleanedText = cleanedText.replace(/<\\\\/h[1-6]>/gi, '\\\\n');\\n  cleanedText = cleanedText.replace(/<p[^>]*>/gi, '\\\\n');\\n  cleanedText = cleanedText.replace(/<\\\\/p>/gi, '\\\\n');\\n  cleanedText = cleanedText.replace(/<ul[^>]*>/gi, '\\\\n');\\n  cleanedText = cleanedText.replace(/<\\\\/ul>/gi, '\\\\n');\\n  cleanedText = cleanedText.replace(/<ol[^>]*>/gi, '\\\\n');\\n  cleanedText = cleanedText.replace(/<\\\\/ol>/gi, '\\\\n');\\n  cleanedText = cleanedText.replace(/<li[^>]*>/gi, '- ');\\n  cleanedText = cleanedText.replace(/<\\\\/li>/gi, '\\\\n');\\n\\n  // 4. Supprimer toutes les balises HTML restantes\\n  cleanedText = cleanedText.replace(/<[^>]+>/g, '');\\n\\n  // 5. Supprimer (ou ajuster) les caract√®res sp√©ciaux\\n  cleanedText = cleanedText.replace(/[^\\\\w\\\\s√Ä-√ñ√ò-√∂√∏-√ø]+/g, '');\\n\\n  // 6. Normaliser les espaces multiples et trim\\n  cleanedText = cleanedText.replace(/\\\\s+/g, ' ').trim();\\n\\n  return cleanedText;\\n}\\n\\n// Nettoyage\\nconst result = nettoyerHTML($input.first().json.data);\\n\\n// Retour d'un tableau contenant l'objet final\\nreturn [\\n  {\\n    json: {\\n      cleanedText: result\\n    }\\n  }\\n];\\n\"},\"typeVersion\":2},{\"id\":\"7e457450-42ef-417e-b5f9-3248c9c7c2ae\",\"name\":\"Save Raw Product Info\",\"type\":\"n8n-nodes-base.googleSheets\",\"position\":[240,-320],\"parameters\":{\"columns\":{\"value\":{\"Product Link\":\"={{ $('Extract URL from Text').item.json.url }}\",\"Product Description\":\"={{ $json.cleanedText }}\"},\"schema\":[{\"id\":\"Product Link\",\"type\":\"string\",\"display\":true,\"required\":false,\"displayName\":\"Product Link\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"Product Name\",\"type\":\"string\",\"display\":true,\"required\":false,\"displayName\":\"Product Name\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"Product Price\",\"type\":\"string\",\"display\":true,\"required\":false,\"displayName\":\"Product Price\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"Product Description\",\"type\":\"string\",\"display\":true,\"required\":false,\"displayName\":\"Product Description\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"Product Topic\",\"type\":\"string\",\"display\":true,\"required\":false,\"displayName\":\"Product Topic\",\"defaultMatch\":false,\"canBeUsedToMatch\":true}],\"mappingMode\":\"defineBelow\",\"matchingColumns\":[],\"attemptToConvertTypes\":false,\"convertFieldsToString\":false},\"options\":{},\"operation\":\"append\",\"sheetName\":{\"__rl\":true,\"mode\":\"list\",\"value\":689245338,\"cachedResultUrl\":\"https://docs.google.com/spreadsheets/d/1wa41S888Ya3sqEkBdzYiDq-5FOu_V30BOe-toX_78xQ/edit#gid=689245338\",\"cachedResultName\":\"Products\"},\"documentId\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"1wa41S888Ya3sqEkBdzYiDq-5FOu_V30BOe-toX_78xQ\",\"cachedResultUrl\":\"https://docs.google.com/spreadsheets/d/1wa41S888Ya3sqEkBdzYiDq-5FOu_V30BOe-toX_78xQ/edit?usp=drivesdk\",\"cachedResultName\":\"Product Sales - AI Agent WhatsApp\"}},\"credentials\":{\"googleSheetsOAuth2Api\":{\"id\":\"51us92xkOlrvArhV\",\"name\":\"Google Sheets account\"}},\"typeVersion\":4.5},{\"id\":\"d3dfa439-4056-4ce9-b874-100500967de6\",\"name\":\"OpenAI Model\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\"position\":[320,-40],\"parameters\":{\"model\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"gpt-4o-mini\"},\"options\":{}},\"credentials\":{\"openAiApi\":{\"id\":\"6h3DfVhNPw9I25nO\",\"name\":\"OpenAi account\"}},\"typeVersion\":1.2},{\"id\":\"10217317-f6dd-4890-b05d-197d3d2adb79\",\"name\":\"Short-Term Memory\",\"type\":\"@n8n/n8n-nodes-langchain.memoryBufferWindow\",\"position\":[500,-40],\"parameters\":{\"sessionKey\":\"={{ $('Incoming Message Trigger').item.json.messages[0].id }}\",\"sessionIdType\":\"customKey\",\"contextWindowLength\":50},\"typeVersion\":1.3},{\"id\":\"58ce0f46-fabc-4b6e-97d7-857dc6f1e568\",\"name\":\"Update Product Sheet\",\"type\":\"n8n-nodes-base.googleSheetsTool\",\"position\":[680,-40],\"parameters\":{\"columns\":{\"value\":{\"F&Q\":\"={{ $fromAI(\\\"product_faq\\\", \\\"these are the most common questions users might have about the product, including answers if available\\\") }}\\n\",\"Product Link\":\"={{ $fromAI(\\\"product_url\\\",\\\"this is the website link of the product\\\") }}\",\"Product Name\":\"={{ $fromAI(\\\"product_name\\\",\\\"this is the name of the product\\\") }}\",\"Product Price\":\"={{ $fromAI(\\\"product_price\\\",\\\"this is the price of the product\\\") }}\",\"Product Topic\":\"={{ $fromAI(\\\"product_topic\\\",\\\"this is the topic of the product that specifies what it is for, who it is for and what the key benefits are\\\") }}\"},\"schema\":[{\"id\":\"Product Link\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"Product Link\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"Product Name\",\"type\":\"string\",\"display\":true,\"required\":false,\"displayName\":\"Product Name\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"Product Price\",\"type\":\"string\",\"display\":true,\"required\":false,\"displayName\":\"Product Price\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"Product Description\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"Product Description\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"Product Topic\",\"type\":\"string\",\"display\":true,\"required\":false,\"displayName\":\"Product Topic\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"F&Q\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"F&Q\",\"defaultMatch\":false,\"canBeUsedToMatch\":true}],\"mappingMode\":\"defineBelow\",\"matchingColumns\":[\"Product Link\"],\"attemptToConvertTypes\":false,\"convertFieldsToString\":false},\"options\":{},\"operation\":\"appendOrUpdate\",\"sheetName\":{\"__rl\":true,\"mode\":\"list\",\"value\":689245338,\"cachedResultUrl\":\"https://docs.google.com/spreadsheets/d/1wa41S888Ya3sqEkBdzYiDq-5FOu_V30BOe-toX_78xQ/edit#gid=689245338\",\"cachedResultName\":\"Products\"},\"documentId\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"1wa41S888Ya3sqEkBdzYiDq-5FOu_V30BOe-toX_78xQ\",\"cachedResultUrl\":\"https://docs.google.com/spreadsheets/d/1wa41S888Ya3sqEkBdzYiDq-5FOu_V30BOe-toX_78xQ/edit?usp=drivesdk\",\"cachedResultName\":\"Product Sales - AI Agent WhatsApp\"}},\"credentials\":{\"googleSheetsOAuth2Api\":{\"id\":\"51us92xkOlrvArhV\",\"name\":\"Google Sheets account\"}},\"typeVersion\":4.5},{\"id\":\"020714ae-5668-4fa5-8ba8-f1e476a8060e\",\"name\":\"AI Agent -  Customer Support Agent\",\"type\":\"@n8n/n8n-nodes-langchain.agent\",\"position\":[380,300],\"parameters\":{\"text\":\"={{ $json.messages[0].text.body }}\",\"options\":{\"systemMessage\":\"You are a helpful and intelligent customer support assistant.\\n\\nYou have access to a Google Sheets tool that allows you to read any content from a specific sheet to gather necessary information.\\nNever mention to the user that you accessed Google Sheets to retrieve any data.\\n\\nYour main responsibilities:\\n\\nUnderstand the user‚Äôs request or issue.\\n\\nIf the user is asking about a product, retrieve the relevant product name, price, and details as needed.\\n\\nDetermine whether the product price is a subscription or a one-time payment, based on the description.\\n\\nIf you detect that the user is facing a problem:\\n\\nIdentify and describe the problem clearly.\\n\\nPropose a practical and helpful solution.\\n\\nLog this interaction by adding a new row to the Google Sheet with the following columns:\\n\\nProblem\\n\\nSuggested Solution\\n\\nCategory (e.g., payment, login, access, delivery, technical issue, etc.)\\n\\nBe professional, concise, and empathetic in your responses.\\nAlways aim to resolve the issue or provide the next best action.\"},\"promptType\":\"define\"},\"typeVersion\":1.7},{\"id\":\"53e49985-e1b9-48fd-9ea8-3352a63484e0\",\"name\":\"AI Agent - Enhance Product Details\",\"type\":\"@n8n/n8n-nodes-langchain.agent\",\"position\":[420,-320],\"parameters\":{\"text\":\"=My product description :  {{ $json['Product Description'] }}\\n\\nMy product link : {{ $json['Product Link'] }}\",\"options\":{\"systemMessage\":\"You are a helpful and intelligent assistant.\\n\\nYou receive the text content of a product page.\\n\\nYour tasks are:\\n\\nExtract the product name.\\n\\nExtract the product price, and determine whether it is a subscription or a one-time payment.\\n\\nIdentify the product topic.\\n\\nExtract the most frequently asked questions (FAQs) related to the product.\\n\\nYou have access to a Google Sheets tool that allows you to update specific columns and cells.\\n\\nAlways add the following data to the same row as the product URL in the Google Sheet:\\n\\nProduct Name\\n\\nProduct Price (with subscription/one-time label)\\n\\nProduct Topic\\n\\nFAQs\\n\\nBe accurate, structured, and consistent when filling in the sheet.\\nDo not mention Google Sheets in your responses.\"},\"promptType\":\"define\"},\"typeVersion\":1.8},{\"id\":\"194136b5-872a-492b-882b-d26a2890cbcf\",\"name\":\"OpenAI Model1\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\"position\":[220,560],\"parameters\":{\"model\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"gpt-4o-mini\"},\"options\":{}},\"credentials\":{\"openAiApi\":{\"id\":\"6h3DfVhNPw9I25nO\",\"name\":\"OpenAi account\"}},\"typeVersion\":1.2},{\"id\":\"efc89a9b-3141-4735-adaf-7b9e2b6879ed\",\"name\":\"Conversation Memory\",\"type\":\"@n8n/n8n-nodes-langchain.memoryBufferWindow\",\"position\":[400,560],\"parameters\":{\"sessionKey\":\"={{ $json.messages[0].id }}\",\"sessionIdType\":\"customKey\",\"contextWindowLength\":50},\"typeVersion\":1.3},{\"id\":\"d1a21094-0237-4b17-818c-3af7760b405f\",\"name\":\"Read Product Sheet\",\"type\":\"n8n-nodes-base.googleSheetsTool\",\"position\":[560,560],\"parameters\":{\"options\":{\"dataLocationOnSheet\":{\"values\":{\"readRowsUntil\":\"firstEmptyRow\",\"rangeDefinition\":\"detectAutomatically\"}}},\"sheetName\":{\"__rl\":true,\"mode\":\"list\",\"value\":689245338,\"cachedResultUrl\":\"https://docs.google.com/spreadsheets/d/1wa41S888Ya3sqEkBdzYiDq-5FOu_V30BOe-toX_78xQ/edit#gid=689245338\",\"cachedResultName\":\"Products\"},\"documentId\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"1wa41S888Ya3sqEkBdzYiDq-5FOu_V30BOe-toX_78xQ\",\"cachedResultUrl\":\"https://docs.google.com/spreadsheets/d/1wa41S888Ya3sqEkBdzYiDq-5FOu_V30BOe-toX_78xQ/edit?usp=drivesdk\",\"cachedResultName\":\"Product Sales - AI Agent WhatsApp\"}},\"credentials\":{\"googleSheetsOAuth2Api\":{\"id\":\"51us92xkOlrvArhV\",\"name\":\"Google Sheets account\"}},\"typeVersion\":4.5},{\"id\":\"2c2dcf9b-5578-4bd4-85b6-27621927a0a0\",\"name\":\"Log Customer Issues\",\"type\":\"n8n-nodes-base.googleSheetsTool\",\"position\":[740,560],\"parameters\":{\"columns\":{\"value\":{\"Category\":\"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Category', ``, 'string') }}\",\"Solution\":\"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Solution', ``, 'string') }}\",\"Support Problem\":\"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Support_Problem', ``, 'string') }}\"},\"schema\":[{\"id\":\"Support Problem\",\"type\":\"string\",\"display\":true,\"required\":false,\"displayName\":\"Support Problem\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"Solution\",\"type\":\"string\",\"display\":true,\"required\":false,\"displayName\":\"Solution\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"Category\",\"type\":\"string\",\"display\":true,\"required\":false,\"displayName\":\"Category\",\"defaultMatch\":false,\"canBeUsedToMatch\":true}],\"mappingMode\":\"defineBelow\",\"matchingColumns\":[],\"attemptToConvertTypes\":false,\"convertFieldsToString\":false},\"options\":{},\"operation\":\"append\",\"sheetName\":{\"__rl\":true,\"mode\":\"list\",\"value\":1725207764,\"cachedResultUrl\":\"https://docs.google.com/spreadsheets/d/1wa41S888Ya3sqEkBdzYiDq-5FOu_V30BOe-toX_78xQ/edit#gid=1725207764\",\"cachedResultName\":\"Customer Issues\"},\"documentId\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"1wa41S888Ya3sqEkBdzYiDq-5FOu_V30BOe-toX_78xQ\",\"cachedResultUrl\":\"https://docs.google.com/spreadsheets/d/1wa41S888Ya3sqEkBdzYiDq-5FOu_V30BOe-toX_78xQ/edit?usp=drivesdk\",\"cachedResultName\":\"Product Sales - AI Agent WhatsApp\"}},\"credentials\":{\"googleSheetsOAuth2Api\":{\"id\":\"51us92xkOlrvArhV\",\"name\":\"Google Sheets account\"}},\"typeVersion\":4.5}],\"active\":false,\"pinData\":{},\"settings\":{\"executionOrder\":\"v1\"},\"versionId\":\"2e8ea310-e164-4d5d-ae0b-ade129b07a4a\",\"connections\":{\"OpenAI Model\":{\"ai_languageModel\":[[{\"node\":\"AI Agent - Enhance Product Details\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"OpenAI Model1\":{\"ai_languageModel\":[[{\"node\":\"AI Agent -  Customer Support Agent\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"Fetch HTML Page\":{\"main\":[[{\"node\":\"Clean HTML Content\",\"type\":\"main\",\"index\":0}]]},\"Check If Training\":{\"main\":[[{\"node\":\"Extract URL from Text\",\"type\":\"main\",\"index\":0}],[{\"node\":\"AI Agent -  Customer Support Agent\",\"type\":\"main\",\"index\":0}]]},\"Short-Term Memory\":{\"ai_memory\":[[{\"node\":\"AI Agent - Enhance Product Details\",\"type\":\"ai_memory\",\"index\":0}]]},\"Clean HTML Content\":{\"main\":[[{\"node\":\"Save Raw Product Info\",\"type\":\"main\",\"index\":0}]]},\"Read Product Sheet\":{\"ai_tool\":[[{\"node\":\"AI Agent -  Customer Support Agent\",\"type\":\"ai_tool\",\"index\":0}]]},\"Conversation Memory\":{\"ai_memory\":[[{\"node\":\"AI Agent -  Customer Support Agent\",\"type\":\"ai_memory\",\"index\":0}]]},\"Log Customer Issues\":{\"ai_tool\":[[{\"node\":\"AI Agent -  Customer Support Agent\",\"type\":\"ai_tool\",\"index\":0}]]},\"Update Product Sheet\":{\"ai_tool\":[[{\"node\":\"AI Agent - Enhance Product Details\",\"type\":\"ai_tool\",\"index\":0}]]},\"Extract URL from Text\":{\"main\":[[{\"node\":\"Fetch HTML Page\",\"type\":\"main\",\"index\":0}]]},\"Save Raw Product Info\":{\"main\":[[{\"node\":\"AI Agent - Enhance Product Details\",\"type\":\"main\",\"index\":0}]]},\"WhatsApp Business Cloud\":{\"main\":[[]]},\"Incoming Message Trigger\":{\"main\":[[{\"node\":\"Check If Training\",\"type\":\"main\",\"index\":0}]]},\"AI Agent -  Customer Support Agent\":{\"main\":[[{\"node\":\"WhatsApp Business Cloud\",\"type\":\"main\",\"index\":0}]]},\"AI Agent - Enhance Product Details\":{\"main\":[[{\"node\":\"WhatsApp Business Cloud\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "![Workflow Screenshot](https://www.dr-firas.com/workflow_Automate_Product.png)\n\n# WhatsApp AI Agent: Auto-Train Product Data & Handle Customer Support\n\n## Who Is This For\n\nThis workflow is ideal for **eCommerce founders** , **product managers** , **customer support teams** , and **automation builders** who rely on WhatsApp to manage product information and interact with clients.\n\nIt‚Äôs perfect for businesses that want to **automate product data entry and support responses** directly from WhatsApp messages using GPT-4 and Google Sheets.\n\n## What Problem Does This Workflow Solve\n\n  * **Manual Product Data Entry** : Collecting and organizing product data from links is tedious and error-prone.\n  * **Slow Customer Response Times** : Responding to client questions manually leads to delays and inconsistent support.\n  * **No Logging System for Issues** : Without automation, support issues often go undocumented, making it harder to learn and improve.\n\n\n\n## What This Workflow Does\n\n### Step 1 ‚Äì Incoming Message Detection\n\n  * Listens for incoming messages via WhatsApp.\n  * If the message starts with `train:`, it routes to the product training process.\n  * Otherwise, it routes to the customer support assistant.\n\n\n\n### Step 2 ‚Äì Product Data Training\n\n  * **Extracts URL** from the message using a regex script.\n  * **Fetches HTML content** from the URL.\n  * **Cleans HTML data** to extract readable product description.\n  * **Saves raw data** (URL + description) into Google Sheets.\n  * **Uses GPT-4** to enhance product data:  \n‚Üí Name, price (one-time or subscription), topic, and FAQs.\n  * **Updates the product row** in Google Sheets with structured information.\n\n\n\n### Step 3 ‚Äì Customer Support Flow\n\n  * Analyzes user messages with GPT-4 to understand the request or issue.\n  * Looks up relevant product info in Google Sheets.\n  * Detects potential problems (e.g. payment, login, delivery).\n  * Suggests an appropriate solution.\n  * Logs the problem, solution, and category to the `Customer Issues` sheet.\n  * Sends a response back to the client via WhatsApp.\n\n\n\n### Step 4 ‚Äì Client Response\n\n  * Sends the AI-generated response to the client via WhatsApp.\n  * Keeps the communication fast, clear, and professional.\n\n\n\n## Setup Guide\n\n### Prerequisites\n\n  * **WhatsApp Business API access**\n  * **OpenAI API Key**\n  * **Google Account** with Google Sheets access\n  * A hosted instance of **n8n (Cloud or self-hosted)**\n\n\n\n### Setup Steps\n\n  1. **Import the Workflow** into your n8n instance.\n  2. **Connect your credentials** for WhatsApp, OpenAI, and Google Sheets.\n  3. **Customize Google Sheet IDs and names** as needed.\n  4. **Test** by sending a `train:` message or a regular customer message to WhatsApp.\n  5. **Activate the workflow** to make it live.\n\n\n\n## How to Customize This Workflow\n\n  * **Edit AI prompts** to reflect your product type, language style, or tone.\n  * **Change the trigger keyword** (e.g. from `train:` to `add:` or anything else).\n  * **Add integrations** like Notion, Airtable, or CRM tools.\n  * **Expand the Sheets structure** with more product fields (e.g. stock status, image link).\n  * **Add notifications** to Slack or email after product updates or issue logging.\n\n\n",
  "readme_html": "<!--[--><div data-v-006f9244=\"\"><p><img src=\"https://www.dr-firas.com/workflow_Automate_Product.png\" alt=\"Workflow Screenshot\"></p>\n<h1>WhatsApp AI Agent: Auto-Train Product Data &amp; Handle Customer Support</h1>\n<h2>Who Is This For</h2>\n<p>This workflow is ideal for <strong>eCommerce founders</strong>, <strong>product managers</strong>, <strong>customer support teams</strong>, and <strong>automation builders</strong> who rely on WhatsApp to manage product information and interact with clients.</p>\n<p>It‚Äôs perfect for businesses that want to <strong>automate product data entry and support responses</strong> directly from WhatsApp messages using GPT-4 and Google Sheets.</p>\n<h2>What Problem Does This Workflow Solve</h2>\n<ul>\n<li><strong>Manual Product Data Entry</strong>: Collecting and organizing product data from links is tedious and error-prone.</li>\n<li><strong>Slow Customer Response Times</strong>: Responding to client questions manually leads to delays and inconsistent support.</li>\n<li><strong>No Logging System for Issues</strong>: Without automation, support issues often go undocumented, making it harder to learn and improve.</li>\n</ul>\n<h2>What This Workflow Does</h2>\n<h3>Step 1 ‚Äì Incoming Message Detection</h3>\n<ul>\n<li>Listens for incoming messages via WhatsApp.</li>\n<li>If the message starts with <code>train:</code>, it routes to the product training process.</li>\n<li>Otherwise, it routes to the customer support assistant.</li>\n</ul>\n<h3>Step 2 ‚Äì Product Data Training</h3>\n<ul>\n<li><strong>Extracts URL</strong> from the message using a regex script.</li>\n<li><strong>Fetches HTML content</strong> from the URL.</li>\n<li><strong>Cleans HTML data</strong> to extract readable product description.</li>\n<li><strong>Saves raw data</strong> (URL + description) into Google Sheets.</li>\n<li><strong>Uses GPT-4</strong> to enhance product data:<br>\n‚Üí Name, price (one-time or subscription), topic, and FAQs.</li>\n<li><strong>Updates the product row</strong> in Google Sheets with structured information.</li>\n</ul>\n<h3>Step 3 ‚Äì Customer Support Flow</h3>\n<ul>\n<li>Analyzes user messages with GPT-4 to understand the request or issue.</li>\n<li>Looks up relevant product info in Google Sheets.</li>\n<li>Detects potential problems (e.g. payment, login, delivery).</li>\n<li>Suggests an appropriate solution.</li>\n<li>Logs the problem, solution, and category to the <code>Customer Issues</code> sheet.</li>\n<li>Sends a response back to the client via WhatsApp.</li>\n</ul>\n<h3>Step 4 ‚Äì Client Response</h3>\n<ul>\n<li>Sends the AI-generated response to the client via WhatsApp.</li>\n<li>Keeps the communication fast, clear, and professional.</li>\n</ul>\n<h2>Setup Guide</h2>\n<h3>Prerequisites</h3>\n<ul>\n<li><strong>WhatsApp Business API access</strong></li>\n<li><strong>OpenAI API Key</strong></li>\n<li><strong>Google Account</strong> with Google Sheets access</li>\n<li>A hosted instance of <strong>n8n (Cloud or self-hosted)</strong></li>\n</ul>\n<h3>Setup Steps</h3>\n<ol>\n<li><strong>Import the Workflow</strong> into your n8n instance.</li>\n<li><strong>Connect your credentials</strong> for WhatsApp, OpenAI, and Google Sheets.</li>\n<li><strong>Customize Google Sheet IDs and names</strong> as needed.</li>\n<li><strong>Test</strong> by sending a <code>train:</code> message or a regular customer message to WhatsApp.</li>\n<li><strong>Activate the workflow</strong> to make it live.</li>\n</ol>\n<h2>How to Customize This Workflow</h2>\n<ul>\n<li><strong>Edit AI prompts</strong> to reflect your product type, language style, or tone.</li>\n<li><strong>Change the trigger keyword</strong> (e.g. from <code>train:</code> to <code>add:</code> or anything else).</li>\n<li><strong>Add integrations</strong> like Notion, Airtable, or CRM tools.</li>\n<li><strong>Expand the Sheets structure</strong> with more product fields (e.g. stock status, image link).</li>\n<li><strong>Add notifications</strong> to Slack or email after product updates or issue logging.</li>\n</ul>\n</div><!--]-->"
}