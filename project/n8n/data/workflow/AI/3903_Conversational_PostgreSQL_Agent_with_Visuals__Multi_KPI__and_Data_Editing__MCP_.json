{
  "title": "Conversational PostgreSQL Agent with Visuals, Multi-KPI, and Data Editing (MCP)",
  "url": "https://n8n.io/workflows/3903-conversational-postgresql-agent-with-visuals-multi-kpi-and-data-editing-mcp/",
  "category": "AI",
  "category_url": "https://n8n.io/workflows/categories/ai/?sort=createdAt:desc",
  "author": "hippolyte-hu",
  "publish_date": "Last update 12 days ago",
  "publish_date_absolute": "2025-05-10",
  "content": "",
  "workflow_json": "{\"id\":\"CXe5AJieJbpn6RYE\",\"meta\":{\"instanceId\":\"1fc85153dfc4ea22a8172f0d7347fa9f591f71e2064dc331f7bdc1d7ee422e7a\",\"templateId\":\"3631\",\"templateCredsSetupCompleted\":true},\"name\":\"Build your own PostgreSQL MCP server (visuals capable)\",\"tags\":[],\"nodes\":[{\"id\":\"0c49141e-128c-424e-afdf-ea131b7a3dd8\",\"name\":\"GetTableSchema\",\"type\":\"n8n-nodes-base.postgresTool\",\"position\":[-40,840],\"parameters\":{},\"typeVersion\":2.6},{\"id\":\"8ffeefb9-357c-41bc-8239-0c07c706be97\",\"name\":\"ListTables\",\"type\":\"n8n-nodes-base.postgresTool\",\"position\":[20,980],\"parameters\":{},\"typeVersion\":2.6},{\"id\":\"efcf7ff3-976e-448a-9d47-47a98f3b0fcb\",\"name\":\"When Executed by Another Workflow\",\"type\":\"n8n-nodes-base.executeWorkflowTrigger\",\"position\":[920,820],\"parameters\":{},\"typeVersion\":1.1},{\"id\":\"abd292d7-fc2b-4e98-a474-b50e44d16b6c\",\"name\":\"CreateTableRecords\",\"type\":\"@n8n/n8n-nodes-langchain.toolWorkflow\",\"position\":[160,1020],\"parameters\":{},\"typeVersion\":2.1},{\"id\":\"4a71d42a-99a5-489e-b449-09c3c5081505\",\"name\":\"ReadTableRecord\",\"type\":\"n8n-nodes-base.postgres\",\"position\":[1420,620],\"parameters\":{},\"typeVersion\":2.6,\"alwaysOutputData\":true},{\"id\":\"bdc60aa8-9ab1-4bbd-8b9e-89c968d54043\",\"name\":\"Operation\",\"type\":\"n8n-nodes-base.switch\",\"position\":[1120,820],\"parameters\":{},\"typeVersion\":3.2},{\"id\":\"cdb5b556-3638-4fa5-94c6-bff0c03f6c89\",\"name\":\"UpdateTableRecord\",\"type\":\"n8n-nodes-base.postgres\",\"position\":[1420,1020],\"parameters\":{},\"typeVersion\":2.6},{\"id\":\"9263fc78-321e-4c83-90d3-890dd87d6aed\",\"name\":\"UpdateTableRecords\",\"type\":\"@n8n/n8n-nodes-langchain.toolWorkflow\",\"position\":[320,1040],\"parameters\":{},\"typeVersion\":2.1},{\"id\":\"dd7e28fb-b2c7-4084-bc9b-9aa3e0187682\",\"name\":\"CreateTableRecord\",\"type\":\"n8n-nodes-base.postgres\",\"position\":[1420,820],\"parameters\":{},\"typeVersion\":2.6},{\"id\":\"9cf39ca3-b704-49ce-b6e2-db2703c4acad\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-80,540],\"parameters\":{\"content\":\"\"},\"typeVersion\":1},{\"id\":\"ac3d9b98-8f1e-4abd-972c-1725aac1ad1e\",\"name\":\"PostgreSQL MCP Server\",\"type\":\"@n8n/n8n-nodes-langchain.mcpTrigger\",\"position\":[80,620],\"webhookId\":\"a5fd7047-e31b-4c0d-bd68-c36072c3da0d\",\"parameters\":{},\"typeVersion\":1},{\"id\":\"416a09d5-c327-410d-b951-a2d08402c6fe\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[840,540],\"parameters\":{\"content\":\"\"},\"typeVersion\":1},{\"id\":\"c514c8a8-25b8-474b-8e3d-3a598e15c4ab\",\"name\":\"AI Agent\",\"type\":\"@n8n/n8n-nodes-langchain.agent\",\"position\":[360,1260],\"parameters\":{},\"typeVersion\":1.8},{\"id\":\"294589fe-2dc4-40ea-b4e4-d7c42d1a28e1\",\"name\":\"MCP Client\",\"type\":\"@n8n/n8n-nodes-langchain.mcpClientTool\",\"position\":[640,1560],\"parameters\":{},\"typeVersion\":1},{\"id\":\"c566125c-daac-4b3f-ac2c-19588fd96831\",\"name\":\"Anthropic Chat Model\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatAnthropic\",\"position\":[340,1600],\"parameters\":{},\"typeVersion\":1.3},{\"id\":\"ce46a834-c43c-4d14-b98c-c37084534324\",\"name\":\"Think\",\"type\":\"@n8n/n8n-nodes-langchain.toolThink\",\"position\":[840,1540],\"parameters\":{},\"typeVersion\":1},{\"id\":\"2513b2d7-bcdd-4622-93a1-27608af78894\",\"name\":\"get table details\",\"type\":\"@n8n/n8n-nodes-langchain.toolWorkflow\",\"position\":[620,1040],\"parameters\":{},\"typeVersion\":2.1},{\"id\":\"324503c0-117b-45ec-97dd-7074eb1db22e\",\"name\":\"ReadTableRows\",\"type\":\"@n8n/n8n-nodes-langchain.toolWorkflow\",\"position\":[480,1040],\"parameters\":{},\"typeVersion\":2.1},{\"id\":\"39a88e5b-585e-4caa-8f4a-d7c313dce70e\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-160,1220],\"parameters\":{\"content\":\"\"},\"typeVersion\":1},{\"id\":\"87a1998e-0106-43c2-943f-7b9b6744fd7f\",\"name\":\"Plot tool\",\"type\":\"@n8n/n8n-nodes-langchain.toolWorkflow\",\"position\":[640,840],\"parameters\":{},\"typeVersion\":2.1},{\"id\":\"ed260e47-5ba9-44fd-93b8-1643304da110\",\"name\":\"Simple Memory\",\"type\":\"@n8n/n8n-nodes-langchain.memoryBufferWindow\",\"position\":[500,1600],\"parameters\":{},\"typeVersion\":1.3},{\"id\":\"05a17841-b900-4e5c-bd46-1707892f4a82\",\"name\":\"When chat message received\",\"type\":\"@n8n/n8n-nodes-langchain.chatTrigger\",\"position\":[0,1260],\"webhookId\":\"6b21cb28-f0e4-4f1c-8bba-3170e94b6dec\",\"parameters\":{},\"typeVersion\":1.1}],\"active\":true,\"pinData\":{},\"settings\":{},\"versionId\":\"ff22a4a9-cacc-423b-bc2e-ae822eefb53a\",\"connections\":{\"Think\":{\"ai_tool\":[[{\"node\":\"AI Agent\",\"type\":\"ai_tool\",\"index\":0}]]},\"AI Agent\":{\"main\":[[]]},\"Operation\":{\"main\":[[{\"node\":\"ReadTableRecord\",\"type\":\"main\",\"index\":0}],[{\"node\":\"CreateTableRecord\",\"type\":\"main\",\"index\":0}],[{\"node\":\"UpdateTableRecord\",\"type\":\"main\",\"index\":0}]]},\"Plot tool\":{\"ai_tool\":[[{\"node\":\"PostgreSQL MCP Server\",\"type\":\"ai_tool\",\"index\":0}]]},\"ListTables\":{\"ai_tool\":[[{\"node\":\"PostgreSQL MCP Server\",\"type\":\"ai_tool\",\"index\":0}]]},\"MCP Client\":{\"ai_tool\":[[{\"node\":\"AI Agent\",\"type\":\"ai_tool\",\"index\":0}]]},\"ReadTableRows\":{\"ai_tool\":[[{\"node\":\"PostgreSQL MCP Server\",\"type\":\"ai_tool\",\"index\":0}]]},\"Simple Memory\":{\"ai_memory\":[[{\"node\":\"AI Agent\",\"type\":\"ai_memory\",\"index\":0}]]},\"GetTableSchema\":{\"ai_tool\":[[{\"node\":\"PostgreSQL MCP Server\",\"type\":\"ai_tool\",\"index\":0}]]},\"ReadTableRecord\":{\"main\":[[]]},\"get table details\":{\"ai_tool\":[[{\"node\":\"PostgreSQL MCP Server\",\"type\":\"ai_tool\",\"index\":0}]]},\"CreateTableRecords\":{\"ai_tool\":[[{\"node\":\"PostgreSQL MCP Server\",\"type\":\"ai_tool\",\"index\":0}]]},\"UpdateTableRecords\":{\"ai_tool\":[[{\"node\":\"PostgreSQL MCP Server\",\"type\":\"ai_tool\",\"index\":0}]]},\"Anthropic Chat Model\":{\"ai_languageModel\":[[{\"node\":\"AI Agent\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"When chat message received\":{\"main\":[[{\"node\":\"AI Agent\",\"type\":\"main\",\"index\":0}]]},\"When Executed by Another Workflow\":{\"main\":[[{\"node\":\"Operation\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "![ChatGPT Image 6 mai 2025, 17_58_38.png](https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/Chat_GPT_Image_6_mai_2025_17_58_38_02ccd37ac0.png)\n\nAsk your PostgreSQL database complex questions and receive clear summaries, charts, and even update or insert data â€” all through one smart agent powered by n8nâ€™s Model Context Protocol (MCP).\n\nSupports:\n\n  * Multi-KPI insights in one prompt\n  * Auto-generated QuickChart bar/pie charts\n  * Natural-language inserts and updates\n  * Markdown-friendly output for dashboards\n\n\n\n* * *\n\n## ğŸš€ Why This Version Stands Out\n\nThis version goes beyond reporting:\n\n  * ğŸ“ˆ Auto-generates charts (QuickChart)\n  * ğŸ§® Answers multiple KPIs in one message\n  * âœï¸ Add and update records securely\n  * ğŸ§  Uses up to 30 planned steps for smart reasoning\n\n\n\nğŸ’° Estimated cost per run: ~$0.02\n\n* * *\n\n## ğŸ’¬ Example Output\n\n## ![withvisual_sql.png](https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/withvisual_sql_928f685304.png)\n\n## ğŸ§° Key Components\n\n  * MCP Server Trigger â†’ Receives natural queries\n  * Claude 3.5 Haiku â†’ Plans, reasons, splits tasks\n  * DeepSeek â†’ SQL and QuickChart generation\n  * checkdatabase subflow â†’ Validates SQL\n  * Plot Tool â†’ Converts data to QuickChart URLs\n  * Insert/Update nodes â†’ Edits PostgreSQL records\n  * Markdown Formatter â†’ Combines output into readable message\n\n\n\n* * *\n\n## ğŸ¤– Model Configuration Notes\n\nThis workflow uses two models:\n\n  1. **Claude 3.5 Haiku (Anthropic)**  \nUsed as the MCP agent for reasoning, planning, and tool calling. Claude is the native model for MCP and delivers reliable results in fewer steps.\n\n  2. **DeepSeek**  \nUsed in:\n\n\n\n  * `checkdatabase` for SQL generation\n  * `Plot Tool` for QuickChart JSON generation\n\n\n\nğŸ§  All models are modular â€” you can plug in OpenAI, Gemini, or Mistral if desired.\n\n* * *\n\n## ğŸ” Security by Design\n\n  * No raw SQL from user input\n  * Fully parameterized queries\n  * Structured tool calling with validation\n  * Safe output format (text + chart links)\n\n\n\n* * *\n\n## ğŸ§ª Try This Prompt\n\n> â€œShow me top 5 products by revenue, revenue per month chart, and best customers.â€\n\nExpected output:\n\n  * 3 KPIs\n  * Multiple SQL queries\n  * 2â€“3 QuickChart links\n  * Markdown summary for dashboard/Slack\n\n\n\n* * *\n\n## ğŸ›  How to Use\n\n  1. Import:\n\n     * `Build_your_own_PostgreSQL_MCP_server__visuals_capable_.json`\n     * `checkdatabase.json`\n     * `Plot_tool.json`\n  2. Create your **PostgreSQL credential** under â€œCredentialsâ€ in n8n:\n\n     * Must match the name used in the workflow (e.g., `Postgres account 3`)\n  3. Assign AI models:\n\n     * Claude 3.5 Haiku â†’ MCP agent (`Claude 3.5 MCP Agent`)\n     * DeepSeek â†’ LLM nodes inside `checkdatabase` and `Plot Tool`\n  4. Trigger the workflow using the URL from the **MCP Server Trigger** node  \n(e.g., in a chatbot, HTTP request, or Webhook UI)\n\n\n\n\n* * *\n\n## ğŸ“¦ End-User Setup Guide\n\nIf you're using this template for the first time, follow these exact steps:\n\n  1. Go to your n8n dashboard and import all three workflows (main + subflows)\n  2. Create a PostgreSQL credential using your host, database, user, and password\n  3. Go to the Claude and DeepSeek nodes, and connect them to your account(s)\n  4. Use the Webhook URL in the `MCP Server Trigger` to connect your chatbot or frontend\n  5. Send a prompt like:  \nâ€œShow me revenue per month, top 5 products, and a chart of best customers.â€\n\n\n\nOptional:\n\n  * You can increase the MCP Agentâ€™s `MaxIterations` to go deeper (default is 30)\n  * You can use Switch nodes to limit access to certain tables or actions\n  * Insert/Update nodes are already included and can be safely enabled\n\n\n\nâœ… Once this is done, your AI assistant will:\n\n  * Read from your database\n  * Visualize data via QuickChart\n  * Insert or update rows\n  * Respond in clear, markdown-formatted summaries\n\n\n\n* * *\n\n## ğŸ”— More Templates by the Same Creator\n\n  1. [PostgreSQL Conversational Agent with Claude & DeepSeek (Multi-KPI, Secure)](https://n8n.io/workflows/3892-postgresql-conversational-agent-with-claude-and-deepseek-multi-kpi-secure/)\n\n  2. [Conversing with Data: Transforming Text into SQL Queries and Visual Curves](https://n8n.io/workflows/3497-conversing-with-data-transforming-text-into-sql-queries-and-visual-curves/)\n\n  3. [Customer Feedback Analysis with AI, QuickChart & HTML Report Generator](https://n8n.io/workflows/3642-customer-feedback-analysis-with-ai-quickchart-and-html-report-generator/)\n\n\n\n",
  "readme_html": "<!--[--><div data-v-859c7806=\"\"><p><img src=\"https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/Chat_GPT_Image_6_mai_2025_17_58_38_02ccd37ac0.png\" alt=\"ChatGPT Image 6 mai 2025, 17_58_38.png\"></p>\n<p>Ask your PostgreSQL database complex questions and receive clear summaries, charts, and even update or insert data â€” all through one smart agent powered by n8nâ€™s Model Context Protocol (MCP).</p>\n<p>Supports:</p>\n<ul>\n<li>Multi-KPI insights in one prompt</li>\n<li>Auto-generated QuickChart bar/pie charts</li>\n<li>Natural-language inserts and updates</li>\n<li>Markdown-friendly output for dashboards</li>\n</ul>\n<hr>\n<h2>ğŸš€ Why This Version Stands Out</h2>\n<p>This version goes beyond reporting:</p>\n<ul>\n<li>ğŸ“ˆ Auto-generates charts (QuickChart)</li>\n<li>ğŸ§® Answers multiple KPIs in one message</li>\n<li>âœï¸ Add and update records securely</li>\n<li>ğŸ§  Uses up to 30 planned steps for smart reasoning</li>\n</ul>\n<p>ğŸ’° Estimated cost per run: ~$0.02</p>\n<hr>\n<h2>ğŸ’¬ Example Output</h2>\n<h2><img src=\"https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/withvisual_sql_928f685304.png\" alt=\"withvisual_sql.png\"></h2>\n<h2>ğŸ§° Key Components</h2>\n<ul>\n<li>MCP Server Trigger â†’ Receives natural queries</li>\n<li>Claude 3.5 Haiku â†’ Plans, reasons, splits tasks</li>\n<li>DeepSeek â†’ SQL and QuickChart generation</li>\n<li>checkdatabase subflow â†’ Validates SQL</li>\n<li>Plot Tool â†’ Converts data to QuickChart URLs</li>\n<li>Insert/Update nodes â†’ Edits PostgreSQL records</li>\n<li>Markdown Formatter â†’ Combines output into readable message</li>\n</ul>\n<hr>\n<h2>ğŸ¤– Model Configuration Notes</h2>\n<p>This workflow uses two models:</p>\n<ol>\n<li>\n<p><strong>Claude 3.5 Haiku (Anthropic)</strong><br>\nUsed as the MCP agent for reasoning, planning, and tool calling. Claude is the native model for MCP and delivers reliable results in fewer steps.</p>\n</li>\n<li>\n<p><strong>DeepSeek</strong><br>\nUsed in:</p>\n</li>\n</ol>\n<ul>\n<li><code>checkdatabase</code> for SQL generation</li>\n<li><code>Plot Tool</code> for QuickChart JSON generation</li>\n</ul>\n<p>ğŸ§  All models are modular â€” you can plug in OpenAI, Gemini, or Mistral if desired.</p>\n<hr>\n<h2>ğŸ” Security by Design</h2>\n<ul>\n<li>No raw SQL from user input</li>\n<li>Fully parameterized queries</li>\n<li>Structured tool calling with validation</li>\n<li>Safe output format (text + chart links)</li>\n</ul>\n<hr>\n<h2>ğŸ§ª Try This Prompt</h2>\n<blockquote>\n<p>â€œShow me top 5 products by revenue, revenue per month chart, and best customers.â€</p>\n</blockquote>\n<p>Expected output:</p>\n<ul>\n<li>3 KPIs</li>\n<li>Multiple SQL queries</li>\n<li>2â€“3 QuickChart links</li>\n<li>Markdown summary for dashboard/Slack</li>\n</ul>\n<hr>\n<h2>ğŸ›  How to Use</h2>\n<ol>\n<li>\n<p>Import:</p>\n<ul>\n<li><code>Build_your_own_PostgreSQL_MCP_server__visuals_capable_.json</code></li>\n<li><code>checkdatabase.json</code></li>\n<li><code>Plot_tool.json</code></li>\n</ul>\n</li>\n<li>\n<p>Create your <strong>PostgreSQL credential</strong> under â€œCredentialsâ€ in n8n:</p>\n<ul>\n<li>Must match the name used in the workflow (e.g., <code>Postgres account 3</code>)</li>\n</ul>\n</li>\n<li>\n<p>Assign AI models:</p>\n<ul>\n<li>Claude 3.5 Haiku â†’ MCP agent (<code>Claude 3.5 MCP Agent</code>)</li>\n<li>DeepSeek â†’ LLM nodes inside <code>checkdatabase</code> and <code>Plot Tool</code></li>\n</ul>\n</li>\n<li>\n<p>Trigger the workflow using the URL from the <strong>MCP Server Trigger</strong> node<br>\n(e.g., in a chatbot, HTTP request, or Webhook UI)</p>\n</li>\n</ol>\n<hr>\n<h2>ğŸ“¦ End-User Setup Guide</h2>\n<p>If you're using this template for the first time, follow these exact steps:</p>\n<ol>\n<li>Go to your n8n dashboard and import all three workflows (main + subflows)</li>\n<li>Create a PostgreSQL credential using your host, database, user, and password</li>\n<li>Go to the Claude and DeepSeek nodes, and connect them to your account(s)</li>\n<li>Use the Webhook URL in the <code>MCP Server Trigger</code> to connect your chatbot or frontend</li>\n<li>Send a prompt like:<br>\nâ€œShow me revenue per month, top 5 products, and a chart of best customers.â€</li>\n</ol>\n<p>Optional:</p>\n<ul>\n<li>You can increase the MCP Agentâ€™s <code>MaxIterations</code> to go deeper (default is 30)</li>\n<li>You can use Switch nodes to limit access to certain tables or actions</li>\n<li>Insert/Update nodes are already included and can be safely enabled</li>\n</ul>\n<p>âœ… Once this is done, your AI assistant will:</p>\n<ul>\n<li>Read from your database</li>\n<li>Visualize data via QuickChart</li>\n<li>Insert or update rows</li>\n<li>Respond in clear, markdown-formatted summaries</li>\n</ul>\n<hr>\n<h2>ğŸ”— More Templates by the Same Creator</h2>\n<ol>\n<li>\n<p><a href=\"https://n8n.io/workflows/3892-postgresql-conversational-agent-with-claude-and-deepseek-multi-kpi-secure/\" rel=\"ugc nofollow\" target=\"_blank\">PostgreSQL Conversational Agent with Claude &amp; DeepSeek (Multi-KPI, Secure)</a></p>\n</li>\n<li>\n<p><a href=\"https://n8n.io/workflows/3497-conversing-with-data-transforming-text-into-sql-queries-and-visual-curves/\" rel=\"ugc nofollow\" target=\"_blank\">Conversing with Data: Transforming Text into SQL Queries and Visual Curves</a></p>\n</li>\n<li>\n<p><a href=\"https://n8n.io/workflows/3642-customer-feedback-analysis-with-ai-quickchart-and-html-report-generator/\" rel=\"ugc nofollow\" target=\"_blank\">Customer Feedback Analysis with AI, QuickChart &amp; HTML Report Generator</a></p>\n</li>\n</ol>\n</div><!--]-->",
  "readme_zh": "![ChatGPT å›¾ç‰‡ 2025å¹´5æœˆ6æ—¥ 17:58:38.png](https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/Chat_GPT_Image_6_mai_2025_17_58_38_02ccd37ac0.png)\n\né€šè¿‡n8nçš„æ¨¡å‹ä¸Šä¸‹æ–‡åè®®ï¼ˆMCPï¼‰é©±åŠ¨çš„æ™ºèƒ½ä»£ç†ï¼Œå‘æ‚¨çš„PostgreSQLæ•°æ®åº“æå‡ºå¤æ‚é—®é¢˜ï¼Œå¹¶è·å–æ¸…æ™°çš„æ‘˜è¦ã€å›¾è¡¨ï¼Œç”šè‡³æ›´æ–°æˆ–æ’å…¥æ•°æ®â€”â€”ä¸€åˆ‡å°½åœ¨æŒæ¡ã€‚\n\næ”¯æŒåŠŸèƒ½ï¼š\n\n  * å•æ¬¡æé—®è·å–å¤šç»´åº¦KPIæ´å¯Ÿ\n  * è‡ªåŠ¨ç”ŸæˆQuickChartæ¡å½¢å›¾/é¥¼å›¾\n  * è‡ªç„¶è¯­è¨€å¼æ•°æ®æ’å…¥ä¸æ›´æ–°\n  * çœ‹æ¿å‹å¥½çš„Markdownæ ¼å¼è¾“å‡º",
  "title_zh": "æ”¯æŒå¯è§†åŒ–ã€å¤šå…³é”®ç»©æ•ˆæŒ‡æ ‡åŠæ•°æ®ç¼–è¾‘çš„PostgreSQLå¯¹è¯ä»£ç†ï¼ˆMCPï¼‰",
  "publish_date_zh": "ä¸Šæ¬¡æ›´æ–°äº12å¤©å‰",
  "workflow_json_zh": "{\"id\":\"CXe5AJieJbpn6RYE\",\"meta\":{\"instanceId\":\"1fc85153dfc4ea22a8172f0d7347fa9f591f71e2064dc331f7bdc1d7ee422e7a\",\"templateId\":\"3631\",\"templateCredsSetupCompleted\":true},\"name\":\"Build your own PostgreSQL MCP server (visuals capable)\",\"tags\":[],\"nodes\":[{\"id\":\"0c49141e-128c-424e-afdf-ea131b7a3dd8\",\"name\":\"GetTableSchema\",\"type\":\"n8n-nodes-base.postgresTool\",\"position\":[-40,840],\"parameters\":{},\"typeVersion\":2.6},{\"id\":\"8ffeefb9-357c-41bc-8239-0c07c706be97\",\"name\":\"ListTables\",\"type\":\"n8n-nodes-base.postgresTool\",\"position\":[20,980],\"parameters\":{},\"typeVersion\":2.6},{\"id\":\"efcf7ff3-976e-448a-9d47-47a98f3b0fcb\",\"name\":\"When Executed by Another Workflow\",\"type\":\"n8n-nodes-base.executeWorkflowTrigger\",\"position\":[920,820],\"parameters\":{},\"typeVersion\":1.1},{\"id\":\"abd292d7-fc2b-4e98-a474-b50e44d16b6c\",\"name\":\"CreateTableRecords\",\"type\":\"@n8n/n8n-nodes-langchain.toolWorkflow\",\"position\":[160,1020],\"parameters\":{},\"typeVersion\":2.1},{\"id\":\"4a71d42a-99a5-489e-b449-09c3c5081505\",\"name\":\"ReadTableRecord\",\"type\":\"n8n-nodes-base.postgres\",\"position\":[1420,620],\"parameters\":{},\"typeVersion\":2.6,\"alwaysOutputData\":true},{\"id\":\"bdc60aa8-9ab1-4bbd-8b9e-89c968d54043\",\"name\":\"Operation\",\"type\":\"n8n-nodes-base.switch\",\"position\":[1120,820],\"parameters\":{},\"typeVersion\":3.2},{\"id\":\"cdb5b556-3638-4fa5-94c6-bff0c03f6c89\",\"name\":\"UpdateTableRecord\",\"type\":\"n8n-nodes-base.postgres\",\"position\":[1420,1020],\"parameters\":{},\"typeVersion\":2.6},{\"id\":\"9263fc78-321e-4c83-90d3-890dd87d6aed\",\"name\":\"UpdateTableRecords\",\"type\":\"@n8n/n8n-nodes-langchain.toolWorkflow\",\"position\":[320,1040],\"parameters\":{},\"typeVersion\":2.1},{\"id\":\"dd7e28fb-b2c7-4084-bc9b-9aa3e0187682\",\"name\":\"CreateTableRecord\",\"type\":\"n8n-nodes-base.postgres\",\"position\":[1420,820],\"parameters\":{},\"typeVersion\":2.6},{\"id\":\"9cf39ca3-b704-49ce-b6e2-db2703c4acad\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-80,540],\"parameters\":{\"content\":\"\"},\"typeVersion\":1},{\"id\":\"ac3d9b98-8f1e-4abd-972c-1725aac1ad1e\",\"name\":\"PostgreSQL MCP Server\",\"type\":\"@n8n/n8n-nodes-langchain.mcpTrigger\",\"position\":[80,620],\"webhookId\":\"a5fd7047-e31b-4c0d-bd68-c36072c3da0d\",\"parameters\":{},\"typeVersion\":1},{\"id\":\"416a09d5-c327-410d-b951-a2d08402c6fe\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[840,540],\"parameters\":{\"content\":\"\"},\"typeVersion\":1},{\"id\":\"c514c8a8-25b8-474b-8e3d-3a598e15c4ab\",\"name\":\"AI Agent\",\"type\":\"@n8n/n8n-nodes-langchain.agent\",\"position\":[360,1260],\"parameters\":{},\"typeVersion\":1.8},{\"id\":\"294589fe-2dc4-40ea-b4e4-d7c42d1a28e1\",\"name\":\"MCP Client\",\"type\":\"@n8n/n8n-nodes-langchain.mcpClientTool\",\"position\":[640,1560],\"parameters\":{},\"typeVersion\":1},{\"id\":\"c566125c-daac-4b3f-ac2c-19588fd96831\",\"name\":\"Anthropic Chat Model\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatAnthropic\",\"position\":[340,1600],\"parameters\":{},\"typeVersion\":1.3},{\"id\":\"ce46a834-c43c-4d14-b98c-c37084534324\",\"name\":\"Think\",\"type\":\"@n8n/n8n-nodes-langchain.toolThink\",\"position\":[840,1540],\"parameters\":{},\"typeVersion\":1},{\"id\":\"2513b2d7-bcdd-4622-93a1-27608af78894\",\"name\":\"get table details\",\"type\":\"@n8n/n8n-nodes-langchain.toolWorkflow\",\"position\":[620,1040],\"parameters\":{},\"typeVersion\":2.1},{\"id\":\"324503c0-117b-45ec-97dd-7074eb1db22e\",\"name\":\"ReadTableRows\",\"type\":\"@n8n/n8n-nodes-langchain.toolWorkflow\",\"position\":[480,1040],\"parameters\":{},\"typeVersion\":2.1},{\"id\":\"39a88e5b-585e-4caa-8f4a-d7c313dce70e\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-160,1220],\"parameters\":{\"content\":\"\"},\"typeVersion\":1},{\"id\":\"87a1998e-0106-43c2-943f-7b9b6744fd7f\",\"name\":\"Plot tool\",\"type\":\"@n8n/n8n-nodes-langchain.toolWorkflow\",\"position\":[640,840],\"parameters\":{},\"typeVersion\":2.1},{\"id\":\"ed260e47-5ba9-44fd-93b8-1643304da110\",\"name\":\"Simple Memory\",\"type\":\"@n8n/n8n-nodes-langchain.memoryBufferWindow\",\"position\":[500,1600],\"parameters\":{},\"typeVersion\":1.3},{\"id\":\"05a17841-b900-4e5c-bd46-1707892f4a82\",\"name\":\"When chat message received\",\"type\":\"@n8n/n8n-nodes-langchain.chatTrigger\",\"position\":[0,1260],\"webhookId\":\"6b21cb28-f0e4-4f1c-8bba-3170e94b6dec\",\"parameters\":{},\"typeVersion\":1.1}],\"active\":true,\"pinData\":{},\"settings\":{},\"versionId\":\"ff22a4a9-cacc-423b-bc2e-ae822eefb53a\",\"connections\":{\"Think\":{\"ai_tool\":[[{\"node\":\"AI Agent\",\"type\":\"ai_tool\",\"index\":0}]]},\"AI Agent\":{\"main\":[[]]},\"Operation\":{\"main\":[[{\"node\":\"ReadTableRecord\",\"type\":\"main\",\"index\":0}],[{\"node\":\"CreateTableRecord\",\"type\":\"main\",\"index\":0}],[{\"node\":\"UpdateTableRecord\",\"type\":\"main\",\"index\":0}]]},\"Plot tool\":{\"ai_tool\":[[{\"node\":\"PostgreSQL MCP Server\",\"type\":\"ai_tool\",\"index\":0}]]},\"ListTables\":{\"ai_tool\":[[{\"node\":\"PostgreSQL MCP Server\",\"type\":\"ai_tool\",\"index\":0}]]},\"MCP Client\":{\"ai_tool\":[[{\"node\":\"AI Agent\",\"type\":\"ai_tool\",\"index\":0}]]},\"ReadTableRows\":{\"ai_tool\":[[{\"node\":\"PostgreSQL MCP Server\",\"type\":\"ai_tool\",\"index\":0}]]},\"Simple Memory\":{\"ai_memory\":[[{\"node\":\"AI Agent\",\"type\":\"ai_memory\",\"index\":0}]]},\"GetTableSchema\":{\"ai_tool\":[[{\"node\":\"PostgreSQL MCP Server\",\"type\":\"ai_tool\",\"index\":0}]]},\"ReadTableRecord\":{\"main\":[[]]},\"get table details\":{\"ai_tool\":[[{\"node\":\"PostgreSQL MCP Server\",\"type\":\"ai_tool\",\"index\":0}]]},\"CreateTableRecords\":{\"ai_tool\":[[{\"node\":\"PostgreSQL MCP Server\",\"type\":\"ai_tool\",\"index\":0}]]},\"UpdateTableRecords\":{\"ai_tool\":[[{\"node\":\"PostgreSQL MCP Server\",\"type\":\"ai_tool\",\"index\":0}]]},\"Anthropic Chat Model\":{\"ai_languageModel\":[[{\"node\":\"AI Agent\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"When chat message received\":{\"main\":[[{\"node\":\"AI Agent\",\"type\":\"main\",\"index\":0}]]},\"When Executed by Another Workflow\":{\"main\":[[{\"node\":\"Operation\",\"type\":\"main\",\"index\":0}]]}}}"
}