{
  "title": "Wix Chat Auto-Responder with OpenAI GPT and Email Fallback",
  "url": "https://n8n.io/workflows/3925-wix-chat-auto-responder-with-openai-gpt-and-email-fallback/",
  "category": "AI",
  "category_url": "https://n8n.io/workflows/categories/ai/?sort=createdAt:desc",
  "author": "Ryan McMahan",
  "publish_date": "Last update 5 days ago",
  "publish_date_absolute": "2025-05-17",
  "content": "",
  "workflow_json": "{\"id\":\"eCvZmsWQN1hQfRBb\",\"meta\":{\"instanceId\":\"c60cbb8905d8f1b1d2fddadadda01bad0ee1c76eb7857527efe1945effe9e986\",\"templateId\":\"2786\",\"templateCredsSetupCompleted\":true},\"name\":\"listing\",\"tags\":[],\"nodes\":[{\"id\":\"f26c6e6c-87d2-4ed9-8bf4-2c660e7f26ab\",\"name\":\"Webhook\",\"type\":\"n8n-nodes-base.webhook\",\"position\":[-140,220],\"webhookId\":\"3a1a5dd3-35ff-4d9d-8c75-3483b608f70a\",\"parameters\":{},\"typeVersion\":2},{\"id\":\"0fdf2349-8eb5-457f-8022-861461e68d6c\",\"name\":\"HTTP Request2\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[500,80],\"parameters\":{},\"typeVersion\":4.2},{\"id\":\"e4e275d9-c78b-4d06-b83b-f40816aa4390\",\"name\":\"Execute Workflow\",\"type\":\"n8n-nodes-base.executeWorkflow\",\"position\":[60,220],\"parameters\":{},\"typeVersion\":1.2},{\"id\":\"d214324f-d4a0-4377-bcf4-eea3368c76f5\",\"name\":\"Send Email\",\"type\":\"n8n-nodes-base.emailSendTool\",\"position\":[1500,140],\"webhookId\":\"162bea28-f4a1-45af-86d8-92fa01abbcf5\",\"parameters\":{},\"typeVersion\":2.1},{\"id\":\"fa1645f2-0dcb-4429-af4d-4f75eca9f15c\",\"name\":\"If\",\"type\":\"n8n-nodes-base.if\",\"position\":[240,220],\"parameters\":{},\"typeVersion\":2.2},{\"id\":\"569359a5-bf87-4405-8d3c-7736f4cd26d6\",\"name\":\"HTTP Request3\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[500,360],\"parameters\":{},\"typeVersion\":4.2},{\"id\":\"a8eec80a-5ff4-441c-aa78-9d56991d84aa\",\"name\":\"AI Agent1\",\"type\":\"@n8n/n8n-nodes-langchain.agent\",\"position\":[1180,480],\"parameters\":{},\"typeVersion\":1.6},{\"id\":\"a73963b3-b699-4dc9-88ec-db77b4892c59\",\"name\":\"HTTP Request4\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[720,480],\"parameters\":{},\"typeVersion\":4.2},{\"id\":\"0deadef7-17d0-4dd9-8db6-8077b57d599f\",\"name\":\"Code\",\"type\":\"n8n-nodes-base.code\",\"position\":[860,480],\"parameters\":{},\"typeVersion\":2},{\"id\":\"ce592648-5123-4007-b11b-d7579236ea1d\",\"name\":\"If1\",\"type\":\"n8n-nodes-base.if\",\"position\":[1000,480],\"parameters\":{},\"typeVersion\":2.2},{\"id\":\"62ac1689-62d2-4d81-b856-c61e839008a8\",\"name\":\"OpenAI Chat Model1\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\"position\":[1080,700],\"parameters\":{},\"typeVersion\":1.2},{\"id\":\"e660e054-75bb-473e-9bf2-e998d77e76b9\",\"name\":\"Loop Over Items\",\"type\":\"n8n-nodes-base.splitInBatches\",\"position\":[1860,480],\"parameters\":{},\"typeVersion\":3},{\"id\":\"00d462aa-3b51-45f1-ad4a-7058e2a1a48f\",\"name\":\"HTTP Request6\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[2140,500],\"parameters\":{},\"executeOnce\":false,\"typeVersion\":4.2,\"alwaysOutputData\":false},{\"id\":\"f2a3cf5e-ae3c-42b8-8ea5-2173d35cd14e\",\"name\":\"Code5\",\"type\":\"n8n-nodes-base.code\",\"position\":[1620,480],\"parameters\":{},\"typeVersion\":2},{\"id\":\"6f571403-53a7-4dee-a5f6-96e5af79a5b7\",\"name\":\"Window Buffer Memory1\",\"type\":\"@n8n/n8n-nodes-langchain.memoryBufferWindow\",\"position\":[1260,700],\"parameters\":{},\"typeVersion\":1.3},{\"id\":\"d06c28be-0752-4f28-b5bb-5090a63f0a60\",\"name\":\"End chat\",\"type\":\"n8n-nodes-base.noOp\",\"position\":[1240,320],\"parameters\":{},\"typeVersion\":1},{\"id\":\"9c1acb49-9578-4a45-a440-a261ec2a6cfe\",\"name\":\"Window Buffer Memory\",\"type\":\"@n8n/n8n-nodes-langchain.memoryBufferWindow\",\"position\":[1360,120],\"parameters\":{},\"typeVersion\":1.2},{\"id\":\"33b3dfce-fe11-4e0f-b9db-de391ae128b7\",\"name\":\"AI Agent\",\"type\":\"@n8n/n8n-nodes-langchain.agent\",\"position\":[1320,-100],\"parameters\":{},\"typeVersion\":1.6},{\"id\":\"3e26c97c-7ed9-4824-be8b-1c6fc907f5ef\",\"name\":\"HTTP Request5\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[760,-20],\"parameters\":{},\"typeVersion\":4.2},{\"id\":\"92ce1d64-93b5-489b-bd83-875f4245b773\",\"name\":\"Code1\",\"type\":\"n8n-nodes-base.code\",\"position\":[900,-20],\"parameters\":{},\"typeVersion\":2},{\"id\":\"e3a83686-a1b7-4440-b181-f9500b4b357b\",\"name\":\"If2\",\"type\":\"n8n-nodes-base.if\",\"position\":[1160,-100],\"parameters\":{},\"typeVersion\":2.2},{\"id\":\"033f67e0-b03a-4cbc-ab76-b71cb7b1cfc0\",\"name\":\"Human reponse within last hour, END1\",\"type\":\"n8n-nodes-base.noOp\",\"position\":[1400,-280],\"parameters\":{},\"typeVersion\":1},{\"id\":\"69a3e06d-8745-410a-8fec-e6ee4f54ca24\",\"name\":\"OpenAI Chat Model2\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\"position\":[1200,120],\"parameters\":{},\"typeVersion\":1.2},{\"id\":\"5f543d24-e9ab-4145-9cd2-863a67c7f7b0\",\"name\":\"Loop Over Items1\",\"type\":\"n8n-nodes-base.splitInBatches\",\"position\":[1980,-100],\"parameters\":{},\"typeVersion\":3},{\"id\":\"bf7658e4-5748-4890-8e16-3a4788980ecf\",\"name\":\"HTTP Request\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[2260,-80],\"parameters\":{},\"executeOnce\":false,\"typeVersion\":4.2,\"alwaysOutputData\":false},{\"id\":\"584c38e8-75e7-4401-a3ec-27a101fd9bed\",\"name\":\"Code6\",\"type\":\"n8n-nodes-base.code\",\"position\":[1740,-100],\"parameters\":{},\"typeVersion\":2},{\"id\":\"616168c3-acc8-44cd-be36-45680a8a0b56\",\"name\":\"Send Email1\",\"type\":\"n8n-nodes-base.emailSendTool\",\"position\":[1420,700],\"webhookId\":\"db8291b4-f3d9-4444-afe4-5198ce7aaac3\",\"parameters\":{},\"typeVersion\":2.1},{\"id\":\"8cb33438-0343-400a-b3f3-91c276127ce1\",\"name\":\"HTTP Request1\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[140,-220],\"parameters\":{},\"typeVersion\":4.2},{\"id\":\"1264ace4-0489-418a-9c53-5283cc0eb228\",\"name\":\"When Executed by Another Workflow\",\"type\":\"n8n-nodes-base.executeWorkflowTrigger\",\"position\":[-120,-220],\"parameters\":{},\"typeVersion\":1.1},{\"id\":\"a937ffcb-0d2f-40f6-90a6-9fcc41d68eea\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-240,-420],\"parameters\":{\"content\":\"\"},\"typeVersion\":1},{\"id\":\"005e1b8a-c6b9-4fd8-a8f1-263556d939a3\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-220,540],\"parameters\":{\"content\":\"\"},\"typeVersion\":1},{\"id\":\"0650d044-a4fa-4176-88ff-bfff8f55ef1d\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[960,940],\"parameters\":{\"content\":\"\"},\"typeVersion\":1}],\"active\":false,\"pinData\":{},\"settings\":{\"callerPolicy\":\"workflowsFromSameOwner\",\"executionOrder\":\"v1\"},\"versionId\":\"35fc688e-cb46-4c1f-a88f-22410404175b\",\"connections\":{\"If\":{\"main\":[[{\"node\":\"HTTP Request2\",\"type\":\"main\",\"index\":0}],[{\"node\":\"HTTP Request3\",\"type\":\"main\",\"index\":0}]]},\"If1\":{\"main\":[[{\"node\":\"End chat\",\"type\":\"main\",\"index\":0}],[{\"node\":\"AI Agent1\",\"type\":\"main\",\"index\":0}]]},\"If2\":{\"main\":[[{\"node\":\"Human reponse within last hour, END1\",\"type\":\"main\",\"index\":0}],[{\"node\":\"AI Agent\",\"type\":\"main\",\"index\":0}]]},\"Code\":{\"main\":[[{\"node\":\"If1\",\"type\":\"main\",\"index\":0}]]},\"Code1\":{\"main\":[[{\"node\":\"If2\",\"type\":\"main\",\"index\":0}]]},\"Code5\":{\"main\":[[{\"node\":\"Loop Over Items\",\"type\":\"main\",\"index\":0}]]},\"Code6\":{\"main\":[[{\"node\":\"Loop Over Items1\",\"type\":\"main\",\"index\":0}]]},\"Webhook\":{\"main\":[[{\"node\":\"Execute Workflow\",\"type\":\"main\",\"index\":0}]]},\"AI Agent\":{\"main\":[[{\"node\":\"Code6\",\"type\":\"main\",\"index\":0}]]},\"AI Agent1\":{\"main\":[[{\"node\":\"Code5\",\"type\":\"main\",\"index\":0}]]},\"Send Email\":{\"ai_tool\":[[{\"node\":\"AI Agent\",\"type\":\"ai_tool\",\"index\":0}]]},\"Send Email1\":{\"ai_tool\":[[{\"node\":\"AI Agent1\",\"type\":\"ai_tool\",\"index\":0}]]},\"HTTP Request\":{\"main\":[[{\"node\":\"Loop Over Items1\",\"type\":\"main\",\"index\":0}]]},\"HTTP Request2\":{\"main\":[[{\"node\":\"HTTP Request5\",\"type\":\"main\",\"index\":0}]]},\"HTTP Request3\":{\"main\":[[{\"node\":\"HTTP Request4\",\"type\":\"main\",\"index\":0}]]},\"HTTP Request4\":{\"main\":[[{\"node\":\"Code\",\"type\":\"main\",\"index\":0}]]},\"HTTP Request5\":{\"main\":[[{\"node\":\"Code1\",\"type\":\"main\",\"index\":0}]]},\"HTTP Request6\":{\"main\":[[{\"node\":\"Loop Over Items\",\"type\":\"main\",\"index\":0}]]},\"Loop Over Items\":{\"main\":[[],[{\"node\":\"HTTP Request6\",\"type\":\"main\",\"index\":0}]]},\"Execute Workflow\":{\"main\":[[{\"node\":\"If\",\"type\":\"main\",\"index\":0}]]},\"Loop Over Items1\":{\"main\":[[],[{\"node\":\"HTTP Request\",\"type\":\"main\",\"index\":0}]]},\"OpenAI Chat Model1\":{\"ai_languageModel\":[[{\"node\":\"AI Agent1\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"OpenAI Chat Model2\":{\"ai_languageModel\":[[{\"node\":\"AI Agent\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"Window Buffer Memory\":{\"ai_memory\":[[{\"node\":\"AI Agent\",\"type\":\"ai_memory\",\"index\":0}]]},\"Window Buffer Memory1\":{\"ai_memory\":[[{\"node\":\"AI Agent1\",\"type\":\"ai_memory\",\"index\":0}]]},\"When Executed by Another Workflow\":{\"main\":[[{\"node\":\"HTTP Request1\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "# Wix Chat Auto-Responder with OpenAI GPT and Email Fallback\n\nThis template connects Wix Chat with OpenAI via n8n to automate intelligent customer responses on your website only when no human has responded recently. It uses smart throttling, checks for member vs. anonymous visitors, pulls chat history, and optionally alerts support staff via email if AI shouldn't reply.\n\nPerfect for solopreneurs, agencies, or customer support teams looking to auto-handle conversations while maintaining a fallback system.\n\n## **Key Features**\n\n  * 🔌 **Connects Wix Chat API to n8n seamlessly**\n  * 🧠 **Uses GPT-4 (via OpenAI) to auto-generate replies**\n  * 🧍‍♂️ **Detects member vs. guest via webhook payload**\n  * 📬 **Optional email alert to support staff if AI should not reply**\n  * ⏱️ **Only responds if a human hasn't answered in the past 12 hours**\n  * ✂️ **Splits long AI messages into chunks to fit Wix API constraints**\n  * 🧱 **Modular & customizable—adapt for CRM, Slack, SMS, etc.**\n\n\n\n## **Requirements**\n\n  * **Published Wix site with Wix Inbox enabled**\n  * **Wix Developer App credentials** (Client ID, Secret, Instance ID)\n  * **OpenAI API Key**\n  * **Active n8n instance** (self-hosted or cloud)\n  * **Working SMTP credentials** (for fallback email alert)\n\n\n\n## **Setup Instructions**\n\n### **1\\. Import the Workflow**\n\nDownload and import the `.json` file into your n8n instance. All nodes should appear in the visual editor.\n\n### **2\\. Rename Key Nodes (Recommended for Clarity)**\n\nRename the following nodes for easier maintenance:\n\n  * `If` → **Check Member vs Visitor**\n  * `Execute Workflow` → **Generate OAuth Token**\n  * `Send Email` → **Alert Technician via Email**\n\n\n\n### **3\\. Configure OAuth for Wix API**\n\nIn the node `HTTP Request1`, replace the placeholder values:\n    \n    \n    \"client_id\": \"YOUR_WIX_APP_ID\",\n    \"client_secret\": \"YOUR_WIX_APP_SECRET\",\n    \"instance_id\": \"YOUR_WIX_INSTANCE_ID\"\n    \n\n💡 You may move this to a separate workflow and call it using `Execute Workflow`.\n\n### **4\\. Set Up the Webhook in Wix**\n\n  1. Copy the Webhook URL from the `Webhook` node.\n  2. Go to your Wix dashboard: \n     * Navigate to: `Settings &gt; Automations &gt; Create New`\n     * Trigger: **\"When someone sends a message via chat\"**\n     * Action: **\"Send a Webhook\"**\n  3. Paste the n8n Webhook URL in the configuration.\n\n\n\n### **5\\. Add Your OpenAI API Key**\n\nOpen both `OpenAI Chat Model1` and `OpenAI Chat Model2` nodes:\n\n  * Add your OpenAI credentials.\n  * Adjust the model (e.g., GPT-4 or GPT-4o) and temperature as needed.\n\n\n\n### **6\\. Customize Response Logic (Optional)**\n\nIn the `Code` node labeled **Response Throttle** , modify:\n    \n    \n    const allowChat = true;\n    const allowEmail = false;\n    const humanResponseTimeWindow = 43200000; // 12 hours in ms\n    \n\nChange values to:\n\n  * Disable chat or email\n  * Modify the delay window before AI is allowed to respond\n\n\n\n### **7\\. Set Up Email Fallback (Optional)**\n\nIf human support is required, the workflow sends an email:\n\n  * Add SMTP credentials in the `Send Email` node\n  * Customize the message, or replace the node with Slack, webhook, or SMS alert\n\n\n\n### **8\\. Test**\n\n  1. Open your Wix site in an incognito browser tab.\n  2. Use the chat and monitor the bot's response.\n  3. Check `Executions` in n8n to debug or verify the flow.\n\n\n\n## **How to Customize**\n\n  * **Trigger follow-up actions** (e.g., Zapier, CRM sync) after AI response\n  * **Customize GPT prompt** via `AI Agent` nodes\n  * **Prevent replies by channel** (e.g., don’t reply via email)\n  * **Add filters** for keywords, lead scoring, or VIP contacts with `If` or `Code` nodes\n\n\n\n## **Includes**\n\n  * ✅ **1 Workflow JSON file**\n  * 🔐 **OAuth2 logic** (can be modularized into a separate workflow)\n  * 📝 **Sticky notes and comments** to guide usage\n  * ⚙️ **Production-ready, extensible logic for any support stack**\n\n\n",
  "readme_html": "<!--[--><div data-v-859c7806=\"\"><h1>Wix Chat Auto-Responder with OpenAI GPT and Email Fallback</h1>\n<p>This template connects Wix Chat with OpenAI via n8n to automate intelligent customer responses on your website only when no human has responded recently. It uses smart throttling, checks for member vs. anonymous visitors, pulls chat history, and optionally alerts support staff via email if AI shouldn't reply.</p>\n<p>Perfect for solopreneurs, agencies, or customer support teams looking to auto-handle conversations while maintaining a fallback system.</p>\n<h2><strong>Key Features</strong></h2>\n<ul>\n<li>🔌 <strong>Connects Wix Chat API to n8n seamlessly</strong></li>\n<li>🧠 <strong>Uses GPT-4 (via OpenAI) to auto-generate replies</strong></li>\n<li>🧍‍♂️ <strong>Detects member vs. guest via webhook payload</strong></li>\n<li>📬 <strong>Optional email alert to support staff if AI should not reply</strong></li>\n<li>⏱️ <strong>Only responds if a human hasn't answered in the past 12 hours</strong></li>\n<li>✂️ <strong>Splits long AI messages into chunks to fit Wix API constraints</strong></li>\n<li>🧱 <strong>Modular &amp; customizable—adapt for CRM, Slack, SMS, etc.</strong></li>\n</ul>\n<h2><strong>Requirements</strong></h2>\n<ul>\n<li><strong>Published Wix site with Wix Inbox enabled</strong></li>\n<li><strong>Wix Developer App credentials</strong> (Client ID, Secret, Instance ID)</li>\n<li><strong>OpenAI API Key</strong></li>\n<li><strong>Active n8n instance</strong> (self-hosted or cloud)</li>\n<li><strong>Working SMTP credentials</strong> (for fallback email alert)</li>\n</ul>\n<h2><strong>Setup Instructions</strong></h2>\n<h3><strong>1. Import the Workflow</strong></h3>\n<p>Download and import the <code>.json</code> file into your n8n instance. All nodes should appear in the visual editor.</p>\n<h3><strong>2. Rename Key Nodes (Recommended for Clarity)</strong></h3>\n<p>Rename the following nodes for easier maintenance:</p>\n<ul>\n<li><code>If</code> → <strong>Check Member vs Visitor</strong></li>\n<li><code>Execute Workflow</code> → <strong>Generate OAuth Token</strong></li>\n<li><code>Send Email</code> → <strong>Alert Technician via Email</strong></li>\n</ul>\n<h3><strong>3. Configure OAuth for Wix API</strong></h3>\n<p>In the node <code>HTTP Request1</code>, replace the placeholder values:</p>\n<pre><code>\"client_id\": \"YOUR_WIX_APP_ID\",\n\"client_secret\": \"YOUR_WIX_APP_SECRET\",\n\"instance_id\": \"YOUR_WIX_INSTANCE_ID\"\n</code></pre>\n<p>💡 You may move this to a separate workflow and call it using <code>Execute Workflow</code>.</p>\n<h3><strong>4. Set Up the Webhook in Wix</strong></h3>\n<ol>\n<li>Copy the Webhook URL from the <code>Webhook</code> node.</li>\n<li>Go to your Wix dashboard:\n<ul>\n<li>Navigate to: <code>Settings &amp;gt; Automations &amp;gt; Create New</code></li>\n<li>Trigger: <strong>\"When someone sends a message via chat\"</strong></li>\n<li>Action: <strong>\"Send a Webhook\"</strong></li>\n</ul>\n</li>\n<li>Paste the n8n Webhook URL in the configuration.</li>\n</ol>\n<h3><strong>5. Add Your OpenAI API Key</strong></h3>\n<p>Open both <code>OpenAI Chat Model1</code> and <code>OpenAI Chat Model2</code> nodes:</p>\n<ul>\n<li>Add your OpenAI credentials.</li>\n<li>Adjust the model (e.g., GPT-4 or GPT-4o) and temperature as needed.</li>\n</ul>\n<h3><strong>6. Customize Response Logic (Optional)</strong></h3>\n<p>In the <code>Code</code> node labeled <strong>Response Throttle</strong>, modify:</p>\n<pre><code>const allowChat = true;\nconst allowEmail = false;\nconst humanResponseTimeWindow = 43200000; // 12 hours in ms\n</code></pre>\n<p>Change values to:</p>\n<ul>\n<li>Disable chat or email</li>\n<li>Modify the delay window before AI is allowed to respond</li>\n</ul>\n<h3><strong>7. Set Up Email Fallback (Optional)</strong></h3>\n<p>If human support is required, the workflow sends an email:</p>\n<ul>\n<li>Add SMTP credentials in the <code>Send Email</code> node</li>\n<li>Customize the message, or replace the node with Slack, webhook, or SMS alert</li>\n</ul>\n<h3><strong>8. Test</strong></h3>\n<ol>\n<li>Open your Wix site in an incognito browser tab.</li>\n<li>Use the chat and monitor the bot's response.</li>\n<li>Check <code>Executions</code> in n8n to debug or verify the flow.</li>\n</ol>\n<h2><strong>How to Customize</strong></h2>\n<ul>\n<li><strong>Trigger follow-up actions</strong> (e.g., Zapier, CRM sync) after AI response</li>\n<li><strong>Customize GPT prompt</strong> via <code>AI Agent</code> nodes</li>\n<li><strong>Prevent replies by channel</strong> (e.g., don’t reply via email)</li>\n<li><strong>Add filters</strong> for keywords, lead scoring, or VIP contacts with <code>If</code> or <code>Code</code> nodes</li>\n</ul>\n<h2><strong>Includes</strong></h2>\n<ul>\n<li>✅ <strong>1 Workflow JSON file</strong></li>\n<li>🔐 <strong>OAuth2 logic</strong> (can be modularized into a separate workflow)</li>\n<li>📝 <strong>Sticky notes and comments</strong> to guide usage</li>\n<li>⚙️ <strong>Production-ready, extensible logic for any support stack</strong></li>\n</ul>\n</div><!--]-->",
  "readme_zh": "# Wix聊天自动应答系统（集成OpenAI GPT及邮件备用方案）\n\n本模板通过n8n将Wix聊天系统与OpenAI对接，实现智能自动回复功能（仅在12小时内无人回复时触发）。系统具备智能节流机制，可区分会员与匿名访客，提取聊天记录，并在AI不宜回复时通过邮件提醒客服人员。\n\n特别适合独立创业者、代理商或客服团队用于自动化处理对话，同时保留人工后备支持。\n\n## 核心功能\n\n* 🔌 **无缝连接Wix聊天API与n8n工作流**\n* 🧠 **采用GPT-4（通过OpenAI）生成智能回复**\n* 🧍‍♂️ **通过Webhook数据识别会员与访客身份**\n* 📬 **AI不宜回复时可邮件通知客服人员（可选功能）**\n* ⏱️ **仅当12小时内无人回复时才触发自动应答**\n* ✂️ **自动分割长文本以适应Wix API限制**\n* � **模块化设计** - 可扩展集成CRM/Slack/短信等系统\n\n## 环境要求\n\n* **已发布且启用Wix收件箱功能的网站**\n* **Wix开发者应用凭证**（客户端ID/密钥/实例ID）\n* **OpenAI API密钥**\n* **可用的n8n实例**（自建或云端版）\n* **有效的SMTP邮件服务凭证**（用于备用邮件提醒）\n\n## 配置指南\n\n### 1. 导入工作流\n下载`.json`文件并导入n8n实例，所有节点将显示在可视化编辑器中。\n\n### 2. 重命名关键节点（建议）\n建议修改以下节点名称便于维护：\n* `If` → **访客身份校验**\n* `Execute Workflow` → **生成OAuth令牌**\n* `Send Email` → **邮件通知技术人员**\n\n### 3. 配置Wix API认证\n在`HTTP Request1`节点替换以下参数：\n```json\n\"client_id\": \"您的Wix应用ID\",\n\"client_secret\": \"您的Wix应用密钥\", \n\"instance_id\": \"您的Wix实例ID\"\n```\n💡 可将其拆分为独立工作流通过`Execute Workflow`调用\n\n### 4. 设置Wix Webhook\n1. 从`Webhook`节点复制URL\n2. 进入Wix后台：\n   * 路径：`设置 > 自动化 > 新建规则`\n   * 触发器：**\"当用户通过聊天发送消息\"**\n   * 动作：**\"发送Webhook请求\"**\n3. 粘贴n8n的Webhook地址\n\n### 5. 配置OpenAI密钥\n在`OpenAI Chat Model1/2`节点中：\n* 填写OpenAI凭证\n* 按需调整模型（如GPT-4/GPT-4o）和温度参数\n\n### 6. 自定义应答逻辑（可选）\n在**响应节流**代码节点修改：\n```javascript\nconst allowChat = true; // 是否允许聊天回复\nconst allowEmail = false; // 是否启用邮件提醒\nconst humanResponseTimeWindow = 43200000; // 12小时（毫秒）\n```\n\n### 7. 设置邮件备用方案（可选）\n在`Send Email`节点：\n* 配置SMTP凭证\n* 自定义邮件内容，或替换为Slack/webhook/短信提醒\n\n### 8. 测试验证\n1. 使用无痕浏览器访问Wix站点\n2. 测试聊天功能并观察响应\n3. 通过n8n执行日志调试流程\n\n## 高级定制\n\n* **扩展后续动作**：可对接Zapier/CRM等系统\n* **优化GPT提示词**：修改`AI Agent`节点内容\n* **渠道过滤**：禁止特定渠道的自动回复\n* **添加过滤规则**：通过`If`/`Code`节点实现关键词过滤或VIP识别\n\n## 交付内容\n\n* ✅ **完整工作流JSON文件**\n* 🔐 **OAuth2认证模块**（可拆分为独立工作流）\n* 📝 **带注释的指导说明**\n* ⚙️ **即用型生产级方案，支持任意客服系统扩展**",
  "title_zh": "Wix聊天自动回复器（集成OpenAI GPT及邮件备用功能）",
  "publish_date_zh": "上次更新于5天前",
  "workflow_json_zh": "{\"id\":\"eCvZmsWQN1hQfRBb\",\"meta\":{\"instanceId\":\"c60cbb8905d8f1b1d2fddadadda01bad0ee1c76eb7857527efe1945effe9e986\",\"templateId\":\"2786\",\"templateCredsSetupCompleted\":true},\"name\":\"listing\",\"tags\":[],\"nodes\":[{\"id\":\"f26c6e6c-87d2-4ed9-8bf4-2c660e7f26ab\",\"name\":\"Webhook\",\"type\":\"n8n-nodes-base.webhook\",\"position\":[-140,220],\"webhookId\":\"3a1a5dd3-35ff-4d9d-8c75-3483b608f70a\",\"parameters\":{},\"typeVersion\":2},{\"id\":\"0fdf2349-8eb5-457f-8022-861461e68d6c\",\"name\":\"HTTP Request2\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[500,80],\"parameters\":{},\"typeVersion\":4.2},{\"id\":\"e4e275d9-c78b-4d06-b83b-f40816aa4390\",\"name\":\"Execute Workflow\",\"type\":\"n8n-nodes-base.executeWorkflow\",\"position\":[60,220],\"parameters\":{},\"typeVersion\":1.2},{\"id\":\"d214324f-d4a0-4377-bcf4-eea3368c76f5\",\"name\":\"Send Email\",\"type\":\"n8n-nodes-base.emailSendTool\",\"position\":[1500,140],\"webhookId\":\"162bea28-f4a1-45af-86d8-92fa01abbcf5\",\"parameters\":{},\"typeVersion\":2.1},{\"id\":\"fa1645f2-0dcb-4429-af4d-4f75eca9f15c\",\"name\":\"If\",\"type\":\"n8n-nodes-base.if\",\"position\":[240,220],\"parameters\":{},\"typeVersion\":2.2},{\"id\":\"569359a5-bf87-4405-8d3c-7736f4cd26d6\",\"name\":\"HTTP Request3\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[500,360],\"parameters\":{},\"typeVersion\":4.2},{\"id\":\"a8eec80a-5ff4-441c-aa78-9d56991d84aa\",\"name\":\"AI Agent1\",\"type\":\"@n8n/n8n-nodes-langchain.agent\",\"position\":[1180,480],\"parameters\":{},\"typeVersion\":1.6},{\"id\":\"a73963b3-b699-4dc9-88ec-db77b4892c59\",\"name\":\"HTTP Request4\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[720,480],\"parameters\":{},\"typeVersion\":4.2},{\"id\":\"0deadef7-17d0-4dd9-8db6-8077b57d599f\",\"name\":\"Code\",\"type\":\"n8n-nodes-base.code\",\"position\":[860,480],\"parameters\":{},\"typeVersion\":2},{\"id\":\"ce592648-5123-4007-b11b-d7579236ea1d\",\"name\":\"If1\",\"type\":\"n8n-nodes-base.if\",\"position\":[1000,480],\"parameters\":{},\"typeVersion\":2.2},{\"id\":\"62ac1689-62d2-4d81-b856-c61e839008a8\",\"name\":\"OpenAI Chat Model1\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\"position\":[1080,700],\"parameters\":{},\"typeVersion\":1.2},{\"id\":\"e660e054-75bb-473e-9bf2-e998d77e76b9\",\"name\":\"Loop Over Items\",\"type\":\"n8n-nodes-base.splitInBatches\",\"position\":[1860,480],\"parameters\":{},\"typeVersion\":3},{\"id\":\"00d462aa-3b51-45f1-ad4a-7058e2a1a48f\",\"name\":\"HTTP Request6\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[2140,500],\"parameters\":{},\"executeOnce\":false,\"typeVersion\":4.2,\"alwaysOutputData\":false},{\"id\":\"f2a3cf5e-ae3c-42b8-8ea5-2173d35cd14e\",\"name\":\"Code5\",\"type\":\"n8n-nodes-base.code\",\"position\":[1620,480],\"parameters\":{},\"typeVersion\":2},{\"id\":\"6f571403-53a7-4dee-a5f6-96e5af79a5b7\",\"name\":\"Window Buffer Memory1\",\"type\":\"@n8n/n8n-nodes-langchain.memoryBufferWindow\",\"position\":[1260,700],\"parameters\":{},\"typeVersion\":1.3},{\"id\":\"d06c28be-0752-4f28-b5bb-5090a63f0a60\",\"name\":\"End chat\",\"type\":\"n8n-nodes-base.noOp\",\"position\":[1240,320],\"parameters\":{},\"typeVersion\":1},{\"id\":\"9c1acb49-9578-4a45-a440-a261ec2a6cfe\",\"name\":\"Window Buffer Memory\",\"type\":\"@n8n/n8n-nodes-langchain.memoryBufferWindow\",\"position\":[1360,120],\"parameters\":{},\"typeVersion\":1.2},{\"id\":\"33b3dfce-fe11-4e0f-b9db-de391ae128b7\",\"name\":\"AI Agent\",\"type\":\"@n8n/n8n-nodes-langchain.agent\",\"position\":[1320,-100],\"parameters\":{},\"typeVersion\":1.6},{\"id\":\"3e26c97c-7ed9-4824-be8b-1c6fc907f5ef\",\"name\":\"HTTP Request5\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[760,-20],\"parameters\":{},\"typeVersion\":4.2},{\"id\":\"92ce1d64-93b5-489b-bd83-875f4245b773\",\"name\":\"Code1\",\"type\":\"n8n-nodes-base.code\",\"position\":[900,-20],\"parameters\":{},\"typeVersion\":2},{\"id\":\"e3a83686-a1b7-4440-b181-f9500b4b357b\",\"name\":\"If2\",\"type\":\"n8n-nodes-base.if\",\"position\":[1160,-100],\"parameters\":{},\"typeVersion\":2.2},{\"id\":\"033f67e0-b03a-4cbc-ab76-b71cb7b1cfc0\",\"name\":\"Human reponse within last hour, END1\",\"type\":\"n8n-nodes-base.noOp\",\"position\":[1400,-280],\"parameters\":{},\"typeVersion\":1},{\"id\":\"69a3e06d-8745-410a-8fec-e6ee4f54ca24\",\"name\":\"OpenAI Chat Model2\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\"position\":[1200,120],\"parameters\":{},\"typeVersion\":1.2},{\"id\":\"5f543d24-e9ab-4145-9cd2-863a67c7f7b0\",\"name\":\"Loop Over Items1\",\"type\":\"n8n-nodes-base.splitInBatches\",\"position\":[1980,-100],\"parameters\":{},\"typeVersion\":3},{\"id\":\"bf7658e4-5748-4890-8e16-3a4788980ecf\",\"name\":\"HTTP Request\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[2260,-80],\"parameters\":{},\"executeOnce\":false,\"typeVersion\":4.2,\"alwaysOutputData\":false},{\"id\":\"584c38e8-75e7-4401-a3ec-27a101fd9bed\",\"name\":\"Code6\",\"type\":\"n8n-nodes-base.code\",\"position\":[1740,-100],\"parameters\":{},\"typeVersion\":2},{\"id\":\"616168c3-acc8-44cd-be36-45680a8a0b56\",\"name\":\"Send Email1\",\"type\":\"n8n-nodes-base.emailSendTool\",\"position\":[1420,700],\"webhookId\":\"db8291b4-f3d9-4444-afe4-5198ce7aaac3\",\"parameters\":{},\"typeVersion\":2.1},{\"id\":\"8cb33438-0343-400a-b3f3-91c276127ce1\",\"name\":\"HTTP Request1\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[140,-220],\"parameters\":{},\"typeVersion\":4.2},{\"id\":\"1264ace4-0489-418a-9c53-5283cc0eb228\",\"name\":\"When Executed by Another Workflow\",\"type\":\"n8n-nodes-base.executeWorkflowTrigger\",\"position\":[-120,-220],\"parameters\":{},\"typeVersion\":1.1},{\"id\":\"a937ffcb-0d2f-40f6-90a6-9fcc41d68eea\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-240,-420],\"parameters\":{\"content\":\"\"},\"typeVersion\":1},{\"id\":\"005e1b8a-c6b9-4fd8-a8f1-263556d939a3\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-220,540],\"parameters\":{\"content\":\"\"},\"typeVersion\":1},{\"id\":\"0650d044-a4fa-4176-88ff-bfff8f55ef1d\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[960,940],\"parameters\":{\"content\":\"\"},\"typeVersion\":1}],\"active\":false,\"pinData\":{},\"settings\":{\"callerPolicy\":\"workflowsFromSameOwner\",\"executionOrder\":\"v1\"},\"versionId\":\"35fc688e-cb46-4c1f-a88f-22410404175b\",\"connections\":{\"If\":{\"main\":[[{\"node\":\"HTTP Request2\",\"type\":\"main\",\"index\":0}],[{\"node\":\"HTTP Request3\",\"type\":\"main\",\"index\":0}]]},\"If1\":{\"main\":[[{\"node\":\"End chat\",\"type\":\"main\",\"index\":0}],[{\"node\":\"AI Agent1\",\"type\":\"main\",\"index\":0}]]},\"If2\":{\"main\":[[{\"node\":\"Human reponse within last hour, END1\",\"type\":\"main\",\"index\":0}],[{\"node\":\"AI Agent\",\"type\":\"main\",\"index\":0}]]},\"Code\":{\"main\":[[{\"node\":\"If1\",\"type\":\"main\",\"index\":0}]]},\"Code1\":{\"main\":[[{\"node\":\"If2\",\"type\":\"main\",\"index\":0}]]},\"Code5\":{\"main\":[[{\"node\":\"Loop Over Items\",\"type\":\"main\",\"index\":0}]]},\"Code6\":{\"main\":[[{\"node\":\"Loop Over Items1\",\"type\":\"main\",\"index\":0}]]},\"Webhook\":{\"main\":[[{\"node\":\"Execute Workflow\",\"type\":\"main\",\"index\":0}]]},\"AI Agent\":{\"main\":[[{\"node\":\"Code6\",\"type\":\"main\",\"index\":0}]]},\"AI Agent1\":{\"main\":[[{\"node\":\"Code5\",\"type\":\"main\",\"index\":0}]]},\"Send Email\":{\"ai_tool\":[[{\"node\":\"AI Agent\",\"type\":\"ai_tool\",\"index\":0}]]},\"Send Email1\":{\"ai_tool\":[[{\"node\":\"AI Agent1\",\"type\":\"ai_tool\",\"index\":0}]]},\"HTTP Request\":{\"main\":[[{\"node\":\"Loop Over Items1\",\"type\":\"main\",\"index\":0}]]},\"HTTP Request2\":{\"main\":[[{\"node\":\"HTTP Request5\",\"type\":\"main\",\"index\":0}]]},\"HTTP Request3\":{\"main\":[[{\"node\":\"HTTP Request4\",\"type\":\"main\",\"index\":0}]]},\"HTTP Request4\":{\"main\":[[{\"node\":\"Code\",\"type\":\"main\",\"index\":0}]]},\"HTTP Request5\":{\"main\":[[{\"node\":\"Code1\",\"type\":\"main\",\"index\":0}]]},\"HTTP Request6\":{\"main\":[[{\"node\":\"Loop Over Items\",\"type\":\"main\",\"index\":0}]]},\"Loop Over Items\":{\"main\":[[],[{\"node\":\"HTTP Request6\",\"type\":\"main\",\"index\":0}]]},\"Execute Workflow\":{\"main\":[[{\"node\":\"If\",\"type\":\"main\",\"index\":0}]]},\"Loop Over Items1\":{\"main\":[[],[{\"node\":\"HTTP Request\",\"type\":\"main\",\"index\":0}]]},\"OpenAI Chat Model1\":{\"ai_languageModel\":[[{\"node\":\"AI Agent1\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"OpenAI Chat Model2\":{\"ai_languageModel\":[[{\"node\":\"AI Agent\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"Window Buffer Memory\":{\"ai_memory\":[[{\"node\":\"AI Agent\",\"type\":\"ai_memory\",\"index\":0}]]},\"Window Buffer Memory1\":{\"ai_memory\":[[{\"node\":\"AI Agent1\",\"type\":\"ai_memory\",\"index\":0}]]},\"When Executed by Another Workflow\":{\"main\":[[{\"node\":\"HTTP Request1\",\"type\":\"main\",\"index\":0}]]}}}"
}