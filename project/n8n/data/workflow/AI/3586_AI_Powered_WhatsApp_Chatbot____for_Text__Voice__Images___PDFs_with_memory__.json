{
  "title": "AI-Powered WhatsApp Chatbot 🤖📲 for Text, Voice, Images & PDFs with memory 🧠",
  "url": "https://n8n.io/workflows/3586-ai-powered-whatsapp-chatbot-for-text-voice-images-and-pdfs-with-memory/",
  "category": "AI",
  "category_url": "https://n8n.io/workflows/categories/ai/",
  "author": "Davide",
  "publish_date": "Last update 9 days ago",
  "content": "",
  "workflow_json": "{\"id\":\"zMtPPjJ80JJznrJP\",\"meta\":{\"instanceId\":\"a4bfc93e975ca233ac45ed7c9227d84cf5a2329310525917adaf3312e10d5462\",\"templateCredsSetupCompleted\":true},\"name\":\"AI-Powered WhatsApp Chatbot for Text, Voice, Images & PDFs\",\"tags\":[],\"nodes\":[{\"id\":\"38246f5d-0cf4-49ed-957e-0189243d0dec\",\"name\":\"WhatsApp Trigger\",\"type\":\"n8n-nodes-base.whatsAppTrigger\",\"position\":[-700,80],\"webhookId\":\"d3978cae-2aca-4553-8ac7-ab89068deabc\",\"parameters\":{\"options\":{},\"updates\":[\"messages\"]},\"credentials\":{\"whatsAppTriggerApi\":{\"id\":\"gylriO2te7NRPXxN\",\"name\":\"WhatsApp OAuth account\"}},\"typeVersion\":1},{\"id\":\"4cc0b70b-3ecc-4415-af2f-e50d4f302786\",\"name\":\"Download Image\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[720,120],\"parameters\":{\"url\":\"={{ $json.url }}\",\"options\":{},\"authentication\":\"genericCredentialType\",\"genericAuthType\":\"httpHeaderAuth\"},\"credentials\":{\"httpHeaderAuth\":{\"id\":\"FDP9FxauzJt9rkjr\",\"name\":\"WhatsApp\"}},\"typeVersion\":4.2},{\"id\":\"528984be-b9ad-41c7-8b2e-ccbf275f7805\",\"name\":\"Analyze Image\",\"type\":\"@n8n/n8n-nodes-langchain.openAi\",\"position\":[960,120],\"parameters\":{\"text\":\"=You are an advanced image description AI assistant . Your primary function is to provide detailed, accurate descriptions of images submitted through WhatsApp.\\n\\nCORE FUNCTIONALITY:\\n- When presented with an image, you will analyze it thoroughly and provide a comprehensive description in English.\\n- Your descriptions should capture both the obvious and subtle elements within the image.\\n\\nIMAGE DESCRIPTION GUIDELINES:\\n- Begin with a broad overview of what the image contains\\n- Describe key subjects, people, objects, and their relationships\\n- Note significant visual elements such as colors, lighting, composition, and perspective\\n- Identify any text visible in the image\\n- Describe the setting or environment\\n- Mention any notable actions or events taking place\\n- Comment on mood, tone, or atmosphere when relevant\\n- If applicable, identify landmarks, famous people, or cultural references\\n\\nRESPONSE FORMAT:\\n- Start with \\\"Image Description:\\\" followed by your analysis\\n- Structure your description in a logical manner (general to specific)\\n- Use clear, precise language appropriate for visual description\\n- Format longer descriptions with paragraphs to enhance readability\\n- End with any notable observations that might require special attention\\n\\nLIMITATIONS:\\n- If the image is blurry, low resolution, or difficult to interpret, acknowledge these limitations\\n- If an image contains potentially sensitive content, provide a factual description without judgment\\n- Do not make assumptions about elements that cannot be clearly determined\\n\\nYour descriptions should be informative, objective, and thorough, enabling someone who cannot see the image to form an accurate mental picture of its contents.\",\"modelId\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"gpt-4o-mini\",\"cachedResultName\":\"GPT-4O-MINI\"},\"options\":{\"detail\":\"auto\"},\"resource\":\"image\",\"inputType\":\"base64\",\"operation\":\"analyze\"},\"credentials\":{\"openAiApi\":{\"id\":\"4zwP0MSr8zkNvvV9\",\"name\":\"OpenAi account\"}},\"typeVersion\":1.8},{\"id\":\"b8898138-f987-4ef7-a5c1-d6d6b9c815f0\",\"name\":\"Download Audio\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[720,-180],\"parameters\":{\"url\":\"={{ $json.url }}\",\"options\":{},\"authentication\":\"genericCredentialType\",\"genericAuthType\":\"httpHeaderAuth\"},\"credentials\":{\"httpHeaderAuth\":{\"id\":\"FDP9FxauzJt9rkjr\",\"name\":\"WhatsApp\"}},\"typeVersion\":4.2},{\"id\":\"e68bea55-f43a-4143-afca-1348b35e5879\",\"name\":\"Transcribe Audio\",\"type\":\"@n8n/n8n-nodes-langchain.openAi\",\"position\":[960,-180],\"parameters\":{\"options\":{},\"resource\":\"audio\",\"operation\":\"transcribe\"},\"credentials\":{\"openAiApi\":{\"id\":\"4zwP0MSr8zkNvvV9\",\"name\":\"OpenAi account\"}},\"typeVersion\":1.8},{\"id\":\"1c0aa0c3-cee4-40f1-9e13-9365cc06443a\",\"name\":\"OpenAI Chat Model\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\"position\":[160,1440],\"parameters\":{\"model\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"gpt-4o-mini\"},\"options\":{}},\"credentials\":{\"openAiApi\":{\"id\":\"4zwP0MSr8zkNvvV9\",\"name\":\"OpenAi account\"}},\"typeVersion\":1.2},{\"id\":\"d2215cf8-49e1-433b-b9c3-a219e6432cba\",\"name\":\"AI Agent1\",\"type\":\"@n8n/n8n-nodes-langchain.agent\",\"position\":[160,1220],\"parameters\":{\"text\":\"={{ $json.text }}\",\"options\":{\"systemMessage\":\"You are an intelligent assistant. Your purpose is to analyze various types of input and provide helpful, accurate responses.\\n\\nCAPABILITIES:\\n- Process and respond to text messages\\n- Analyze uploaded files\\n- Interpret and describe images\\n- Transcribe and understand voice messages\\n\\nINPUT HANDLING:\\n1. For text messages: Analyze the content, understand the intent, and provide a relevant response.\\n2. For file analysis: Examine the file content, extract key information, and summarize important points also based on the questions asked.\\n3. For image analysis: Describe what you see in the image, identify key elements, and respond to any questions about the image.\\n4. For voice messages: Transcribe the audio, understand the message, and respond appropriately.\\n\\nRESPONSE GUIDELINES:\\n- Be concise but thorough\\n- Prioritize accuracy over speculation\\n- Maintain a professional and helpful tone\\n- When uncertain, acknowledge limitations\\n- Format responses for easy reading on mobile devices\\n- Include actionable information when appropriate\\n\\nLIMITATIONS:\\n- Mention if you're unable to process certain file formats\\n- Indicate if an image is unclear or if details are difficult to discern\\n- Note if audio quality impacts transcription accuracy\\n\\nSECURITY & PRIVACY:\\n- Do not store or remember sensitive information shared in files, images, or voice notes\\n- Do not share personal information across different user interactions\\n- Inform users about data privacy limitations when relevant\\n\\nAnalyze all inputs carefully before responding. Your goal is to provide value through accurate information and helpful assistance.\"},\"promptType\":\"define\"},\"typeVersion\":1.8},{\"id\":\"103825d0-8521-43c7-8246-9cc1faca42e1\",\"name\":\"Download File\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[720,460],\"parameters\":{\"url\":\"={{ $json.url }}\",\"options\":{},\"authentication\":\"genericCredentialType\",\"genericAuthType\":\"httpHeaderAuth\"},\"credentials\":{\"httpHeaderAuth\":{\"id\":\"FDP9FxauzJt9rkjr\",\"name\":\"WhatsApp\"}},\"typeVersion\":4.2},{\"id\":\"98077f98-6dcf-4932-9363-19bf1fdc299e\",\"name\":\"Extract from File\",\"type\":\"n8n-nodes-base.extractFromFile\",\"position\":[980,460],\"parameters\":{\"options\":{},\"operation\":\"pdf\"},\"typeVersion\":1},{\"id\":\"fefc8b87-d64e-4ff9-9f62-1ac3af2bf17e\",\"name\":\"Simple Memory\",\"type\":\"@n8n/n8n-nodes-langchain.memoryBufferWindow\",\"position\":[300,1440],\"parameters\":{\"sessionKey\":\"=memory_{{ $('WhatsApp Trigger').item.json.contacts[0].wa_id }}\",\"sessionIdType\":\"customKey\",\"contextWindowLength\":10},\"typeVersion\":1.3},{\"id\":\"83ac997d-6ba0-4eb7-bd6c-80671f03c56c\",\"name\":\"Get File Url\",\"type\":\"n8n-nodes-base.whatsApp\",\"position\":[500,460],\"webhookId\":\"280bd5de-32d7-4d8f-93d2-e91e3b0bc161\",\"parameters\":{\"resource\":\"media\",\"operation\":\"mediaUrlGet\",\"mediaGetId\":\"={{ $('WhatsApp Trigger').item.json.messages[0].document.id }}\"},\"credentials\":{\"whatsAppApi\":{\"id\":\"HDUOWQXeRXMVjo0Z\",\"name\":\"WhatsApp account\"}},\"typeVersion\":1},{\"id\":\"56b23f60-57c3-4ea7-a4e8-64029a2e44c1\",\"name\":\"Only PDF File\",\"type\":\"n8n-nodes-base.if\",\"position\":[220,480],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"f52d2aaa-e0b2-45e5-8c4b-ceef42182a0d\",\"operator\":{\"name\":\"filter.operator.equals\",\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"={{ $json.messages[0].document.mime_type }}\",\"rightValue\":\"application/pdf\"}]}},\"typeVersion\":2.2},{\"id\":\"fa733b7b-16a7-4a9b-86b3-88395535ecd5\",\"name\":\"Fix mimeType for Audio\",\"type\":\"n8n-nodes-base.code\",\"position\":[1040,1080],\"parameters\":{\"jsCode\":\"for (const item of $input.all()) {\\n  if (item.binary) {\\n    const binaryPropertyNames = Object.keys(item.binary);\\n    for (const propName of binaryPropertyNames) {\\n      if (item.binary[propName].mimeType === 'audio/mp3') {\\n        item.binary[propName].mimeType = 'audio/mpeg';\\n      }\\n    }\\n  }\\n}\\n\\nreturn $input.all();\"},\"typeVersion\":2},{\"id\":\"0d99c2fa-945b-487a-b929-742e8b1b6859\",\"name\":\"Send message\",\"type\":\"n8n-nodes-base.whatsApp\",\"position\":[840,1360],\"webhookId\":\"23834751-5066-48ba-8e19-549680df2b27\",\"parameters\":{\"textBody\":\"={{ $json.output }}\",\"operation\":\"send\",\"phoneNumberId\":\"470271332838881\",\"additionalFields\":{},\"recipientPhoneNumber\":\"={{ $('WhatsApp Trigger').item.json.messages[0].from }}\"},\"credentials\":{\"whatsAppApi\":{\"id\":\"HDUOWQXeRXMVjo0Z\",\"name\":\"WhatsApp account\"}},\"typeVersion\":1},{\"id\":\"046328e9-e948-479c-ac42-567877350f1e\",\"name\":\"Send audio\",\"type\":\"n8n-nodes-base.whatsApp\",\"position\":[1260,1080],\"webhookId\":\"d18b2c98-84e4-43cf-a532-0c47d5161684\",\"parameters\":{\"mediaPath\":\"useMedian8n\",\"operation\":\"send\",\"messageType\":\"audio\",\"phoneNumberId\":\"470271332838881\",\"additionalFields\":{},\"recipientPhoneNumber\":\"={{ $('Input type').item.json.contacts[0].wa_id }}\"},\"credentials\":{\"whatsAppApi\":{\"id\":\"HDUOWQXeRXMVjo0Z\",\"name\":\"WhatsApp account\"}},\"typeVersion\":1},{\"id\":\"aa20a408-42ab-4011-9cea-331e23cda4ce\",\"name\":\"Incorrect format\",\"type\":\"n8n-nodes-base.whatsApp\",\"position\":[500,700],\"webhookId\":\"23834751-5066-48ba-8e19-549680df2b27\",\"parameters\":{\"textBody\":\"=Sorry but you can only send PDF files\",\"operation\":\"send\",\"phoneNumberId\":\"470271332838881\",\"additionalFields\":{},\"recipientPhoneNumber\":\"={{ $('WhatsApp Trigger').item.json.messages[0].from }}\"},\"credentials\":{\"whatsAppApi\":{\"id\":\"HDUOWQXeRXMVjo0Z\",\"name\":\"WhatsApp account\"}},\"typeVersion\":1},{\"id\":\"23b3750d-3638-4fd0-bab8-6082f53f19f9\",\"name\":\"Text\",\"type\":\"n8n-nodes-base.set\",\"position\":[1240,-520],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"c53cd9f9-77c1-4331-98ff-bfc9bdf95a3c\",\"name\":\"text\",\"type\":\"string\",\"value\":\"={{ $('WhatsApp Trigger').item.json.messages[0].text.body }}\"}]}},\"typeVersion\":3.4},{\"id\":\"435c020b-826b-4946-b19e-f9663f4f9f23\",\"name\":\"Audio\",\"type\":\"n8n-nodes-base.set\",\"position\":[1240,-180],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"219577d5-b028-48fc-90be-980f4171ab68\",\"name\":\"text\",\"type\":\"string\",\"value\":\"={{ $json.text }}\"}]}},\"typeVersion\":3.4},{\"id\":\"0139bb33-651e-4f37-901d-ccc705c9833a\",\"name\":\"Image\",\"type\":\"n8n-nodes-base.set\",\"position\":[1220,120],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"67552183-de2e-494a-878e-c2948e8cb6bb\",\"name\":\"text\",\"type\":\"string\",\"value\":\"=User request on the image:\\n{{ \\\"Describe the following image\\\" || $('WhatsApp Trigger').item.json.messages[0].image.caption }}\\n\\nImage description:\\n{{ $json.content }}\"}]}},\"typeVersion\":3.4},{\"id\":\"d66b7190-f83b-483e-b3f3-8c220e2c815f\",\"name\":\"File\",\"type\":\"n8n-nodes-base.set\",\"position\":[1240,460],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"67552183-de2e-494a-878e-c2948e8cb6bb\",\"name\":\"text\",\"type\":\"string\",\"value\":\"=User request on the file:\\n{{ \\\"Describe this file\\\" || $('Only PDF File').item.json.messages[0].document.caption }}\\n\\nFile content:\\n{{ $json.text }}\"}]}},\"typeVersion\":3.4},{\"id\":\"20239933-418c-436f-b15b-c293043a0328\",\"name\":\"Not supported\",\"type\":\"n8n-nodes-base.whatsApp\",\"position\":[-260,360],\"webhookId\":\"23834751-5066-48ba-8e19-549680df2b27\",\"parameters\":{\"textBody\":\"=You can only send text messages, images, audio files and PDF documents.\",\"operation\":\"send\",\"phoneNumberId\":\"470271332838881\",\"additionalFields\":{},\"recipientPhoneNumber\":\"={{ $('WhatsApp Trigger').item.json.messages[0].from }}\"},\"credentials\":{\"whatsAppApi\":{\"id\":\"HDUOWQXeRXMVjo0Z\",\"name\":\"WhatsApp account\"}},\"typeVersion\":1},{\"id\":\"117fd705-1f64-4bcc-88db-357df679fa3d\",\"name\":\"Get Image Url\",\"type\":\"n8n-nodes-base.whatsApp\",\"position\":[480,120],\"webhookId\":\"280bd5de-32d7-4d8f-93d2-e91e3b0bc161\",\"parameters\":{\"resource\":\"media\",\"operation\":\"mediaUrlGet\",\"mediaGetId\":\"={{ $('WhatsApp Trigger').item.json.messages[0].image.id }}\"},\"credentials\":{\"whatsAppApi\":{\"id\":\"HDUOWQXeRXMVjo0Z\",\"name\":\"WhatsApp account\"}},\"typeVersion\":1},{\"id\":\"3bf7364c-6263-4825-aec5-693adaed7d03\",\"name\":\"Get Audio Url\",\"type\":\"n8n-nodes-base.whatsApp\",\"position\":[460,-180],\"webhookId\":\"87caa300-7204-47b5-959a-94f4a8fbf8cf\",\"parameters\":{\"resource\":\"media\",\"operation\":\"mediaUrlGet\",\"mediaGetId\":\"={{ $('WhatsApp Trigger').item.json.messages[0].audio.id }}\"},\"credentials\":{\"whatsAppApi\":{\"id\":\"HDUOWQXeRXMVjo0Z\",\"name\":\"WhatsApp account\"}},\"typeVersion\":1},{\"id\":\"b23f8467-480a-45c1-a7df-e512290a8e13\",\"name\":\"Generate Audio Response\",\"type\":\"@n8n/n8n-nodes-langchain.openAi\",\"position\":[840,1080],\"parameters\":{\"input\":\"={{ $('AI Agent1').item.json.output }}\",\"voice\":\"onyx\",\"options\":{},\"resource\":\"audio\"},\"credentials\":{\"openAiApi\":{\"id\":\"4zwP0MSr8zkNvvV9\",\"name\":\"OpenAi account\"}},\"typeVersion\":1.8},{\"id\":\"0b139e60-fbf3-43ae-ae3f-40588f135443\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[120,-560],\"parameters\":{\"width\":1340,\"height\":240,\"content\":\"## Text\"},\"typeVersion\":1},{\"id\":\"3622ad4c-79c7-479f-a050-ff21d3077c77\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[120,-240],\"parameters\":{\"width\":1340,\"height\":240,\"content\":\"## Voice\"},\"typeVersion\":1},{\"id\":\"1f35e179-22d1-4019-a807-21803df51a46\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[120,80],\"parameters\":{\"width\":1340,\"height\":240,\"content\":\"## Image\"},\"typeVersion\":1},{\"id\":\"314b8ae2-e518-44a3-80a5-dc8482ab1fa9\",\"name\":\"Sticky Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[120,420],\"parameters\":{\"width\":1340,\"height\":240,\"content\":\"## Document\"},\"typeVersion\":1},{\"id\":\"a55cc899-3490-4b7c-b793-4f20605fc711\",\"name\":\"Sticky Note4\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[120,960],\"parameters\":{\"color\":5,\"width\":1340,\"height\":600,\"content\":\"## Response\"},\"typeVersion\":1},{\"id\":\"f37e975b-c112-4af8-badd-1fdbdb90d2f5\",\"name\":\"From audio to audio?\",\"type\":\"n8n-nodes-base.if\",\"position\":[580,1220],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"b9d1d759-f585-4791-a743-b9d72951e77c\",\"operator\":{\"type\":\"object\",\"operation\":\"exists\",\"singleValue\":true},\"leftValue\":\"={{ $('WhatsApp Trigger').item.json.messages[0].audio }}\",\"rightValue\":\"\"}]}},\"typeVersion\":2.2},{\"id\":\"864be43a-e280-4c6d-bab4-878b88304807\",\"name\":\"Input type\",\"type\":\"n8n-nodes-base.switch\",\"position\":[-420,40],\"parameters\":{\"rules\":{\"values\":[{\"outputKey\":\"Text\",\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"08fd0c80-307e-4f45-b1de-35192ee4ec5e\",\"operator\":{\"type\":\"string\",\"operation\":\"exists\",\"singleValue\":true},\"leftValue\":\"={{ $json.messages[0].text.body }}\",\"rightValue\":\"\"}]},\"renameOutput\":true},{\"outputKey\":\"Voice\",\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"b7b64446-f1ea-4622-990c-22f3999a8269\",\"operator\":{\"type\":\"object\",\"operation\":\"exists\",\"singleValue\":true},\"leftValue\":\"={{ $json.messages[0].audio }}\",\"rightValue\":\"\"}]},\"renameOutput\":true},{\"outputKey\":\"Image\",\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"202af928-a324-411a-bf15-68a349e7bf9e\",\"operator\":{\"type\":\"object\",\"operation\":\"exists\",\"singleValue\":true},\"leftValue\":\"={{ $json.messages[0].image }}\",\"rightValue\":\"\"}]},\"renameOutput\":true},{\"outputKey\":\"Document\",\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"c63299e9-6069-4bc6-afb9-7beebf6e3d69\",\"operator\":{\"type\":\"object\",\"operation\":\"exists\",\"singleValue\":true},\"leftValue\":\"={{ $json.messages[0].document }}\",\"rightValue\":\"\"}]},\"renameOutput\":true}]},\"options\":{\"fallbackOutput\":\"extra\"}},\"typeVersion\":3.2},{\"id\":\"cf327372-d2cc-40db-a057-9bfb10d6a520\",\"name\":\"Sticky Note5\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-1580,-1140],\"parameters\":{\"color\":3,\"width\":780,\"height\":2680,\"content\":\"How to obtain Whatsapp API?\\n\\n\\n### ✅ Prerequisites\\nBefore you begin, make sure you have:\\n- A **Meta Business Account**\\n- A **Facebook Developer Account**\\n- A **Verified Business**\\n- A **Phone Number** to link to WhatsApp\\n- Access to **Meta's Graph API Explorer** or **Meta for Developers portal**\\n\\n---\\n\\n### 🪜 STEP 1: Create a Meta App\\n\\n1. Go to [https://developers.facebook.com/apps](https://developers.facebook.com/apps)\\n2. Click **“Create App”**\\n3. Choose **\\\"Business\\\"** as the app type, then click **Next**\\n4. Give your app a name and enter a contact email\\n5. Choose your Business Account (or create one)\\n6. Click **Create App**\\n\\n---\\n\\n### 🪜 STEP 2: Add WhatsApp Product\\n\\n1. In your app dashboard, scroll down to **\\\"Add a Product\\\"**\\n2. Find **\\\"WhatsApp\\\"** and click **“Set Up”**\\n3. Link your **Business Manager Account**\\n\\n---\\n\\n### 🪜 STEP 3: Create a WhatsApp Business Account (if needed)\\n\\n1. If you haven’t already, go to [https://business.facebook.com/](https://business.facebook.com/)\\n2. Click **“Create Account”**, and complete your business information\\n3. Go to **Business Settings > Accounts > WhatsApp Accounts**\\n4. Add a **Phone Number** (you'll receive a verification code)\\n\\n---\\n\\n### 🪜 STEP 4: Generate a Temporary Access Token (for development)\\n\\n1. In the **App Dashboard**, go to **WhatsApp > Getting Started**\\n2. Choose your test phone number\\n3. Copy the **temporary access token** (valid for 24 hours)\\n4. Copy the **Phone Number ID** and **WhatsApp Business Account ID**\\n\\n✅ Save these 3 values:\\n- **Access Token**\\n- **Phone Number ID**\\n- **WABA ID**\\n\\n📝 Tip: For production, you will later need to create a **permanent token** (see step 7).\\n\\n---\\n\\n### 🪜 STEP 5: Set Up a Webhook URL (n8n)\\n\\n1. In n8n, set up a **Webhook node** (or use the `WhatsApp Trigger` node)\\n2. Copy the webhook URL\\n3. In the Meta Developer Dashboard:\\n   - Go to **WhatsApp > Configuration**\\n   - Click **“Edit Callback URL”**\\n   - Paste your n8n webhook URL and add a random **verify token**\\n4. In n8n, configure your webhook to respond to the verification request\\n\\n---\\n\\n### 🪜 STEP 6: Subscribe to Webhook Fields\\n\\n1. Still under **WhatsApp > Configuration**, click **\\\"Manage Subscriptions\\\"**\\n2. Enable:\\n   - `messages`\\n   - `message_status`\\n   - (Optionally `message_template_status_update`)\\n\\n---\\n\\n### 🪜 STEP 7: (Optional but recommended) Generate a Permanent Token\\n\\n1. Go to [https://developers.facebook.com/tools/access_token/](https://developers.facebook.com/tools/access_token/)\\n2. Select your app\\n3. Click **Get Token > System User Token**\\n4. Select the permissions:\\n   - `whatsapp_business_management`\\n   - `whatsapp_business_messaging`\\n   - `business_management`\\n5. Click **Generate Token**\\n6. Copy and securely store this token\\n\\n---\\n\\n### 🪜 STEP 8: Configure Credentials in n8n\\n\\n1. Go to **n8n > Settings > Credentials**\\n2. Create new credentials of type **HTTP Header Auth**\\n   - **Name:** WhatsApp\\n   - **Header Name:** `Authorization`\\n   - **Value:** `Bearer <your_access_token>`\\n3. Save\\n\\nThen, in your workflows:\\n- Use the HTTP Request node or WhatsApp node\\n- Set the `phone_number_id` in the node parameters\\n- Connect it to your WhatsApp credential\\n\\n---\\n\\n### 🧪 STEP 9: Test the Connection\\n\\n1. Use a WhatsApp number to send a message to your business phone\\n2. Your n8n workflow should be triggered\\n3. You can now send and receive messages programmatically 🎉\\n\"},\"typeVersion\":1}],\"active\":false,\"pinData\":{},\"settings\":{\"executionOrder\":\"v1\"},\"versionId\":\"4dfe4c80-3a9a-4292-bcb2-3f68bbea5a3a\",\"connections\":{\"File\":{\"main\":[[{\"node\":\"AI Agent1\",\"type\":\"main\",\"index\":0}]]},\"Text\":{\"main\":[[{\"node\":\"AI Agent1\",\"type\":\"main\",\"index\":0}]]},\"Audio\":{\"main\":[[{\"node\":\"AI Agent1\",\"type\":\"main\",\"index\":0}]]},\"Image\":{\"main\":[[{\"node\":\"AI Agent1\",\"type\":\"main\",\"index\":0}]]},\"AI Agent1\":{\"main\":[[{\"node\":\"From audio to audio?\",\"type\":\"main\",\"index\":0}]]},\"Input type\":{\"main\":[[{\"node\":\"Text\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Get Audio Url\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Get Image Url\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Only PDF File\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Not supported\",\"type\":\"main\",\"index\":0}]]},\"Get File Url\":{\"main\":[[{\"node\":\"Download File\",\"type\":\"main\",\"index\":0}]]},\"Analyze Image\":{\"main\":[[{\"node\":\"Image\",\"type\":\"main\",\"index\":0}]]},\"Download File\":{\"main\":[[{\"node\":\"Extract from File\",\"type\":\"main\",\"index\":0}]]},\"Get Audio Url\":{\"main\":[[{\"node\":\"Download Audio\",\"type\":\"main\",\"index\":0}]]},\"Get Image Url\":{\"main\":[[{\"node\":\"Download Image\",\"type\":\"main\",\"index\":0}]]},\"Only PDF File\":{\"main\":[[{\"node\":\"Get File Url\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Incorrect format\",\"type\":\"main\",\"index\":0}]]},\"Simple Memory\":{\"ai_memory\":[[{\"node\":\"AI Agent1\",\"type\":\"ai_memory\",\"index\":0}]]},\"Download Audio\":{\"main\":[[{\"node\":\"Transcribe Audio\",\"type\":\"main\",\"index\":0}]]},\"Download Image\":{\"main\":[[{\"node\":\"Analyze Image\",\"type\":\"main\",\"index\":0}]]},\"Transcribe Audio\":{\"main\":[[{\"node\":\"Audio\",\"type\":\"main\",\"index\":0}]]},\"WhatsApp Trigger\":{\"main\":[[{\"node\":\"Input type\",\"type\":\"main\",\"index\":0}]]},\"Extract from File\":{\"main\":[[{\"node\":\"File\",\"type\":\"main\",\"index\":0}]]},\"OpenAI Chat Model\":{\"ai_languageModel\":[[{\"node\":\"AI Agent1\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"From audio to audio?\":{\"main\":[[{\"node\":\"Generate Audio Response\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Send message\",\"type\":\"main\",\"index\":0}]]},\"Fix mimeType for Audio\":{\"main\":[[{\"node\":\"Send audio\",\"type\":\"main\",\"index\":0}]]},\"Generate Audio Response\":{\"main\":[[{\"node\":\"Fix mimeType for Audio\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "This workflow is a highly advanced **multimodal AI assistant** designed to operate through **WhatsApp**. It can **understand and respond** to text, images, voice messages, and PDF documents by combining **OpenAI models** with smart logic to adapt to the content received.\n\n* * *\n\n### 🎯 **Core Features**\n\n#### 📥 1. **Automatic Message Type Detection**\n\nUsing the `Input type` node, the bot detects whether the user has sent:\n\n  * Text\n  * Voice messages\n  * Images\n  * Files (PDF)\n  * Other unsupported content\n\n\n\n#### 💬 2. **Smart Text Message Handling**\n\n  * Text messages are processed by an **OpenAI GPT-4o-mini agent** with a customized system prompt.\n  * Replies are concise, accurate, and formatted for mobile readability.\n\n\n\n#### 🖼️ 3. **Image Analysis & Description**\n\n  * Images are downloaded, converted to base64, and analyzed by an **image-aware AI model**.\n  * The output is a rich, structured description, designed for visually impaired users or visual content interpretation.\n\n\n\n#### 🎙️ 4. **Voice Message Transcription & Reply**\n\n  * Audio messages are downloaded and transcribed using OpenAI Whisper.\n  * The transcribed text is analyzed and answered by the AI.\n  * Optionally, the AI reply can be **converted back to voice** using **OpenAI's text-to-speech** , and sent as an audio message.\n\n\n\n#### 📄 5. **PDF Document Extraction & Summary**\n\n  * Only PDFs are allowed (filtered via MIME type).\n  * The document’s content is extracted and combined with the user's message.\n  * The AI then provides a relevant summary or answer.\n\n\n\n#### 🧠 6. **Contextual Memory**\n\n  * Each user has a personalized session ID with a memory window of 10 interactions.\n  * This ensures a more natural and contextual conversation flow.\n\n\n\n* * *\n\n### **How It Works**\n\nThisworkflow is designed to handle incoming WhatsApp messages and process different types of inputs (**text, audio, images, and PDF documents**) using **AI-powered analysis**. Here’s how it functions:\n\n  * **Trigger** : The workflow starts with the **WhatsApp Trigger** node, which listens for incoming messages (text, audio, images, or documents).\n  * **Input Routing** : The **Input type** (Switch node) checks the message type and routes it to the appropriate processing branch: \n    * **Text** : Directly forwards the message to the AI agent for response generation.\n    * **Audio** : Downloads the audio file, transcribes it using OpenAI, and sends the transcription to the AI agent.\n    * **Image** : Downloads the image, analyzes it with OpenAI’s GPT-4 model, and generates a detailed description.\n    * **PDF Document** : Downloads the file, extracts text, and processes it with the AI agent.\n    * **Unsupported Formats** : Sends an error message if the input is not supported.\n  * **AI Processing** : The **AI Agent1** node, powered by OpenAI, processes the input (text, transcribed audio, image description, or PDF content) and generates a response.\n  * **Response Handling** : \n    * For **audio inputs** , the AI’s response is converted back into speech (using OpenAI’s TTS) and sent as a voice message.\n    * For **other inputs** , the response is sent as a text message via WhatsApp.\n  * **Memory** : The **Simple Memory** node maintains conversation context for follow-up interactions.\n\n\n\n### **Setup Steps**\n\nTo deploy this workflow in n8n, follow these steps:\n\n  1. **Configure WhatsApp API Credentials** : \n     * Set up **WhatsApp Business API** credentials (Meta Developer Account).\n     * Add the credentials in the **WhatsApp Trigger** , **Get Image/Audio/File URL** , and **Send Message** nodes.\n\n\n\n**Set Up OpenAI Integration** :\n\n  * Provide an **OpenAI API key** in the **Analyze Image** , **Transcribe Audio** , **Generate Audio Response** , and **AI Agent1** nodes.\n\n\n\n**Adjust Input Handling (Optional)** :\n\n  * Modify the **Switch node (\"Input type\")** to handle additional message types if needed.\n  * Update the **\"Only PDF File\" IF node** to support other document formats.\n\n\n\n**Test & Deploy**:\n\n  * Activate the workflow and test with different message types (text, audio, image, PDF).\n  * Ensure responses are correctly generated and sent back via WhatsApp.\n\n\n\n* * *\n\n### **Need help customizing?**\n\n[Contact me](mailto:info@n3w.it) for consulting and support or add me on [Linkedin](https://www.linkedin.com/in/davideboizza/).\n",
  "readme_html": "<!--[--><div data-v-006f9244=\"\"><p>This workflow is a highly advanced <strong>multimodal AI assistant</strong> designed to operate through <strong>WhatsApp</strong>. It can <strong>understand and respond</strong> to text, images, voice messages, and PDF documents by combining <strong>OpenAI models</strong> with smart logic to adapt to the content received.</p>\n<hr>\n<h3>🎯 <strong>Core Features</strong></h3>\n<h4>📥 1. <strong>Automatic Message Type Detection</strong></h4>\n<p>Using the <code>Input type</code> node, the bot detects whether the user has sent:</p>\n<ul>\n<li>Text</li>\n<li>Voice messages</li>\n<li>Images</li>\n<li>Files (PDF)</li>\n<li>Other unsupported content</li>\n</ul>\n<h4>💬 2. <strong>Smart Text Message Handling</strong></h4>\n<ul>\n<li>Text messages are processed by an <strong>OpenAI GPT-4o-mini agent</strong> with a customized system prompt.</li>\n<li>Replies are concise, accurate, and formatted for mobile readability.</li>\n</ul>\n<h4>🖼️ 3. <strong>Image Analysis &amp; Description</strong></h4>\n<ul>\n<li>Images are downloaded, converted to base64, and analyzed by an <strong>image-aware AI model</strong>.</li>\n<li>The output is a rich, structured description, designed for visually impaired users or visual content interpretation.</li>\n</ul>\n<h4>🎙️ 4. <strong>Voice Message Transcription &amp; Reply</strong></h4>\n<ul>\n<li>Audio messages are downloaded and transcribed using OpenAI Whisper.</li>\n<li>The transcribed text is analyzed and answered by the AI.</li>\n<li>Optionally, the AI reply can be <strong>converted back to voice</strong> using <strong>OpenAI's text-to-speech</strong>, and sent as an audio message.</li>\n</ul>\n<h4>📄 5. <strong>PDF Document Extraction &amp; Summary</strong></h4>\n<ul>\n<li>Only PDFs are allowed (filtered via MIME type).</li>\n<li>The document’s content is extracted and combined with the user's message.</li>\n<li>The AI then provides a relevant summary or answer.</li>\n</ul>\n<h4>🧠 6. <strong>Contextual Memory</strong></h4>\n<ul>\n<li>Each user has a personalized session ID with a memory window of 10 interactions.</li>\n<li>This ensures a more natural and contextual conversation flow.</li>\n</ul>\n<hr>\n<h3><strong>How It Works</strong></h3>\n<p>Thisworkflow is designed to handle incoming WhatsApp messages and process different types of inputs (<strong>text, audio, images, and PDF documents</strong>) using <strong>AI-powered analysis</strong>. Here’s how it functions:</p>\n<ul>\n<li><strong>Trigger</strong>: The workflow starts with the <strong>WhatsApp Trigger</strong> node, which listens for incoming messages (text, audio, images, or documents).</li>\n<li><strong>Input Routing</strong>: The <strong>Input type</strong> (Switch node) checks the message type and routes it to the appropriate processing branch:\n<ul>\n<li><strong>Text</strong>: Directly forwards the message to the AI agent for response generation.</li>\n<li><strong>Audio</strong>: Downloads the audio file, transcribes it using OpenAI, and sends the transcription to the AI agent.</li>\n<li><strong>Image</strong>: Downloads the image, analyzes it with OpenAI’s GPT-4 model, and generates a detailed description.</li>\n<li><strong>PDF Document</strong>: Downloads the file, extracts text, and processes it with the AI agent.</li>\n<li><strong>Unsupported Formats</strong>: Sends an error message if the input is not supported.</li>\n</ul>\n</li>\n<li><strong>AI Processing</strong>: The <strong>AI Agent1</strong> node, powered by OpenAI, processes the input (text, transcribed audio, image description, or PDF content) and generates a response.</li>\n<li><strong>Response Handling</strong>:\n<ul>\n<li>For <strong>audio inputs</strong>, the AI’s response is converted back into speech (using OpenAI’s TTS) and sent as a voice message.</li>\n<li>For <strong>other inputs</strong>, the response is sent as a text message via WhatsApp.</li>\n</ul>\n</li>\n<li><strong>Memory</strong>: The <strong>Simple Memory</strong> node maintains conversation context for follow-up interactions.</li>\n</ul>\n<h3><strong>Setup Steps</strong></h3>\n<p>To deploy this workflow in n8n, follow these steps:</p>\n<ol>\n<li><strong>Configure WhatsApp API Credentials</strong>:\n<ul>\n<li>Set up <strong>WhatsApp Business API</strong> credentials (Meta Developer Account).</li>\n<li>Add the credentials in the <strong>WhatsApp Trigger</strong>, <strong>Get Image/Audio/File URL</strong>, and <strong>Send Message</strong> nodes.</li>\n</ul>\n</li>\n</ol>\n<p><strong>Set Up OpenAI Integration</strong>:</p>\n<ul>\n<li>Provide an <strong>OpenAI API key</strong> in the <strong>Analyze Image</strong>, <strong>Transcribe Audio</strong>, <strong>Generate Audio Response</strong>, and <strong>AI Agent1</strong> nodes.</li>\n</ul>\n<p><strong>Adjust Input Handling (Optional)</strong>:</p>\n<ul>\n<li>Modify the <strong>Switch node (\"Input type\")</strong> to handle additional message types if needed.</li>\n<li>Update the <strong>\"Only PDF File\" IF node</strong> to support other document formats.</li>\n</ul>\n<p><strong>Test &amp; Deploy</strong>:</p>\n<ul>\n<li>Activate the workflow and test with different message types (text, audio, image, PDF).</li>\n<li>Ensure responses are correctly generated and sent back via WhatsApp.</li>\n</ul>\n<hr>\n<h3><strong>Need help customizing?</strong></h3>\n<p><a href=\"mailto:info@n3w.it\" rel=\"ugc nofollow\">Contact me</a> for consulting and support or add me on <a href=\"https://www.linkedin.com/in/davideboizza/\" rel=\"ugc nofollow\" target=\"_blank\">Linkedin</a>.</p>\n</div><!--]-->",
  "readme_zh": "该工作流是一款高度先进的**多模态AI助手**，专为**WhatsApp**平台设计。它能通过结合**OpenAI模型**与智能逻辑，**理解并响应**文字、图片、语音消息和PDF文档，自动适配接收到的内容类型。\n\n* * *\n\n### 🎯 **核心功能**\n\n#### 📥 1. **消息类型自动识别**\n\n通过`输入类型`节点，机器人可检测用户发送的是：\n  * 文字\n  * 语音消息\n  * 图片\n  * 文件（PDF）\n  * 其他不支持的内容\n\n#### 💬 2. **智能文本处理**\n  * 文字消息由**OpenAI GPT-4o-mini代理**处理，采用定制化系统指令\n  * 回复内容简洁精准，针对移动端阅读优化排版\n\n#### 🖼️ 3. **图像分析与描述**\n  * 图片下载后转为base64格式，由**视觉AI模型**解析\n  * 生成结构化描述，特别适合视障用户或视觉内容解读\n\n#### 🎙️ 4. **语音消息转写与回复**\n  * 使用OpenAI Whisper转录下载的语音消息\n  * AI分析转录文本并生成回复\n  * 可选通过**OpenAI文本转语音**将回复转为语音消息发送\n\n#### 📄 5. **PDF文档提取与摘要**\n  * 仅支持PDF格式（通过MIME类型过滤）\n  * 提取文档内容并与用户消息结合\n  * AI生成相关摘要或答案\n\n#### � 6. **上下文记忆**\n  * 每个用户拥有10轮对话的记忆窗口\n  * 确保对话流畅自然\n\n* * *\n\n### **运作原理**\n\n该工作流通过**AI驱动分析**处理WhatsApp消息（文字/语音/图片/PDF），运作流程如下：\n\n1. **触发**：由**WhatsApp触发器**节点监听消息\n2. **路由**：**输入类型**节点分流至对应处理分支：\n   - **文字**：直接交由AI代理生成回复\n   - **语音**：下载音频→OpenAI转写→AI处理\n   - **图片**：下载图像→GPT-4模型解析→生成描述\n   - **PDF**：下载文件→提取文本→AI处理\n   - **不支持格式**：返回错误提示\n3. **AI处理**：OpenAI驱动的**AI代理1**节点生成响应\n4. **响应处理**：\n   - 语音输入：AI回复转为语音消息\n   - 其他输入：以文字消息回复\n5. **记忆**：**简易记忆**节点维护对话上下文\n\n* * *\n\n### **部署步骤**\n\n在n8n中配置本工作流：\n\n1. **配置WhatsApp API凭证**：\n   - 申请**WhatsApp商业API**（需Meta开发者账号）\n   - 在**WhatsApp触发器**、**获取图片/音频/文件URL**和**发送消息**节点填写凭证\n\n2. **配置OpenAI集成**：\n   - 在**图像分析**、**语音转写**、**语音生成**和**AI代理1**节点填入OpenAI API密钥\n\n3. **自定义输入处理（可选）**：\n   - 修改**输入类型**节点以支持更多消息类型\n   - 调整**PDF过滤**节点以支持其他文档格式\n\n4. **测试部署**：\n   - 激活工作流并测试各类消息\n   - 确保回复准确通过WhatsApp发送\n\n* * *\n\n### **需要定制帮助？**\n\n[邮件联系](mailto:info@n3w.it)或通过[Linkedin](https://www.linkedin.com/in/davideboizza/)联系我获取咨询支持。",
  "title_zh": "AI驱动的WhatsApp聊天机器人🤖📲，支持文本、语音、图片及PDF处理，具备记忆功能🧠",
  "publish_date_zh": "上次更新于9天前",
  "workflow_json_zh": "{\"id\": \"zMtPPjJ80JJznrJP\", \"meta\": {\"instanceId\": \"a4bfc93e975ca233ac45ed7c9227d84cf5a2329310525917adaf3312e10d5462\", \"templateCredsSetupCompleted\": true}, \"name\": \"AI驱动的WhatsApp聊天机器人：支持文本、语音、图片及PDF交互\", \"tags\": [], \"nodes\": [{\"id\": \"38246f5d-0cf4-49ed-957e-0189243d0dec\", \"name\": \"WhatsApp触发器\", \"type\": \"n8n-nodes-base.whatsAppTrigger\", \"position\": [-700, 80], \"webhookId\": \"d3978cae-2aca-4553-8ac7-ab89068deabc\", \"parameters\": {\"options\": {}, \"updates\": [\"messages\"]}, \"credentials\": {\"whatsAppTriggerApi\": {\"id\": \"gylriO2te7NRPXxN\", \"name\": \"WhatsApp OAuth account\"}}, \"typeVersion\": 1}, {\"id\": \"4cc0b70b-3ecc-4415-af2f-e50d4f302786\", \"name\": \"下载图片\", \"type\": \"n8n-nodes-base.httpRequest\", \"position\": [720, 120], \"parameters\": {\"url\": \"={{ $json.url }}\", \"options\": {}, \"authentication\": \"通用凭证类型\", \"genericAuthType\": \"HTTP头部认证\"}, \"credentials\": {\"httpHeaderAuth\": {\"id\": \"FDP9FxauzJt9rkjr\", \"name\": \"WhatsApp\"}}, \"typeVersion\": 4.2}, {\"id\": \"528984be-b9ad-41c7-8b2e-ccbf275f7805\", \"name\": \"分析图像\", \"type\": \"@n8n/n8n-nodes-langchain.openAi\", \"position\": [960, 120], \"parameters\": {\"text\": \"=您是一款先进的图像描述AI助手，主要功能是通过WhatsApp对提交的图片进行详细准确的描述。\\n\\n核心功能：\\n- 当接收到图片时，您将进行全面分析并提供详尽的英文描述\\n- 描述需涵盖图像中明显及细微的各个元素\\n\\n图像描述准则：\\n- 首先概述图像主要内容\\n- 描述关键主体、人物、物体及其相互关系\\n- 注明重要视觉元素如色彩、光线、构图和视角\\n- 识别图像中可见的文字内容\\n- 描述场景或环境\\n- 提及正在发生的显著动作或事件\\n- 适时说明图像的情绪基调或氛围\\n- 如适用，识别地标建筑、知名人物或文化符号\\n\\n响应格式：\\n- 以\\\"图像描述：\\\"开头，随后进行分析\\n- 按从整体到细节的逻辑结构组织描述\\n- 使用清晰准确的可视化描述语言\\n- 较长描述采用分段格式增强可读性\\n- 结尾补充需要特别关注的显著特征\\n\\n限制说明：\\n- 若图像模糊、低分辨率或难以辨认，需明确指出这些限制\\n- 如涉及敏感内容，仅作客观事实描述不作评判\\n- 对无法明确判定的元素不做主观推测\\n\\n您的描述应当信息全面、客观公正且细致入微，使无法看到图像的人能在脑海中准确构建画面内容。\", \"modelId\": {\"__rl\": true, \"mode\": \"list\", \"value\": \"gpt-4o-mini\", \"cachedResultName\": \"GPT-4O-MINI\"}, \"options\": {\"detail\": \"auto\"}, \"resource\": \"图像\", \"inputType\": \"Base64\", \"operation\": \"分析\"}, \"credentials\": {\"openAiApi\": {\"id\": \"4zwP0MSr8zkNvvV9\", \"name\": \"OpenAi account\"}}, \"typeVersion\": 1.8}, {\"id\": \"b8898138-f987-4ef7-a5c1-d6d6b9c815f0\", \"name\": \"下载音频\", \"type\": \"n8n-nodes-base.httpRequest\", \"position\": [720, -180], \"parameters\": {\"url\": \"={{ $json.url }}\", \"options\": {}, \"authentication\": \"通用凭证类型\", \"genericAuthType\": \"HTTP头部认证\"}, \"credentials\": {\"httpHeaderAuth\": {\"id\": \"FDP9FxauzJt9rkjr\", \"name\": \"WhatsApp\"}}, \"typeVersion\": 4.2}, {\"id\": \"e68bea55-f43a-4143-afca-1348b35e5879\", \"name\": \"转录音频\", \"type\": \"@n8n/n8n-nodes-langchain.openAi\", \"position\": [960, -180], \"parameters\": {\"options\": {}, \"resource\": \"音频\", \"operation\": \"转录\"}, \"credentials\": {\"openAiApi\": {\"id\": \"4zwP0MSr8zkNvvV9\", \"name\": \"OpenAi account\"}}, \"typeVersion\": 1.8}, {\"id\": \"1c0aa0c3-cee4-40f1-9e13-9365cc06443a\", \"name\": \"OpenAI 聊天模型\", \"type\": \"@n8n/n8n-nodes-langchain.lmChatOpenAi\", \"position\": [160, 1440], \"parameters\": {\"model\": {\"__rl\": true, \"mode\": \"list\", \"value\": \"gpt-4o-mini\"}, \"options\": {}}, \"credentials\": {\"openAiApi\": {\"id\": \"4zwP0MSr8zkNvvV9\", \"name\": \"OpenAi account\"}}, \"typeVersion\": 1.2}, {\"id\": \"d2215cf8-49e1-433b-b9c3-a219e6432cba\", \"name\": \"AI代理1\", \"type\": \"@n8n/n8n-nodes-langchain.agent\", \"position\": [160, 1220], \"parameters\": {\"text\": \"= {{ $json.text }}\", \"options\": {\"systemMessage\": \"You are an intelligent assistant. Your purpose is to analyze various types of input and provide helpful, accurate responses.\\n\\nCAPABILITIES:\\n- Process and respond to text messages\\n- Analyze uploaded files\\n- Interpret and describe images\\n- Transcribe and understand voice messages\\n\\nINPUT HANDLING:\\n1. For text messages: Analyze the content, understand the intent, and provide a relevant response.\\n2. For file analysis: Examine the file content, extract key information, and summarize important points also based on the questions asked.\\n3. For image analysis: Describe what you see in the image, identify key elements, and respond to any questions about the image.\\n4. For voice messages: Transcribe the audio, understand the message, and respond appropriately.\\n\\nRESPONSE GUIDELINES:\\n- Be concise but thorough\\n- Prioritize accuracy over speculation\\n- Maintain a professional and helpful tone\\n- When uncertain, acknowledge limitations\\n- Format responses for easy reading on mobile devices\\n- Include actionable information when appropriate\\n\\nLIMITATIONS:\\n- Mention if you're unable to process certain file formats\\n- Indicate if an image is unclear or if details are difficult to discern\\n- Note if audio quality impacts transcription accuracy\\n\\nSECURITY & PRIVACY:\\n- Do not store or remember sensitive information shared in files, images, or voice notes\\n- Do not share personal information across different user interactions\\n- Inform users about data privacy limitations when relevant\\n\\nAnalyze all inputs carefully before responding. Your goal is to provide value through accurate information and helpful assistance.\"}, \"promptType\": \"定义\"}, \"typeVersion\": 1.8}, {\"id\": \"103825d0-8521-43c7-8246-9cc1faca42e1\", \"name\": \"下载文件\", \"type\": \"n8n-nodes-base.httpRequest\", \"position\": [720, 460], \"parameters\": {\"url\": \"={{ $json.url }}\", \"options\": {}, \"authentication\": \"通用凭证类型\", \"genericAuthType\": \"HTTP头部认证\"}, \"credentials\": {\"httpHeaderAuth\": {\"id\": \"FDP9FxauzJt9rkjr\", \"name\": \"WhatsApp\"}}, \"typeVersion\": 4.2}, {\"id\": \"98077f98-6dcf-4932-9363-19bf1fdc299e\", \"name\": \"文件摘录\", \"type\": \"n8n-nodes-base.extractFromFile\", \"position\": [980, 460], \"parameters\": {\"options\": {}, \"operation\": \"pdf\"}, \"typeVersion\": 1}, {\"id\": \"fefc8b87-d64e-4ff9-9f62-1ac3af2bf17e\", \"name\": \"简单记忆\", \"type\": \"@n8n/n8n-nodes-langchain.memoryBufferWindow\", \"position\": [300, 1440], \"parameters\": {\"sessionKey\": \"=记忆_{{ $('WhatsApp Trigger').item.json.contacts[0].wa_id }}\", \"sessionIdType\": \"自定义键\", \"contextWindowLength\": 10}, \"typeVersion\": 1.3}, {\"id\": \"83ac997d-6ba0-4eb7-bd6c-80671f03c56c\", \"name\": \"获取文件链接\", \"type\": \"n8n-nodes-base.whatsApp\", \"position\": [500, 460], \"webhookId\": \"280bd5de-32d7-4d8f-93d2-e91e3b0bc161\", \"parameters\": {\"resource\": \"媒体\", \"operation\": \"媒体链接获取\", \"mediaGetId\": \"由于您提供的文本是一个模板字符串或代码片段，且包含变量引用（如`$('WhatsApp Trigger').item.json.messages[0].document.id`），直接翻译可能导致功能失效。若需保留代码逻辑，建议保持原文不变；若需翻译上下文说明部分，请提供更完整的文本内容。  \\n\\n当前内容为代码模板，无直接可译的中文对应项。\"}, \"credentials\": {\"whatsAppApi\": {\"id\": \"HDUOWQXeRXMVjo0Z\", \"name\": \"WhatsApp account\"}}, \"typeVersion\": 1}, {\"id\": \"56b23f60-57c3-4ea7-a4e8-64029a2e44c1\", \"name\": \"仅限PDF文件\", \"type\": \"n8n-nodes-base.if\", \"position\": [220, 480], \"parameters\": {\"options\": {}, \"conditions\": {\"options\": {\"version\": 2, \"leftValue\": \"\", \"caseSensitive\": true, \"typeValidation\": \"strict\"}, \"combinator\": \"and\", \"conditions\": [{\"id\": \"f52d2aaa-e0b2-45e5-8c4b-ceef42182a0d\", \"operator\": {\"name\": \"filter.operator.equals\", \"type\": \"string\", \"operation\": \"equals\"}, \"leftValue\": \"={{ $json.messages[0].document.mime_type }}\", \"rightValue\": \"application/pdf\"}]}}, \"typeVersion\": 2.2}, {\"id\": \"fa733b7b-16a7-4a9b-86b3-88395535ecd5\", \"name\": \"修复音频的mimeType\", \"type\": \"n8n-nodes-base.code\", \"position\": [1040, 1080], \"parameters\": {\"jsCode\": \"for (const item of $input.all()) {\\n  if (item.binary) {\\n    const binaryPropertyNames = Object.keys(item.binary);\\n    for (const propName of binaryPropertyNames) {\\n      if (item.binary[propName].mimeType === 'audio/mp3') {\\n        item.binary[propName].mimeType = 'audio/mpeg';\\n      }\\n    }\\n  }\\n}\\n\\nreturn $input.all();\"}, \"typeVersion\": 2}, {\"id\": \"0d99c2fa-945b-487a-b929-742e8b1b6859\", \"name\": \"发送消息\", \"type\": \"n8n-nodes-base.whatsApp\", \"position\": [840, 1360], \"webhookId\": \"23834751-5066-48ba-8e19-549680df2b27\", \"parameters\": {\"textBody\": \"= {{ $json.output }}\", \"operation\": \"发送\", \"phoneNumberId\": \"470271332838881\", \"additionalFields\": {}, \"recipientPhoneNumber\": \"={{ $('WhatsApp 触发器').item.json.messages[0].from }}\"}, \"credentials\": {\"whatsAppApi\": {\"id\": \"HDUOWQXeRXMVjo0Z\", \"name\": \"WhatsApp account\"}}, \"typeVersion\": 1}, {\"id\": \"046328e9-e948-479c-ac42-567877350f1e\", \"name\": \"发送音频\", \"type\": \"n8n-nodes-base.whatsApp\", \"position\": [1260, 1080], \"webhookId\": \"d18b2c98-84e4-43cf-a532-0c47d5161684\", \"parameters\": {\"mediaPath\": \"使用中位数8n\", \"operation\": \"发送\", \"messageType\": \"音频\", \"phoneNumberId\": \"470271332838881\", \"additionalFields\": {}, \"recipientPhoneNumber\": \"由于您提供的代码片段 `{{ $('Input type').item.json.contacts[0].wa_id }}` 是一个模板字符串或变量引用（常见于JavaScript模板或某些框架中），而非可直接翻译的自然语言文本，因此无法进行传统意义上的翻译。该代码的功能是动态获取一个嵌套数据结构中的WhatsApp ID字段值。\\n\\n若需中文语境下的等效代码表达，可保留结构并调整注释：\\n```javascript\\n{{ $('输入类型').item.json.contacts[0].wa_id }}  // 从联系人数组首项获取WhatsApp ID\\n```\"}, \"credentials\": {\"whatsAppApi\": {\"id\": \"HDUOWQXeRXMVjo0Z\", \"name\": \"WhatsApp account\"}}, \"typeVersion\": 1}, {\"id\": \"aa20a408-42ab-4011-9cea-331e23cda4ce\", \"name\": \"格式错误\", \"type\": \"n8n-nodes-base.whatsApp\", \"position\": [500, 700], \"webhookId\": \"23834751-5066-48ba-8e19-549680df2b27\", \"parameters\": {\"textBody\": \"=抱歉，但您只能发送PDF文件。\", \"operation\": \"发送\", \"phoneNumberId\": \"470271332838881\", \"additionalFields\": {}, \"recipientPhoneNumber\": \"={{ $('WhatsApp Trigger').item.json.messages[0].from }}\"}, \"credentials\": {\"whatsAppApi\": {\"id\": \"HDUOWQXeRXMVjo0Z\", \"name\": \"WhatsApp account\"}}, \"typeVersion\": 1}, {\"id\": \"23b3750d-3638-4fd0-bab8-6082f53f19f9\", \"name\": \"文本\", \"type\": \"n8n-nodes-base.set\", \"position\": [1240, -520], \"parameters\": {\"options\": {}, \"assignments\": {\"assignments\": [{\"id\": \"c53cd9f9-77c1-4331-98ff-bfc9bdf95a3c\", \"name\": \"text\", \"type\": \"string\", \"value\": \"={{ $('WhatsApp Trigger').item.json.messages[0].text.body }}\"}]}}, \"typeVersion\": 3.4}, {\"id\": \"435c020b-826b-4946-b19e-f9663f4f9f23\", \"name\": \"音频\", \"type\": \"n8n-nodes-base.set\", \"position\": [1240, -180], \"parameters\": {\"options\": {}, \"assignments\": {\"assignments\": [{\"id\": \"219577d5-b028-48fc-90be-980f4171ab68\", \"name\": \"text\", \"type\": \"string\", \"value\": \"={{ $json.text }}\"}]}}, \"typeVersion\": 3.4}, {\"id\": \"0139bb33-651e-4f37-901d-ccc705c9833a\", \"name\": \"图像\", \"type\": \"n8n-nodes-base.set\", \"position\": [1220, 120], \"parameters\": {\"options\": {}, \"assignments\": {\"assignments\": [{\"id\": \"67552183-de2e-494a-878e-c2948e8cb6bb\", \"name\": \"text\", \"type\": \"string\", \"value\": \"=User request on the image:\\n{{ \\\"Describe the following image\\\" || $('WhatsApp Trigger').item.json.messages[0].image.caption }}\\n\\nImage description:\\n{{ $json.content }}\"}]}}, \"typeVersion\": 3.4}, {\"id\": \"d66b7190-f83b-483e-b3f3-8c220e2c815f\", \"name\": \"文件\", \"type\": \"n8n-nodes-base.set\", \"position\": [1240, 460], \"parameters\": {\"options\": {}, \"assignments\": {\"assignments\": [{\"id\": \"67552183-de2e-494a-878e-c2948e8cb6bb\", \"name\": \"text\", \"type\": \"string\", \"value\": \"=User request on the file:\\n{{ \\\"Describe this file\\\" || $('Only PDF File').item.json.messages[0].document.caption }}\\n\\nFile content:\\n{{ $json.text }}\"}]}}, \"typeVersion\": 3.4}, {\"id\": \"20239933-418c-436f-b15b-c293043a0328\", \"name\": \"不支持\", \"type\": \"n8n-nodes-base.whatsApp\", \"position\": [-260, 360], \"webhookId\": \"23834751-5066-48ba-8e19-549680df2b27\", \"parameters\": {\"textBody\": \"您只能发送短信、图片、音频文件和PDF文档。\", \"operation\": \"发送\", \"phoneNumberId\": \"470271332838881\", \"additionalFields\": {}, \"recipientPhoneNumber\": \"={{ $('WhatsApp 触发器').item.json.messages[0].from }}\"}, \"credentials\": {\"whatsAppApi\": {\"id\": \"HDUOWQXeRXMVjo0Z\", \"name\": \"WhatsApp account\"}}, \"typeVersion\": 1}, {\"id\": \"117fd705-1f64-4bcc-88db-357df679fa3d\", \"name\": \"获取图片链接\", \"type\": \"n8n-nodes-base.whatsApp\", \"position\": [480, 120], \"webhookId\": \"280bd5de-32d7-4d8f-93d2-e91e3b0bc161\", \"parameters\": {\"resource\": \"媒体\", \"operation\": \"媒体网址获取\", \"mediaGetId\": \"={{ $('WhatsApp触发器').条目.数据.消息[0].图片.标识 }}\"}, \"credentials\": {\"whatsAppApi\": {\"id\": \"HDUOWQXeRXMVjo0Z\", \"name\": \"WhatsApp account\"}}, \"typeVersion\": 1}, {\"id\": \"3bf7364c-6263-4825-aec5-693adaed7d03\", \"name\": \"获取音频链接\", \"type\": \"n8n-nodes-base.whatsApp\", \"position\": [460, -180], \"webhookId\": \"87caa300-7204-47b5-959a-94f4a8fbf8cf\", \"parameters\": {\"resource\": \"媒体\", \"operation\": \"媒体网址获取\", \"mediaGetId\": \"由于您提供的文本是一个模板字符串或代码片段，且包含变量引用（如`$('WhatsApp Trigger').item.json.messages[0].audio.id`），直接翻译会导致功能失效。若需保留代码逻辑，建议保持原文不变；若需描述性翻译，可译为：\\n\\n`WhatsApp触发器中第一条消息的音频ID`\\n\\n请根据实际使用场景选择是否需要调整代码结构或保留原始变量引用格式。\"}, \"credentials\": {\"whatsAppApi\": {\"id\": \"HDUOWQXeRXMVjo0Z\", \"name\": \"WhatsApp account\"}}, \"typeVersion\": 1}, {\"id\": \"b23f8467-480a-45c1-a7df-e512290a8e13\", \"name\": \"生成音频响应\", \"type\": \"@n8n/n8n-nodes-langchain.openAi\", \"position\": [840, 1080], \"parameters\": {\"input\": \"=AI代理1的项目JSON输出\", \"voice\": \"玛瑙\", \"options\": {}, \"resource\": \"音频\"}, \"credentials\": {\"openAiApi\": {\"id\": \"4zwP0MSr8zkNvvV9\", \"name\": \"OpenAi account\"}}, \"typeVersion\": 1.8}, {\"id\": \"0b139e60-fbf3-43ae-ae3f-40588f135443\", \"name\": \"便利贴\", \"type\": \"n8n-nodes-base.stickyNote\", \"position\": [120, -560], \"parameters\": {\"width\": 1340, \"height\": 240, \"content\": \"## 文本\"}, \"typeVersion\": 1}, {\"id\": \"3622ad4c-79c7-479f-a050-ff21d3077c77\", \"name\": \"便利贴1\", \"type\": \"n8n-nodes-base.stickyNote\", \"position\": [120, -240], \"parameters\": {\"width\": 1340, \"height\": 240, \"content\": \"## 声音\"}, \"typeVersion\": 1}, {\"id\": \"1f35e179-22d1-4019-a807-21803df51a46\", \"name\": \"便利贴2\", \"type\": \"n8n-nodes-base.stickyNote\", \"position\": [120, 80], \"parameters\": {\"width\": 1340, \"height\": 240, \"content\": \"## 图片\"}, \"typeVersion\": 1}, {\"id\": \"314b8ae2-e518-44a3-80a5-dc8482ab1fa9\", \"name\": \"便利贴3\", \"type\": \"n8n-nodes-base.stickyNote\", \"position\": [120, 420], \"parameters\": {\"width\": 1340, \"height\": 240, \"content\": \"## 文档\"}, \"typeVersion\": 1}, {\"id\": \"a55cc899-3490-4b7c-b793-4f20605fc711\", \"name\": \"便利贴4\", \"type\": \"n8n-nodes-base.stickyNote\", \"position\": [120, 960], \"parameters\": {\"color\": 5, \"width\": 1340, \"height\": 600, \"content\": \"## 回应\"}, \"typeVersion\": 1}, {\"id\": \"f37e975b-c112-4af8-badd-1fdbdb90d2f5\", \"name\": \"从音频到音频？\", \"type\": \"n8n-nodes-base.if\", \"position\": [580, 1220], \"parameters\": {\"options\": {}, \"conditions\": {\"options\": {\"version\": 2, \"leftValue\": \"\", \"caseSensitive\": true, \"typeValidation\": \"strict\"}, \"combinator\": \"and\", \"conditions\": [{\"id\": \"b9d1d759-f585-4791-a743-b9d72951e77c\", \"operator\": {\"type\": \"object\", \"operation\": \"exists\", \"singleValue\": true}, \"leftValue\": \"={{ $('WhatsApp Trigger').item.json.messages[0].audio }}\", \"rightValue\": \"\"}]}}, \"typeVersion\": 2.2}, {\"id\": \"864be43a-e280-4c6d-bab4-878b88304807\", \"name\": \"输入类型\", \"type\": \"n8n-nodes-base.switch\", \"position\": [-420, 40], \"parameters\": {\"rules\": {\"values\": [{\"outputKey\": \"Text\", \"conditions\": {\"options\": {\"version\": 2, \"leftValue\": \"\", \"caseSensitive\": true, \"typeValidation\": \"strict\"}, \"combinator\": \"and\", \"conditions\": [{\"id\": \"08fd0c80-307e-4f45-b1de-35192ee4ec5e\", \"operator\": {\"type\": \"string\", \"operation\": \"exists\", \"singleValue\": true}, \"leftValue\": \"={{ $json.messages[0].text.body }}\", \"rightValue\": \"\"}]}, \"renameOutput\": true}, {\"outputKey\": \"Voice\", \"conditions\": {\"options\": {\"version\": 2, \"leftValue\": \"\", \"caseSensitive\": true, \"typeValidation\": \"strict\"}, \"combinator\": \"and\", \"conditions\": [{\"id\": \"b7b64446-f1ea-4622-990c-22f3999a8269\", \"operator\": {\"type\": \"object\", \"operation\": \"exists\", \"singleValue\": true}, \"leftValue\": \"={{ $json.messages[0].audio }}\", \"rightValue\": \"\"}]}, \"renameOutput\": true}, {\"outputKey\": \"Image\", \"conditions\": {\"options\": {\"version\": 2, \"leftValue\": \"\", \"caseSensitive\": true, \"typeValidation\": \"strict\"}, \"combinator\": \"and\", \"conditions\": [{\"id\": \"202af928-a324-411a-bf15-68a349e7bf9e\", \"operator\": {\"type\": \"object\", \"operation\": \"exists\", \"singleValue\": true}, \"leftValue\": \"={{ $json.messages[0].image }}\", \"rightValue\": \"\"}]}, \"renameOutput\": true}, {\"outputKey\": \"Document\", \"conditions\": {\"options\": {\"version\": 2, \"leftValue\": \"\", \"caseSensitive\": true, \"typeValidation\": \"strict\"}, \"combinator\": \"and\", \"conditions\": [{\"id\": \"c63299e9-6069-4bc6-afb9-7beebf6e3d69\", \"operator\": {\"type\": \"object\", \"operation\": \"exists\", \"singleValue\": true}, \"leftValue\": \"={{ $json.messages[0].document }}\", \"rightValue\": \"\"}]}, \"renameOutput\": true}]}, \"options\": {\"fallbackOutput\": \"extra\"}}, \"typeVersion\": 3.2}, {\"id\": \"cf327372-d2cc-40db-a057-9bfb10d6a520\", \"name\": \"便利贴5\", \"type\": \"n8n-nodes-base.stickyNote\", \"position\": [-1580, -1140], \"parameters\": {\"color\": 3, \"width\": 780, \"height\": 2680, \"content\": \"如何获取WhatsApp API？\\n\\n### ✅ 前提条件\\n开始前请确保拥有：\\n- **Meta企业账户**\\n- **Facebook开发者账户**\\n- **已验证的企业资质**\\n- **可绑定WhatsApp的手机号码**\\n- **Meta Graph API Explorer**或**Meta开发者门户**访问权限\\n\\n---\\n\\n### 🪜 第一步：创建Meta应用\\n\\n1. 访问 [https://developers.facebook.com/apps](https://developers.facebook.com/apps)\\n2. 点击**\\\"创建应用\\\"**\\n3. 选择**\\\"企业\\\"**类型，点击**下一步**\\n4. 输入应用名称和联系邮箱\\n5. 选择企业账户（或新建）\\n6. 点击**创建应用**\\n\\n---\\n\\n### 🪜 第二步：添加WhatsApp功能\\n\\n1. 在应用面板底部找到**\\\"添加功能\\\"**\\n2. 选择**\\\"WhatsApp\\\"**并点击**\\\"设置\\\"**\\n3. 关联您的**企业管理平台账户**\\n\\n---\\n\\n### 🪜 第三步：创建WhatsApp企业账户（如需）\\n\\n1. 访问 [https://business.facebook.com/](https://business.facebook.com/)\\n2. 点击**\\\"创建账户\\\"**完善企业信息\\n3. 进入**企业设置 > 账户 > WhatsApp账户**\\n4. 添加**手机号码**（将收到验证码）\\n\\n---\\n\\n### 🪜 第四步：生成临时访问令牌（开发用）\\n\\n1. 在**应用面板**进入**WhatsApp > 快速入门**\\n2. 选择测试手机号\\n3. 复制**临时访问令牌**（24小时有效）\\n4. 记录**电话号码ID**和**WhatsApp企业账户ID**\\n\\n✅ 保存这三个值：\\n- **访问令牌**\\n- **电话号码ID**\\n- **WABA企业账户ID**\\n\\n📝 提示：正式环境需创建**永久令牌**（见第七步）\\n\\n---\\n\\n### 🪜 第五步：配置Webhook URL（n8n）\\n\\n1. 在n8n创建**Webhook节点**（或使用`WhatsApp触发器`节点）\\n2. 复制webhook地址\\n3. 在Meta开发者面板：\\n   - 进入**WhatsApp > 配置**\\n   - 点击**\\\"编辑回调URL\\\"**\\n   - 粘贴n8n的webhook地址并设置随机**验证令牌**\\n4. 在n8n配置webhook响应验证请求\\n\\n---\\n\\n### 🪜 第六步：订阅Webhook事件\\n\\n1. 在**WhatsApp > 配置**点击**\\\"管理订阅\\\"**\\n2. 启用：\\n   - `messages`（消息）\\n   - `message_status`（消息状态）\\n   - （可选`message_template_status_update`模板状态更新）\\n\\n---\\n\\n### 🪜 第七步：（推荐）生成永久令牌\\n\\n1. 访问 [https://developers.facebook.com/tools/access_token/](https://developers.facebook.com/tools/access_token/)\\n2. 选择您的应用\\n3. 点击**获取令牌 > 系统用户令牌**\\n4. 勾选权限：\\n   - `whatsapp_business_management`\\n   - `whatsapp_business_messaging`\\n   - `business_management`\\n5. 点击**生成令牌**\\n6. 复制并安全存储该令牌\\n\\n---\\n\\n### 🪜 第八步：配置n8n凭证\\n\\n1. 进入**n8n > 设置 > 凭证**\\n2. 创建**HTTP头部认证**类型凭证：\\n   - **名称：** WhatsApp\\n   - **头部名称：** `Authorization`\\n   - **值：** `Bearer <您的访问令牌>`\\n3. 保存\\n\\n在工作流中：\\n- 使用HTTP请求节点或WhatsApp节点\\n- 在节点参数设置`phone_number_id`\\n- 关联WhatsApp凭证\\n\\n---\\n\\n### 🧪 第九步：测试连接\\n\\n1. 用WhatsApp号码向企业号发送消息\\n2. n8n工作流应被触发\\n3. 现在可编程收发消息 🎉\"}, \"typeVersion\": 1}], \"active\": false, \"pinData\": {}, \"settings\": {\"executionOrder\": \"v1\"}, \"versionId\": \"4dfe4c80-3a9a-4292-bcb2-3f68bbea5a3a\", \"connections\": {\"File\": {\"main\": [[{\"node\": \"AI Agent1\", \"type\": \"main\", \"index\": 0}]]}, \"Text\": {\"main\": [[{\"node\": \"AI Agent1\", \"type\": \"main\", \"index\": 0}]]}, \"Audio\": {\"main\": [[{\"node\": \"AI Agent1\", \"type\": \"main\", \"index\": 0}]]}, \"Image\": {\"main\": [[{\"node\": \"AI Agent1\", \"type\": \"main\", \"index\": 0}]]}, \"AI Agent1\": {\"main\": [[{\"node\": \"From audio to audio?\", \"type\": \"main\", \"index\": 0}]]}, \"Input type\": {\"main\": [[{\"node\": \"Text\", \"type\": \"main\", \"index\": 0}], [{\"node\": \"Get Audio Url\", \"type\": \"main\", \"index\": 0}], [{\"node\": \"Get Image Url\", \"type\": \"main\", \"index\": 0}], [{\"node\": \"Only PDF File\", \"type\": \"main\", \"index\": 0}], [{\"node\": \"Not supported\", \"type\": \"main\", \"index\": 0}]]}, \"Get File Url\": {\"main\": [[{\"node\": \"Download File\", \"type\": \"main\", \"index\": 0}]]}, \"Analyze Image\": {\"main\": [[{\"node\": \"Image\", \"type\": \"main\", \"index\": 0}]]}, \"Download File\": {\"main\": [[{\"node\": \"Extract from File\", \"type\": \"main\", \"index\": 0}]]}, \"Get Audio Url\": {\"main\": [[{\"node\": \"Download Audio\", \"type\": \"main\", \"index\": 0}]]}, \"Get Image Url\": {\"main\": [[{\"node\": \"Download Image\", \"type\": \"main\", \"index\": 0}]]}, \"Only PDF File\": {\"main\": [[{\"node\": \"Get File Url\", \"type\": \"main\", \"index\": 0}], [{\"node\": \"Incorrect format\", \"type\": \"main\", \"index\": 0}]]}, \"Simple Memory\": {\"ai_memory\": [[{\"node\": \"AI Agent1\", \"type\": \"ai_memory\", \"index\": 0}]]}, \"Download Audio\": {\"main\": [[{\"node\": \"Transcribe Audio\", \"type\": \"main\", \"index\": 0}]]}, \"Download Image\": {\"main\": [[{\"node\": \"Analyze Image\", \"type\": \"main\", \"index\": 0}]]}, \"Transcribe Audio\": {\"main\": [[{\"node\": \"Audio\", \"type\": \"main\", \"index\": 0}]]}, \"WhatsApp Trigger\": {\"main\": [[{\"node\": \"Input type\", \"type\": \"main\", \"index\": 0}]]}, \"Extract from File\": {\"main\": [[{\"node\": \"File\", \"type\": \"main\", \"index\": 0}]]}, \"OpenAI Chat Model\": {\"ai_languageModel\": [[{\"node\": \"AI Agent1\", \"type\": \"ai_languageModel\", \"index\": 0}]]}, \"From audio to audio?\": {\"main\": [[{\"node\": \"Generate Audio Response\", \"type\": \"main\", \"index\": 0}], [{\"node\": \"Send message\", \"type\": \"main\", \"index\": 0}]]}, \"Fix mimeType for Audio\": {\"main\": [[{\"node\": \"Send audio\", \"type\": \"main\", \"index\": 0}]]}, \"Generate Audio Response\": {\"main\": [[{\"node\": \"Fix mimeType for Audio\", \"type\": \"main\", \"index\": 0}]]}}}"
}