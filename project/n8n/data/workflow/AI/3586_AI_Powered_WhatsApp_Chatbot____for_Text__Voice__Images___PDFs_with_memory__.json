{
  "title": "AI-Powered WhatsApp Chatbot ğŸ¤–ğŸ“² for Text, Voice, Images & PDFs with memory ğŸ§ ",
  "url": "https://n8n.io/workflows/3586-ai-powered-whatsapp-chatbot-for-text-voice-images-and-pdfs-with-memory/",
  "category": "AI",
  "category_url": "https://n8n.io/workflows/categories/ai/",
  "author": "Davide",
  "publish_date": "Last update 9 days ago",
  "content": "",
  "workflow_json": "{\"id\":\"zMtPPjJ80JJznrJP\",\"meta\":{\"instanceId\":\"a4bfc93e975ca233ac45ed7c9227d84cf5a2329310525917adaf3312e10d5462\",\"templateCredsSetupCompleted\":true},\"name\":\"AI-Powered WhatsApp Chatbot for Text, Voice, Images & PDFs\",\"tags\":[],\"nodes\":[{\"id\":\"38246f5d-0cf4-49ed-957e-0189243d0dec\",\"name\":\"WhatsApp Trigger\",\"type\":\"n8n-nodes-base.whatsAppTrigger\",\"position\":[-700,80],\"webhookId\":\"d3978cae-2aca-4553-8ac7-ab89068deabc\",\"parameters\":{\"options\":{},\"updates\":[\"messages\"]},\"credentials\":{\"whatsAppTriggerApi\":{\"id\":\"gylriO2te7NRPXxN\",\"name\":\"WhatsApp OAuth account\"}},\"typeVersion\":1},{\"id\":\"4cc0b70b-3ecc-4415-af2f-e50d4f302786\",\"name\":\"Download Image\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[720,120],\"parameters\":{\"url\":\"={{ $json.url }}\",\"options\":{},\"authentication\":\"genericCredentialType\",\"genericAuthType\":\"httpHeaderAuth\"},\"credentials\":{\"httpHeaderAuth\":{\"id\":\"FDP9FxauzJt9rkjr\",\"name\":\"WhatsApp\"}},\"typeVersion\":4.2},{\"id\":\"528984be-b9ad-41c7-8b2e-ccbf275f7805\",\"name\":\"Analyze Image\",\"type\":\"@n8n/n8n-nodes-langchain.openAi\",\"position\":[960,120],\"parameters\":{\"text\":\"=You are an advanced image description AI assistant . Your primary function is to provide detailed, accurate descriptions of images submitted through WhatsApp.\\n\\nCORE FUNCTIONALITY:\\n- When presented with an image, you will analyze it thoroughly and provide a comprehensive description in English.\\n- Your descriptions should capture both the obvious and subtle elements within the image.\\n\\nIMAGE DESCRIPTION GUIDELINES:\\n- Begin with a broad overview of what the image contains\\n- Describe key subjects, people, objects, and their relationships\\n- Note significant visual elements such as colors, lighting, composition, and perspective\\n- Identify any text visible in the image\\n- Describe the setting or environment\\n- Mention any notable actions or events taking place\\n- Comment on mood, tone, or atmosphere when relevant\\n- If applicable, identify landmarks, famous people, or cultural references\\n\\nRESPONSE FORMAT:\\n- Start with \\\"Image Description:\\\" followed by your analysis\\n- Structure your description in a logical manner (general to specific)\\n- Use clear, precise language appropriate for visual description\\n- Format longer descriptions with paragraphs to enhance readability\\n- End with any notable observations that might require special attention\\n\\nLIMITATIONS:\\n- If the image is blurry, low resolution, or difficult to interpret, acknowledge these limitations\\n- If an image contains potentially sensitive content, provide a factual description without judgment\\n- Do not make assumptions about elements that cannot be clearly determined\\n\\nYour descriptions should be informative, objective, and thorough, enabling someone who cannot see the image to form an accurate mental picture of its contents.\",\"modelId\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"gpt-4o-mini\",\"cachedResultName\":\"GPT-4O-MINI\"},\"options\":{\"detail\":\"auto\"},\"resource\":\"image\",\"inputType\":\"base64\",\"operation\":\"analyze\"},\"credentials\":{\"openAiApi\":{\"id\":\"4zwP0MSr8zkNvvV9\",\"name\":\"OpenAi account\"}},\"typeVersion\":1.8},{\"id\":\"b8898138-f987-4ef7-a5c1-d6d6b9c815f0\",\"name\":\"Download Audio\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[720,-180],\"parameters\":{\"url\":\"={{ $json.url }}\",\"options\":{},\"authentication\":\"genericCredentialType\",\"genericAuthType\":\"httpHeaderAuth\"},\"credentials\":{\"httpHeaderAuth\":{\"id\":\"FDP9FxauzJt9rkjr\",\"name\":\"WhatsApp\"}},\"typeVersion\":4.2},{\"id\":\"e68bea55-f43a-4143-afca-1348b35e5879\",\"name\":\"Transcribe Audio\",\"type\":\"@n8n/n8n-nodes-langchain.openAi\",\"position\":[960,-180],\"parameters\":{\"options\":{},\"resource\":\"audio\",\"operation\":\"transcribe\"},\"credentials\":{\"openAiApi\":{\"id\":\"4zwP0MSr8zkNvvV9\",\"name\":\"OpenAi account\"}},\"typeVersion\":1.8},{\"id\":\"1c0aa0c3-cee4-40f1-9e13-9365cc06443a\",\"name\":\"OpenAI Chat Model\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\"position\":[160,1440],\"parameters\":{\"model\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"gpt-4o-mini\"},\"options\":{}},\"credentials\":{\"openAiApi\":{\"id\":\"4zwP0MSr8zkNvvV9\",\"name\":\"OpenAi account\"}},\"typeVersion\":1.2},{\"id\":\"d2215cf8-49e1-433b-b9c3-a219e6432cba\",\"name\":\"AI Agent1\",\"type\":\"@n8n/n8n-nodes-langchain.agent\",\"position\":[160,1220],\"parameters\":{\"text\":\"={{ $json.text }}\",\"options\":{\"systemMessage\":\"You are an intelligent assistant. Your purpose is to analyze various types of input and provide helpful, accurate responses.\\n\\nCAPABILITIES:\\n- Process and respond to text messages\\n- Analyze uploaded files\\n- Interpret and describe images\\n- Transcribe and understand voice messages\\n\\nINPUT HANDLING:\\n1. For text messages: Analyze the content, understand the intent, and provide a relevant response.\\n2. For file analysis: Examine the file content, extract key information, and summarize important points also based on the questions asked.\\n3. For image analysis: Describe what you see in the image, identify key elements, and respond to any questions about the image.\\n4. For voice messages: Transcribe the audio, understand the message, and respond appropriately.\\n\\nRESPONSE GUIDELINES:\\n- Be concise but thorough\\n- Prioritize accuracy over speculation\\n- Maintain a professional and helpful tone\\n- When uncertain, acknowledge limitations\\n- Format responses for easy reading on mobile devices\\n- Include actionable information when appropriate\\n\\nLIMITATIONS:\\n- Mention if you're unable to process certain file formats\\n- Indicate if an image is unclear or if details are difficult to discern\\n- Note if audio quality impacts transcription accuracy\\n\\nSECURITY & PRIVACY:\\n- Do not store or remember sensitive information shared in files, images, or voice notes\\n- Do not share personal information across different user interactions\\n- Inform users about data privacy limitations when relevant\\n\\nAnalyze all inputs carefully before responding. Your goal is to provide value through accurate information and helpful assistance.\"},\"promptType\":\"define\"},\"typeVersion\":1.8},{\"id\":\"103825d0-8521-43c7-8246-9cc1faca42e1\",\"name\":\"Download File\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[720,460],\"parameters\":{\"url\":\"={{ $json.url }}\",\"options\":{},\"authentication\":\"genericCredentialType\",\"genericAuthType\":\"httpHeaderAuth\"},\"credentials\":{\"httpHeaderAuth\":{\"id\":\"FDP9FxauzJt9rkjr\",\"name\":\"WhatsApp\"}},\"typeVersion\":4.2},{\"id\":\"98077f98-6dcf-4932-9363-19bf1fdc299e\",\"name\":\"Extract from File\",\"type\":\"n8n-nodes-base.extractFromFile\",\"position\":[980,460],\"parameters\":{\"options\":{},\"operation\":\"pdf\"},\"typeVersion\":1},{\"id\":\"fefc8b87-d64e-4ff9-9f62-1ac3af2bf17e\",\"name\":\"Simple Memory\",\"type\":\"@n8n/n8n-nodes-langchain.memoryBufferWindow\",\"position\":[300,1440],\"parameters\":{\"sessionKey\":\"=memory_{{ $('WhatsApp Trigger').item.json.contacts[0].wa_id }}\",\"sessionIdType\":\"customKey\",\"contextWindowLength\":10},\"typeVersion\":1.3},{\"id\":\"83ac997d-6ba0-4eb7-bd6c-80671f03c56c\",\"name\":\"Get File Url\",\"type\":\"n8n-nodes-base.whatsApp\",\"position\":[500,460],\"webhookId\":\"280bd5de-32d7-4d8f-93d2-e91e3b0bc161\",\"parameters\":{\"resource\":\"media\",\"operation\":\"mediaUrlGet\",\"mediaGetId\":\"={{ $('WhatsApp Trigger').item.json.messages[0].document.id }}\"},\"credentials\":{\"whatsAppApi\":{\"id\":\"HDUOWQXeRXMVjo0Z\",\"name\":\"WhatsApp account\"}},\"typeVersion\":1},{\"id\":\"56b23f60-57c3-4ea7-a4e8-64029a2e44c1\",\"name\":\"Only PDF File\",\"type\":\"n8n-nodes-base.if\",\"position\":[220,480],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"f52d2aaa-e0b2-45e5-8c4b-ceef42182a0d\",\"operator\":{\"name\":\"filter.operator.equals\",\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"={{ $json.messages[0].document.mime_type }}\",\"rightValue\":\"application/pdf\"}]}},\"typeVersion\":2.2},{\"id\":\"fa733b7b-16a7-4a9b-86b3-88395535ecd5\",\"name\":\"Fix mimeType for Audio\",\"type\":\"n8n-nodes-base.code\",\"position\":[1040,1080],\"parameters\":{\"jsCode\":\"for (const item of $input.all()) {\\n  if (item.binary) {\\n    const binaryPropertyNames = Object.keys(item.binary);\\n    for (const propName of binaryPropertyNames) {\\n      if (item.binary[propName].mimeType === 'audio/mp3') {\\n        item.binary[propName].mimeType = 'audio/mpeg';\\n      }\\n    }\\n  }\\n}\\n\\nreturn $input.all();\"},\"typeVersion\":2},{\"id\":\"0d99c2fa-945b-487a-b929-742e8b1b6859\",\"name\":\"Send message\",\"type\":\"n8n-nodes-base.whatsApp\",\"position\":[840,1360],\"webhookId\":\"23834751-5066-48ba-8e19-549680df2b27\",\"parameters\":{\"textBody\":\"={{ $json.output }}\",\"operation\":\"send\",\"phoneNumberId\":\"470271332838881\",\"additionalFields\":{},\"recipientPhoneNumber\":\"={{ $('WhatsApp Trigger').item.json.messages[0].from }}\"},\"credentials\":{\"whatsAppApi\":{\"id\":\"HDUOWQXeRXMVjo0Z\",\"name\":\"WhatsApp account\"}},\"typeVersion\":1},{\"id\":\"046328e9-e948-479c-ac42-567877350f1e\",\"name\":\"Send audio\",\"type\":\"n8n-nodes-base.whatsApp\",\"position\":[1260,1080],\"webhookId\":\"d18b2c98-84e4-43cf-a532-0c47d5161684\",\"parameters\":{\"mediaPath\":\"useMedian8n\",\"operation\":\"send\",\"messageType\":\"audio\",\"phoneNumberId\":\"470271332838881\",\"additionalFields\":{},\"recipientPhoneNumber\":\"={{ $('Input type').item.json.contacts[0].wa_id }}\"},\"credentials\":{\"whatsAppApi\":{\"id\":\"HDUOWQXeRXMVjo0Z\",\"name\":\"WhatsApp account\"}},\"typeVersion\":1},{\"id\":\"aa20a408-42ab-4011-9cea-331e23cda4ce\",\"name\":\"Incorrect format\",\"type\":\"n8n-nodes-base.whatsApp\",\"position\":[500,700],\"webhookId\":\"23834751-5066-48ba-8e19-549680df2b27\",\"parameters\":{\"textBody\":\"=Sorry but you can only send PDF files\",\"operation\":\"send\",\"phoneNumberId\":\"470271332838881\",\"additionalFields\":{},\"recipientPhoneNumber\":\"={{ $('WhatsApp Trigger').item.json.messages[0].from }}\"},\"credentials\":{\"whatsAppApi\":{\"id\":\"HDUOWQXeRXMVjo0Z\",\"name\":\"WhatsApp account\"}},\"typeVersion\":1},{\"id\":\"23b3750d-3638-4fd0-bab8-6082f53f19f9\",\"name\":\"Text\",\"type\":\"n8n-nodes-base.set\",\"position\":[1240,-520],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"c53cd9f9-77c1-4331-98ff-bfc9bdf95a3c\",\"name\":\"text\",\"type\":\"string\",\"value\":\"={{ $('WhatsApp Trigger').item.json.messages[0].text.body }}\"}]}},\"typeVersion\":3.4},{\"id\":\"435c020b-826b-4946-b19e-f9663f4f9f23\",\"name\":\"Audio\",\"type\":\"n8n-nodes-base.set\",\"position\":[1240,-180],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"219577d5-b028-48fc-90be-980f4171ab68\",\"name\":\"text\",\"type\":\"string\",\"value\":\"={{ $json.text }}\"}]}},\"typeVersion\":3.4},{\"id\":\"0139bb33-651e-4f37-901d-ccc705c9833a\",\"name\":\"Image\",\"type\":\"n8n-nodes-base.set\",\"position\":[1220,120],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"67552183-de2e-494a-878e-c2948e8cb6bb\",\"name\":\"text\",\"type\":\"string\",\"value\":\"=User request on the image:\\n{{ \\\"Describe the following image\\\" || $('WhatsApp Trigger').item.json.messages[0].image.caption }}\\n\\nImage description:\\n{{ $json.content }}\"}]}},\"typeVersion\":3.4},{\"id\":\"d66b7190-f83b-483e-b3f3-8c220e2c815f\",\"name\":\"File\",\"type\":\"n8n-nodes-base.set\",\"position\":[1240,460],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"67552183-de2e-494a-878e-c2948e8cb6bb\",\"name\":\"text\",\"type\":\"string\",\"value\":\"=User request on the file:\\n{{ \\\"Describe this file\\\" || $('Only PDF File').item.json.messages[0].document.caption }}\\n\\nFile content:\\n{{ $json.text }}\"}]}},\"typeVersion\":3.4},{\"id\":\"20239933-418c-436f-b15b-c293043a0328\",\"name\":\"Not supported\",\"type\":\"n8n-nodes-base.whatsApp\",\"position\":[-260,360],\"webhookId\":\"23834751-5066-48ba-8e19-549680df2b27\",\"parameters\":{\"textBody\":\"=You can only send text messages, images, audio files and PDF documents.\",\"operation\":\"send\",\"phoneNumberId\":\"470271332838881\",\"additionalFields\":{},\"recipientPhoneNumber\":\"={{ $('WhatsApp Trigger').item.json.messages[0].from }}\"},\"credentials\":{\"whatsAppApi\":{\"id\":\"HDUOWQXeRXMVjo0Z\",\"name\":\"WhatsApp account\"}},\"typeVersion\":1},{\"id\":\"117fd705-1f64-4bcc-88db-357df679fa3d\",\"name\":\"Get Image Url\",\"type\":\"n8n-nodes-base.whatsApp\",\"position\":[480,120],\"webhookId\":\"280bd5de-32d7-4d8f-93d2-e91e3b0bc161\",\"parameters\":{\"resource\":\"media\",\"operation\":\"mediaUrlGet\",\"mediaGetId\":\"={{ $('WhatsApp Trigger').item.json.messages[0].image.id }}\"},\"credentials\":{\"whatsAppApi\":{\"id\":\"HDUOWQXeRXMVjo0Z\",\"name\":\"WhatsApp account\"}},\"typeVersion\":1},{\"id\":\"3bf7364c-6263-4825-aec5-693adaed7d03\",\"name\":\"Get Audio Url\",\"type\":\"n8n-nodes-base.whatsApp\",\"position\":[460,-180],\"webhookId\":\"87caa300-7204-47b5-959a-94f4a8fbf8cf\",\"parameters\":{\"resource\":\"media\",\"operation\":\"mediaUrlGet\",\"mediaGetId\":\"={{ $('WhatsApp Trigger').item.json.messages[0].audio.id }}\"},\"credentials\":{\"whatsAppApi\":{\"id\":\"HDUOWQXeRXMVjo0Z\",\"name\":\"WhatsApp account\"}},\"typeVersion\":1},{\"id\":\"b23f8467-480a-45c1-a7df-e512290a8e13\",\"name\":\"Generate Audio Response\",\"type\":\"@n8n/n8n-nodes-langchain.openAi\",\"position\":[840,1080],\"parameters\":{\"input\":\"={{ $('AI Agent1').item.json.output }}\",\"voice\":\"onyx\",\"options\":{},\"resource\":\"audio\"},\"credentials\":{\"openAiApi\":{\"id\":\"4zwP0MSr8zkNvvV9\",\"name\":\"OpenAi account\"}},\"typeVersion\":1.8},{\"id\":\"0b139e60-fbf3-43ae-ae3f-40588f135443\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[120,-560],\"parameters\":{\"width\":1340,\"height\":240,\"content\":\"## Text\"},\"typeVersion\":1},{\"id\":\"3622ad4c-79c7-479f-a050-ff21d3077c77\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[120,-240],\"parameters\":{\"width\":1340,\"height\":240,\"content\":\"## Voice\"},\"typeVersion\":1},{\"id\":\"1f35e179-22d1-4019-a807-21803df51a46\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[120,80],\"parameters\":{\"width\":1340,\"height\":240,\"content\":\"## Image\"},\"typeVersion\":1},{\"id\":\"314b8ae2-e518-44a3-80a5-dc8482ab1fa9\",\"name\":\"Sticky Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[120,420],\"parameters\":{\"width\":1340,\"height\":240,\"content\":\"## Document\"},\"typeVersion\":1},{\"id\":\"a55cc899-3490-4b7c-b793-4f20605fc711\",\"name\":\"Sticky Note4\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[120,960],\"parameters\":{\"color\":5,\"width\":1340,\"height\":600,\"content\":\"## Response\"},\"typeVersion\":1},{\"id\":\"f37e975b-c112-4af8-badd-1fdbdb90d2f5\",\"name\":\"From audio to audio?\",\"type\":\"n8n-nodes-base.if\",\"position\":[580,1220],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"b9d1d759-f585-4791-a743-b9d72951e77c\",\"operator\":{\"type\":\"object\",\"operation\":\"exists\",\"singleValue\":true},\"leftValue\":\"={{ $('WhatsApp Trigger').item.json.messages[0].audio }}\",\"rightValue\":\"\"}]}},\"typeVersion\":2.2},{\"id\":\"864be43a-e280-4c6d-bab4-878b88304807\",\"name\":\"Input type\",\"type\":\"n8n-nodes-base.switch\",\"position\":[-420,40],\"parameters\":{\"rules\":{\"values\":[{\"outputKey\":\"Text\",\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"08fd0c80-307e-4f45-b1de-35192ee4ec5e\",\"operator\":{\"type\":\"string\",\"operation\":\"exists\",\"singleValue\":true},\"leftValue\":\"={{ $json.messages[0].text.body }}\",\"rightValue\":\"\"}]},\"renameOutput\":true},{\"outputKey\":\"Voice\",\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"b7b64446-f1ea-4622-990c-22f3999a8269\",\"operator\":{\"type\":\"object\",\"operation\":\"exists\",\"singleValue\":true},\"leftValue\":\"={{ $json.messages[0].audio }}\",\"rightValue\":\"\"}]},\"renameOutput\":true},{\"outputKey\":\"Image\",\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"202af928-a324-411a-bf15-68a349e7bf9e\",\"operator\":{\"type\":\"object\",\"operation\":\"exists\",\"singleValue\":true},\"leftValue\":\"={{ $json.messages[0].image }}\",\"rightValue\":\"\"}]},\"renameOutput\":true},{\"outputKey\":\"Document\",\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"c63299e9-6069-4bc6-afb9-7beebf6e3d69\",\"operator\":{\"type\":\"object\",\"operation\":\"exists\",\"singleValue\":true},\"leftValue\":\"={{ $json.messages[0].document }}\",\"rightValue\":\"\"}]},\"renameOutput\":true}]},\"options\":{\"fallbackOutput\":\"extra\"}},\"typeVersion\":3.2},{\"id\":\"cf327372-d2cc-40db-a057-9bfb10d6a520\",\"name\":\"Sticky Note5\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-1580,-1140],\"parameters\":{\"color\":3,\"width\":780,\"height\":2680,\"content\":\"How to obtain Whatsapp API?\\n\\n\\n### âœ… Prerequisites\\nBefore you begin, make sure you have:\\n- A **Meta Business Account**\\n- A **Facebook Developer Account**\\n- A **Verified Business**\\n- A **Phone Number** to link to WhatsApp\\n- Access to **Meta's Graph API Explorer** or **Meta for Developers portal**\\n\\n---\\n\\n### ğŸªœ STEP 1: Create a Meta App\\n\\n1. Go to [https://developers.facebook.com/apps](https://developers.facebook.com/apps)\\n2. Click **â€œCreate Appâ€**\\n3. Choose **\\\"Business\\\"** as the app type, then click **Next**\\n4. Give your app a name and enter a contact email\\n5. Choose your Business Account (or create one)\\n6. Click **Create App**\\n\\n---\\n\\n### ğŸªœ STEP 2: Add WhatsApp Product\\n\\n1. In your app dashboard, scroll down to **\\\"Add a Product\\\"**\\n2. Find **\\\"WhatsApp\\\"** and click **â€œSet Upâ€**\\n3. Link your **Business Manager Account**\\n\\n---\\n\\n### ğŸªœ STEP 3: Create a WhatsApp Business Account (if needed)\\n\\n1. If you havenâ€™t already, go to [https://business.facebook.com/](https://business.facebook.com/)\\n2. Click **â€œCreate Accountâ€**, and complete your business information\\n3. Go to **Business Settings > Accounts > WhatsApp Accounts**\\n4. Add a **Phone Number** (you'll receive a verification code)\\n\\n---\\n\\n### ğŸªœ STEP 4: Generate a Temporary Access Token (for development)\\n\\n1. In the **App Dashboard**, go to **WhatsApp > Getting Started**\\n2. Choose your test phone number\\n3. Copy the **temporary access token** (valid for 24 hours)\\n4. Copy the **Phone Number ID** and **WhatsApp Business Account ID**\\n\\nâœ… Save these 3 values:\\n- **Access Token**\\n- **Phone Number ID**\\n- **WABA ID**\\n\\nğŸ“ Tip: For production, you will later need to create a **permanent token** (see step 7).\\n\\n---\\n\\n### ğŸªœ STEP 5: Set Up a Webhook URL (n8n)\\n\\n1. In n8n, set up a **Webhook node** (or use the `WhatsApp Trigger` node)\\n2. Copy the webhook URL\\n3. In the Meta Developer Dashboard:\\n   - Go to **WhatsApp > Configuration**\\n   - Click **â€œEdit Callback URLâ€**\\n   - Paste your n8n webhook URL and add a random **verify token**\\n4. In n8n, configure your webhook to respond to the verification request\\n\\n---\\n\\n### ğŸªœ STEP 6: Subscribe to Webhook Fields\\n\\n1. Still under **WhatsApp > Configuration**, click **\\\"Manage Subscriptions\\\"**\\n2. Enable:\\n   - `messages`\\n   - `message_status`\\n   - (Optionally `message_template_status_update`)\\n\\n---\\n\\n### ğŸªœ STEP 7: (Optional but recommended) Generate a Permanent Token\\n\\n1. Go to [https://developers.facebook.com/tools/access_token/](https://developers.facebook.com/tools/access_token/)\\n2. Select your app\\n3. Click **Get Token > System User Token**\\n4. Select the permissions:\\n   - `whatsapp_business_management`\\n   - `whatsapp_business_messaging`\\n   - `business_management`\\n5. Click **Generate Token**\\n6. Copy and securely store this token\\n\\n---\\n\\n### ğŸªœ STEP 8: Configure Credentials in n8n\\n\\n1. Go to **n8n > Settings > Credentials**\\n2. Create new credentials of type **HTTP Header Auth**\\n   - **Name:** WhatsApp\\n   - **Header Name:** `Authorization`\\n   - **Value:** `Bearer <your_access_token>`\\n3. Save\\n\\nThen, in your workflows:\\n- Use the HTTP Request node or WhatsApp node\\n- Set the `phone_number_id` in the node parameters\\n- Connect it to your WhatsApp credential\\n\\n---\\n\\n### ğŸ§ª STEP 9: Test the Connection\\n\\n1. Use a WhatsApp number to send a message to your business phone\\n2. Your n8n workflow should be triggered\\n3. You can now send and receive messages programmatically ğŸ‰\\n\"},\"typeVersion\":1}],\"active\":false,\"pinData\":{},\"settings\":{\"executionOrder\":\"v1\"},\"versionId\":\"4dfe4c80-3a9a-4292-bcb2-3f68bbea5a3a\",\"connections\":{\"File\":{\"main\":[[{\"node\":\"AI Agent1\",\"type\":\"main\",\"index\":0}]]},\"Text\":{\"main\":[[{\"node\":\"AI Agent1\",\"type\":\"main\",\"index\":0}]]},\"Audio\":{\"main\":[[{\"node\":\"AI Agent1\",\"type\":\"main\",\"index\":0}]]},\"Image\":{\"main\":[[{\"node\":\"AI Agent1\",\"type\":\"main\",\"index\":0}]]},\"AI Agent1\":{\"main\":[[{\"node\":\"From audio to audio?\",\"type\":\"main\",\"index\":0}]]},\"Input type\":{\"main\":[[{\"node\":\"Text\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Get Audio Url\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Get Image Url\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Only PDF File\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Not supported\",\"type\":\"main\",\"index\":0}]]},\"Get File Url\":{\"main\":[[{\"node\":\"Download File\",\"type\":\"main\",\"index\":0}]]},\"Analyze Image\":{\"main\":[[{\"node\":\"Image\",\"type\":\"main\",\"index\":0}]]},\"Download File\":{\"main\":[[{\"node\":\"Extract from File\",\"type\":\"main\",\"index\":0}]]},\"Get Audio Url\":{\"main\":[[{\"node\":\"Download Audio\",\"type\":\"main\",\"index\":0}]]},\"Get Image Url\":{\"main\":[[{\"node\":\"Download Image\",\"type\":\"main\",\"index\":0}]]},\"Only PDF File\":{\"main\":[[{\"node\":\"Get File Url\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Incorrect format\",\"type\":\"main\",\"index\":0}]]},\"Simple Memory\":{\"ai_memory\":[[{\"node\":\"AI Agent1\",\"type\":\"ai_memory\",\"index\":0}]]},\"Download Audio\":{\"main\":[[{\"node\":\"Transcribe Audio\",\"type\":\"main\",\"index\":0}]]},\"Download Image\":{\"main\":[[{\"node\":\"Analyze Image\",\"type\":\"main\",\"index\":0}]]},\"Transcribe Audio\":{\"main\":[[{\"node\":\"Audio\",\"type\":\"main\",\"index\":0}]]},\"WhatsApp Trigger\":{\"main\":[[{\"node\":\"Input type\",\"type\":\"main\",\"index\":0}]]},\"Extract from File\":{\"main\":[[{\"node\":\"File\",\"type\":\"main\",\"index\":0}]]},\"OpenAI Chat Model\":{\"ai_languageModel\":[[{\"node\":\"AI Agent1\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"From audio to audio?\":{\"main\":[[{\"node\":\"Generate Audio Response\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Send message\",\"type\":\"main\",\"index\":0}]]},\"Fix mimeType for Audio\":{\"main\":[[{\"node\":\"Send audio\",\"type\":\"main\",\"index\":0}]]},\"Generate Audio Response\":{\"main\":[[{\"node\":\"Fix mimeType for Audio\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "This workflow is a highly advanced **multimodal AI assistant** designed to operate through **WhatsApp**. It can **understand and respond** to text, images, voice messages, and PDF documents by combining **OpenAI models** with smart logic to adapt to the content received.\n\n* * *\n\n### ğŸ¯ **Core Features**\n\n#### ğŸ“¥ 1. **Automatic Message Type Detection**\n\nUsing the `Input type` node, the bot detects whether the user has sent:\n\n  * Text\n  * Voice messages\n  * Images\n  * Files (PDF)\n  * Other unsupported content\n\n\n\n#### ğŸ’¬ 2. **Smart Text Message Handling**\n\n  * Text messages are processed by an **OpenAI GPT-4o-mini agent** with a customized system prompt.\n  * Replies are concise, accurate, and formatted for mobile readability.\n\n\n\n#### ğŸ–¼ï¸ 3. **Image Analysis & Description**\n\n  * Images are downloaded, converted to base64, and analyzed by an **image-aware AI model**.\n  * The output is a rich, structured description, designed for visually impaired users or visual content interpretation.\n\n\n\n#### ğŸ™ï¸ 4. **Voice Message Transcription & Reply**\n\n  * Audio messages are downloaded and transcribed using OpenAI Whisper.\n  * The transcribed text is analyzed and answered by the AI.\n  * Optionally, the AI reply can be **converted back to voice** using **OpenAI's text-to-speech** , and sent as an audio message.\n\n\n\n#### ğŸ“„ 5. **PDF Document Extraction & Summary**\n\n  * Only PDFs are allowed (filtered via MIME type).\n  * The documentâ€™s content is extracted and combined with the user's message.\n  * The AI then provides a relevant summary or answer.\n\n\n\n#### ğŸ§  6. **Contextual Memory**\n\n  * Each user has a personalized session ID with a memory window of 10 interactions.\n  * This ensures a more natural and contextual conversation flow.\n\n\n\n* * *\n\n### **How It Works**\n\nThisworkflow is designed to handle incoming WhatsApp messages and process different types of inputs (**text, audio, images, and PDF documents**) using **AI-powered analysis**. Hereâ€™s how it functions:\n\n  * **Trigger** : The workflow starts with the **WhatsApp Trigger** node, which listens for incoming messages (text, audio, images, or documents).\n  * **Input Routing** : The **Input type** (Switch node) checks the message type and routes it to the appropriate processing branch: \n    * **Text** : Directly forwards the message to the AI agent for response generation.\n    * **Audio** : Downloads the audio file, transcribes it using OpenAI, and sends the transcription to the AI agent.\n    * **Image** : Downloads the image, analyzes it with OpenAIâ€™s GPT-4 model, and generates a detailed description.\n    * **PDF Document** : Downloads the file, extracts text, and processes it with the AI agent.\n    * **Unsupported Formats** : Sends an error message if the input is not supported.\n  * **AI Processing** : The **AI Agent1** node, powered by OpenAI, processes the input (text, transcribed audio, image description, or PDF content) and generates a response.\n  * **Response Handling** : \n    * For **audio inputs** , the AIâ€™s response is converted back into speech (using OpenAIâ€™s TTS) and sent as a voice message.\n    * For **other inputs** , the response is sent as a text message via WhatsApp.\n  * **Memory** : The **Simple Memory** node maintains conversation context for follow-up interactions.\n\n\n\n### **Setup Steps**\n\nTo deploy this workflow in n8n, follow these steps:\n\n  1. **Configure WhatsApp API Credentials** : \n     * Set up **WhatsApp Business API** credentials (Meta Developer Account).\n     * Add the credentials in the **WhatsApp Trigger** , **Get Image/Audio/File URL** , and **Send Message** nodes.\n\n\n\n**Set Up OpenAI Integration** :\n\n  * Provide an **OpenAI API key** in the **Analyze Image** , **Transcribe Audio** , **Generate Audio Response** , and **AI Agent1** nodes.\n\n\n\n**Adjust Input Handling (Optional)** :\n\n  * Modify the **Switch node (\"Input type\")** to handle additional message types if needed.\n  * Update the **\"Only PDF File\" IF node** to support other document formats.\n\n\n\n**Test & Deploy**:\n\n  * Activate the workflow and test with different message types (text, audio, image, PDF).\n  * Ensure responses are correctly generated and sent back via WhatsApp.\n\n\n\n* * *\n\n### **Need help customizing?**\n\n[Contact me](mailto:info@n3w.it) for consulting and support or add me on [Linkedin](https://www.linkedin.com/in/davideboizza/).\n",
  "readme_html": "<!--[--><div data-v-006f9244=\"\"><p>This workflow is a highly advanced <strong>multimodal AI assistant</strong> designed to operate through <strong>WhatsApp</strong>. It can <strong>understand and respond</strong> to text, images, voice messages, and PDF documents by combining <strong>OpenAI models</strong> with smart logic to adapt to the content received.</p>\n<hr>\n<h3>ğŸ¯ <strong>Core Features</strong></h3>\n<h4>ğŸ“¥ 1. <strong>Automatic Message Type Detection</strong></h4>\n<p>Using the <code>Input type</code> node, the bot detects whether the user has sent:</p>\n<ul>\n<li>Text</li>\n<li>Voice messages</li>\n<li>Images</li>\n<li>Files (PDF)</li>\n<li>Other unsupported content</li>\n</ul>\n<h4>ğŸ’¬ 2. <strong>Smart Text Message Handling</strong></h4>\n<ul>\n<li>Text messages are processed by an <strong>OpenAI GPT-4o-mini agent</strong> with a customized system prompt.</li>\n<li>Replies are concise, accurate, and formatted for mobile readability.</li>\n</ul>\n<h4>ğŸ–¼ï¸ 3. <strong>Image Analysis &amp; Description</strong></h4>\n<ul>\n<li>Images are downloaded, converted to base64, and analyzed by an <strong>image-aware AI model</strong>.</li>\n<li>The output is a rich, structured description, designed for visually impaired users or visual content interpretation.</li>\n</ul>\n<h4>ğŸ™ï¸ 4. <strong>Voice Message Transcription &amp; Reply</strong></h4>\n<ul>\n<li>Audio messages are downloaded and transcribed using OpenAI Whisper.</li>\n<li>The transcribed text is analyzed and answered by the AI.</li>\n<li>Optionally, the AI reply can be <strong>converted back to voice</strong> using <strong>OpenAI's text-to-speech</strong>, and sent as an audio message.</li>\n</ul>\n<h4>ğŸ“„ 5. <strong>PDF Document Extraction &amp; Summary</strong></h4>\n<ul>\n<li>Only PDFs are allowed (filtered via MIME type).</li>\n<li>The documentâ€™s content is extracted and combined with the user's message.</li>\n<li>The AI then provides a relevant summary or answer.</li>\n</ul>\n<h4>ğŸ§  6. <strong>Contextual Memory</strong></h4>\n<ul>\n<li>Each user has a personalized session ID with a memory window of 10 interactions.</li>\n<li>This ensures a more natural and contextual conversation flow.</li>\n</ul>\n<hr>\n<h3><strong>How It Works</strong></h3>\n<p>Thisworkflow is designed to handle incoming WhatsApp messages and process different types of inputs (<strong>text, audio, images, and PDF documents</strong>) using <strong>AI-powered analysis</strong>. Hereâ€™s how it functions:</p>\n<ul>\n<li><strong>Trigger</strong>: The workflow starts with the <strong>WhatsApp Trigger</strong> node, which listens for incoming messages (text, audio, images, or documents).</li>\n<li><strong>Input Routing</strong>: The <strong>Input type</strong> (Switch node) checks the message type and routes it to the appropriate processing branch:\n<ul>\n<li><strong>Text</strong>: Directly forwards the message to the AI agent for response generation.</li>\n<li><strong>Audio</strong>: Downloads the audio file, transcribes it using OpenAI, and sends the transcription to the AI agent.</li>\n<li><strong>Image</strong>: Downloads the image, analyzes it with OpenAIâ€™s GPT-4 model, and generates a detailed description.</li>\n<li><strong>PDF Document</strong>: Downloads the file, extracts text, and processes it with the AI agent.</li>\n<li><strong>Unsupported Formats</strong>: Sends an error message if the input is not supported.</li>\n</ul>\n</li>\n<li><strong>AI Processing</strong>: The <strong>AI Agent1</strong> node, powered by OpenAI, processes the input (text, transcribed audio, image description, or PDF content) and generates a response.</li>\n<li><strong>Response Handling</strong>:\n<ul>\n<li>For <strong>audio inputs</strong>, the AIâ€™s response is converted back into speech (using OpenAIâ€™s TTS) and sent as a voice message.</li>\n<li>For <strong>other inputs</strong>, the response is sent as a text message via WhatsApp.</li>\n</ul>\n</li>\n<li><strong>Memory</strong>: The <strong>Simple Memory</strong> node maintains conversation context for follow-up interactions.</li>\n</ul>\n<h3><strong>Setup Steps</strong></h3>\n<p>To deploy this workflow in n8n, follow these steps:</p>\n<ol>\n<li><strong>Configure WhatsApp API Credentials</strong>:\n<ul>\n<li>Set up <strong>WhatsApp Business API</strong> credentials (Meta Developer Account).</li>\n<li>Add the credentials in the <strong>WhatsApp Trigger</strong>, <strong>Get Image/Audio/File URL</strong>, and <strong>Send Message</strong> nodes.</li>\n</ul>\n</li>\n</ol>\n<p><strong>Set Up OpenAI Integration</strong>:</p>\n<ul>\n<li>Provide an <strong>OpenAI API key</strong> in the <strong>Analyze Image</strong>, <strong>Transcribe Audio</strong>, <strong>Generate Audio Response</strong>, and <strong>AI Agent1</strong> nodes.</li>\n</ul>\n<p><strong>Adjust Input Handling (Optional)</strong>:</p>\n<ul>\n<li>Modify the <strong>Switch node (\"Input type\")</strong> to handle additional message types if needed.</li>\n<li>Update the <strong>\"Only PDF File\" IF node</strong> to support other document formats.</li>\n</ul>\n<p><strong>Test &amp; Deploy</strong>:</p>\n<ul>\n<li>Activate the workflow and test with different message types (text, audio, image, PDF).</li>\n<li>Ensure responses are correctly generated and sent back via WhatsApp.</li>\n</ul>\n<hr>\n<h3><strong>Need help customizing?</strong></h3>\n<p><a href=\"mailto:info@n3w.it\" rel=\"ugc nofollow\">Contact me</a> for consulting and support or add me on <a href=\"https://www.linkedin.com/in/davideboizza/\" rel=\"ugc nofollow\" target=\"_blank\">Linkedin</a>.</p>\n</div><!--]-->",
  "readme_zh": "è¯¥å·¥ä½œæµæ˜¯ä¸€æ¬¾é«˜åº¦å…ˆè¿›çš„**å¤šæ¨¡æ€AIåŠ©æ‰‹**ï¼Œä¸“ä¸º**WhatsApp**å¹³å°è®¾è®¡ã€‚å®ƒèƒ½é€šè¿‡ç»“åˆ**OpenAIæ¨¡å‹**ä¸æ™ºèƒ½é€»è¾‘ï¼Œ**ç†è§£å¹¶å“åº”**æ–‡å­—ã€å›¾ç‰‡ã€è¯­éŸ³æ¶ˆæ¯å’ŒPDFæ–‡æ¡£ï¼Œæ ¹æ®æ¥æ”¶å†…å®¹è‡ªåŠ¨é€‚é…å¤„ç†æ–¹å¼ã€‚\n\n* * *\n\n### ğŸ¯ **æ ¸å¿ƒåŠŸèƒ½**\n\n#### ğŸ“¥ 1. **æ¶ˆæ¯ç±»å‹è‡ªåŠ¨è¯†åˆ«**\n\né€šè¿‡`Input type`èŠ‚ç‚¹ï¼Œæœºå™¨äººå¯æ£€æµ‹ç”¨æˆ·å‘é€çš„æ˜¯ï¼š\n  * æ–‡å­—\n  * è¯­éŸ³æ¶ˆæ¯\n  * å›¾ç‰‡\n  * æ–‡ä»¶ï¼ˆPDFï¼‰\n  * å…¶ä»–ä¸æ”¯æŒçš„å†…å®¹\n\n#### ğŸ’¬ 2. **æ™ºèƒ½æ–‡æœ¬å¤„ç†**\n  * æ–‡å­—æ¶ˆæ¯ç”±**OpenAI GPT-4o-miniä»£ç†**å¤„ç†ï¼Œé‡‡ç”¨å®šåˆ¶åŒ–ç³»ç»ŸæŒ‡ä»¤\n  * å›å¤å†…å®¹ç®€æ´ç²¾å‡†ï¼Œé’ˆå¯¹ç§»åŠ¨ç«¯é˜…è¯»ä¼˜åŒ–æ’ç‰ˆ\n\n#### ğŸ–¼ï¸ 3. **å›¾åƒåˆ†æä¸æè¿°**\n  * å›¾ç‰‡ä¸‹è½½åè½¬ä¸ºbase64æ ¼å¼ï¼Œç”±**è§†è§‰AIæ¨¡å‹**è§£æ\n  * ç”Ÿæˆç»“æ„åŒ–æè¿°ï¼Œç‰¹åˆ«é€‚åˆè§†éšœç”¨æˆ·æˆ–å›¾åƒå†…å®¹è§£è¯»\n\n#### ğŸ™ï¸ 4. **è¯­éŸ³æ¶ˆæ¯è½¬æ–‡å­—å›å¤**\n  * ä½¿ç”¨OpenAI Whisperè½¬å½•ä¸‹è½½çš„è¯­éŸ³æ¶ˆæ¯\n  * AIåˆ†æè½¬å½•æ–‡æœ¬å¹¶ç”Ÿæˆå›å¤\n  * å¯é€‰é€šè¿‡**OpenAIæ–‡æœ¬è½¬è¯­éŸ³**å°†å›å¤è½¬ä¸ºè¯­éŸ³æ¶ˆæ¯å‘é€\n\n#### ğŸ“„ 5. **PDFå†…å®¹æå–ä¸æ‘˜è¦**\n  * ä»…å…è®¸PDFæ ¼å¼ï¼ˆé€šè¿‡MIMEç±»å‹è¿‡æ»¤ï¼‰\n  * æå–æ–‡æ¡£å†…å®¹å¹¶ä¸ç”¨æˆ·æ¶ˆæ¯ç»“åˆ\n  * AIç”Ÿæˆç›¸å…³æ‘˜è¦æˆ–ç­”æ¡ˆ\n\n#### ğŸ§  6. **ä¸Šä¸‹æ–‡è®°å¿†åŠŸèƒ½**\n  * æ¯ä¸ªç”¨æˆ·æ‹¥æœ‰ä¸ªæ€§åŒ–ä¼šè¯IDï¼Œä¿ç•™æœ€è¿‘10è½®å¯¹è¯è®°å¿†\n  * ç¡®ä¿å¯¹è¯æµè‡ªç„¶è¿è´¯\n\n* * *\n\n### **è¿ä½œåŸç†**\n\nè¯¥å·¥ä½œæµé€šè¿‡**AIé©±åŠ¨åˆ†æ**å¤„ç†WhatsAppæ¥æ”¶çš„å„ç±»è¾“å…¥ï¼ˆ**æ–‡å­—ã€è¯­éŸ³ã€å›¾ç‰‡å’ŒPDFæ–‡æ¡£**ï¼‰ï¼Œå…·ä½“æµç¨‹ï¼š\n\n  * **è§¦å‘**ï¼š**WhatsApp Trigger**èŠ‚ç‚¹ç›‘å¬ incomingæ¶ˆæ¯ï¼ˆæ–‡å­—/è¯­éŸ³/å›¾ç‰‡/æ–‡æ¡£ï¼‰\n  * **è¾“å…¥è·¯ç”±**ï¼š**Input type**ï¼ˆSwitchèŠ‚ç‚¹ï¼‰åˆ¤æ–­æ¶ˆæ¯ç±»å‹å¹¶è·¯ç”±è‡³å¯¹åº”å¤„ç†åˆ†æ”¯ï¼š\n    * **æ–‡å­—**ï¼šç›´æ¥äº¤ç”±AIä»£ç†ç”Ÿæˆå›å¤\n    * **è¯­éŸ³**ï¼šä¸‹è½½éŸ³é¢‘â†’OpenAIè½¬å½•â†’å‘é€æ–‡æœ¬è‡³AIä»£ç†\n    * **å›¾ç‰‡**ï¼šä¸‹è½½å›¾ç‰‡â†’é€šè¿‡OpenAI GPT-4æ¨¡å‹åˆ†æâ†’ç”Ÿæˆè¯¦ç»†æè¿°\n    * **PDFæ–‡æ¡£**ï¼šä¸‹è½½æ–‡ä»¶â†’æå–æ–‡æœ¬â†’äº¤ç”±AIä»£ç†å¤„ç†\n    * **ä¸æ”¯æŒæ ¼å¼**ï¼šè¿”å›é”™è¯¯æç¤º\n  * **AIå¤„ç†**ï¼šOpenAIé©±åŠ¨çš„**AI Agent1**èŠ‚ç‚¹å¤„ç†è¾“å…¥å†…å®¹ï¼ˆæ–‡å­—/è¯­éŸ³è½¬å½•/å›¾ç‰‡æè¿°/PDFå†…å®¹ï¼‰å¹¶ç”Ÿæˆå“åº”\n  * **å“åº”å¤„ç†**ï¼š\n    * **è¯­éŸ³è¾“å…¥**ï¼šå°†AIå›å¤é€šè¿‡OpenAI TTSè½¬ä¸ºè¯­éŸ³æ¶ˆæ¯\n    * **å…¶ä»–è¾“å…¥**ï¼šä»¥æ–‡å­—æ¶ˆæ¯å½¢å¼é€šè¿‡WhatsAppå‘é€\n  * **è®°å¿†**ï¼š**Simple Memory**èŠ‚ç‚¹ç»´æŠ¤å¯¹è¯ä¸Šä¸‹æ–‡ä¾›åç»­äº¤äº’ä½¿ç”¨\n\n### **éƒ¨ç½²æ­¥éª¤**\n\nåœ¨n8nä¸­éƒ¨ç½²æœ¬å·¥ä½œæµéœ€éµå¾ªï¼š\n\n1. **é…ç½®WhatsApp APIå‡­è¯**ï¼š\n   * ç”³è¯·**WhatsApp Business API**å‡­è¯ï¼ˆMetaå¼€å‘è€…è´¦å·ï¼‰\n   * åœ¨**WhatsApp Trigger**ã€**Get Image/Audio/File URL**å’Œ**Send Message**èŠ‚ç‚¹æ·»åŠ å‡­è¯\n\n2. **è®¾ç½®OpenAIé›†æˆ**ï¼š\n   * åœ¨**Analyze Image**ã€**Transcribe Audio**ã€**Generate Audio Response**å’Œ**AI Agent1**èŠ‚ç‚¹é…ç½®**OpenAI APIå¯†é’¥**\n\n3. **è°ƒæ•´è¾“å…¥å¤„ç†ï¼ˆå¯é€‰ï¼‰**ï¼š\n   * ä¿®æ”¹**SwitchèŠ‚ç‚¹(\"Input type\")**ä»¥æ”¯æŒæ›´å¤šæ¶ˆæ¯ç±»å‹\n   * æ›´æ–°**\"Only PDF File\" IFèŠ‚ç‚¹**ä»¥å…¼å®¹å…¶ä»–æ–‡æ¡£æ ¼å¼\n\n4. **æµ‹è¯•ä¸éƒ¨ç½²**ï¼š\n   * æ¿€æ´»å·¥ä½œæµï¼Œæµ‹è¯•ä¸åŒæ¶ˆæ¯ç±»å‹ï¼ˆæ–‡å­—/è¯­éŸ³/å›¾ç‰‡/PDFï¼‰\n   * ç¡®ä¿å›å¤æ­£ç¡®ç”Ÿæˆå¹¶é€šè¿‡WhatsAppè¿”å›\n\n* * *\n\n### **éœ€è¦å®šåˆ¶å¸®åŠ©ï¼Ÿ**\n\n[é‚®ä»¶è”ç³»](mailto:info@n3w.it)è·å–å’¨è¯¢æ”¯æŒï¼Œæˆ–é€šè¿‡[Linkedin](https://www.linkedin.com/in/davideboizza/)æ·»åŠ æˆ‘ã€‚",
  "title_zh": "AIé©±åŠ¨çš„WhatsAppèŠå¤©æœºå™¨äººğŸ¤–ğŸ“²ï¼Œæ”¯æŒæ–‡æœ¬ã€è¯­éŸ³ã€å›¾åƒåŠPDFäº¤äº’ï¼Œå…·å¤‡è®°å¿†åŠŸèƒ½ğŸ§ ",
  "publish_date_absolute": "2025-04-27",
  "publish_date_zh": "ä¸Šæ¬¡æ›´æ–°äº9å¤©å‰",
  "workflow_json_zh": "{\n  \"id\": \"zMtPPjJ80JJznrJP\",\n  \"meta\": {\n    \"instanceId\": \"a4bfc93e975ca233ac45ed7c9227d84cf5a2329310525917adaf3312e10d5462\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"name\": \"AI-Powered WhatsApp Chatbot for Text, Voice, Images & PDFs\",\n  \"tags\": [],\n  \"nodes\": [\n    {\n      \"id\": \"38246f5d-0cf4-49ed-957e-0189243d0dec\",\n      \"name\": \"WhatsApp Trigger\",\n      \"type\": \"n8n-nodes-base.whatsAppTrigger\",\n      \"position\": [\n        -700,\n        80\n      ],\n      \"webhookId\": \"d3978cae-2aca-4553-8ac7-ab89068deabc\",\n      \"parameters\": {\n        \"options\": {},\n        \"updates\": [\n          \"messages\"\n        ]\n      },\n      \"credentials\": {\n        \"whatsAppTriggerApi\": {\n          \"id\": \"gylriO2te7NRPXxN\",\n          \"name\": \"WhatsApp OAuth account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"4cc0b70b-3ecc-4415-af2f-e50d4f302786\",\n      \"name\": \"Download Image\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        720,\n        120\n      ],\n      \"parameters\": {\n        \"url\": \"={{ $json.url }}\",\n        \"options\": {},\n        \"authentication\": \"genericCredentialType\",\n        \"genericAuthType\": \"httpHeaderAuth\"\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": {\n          \"id\": \"FDP9FxauzJt9rkjr\",\n          \"name\": \"WhatsApp\"\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"528984be-b9ad-41c7-8b2e-ccbf275f7805\",\n      \"name\": \"Analyze Image\",\n      \"type\": \"@n8n/n8n-nodes-langchain.openAi\",\n      \"position\": [\n        960,\n        120\n      ],\n      \"parameters\": {\n        \"text\": \"=You are an advanced image description AI assistant . Your primary function is to provide detailed, accurate descriptions of images submitted through WhatsApp.\\n\\nCORE FUNCTIONALITY:\\n- When presented with an image, you will analyze it thoroughly and provide a comprehensive description in English.\\n- Your descriptions should capture both the obvious and subtle elements within the image.\\n\\nIMAGE DESCRIPTION GUIDELINES:\\n- Begin with a broad overview of what the image contains\\n- Describe key subjects, people, objects, and their relationships\\n- Note significant visual elements such as colors, lighting, composition, and perspective\\n- Identify any text visible in the image\\n- Describe the setting or environment\\n- Mention any notable actions or events taking place\\n- Comment on mood, tone, or atmosphere when relevant\\n- If applicable, identify landmarks, famous people, or cultural references\\n\\nRESPONSE FORMAT:\\n- Start with \\\"Image Description:\\\" followed by your analysis\\n- Structure your description in a logical manner (general to specific)\\n- Use clear, precise language appropriate for visual description\\n- Format longer descriptions with paragraphs to enhance readability\\n- End with any notable observations that might require special attention\\n\\nLIMITATIONS:\\n- If the image is blurry, low resolution, or difficult to interpret, acknowledge these limitations\\n- If an image contains potentially sensitive content, provide a factual description without judgment\\n- Do not make assumptions about elements that cannot be clearly determined\\n\\nYour descriptions should be informative, objective, and thorough, enabling someone who cannot see the image to form an accurate mental picture of its contents.\",\n        \"modelId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gpt-4o-mini\",\n          \"cachedResultName\": \"GPT-4O-MINI\"\n        },\n        \"options\": {\n          \"detail\": \"auto\"\n        },\n        \"resource\": \"image\",\n        \"inputType\": \"base64\",\n        \"operation\": \"analyze\"\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"4zwP0MSr8zkNvvV9\",\n          \"name\": \"OpenAi account\"\n        }\n      },\n      \"typeVersion\": 1.8\n    },\n    {\n      \"id\": \"b8898138-f987-4ef7-a5c1-d6d6b9c815f0\",\n      \"name\": \"Download Audio\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        720,\n        -180\n      ],\n      \"parameters\": {\n        \"url\": \"={{ $json.url }}\",\n        \"options\": {},\n        \"authentication\": \"genericCredentialType\",\n        \"genericAuthType\": \"httpHeaderAuth\"\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": {\n          \"id\": \"FDP9FxauzJt9rkjr\",\n          \"name\": \"WhatsApp\"\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"e68bea55-f43a-4143-afca-1348b35e5879\",\n      \"name\": \"Transcribe Audio\",\n      \"type\": \"@n8n/n8n-nodes-langchain.openAi\",\n      \"position\": [\n        960,\n        -180\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"resource\": \"audio\",\n        \"operation\": \"transcribe\"\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"4zwP0MSr8zkNvvV9\",\n          \"name\": \"OpenAi account\"\n        }\n      },\n      \"typeVersion\": 1.8\n    },\n    {\n      \"id\": \"1c0aa0c3-cee4-40f1-9e13-9365cc06443a\",\n      \"name\": \"OpenAI Chat Model\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\n      \"position\": [\n        160,\n        1440\n      ],\n      \"parameters\": {\n        \"model\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gpt-4o-mini\"\n        },\n        \"options\": {}\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"4zwP0MSr8zkNvvV9\",\n          \"name\": \"OpenAi account\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"d2215cf8-49e1-433b-b9c3-a219e6432cba\",\n      \"name\": \"AI Agent1\",\n      \"type\": \"@n8n/n8n-nodes-langchain.agent\",\n      \"position\": [\n        160,\n        1220\n      ],\n      \"parameters\": {\n        \"text\": \"={{ $json.text }}\",\n        \"options\": {\n          \"systemMessage\": \"You are an intelligent assistant. Your purpose is to analyze various types of input and provide helpful, accurate responses.\\n\\nCAPABILITIES:\\n- Process and respond to text messages\\n- Analyze uploaded files\\n- Interpret and describe images\\n- Transcribe and understand voice messages\\n\\nINPUT HANDLING:\\n1. For text messages: Analyze the content, understand the intent, and provide a relevant response.\\n2. For file analysis: Examine the file content, extract key information, and summarize important points also based on the questions asked.\\n3. For image analysis: Describe what you see in the image, identify key elements, and respond to any questions about the image.\\n4. For voice messages: Transcribe the audio, understand the message, and respond appropriately.\\n\\nRESPONSE GUIDELINES:\\n- Be concise but thorough\\n- Prioritize accuracy over speculation\\n- Maintain a professional and helpful tone\\n- When uncertain, acknowledge limitations\\n- Format responses for easy reading on mobile devices\\n- Include actionable information when appropriate\\n\\nLIMITATIONS:\\n- Mention if you're unable to process certain file formats\\n- Indicate if an image is unclear or if details are difficult to discern\\n- Note if audio quality impacts transcription accuracy\\n\\nSECURITY & PRIVACY:\\n- Do not store or remember sensitive information shared in files, images, or voice notes\\n- Do not share personal information across different user interactions\\n- Inform users about data privacy limitations when relevant\\n\\nAnalyze all inputs carefully before responding. Your goal is to provide value through accurate information and helpful assistance.\"\n        },\n        \"promptType\": \"define\"\n      },\n      \"typeVersion\": 1.8\n    },\n    {\n      \"id\": \"103825d0-8521-43c7-8246-9cc1faca42e1\",\n      \"name\": \"Download File\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        720,\n        460\n      ],\n      \"parameters\": {\n        \"url\": \"={{ $json.url }}\",\n        \"options\": {},\n        \"authentication\": \"genericCredentialType\",\n        \"genericAuthType\": \"httpHeaderAuth\"\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": {\n          \"id\": \"FDP9FxauzJt9rkjr\",\n          \"name\": \"WhatsApp\"\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"98077f98-6dcf-4932-9363-19bf1fdc299e\",\n      \"name\": \"Extract from File\",\n      \"type\": \"n8n-nodes-base.extractFromFile\",\n      \"position\": [\n        980,\n        460\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"operation\": \"pdf\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"fefc8b87-d64e-4ff9-9f62-1ac3af2bf17e\",\n      \"name\": \"Simple Memory\",\n      \"type\": \"@n8n/n8n-nodes-langchain.memoryBufferWindow\",\n      \"position\": [\n        300,\n        1440\n      ],\n      \"parameters\": {\n        \"sessionKey\": \"=memory_{{ $('WhatsApp Trigger').item.json.contacts[0].wa_id }}\",\n        \"sessionIdType\": \"customKey\",\n        \"contextWindowLength\": 10\n      },\n      \"typeVersion\": 1.3\n    },\n    {\n      \"id\": \"83ac997d-6ba0-4eb7-bd6c-80671f03c56c\",\n      \"name\": \"Get File Url\",\n      \"type\": \"n8n-nodes-base.whatsApp\",\n      \"position\": [\n        500,\n        460\n      ],\n      \"webhookId\": \"280bd5de-32d7-4d8f-93d2-e91e3b0bc161\",\n      \"parameters\": {\n        \"resource\": \"media\",\n        \"operation\": \"mediaUrlGet\",\n        \"mediaGetId\": \"={{ $('WhatsApp Trigger').item.json.messages[0].document.id }}\"\n      },\n      \"credentials\": {\n        \"whatsAppApi\": {\n          \"id\": \"HDUOWQXeRXMVjo0Z\",\n          \"name\": \"WhatsApp account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"56b23f60-57c3-4ea7-a4e8-64029a2e44c1\",\n      \"name\": \"Only PDF File\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        220,\n        480\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"f52d2aaa-e0b2-45e5-8c4b-ceef42182a0d\",\n              \"operator\": {\n                \"name\": \"filter.operator.equals\",\n                \"type\": \"string\",\n                \"operation\": \"equals\"\n              },\n              \"leftValue\": \"={{ $json.messages[0].document.mime_type }}\",\n              \"rightValue\": \"application/pdf\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"fa733b7b-16a7-4a9b-86b3-88395535ecd5\",\n      \"name\": \"Fix mimeType for Audio\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        1040,\n        1080\n      ],\n      \"parameters\": {\n        \"jsCode\": \"for (const item of $input.all()) {\\n  if (item.binary) {\\n    const binaryPropertyNames = Object.keys(item.binary);\\n    for (const propName of binaryPropertyNames) {\\n      if (item.binary[propName].mimeType === 'audio/mp3') {\\n        item.binary[propName].mimeType = 'audio/mpeg';\\n      }\\n    }\\n  }\\n}\\n\\nreturn $input.all();\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"0d99c2fa-945b-487a-b929-742e8b1b6859\",\n      \"name\": \"Send message\",\n      \"type\": \"n8n-nodes-base.whatsApp\",\n      \"position\": [\n        840,\n        1360\n      ],\n      \"webhookId\": \"23834751-5066-48ba-8e19-549680df2b27\",\n      \"parameters\": {\n        \"textBody\": \"={{ $json.output }}\",\n        \"operation\": \"send\",\n        \"phoneNumberId\": \"470271332838881\",\n        \"additionalFields\": {},\n        \"recipientPhoneNumber\": \"={{ $('WhatsApp Trigger').item.json.messages[0].from }}\"\n      },\n      \"credentials\": {\n        \"whatsAppApi\": {\n          \"id\": \"HDUOWQXeRXMVjo0Z\",\n          \"name\": \"WhatsApp account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"046328e9-e948-479c-ac42-567877350f1e\",\n      \"name\": \"Send audio\",\n      \"type\": \"n8n-nodes-base.whatsApp\",\n      \"position\": [\n        1260,\n        1080\n      ],\n      \"webhookId\": \"d18b2c98-84e4-43cf-a532-0c47d5161684\",\n      \"parameters\": {\n        \"mediaPath\": \"useMedian8n\",\n        \"operation\": \"send\",\n        \"messageType\": \"audio\",\n        \"phoneNumberId\": \"470271332838881\",\n        \"additionalFields\": {},\n        \"recipientPhoneNumber\": \"={{ $('Input type').item.json.contacts[0].wa_id }}\"\n      },\n      \"credentials\": {\n        \"whatsAppApi\": {\n          \"id\": \"HDUOWQXeRXMVjo0Z\",\n          \"name\": \"WhatsApp account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"aa20a408-42ab-4011-9cea-331e23cda4ce\",\n      \"name\": \"Incorrect format\",\n      \"type\": \"n8n-nodes-base.whatsApp\",\n      \"position\": [\n        500,\n        700\n      ],\n      \"webhookId\": \"23834751-5066-48ba-8e19-549680df2b27\",\n      \"parameters\": {\n        \"textBody\": \"=Sorry but you can only send PDF files\",\n        \"operation\": \"send\",\n        \"phoneNumberId\": \"470271332838881\",\n        \"additionalFields\": {},\n        \"recipientPhoneNumber\": \"={{ $('WhatsApp Trigger').item.json.messages[0].from }}\"\n      },\n      \"credentials\": {\n        \"whatsAppApi\": {\n          \"id\": \"HDUOWQXeRXMVjo0Z\",\n          \"name\": \"WhatsApp account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"23b3750d-3638-4fd0-bab8-6082f53f19f9\",\n      \"name\": \"Text\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        1240,\n        -520\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"c53cd9f9-77c1-4331-98ff-bfc9bdf95a3c\",\n              \"name\": \"text\",\n              \"type\": \"string\",\n              \"value\": \"={{ $('WhatsApp Trigger').item.json.messages[0].text.body }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"435c020b-826b-4946-b19e-f9663f4f9f23\",\n      \"name\": \"Audio\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        1240,\n        -180\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"219577d5-b028-48fc-90be-980f4171ab68\",\n              \"name\": \"text\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.text }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"0139bb33-651e-4f37-901d-ccc705c9833a\",\n      \"name\": \"Image\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        1220,\n        120\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"67552183-de2e-494a-878e-c2948e8cb6bb\",\n              \"name\": \"text\",\n              \"type\": \"string\",\n              \"value\": \"=User request on the image:\\n{{ \\\"Describe the following image\\\" || $('WhatsApp Trigger').item.json.messages[0].image.caption }}\\n\\nImage description:\\n{{ $json.content }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"d66b7190-f83b-483e-b3f3-8c220e2c815f\",\n      \"name\": \"File\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        1240,\n        460\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"67552183-de2e-494a-878e-c2948e8cb6bb\",\n              \"name\": \"text\",\n              \"type\": \"string\",\n              \"value\": \"=User request on the file:\\n{{ \\\"Describe this file\\\" || $('Only PDF File').item.json.messages[0].document.caption }}\\n\\nFile content:\\n{{ $json.text }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"20239933-418c-436f-b15b-c293043a0328\",\n      \"name\": \"Not supported\",\n      \"type\": \"n8n-nodes-base.whatsApp\",\n      \"position\": [\n        -260,\n        360\n      ],\n      \"webhookId\": \"23834751-5066-48ba-8e19-549680df2b27\",\n      \"parameters\": {\n        \"textBody\": \"=You can only send text messages, images, audio files and PDF documents.\",\n        \"operation\": \"send\",\n        \"phoneNumberId\": \"470271332838881\",\n        \"additionalFields\": {},\n        \"recipientPhoneNumber\": \"={{ $('WhatsApp Trigger').item.json.messages[0].from }}\"\n      },\n      \"credentials\": {\n        \"whatsAppApi\": {\n          \"id\": \"HDUOWQXeRXMVjo0Z\",\n          \"name\": \"WhatsApp account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"117fd705-1f64-4bcc-88db-357df679fa3d\",\n      \"name\": \"Get Image Url\",\n      \"type\": \"n8n-nodes-base.whatsApp\",\n      \"position\": [\n        480,\n        120\n      ],\n      \"webhookId\": \"280bd5de-32d7-4d8f-93d2-e91e3b0bc161\",\n      \"parameters\": {\n        \"resource\": \"media\",\n        \"operation\": \"mediaUrlGet\",\n        \"mediaGetId\": \"={{ $('WhatsApp Trigger').item.json.messages[0].image.id }}\"\n      },\n      \"credentials\": {\n        \"whatsAppApi\": {\n          \"id\": \"HDUOWQXeRXMVjo0Z\",\n          \"name\": \"WhatsApp account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"3bf7364c-6263-4825-aec5-693adaed7d03\",\n      \"name\": \"Get Audio Url\",\n      \"type\": \"n8n-nodes-base.whatsApp\",\n      \"position\": [\n        460,\n        -180\n      ],\n      \"webhookId\": \"87caa300-7204-47b5-959a-94f4a8fbf8cf\",\n      \"parameters\": {\n        \"resource\": \"media\",\n        \"operation\": \"mediaUrlGet\",\n        \"mediaGetId\": \"={{ $('WhatsApp Trigger').item.json.messages[0].audio.id }}\"\n      },\n      \"credentials\": {\n        \"whatsAppApi\": {\n          \"id\": \"HDUOWQXeRXMVjo0Z\",\n          \"name\": \"WhatsApp account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"b23f8467-480a-45c1-a7df-e512290a8e13\",\n      \"name\": \"Generate Audio Response\",\n      \"type\": \"@n8n/n8n-nodes-langchain.openAi\",\n      \"position\": [\n        840,\n        1080\n      ],\n      \"parameters\": {\n        \"input\": \"={{ $('AI Agent1').item.json.output }}\",\n        \"voice\": \"onyx\",\n        \"options\": {},\n        \"resource\": \"audio\"\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"4zwP0MSr8zkNvvV9\",\n          \"name\": \"OpenAi account\"\n        }\n      },\n      \"typeVersion\": 1.8\n    },\n    {\n      \"id\": \"0b139e60-fbf3-43ae-ae3f-40588f135443\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        120,\n        -560\n      ],\n      \"parameters\": {\n        \"width\": 1340,\n        \"height\": 240,\n        \"content\": \"## æ–‡æœ¬\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"3622ad4c-79c7-479f-a050-ff21d3077c77\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        120,\n        -240\n      ],\n      \"parameters\": {\n        \"width\": 1340,\n        \"height\": 240,\n        \"content\": \"## å£°éŸ³\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"1f35e179-22d1-4019-a807-21803df51a46\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        120,\n        80\n      ],\n      \"parameters\": {\n        \"width\": 1340,\n        \"height\": 240,\n        \"content\": \"## å›¾åƒ\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"314b8ae2-e518-44a3-80a5-dc8482ab1fa9\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        120,\n        420\n      ],\n      \"parameters\": {\n        \"width\": 1340,\n        \"height\": 240,\n        \"content\": \"## æ–‡æ¡£\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"a55cc899-3490-4b7c-b793-4f20605fc711\",\n      \"name\": \"Sticky Note4\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        120,\n        960\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 1340,\n        \"height\": 600,\n        \"content\": \"## å›åº”\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"f37e975b-c112-4af8-badd-1fdbdb90d2f5\",\n      \"name\": \"From audio to audio?\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        580,\n        1220\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"b9d1d759-f585-4791-a743-b9d72951e77c\",\n              \"operator\": {\n                \"type\": \"object\",\n                \"operation\": \"exists\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $('WhatsApp Trigger').item.json.messages[0].audio }}\",\n              \"rightValue\": \"\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"864be43a-e280-4c6d-bab4-878b88304807\",\n      \"name\": \"Input type\",\n      \"type\": \"n8n-nodes-base.switch\",\n      \"position\": [\n        -420,\n        40\n      ],\n      \"parameters\": {\n        \"rules\": {\n          \"values\": [\n            {\n              \"outputKey\": \"Text\",\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 2,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"08fd0c80-307e-4f45-b1de-35192ee4ec5e\",\n                    \"operator\": {\n                      \"type\": \"string\",\n                      \"operation\": \"exists\",\n                      \"singleValue\": true\n                    },\n                    \"leftValue\": \"={{ $json.messages[0].text.body }}\",\n                    \"rightValue\": \"\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            },\n            {\n              \"outputKey\": \"Voice\",\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 2,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"b7b64446-f1ea-4622-990c-22f3999a8269\",\n                    \"operator\": {\n                      \"type\": \"object\",\n                      \"operation\": \"exists\",\n                      \"singleValue\": true\n                    },\n                    \"leftValue\": \"={{ $json.messages[0].audio }}\",\n                    \"rightValue\": \"\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            },\n            {\n              \"outputKey\": \"Image\",\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 2,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"202af928-a324-411a-bf15-68a349e7bf9e\",\n                    \"operator\": {\n                      \"type\": \"object\",\n                      \"operation\": \"exists\",\n                      \"singleValue\": true\n                    },\n                    \"leftValue\": \"={{ $json.messages[0].image }}\",\n                    \"rightValue\": \"\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            },\n            {\n              \"outputKey\": \"Document\",\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 2,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"c63299e9-6069-4bc6-afb9-7beebf6e3d69\",\n                    \"operator\": {\n                      \"type\": \"object\",\n                      \"operation\": \"exists\",\n                      \"singleValue\": true\n                    },\n                    \"leftValue\": \"={{ $json.messages[0].document }}\",\n                    \"rightValue\": \"\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            }\n          ]\n        },\n        \"options\": {\n          \"fallbackOutput\": \"extra\"\n        }\n      },\n      \"typeVersion\": 3.2\n    },\n    {\n      \"id\": \"cf327372-d2cc-40db-a057-9bfb10d6a520\",\n      \"name\": \"Sticky Note5\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -1580,\n        -1140\n      ],\n      \"parameters\": {\n        \"color\": 3,\n        \"width\": 780,\n        \"height\": 2680,\n        \"content\": \"å¦‚ä½•è·å–WhatsApp APIï¼Ÿ\\n\\n### âœ… å‰ææ¡ä»¶\\nå¼€å§‹å‰è¯·ç¡®ä¿æ‚¨æ‹¥æœ‰ï¼š\\n- **Metaä¼ä¸šè´¦æˆ·**\\n- **Facebookå¼€å‘è€…è´¦æˆ·**\\n- **å·²éªŒè¯çš„ä¼ä¸šèµ„è´¨**\\n- **å¯ç»‘å®šWhatsAppçš„æ‰‹æœºå·ç **\\n- **Meta Graph API Explorer**æˆ–**Metaå¼€å‘è€…é—¨æˆ·**è®¿é—®æƒé™\\n\\n---\\n\\n### ğŸªœ ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºMetaåº”ç”¨\\n\\n1. è®¿é—® [https://developers.facebook.com/apps](https://developers.facebook.com/apps)\\n2. ç‚¹å‡»**\\\"åˆ›å»ºåº”ç”¨\\\"**\\n3. é€‰æ‹©**\\\"ä¼ä¸š\\\"**ç±»å‹ï¼Œç‚¹å‡»**ä¸‹ä¸€æ­¥**\\n4. è¾“å…¥åº”ç”¨åç§°å’Œè”ç³»é‚®ç®±\\n5. é€‰æ‹©ä¼ä¸šè´¦æˆ·ï¼ˆæˆ–æ–°å»ºï¼‰\\n6. ç‚¹å‡»**åˆ›å»ºåº”ç”¨**\\n\\n---\\n\\n### ğŸªœ ç¬¬äºŒæ­¥ï¼šæ·»åŠ WhatsAppåŠŸèƒ½\\n\\n1. åœ¨åº”ç”¨é¢æ¿åº•éƒ¨æ‰¾åˆ°**\\\"æ·»åŠ åŠŸèƒ½\\\"**\\n2. é€‰æ‹©**\\\"WhatsApp\\\"**å¹¶ç‚¹å‡»**\\\"è®¾ç½®\\\"**\\n3. å…³è”æ‚¨çš„**ä¼ä¸šç®¡ç†å¹³å°è´¦æˆ·**\\n\\n---\\n\\n### ğŸªœ ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºWhatsAppä¼ä¸šè´¦æˆ·ï¼ˆå¦‚æœªåˆ›å»ºï¼‰\\n\\n1. è®¿é—® [https://business.facebook.com/](https://business.facebook.com/)\\n2. ç‚¹å‡»**\\\"åˆ›å»ºè´¦æˆ·\\\"**å®Œå–„ä¼ä¸šä¿¡æ¯\\n3. è¿›å…¥**ä¼ä¸šè®¾ç½® > è´¦æˆ· > WhatsAppè´¦æˆ·**\\n4. æ·»åŠ **æ‰‹æœºå·ç **ï¼ˆå°†æ”¶åˆ°éªŒè¯ç ï¼‰\\n\\n---\\n\\n### ğŸªœ ç¬¬å››æ­¥ï¼šç”Ÿæˆä¸´æ—¶è®¿é—®ä»¤ç‰Œï¼ˆå¼€å‘ç”¨ï¼‰\\n\\n1. åœ¨**åº”ç”¨é¢æ¿**è¿›å…¥**WhatsApp > å¿«é€Ÿå…¥é—¨**\\n2. é€‰æ‹©æµ‹è¯•æ‰‹æœºå·\\n3. å¤åˆ¶**ä¸´æ—¶è®¿é—®ä»¤ç‰Œ**ï¼ˆ24å°æ—¶æœ‰æ•ˆï¼‰\\n4. è®°å½•**ç”µè¯å·ç ID**å’Œ**WhatsAppä¼ä¸šè´¦æˆ·ID**\\n\\nâœ… ä¿å­˜è¿™ä¸‰ä¸ªå‚æ•°ï¼š\\n- **è®¿é—®ä»¤ç‰Œ**\\n- **ç”µè¯å·ç ID**\\n- **WABAä¼ä¸šè´¦æˆ·ID**\\n\\nğŸ“ æç¤ºï¼šæ­£å¼ç¯å¢ƒéœ€åˆ›å»º**æ°¸ä¹…ä»¤ç‰Œ**ï¼ˆè§ç¬¬ä¸ƒæ­¥ï¼‰\\n\\n---\\n\\n### ğŸªœ ç¬¬äº”æ­¥ï¼šé…ç½®Webhook URLï¼ˆn8nï¼‰\\n\\n1. åœ¨n8nåˆ›å»º**WebhookèŠ‚ç‚¹**ï¼ˆæˆ–ä½¿ç”¨`WhatsAppè§¦å‘å™¨`èŠ‚ç‚¹ï¼‰\\n2. å¤åˆ¶webhookåœ°å€\\n3. åœ¨Metaå¼€å‘è€…é¢æ¿ï¼š\\n   - è¿›å…¥**WhatsApp > é…ç½®**\\n   - ç‚¹å‡»**\\\"ç¼–è¾‘å›è°ƒURL\\\"**\\n   - ç²˜è´´n8nçš„webhookåœ°å€å¹¶è®¾ç½®éšæœº**éªŒè¯ä»¤ç‰Œ**\\n4. åœ¨n8né…ç½®webhookå“åº”éªŒè¯è¯·æ±‚\\n\\n---\\n\\n### ğŸªœ ç¬¬å…­æ­¥ï¼šè®¢é˜…Webhookäº‹ä»¶\\n\\n1. åœ¨**WhatsApp > é…ç½®**ç‚¹å‡»**\\\"ç®¡ç†è®¢é˜…\\\"**\\n2. å¯ç”¨ï¼š\\n   - `messages`ï¼ˆæ¶ˆæ¯ï¼‰\\n   - `message_status`ï¼ˆæ¶ˆæ¯çŠ¶æ€ï¼‰\\n   - ï¼ˆå¯é€‰`message_template_status_update`æ¨¡æ¿çŠ¶æ€æ›´æ–°ï¼‰\\n\\n---\\n\\n### ğŸªœ ç¬¬ä¸ƒæ­¥ï¼šï¼ˆæ¨èï¼‰ç”Ÿæˆæ°¸ä¹…ä»¤ç‰Œ\\n\\n1. è®¿é—® [https://developers.facebook.com/tools/access_token/](https://developers.facebook.com/tools/access_token/)\\n2. é€‰æ‹©æ‚¨çš„åº”ç”¨\\n3. ç‚¹å‡»**è·å–ä»¤ç‰Œ > ç³»ç»Ÿç”¨æˆ·ä»¤ç‰Œ**\\n4. å‹¾é€‰æƒé™ï¼š\\n   - `whatsapp_business_management`\\n   - `whatsapp_business_messaging`\\n   - `business_management`\\n5. ç‚¹å‡»**ç”Ÿæˆä»¤ç‰Œ**\\n6. å¤åˆ¶å¹¶å®‰å…¨å­˜å‚¨è¯¥ä»¤ç‰Œ\\n\\n---\\n\\n### ğŸªœ ç¬¬å…«æ­¥ï¼šåœ¨n8né…ç½®å‡­è¯\\n\\n1. è¿›å…¥**n8n > è®¾ç½® > å‡­è¯**\\n2. åˆ›å»º**HTTPå¤´éƒ¨è®¤è¯**ç±»å‹å‡­è¯ï¼š\\n   - **åç§°ï¼š** WhatsApp\\n   - **å¤´éƒ¨åç§°ï¼š** `Authorization`\\n   - **å€¼ï¼š** `Bearer <æ‚¨çš„è®¿é—®ä»¤ç‰Œ>`\\n3. ä¿å­˜\\n\\nåœ¨å·¥ä½œæµä¸­ï¼š\\n- ä½¿ç”¨HTTPè¯·æ±‚èŠ‚ç‚¹æˆ–WhatsAppèŠ‚ç‚¹\\n- åœ¨èŠ‚ç‚¹å‚æ•°è®¾ç½®`phone_number_id`\\n- å…³è”WhatsAppå‡­è¯\\n\\n---\\n\\n### ğŸ§ª ç¬¬ä¹æ­¥ï¼šæµ‹è¯•è¿æ¥\\n\\n1. ç”¨WhatsAppå·ç å‘ä¼ä¸šå·å‘é€æ¶ˆæ¯\\n2. n8nå·¥ä½œæµåº”è¢«è§¦å‘\\n3. ç°åœ¨æ‚¨å·²å®ç°ç¨‹åºåŒ–æ”¶å‘æ¶ˆæ¯ ğŸ‰\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"active\": false,\n  \"pinData\": {},\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"4dfe4c80-3a9a-4292-bcb2-3f68bbea5a3a\",\n  \"connections\": {\n    \"File\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"AI Agent1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Text\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"AI Agent1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Audio\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"AI Agent1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Image\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"AI Agent1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"AI Agent1\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"From audio to audio?\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Input type\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Text\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Get Audio Url\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Get Image Url\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Only PDF File\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Not supported\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get File Url\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Download File\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Analyze Image\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Image\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Download File\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Extract from File\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get Audio Url\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Download Audio\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get Image Url\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Download Image\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Only PDF File\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get File Url\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Incorrect format\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Simple Memory\": {\n      \"ai_memory\": [\n        [\n          {\n            \"node\": \"AI Agent1\",\n            \"type\": \"ai_memory\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Download Audio\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Transcribe Audio\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Download Image\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Analyze Image\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Transcribe Audio\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Audio\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"WhatsApp Trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Input type\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Extract from File\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"File\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"OpenAI Chat Model\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"AI Agent1\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"From audio to audio?\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Generate Audio Response\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Send message\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Fix mimeType for Audio\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Send audio\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Generate Audio Response\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Fix mimeType for Audio\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}