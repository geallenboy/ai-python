{
  "title": "Real Estate Lead Generation with BatchData Skip Tracing & CRM Integration",
  "url": "https://n8n.io/workflows/3666-real-estate-lead-generation-with-batchdata-skip-tracing-and-crm-integration/",
  "category": "AI",
  "category_url": "https://n8n.io/workflows/categories/ai/",
  "author": "Preston Zeller",
  "publish_date": "Last update 3 days ago",
  "content": "",
  "workflow_json": "{\"id\":\"RGVS0tHJV7Wh6aX4\",\"meta\":{\"instanceId\":\"bb9853d4d7d87207561a30bc6fe4ece20b295264f7d27d4a62215de2f3846a56\"},\"name\":\"Property Lead Contact Enrichment from CRM\",\"tags\":[],\"nodes\":[{\"id\":\"518b14de-23b9-4821-930c-8fa55eb4cfb4\",\"name\":\"When clicking \\\"Execute Workflow\\\"\",\"type\":\"n8n-nodes-base.manualTrigger\",\"position\":[-340,280],\"parameters\":{},\"typeVersion\":1},{\"id\":\"939df2a3-f6dd-40c9-a01a-460923a332a6\",\"name\":\"Daily Schedule\",\"type\":\"n8n-nodes-base.scheduleTrigger\",\"position\":[-340,100],\"parameters\":{\"rule\":{\"interval\":[{}]}},\"typeVersion\":1.1},{\"id\":\"3228372f-ac40-4898-8bf5-09a4f37fde85\",\"name\":\"Search Properties API\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[320,260],\"parameters\":{\"url\":\"https://api.batchdata.com/api/v1/properties/search\",\"method\":\"POST\",\"options\":{},\"authentication\":\"genericCredentialType\",\"genericAuthType\":\"httpHeaderAuth\"},\"typeVersion\":4.1},{\"id\":\"0aa1fb95-66c8-4b61-81f5-04b37e5c1185\",\"name\":\"Configure Search Parameters\",\"type\":\"n8n-nodes-base.set\",\"position\":[40,240],\"parameters\":{\"values\":{\"string\":[{\"name\":\"search_parameters\",\"value\":\"={ \\\"location\\\": { \\\"city\\\": \\\"Austin\\\", \\\"state\\\": \\\"TX\\\" }, \\\"propertyType\\\": \\\"single_family\\\", \\\"value\\\": { \\\"min\\\": 200000, \\\"max\\\": 500000 }, \\\"status\\\": \\\"distressed\\\", \\\"equity\\\": { \\\"min\\\": 30 }, \\\"limit\\\": 50 }\"}]},\"options\":{}},\"typeVersion\":2},{\"id\":\"052b357b-a374-4e0c-ab98-67e79ed8cf2b\",\"name\":\"Filter Property Results\",\"type\":\"n8n-nodes-base.code\",\"position\":[540,260],\"parameters\":{\"jsCode\":\"// Process batch property results and filter according to criteria\\nconst results = $input.all()[0].json.results || [];\\n\\n// Filter to find matching properties\\nconst filteredProperties = results.filter(property => {\\n  // Example filtering criteria - customize as needed\\n  // Only include properties where:\\n  // 1. Owner doesn't live at the property (absentee)\\n  // 2. Property has been owned for 5+ years\\n  // 3. No sales in the last 3 years\\n  \\n  const isAbsentee = property.owner_occupied === false;\\n  \\n  // Calculate years of ownership if purchase date exists\\n  let yearsOwned = 0;\\n  if (property.last_sale_date) {\\n    const purchaseDate = new Date(property.last_sale_date);\\n    const currentDate = new Date();\\n    yearsOwned = currentDate.getFullYear() - purchaseDate.getFullYear();\\n  }\\n  \\n  // Check if no recent sales (last 3 years)\\n  let noRecentSales = true;\\n  if (property.last_sale_date) {\\n    const lastSale = new Date(property.last_sale_date);\\n    const threeYearsAgo = new Date();\\n    threeYearsAgo.setFullYear(threeYearsAgo.getFullYear() - 3);\\n    noRecentSales = lastSale < threeYearsAgo;\\n  }\\n  \\n  return isAbsentee && yearsOwned >= 5 && noRecentSales;\\n});\\n\\n// Add relevant score to each property\\nconst scoredProperties = filteredProperties.map(property => {\\n  // Create a simple scoring system from 0-100\\n  // This helps prioritize the best leads\\n  let score = 50; // Base score\\n  \\n  // Increase score for properties with more equity\\n  if (property.equity_percentage) {\\n    score += Math.min(property.equity_percentage / 2, 25);\\n  }\\n  \\n  // Increase score for longer ownership\\n  if (property.last_sale_date) {\\n    const purchaseDate = new Date(property.last_sale_date);\\n    const currentDate = new Date();\\n    const yearsOwned = currentDate.getFullYear() - purchaseDate.getFullYear();\\n    score += Math.min(yearsOwned, 15);\\n  }\\n  \\n  // Increase score for tax delinquency\\n  if (property.tax_delinquent) {\\n    score += 10;\\n  }\\n  \\n  return { ...property, lead_score: Math.round(score) };\\n});\\n\\n// Sort by score descending\\nscoredProperties.sort((a, b) => b.lead_score - a.lead_score);\\n\\n// Return the filtered and scored properties\\nreturn scoredProperties.map(property => {\\n  return {\\n    json: property\\n  };\\n});\"},\"typeVersion\":2},{\"id\":\"2c183cc1-06a1-4528-82c3-df2585df58eb\",\"name\":\"Get Owner Contact Info\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[760,260],\"parameters\":{\"url\":\"https://api.batchdata.com/api/v1/property/skip-trace\",\"method\":\"POST\",\"options\":{},\"authentication\":\"genericCredentialType\",\"genericAuthType\":\"httpHeaderAuth\"},\"typeVersion\":4.1},{\"id\":\"2fe0aef9-30d2-4c30-9029-571f3b4c8ca9\",\"name\":\"Format Lead Data\",\"type\":\"n8n-nodes-base.code\",\"position\":[960,260],\"parameters\":{\"jsCode\":\"// Process and format the property data with owner contact info\\nreturn $input.all().map(item => {\\n  const property = item.json;\\n  const skipTraceData = property.skip_trace_data || {};\\n  const ownerInfo = property.owner_info || {};\\n  \\n  return {\\n    json: {\\n      // Property Information\\n      property_id: property.property_id,\\n      address: property.address,\\n      city: property.city,\\n      state: property.state,\\n      zip: property.zip,\\n      property_type: property.property_type,\\n      beds: property.beds,\\n      baths: property.baths,\\n      sqft: property.building_sqft,\\n      lot_size: property.lot_size,\\n      year_built: property.year_built,\\n      last_sale_date: property.last_sale_date,\\n      last_sale_price: property.last_sale_price,\\n      estimated_value: property.estimated_value,\\n      estimated_equity: property.estimated_equity,\\n      equity_percentage: property.equity_percentage,\\n      lead_score: property.lead_score,\\n      \\n      // Owner Information\\n      owner_name: ownerInfo.full_name || `${ownerInfo.first_name || ''} ${ownerInfo.last_name || ''}`.trim(),\\n      owner_mailing_address: ownerInfo.mailing_address,\\n      owner_mailing_city: ownerInfo.mailing_city,\\n      owner_mailing_state: ownerInfo.mailing_state,\\n      owner_mailing_zip: ownerInfo.mailing_zip,\\n      \\n      // Contact Info from Skip Trace\\n      email: skipTraceData.email,\\n      phone: skipTraceData.phone_number,\\n      mobile: skipTraceData.mobile_number,\\n      alternate_phone: skipTraceData.alternate_phone,\\n      \\n      // Additional Details\\n      absentee_owner: property.owner_occupied === false ? 'Yes' : 'No',\\n      tax_delinquent: property.tax_delinquent ? 'Yes' : 'No',\\n      years_owned: property.years_owned,\\n      lead_source: 'BatchData Property Search',\\n      date_added: new Date().toISOString().split('T')[0]\\n    }\\n  };\\n});\"},\"typeVersion\":2},{\"id\":\"013469c2-1e83-44e0-b078-c0b3d052a2c5\",\"name\":\"Create Excel Spreadsheet\",\"type\":\"n8n-nodes-base.spreadsheetFile\",\"position\":[1280,160],\"parameters\":{\"options\":{\"fileName\":\"Property_Leads_{{ $now.format('YYYY-MM-DD') }}.xlsx\",\"headerRow\":true},\"operation\":\"toFile\",\"fileFormat\":\"xlsx\"},\"typeVersion\":2},{\"id\":\"954c492a-7da2-4902-99ab-318d4ea6e333\",\"name\":\"Push to CRM\",\"type\":\"n8n-nodes-base.hubspot\",\"position\":[1280,540],\"parameters\":{\"options\":{},\"additionalFields\":{}},\"typeVersion\":2},{\"id\":\"61bfd72b-8971-4298-8d2a-09baea403956\",\"name\":\"Email Notification\",\"type\":\"n8n-nodes-base.emailSend\",\"position\":[1520,300],\"webhookId\":\"e9459278-1cd9-47bb-bffd-88380d297217\",\"parameters\":{\"options\":{},\"subject\":\"Property Lead Report - {{ $now.format('YYYY-MM-DD') }}\",\"toEmail\":\"your-email@yourdomain.com\",\"fromEmail\":\"no-reply@yourdomain.com\"},\"typeVersion\":2.1},{\"id\":\"a79a0618-ac63-4aaf-8337-b9ccc5940eef\",\"name\":\"Summarize Results\",\"type\":\"n8n-nodes-base.code\",\"position\":[1280,360],\"parameters\":{\"jsCode\":\"// Summarize the results of the property lead search\\nconst leads = $input.all();\\nconst totalLeads = leads.length;\\n\\n// Calculate the highest lead score\\nlet highestScore = 0;\\nif (totalLeads > 0) {\\n  highestScore = Math.max(...leads.map(item => item.json.lead_score || 0));\\n}\\n\\n// Return a summary object\\nreturn {\\n  json: {\\n    total_leads: totalLeads,\\n    highest_score: highestScore,\\n    execution_date: new Date().toISOString(),\\n    success: true\\n  }\\n};\"},\"typeVersion\":2},{\"id\":\"cf6bbc2b-4892-4612-aee9-7f255f627a67\",\"name\":\"Sticky Note - Workflow Overview\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-420,-520],\"parameters\":{\"width\":800,\"height\":280,\"content\":\"# Property Lead Automation Workflow\\n\\nThis workflow automatically searches for potential real estate leads based on configured criteria, obtains owner contact information through skip tracing, and pushes the leads to your CRM. It can be run manually or scheduled to run daily.\\n\\n## Steps: Property Search → Filter Results → Skip Trace → Format Data → Export (Excel & CRM)\"},\"typeVersion\":1},{\"id\":\"ff155460-3f4e-44e8-aac7-4b84dff2dceb\",\"name\":\"Sticky Note - Triggers\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-420,-160],\"parameters\":{\"color\":2,\"width\":320,\"height\":620,\"content\":\"## Workflow Triggers\\n\\nThis workflow can be triggered in two ways:\\n\\n1. **Scheduled Trigger** - Runs automatically every day at the specified time\\n\\n2. **Manual Trigger** - Run the workflow on-demand by clicking Execute\"},\"typeVersion\":1},{\"id\":\"8c127497-0dc4-428d-a946-14c10b9572cb\",\"name\":\"Sticky Note - Property Search\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-80,-180],\"parameters\":{\"color\":4,\"width\":320,\"height\":650,\"content\":\"## Search Configuration\\n\\nConfigure your property search criteria including:\\n\\n- Location (city, state, zip)\\n- Property type\\n- Value range\\n- Equity percentage\\n- Owner status\\n- And more\\n\\nEdit the 'search_parameters' in the Set node to customize your search criteria.\"},\"typeVersion\":1},{\"id\":\"20ad7c5e-5d73-4b43-b5b0-6c9eaae18400\",\"name\":\"Sticky Note - Data Processing\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[260,-180],\"parameters\":{\"color\":5,\"width\":880,\"height\":660,\"content\":\"## Property Data Processing\\n\\n1. **Search Properties API** - Connect to BatchData to search for properties\\n\\n2. **Filter Property Results** - Apply additional filtering logic and calculate lead scores based on factors like:\\n   - Equity percentage\\n   - Years of ownership\\n   - Owner occupancy status\\n   - Tax delinquency\\n   - Recent sales activity\\n\\n3. **Get Owner Contact Info** - Skip trace each property to find owner contact details\\n\\n4. **Format Lead Data** - Structure the data for CRM and reporting\"},\"typeVersion\":1},{\"id\":\"a0254233-a0af-43b2-8258-0820d8fdd49d\",\"name\":\"Sticky Note - Output\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1180,-180],\"parameters\":{\"color\":6,\"width\":560,\"height\":920,\"content\":\"## Lead Output Options\\n\\n1. **Create Excel Spreadsheet** - Generates an Excel file with all property leads and details\\n\\n2. **Push to CRM** - Adds leads to your CRM system (HubSpot in this example, but can be changed to Salesforce, Zoho, etc.)\\n\\n3. **Email Notification** - Sends a summary email with the Excel file attached\\n\\n4. **Summarize Results** - Provides a summary of the execution results\"},\"typeVersion\":1}],\"active\":false,\"pinData\":{},\"settings\":{\"executionOrder\":\"v1\"},\"versionId\":\"ff401fba-f56d-4d22-b259-d23a4e141a98\",\"connections\":{\"Daily Schedule\":{\"main\":[[{\"node\":\"Configure Search Parameters\",\"type\":\"main\",\"index\":0}]]},\"Format Lead Data\":{\"main\":[[{\"node\":\"Create Excel Spreadsheet\",\"type\":\"main\",\"index\":0},{\"node\":\"Push to CRM\",\"type\":\"main\",\"index\":0},{\"node\":\"Summarize Results\",\"type\":\"main\",\"index\":0}]]},\"Summarize Results\":{\"main\":[[{\"node\":\"Email Notification\",\"type\":\"main\",\"index\":0}]]},\"Search Properties API\":{\"main\":[[{\"node\":\"Filter Property Results\",\"type\":\"main\",\"index\":0}]]},\"Get Owner Contact Info\":{\"main\":[[{\"node\":\"Format Lead Data\",\"type\":\"main\",\"index\":0}]]},\"Filter Property Results\":{\"main\":[[{\"node\":\"Get Owner Contact Info\",\"type\":\"main\",\"index\":0}]]},\"Create Excel Spreadsheet\":{\"main\":[[{\"node\":\"Email Notification\",\"type\":\"main\",\"index\":0}]]},\"Configure Search Parameters\":{\"main\":[[{\"node\":\"Search Properties API\",\"type\":\"main\",\"index\":0}]]},\"When clicking \\\"Execute Workflow\\\"\":{\"main\":[[{\"node\":\"Configure Search Parameters\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "## How It Works\n\nThis workflow automates the entire property lead generation process in a few simple steps:\n\n  1. Property Search: Connects to BatchData's Property Search API with customizable parameters (location, property type, value range, equity percentage, etc.)\n  2. Lead Filtering & Scoring: Processes results to identify the most promising leads based on criteria like absentee ownership, years owned, equity percentage, and tax status. Each property receives a lead score to prioritize follow-up.\n  3. Skip Tracing: Automatically retrieves owner contact information (phone, email, mailing address) for each qualified property.\n  4. Data Formatting: Structures all property and owner data into a clean, organized format ready for your systems.\n  5. Multi-Channel Output:\n\n\n  * Generates an Excel spreadsheet with all lead details\n  * Pushes leads directly to your CRM (configurable for HubSpot, Salesforce, etc.)\n  * Sends a summary email with the spreadsheet attached\n\n\n\nThe workflow can run on a daily schedule or be triggered manually as needed. All parameters are easily configurable through dedicated nodes, requiring no coding knowledge.\n\n## Who's It For\n\nThis workflow is perfect for:\n\n  * Real Estate Investors looking to find off-market properties with motivated sellers\n  * Real Estate Agents who want to generate listing leads from distressed or high-equity properties\n  * Investment Companies that need regular lead flow for acquisitions\n  * Real Estate Marketers who run targeted campaigns to property owners\n  * Wholesalers seeking to build a pipeline of potential deals\n  * Property Service Providers (roof repair, renovation contractors, etc.) who target specific property types\n\n\n\nAnyone who needs reliable, consistent lead generation for real estate without the manual work of searching, filtering, and organizing property data will benefit from this automation.\n\n## About BatchData\n\nBatchData is a comprehensive property data provider that offers access to nationwide property information, owner details, and skip tracing services. Key features include:\n\n  * Extensive Database: Covers 150+ million properties across all 50 states\n  * Rich Property Data: Includes ownership information, tax records, sales history, valuation estimates, equity positions, and more\n  * Skip Tracing Services: Provides owner contact information including phone numbers, email addresses, and mailing addresses\n  * Distressed Property Indicators: Flags for pre-foreclosure, tax delinquency, vacancy, and other motivation factors\n  * RESTful API: Professional API for programmatic access to all property data services\n  * Regular Updates: Continuously refreshed data for accurate information\n\n\n\nBatchData's services are designed for real estate professionals who need reliable property and owner information to power their marketing and acquisition strategies. Their API-first approach makes it ideal for workflow automation tools like N8N.\n",
  "readme_html": "<!--[--><div data-v-006f9244=\"\"><h2>How It Works</h2>\n<p>This workflow automates the entire property lead generation process in a few simple steps:</p>\n<ol>\n<li>Property Search: Connects to BatchData's Property Search API with customizable parameters (location, property type, value range, equity percentage, etc.)</li>\n<li>Lead Filtering &amp; Scoring: Processes results to identify the most promising leads based on criteria like absentee ownership, years owned, equity percentage, and tax status. Each property receives a lead score to prioritize follow-up.</li>\n<li>Skip Tracing: Automatically retrieves owner contact information (phone, email, mailing address) for each qualified property.</li>\n<li>Data Formatting: Structures all property and owner data into a clean, organized format ready for your systems.</li>\n<li>Multi-Channel Output:</li>\n</ol>\n<ul>\n<li>Generates an Excel spreadsheet with all lead details</li>\n<li>Pushes leads directly to your CRM (configurable for HubSpot, Salesforce, etc.)</li>\n<li>Sends a summary email with the spreadsheet attached</li>\n</ul>\n<p>The workflow can run on a daily schedule or be triggered manually as needed. All parameters are easily configurable through dedicated nodes, requiring no coding knowledge.</p>\n<h2>Who's It For</h2>\n<p>This workflow is perfect for:</p>\n<ul>\n<li>Real Estate Investors looking to find off-market properties with motivated sellers</li>\n<li>Real Estate Agents who want to generate listing leads from distressed or high-equity properties</li>\n<li>Investment Companies that need regular lead flow for acquisitions</li>\n<li>Real Estate Marketers who run targeted campaigns to property owners</li>\n<li>Wholesalers seeking to build a pipeline of potential deals</li>\n<li>Property Service Providers (roof repair, renovation contractors, etc.) who target specific property types</li>\n</ul>\n<p>Anyone who needs reliable, consistent lead generation for real estate without the manual work of searching, filtering, and organizing property data will benefit from this automation.</p>\n<h2>About BatchData</h2>\n<p>BatchData is a comprehensive property data provider that offers access to nationwide property information, owner details, and skip tracing services. Key features include:</p>\n<ul>\n<li>Extensive Database: Covers 150+ million properties across all 50 states</li>\n<li>Rich Property Data: Includes ownership information, tax records, sales history, valuation estimates, equity positions, and more</li>\n<li>Skip Tracing Services: Provides owner contact information including phone numbers, email addresses, and mailing addresses</li>\n<li>Distressed Property Indicators: Flags for pre-foreclosure, tax delinquency, vacancy, and other motivation factors</li>\n<li>RESTful API: Professional API for programmatic access to all property data services</li>\n<li>Regular Updates: Continuously refreshed data for accurate information</li>\n</ul>\n<p>BatchData's services are designed for real estate professionals who need reliable property and owner information to power their marketing and acquisition strategies. Their API-first approach makes it ideal for workflow automation tools like N8N.</p>\n</div><!--]-->",
  "readme_zh": "## 运作原理\n\n本工作流通过几个简单步骤实现房产潜在客户全流程自动化生成：\n\n1. **房产搜索**：连接BatchData房产搜索API，支持自定义参数（地理位置、房产类型、价值区间、产权比例等）\n2. **线索筛选评分**：根据非自住业主、持有年限、产权比例、纳税状态等标准筛选优质线索，每条房产线索均附优先级评分\n3. **业主追踪**：自动获取合格房产的业主联系方式（电话、邮箱、邮寄地址）\n4. **数据格式化**：将房产与业主数据整理为结构清晰的标准化格式\n5. **多渠道输出**：\n   * 生成含完整线索信息的Excel表格\n   * 直接推送至客户CRM系统（支持HubSpot、Salesforce等配置）\n   * 发送附带数据表格的摘要邮件\n\n支持每日自动运行或手动触发，所有参数均通过专用节点直观配置，无需编程知识。\n\n## 适用对象\n\n本方案特别适合：\n\n* **房产投资者**：寻找急售的场外交易房源\n* **房产经纪人**：从高净值或不良资产中挖掘挂牌委托\n* **投资机构**：需要持续收购线索来源\n* **地产营销商**：针对业主开展定向推广\n* **批发买家**：建立潜在交易渠道\n* **房屋服务商**（屋顶维修/装修承包商等）：精准定位特定房产类型\n\n任何需要稳定获取房产线索，又希望避免人工搜索、筛选、整理数据的用户都将受益于此自动化方案。\n\n## BatchData平台简介\n\nBatchData是领先的全美房产数据服务商，提供覆盖全国的房产信息、业主数据及追踪服务，核心优势包括：\n\n* **海量数据库**：涵盖全美50州1.5亿+房产\n* **多维数据**：产权记录、纳税信息、交易历史、估值报告、资产净值等\n* **业主追踪**：提供电话、邮箱、住址等联系方式\n* **不良资产标识**：止赎前兆、欠税、空置等业主急售特征标记\n* **RESTful API**：支持通过专业接口调用所有数据服务\n* **实时更新**：持续更新的精准数据\n\n专为依赖精准房产数据开展营销与收购的房地产从业者设计，其API优先的特性完美适配N8N等自动化工作流工具。",
  "title_zh": "房地产潜在客户开发与BatchData跳号追踪及CRM系统集成",
  "publish_date_zh": "最后更新于3天前",
  "workflow_json_zh": "{\"id\": \"RGVS0tHJV7Wh6aX4\", \"meta\": {\"instanceId\": \"bb9853d4d7d87207561a30bc6fe4ece20b295264f7d27d4a62215de2f3846a56\"}, \"name\": \"CRM中的物业主管联系人信息完善\", \"tags\": [], \"nodes\": [{\"id\": \"518b14de-23b9-4821-930c-8fa55eb4cfb4\", \"name\": \"点击“执行工作流”时\", \"type\": \"n8n-nodes-base.manualTrigger\", \"position\": [-340, 280], \"parameters\": {}, \"typeVersion\": 1}, {\"id\": \"939df2a3-f6dd-40c9-a01a-460923a332a6\", \"name\": \"每日安排\", \"type\": \"n8n-nodes-base.scheduleTrigger\", \"position\": [-340, 100], \"parameters\": {\"rule\": {\"interval\": [{}]}}, \"typeVersion\": 1.1}, {\"id\": \"3228372f-ac40-4898-8bf5-09a4f37fde85\", \"name\": \"搜索属性API\", \"type\": \"n8n-nodes-base.httpRequest\", \"position\": [320, 260], \"parameters\": {\"url\": \"https://api.batchdata.com/api/v1/房产/搜索\", \"method\": \"邮政\", \"options\": {}, \"authentication\": \"通用凭证类型\", \"genericAuthType\": \"HTTP头部认证\"}, \"typeVersion\": 4.1}, {\"id\": \"0aa1fb95-66c8-4b61-81f5-04b37e5c1185\", \"name\": \"配置搜索参数\", \"type\": \"n8n-nodes-base.set\", \"position\": [40, 240], \"parameters\": {\"values\": {\"string\": [{\"name\": \"search_parameters\", \"value\": \"={ \\\"location\\\": { \\\"city\\\": \\\"Austin\\\", \\\"state\\\": \\\"TX\\\" }, \\\"propertyType\\\": \\\"single_family\\\", \\\"value\\\": { \\\"min\\\": 200000, \\\"max\\\": 500000 }, \\\"status\\\": \\\"distressed\\\", \\\"equity\\\": { \\\"min\\\": 30 }, \\\"limit\\\": 50 }\"}]}, \"options\": {}}, \"typeVersion\": 2}, {\"id\": \"052b357b-a374-4e0c-ab98-67e79ed8cf2b\", \"name\": \"筛选属性结果\", \"type\": \"n8n-nodes-base.code\", \"position\": [540, 260], \"parameters\": {\"jsCode\": \"// 处理批量房产数据并根据条件筛选\\nconst results = $input.all()[0].json.results || [];\\n\\n// 筛选符合条件的房产\\nconst filteredProperties = results.filter(property => {\\n  // 示例筛选条件 - 可根据需要自定义\\n  // 仅包含符合以下条件的房产：\\n  // 1. 业主未居住在该房产（非自住）\\n  // 2. 持有时间超过5年\\n  // 3. 最近3年无交易记录\\n  \\n  const isAbsentee = property.owner_occupied === false;\\n  \\n  // 如果存在购买日期，则计算持有年限\\n  let yearsOwned = 0;\\n  if (property.last_sale_date) {\\n    const purchaseDate = new Date(property.last_sale_date);\\n    const currentDate = new Date();\\n    yearsOwned = currentDate.getFullYear() - purchaseDate.getFullYear();\\n  }\\n  \\n  // 检查最近3年是否无交易\\n  let noRecentSales = true;\\n  if (property.last_sale_date) {\\n    const lastSale = new Date(property.last_sale_date);\\n    const threeYearsAgo = new Date();\\n    threeYearsAgo.setFullYear(threeYearsAgo.getFullYear() - 3);\\n    noRecentSales = lastSale < threeYearsAgo;\\n  }\\n  \\n  return isAbsentee && yearsOwned >= 5 && noRecentSales;\\n});\\n\\n// 为每处房产添加相关评分\\nconst scoredProperties = filteredProperties.map(property => {\\n  // 创建0-100的简单评分系统\\n  // 用于优先处理最佳潜在客户\\n  let score = 50; // 基础分\\n  \\n  // 房产净值越高，分数越高\\n  if (property.equity_percentage) {\\n    score += Math.min(property.equity_percentage / 2, 25);\\n  }\\n  \\n  // 持有时间越长，分数越高\\n  if (property.last_sale_date) {\\n    const purchaseDate = new Date(property.last_sale_date);\\n    const currentDate = new Date();\\n    const yearsOwned = currentDate.getFullYear() - purchaseDate.getFullYear();\\n    score += Math.min(yearsOwned, 15);\\n  }\\n  \\n  // 存在税务拖欠则加分\\n  if (property.tax_delinquent) {\\n    score += 10;\\n  }\\n  \\n  return { ...property, lead_score: Math.round(score) };\\n});\\n\\n// 按分数降序排序\\nscoredProperties.sort((a, b) => b.lead_score - a.lead_score);\\n\\n// 返回筛选并评分后的房产数据\\nreturn scoredProperties.map(property => {\\n  return {\\n    json: property\\n  };\\n});\"}, \"typeVersion\": 2}, {\"id\": \"2c183cc1-06a1-4528-82c3-df2585df58eb\", \"name\": \"获取业主联系信息\", \"type\": \"n8n-nodes-base.httpRequest\", \"position\": [760, 260], \"parameters\": {\"url\": \"https://api.batchdata.com/api/v1/property/skip-trace\", \"method\": \"邮政\", \"options\": {}, \"authentication\": \"通用凭证类型\", \"genericAuthType\": \"HTTP头部认证\"}, \"typeVersion\": 4.1}, {\"id\": \"2fe0aef9-30d2-4c30-9029-571f3b4c8ca9\", \"name\": \"格式引导数据\", \"type\": \"n8n-nodes-base.code\", \"position\": [960, 260], \"parameters\": {\"jsCode\": \"// 处理并格式化包含业主联系信息的房产数据\\nreturn $input.all().map(item => {\\n  const property = item.json;\\n  const skipTraceData = property.skip_trace_data || {};\\n  const ownerInfo = property.owner_info || {};\\n  \\n  return {\\n    json: {\\n      // 房产信息\\n      property_id: property.property_id,\\n      address: property.address,\\n      city: property.city,\\n      state: property.state,\\n      zip: property.zip,\\n      property_type: property.property_type,\\n      beds: property.beds,\\n      baths: property.baths,\\n      sqft: property.building_sqft,\\n      lot_size: property.lot_size,\\n      year_built: property.year_built,\\n      last_sale_date: property.last_sale_date,\\n      last_sale_price: property.last_sale_price,\\n      estimated_value: property.estimated_value,\\n      estimated_equity: property.estimated_equity,\\n      equity_percentage: property.equity_percentage,\\n      lead_score: property.lead_score,\\n      \\n      // 业主信息\\n      owner_name: ownerInfo.full_name || `${ownerInfo.first_name || ''} ${ownerInfo.last_name || ''}`.trim(),\\n      owner_mailing_address: ownerInfo.mailing_address,\\n      owner_mailing_city: ownerInfo.mailing_city,\\n      owner_mailing_state: ownerInfo.mailing_state,\\n      owner_mailing_zip: ownerInfo.mailing_zip,\\n      \\n      // 追踪获取的联系信息\\n      email: skipTraceData.email,\\n      phone: skipTraceData.phone_number,\\n      mobile: skipTraceData.mobile_number,\\n      alternate_phone: skipTraceData.alternate_phone,\\n      \\n      // 其他详情\\n      absentee_owner: property.owner_occupied === false ? '是' : '否',\\n      tax_delinquent: property.tax_delinquent ? '是' : '否',\\n      years_owned: property.years_owned,\\n      lead_source: 'BatchData房产搜索',\\n      date_added: new Date().toISOString().split('T')[0]\\n    }\\n  };\\n});\"}, \"typeVersion\": 2}, {\"id\": \"013469c2-1e83-44e0-b078-c0b3d052a2c5\", \"name\": \"创建Excel电子表格\", \"type\": \"n8n-nodes-base.spreadsheetFile\", \"position\": [1280, 160], \"parameters\": {\"options\": {\"fileName\": \"Property_Leads_{{ $now.format('YYYY-MM-DD') }}.xlsx\", \"headerRow\": true}, \"operation\": \"保存为文件\", \"fileFormat\": \"xlsx\"}, \"typeVersion\": 2}, {\"id\": \"954c492a-7da2-4902-99ab-318d4ea6e333\", \"name\": \"推送至CRM\", \"type\": \"n8n-nodes-base.hubspot\", \"position\": [1280, 540], \"parameters\": {\"options\": {}, \"additionalFields\": {}}, \"typeVersion\": 2}, {\"id\": \"61bfd72b-8971-4298-8d2a-09baea403956\", \"name\": \"邮件通知\", \"type\": \"n8n-nodes-base.emailSend\", \"position\": [1520, 300], \"webhookId\": \"e9459278-1cd9-47bb-bffd-88380d297217\", \"parameters\": {\"options\": {}, \"subject\": \"物业主管报告 - {{ $now.format('YYYY-MM-DD') }}\", \"toEmail\": \"您的邮箱@您的域名.com\", \"fromEmail\": \"无回复@您的域名.com\"}, \"typeVersion\": 2.1}, {\"id\": \"a79a0618-ac63-4aaf-8337-b9ccc5940eef\", \"name\": \"总结结果\", \"type\": \"n8n-nodes-base.code\", \"position\": [1280, 360], \"parameters\": {\"jsCode\": \"// 汇总房产线索搜索结果\\nconst leads = $input.all();\\nconst totalLeads = leads.length;\\n\\n// 计算最高线索评分\\nlet highestScore = 0;\\nif (totalLeads > 0) {\\n  highestScore = Math.max(...leads.map(item => item.json.lead_score || 0));\\n}\\n\\n// 返回汇总对象\\nreturn {\\n  json: {\\n    total_leads: totalLeads,\\n    highest_score: highestScore,\\n    execution_date: new Date().toISOString(),\\n    success: true\\n  }\\n};\"}, \"typeVersion\": 2}, {\"id\": \"cf6bbc2b-4892-4612-aee9-7f255f627a67\", \"name\": \"便利贴 - 工作流程概览\", \"type\": \"n8n-nodes-base.stickyNote\", \"position\": [-420, -520], \"parameters\": {\"width\": 800, \"height\": 280, \"content\": \"# 房产潜在客户自动化工作流\\n\\n该工作流程可根据预设条件自动搜索潜在房产线索，通过逆向追踪获取业主联系方式，并将线索推送至您的CRM系统。支持手动运行或设置为每日自动执行。\\n\\n## 执行步骤：房产搜索 → 结果筛选 → 逆向追踪 → 数据格式化 → 导出（Excel表格及CRM系统）\"}, \"typeVersion\": 1}, {\"id\": \"ff155460-3f4e-44e8-aac7-4b84dff2dceb\", \"name\": \"便利贴 - 触发因素\", \"type\": \"n8n-nodes-base.stickyNote\", \"position\": [-420, -160], \"parameters\": {\"color\": 2, \"width\": 320, \"height\": 620, \"content\": \"## 工作流触发方式\\n\\n本工作流可通过两种方式触发：\\n\\n1. **定时触发** - 每天在指定时间自动运行\\n\\n2. **手动触发** - 通过点击\\\"执行\\\"按钮随时启动作业\"}, \"typeVersion\": 1}, {\"id\": \"8c127497-0dc4-428d-a946-14c10b9572cb\", \"name\": \"便利贴 - 房产搜索\", \"type\": \"n8n-nodes-base.stickyNote\", \"position\": [-80, -180], \"parameters\": {\"color\": 4, \"width\": 320, \"height\": 650, \"content\": \"## 搜索配置\\n\\n设置您的房产搜索条件，包括：\\n\\n- 位置（城市、州、邮编）\\n- 房产类型\\n- 价值范围\\n- 产权比例\\n- 业主状态\\n- 及其他选项\\n\\n通过编辑Set节点中的'search_parameters'来自定义您的搜索条件。\"}, \"typeVersion\": 1}, {\"id\": \"20ad7c5e-5d73-4b43-b5b0-6c9eaae18400\", \"name\": \"便利贴 - 数据处理\", \"type\": \"n8n-nodes-base.stickyNote\", \"position\": [260, -180], \"parameters\": {\"color\": 5, \"width\": 880, \"height\": 660, \"content\": \"## 房产数据处理\\n\\n1. **房产搜索接口** - 对接BatchData平台进行房源检索\\n\\n2. **房源结果筛选** - 应用附加筛选逻辑并基于以下要素计算潜在客户价值：\\n   - 资产净值比例\\n   - 持有年限\\n   - 业主自住状态\\n   - 税务拖欠情况\\n   - 近期交易动态\\n\\n3. **获取业主联系信息** - 通过线索追踪获取每处房产的业主联系方式\\n\\n4. **格式化潜在客户数据** - 将数据整理为适合客户关系管理系统及报表分析的格式\"}, \"typeVersion\": 1}, {\"id\": \"a0254233-a0af-43b2-8258-0820d8fdd49d\", \"name\": \"便利贴 - 输出\", \"type\": \"n8n-nodes-base.stickyNote\", \"position\": [1180, -180], \"parameters\": {\"color\": 6, \"width\": 560, \"height\": 920, \"content\": \"## 潜在客户输出选项\\n\\n1. **生成Excel表格** - 创建包含所有潜在房产客户及详细信息的Excel文件\\n\\n2. **推送至CRM系统** - 将潜在客户添加至您的CRM系统（本例为HubSpot，可更改为Salesforce、Zoho等）\\n\\n3. **邮件通知** - 发送附带Excel文件的摘要邮件\\n\\n4. **汇总结果** - 提供执行结果的摘要报告\"}, \"typeVersion\": 1}], \"active\": false, \"pinData\": {}, \"settings\": {\"executionOrder\": \"v1\"}, \"versionId\": \"ff401fba-f56d-4d22-b259-d23a4e141a98\", \"connections\": {\"Daily Schedule\": {\"main\": [[{\"node\": \"Configure Search Parameters\", \"type\": \"main\", \"index\": 0}]]}, \"Format Lead Data\": {\"main\": [[{\"node\": \"Create Excel Spreadsheet\", \"type\": \"main\", \"index\": 0}, {\"node\": \"Push to CRM\", \"type\": \"main\", \"index\": 0}, {\"node\": \"Summarize Results\", \"type\": \"main\", \"index\": 0}]]}, \"Summarize Results\": {\"main\": [[{\"node\": \"Email Notification\", \"type\": \"main\", \"index\": 0}]]}, \"Search Properties API\": {\"main\": [[{\"node\": \"Filter Property Results\", \"type\": \"main\", \"index\": 0}]]}, \"Get Owner Contact Info\": {\"main\": [[{\"node\": \"Format Lead Data\", \"type\": \"main\", \"index\": 0}]]}, \"Filter Property Results\": {\"main\": [[{\"node\": \"Get Owner Contact Info\", \"type\": \"main\", \"index\": 0}]]}, \"Create Excel Spreadsheet\": {\"main\": [[{\"node\": \"Email Notification\", \"type\": \"main\", \"index\": 0}]]}, \"Configure Search Parameters\": {\"main\": [[{\"node\": \"Search Properties API\", \"type\": \"main\", \"index\": 0}]]}, \"When clicking \\\"Execute Workflow\\\"\": {\"main\": [[{\"node\": \"Configure Search Parameters\", \"type\": \"main\", \"index\": 0}]]}}}"
}