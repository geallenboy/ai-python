{
  "title": "Build an AI Powered Phone Agent 📞🤖 with Retell, Google Calendar and RAG",
  "url": "https://n8n.io/workflows/3563-build-an-ai-powered-phone-agent-with-retell-google-calendar-and-rag/",
  "category": "AI",
  "category_url": "https://n8n.io/workflows/categories/ai/",
  "author": "Davide",
  "publish_date": "Last update 11 days ago",
  "content": "",
  "workflow_json": "{\"id\":\"29P4X9mTSmplnjlJ\",\"meta\":{\"instanceId\":\"a4bfc93e975ca233ac45ed7c9227d84cf5a2329310525917adaf3312e10d5462\",\"templateCredsSetupCompleted\":true},\"name\":\"AI Phone Agent with RetellAI\",\"tags\":[],\"nodes\":[{\"id\":\"55ef0229-0c33-4821-926d-9aabf4f6c812\",\"name\":\"Filter\",\"type\":\"n8n-nodes-base.filter\",\"position\":[-100,120],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"or\",\"conditions\":[{\"id\":\"cce162e9-50f7-41dc-ae45-763a53a835af\",\"operator\":{\"name\":\"filter.operator.equals\",\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"={{ $json.body.event }}\",\"rightValue\":\"call_ended\"},{\"id\":\"b0cec556-f565-4ade-90c9-1cfd74ed238b\",\"operator\":{\"name\":\"filter.operator.equals\",\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"={{ $json.body.event }}\",\"rightValue\":\"call_analyzed\"}]}},\"typeVersion\":2.2},{\"id\":\"1873c991-0ac0-40c4-b027-e48a9f2582c6\",\"name\":\"OpenAI Chat Model\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\"position\":[320,320],\"parameters\":{\"model\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"gpt-4o-mini\"},\"options\":{}},\"credentials\":{\"openAiApi\":{\"id\":\"4zwP0MSr8zkNvvV9\",\"name\":\"OpenAi account\"}},\"typeVersion\":1.2},{\"id\":\"d05a7ec8-2b27-474b-b618-f85da8cf0780\",\"name\":\"Structured Output Parser\",\"type\":\"@n8n/n8n-nodes-langchain.outputParserStructured\",\"position\":[640,300],\"parameters\":{\"schemaType\":\"manual\",\"inputSchema\":\"{\\n\\t\\\"type\\\": \\\"object\\\",\\n\\t\\\"properties\\\": {\\n\\t\\t\\\"first_name\\\": {\\n\\t\\t\\t\\\"type\\\": \\\"string\\\",\\n            \\\"description\\\":\\\"\\\"\\n\\t\\t},\\n\\t\\t\\\"last_name\\\": {\\n\\t\\t\\t\\\"type\\\": \\\"string\\\",\\n            \\\"description\\\":\\\"\\\"\\n\\t\\t},\\n        \\\"email\\\": {\\n\\t\\t\\t\\\"type\\\": \\\"string\\\",\\n            \\\"description\\\":\\\"\\\"\\n\\t\\t},\\n        \\\"telephone\\\": {\\n\\t\\t\\t\\\"type\\\": \\\"string\\\",\\n            \\\"description\\\":\\\"\\\"\\n\\t\\t},\\n        \\\"summary\\\": {\\n\\t\\t\\t\\\"type\\\": \\\"string\\\",\\n            \\\"description\\\":\\\"\\\"\\n\\t\\t},\\n        \\\"date\\\": {\\n\\t\\t\\t\\\"type\\\": \\\"date\\\",\\n            \\\"description\\\":\\\"\\\"\\n\\t\\t},\\n        \\\"date\\\": {\\n\\t\\t\\t\\\"type\\\": \\\"date\\\",\\n            \\\"description\\\":\\\"\\\"\\n\\t\\t},\\n        \\\"dateTime\\\": {\\n\\t\\t\\t\\\"type\\\": \\\"date\\\",\\n            \\\"description\\\":\\\"\\\"\\n        }\\n\\t}\\n}\"},\"typeVersion\":1.2},{\"id\":\"aef9edfc-ff3b-42b6-9839-562a5376135d\",\"name\":\"n8n_rag_function\",\"type\":\"n8n-nodes-base.webhook\",\"position\":[-360,720],\"webhookId\":\"edb1e894-1210-4902-a34f-a014bbdad8d8\",\"parameters\":{\"path\":\"edb1e894-1210-4902-a34f-a014bbdad8d8\",\"options\":{},\"httpMethod\":\"POST\",\"responseMode\":\"responseNode\"},\"typeVersion\":2},{\"id\":\"247567b1-b45c-433f-86f8-43cfe210a532\",\"name\":\"Retrive Qdrant Vector Store\",\"type\":\"@n8n/n8n-nodes-langchain.vectorStoreQdrant\",\"position\":[20,1140],\"parameters\":{\"options\":{},\"qdrantCollection\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"scarperia\",\"cachedResultName\":\"scarperia\"}},\"credentials\":{\"qdrantApi\":{\"id\":\"iyQ6MQiVaF3VMBmt\",\"name\":\"QdrantApi account\"}},\"typeVersion\":1},{\"id\":\"c8153076-8ae2-4b34-893d-ef75233c2a74\",\"name\":\"Embeddings OpenAI2\",\"type\":\"@n8n/n8n-nodes-langchain.embeddingsOpenAi\",\"position\":[-20,1320],\"parameters\":{\"options\":{}},\"credentials\":{\"openAiApi\":{\"id\":\"4zwP0MSr8zkNvvV9\",\"name\":\"OpenAi account\"}},\"typeVersion\":1.2},{\"id\":\"0acec55e-cb6a-4220-a491-aa29eccc692a\",\"name\":\"RAG\",\"type\":\"@n8n/n8n-nodes-langchain.toolVectorStore\",\"position\":[180,940],\"parameters\":{\"name\":\"company_data\",\"description\":\"Retrive data about company knowledge from vector store\"},\"typeVersion\":1},{\"id\":\"b7a86b9f-1620-4fc7-973f-e6e169e4ecbe\",\"name\":\"OpenAI Chat Model2\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\"position\":[-20,940],\"parameters\":{\"model\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"gpt-4o-mini\"},\"options\":{}},\"credentials\":{\"openAiApi\":{\"id\":\"4zwP0MSr8zkNvvV9\",\"name\":\"OpenAi account\"}},\"typeVersion\":1.2},{\"id\":\"64354f1c-388d-47b7-be4e-a67a6feeb0ed\",\"name\":\"Respond to Webhook\",\"type\":\"n8n-nodes-base.respondToWebhook\",\"position\":[620,720],\"parameters\":{\"options\":{}},\"typeVersion\":1.1},{\"id\":\"baa32a03-3295-434a-afca-8f7cadece512\",\"name\":\"OpenAI Chat Model1\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\"position\":[340,1160],\"parameters\":{\"model\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"gpt-4o-mini\"},\"options\":{}},\"credentials\":{\"openAiApi\":{\"id\":\"4zwP0MSr8zkNvvV9\",\"name\":\"OpenAi account\"}},\"typeVersion\":1.2},{\"id\":\"1d5c9eb2-b468-4dd2-aa77-d33924fdbb41\",\"name\":\"Telegram\",\"type\":\"n8n-nodes-base.telegram\",\"position\":[820,120],\"webhookId\":\"44d73068-54dc-458b-a6fb-4b4d10ebed34\",\"parameters\":{\"text\":\"=Call summary:\\n{{ $json.output.summary }}\\n\\nFirst name: {{ $json.output.first_name }}\\nLast name: {{ $json.output.last_name }}\\nEmail: {{ $json.output.email }}\\nTelephone: {{ $json.output.telephone }}\\nSummary: {{ $json.output.summary }}\\nDate: {{ $json.output.date }}\\nDateTiem: {{ $json.output.dateTime }}\",\"chatId\":\"CHAT_ID\",\"additionalFields\":{}},\"credentials\":{\"telegramApi\":{\"id\":\"rQ5q95W7uKesMDx4\",\"name\":\"Telegram account Fastewb\"}},\"typeVersion\":1.2},{\"id\":\"5ca696a0-b1d2-45f5-93d6-066654a0c2f6\",\"name\":\"Google Calendar\",\"type\":\"n8n-nodes-base.googleCalendar\",\"position\":[1860,100],\"parameters\":{\"end\":\"={{ $json.output.end }}\",\"start\":\"={{ $json.output.start }}\",\"calendar\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"info@n3w.it\",\"cachedResultName\":\"info@n3w.it\"},\"additionalFields\":{\"summary\":\"Event title\",\"description\":\"Event description\"}},\"credentials\":{\"googleCalendarOAuth2Api\":{\"id\":\"8RFK3u13g2PJEGa9\",\"name\":\"Google Calendar account\"}},\"typeVersion\":1.3},{\"id\":\"57fedd6a-94a4-4f58-8179-9fd8ae1d0006\",\"name\":\"OpenAI Chat Model3\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\"position\":[1340,320],\"parameters\":{\"model\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"gpt-4o-mini\"},\"options\":{}},\"credentials\":{\"openAiApi\":{\"id\":\"4zwP0MSr8zkNvvV9\",\"name\":\"OpenAi account\"}},\"typeVersion\":1.2},{\"id\":\"f3f8a781-eb03-4e99-8512-b926249aabba\",\"name\":\"Structured Output Parser1\",\"type\":\"@n8n/n8n-nodes-langchain.outputParserStructured\",\"position\":[1640,320],\"parameters\":{\"schemaType\":\"manual\",\"inputSchema\":\"{\\n\\t\\\"type\\\": \\\"object\\\",\\n\\t\\\"properties\\\": {\\n\\t\\t\\\"start\\\": {\\n\\t\\t\\t\\\"type\\\": \\\"string\\\"\\n\\t\\t},\\n\\t\\t\\\"end\\\": {\\n\\t\\t\\t\\\"type\\\": \\\"string\\\"\\n\\t\\t}\\n\\t}\\n}\"},\"typeVersion\":1.2},{\"id\":\"f3c416a2-6b42-43cc-aa66-e7d146c1b325\",\"name\":\"n8n_call\",\"type\":\"n8n-nodes-base.webhook\",\"position\":[-340,120],\"webhookId\":\"b352dd49-d3b3-4e0a-a781-17137f7199c8\",\"parameters\":{\"path\":\"b352dd49-d3b3-4e0a-a781-17137f7199c8\",\"options\":{},\"httpMethod\":\"POST\"},\"typeVersion\":2},{\"id\":\"2862b10c-77d7-4555-b9ec-86c9c4b9fe7b\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1080,-1140],\"parameters\":{\"width\":1140,\"height\":920,\"content\":\"# STEP 3 - RETELL AI\\n\\n- Register on [Retell AI](https://retellai.com) (10$ FREE credits)\\n- Create an Agent an set \\\"Voice & Language\\\" and add your system prompt\\n- In Webhook settings add the \\\"Agent Level Webhook URL\\\" with the n8n webhook node url called \\\"n8n_call\\\"\\n- Buy a new phone number with your FREE credits by Twilio Provider and connect it to the created agent\\n- Enter the previously created agency and create the flow as shown in the following image\\n![image](https://i.postimg.cc/brtBkgfH/Retellai-flow.png)\\n- Aggiungere 2 funzioni (una per RAG e una per il Booking) e inserire l'url apposito ricavato dai webhook di n8n \\\"n8n_rag_function\\\" e \\\"n8n_check_available\\\"\\n\\n\"},\"typeVersion\":1},{\"id\":\"98de797e-56d8-42b4-85a5-245ae7d086db\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-340,-100],\"parameters\":{\"color\":5,\"width\":1220,\"content\":\"# STEP 4\\nIntercept the \\\"end call\\\" event and get the full call transcript\\n- Add your CHAT_ID in Telegram node\"},\"typeVersion\":1},{\"id\":\"ccf11ce4-3bc4-46bd-a71e-12e59d7a2504\",\"name\":\"n8n_check_available\",\"type\":\"n8n-nodes-base.webhook\",\"position\":[1120,100],\"webhookId\":\"4dcd68b1-91d3-40bc-8aa6-c681126752b2\",\"parameters\":{\"path\":\"4dcd68b1-91d3-40bc-8aa6-c681126752b2\",\"options\":{},\"httpMethod\":\"POST\",\"responseMode\":\"lastNode\"},\"typeVersion\":2},{\"id\":\"ddc50779-c0cf-4862-87b9-e187d1ab19a5\",\"name\":\"When clicking ‘Test workflow’\",\"type\":\"n8n-nodes-base.manualTrigger\",\"position\":[-400,-940],\"parameters\":{},\"typeVersion\":1},{\"id\":\"fd6f36d4-c8b3-4643-8df9-a775d94946d9\",\"name\":\"Qdrant Vector Store\",\"type\":\"@n8n/n8n-nodes-langchain.vectorStoreQdrant\",\"position\":[580,-820],\"parameters\":{\"mode\":\"insert\",\"options\":{},\"qdrantCollection\":{\"__rl\":true,\"mode\":\"id\",\"value\":\"=\"}},\"credentials\":{\"qdrantApi\":{\"id\":\"iyQ6MQiVaF3VMBmt\",\"name\":\"QdrantApi account\"}},\"typeVersion\":1},{\"id\":\"3c4f9805-57e7-4662-ab12-8bedc5e5a815\",\"name\":\"Create collection\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[-100,-1080],\"parameters\":{\"url\":\"https://QDRANTURL/collections/COLLECTION\",\"method\":\"POST\",\"options\":{},\"jsonBody\":\"{\\n  \\\"filter\\\": {}\\n}\",\"sendBody\":true,\"sendHeaders\":true,\"specifyBody\":\"json\",\"authentication\":\"genericCredentialType\",\"genericAuthType\":\"httpHeaderAuth\",\"headerParameters\":{\"parameters\":[{\"name\":\"Content-Type\",\"value\":\"application/json\"}]}},\"credentials\":{\"httpHeaderAuth\":{\"id\":\"qhny6r5ql9wwotpn\",\"name\":\"Qdrant API (Hetzner)\"}},\"typeVersion\":4.2},{\"id\":\"b5fdbd4d-0cc9-4b5c-8aa8-b7fe6fd0f3b4\",\"name\":\"Refresh collection\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[-100,-820],\"parameters\":{\"url\":\"https://QDRANTURL/collections/COLLECTION/points/delete\",\"method\":\"POST\",\"options\":{},\"jsonBody\":\"{\\n  \\\"filter\\\": {}\\n}\",\"sendBody\":true,\"sendHeaders\":true,\"specifyBody\":\"json\",\"authentication\":\"genericCredentialType\",\"genericAuthType\":\"httpHeaderAuth\",\"headerParameters\":{\"parameters\":[{\"name\":\"Content-Type\",\"value\":\"application/json\"}]}},\"credentials\":{\"httpHeaderAuth\":{\"id\":\"qhny6r5ql9wwotpn\",\"name\":\"Qdrant API (Hetzner)\"}},\"typeVersion\":4.2},{\"id\":\"c2f5ded2-adcb-4c50-95e6-94e54a7c2116\",\"name\":\"Get folder\",\"type\":\"n8n-nodes-base.googleDrive\",\"position\":[120,-820],\"parameters\":{\"filter\":{\"driveId\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"My Drive\",\"cachedResultUrl\":\"https://drive.google.com/drive/my-drive\",\"cachedResultName\":\"My Drive\"},\"folderId\":{\"__rl\":true,\"mode\":\"id\",\"value\":\"=test-whatsapp\"}},\"options\":{},\"resource\":\"fileFolder\"},\"credentials\":{\"googleDriveOAuth2Api\":{\"id\":\"HEy5EuZkgPZVEa9w\",\"name\":\"Google Drive account (n3w.it)\"}},\"typeVersion\":3},{\"id\":\"640ede03-46fc-44a3-a9e8-29118036d64f\",\"name\":\"Download Files\",\"type\":\"n8n-nodes-base.googleDrive\",\"position\":[340,-820],\"parameters\":{\"fileId\":{\"__rl\":true,\"mode\":\"id\",\"value\":\"={{ $json.id }}\"},\"options\":{\"googleFileConversion\":{\"conversion\":{\"docsToFormat\":\"text/plain\"}}},\"operation\":\"download\"},\"credentials\":{\"googleDriveOAuth2Api\":{\"id\":\"HEy5EuZkgPZVEa9w\",\"name\":\"Google Drive account (n3w.it)\"}},\"typeVersion\":3},{\"id\":\"ff40b36c-3092-43fc-a001-9683b0e33460\",\"name\":\"Embeddings OpenAI\",\"type\":\"@n8n/n8n-nodes-langchain.embeddingsOpenAi\",\"position\":[560,-620],\"parameters\":{\"options\":{}},\"credentials\":{\"openAiApi\":{\"id\":\"4zwP0MSr8zkNvvV9\",\"name\":\"OpenAi account\"}},\"typeVersion\":1.1},{\"id\":\"cfc6a14a-1445-4d38-8fbb-3dc3c7bfff8b\",\"name\":\"Default Data Loader\",\"type\":\"@n8n/n8n-nodes-langchain.documentDefaultDataLoader\",\"position\":[740,-620],\"parameters\":{\"options\":{},\"dataType\":\"binary\"},\"typeVersion\":1},{\"id\":\"38a49484-82f0-4520-ba03-47edef117cd8\",\"name\":\"Token Splitter\",\"type\":\"@n8n/n8n-nodes-langchain.textSplitterTokenSplitter\",\"position\":[700,-460],\"parameters\":{\"chunkSize\":300,\"chunkOverlap\":30},\"typeVersion\":1},{\"id\":\"62726443-9c09-4ee7-becb-789982bc2e9b\",\"name\":\"Sticky Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[100,-1140],\"parameters\":{\"color\":6,\"width\":880,\"height\":220,\"content\":\"# STEP 1\\n\\n## Create Qdrant Collection\\nChange:\\n- QDRANTURL\\n- COLLECTION\"},\"typeVersion\":1},{\"id\":\"5f52d12f-6bbe-468c-b23f-356e0675b15a\",\"name\":\"Sticky Note4\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-120,-880],\"parameters\":{\"color\":4,\"width\":620,\"height\":400,\"content\":\"# STEP 2\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n## Documents vectorization with Qdrant and Google Drive\\nChange:\\n- QDRANTURL\\n- COLLECTION\"},\"typeVersion\":1},{\"id\":\"08525507-990d-43f3-b2d3-6d73bc2aed84\",\"name\":\"Set call fields\",\"type\":\"n8n-nodes-base.set\",\"position\":[140,120],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"15b079b9-e36d-4c9b-8ca4-30bf858ce75b\",\"name\":\"Transcript\",\"type\":\"string\",\"value\":\"={{ $json.body.call.transcript }}\"},{\"id\":\"f1cbced3-bd9c-4d8f-bd81-060406ff27b0\",\"name\":\"Duration (sec)\",\"type\":\"string\",\"value\":\"={{ $('n8n_call').item.json.body.call.call_cost.total_duration_seconds }}\"},{\"id\":\"829ee367-1f5e-4d66-9818-8a27344d7e79\",\"name\":\"From\",\"type\":\"string\",\"value\":\"={{ $('n8n_call').item.json.body.call.from_number }}\"},{\"id\":\"38e9e856-d87d-4c23-8486-4ebbac2da595\",\"name\":\"To\",\"type\":\"string\",\"value\":\"={{ $('n8n_call').item.json.body.call.to_number }}\"},{\"id\":\"4209d6d3-4881-4296-a1db-fff0c14addda\",\"name\":\"Cost \",\"type\":\"string\",\"value\":\"={{ $('n8n_call').item.json.body.call.call_cost.combined_cost }}\"},{\"id\":\"3c871d3b-95b5-493a-b3fe-3c9bf06a0d62\",\"name\":\"Telephony Identifier\",\"type\":\"string\",\"value\":\"={{ $('n8n_call').item.json.body.call.telephony_identifier.twilio_call_sid }}\"},{\"id\":\"0a926748-8aff-4dd7-a252-516f3339210a\",\"name\":\"Disconnection reason\",\"type\":\"string\",\"value\":\"={{ $json.body.call.disconnection_reason }}\"},{\"id\":\"9c88eafc-4370-47ad-ad98-d14767c137d0\",\"name\":\"Recording url\",\"type\":\"string\",\"value\":\"={{ $json.body.call.recording_url }}\"},{\"id\":\"a737a3bd-c871-4273-85b8-8e423bf7c443\",\"name\":\"Public log url\",\"type\":\"string\",\"value\":\"={{ $json.body.call.public_log_url }}\"}]}},\"typeVersion\":3.4},{\"id\":\"db21e42c-ff87-45ad-a228-77ce4c9c6b0c\",\"name\":\"Extract key points\",\"type\":\"@n8n/n8n-nodes-langchain.chainLlm\",\"position\":[400,120],\"parameters\":{\"text\":\"=To: {{ $json.To }}\\n\\nComplete transcript:\\n{{ $json.Transcript }} \",\"messages\":{\"messageValues\":[{\"message\":\"=You are a specialized AI assistant responsible for analyzing complete voice conversation transcripts. Your task is to create concise summaries that extract the essential information from these conversations.\\n\\nInput: You will receive the complete transcript of a voice conversation between two or more participants.\\n\\nTask:\\n1. Analyze the entire conversation transcript carefully.\\n2. Identify and extract the most important key points discussed.\\n3. Create a clear, structured summary that captures the essential information.\\n4. Highlight any decisions made, action items agreed upon, or critical information shared.\\n5. Maintain objectivity in your summary, avoiding interpretation or judgment.\\n\\nOutput format:\\n- Begin with a brief overview of the conversation (1-2 sentences)\\n- List the key points in bullet format\\n- Include a separate \\\"Action Items\\\" section if any tasks or follow-ups were mentioned\\n- Keep your summary concise while ensuring all important information is captured\\n\\nRemember that accuracy is paramount. Focus on extracting what was explicitly stated rather than inferring unstated meanings. If something is unclear in the transcript, note it as such rather than guessing.\"}]},\"promptType\":\"define\",\"hasOutputParser\":true},\"typeVersion\":1.6},{\"id\":\"0c6c8765-d28f-4398-aa0e-8f65879cc740\",\"name\":\"Concert start date\",\"type\":\"@n8n/n8n-nodes-langchain.chainLlm\",\"position\":[1420,100],\"parameters\":{\"text\":\"=Convert this date to a compatible format for Google Calendar APIs for the start date, and for the end date add 1 hour to the start date.\\n\\nHere is the start date:\\n{{ $json.body.args.date }}\",\"promptType\":\"define\",\"hasOutputParser\":true},\"typeVersion\":1.6},{\"id\":\"0b33c34a-f61c-4aab-8315-600da2da3281\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1100,-100],\"parameters\":{\"color\":5,\"width\":1100,\"content\":\"# STEP 5\\nIf required, create the event in the calendar\\n- Enter the title and description of the event\"},\"typeVersion\":1},{\"id\":\"138555e5-b62b-4f59-b223-c73611e5dece\",\"name\":\"Sticky Note5\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-360,520],\"parameters\":{\"color\":5,\"width\":1220,\"content\":\"# STEP 6\\nIf required retrive the informations by RAG system\"},\"typeVersion\":1},{\"id\":\"65d998a1-b31b-4463-be9b-0b27448f9026\",\"name\":\"Retrive Agent\",\"type\":\"@n8n/n8n-nodes-langchain.agent\",\"position\":[60,720],\"parameters\":{\"text\":\"={{ $json.body.args.query }}\",\"agent\":\"conversationalAgent\",\"options\":{\"systemMessage\":\"You are an AI-powered assistant for an electronics store. Answer in Italian. Your primary goal is to assist customers by providing accurate and helpful information about products, troubleshooting tips, and general support. Use the provided knowledge base (retrieved documents) to answer questions with precision and professionalism.\\n\\n**Guidelines**:\\n1. **Product Information**:\\n   - Provide detailed descriptions of products, including specifications, features, and compatibility.\\n   - Highlight key selling points and differences between similar products.\\n   - Mention availability, pricing, and promotions if applicable.\\n\\n2. **Technical Support**:\\n   - Offer step-by-step troubleshooting guides for common issues.\\n   - Suggest solutions for setup, installation, or configuration problems.\\n   - If the issue is complex, recommend contacting the store’s support team for further assistance.\\n\\n3. **Customer Service**:\\n   - Respond politely and professionally to all inquiries.\\n   - If a question is unclear, ask for clarification to provide the best possible answer.\\n   - For order-related questions (e.g., status, returns, or cancellations), guide customers on how to proceed using the store’s systems.\\n\\n4. **Knowledge Base Usage**:\\n   - Always reference the provided knowledge base (retrieved documents) to ensure accuracy.\\n   - If the knowledge base does not contain relevant information, inform the customer and suggest alternative resources or actions.\\n\\n5. **Tone and Style**:\\n   - Use a friendly, approachable, and professional tone.\\n   - Avoid technical jargon unless the customer demonstrates familiarity with the topic.\\n   - Keep responses concise but informative.\\n\\n**Example Interactions**:\\n1. **Product Inquiry**:\\n   - Customer: \\\"What’s the difference between the XYZ Smartwatch and the ABC Smartwatch?\\\"\\n   - AI: \\\"The XYZ Smartwatch features a longer battery life (up to 7 days) and built-in GPS, while the ABC Smartwatch has a brighter AMOLED display and supports wireless charging. Both are compatible with iOS and Android devices. Would you like more details on either product?\\\"\\n\\n2. **Technical Support**:\\n   - Customer: \\\"My wireless router isn’t connecting to the internet.\\\"\\n   - AI: \\\"Please try the following steps: 1) Restart your router and modem. 2) Ensure all cables are securely connected. 3) Check if the router’s LED indicators show a stable connection. If the issue persists, you may need to reset the router to factory settings. Would you like a detailed guide for resetting your router?\\\"\\n\\n3. **Customer Service**:\\n   - Customer: \\\"How do I return a defective product?\\\"\\n   - AI: \\\"To return a defective product, please visit our Returns Portal on our website and enter your order number. You’ll receive a return label and instructions. If you need further assistance, our support team is available at support@electronicsstore.com.\\\"\\n\\n**Limitations**:\\n- If the question is outside the scope of the knowledge base or requires human intervention, inform the customer and provide contact details for the appropriate department.\\n- Do not provide speculative or unverified information. Always rely on the knowledge base or direct the customer to official resources.\"},\"promptType\":\"define\"},\"typeVersion\":1.7},{\"id\":\"a98a4ed7-4ebc-4d40-8aaa-70de751bc15f\",\"name\":\"Sticky Note6\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-380,-1600],\"parameters\":{\"color\":3,\"width\":2580,\"height\":360,\"content\":\"# Create your first AI Phone Agent\\n\\nBuild, test, deploy, and monitor AI phone agents. Retell is a comprehensive platform for building, testing, deploying, and monitoring reliable AI phone agents.\\nConversation flow agent allows you to create multiple nodes to handle different scenarios in the conversation. It provides more fine-grained control over the conversation flow compared to single / multi prompt agent, which unlocks the ability to handle more complex scenarios.\\n\\nThis Workflow simulates an AI-powered phone agent with two main functions:\\n\\n📅 Appointment Booking – It can schedule appointments directly into Google Calendar.\\n\\n🧠 RAG-based Information Retrieval – It provides answers using a Retrieval-Augmented Generation (RAG) system. For example, it can respond to questions such as store opening hours, return policies, or product details.\\n\\nThe guide also explains how to purchase a dedicated phone number (with a +1 prefix) and link it to the AI agent. This setup is cost-effective, as it uses a free $10 credit to operate without additional charges in the beginning.\"},\"typeVersion\":1}],\"active\":true,\"pinData\":{},\"settings\":{\"timezone\":\"Europe/Rome\",\"callerPolicy\":\"workflowsFromSameOwner\",\"executionOrder\":\"v1\"},\"versionId\":\"d78ac941-900b-49f5-a9a8-158effbd2479\",\"connections\":{\"RAG\":{\"ai_tool\":[[{\"node\":\"Retrive Agent\",\"type\":\"ai_tool\",\"index\":0}]]},\"Filter\":{\"main\":[[{\"node\":\"Set call fields\",\"type\":\"main\",\"index\":0}]]},\"n8n_call\":{\"main\":[[{\"node\":\"Filter\",\"type\":\"main\",\"index\":0}]]},\"Get folder\":{\"main\":[[{\"node\":\"Download Files\",\"type\":\"main\",\"index\":0}]]},\"Retrive Agent\":{\"main\":[[{\"node\":\"Respond to Webhook\",\"type\":\"main\",\"index\":0}]]},\"Download Files\":{\"main\":[[{\"node\":\"Qdrant Vector Store\",\"type\":\"main\",\"index\":0}]]},\"Token Splitter\":{\"ai_textSplitter\":[[{\"node\":\"Default Data Loader\",\"type\":\"ai_textSplitter\",\"index\":0}]]},\"Google Calendar\":{\"main\":[[]]},\"Set call fields\":{\"main\":[[{\"node\":\"Extract key points\",\"type\":\"main\",\"index\":0}]]},\"n8n_rag_function\":{\"main\":[[{\"node\":\"Retrive Agent\",\"type\":\"main\",\"index\":0}]]},\"Embeddings OpenAI\":{\"ai_embedding\":[[{\"node\":\"Qdrant Vector Store\",\"type\":\"ai_embedding\",\"index\":0}]]},\"OpenAI Chat Model\":{\"ai_languageModel\":[[{\"node\":\"Extract key points\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"Concert start date\":{\"main\":[[{\"node\":\"Google Calendar\",\"type\":\"main\",\"index\":0}]]},\"Embeddings OpenAI2\":{\"ai_embedding\":[[{\"node\":\"Retrive Qdrant Vector Store\",\"type\":\"ai_embedding\",\"index\":0}]]},\"Extract key points\":{\"main\":[[{\"node\":\"Telegram\",\"type\":\"main\",\"index\":0}]]},\"OpenAI Chat Model1\":{\"ai_languageModel\":[[{\"node\":\"RAG\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"OpenAI Chat Model2\":{\"ai_languageModel\":[[{\"node\":\"Retrive Agent\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"OpenAI Chat Model3\":{\"ai_languageModel\":[[{\"node\":\"Concert start date\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"Refresh collection\":{\"main\":[[{\"node\":\"Get folder\",\"type\":\"main\",\"index\":0}]]},\"Default Data Loader\":{\"ai_document\":[[{\"node\":\"Qdrant Vector Store\",\"type\":\"ai_document\",\"index\":0}]]},\"n8n_check_available\":{\"main\":[[{\"node\":\"Concert start date\",\"type\":\"main\",\"index\":0}]]},\"Structured Output Parser\":{\"ai_outputParser\":[[{\"node\":\"Extract key points\",\"type\":\"ai_outputParser\",\"index\":0}]]},\"Structured Output Parser1\":{\"ai_outputParser\":[[{\"node\":\"Concert start date\",\"type\":\"ai_outputParser\",\"index\":0}]]},\"Retrive Qdrant Vector Store\":{\"ai_vectorStore\":[[{\"node\":\"RAG\",\"type\":\"ai_vectorStore\",\"index\":0}]]},\"When clicking ‘Test workflow’\":{\"main\":[[{\"node\":\"Create collection\",\"type\":\"main\",\"index\":0},{\"node\":\"Refresh collection\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "This Workflow simulates an AI-powered phone agent with two main functions:\n\n  1. **📅 Appointment Booking** – It can schedule appointments directly into Google Calendar.\n  2. **🧠 RAG-based Information Retrieval** – It provides answers using a Retrieval-Augmented Generation (RAG) system. For example, it can respond to questions such as store opening hours, return policies, or product details.\n\n\n\nThe guide also explains **how to purchase a dedicated phone number** (with a +1 prefix) and link it to the AI agent. This setup is cost-effective, as it uses a **FREE $10 credit** to operate without additional charges in the beginning.\n\n![](https://i.postimg.cc/brtBkgfH/Retellai-flow.png)\n\n* * *\n\n### **✨ Advantages**\n\n  * **🕐 24/7 Availability** – The AI agent can answer calls and assist customers at any time.\n  * **🤖 Automation** – It reduces the workload on human staff by handling repetitive tasks like appointment scheduling and FAQ responses.\n  * **🔌 Easy Integration** – Built with n8n, it’s flexible and customizable for various platforms and tools.\n  * **💸 Low-cost Setup** – Using the free credit, businesses can get started without an upfront investment.\n\n\n\n* * *\n\n### **📦 Use Cases**\n\n  * **🛍 E-commerce** – Answer common product questions or order inquiries.\n  * **🏬 Retail Stores** – Provide store hours, address info, and return policies.\n  * **🍽 Restaurants** – Take reservations or share menu information.\n  * **💼 Service Providers** – Book appointments or consultations.\n  * **📞 Any Local Business** – Offer phone support without needing a live operator.\n\n\n\n* * *\n\n### **How It Works**\n\nThis Workflow simulates an AI-powered phone agent with two primary functions:\n\n  1. **Appointment Booking**\n\n     * The workflow captures call events (e.g., `call_ended` or `call_analyzed`) and extracts key details (transcript, caller info, duration, etc.).\n     * Using OpenAI, it summarizes the conversation and parses structured data (e.g., names, contact info, dates).\n     * For scheduling, it converts user-provided dates into Google Calendar-compatible formats and creates events automatically.\n  2. **RAG-Based Information Retrieval**\n\n     * When a query is received (e.g., store hours, product details), the workflow retrieves relevant information from a Qdrant vector store.\n     * An AI agent processes the query using the retrieved data and responds via a webhook, ensuring accurate, context-aware answers.\n\n\n\n* * *\n\n### **Set Up Steps**\n\n  1. **Prepare Qdrant Vector Store**\n\n     * Create/refresh a Qdrant collection (via HTTP requests).\n     * Upload and vectorize documents (e.g., from Google Drive) using OpenAI embeddings.\n  2. **Configure RetellAI Agent**\n\n     * Sign up for RetellAI, create an agent, and set the webhook URLs (`n8n_call` for call events, `n8n_rag_function` for RAG queries).\n     * Purchase a Twilio phone number and link it to the agent.\n  3. **n8n Workflow Setup**\n\n     * Connect OpenAI, Qdrant, Google Calendar, and Telegram nodes with credentials.\n     * Customize prompts for summarization, date parsing, and RAG responses.\n     * Test the workflow to ensure data flows from call events → processing → actions (e.g., calendar bookings, Telegram alerts).\n  4. **Deploy**\n\n     * Trigger the workflow via RetellAI webhooks during calls.\n     * Monitor outputs (e.g., call summaries in Telegram, calendar events).\n\n\n\n**Note** : Replace placeholders (e.g., `QDRANTURL`, `COLLECTION`, `CHAT_ID`) with actual values.\n\n* * *\n\n### **Need help customizing?**\n\n[Contact me](mailto:info@n3w.it) for consulting and support or add me on [Linkedin](https://www.linkedin.com/in/davideboizza/).\n",
  "readme_html": "<!--[--><div data-v-006f9244=\"\"><p>This Workflow simulates an AI-powered phone agent with two main functions:</p>\n<ol>\n<li><strong>📅 Appointment Booking</strong> – It can schedule appointments directly into Google Calendar.</li>\n<li><strong>🧠 RAG-based Information Retrieval</strong> – It provides answers using a Retrieval-Augmented Generation (RAG) system. For example, it can respond to questions such as store opening hours, return policies, or product details.</li>\n</ol>\n<p>The guide also explains <strong>how to purchase a dedicated phone number</strong> (with a +1 prefix) and link it to the AI agent. This setup is cost-effective, as it uses a <strong>FREE $10 credit</strong> to operate without additional charges in the beginning.</p>\n<p><img src=\"https://i.postimg.cc/brtBkgfH/Retellai-flow.png\" alt=\"\"></p>\n<hr>\n<h3><strong>✨ Advantages</strong></h3>\n<ul>\n<li><strong>🕐 24/7 Availability</strong> – The AI agent can answer calls and assist customers at any time.</li>\n<li><strong>🤖 Automation</strong> – It reduces the workload on human staff by handling repetitive tasks like appointment scheduling and FAQ responses.</li>\n<li><strong>🔌 Easy Integration</strong> – Built with n8n, it’s flexible and customizable for various platforms and tools.</li>\n<li><strong>💸 Low-cost Setup</strong> – Using the free credit, businesses can get started without an upfront investment.</li>\n</ul>\n<hr>\n<h3><strong>📦 Use Cases</strong></h3>\n<ul>\n<li><strong>🛍 E-commerce</strong> – Answer common product questions or order inquiries.</li>\n<li><strong>🏬 Retail Stores</strong> – Provide store hours, address info, and return policies.</li>\n<li><strong>🍽 Restaurants</strong> – Take reservations or share menu information.</li>\n<li><strong>💼 Service Providers</strong> – Book appointments or consultations.</li>\n<li><strong>📞 Any Local Business</strong> – Offer phone support without needing a live operator.</li>\n</ul>\n<hr>\n<h3><strong>How It Works</strong></h3>\n<p>This Workflow simulates an AI-powered phone agent with two primary functions:</p>\n<ol>\n<li>\n<p><strong>Appointment Booking</strong></p>\n<ul>\n<li>The workflow captures call events (e.g., <code>call_ended</code> or <code>call_analyzed</code>) and extracts key details (transcript, caller info, duration, etc.).</li>\n<li>Using OpenAI, it summarizes the conversation and parses structured data (e.g., names, contact info, dates).</li>\n<li>For scheduling, it converts user-provided dates into Google Calendar-compatible formats and creates events automatically.</li>\n</ul>\n</li>\n<li>\n<p><strong>RAG-Based Information Retrieval</strong></p>\n<ul>\n<li>When a query is received (e.g., store hours, product details), the workflow retrieves relevant information from a Qdrant vector store.</li>\n<li>An AI agent processes the query using the retrieved data and responds via a webhook, ensuring accurate, context-aware answers.</li>\n</ul>\n</li>\n</ol>\n<hr>\n<h3><strong>Set Up Steps</strong></h3>\n<ol>\n<li>\n<p><strong>Prepare Qdrant Vector Store</strong></p>\n<ul>\n<li>Create/refresh a Qdrant collection (via HTTP requests).</li>\n<li>Upload and vectorize documents (e.g., from Google Drive) using OpenAI embeddings.</li>\n</ul>\n</li>\n<li>\n<p><strong>Configure RetellAI Agent</strong></p>\n<ul>\n<li>Sign up for RetellAI, create an agent, and set the webhook URLs (<code>n8n_call</code> for call events, <code>n8n_rag_function</code> for RAG queries).</li>\n<li>Purchase a Twilio phone number and link it to the agent.</li>\n</ul>\n</li>\n<li>\n<p><strong>n8n Workflow Setup</strong></p>\n<ul>\n<li>Connect OpenAI, Qdrant, Google Calendar, and Telegram nodes with credentials.</li>\n<li>Customize prompts for summarization, date parsing, and RAG responses.</li>\n<li>Test the workflow to ensure data flows from call events → processing → actions (e.g., calendar bookings, Telegram alerts).</li>\n</ul>\n</li>\n<li>\n<p><strong>Deploy</strong></p>\n<ul>\n<li>Trigger the workflow via RetellAI webhooks during calls.</li>\n<li>Monitor outputs (e.g., call summaries in Telegram, calendar events).</li>\n</ul>\n</li>\n</ol>\n<p><strong>Note</strong>: Replace placeholders (e.g., <code>QDRANTURL</code>, <code>COLLECTION</code>, <code>CHAT_ID</code>) with actual values.</p>\n<hr>\n<h3><strong>Need help customizing?</strong></h3>\n<p><a href=\"mailto:info@n3w.it\" rel=\"ugc nofollow\">Contact me</a> for consulting and support or add me on <a href=\"https://www.linkedin.com/in/davideboizza/\" rel=\"ugc nofollow\" target=\"_blank\">Linkedin</a>.</p>\n</div><!--]-->",
  "readme_zh": "该工作流模拟了一个具备两大核心功能的AI电话助手：\n\n1. **📅 智能预约** – 可直接将预约事项同步至Google日历\n2. **🧠 知识库检索** – 基于检索增强生成（RAG）系统提供精准应答，例如解答营业时间、退换货政策或商品详情等咨询\n\n指南还包含**专属电话号码（+1前缀）购买及绑定教程**。初期运营可充分利用**10美元免费额度**，实现零成本启动。\n\n![](https://i.postimg.cc/brtBkgfH/Retellai-flow.png)\n\n* * *\n\n### **✨ 核心优势**\n\n* **🕐 全天候服务** – AI助手24小时接听来电\n* **🤖 自动化处理** – 代接预约登记/常见问答等重复性工作\n* **🔌 无缝集成** – 基于n8n构建，支持多平台灵活定制\n* **💸 低成本启动** – 免费额度助力零门槛部署\n\n* * *\n\n### **📦 应用场景**\n\n* **🛍 电商客服** – 商品咨询/订单查询\n* **🏬 实体门店** – 营业时间/地址导航/退换政策\n* **🍽 餐饮预订** – 桌位预约/菜单查询\n* **💼 服务行业** – 咨询预约\n* **📞 本地商户** – 无需人工坐席的智能应答\n\n* * *\n\n### **运作原理**\n\n本工作流通过以下机制实现AI电话助手：\n\n1. **预约管理**\n   - 实时捕获通话事件（如结束通话/分析完成）\n   - 通过OpenAI提取关键信息（客户姓名/联系方式/预约时间）\n   - 自动转换时间格式并创建Google日历事项\n\n2. **智能检索**\n   - 当收到营业时间等查询时，从Qdrant向量库检索关联信息\n   - 经AI处理生成语境化应答，通过webhook实时反馈\n\n* * *\n\n### **部署步骤**\n\n1. **准备Qdrant数据库**\n   - 通过HTTP请求创建/更新集合\n   - 使用OpenAI嵌入向量化Google Drive文档\n\n2. **配置RetellAI代理**\n   - 注册RetellAI并设置webhook（n8n_call处理通话事件，n8n_rag_function响应检索）\n   - 购买Twilio号码并绑定代理\n\n3. **n8n工作流配置**\n   - 接入OpenAI/Qdrant/Google日历/Telegram等节点\n   - 定制摘要生成/时间解析/知识库应答等提示词\n   - 测试全流程数据流转（通话→处理→执行）\n\n4. **正式运行**\n   - 通过RetellAI webhook触发工作流\n   - 监控Telegram通知/日历事件等输出结果\n\n**注**：需替换QDRANTURL等占位参数\n\n* * *\n\n### **需要定制服务？**\n\n欢迎[邮件咨询](mailto:info@n3w.it)或通过[Linkedin](https://www.linkedin.com/in/davideboizza/)联系",
  "title_zh": "构建一个由AI驱动的电话代理📞🤖，集成Retell、Google日历和RAG技术",
  "publish_date_zh": "上次更新于11天前",
  "workflow_json_zh": "{\"id\": \"29P4X9mTSmplnjlJ\", \"meta\": {\"instanceId\": \"a4bfc93e975ca233ac45ed7c9227d84cf5a2329310525917adaf3312e10d5462\", \"templateCredsSetupCompleted\": true}, \"name\": \"RetellAI 智能电话代理\", \"tags\": [], \"nodes\": [{\"id\": \"55ef0229-0c33-4821-926d-9aabf4f6c812\", \"name\": \"过滤器\", \"type\": \"n8n-nodes-base.filter\", \"position\": [-100, 120], \"parameters\": {\"options\": {}, \"conditions\": {\"options\": {\"version\": 2, \"leftValue\": \"\", \"caseSensitive\": true, \"typeValidation\": \"strict\"}, \"combinator\": \"or\", \"conditions\": [{\"id\": \"cce162e9-50f7-41dc-ae45-763a53a835af\", \"operator\": {\"name\": \"filter.operator.equals\", \"type\": \"string\", \"operation\": \"equals\"}, \"leftValue\": \"={{ $json.body.event }}\", \"rightValue\": \"call_ended\"}, {\"id\": \"b0cec556-f565-4ade-90c9-1cfd74ed238b\", \"operator\": {\"name\": \"filter.operator.equals\", \"type\": \"string\", \"operation\": \"equals\"}, \"leftValue\": \"={{ $json.body.event }}\", \"rightValue\": \"call_analyzed\"}]}}, \"typeVersion\": 2.2}, {\"id\": \"1873c991-0ac0-40c4-b027-e48a9f2582c6\", \"name\": \"OpenAI 聊天模型\", \"type\": \"@n8n/n8n-nodes-langchain.lmChatOpenAi\", \"position\": [320, 320], \"parameters\": {\"model\": {\"__rl\": true, \"mode\": \"list\", \"value\": \"gpt-4o-mini\"}, \"options\": {}}, \"credentials\": {\"openAiApi\": {\"id\": \"4zwP0MSr8zkNvvV9\", \"name\": \"OpenAi account\"}}, \"typeVersion\": 1.2}, {\"id\": \"d05a7ec8-2b27-474b-b618-f85da8cf0780\", \"name\": \"结构化输出解析器\", \"type\": \"@n8n/n8n-nodes-langchain.outputParserStructured\", \"position\": [640, 300], \"parameters\": {\"schemaType\": \"手动\", \"inputSchema\": \"{\\n\\t\\\"类型\\\": \\\"对象\\\",\\n\\t\\\"属性\\\": {\\n\\t\\t\\\"姓氏\\\": {\\n\\t\\t\\t\\\"类型\\\": \\\"字符串\\\",\\n            \\\"描述\\\":\\\"\\\"\\n\\t\\t},\\n\\t\\t\\\"名字\\\": {\\n\\t\\t\\t\\\"类型\\\": \\\"字符串\\\",\\n            \\\"描述\\\":\\\"\\\"\\n\\t\\t},\\n        \\\"电子邮箱\\\": {\\n\\t\\t\\t\\\"类型\\\": \\\"字符串\\\",\\n            \\\"描述\\\":\\\"\\\"\\n\\t\\t},\\n        \\\"电话\\\": {\\n\\t\\t\\t\\\"类型\\\": \\\"字符串\\\",\\n            \\\"描述\\\":\\\"\\\"\\n\\t\\t},\\n        \\\"摘要\\\": {\\n\\t\\t\\t\\\"类型\\\": \\\"字符串\\\",\\n            \\\"描述\\\":\\\"\\\"\\n\\t\\t},\\n        \\\"日期\\\": {\\n\\t\\t\\t\\\"类型\\\": \\\"日期\\\",\\n            \\\"描述\\\":\\\"\\\"\\n\\t\\t},\\n        \\\"日期\\\": {\\n\\t\\t\\t\\\"类型\\\": \\\"日期\\\",\\n            \\\"描述\\\":\\\"\\\"\\n\\t\\t},\\n        \\\"日期时间\\\": {\\n\\t\\t\\t\\\"类型\\\": \\\"日期\\\",\\n            \\\"描述\\\":\\\"\\\"\\n        }\\n\\t}\\n}\"}, \"typeVersion\": 1.2}, {\"id\": \"aef9edfc-ff3b-42b6-9839-562a5376135d\", \"name\": \"n8n_rag函数\", \"type\": \"n8n-nodes-base.webhook\", \"position\": [-360, 720], \"webhookId\": \"edb1e894-1210-4902-a34f-a014bbdad8d8\", \"parameters\": {\"path\": \"edb1e894-1210-4902-a34f-a014bbdad8d8\", \"options\": {}, \"httpMethod\": \"邮政\", \"responseMode\": \"响应节点\"}, \"typeVersion\": 2}, {\"id\": \"247567b1-b45c-433f-86f8-43cfe210a532\", \"name\": \"检索Qdrant向量存储\", \"type\": \"@n8n/n8n-nodes-langchain.vectorStoreQdrant\", \"position\": [20, 1140], \"parameters\": {\"options\": {}, \"qdrantCollection\": {\"__rl\": true, \"mode\": \"list\", \"value\": \"scarperia\", \"cachedResultName\": \"scarperia\"}}, \"credentials\": {\"qdrantApi\": {\"id\": \"iyQ6MQiVaF3VMBmt\", \"name\": \"QdrantApi account\"}}, \"typeVersion\": 1}, {\"id\": \"c8153076-8ae2-4b34-893d-ef75233c2a74\", \"name\": \"嵌入技术 OpenAI2\", \"type\": \"@n8n/n8n-nodes-langchain.embeddingsOpenAi\", \"position\": [-20, 1320], \"parameters\": {\"options\": {}}, \"credentials\": {\"openAiApi\": {\"id\": \"4zwP0MSr8zkNvvV9\", \"name\": \"OpenAi account\"}}, \"typeVersion\": 1.2}, {\"id\": \"0acec55e-cb6a-4220-a491-aa29eccc692a\", \"name\": \"检索增强生成\", \"type\": \"@n8n/n8n-nodes-langchain.toolVectorStore\", \"position\": [180, 940], \"parameters\": {\"name\": \"公司数据\", \"description\": \"从向量存储中检索公司知识相关的数据\"}, \"typeVersion\": 1}, {\"id\": \"b7a86b9f-1620-4fc7-973f-e6e169e4ecbe\", \"name\": \"OpenAI 聊天模型2\", \"type\": \"@n8n/n8n-nodes-langchain.lmChatOpenAi\", \"position\": [-20, 940], \"parameters\": {\"model\": {\"__rl\": true, \"mode\": \"list\", \"value\": \"gpt-4o-mini\"}, \"options\": {}}, \"credentials\": {\"openAiApi\": {\"id\": \"4zwP0MSr8zkNvvV9\", \"name\": \"OpenAi account\"}}, \"typeVersion\": 1.2}, {\"id\": \"64354f1c-388d-47b7-be4e-a67a6feeb0ed\", \"name\": \"响应Webhook\", \"type\": \"n8n-nodes-base.respondToWebhook\", \"position\": [620, 720], \"parameters\": {\"options\": {}}, \"typeVersion\": 1.1}, {\"id\": \"baa32a03-3295-434a-afca-8f7cadece512\", \"name\": \"OpenAI 聊天模型1\", \"type\": \"@n8n/n8n-nodes-langchain.lmChatOpenAi\", \"position\": [340, 1160], \"parameters\": {\"model\": {\"__rl\": true, \"mode\": \"list\", \"value\": \"gpt-4o-mini\"}, \"options\": {}}, \"credentials\": {\"openAiApi\": {\"id\": \"4zwP0MSr8zkNvvV9\", \"name\": \"OpenAi account\"}}, \"typeVersion\": 1.2}, {\"id\": \"1d5c9eb2-b468-4dd2-aa77-d33924fdbb41\", \"name\": \"电报\", \"type\": \"n8n-nodes-base.telegram\", \"position\": [820, 120], \"webhookId\": \"44d73068-54dc-458b-a6fb-4b4d10ebed34\", \"parameters\": {\"text\": \"=通话摘要：\\n{{ $json.output.summary }}\\n\\n名：{{ $json.output.first_name }}\\n姓：{{ $json.output.last_name }}\\n电子邮箱：{{ $json.output.email }}\\n电话：{{ $json.output.telephone }}\\n摘要：{{ $json.output.summary }}\\n日期：{{ $json.output.date }}\\n日期时间：{{ $json.output.dateTime }}\", \"chatId\": \"聊天ID\", \"additionalFields\": {}}, \"credentials\": {\"telegramApi\": {\"id\": \"rQ5q95W7uKesMDx4\", \"name\": \"Telegram account Fastewb\"}}, \"typeVersion\": 1.2}, {\"id\": \"5ca696a0-b1d2-45f5-93d6-066654a0c2f6\", \"name\": \"谷歌日历\", \"type\": \"n8n-nodes-base.googleCalendar\", \"position\": [1860, 100], \"parameters\": {\"end\": \"={{ $json.output.end }}\", \"start\": \"={{ $json.output.start }}\", \"calendar\": {\"__rl\": true, \"mode\": \"list\", \"value\": \"info@n3w.it\", \"cachedResultName\": \"info@n3w.it\"}, \"additionalFields\": {\"summary\": \"Event title\", \"description\": \"Event description\"}}, \"credentials\": {\"googleCalendarOAuth2Api\": {\"id\": \"8RFK3u13g2PJEGa9\", \"name\": \"Google Calendar account\"}}, \"typeVersion\": 1.3}, {\"id\": \"57fedd6a-94a4-4f58-8179-9fd8ae1d0006\", \"name\": \"OpenAI 聊天模型3\", \"type\": \"@n8n/n8n-nodes-langchain.lmChatOpenAi\", \"position\": [1340, 320], \"parameters\": {\"model\": {\"__rl\": true, \"mode\": \"list\", \"value\": \"gpt-4o-mini\"}, \"options\": {}}, \"credentials\": {\"openAiApi\": {\"id\": \"4zwP0MSr8zkNvvV9\", \"name\": \"OpenAi account\"}}, \"typeVersion\": 1.2}, {\"id\": \"f3f8a781-eb03-4e99-8512-b926249aabba\", \"name\": \"结构化输出解析器1\", \"type\": \"@n8n/n8n-nodes-langchain.outputParserStructured\", \"position\": [1640, 320], \"parameters\": {\"schemaType\": \"手动\", \"inputSchema\": \"{\\n\\t\\\"类型\\\": \\\"对象\\\",\\n\\t\\\"属性\\\": {\\n\\t\\t\\\"开始\\\": {\\n\\t\\t\\t\\\"类型\\\": \\\"字符串\\\"\\n\\t\\t},\\n\\t\\t\\\"结束\\\": {\\n\\t\\t\\t\\\"类型\\\": \\\"字符串\\\"\\n\\t\\t}\\n\\t}\\n}\"}, \"typeVersion\": 1.2}, {\"id\": \"f3c416a2-6b42-43cc-aa66-e7d146c1b325\", \"name\": \"n8n调用\", \"type\": \"n8n-nodes-base.webhook\", \"position\": [-340, 120], \"webhookId\": \"b352dd49-d3b3-4e0a-a781-17137f7199c8\", \"parameters\": {\"path\": \"（注：原文\\\"b352dd49-d3b3-4e0a-a781-17137f7199c8\\\"为UUID编码格式的随机字符串，无实际语义内容。根据翻译规范，此类技术性标识符通常保持原样不译，故直接返回原文）\", \"options\": {}, \"httpMethod\": \"邮政\"}, \"typeVersion\": 2}, {\"id\": \"2862b10c-77d7-4555-b9ec-86c9c4b9fe7b\", \"name\": \"便利贴\", \"type\": \"n8n-nodes-base.stickyNote\", \"position\": [1080, -1140], \"parameters\": {\"width\": 1140, \"height\": 920, \"content\": \"# STEP 3 - RETELL AI\\n\\n- Register on [Retell AI](https://retellai.com) (10$ FREE credits)\\n- Create an Agent an set \\\"Voice & Language\\\" and add your system prompt\\n- In Webhook settings add the \\\"Agent Level Webhook URL\\\" with the n8n webhook node url called \\\"n8n_call\\\"\\n- Buy a new phone number with your FREE credits by Twilio Provider and connect it to the created agent\\n- Enter the previously created agency and create the flow as shown in the following image\\n![image](https://i.postimg.cc/brtBkgfH/Retellai-flow.png)\\n- Aggiungere 2 funzioni (una per RAG e una per il Booking) e inserire l'url apposito ricavato dai webhook di n8n \\\"n8n_rag_function\\\" e \\\"n8n_check_available\\\"\\n\\n\"}, \"typeVersion\": 1}, {\"id\": \"98de797e-56d8-42b4-85a5-245ae7d086db\", \"name\": \"便利贴1\", \"type\": \"n8n-nodes-base.stickyNote\", \"position\": [-340, -100], \"parameters\": {\"color\": 5, \"width\": 1220, \"content\": \"# 步骤4\\n拦截“结束通话”事件并获取完整通话记录\\n- 在Telegram节点中添加您的CHAT_ID\"}, \"typeVersion\": 1}, {\"id\": \"ccf11ce4-3bc4-46bd-a71e-12e59d7a2504\", \"name\": \"n8n检查可用性\", \"type\": \"n8n-nodes-base.webhook\", \"position\": [1120, 100], \"webhookId\": \"4dcd68b1-91d3-40bc-8aa6-c681126752b2\", \"parameters\": {\"path\": \"（注：原文“4dcd68b1-91d3-40bc-8aa6-c681126752b2”为一串无实际语义的UUID编码，通常用于系统标识而非翻译内容。若需保留原始格式，此处直接复制即可；若需中文形式表达，可译为“唯一标识符：4dcd68b1-91d3-40bc-8aa6-c681126752b2”。根据要求仅提供翻译，故按原样返回。）  \\n\\n4dcd68b1-91d3-40bc-8aa6-c681126752b2\", \"options\": {}, \"httpMethod\": \"邮政\", \"responseMode\": \"末节点\"}, \"typeVersion\": 2}, {\"id\": \"ddc50779-c0cf-4862-87b9-e187d1ab19a5\", \"name\": \"点击“测试工作流程”时\", \"type\": \"n8n-nodes-base.manualTrigger\", \"position\": [-400, -940], \"parameters\": {}, \"typeVersion\": 1}, {\"id\": \"fd6f36d4-c8b3-4643-8df9-a775d94946d9\", \"name\": \"Qdrant 向量存储\", \"type\": \"@n8n/n8n-nodes-langchain.vectorStoreQdrant\", \"position\": [580, -820], \"parameters\": {\"mode\": \"插入\", \"options\": {}, \"qdrantCollection\": {\"__rl\": true, \"mode\": \"id\", \"value\": \"=\"}}, \"credentials\": {\"qdrantApi\": {\"id\": \"iyQ6MQiVaF3VMBmt\", \"name\": \"QdrantApi account\"}}, \"typeVersion\": 1}, {\"id\": \"3c4f9805-57e7-4662-ab12-8bedc5e5a815\", \"name\": \"创建收藏\", \"type\": \"n8n-nodes-base.httpRequest\", \"position\": [-100, -1080], \"parameters\": {\"url\": \"https://QDRANTURL/collections/COLLECTION\", \"method\": \"邮政\", \"options\": {}, \"jsonBody\": \"{\\n  \\\"过滤器\\\": {}\\n}\", \"sendBody\": true, \"sendHeaders\": true, \"specifyBody\": \"JSON\", \"authentication\": \"通用凭证类型\", \"genericAuthType\": \"HTTP头部认证\", \"headerParameters\": {\"parameters\": [{\"name\": \"Content-Type\", \"value\": \"application/json\"}]}}, \"credentials\": {\"httpHeaderAuth\": {\"id\": \"qhny6r5ql9wwotpn\", \"name\": \"Qdrant API (Hetzner)\"}}, \"typeVersion\": 4.2}, {\"id\": \"b5fdbd4d-0cc9-4b5c-8aa8-b7fe6fd0f3b4\", \"name\": \"刷新收藏\", \"type\": \"n8n-nodes-base.httpRequest\", \"position\": [-100, -820], \"parameters\": {\"url\": \"https://QDRANTURL/collections/COLLECTION/points/delete\", \"method\": \"邮政\", \"options\": {}, \"jsonBody\": \"{\\n  \\\"过滤器\\\": {}\\n}\", \"sendBody\": true, \"sendHeaders\": true, \"specifyBody\": \"JSON（JavaScript Object Notation）是一种轻量级的数据交换格式，易于人阅读和编写，同时也易于机器解析和生成。它基于JavaScript的一个子集，采用完全独立于语言的文本格式来存储和表示数据。JSON常用于Web应用程序中服务器与客户端之间的数据传输，因其简洁和高效的特性而被广泛采用。\", \"authentication\": \"通用凭证类型\", \"genericAuthType\": \"HTTP头部认证\", \"headerParameters\": {\"parameters\": [{\"name\": \"Content-Type\", \"value\": \"application/json\"}]}}, \"credentials\": {\"httpHeaderAuth\": {\"id\": \"qhny6r5ql9wwotpn\", \"name\": \"Qdrant API (Hetzner)\"}}, \"typeVersion\": 4.2}, {\"id\": \"c2f5ded2-adcb-4c50-95e6-94e54a7c2116\", \"name\": \"获取文件夹\", \"type\": \"n8n-nodes-base.googleDrive\", \"position\": [120, -820], \"parameters\": {\"filter\": {\"driveId\": {\"__rl\": true, \"mode\": \"list\", \"value\": \"My Drive\", \"cachedResultUrl\": \"https://drive.google.com/drive/my-drive\", \"cachedResultName\": \"My Drive\"}, \"folderId\": {\"__rl\": true, \"mode\": \"id\", \"value\": \"=test-whatsapp\"}}, \"options\": {}, \"resource\": \"文件文件夹\"}, \"credentials\": {\"googleDriveOAuth2Api\": {\"id\": \"HEy5EuZkgPZVEa9w\", \"name\": \"Google Drive account (n3w.it)\"}}, \"typeVersion\": 3}, {\"id\": \"640ede03-46fc-44a3-a9e8-29118036d64f\", \"name\": \"下载文件\", \"type\": \"n8n-nodes-base.googleDrive\", \"position\": [340, -820], \"parameters\": {\"fileId\": {\"__rl\": true, \"mode\": \"id\", \"value\": \"={{ $json.id }}\"}, \"options\": {\"googleFileConversion\": {\"conversion\": {\"docsToFormat\": \"text/plain\"}}}, \"operation\": \"下载\"}, \"credentials\": {\"googleDriveOAuth2Api\": {\"id\": \"HEy5EuZkgPZVEa9w\", \"name\": \"Google Drive account (n3w.it)\"}}, \"typeVersion\": 3}, {\"id\": \"ff40b36c-3092-43fc-a001-9683b0e33460\", \"name\": \"嵌入技术 OpenAI\", \"type\": \"@n8n/n8n-nodes-langchain.embeddingsOpenAi\", \"position\": [560, -620], \"parameters\": {\"options\": {}}, \"credentials\": {\"openAiApi\": {\"id\": \"4zwP0MSr8zkNvvV9\", \"name\": \"OpenAi account\"}}, \"typeVersion\": 1.1}, {\"id\": \"cfc6a14a-1445-4d38-8fbb-3dc3c7bfff8b\", \"name\": \"默认数据加载器\", \"type\": \"@n8n/n8n-nodes-langchain.documentDefaultDataLoader\", \"position\": [740, -620], \"parameters\": {\"options\": {}, \"dataType\": \"二进制\"}, \"typeVersion\": 1}, {\"id\": \"38a49484-82f0-4520-ba03-47edef117cd8\", \"name\": \"令牌分割器\", \"type\": \"@n8n/n8n-nodes-langchain.textSplitterTokenSplitter\", \"position\": [700, -460], \"parameters\": {\"chunkSize\": 300, \"chunkOverlap\": 30}, \"typeVersion\": 1}, {\"id\": \"62726443-9c09-4ee7-becb-789982bc2e9b\", \"name\": \"便利贴3\", \"type\": \"n8n-nodes-base.stickyNote\", \"position\": [100, -1140], \"parameters\": {\"color\": 6, \"width\": 880, \"height\": 220, \"content\": \"# 第一步\\n\\n## 创建Qdrant集合\\n需要修改：\\n- QDRANTURL（Qdrant服务地址）\\n- COLLECTION（集合名称）\"}, \"typeVersion\": 1}, {\"id\": \"5f52d12f-6bbe-468c-b23f-356e0675b15a\", \"name\": \"便利贴4\", \"type\": \"n8n-nodes-base.stickyNote\", \"position\": [-120, -880], \"parameters\": {\"color\": 4, \"width\": 620, \"height\": 400, \"content\": \"# 第二步\"}, \"typeVersion\": 1}, {\"id\": \"08525507-990d-43f3-b2d3-6d73bc2aed84\", \"name\": \"设置通话字段\", \"type\": \"n8n-nodes-base.set\", \"position\": [140, 120], \"parameters\": {\"options\": {}, \"assignments\": {\"assignments\": [{\"id\": \"15b079b9-e36d-4c9b-8ca4-30bf858ce75b\", \"name\": \"Transcript\", \"type\": \"string\", \"value\": \"={{ $json.body.call.transcript }}\"}, {\"id\": \"f1cbced3-bd9c-4d8f-bd81-060406ff27b0\", \"name\": \"Duration (sec)\", \"type\": \"string\", \"value\": \"={{ $('n8n_call').item.json.body.call.call_cost.total_duration_seconds }}\"}, {\"id\": \"829ee367-1f5e-4d66-9818-8a27344d7e79\", \"name\": \"From\", \"type\": \"string\", \"value\": \"={{ $('n8n_call').item.json.body.call.from_number }}\"}, {\"id\": \"38e9e856-d87d-4c23-8486-4ebbac2da595\", \"name\": \"To\", \"type\": \"string\", \"value\": \"={{ $('n8n_call').item.json.body.call.to_number }}\"}, {\"id\": \"4209d6d3-4881-4296-a1db-fff0c14addda\", \"name\": \"Cost \", \"type\": \"string\", \"value\": \"={{ $('n8n_call').item.json.body.call.call_cost.combined_cost }}\"}, {\"id\": \"3c871d3b-95b5-493a-b3fe-3c9bf06a0d62\", \"name\": \"Telephony Identifier\", \"type\": \"string\", \"value\": \"={{ $('n8n_call').item.json.body.call.telephony_identifier.twilio_call_sid }}\"}, {\"id\": \"0a926748-8aff-4dd7-a252-516f3339210a\", \"name\": \"Disconnection reason\", \"type\": \"string\", \"value\": \"={{ $json.body.call.disconnection_reason }}\"}, {\"id\": \"9c88eafc-4370-47ad-ad98-d14767c137d0\", \"name\": \"Recording url\", \"type\": \"string\", \"value\": \"={{ $json.body.call.recording_url }}\"}, {\"id\": \"a737a3bd-c871-4273-85b8-8e423bf7c443\", \"name\": \"Public log url\", \"type\": \"string\", \"value\": \"={{ $json.body.call.public_log_url }}\"}]}}, \"typeVersion\": 3.4}, {\"id\": \"db21e42c-ff87-45ad-a228-77ce4c9c6b0c\", \"name\": \"提取关键点\", \"type\": \"@n8n/n8n-nodes-langchain.chainLlm\", \"position\": [400, 120], \"parameters\": {\"text\": \"=致：{{ $json.To }}\\n\\n完整记录：\\n{{ $json.Transcript }}\", \"messages\": {\"messageValues\": [{\"message\": \"=You are a specialized AI assistant responsible for analyzing complete voice conversation transcripts. Your task is to create concise summaries that extract the essential information from these conversations.\\n\\nInput: You will receive the complete transcript of a voice conversation between two or more participants.\\n\\nTask:\\n1. Analyze the entire conversation transcript carefully.\\n2. Identify and extract the most important key points discussed.\\n3. Create a clear, structured summary that captures the essential information.\\n4. Highlight any decisions made, action items agreed upon, or critical information shared.\\n5. Maintain objectivity in your summary, avoiding interpretation or judgment.\\n\\nOutput format:\\n- Begin with a brief overview of the conversation (1-2 sentences)\\n- List the key points in bullet format\\n- Include a separate \\\"Action Items\\\" section if any tasks or follow-ups were mentioned\\n- Keep your summary concise while ensuring all important information is captured\\n\\nRemember that accuracy is paramount. Focus on extracting what was explicitly stated rather than inferring unstated meanings. If something is unclear in the transcript, note it as such rather than guessing.\"}]}, \"promptType\": \"定义\", \"hasOutputParser\": true}, \"typeVersion\": 1.6}, {\"id\": \"0c6c8765-d28f-4398-aa0e-8f65879cc740\", \"name\": \"音乐会开始日期\", \"type\": \"@n8n/n8n-nodes-langchain.chainLlm\", \"position\": [1420, 100], \"parameters\": {\"text\": \"=Convert this date to a compatible format for Google Calendar APIs for the start date, and for the end date add 1 hour to the start date.\\n\\nHere is the start date:\\n{{ $json.body.args.date }}\", \"promptType\": \"定义\", \"hasOutputParser\": true}, \"typeVersion\": 1.6}, {\"id\": \"0b33c34a-f61c-4aab-8315-600da2da3281\", \"name\": \"便利贴2\", \"type\": \"n8n-nodes-base.stickyNote\", \"position\": [1100, -100], \"parameters\": {\"color\": 5, \"width\": 1100, \"content\": \"# 步骤5\\n如需在日历中创建事件\\n- 输入事件的标题和描述\"}, \"typeVersion\": 1}, {\"id\": \"138555e5-b62b-4f59-b223-c73611e5dece\", \"name\": \"便利贴5\", \"type\": \"n8n-nodes-base.stickyNote\", \"position\": [-360, 520], \"parameters\": {\"color\": 5, \"width\": 1220, \"content\": \"# 步骤6\\n如需通过RAG系统检索信息\"}, \"typeVersion\": 1}, {\"id\": \"65d998a1-b31b-4463-be9b-0b27448f9026\", \"name\": \"检索代理\", \"type\": \"@n8n/n8n-nodes-langchain.agent\", \"position\": [60, 720], \"parameters\": {\"text\": \"={{ $json.body.args.query }}\", \"agent\": \"对话代理\", \"options\": {\"systemMessage\": \"You are an AI-powered assistant for an electronics store. Answer in Italian. Your primary goal is to assist customers by providing accurate and helpful information about products, troubleshooting tips, and general support. Use the provided knowledge base (retrieved documents) to answer questions with precision and professionalism.\\n\\n**Guidelines**:\\n1. **Product Information**:\\n   - Provide detailed descriptions of products, including specifications, features, and compatibility.\\n   - Highlight key selling points and differences between similar products.\\n   - Mention availability, pricing, and promotions if applicable.\\n\\n2. **Technical Support**:\\n   - Offer step-by-step troubleshooting guides for common issues.\\n   - Suggest solutions for setup, installation, or configuration problems.\\n   - If the issue is complex, recommend contacting the store’s support team for further assistance.\\n\\n3. **Customer Service**:\\n   - Respond politely and professionally to all inquiries.\\n   - If a question is unclear, ask for clarification to provide the best possible answer.\\n   - For order-related questions (e.g., status, returns, or cancellations), guide customers on how to proceed using the store’s systems.\\n\\n4. **Knowledge Base Usage**:\\n   - Always reference the provided knowledge base (retrieved documents) to ensure accuracy.\\n   - If the knowledge base does not contain relevant information, inform the customer and suggest alternative resources or actions.\\n\\n5. **Tone and Style**:\\n   - Use a friendly, approachable, and professional tone.\\n   - Avoid technical jargon unless the customer demonstrates familiarity with the topic.\\n   - Keep responses concise but informative.\\n\\n**Example Interactions**:\\n1. **Product Inquiry**:\\n   - Customer: \\\"What’s the difference between the XYZ Smartwatch and the ABC Smartwatch?\\\"\\n   - AI: \\\"The XYZ Smartwatch features a longer battery life (up to 7 days) and built-in GPS, while the ABC Smartwatch has a brighter AMOLED display and supports wireless charging. Both are compatible with iOS and Android devices. Would you like more details on either product?\\\"\\n\\n2. **Technical Support**:\\n   - Customer: \\\"My wireless router isn’t connecting to the internet.\\\"\\n   - AI: \\\"Please try the following steps: 1) Restart your router and modem. 2) Ensure all cables are securely connected. 3) Check if the router’s LED indicators show a stable connection. If the issue persists, you may need to reset the router to factory settings. Would you like a detailed guide for resetting your router?\\\"\\n\\n3. **Customer Service**:\\n   - Customer: \\\"How do I return a defective product?\\\"\\n   - AI: \\\"To return a defective product, please visit our Returns Portal on our website and enter your order number. You’ll receive a return label and instructions. If you need further assistance, our support team is available at support@electronicsstore.com.\\\"\\n\\n**Limitations**:\\n- If the question is outside the scope of the knowledge base or requires human intervention, inform the customer and provide contact details for the appropriate department.\\n- Do not provide speculative or unverified information. Always rely on the knowledge base or direct the customer to official resources.\"}, \"promptType\": \"定义\"}, \"typeVersion\": 1.7}, {\"id\": \"a98a4ed7-4ebc-4d40-8aaa-70de751bc15f\", \"name\": \"便利贴6\", \"type\": \"n8n-nodes-base.stickyNote\", \"position\": [-380, -1600], \"parameters\": {\"color\": 3, \"width\": 2580, \"height\": 360, \"content\": \"# 创建你的首个AI电话助手\\n\\n打造、测试、部署并监控AI电话助手。Retell是一个综合性平台，用于构建、测试、部署和监控可靠的AI电话助手。\\n\\n对话流程代理允许您创建多个节点来处理对话中的不同场景。与单一/多重提示代理相比，它提供了更精细的对话流程控制，从而能够处理更复杂的场景。\\n\\n本工作流模拟了一个具备两大核心功能的AI电话助手：\\n\\n📅 预约管理——可直接将预约安排同步至Google日历\\n\\n🧠 基于RAG的信息检索——采用检索增强生成系统提供解答。例如回答店铺营业时间、退货政策或商品详情等查询。\\n\\n指南还详细说明了如何购买专属电话号码（+1前缀）并将其与AI助手绑定。该方案经济高效，初期可使用10美元免费额度运行，无需额外费用。\"}, \"typeVersion\": 1}], \"active\": true, \"pinData\": {}, \"settings\": {\"timezone\": \"Europe/Rome\", \"callerPolicy\": \"workflowsFromSameOwner\", \"executionOrder\": \"v1\"}, \"versionId\": \"d78ac941-900b-49f5-a9a8-158effbd2479\", \"connections\": {\"RAG\": {\"ai_tool\": [[{\"node\": \"Retrive Agent\", \"type\": \"ai_tool\", \"index\": 0}]]}, \"Filter\": {\"main\": [[{\"node\": \"Set call fields\", \"type\": \"main\", \"index\": 0}]]}, \"n8n_call\": {\"main\": [[{\"node\": \"Filter\", \"type\": \"main\", \"index\": 0}]]}, \"Get folder\": {\"main\": [[{\"node\": \"Download Files\", \"type\": \"main\", \"index\": 0}]]}, \"Retrive Agent\": {\"main\": [[{\"node\": \"Respond to Webhook\", \"type\": \"main\", \"index\": 0}]]}, \"Download Files\": {\"main\": [[{\"node\": \"Qdrant Vector Store\", \"type\": \"main\", \"index\": 0}]]}, \"Token Splitter\": {\"ai_textSplitter\": [[{\"node\": \"Default Data Loader\", \"type\": \"ai_textSplitter\", \"index\": 0}]]}, \"Google Calendar\": {\"main\": [[]]}, \"Set call fields\": {\"main\": [[{\"node\": \"Extract key points\", \"type\": \"main\", \"index\": 0}]]}, \"n8n_rag_function\": {\"main\": [[{\"node\": \"Retrive Agent\", \"type\": \"main\", \"index\": 0}]]}, \"Embeddings OpenAI\": {\"ai_embedding\": [[{\"node\": \"Qdrant Vector Store\", \"type\": \"ai_embedding\", \"index\": 0}]]}, \"OpenAI Chat Model\": {\"ai_languageModel\": [[{\"node\": \"Extract key points\", \"type\": \"ai_languageModel\", \"index\": 0}]]}, \"Concert start date\": {\"main\": [[{\"node\": \"Google Calendar\", \"type\": \"main\", \"index\": 0}]]}, \"Embeddings OpenAI2\": {\"ai_embedding\": [[{\"node\": \"Retrive Qdrant Vector Store\", \"type\": \"ai_embedding\", \"index\": 0}]]}, \"Extract key points\": {\"main\": [[{\"node\": \"Telegram\", \"type\": \"main\", \"index\": 0}]]}, \"OpenAI Chat Model1\": {\"ai_languageModel\": [[{\"node\": \"RAG\", \"type\": \"ai_languageModel\", \"index\": 0}]]}, \"OpenAI Chat Model2\": {\"ai_languageModel\": [[{\"node\": \"Retrive Agent\", \"type\": \"ai_languageModel\", \"index\": 0}]]}, \"OpenAI Chat Model3\": {\"ai_languageModel\": [[{\"node\": \"Concert start date\", \"type\": \"ai_languageModel\", \"index\": 0}]]}, \"Refresh collection\": {\"main\": [[{\"node\": \"Get folder\", \"type\": \"main\", \"index\": 0}]]}, \"Default Data Loader\": {\"ai_document\": [[{\"node\": \"Qdrant Vector Store\", \"type\": \"ai_document\", \"index\": 0}]]}, \"n8n_check_available\": {\"main\": [[{\"node\": \"Concert start date\", \"type\": \"main\", \"index\": 0}]]}, \"Structured Output Parser\": {\"ai_outputParser\": [[{\"node\": \"Extract key points\", \"type\": \"ai_outputParser\", \"index\": 0}]]}, \"Structured Output Parser1\": {\"ai_outputParser\": [[{\"node\": \"Concert start date\", \"type\": \"ai_outputParser\", \"index\": 0}]]}, \"Retrive Qdrant Vector Store\": {\"ai_vectorStore\": [[{\"node\": \"RAG\", \"type\": \"ai_vectorStore\", \"index\": 0}]]}, \"When clicking ‘Test workflow’\": {\"main\": [[{\"node\": \"Create collection\", \"type\": \"main\", \"index\": 0}, {\"node\": \"Refresh collection\", \"type\": \"main\", \"index\": 0}]]}}}"
}