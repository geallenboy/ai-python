{
  "title": "Taxi Service Provider (Production-Ready, Part 4)",
  "url": "https://n8n.io/workflows/4047-taxi-service-provider-production-ready-part-4/",
  "category": "AI",
  "category_url": "https://n8n.io/workflows/categories/ai/?sort=createdAt:desc",
  "author": "ChatPayLabs",
  "publish_date": "Last update 3 days ago",
  "publish_date_absolute": "2025-05-19",
  "content": "",
  "workflow_json": "{\"id\":\"i8gsrw37GcVGRJZl\",\"meta\":{\"instanceId\":\"daae7bb90c8655b08e0b68de8a52b1178f2812f6a234efb0b0509279dbb70b3e\",\"templateCredsSetupCompleted\":true},\"name\":\"ü§ñ Taxi Service Provider\",\"tags\":[{\"id\":\"no8Mb078mvRgw7PS\",\"name\":\"DEMO\",\"createdAt\":\"2025-04-30T05:34:10.330Z\",\"updatedAt\":\"2025-04-30T05:34:10.330Z\"},{\"id\":\"HkWjtKABHywZbLBH\",\"name\":\"Provider\",\"createdAt\":\"2025-05-01T17:04:09.852Z\",\"updatedAt\":\"2025-05-01T17:04:09.852Z\"}],\"nodes\":[{\"id\":\"33853542-a6d4-4d1f-9f8c-3e932a75dc80\",\"name\":\"Flow Trigger\",\"type\":\"n8n-nodes-base.executeWorkflowTrigger\",\"position\":[-3420,340],\"parameters\":{},\"typeVersion\":1.1},{\"id\":\"2279a1b4-9e71-44e9-82dd-642d11067985\",\"name\":\"Input\",\"type\":\"n8n-nodes-base.set\",\"notes\":\"provider_no: test\",\"position\":[-3200,340],\"parameters\":{},\"notesInFlow\":true,\"typeVersion\":3.4},{\"id\":\"b533fd57-6652-4cd0-a056-e5e07a5c9792\",\"name\":\"Test Trigger\",\"type\":\"@n8n/n8n-nodes-langchain.chatTrigger\",\"position\":[-3420,540],\"webhookId\":\"6d1966ae-57f4-4ed4-ac1c-5bef7d4a2a67\",\"parameters\":{},\"typeVersion\":1.1},{\"id\":\"b01750d1-3cd7-4a88-802d-46b5c6a330ed\",\"name\":\"Test Fields\",\"type\":\"n8n-nodes-base.set\",\"notes\":\"service_no: test\",\"position\":[-3200,540],\"parameters\":{},\"notesInFlow\":true,\"typeVersion\":3.4},{\"id\":\"854b7943-176e-4d25-8d7e-d31e468788a7\",\"name\":\"AI Agent\",\"type\":\"@n8n/n8n-nodes-langchain.agent\",\"onError\":\"continueErrorOutput\",\"position\":[-1520,260],\"parameters\":{},\"typeVersion\":1.9},{\"id\":\"972e9699-1041-4a22-b698-c353c4cc3b9b\",\"name\":\"Code\",\"type\":\"n8n-nodes-base.code\",\"onError\":\"continueErrorOutput\",\"position\":[-1140,240],\"parameters\":{},\"executeOnce\":false,\"typeVersion\":2},{\"id\":\"7ae20b2c-b8ff-4d79-95a8-69a57a5b8d12\",\"name\":\"xAI @grok-2-1212\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatXAiGrok\",\"position\":[-1640,520],\"parameters\":{},\"typeVersion\":1},{\"id\":\"42155bbd-0637-4d5c-9f98-318a8fb85137\",\"name\":\"Create Booking Data\",\"type\":\"n8n-nodes-base.postgresTool\",\"position\":[-1340,520],\"parameters\":{},\"typeVersion\":2.6},{\"id\":\"fa91d89e-e7a5-49ce-9785-741324b04d82\",\"name\":\"Sticky Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-3740,280],\"parameters\":{\"content\":\"\"},\"typeVersion\":1},{\"id\":\"17c9399a-3edc-4178-b11f-cf1c140962a6\",\"name\":\"Provider Number\",\"type\":\"n8n-nodes-base.redis\",\"notes\":\"{session_id}:service:providers TTL 5m\",\"position\":[-1720,260],\"parameters\":{},\"notesInFlow\":true,\"typeVersion\":1},{\"id\":\"10af93f1-1fc0-42c4-8a2c-d1218cca5261\",\"name\":\"Calculator\",\"type\":\"@n8n/n8n-nodes-langchain.toolCalculator\",\"position\":[-1180,520],\"parameters\":{},\"typeVersion\":1},{\"id\":\"0c1af92d-b06f-4131-a915-c52c7b376db6\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-2960,220],\"parameters\":{\"content\":\"\"},\"typeVersion\":1},{\"id\":\"49c5fae8-e8fd-48ff-9b46-e7ead2143f08\",\"name\":\"If Active\",\"type\":\"n8n-nodes-base.if\",\"position\":[-2280,620],\"parameters\":{},\"typeVersion\":2.2},{\"id\":\"cef93e89-5fc9-43c8-b439-de662546b85c\",\"name\":\"Provider Cache\",\"type\":\"n8n-nodes-base.redis\",\"notes\":\"TTL 15m service:{channel_no}:{service_no}:data\",\"onError\":\"continueRegularOutput\",\"position\":[-2760,340],\"parameters\":{},\"notesInFlow\":true,\"typeVersion\":1},{\"id\":\"489cdc19-baf9-4d76-ae07-6635f32ed1cd\",\"name\":\"Load Provider Data\",\"type\":\"n8n-nodes-base.postgres\",\"onError\":\"continueRegularOutput\",\"position\":[-2280,420],\"parameters\":{},\"executeOnce\":true,\"typeVersion\":2.6,\"alwaysOutputData\":true},{\"id\":\"0a1712ce-77b2-4727-8655-b2a984cdbe42\",\"name\":\"Save Provider Cache\",\"type\":\"n8n-nodes-base.redis\",\"notes\":\"TTL 15m\",\"onError\":\"continueRegularOutput\",\"position\":[-2000,600],\"parameters\":{},\"notesInFlow\":true,\"typeVersion\":1},{\"id\":\"6fa2bb5c-001e-4990-8988-3be5c5b66c51\",\"name\":\"Parse Provider\",\"type\":\"n8n-nodes-base.code\",\"position\":[-2280,260],\"parameters\":{},\"typeVersion\":2},{\"id\":\"86059a88-4e06-4902-abad-90e2326191b1\",\"name\":\"Provider\",\"type\":\"n8n-nodes-base.set\",\"position\":[-2000,260],\"parameters\":{},\"typeVersion\":3.4},{\"id\":\"fd44c532-6185-4377-8c18-ecc2275f4eb2\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-1800,900],\"parameters\":{\"content\":\"\"},\"typeVersion\":1},{\"id\":\"d038d1b6-f288-4f85-9b3c-fc0b31cf80c8\",\"name\":\"Error Output1\",\"type\":\"n8n-nodes-base.set\",\"notes\":\"Please retry.\",\"position\":[-320,1000],\"parameters\":{},\"notesInFlow\":true,\"typeVersion\":3.4},{\"id\":\"c6644e68-d8c0-4007-a19f-c3784d00971a\",\"name\":\"If Score\",\"type\":\"n8n-nodes-base.if\",\"position\":[-540,180],\"parameters\":{},\"typeVersion\":2.2},{\"id\":\"d625bb63-34db-4b75-a67f-71f878b7d095\",\"name\":\"Output w/ Score\",\"type\":\"n8n-nodes-base.set\",\"position\":[-240,120],\"parameters\":{},\"typeVersion\":3.4},{\"id\":\"1889ebcf-d231-4e8c-9877-e282591c19ba\",\"name\":\"Output w/o Score\",\"type\":\"n8n-nodes-base.set\",\"position\":[-240,300],\"parameters\":{},\"typeVersion\":3.4},{\"id\":\"3cfe653d-efde-4479-a89d-09c460218cc0\",\"name\":\"Sticky Note4\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-620,40],\"parameters\":{\"content\":\"\"},\"typeVersion\":1},{\"id\":\"619c94e8-6d93-49d6-8540-13d01d7cda79\",\"name\":\"If Valid?\",\"type\":\"n8n-nodes-base.if\",\"position\":[-880,200],\"parameters\":{},\"typeVersion\":2.2},{\"id\":\"6b039236-37f7-4aab-86d4-bcd540f8e43c\",\"name\":\"Sticky Note5\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-960,40],\"parameters\":{\"content\":\"\"},\"typeVersion\":1},{\"id\":\"8e82564f-61a3-45d7-a43f-142ad0d5b06b\",\"name\":\"Test Output\",\"type\":\"n8n-nodes-base.set\",\"position\":[-320,640],\"parameters\":{},\"notesInFlow\":false,\"typeVersion\":3.4},{\"id\":\"94d7a371-a6de-44eb-a50c-665b0bf60d48\",\"name\":\"Sticky Note6\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-480,540],\"parameters\":{\"content\":\"\"},\"typeVersion\":1},{\"id\":\"9690413c-c097-463c-99d8-83f13f301e94\",\"name\":\"Call Back\",\"type\":\"n8n-nodes-base.executeWorkflow\",\"notes\":\"Demo Call Back\",\"position\":[140,120],\"parameters\":{},\"notesInFlow\":true,\"typeVersion\":1.2},{\"id\":\"a8f96f00-9f5b-4e06-bb9d-ac36f0504e05\",\"name\":\"Provider Cache Switch\",\"type\":\"n8n-nodes-base.switch\",\"notes\":\"NO CACHE FOR demo\",\"position\":[-2560,340],\"parameters\":{},\"notesInFlow\":true,\"typeVersion\":3.2}],\"active\":false,\"pinData\":{},\"settings\":{\"timezone\":\"Etc/UTC\",\"callerPolicy\":\"workflowsFromSameOwner\",\"errorWorkflow\":\"vuso7W8t402BPcT2\",\"executionOrder\":\"v1\"},\"versionId\":\"28fad365-85a7-4c8e-ae98-fb93f1a91d60\",\"connections\":{\"Code\":{\"main\":[[{\"node\":\"If Valid?\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Error Output1\",\"type\":\"main\",\"index\":0}]]},\"Input\":{\"main\":[[{\"node\":\"Provider Cache\",\"type\":\"main\",\"index\":0}]]},\"AI Agent\":{\"main\":[[{\"node\":\"Code\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Error Output1\",\"type\":\"main\",\"index\":0}]]},\"If Score\":{\"main\":[[{\"node\":\"Output w/ Score\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Output w/o Score\",\"type\":\"main\",\"index\":0}]]},\"Provider\":{\"main\":[[{\"node\":\"Provider Number\",\"type\":\"main\",\"index\":0}]]},\"If Active\":{\"main\":[[{\"node\":\"Save Provider Cache\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Test Output\",\"type\":\"main\",\"index\":0}]]},\"If Valid?\":{\"main\":[[{\"node\":\"If Score\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Test Output\",\"type\":\"main\",\"index\":0}]]},\"Calculator\":{\"ai_tool\":[[{\"node\":\"AI Agent\",\"type\":\"ai_tool\",\"index\":0}]]},\"Test Fields\":{\"main\":[[{\"node\":\"Input\",\"type\":\"main\",\"index\":0}]]},\"Flow Trigger\":{\"main\":[[{\"node\":\"Input\",\"type\":\"main\",\"index\":0}]]},\"Test Trigger\":{\"main\":[[{\"node\":\"Test Fields\",\"type\":\"main\",\"index\":0}]]},\"Error Output1\":{\"main\":[[{\"node\":\"Call Back\",\"type\":\"main\",\"index\":0}]]},\"Parse Provider\":{\"main\":[[{\"node\":\"Provider\",\"type\":\"main\",\"index\":0}]]},\"Provider Cache\":{\"main\":[[{\"node\":\"Provider Cache Switch\",\"type\":\"main\",\"index\":0}]]},\"Output w/ Score\":{\"main\":[[{\"node\":\"Call Back\",\"type\":\"main\",\"index\":0}]]},\"Provider Number\":{\"main\":[[{\"node\":\"AI Agent\",\"type\":\"main\",\"index\":0}]]},\"Output w/o Score\":{\"main\":[[{\"node\":\"Call Back\",\"type\":\"main\",\"index\":0}]]},\"xAI @grok-2-1212\":{\"ai_languageModel\":[[{\"node\":\"AI Agent\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"Load Provider Data\":{\"main\":[[{\"node\":\"If Active\",\"type\":\"main\",\"index\":0}]]},\"Create Booking Data\":{\"ai_tool\":[[{\"node\":\"AI Agent\",\"type\":\"ai_tool\",\"index\":0}]]},\"Save Provider Cache\":{\"main\":[[{\"node\":\"Provider\",\"type\":\"main\",\"index\":0}]]},\"Provider Cache Switch\":{\"main\":[[{\"node\":\"Parse Provider\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Parse Provider\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Load Provider Data\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "### Workflow Name: ü§ñ Taxi Service Provider\n\nTemplate was created in n8n v1.90.2\n\n### Skill Level: High\n\n### Categories: n8n, Chatbot\n\n### Stacks\n\n  * Execute Sub-workflow Trigger node\n  * Chat Trigger node\n  * Redis node\n  * Postgres node\n  * AI Agent node\n  * Calculator node\n  * If node, Switch node, Code node, Edit Fields (Set)\n\n\n\n### Prerequisite\n\n  * Execute Sub-workflow Trigger: **Taxi Service Workflow** (or your own node)\n  * Sub-workflow: **Demo Call Back** (or your own node)\n\n\n\n# Production Features\n\n  * **Scaling Design** for n8n **Queue mode** in production environment\n  * **Provider Data** from **external Database** with **Caching Mechanism**\n  * Optional **Score** design output\n  * Optimize **Taxi Provider Prompt** from database\n  * **Error Management**\n\n\n\n# What this workflow does?\n\nThis is a n8n **Taxi Provider Workflow** demo. It will receive message from the **Taxi Service Workflow** , process the estimation and return to the caller.\n\n# **How it works**\n\n  * The **Flow Trigger** node will wait for the message from other Sub-workflow.\n  * When message is received, it will first check for the matching **Provider** from the PostgreSQL database.\n  * Then it will increase a **Provider Number** in Redis for selection later\n  * Trigger a **AI Agent** to process the fare estimation and create a **NEW booking**\n  * Finally, send the AI response to the **Call Output**\n  * Note: if the **Provider** is set to inactive, it will do nothing\n\n\n\n# **Set up instructions**\n\n  1. Pull and Set up the required SQL from our [Github repository](https://github.com/ChatPayLabs/n8n-chatbot-core).\n  2. Create you **Redis credentials** , refer to [n8n integration documentation](https://docs.n8n.io/integrations/builtin/credentials/slack/?utm_source=n8n_app&utm_medium=credential_settings&utm_campaign=create_new_credentials_modal) for more information.\n  3. Select your Credentials in **Provider Cache,** **Save Provider Cache** and **Provider Number**.\n  4. Create you **Postgres credentials** , refer to [n8n integration documentation](https://docs.n8n.io/integrations/builtin/credentials/slack/?utm_source=n8n_app&utm_medium=credential_settings&utm_campaign=create_new_credentials_modal) for more information.\n  5. Select your Credentials in **Load Provider Data** and **Create Booking Data.**\n  6. Modify the **AI Agent** prompt to fit your need\n\n\n\n# How to adjust it to your needs\n\n  1. By default, this template will use the **sys_provider** table provider information, you could change it for your own design.\n  2. You can use any **AI Model** for the **AI Agent** node\n  3. Include is our prompt for the taxi service provider. It is a flexible design which use the data from the **Provider Cache** to customize the prompt, so you could create more **Taxi Service Providers** by duplicate this workflow in the **Taxi Service** node.\n\n\n",
  "readme_html": "<!--[--><div data-v-859c7806=\"\"><h3>Workflow Name: ü§ñ Taxi Service Provider</h3>\n<p>Template was created in n8n v1.90.2</p>\n<h3>Skill Level: High</h3>\n<h3>Categories: n8n, Chatbot</h3>\n<h3>Stacks</h3>\n<ul>\n<li>Execute Sub-workflow Trigger node</li>\n<li>Chat Trigger node</li>\n<li>Redis node</li>\n<li>Postgres node</li>\n<li>AI Agent node</li>\n<li>Calculator node</li>\n<li>If node, Switch node, Code node, Edit Fields (Set)</li>\n</ul>\n<h3>Prerequisite</h3>\n<ul>\n<li>Execute Sub-workflow Trigger: <strong>Taxi Service Workflow</strong> (or your own node)</li>\n<li>Sub-workflow: <strong>Demo Call Back</strong> (or your own node)</li>\n</ul>\n<h1>Production Features</h1>\n<ul>\n<li><strong>Scaling Design</strong> for n8n <strong>Queue mode</strong> in production environment</li>\n<li><strong>Provider Data</strong> from <strong>external Database</strong> with <strong>Caching Mechanism</strong></li>\n<li>Optional <strong>Score</strong> design output</li>\n<li>Optimize <strong>Taxi Provider Prompt</strong> from database</li>\n<li><strong>Error Management</strong></li>\n</ul>\n<h1>What this workflow does?</h1>\n<p>This is a n8n <strong>Taxi Provider Workflow</strong> demo. It will receive message from the <strong>Taxi Service Workflow</strong>, process the estimation and return to the caller.</p>\n<h1><strong>How it works</strong></h1>\n<ul>\n<li>The <strong>Flow Trigger</strong> node will wait for the message from other Sub-workflow.</li>\n<li>When message is received, it will first check for the matching <strong>Provider</strong> from the PostgreSQL database.</li>\n<li>Then it will increase a <strong>Provider Number</strong> in Redis for selection later</li>\n<li>Trigger a <strong>AI Agent</strong> to process the fare estimation and create a <strong>NEW booking</strong></li>\n<li>Finally, send the AI response to the <strong>Call Output</strong></li>\n<li>Note: if the <strong>Provider</strong> is set to inactive, it will do nothing</li>\n</ul>\n<h1><strong>Set up instructions</strong></h1>\n<ol>\n<li>Pull and Set up the required SQL from our <a href=\"https://github.com/ChatPayLabs/n8n-chatbot-core\" rel=\"ugc nofollow\" target=\"_blank\">Github repository</a>.</li>\n<li>Create you <strong>Redis credentials</strong>, refer to <a href=\"https://docs.n8n.io/integrations/builtin/credentials/slack/?utm_source=n8n_app&amp;utm_medium=credential_settings&amp;utm_campaign=create_new_credentials_modal\" rel=\"ugc nofollow\" target=\"_blank\">n8n integration documentation</a> for more information.</li>\n<li>Select your Credentials in <strong>Provider Cache,</strong> <strong>Save Provider Cache</strong> and <strong>Provider Number</strong>.</li>\n<li>Create you <strong>Postgres credentials</strong>, refer to <a href=\"https://docs.n8n.io/integrations/builtin/credentials/slack/?utm_source=n8n_app&amp;utm_medium=credential_settings&amp;utm_campaign=create_new_credentials_modal\" rel=\"ugc nofollow\" target=\"_blank\">n8n integration documentation</a> for more information.</li>\n<li>Select your Credentials in <strong>Load Provider Data</strong> and <strong>Create Booking Data.</strong></li>\n<li>Modify the <strong>AI Agent</strong> prompt to fit your need</li>\n</ol>\n<h1>How to adjust it to your needs</h1>\n<ol>\n<li>By default, this template will use the <strong>sys_provider</strong> table provider information, you could change it for your own design.</li>\n<li>You can use any <strong>AI Model</strong> for the <strong>AI Agent</strong> node</li>\n<li>Include is our prompt for the taxi service provider. It is a flexible design which use the data from the <strong>Provider Cache</strong> to customize the prompt, so you could create more <strong>Taxi Service Providers</strong> by duplicate this workflow in the <strong>Taxi Service</strong> node.</li>\n</ol>\n</div><!--]-->",
  "readme_zh": "### Â∑•‰ΩúÊµÅÂêçÁß∞Ôºöü§ñ Âá∫ÁßüËΩ¶ÊúçÂä°Êèê‰æõÂïÜ\n\nÊ®°ÊùøÂàõÂª∫‰∫én8n v1.90.2ÁâàÊú¨\n\n### ÊäÄËÉΩÁ≠âÁ∫ßÔºöÈ´òÁ∫ß\n\n### ÂàÜÁ±ªÔºön8n, ËÅäÂ§©Êú∫Âô®‰∫∫\n\n### ÊäÄÊúØÊ†à\n\n  * ÊâßË°åÂ≠êÂ∑•‰ΩúÊµÅËß¶ÂèëËäÇÁÇπ\n  * ËÅäÂ§©Ëß¶ÂèëËäÇÁÇπ\n  * RedisËäÇÁÇπ\n  * PostgreSQLËäÇÁÇπ\n  * AI‰ª£ÁêÜËäÇÁÇπ\n  * ËÆ°ÁÆóÂô®ËäÇÁÇπ\n  * Êù°‰ª∂Âà§Êñ≠ËäÇÁÇπ„ÄÅÂàáÊç¢ËäÇÁÇπ„ÄÅ‰ª£Á†ÅËäÇÁÇπ„ÄÅÂ≠óÊÆµÁºñËæëÔºàËÆæÁΩÆÔºâËäÇÁÇπ",
  "title_zh": "Âá∫ÁßüËΩ¶ÊúçÂä°Êèê‰æõÂïÜÔºàÁîü‰∫ßÂ∞±Áª™ÁâàÔºåÁ¨¨ÂõõÈÉ®ÂàÜÔºâ",
  "publish_date_zh": "ÊúÄÂêéÊõ¥Êñ∞‰∫é3Â§©Ââç",
  "workflow_json_zh": "{\"id\":\"i8gsrw37GcVGRJZl\",\"meta\":{\"instanceId\":\"daae7bb90c8655b08e0b68de8a52b1178f2812f6a234efb0b0509279dbb70b3e\",\"templateCredsSetupCompleted\":true},\"name\":\"ü§ñ Taxi Service Provider\",\"tags\":[{\"id\":\"no8Mb078mvRgw7PS\",\"name\":\"DEMO\",\"createdAt\":\"2025-04-30T05:34:10.330Z\",\"updatedAt\":\"2025-04-30T05:34:10.330Z\"},{\"id\":\"HkWjtKABHywZbLBH\",\"name\":\"Provider\",\"createdAt\":\"2025-05-01T17:04:09.852Z\",\"updatedAt\":\"2025-05-01T17:04:09.852Z\"}],\"nodes\":[{\"id\":\"33853542-a6d4-4d1f-9f8c-3e932a75dc80\",\"name\":\"Flow Trigger\",\"type\":\"n8n-nodes-base.executeWorkflowTrigger\",\"position\":[-3420,340],\"parameters\":{},\"typeVersion\":1.1},{\"id\":\"2279a1b4-9e71-44e9-82dd-642d11067985\",\"name\":\"Input\",\"type\":\"n8n-nodes-base.set\",\"notes\":\"provider_no: test\",\"position\":[-3200,340],\"parameters\":{},\"notesInFlow\":true,\"typeVersion\":3.4},{\"id\":\"b533fd57-6652-4cd0-a056-e5e07a5c9792\",\"name\":\"Test Trigger\",\"type\":\"@n8n/n8n-nodes-langchain.chatTrigger\",\"position\":[-3420,540],\"webhookId\":\"6d1966ae-57f4-4ed4-ac1c-5bef7d4a2a67\",\"parameters\":{},\"typeVersion\":1.1},{\"id\":\"b01750d1-3cd7-4a88-802d-46b5c6a330ed\",\"name\":\"Test Fields\",\"type\":\"n8n-nodes-base.set\",\"notes\":\"service_no: test\",\"position\":[-3200,540],\"parameters\":{},\"notesInFlow\":true,\"typeVersion\":3.4},{\"id\":\"854b7943-176e-4d25-8d7e-d31e468788a7\",\"name\":\"AI Agent\",\"type\":\"@n8n/n8n-nodes-langchain.agent\",\"onError\":\"continueErrorOutput\",\"position\":[-1520,260],\"parameters\":{},\"typeVersion\":1.9},{\"id\":\"972e9699-1041-4a22-b698-c353c4cc3b9b\",\"name\":\"Code\",\"type\":\"n8n-nodes-base.code\",\"onError\":\"continueErrorOutput\",\"position\":[-1140,240],\"parameters\":{},\"executeOnce\":false,\"typeVersion\":2},{\"id\":\"7ae20b2c-b8ff-4d79-95a8-69a57a5b8d12\",\"name\":\"xAI @grok-2-1212\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatXAiGrok\",\"position\":[-1640,520],\"parameters\":{},\"typeVersion\":1},{\"id\":\"42155bbd-0637-4d5c-9f98-318a8fb85137\",\"name\":\"Create Booking Data\",\"type\":\"n8n-nodes-base.postgresTool\",\"position\":[-1340,520],\"parameters\":{},\"typeVersion\":2.6},{\"id\":\"fa91d89e-e7a5-49ce-9785-741324b04d82\",\"name\":\"Sticky Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-3740,280],\"parameters\":{\"content\":\"\"},\"typeVersion\":1},{\"id\":\"17c9399a-3edc-4178-b11f-cf1c140962a6\",\"name\":\"Provider Number\",\"type\":\"n8n-nodes-base.redis\",\"notes\":\"{session_id}:service:providers TTL 5m\",\"position\":[-1720,260],\"parameters\":{},\"notesInFlow\":true,\"typeVersion\":1},{\"id\":\"10af93f1-1fc0-42c4-8a2c-d1218cca5261\",\"name\":\"Calculator\",\"type\":\"@n8n/n8n-nodes-langchain.toolCalculator\",\"position\":[-1180,520],\"parameters\":{},\"typeVersion\":1},{\"id\":\"0c1af92d-b06f-4131-a915-c52c7b376db6\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-2960,220],\"parameters\":{\"content\":\"\"},\"typeVersion\":1},{\"id\":\"49c5fae8-e8fd-48ff-9b46-e7ead2143f08\",\"name\":\"If Active\",\"type\":\"n8n-nodes-base.if\",\"position\":[-2280,620],\"parameters\":{},\"typeVersion\":2.2},{\"id\":\"cef93e89-5fc9-43c8-b439-de662546b85c\",\"name\":\"Provider Cache\",\"type\":\"n8n-nodes-base.redis\",\"notes\":\"TTL 15m service:{channel_no}:{service_no}:data\",\"onError\":\"continueRegularOutput\",\"position\":[-2760,340],\"parameters\":{},\"notesInFlow\":true,\"typeVersion\":1},{\"id\":\"489cdc19-baf9-4d76-ae07-6635f32ed1cd\",\"name\":\"Load Provider Data\",\"type\":\"n8n-nodes-base.postgres\",\"onError\":\"continueRegularOutput\",\"position\":[-2280,420],\"parameters\":{},\"executeOnce\":true,\"typeVersion\":2.6,\"alwaysOutputData\":true},{\"id\":\"0a1712ce-77b2-4727-8655-b2a984cdbe42\",\"name\":\"Save Provider Cache\",\"type\":\"n8n-nodes-base.redis\",\"notes\":\"TTL 15m\",\"onError\":\"continueRegularOutput\",\"position\":[-2000,600],\"parameters\":{},\"notesInFlow\":true,\"typeVersion\":1},{\"id\":\"6fa2bb5c-001e-4990-8988-3be5c5b66c51\",\"name\":\"Parse Provider\",\"type\":\"n8n-nodes-base.code\",\"position\":[-2280,260],\"parameters\":{},\"typeVersion\":2},{\"id\":\"86059a88-4e06-4902-abad-90e2326191b1\",\"name\":\"Provider\",\"type\":\"n8n-nodes-base.set\",\"position\":[-2000,260],\"parameters\":{},\"typeVersion\":3.4},{\"id\":\"fd44c532-6185-4377-8c18-ecc2275f4eb2\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-1800,900],\"parameters\":{\"content\":\"\"},\"typeVersion\":1},{\"id\":\"d038d1b6-f288-4f85-9b3c-fc0b31cf80c8\",\"name\":\"Error Output1\",\"type\":\"n8n-nodes-base.set\",\"notes\":\"Please retry.\",\"position\":[-320,1000],\"parameters\":{},\"notesInFlow\":true,\"typeVersion\":3.4},{\"id\":\"c6644e68-d8c0-4007-a19f-c3784d00971a\",\"name\":\"If Score\",\"type\":\"n8n-nodes-base.if\",\"position\":[-540,180],\"parameters\":{},\"typeVersion\":2.2},{\"id\":\"d625bb63-34db-4b75-a67f-71f878b7d095\",\"name\":\"Output w/ Score\",\"type\":\"n8n-nodes-base.set\",\"position\":[-240,120],\"parameters\":{},\"typeVersion\":3.4},{\"id\":\"1889ebcf-d231-4e8c-9877-e282591c19ba\",\"name\":\"Output w/o Score\",\"type\":\"n8n-nodes-base.set\",\"position\":[-240,300],\"parameters\":{},\"typeVersion\":3.4},{\"id\":\"3cfe653d-efde-4479-a89d-09c460218cc0\",\"name\":\"Sticky Note4\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-620,40],\"parameters\":{\"content\":\"\"},\"typeVersion\":1},{\"id\":\"619c94e8-6d93-49d6-8540-13d01d7cda79\",\"name\":\"If Valid?\",\"type\":\"n8n-nodes-base.if\",\"position\":[-880,200],\"parameters\":{},\"typeVersion\":2.2},{\"id\":\"6b039236-37f7-4aab-86d4-bcd540f8e43c\",\"name\":\"Sticky Note5\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-960,40],\"parameters\":{\"content\":\"\"},\"typeVersion\":1},{\"id\":\"8e82564f-61a3-45d7-a43f-142ad0d5b06b\",\"name\":\"Test Output\",\"type\":\"n8n-nodes-base.set\",\"position\":[-320,640],\"parameters\":{},\"notesInFlow\":false,\"typeVersion\":3.4},{\"id\":\"94d7a371-a6de-44eb-a50c-665b0bf60d48\",\"name\":\"Sticky Note6\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-480,540],\"parameters\":{\"content\":\"\"},\"typeVersion\":1},{\"id\":\"9690413c-c097-463c-99d8-83f13f301e94\",\"name\":\"Call Back\",\"type\":\"n8n-nodes-base.executeWorkflow\",\"notes\":\"Demo Call Back\",\"position\":[140,120],\"parameters\":{},\"notesInFlow\":true,\"typeVersion\":1.2},{\"id\":\"a8f96f00-9f5b-4e06-bb9d-ac36f0504e05\",\"name\":\"Provider Cache Switch\",\"type\":\"n8n-nodes-base.switch\",\"notes\":\"NO CACHE FOR demo\",\"position\":[-2560,340],\"parameters\":{},\"notesInFlow\":true,\"typeVersion\":3.2}],\"active\":false,\"pinData\":{},\"settings\":{\"timezone\":\"Etc/UTC\",\"callerPolicy\":\"workflowsFromSameOwner\",\"errorWorkflow\":\"vuso7W8t402BPcT2\",\"executionOrder\":\"v1\"},\"versionId\":\"28fad365-85a7-4c8e-ae98-fb93f1a91d60\",\"connections\":{\"Code\":{\"main\":[[{\"node\":\"If Valid?\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Error Output1\",\"type\":\"main\",\"index\":0}]]},\"Input\":{\"main\":[[{\"node\":\"Provider Cache\",\"type\":\"main\",\"index\":0}]]},\"AI Agent\":{\"main\":[[{\"node\":\"Code\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Error Output1\",\"type\":\"main\",\"index\":0}]]},\"If Score\":{\"main\":[[{\"node\":\"Output w/ Score\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Output w/o Score\",\"type\":\"main\",\"index\":0}]]},\"Provider\":{\"main\":[[{\"node\":\"Provider Number\",\"type\":\"main\",\"index\":0}]]},\"If Active\":{\"main\":[[{\"node\":\"Save Provider Cache\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Test Output\",\"type\":\"main\",\"index\":0}]]},\"If Valid?\":{\"main\":[[{\"node\":\"If Score\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Test Output\",\"type\":\"main\",\"index\":0}]]},\"Calculator\":{\"ai_tool\":[[{\"node\":\"AI Agent\",\"type\":\"ai_tool\",\"index\":0}]]},\"Test Fields\":{\"main\":[[{\"node\":\"Input\",\"type\":\"main\",\"index\":0}]]},\"Flow Trigger\":{\"main\":[[{\"node\":\"Input\",\"type\":\"main\",\"index\":0}]]},\"Test Trigger\":{\"main\":[[{\"node\":\"Test Fields\",\"type\":\"main\",\"index\":0}]]},\"Error Output1\":{\"main\":[[{\"node\":\"Call Back\",\"type\":\"main\",\"index\":0}]]},\"Parse Provider\":{\"main\":[[{\"node\":\"Provider\",\"type\":\"main\",\"index\":0}]]},\"Provider Cache\":{\"main\":[[{\"node\":\"Provider Cache Switch\",\"type\":\"main\",\"index\":0}]]},\"Output w/ Score\":{\"main\":[[{\"node\":\"Call Back\",\"type\":\"main\",\"index\":0}]]},\"Provider Number\":{\"main\":[[{\"node\":\"AI Agent\",\"type\":\"main\",\"index\":0}]]},\"Output w/o Score\":{\"main\":[[{\"node\":\"Call Back\",\"type\":\"main\",\"index\":0}]]},\"xAI @grok-2-1212\":{\"ai_languageModel\":[[{\"node\":\"AI Agent\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"Load Provider Data\":{\"main\":[[{\"node\":\"If Active\",\"type\":\"main\",\"index\":0}]]},\"Create Booking Data\":{\"ai_tool\":[[{\"node\":\"AI Agent\",\"type\":\"ai_tool\",\"index\":0}]]},\"Save Provider Cache\":{\"main\":[[{\"node\":\"Provider\",\"type\":\"main\",\"index\":0}]]},\"Provider Cache Switch\":{\"main\":[[{\"node\":\"Parse Provider\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Parse Provider\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Load Provider Data\",\"type\":\"main\",\"index\":0}]]}}}"
}