{
  "title": "Update Hubspot engagement by parsing inbox mail with AI",
  "url": "https://n8n.io/workflows/3767-update-hubspot-engagement-by-parsing-inbox-mail-with-ai/",
  "category": "AI",
  "category_url": "https://n8n.io/workflows/categories/ai/?sort=createdAt:desc",
  "author": "PollupAI",
  "publish_date": "Last update 6 days ago",
  "publish_date_absolute": "2025-05-01",
  "content": "",
  "workflow_json": "{\"nodes\":[{\"id\":\"9f2dc93f-bae5-4419-8411-d2fff4b31f5e\",\"name\":\"Creates an email engagement\",\"type\":\"n8n-nodes-base.hubspot\",\"position\":[916,-260],\"parameters\":{\"type\":\"email\",\"metadata\":{\"html\":\"={{ $('When an email is received').item.json.textHtml || $('When an email is received').item.json.textPlain}}\",\"subject\":\"={{ $('When an email is received').item.json.subject }}\",\"toEmail\":[\"={{ $('When an email is received').item.json.to }}\"],\"fromEmail\":\"={{ $('When an email is received').item.json.from }}\"},\"resource\":\"engagement\",\"authentication\":\"oAuth2\",\"additionalFields\":{\"associations\":{\"contactIds\":\"={{ $json.vid }}\"}}},\"credentials\":{\"hubspotOAuth2Api\":{\"id\":\"JxzF93M0SJ00jDD9\",\"name\":\"HubSpot account\"}},\"typeVersion\":2.1},{\"id\":\"0a56ec28-afc6-40a9-bf42-4d8742e48eb4\",\"name\":\"OpenAI Chat Model\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\"position\":[-140,-40],\"parameters\":{\"model\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"gpt-4o-mini\"},\"options\":{}},\"credentials\":{\"openAiApi\":{\"id\":\"1IOLtYX7aTspCAN8\",\"name\":\"OpenAI Pollup\"}},\"typeVersion\":1.2},{\"id\":\"8e53aeb6-7d84-4739-b482-b8cd844b89ac\",\"name\":\"Search for the contact via email\",\"type\":\"n8n-nodes-base.hubspot\",\"position\":[256,-260],\"parameters\":{\"operation\":\"search\",\"authentication\":\"oAuth2\",\"filterGroupsUi\":{\"filterGroupsValues\":[{\"filtersUi\":{\"filterValues\":[{\"value\":\"={{ $json.output.contact_info.email }}\",\"propertyName\":\"email|string\"}]}}]},\"additionalFields\":{}},\"credentials\":{\"hubspotOAuth2Api\":{\"id\":\"JxzF93M0SJ00jDD9\",\"name\":\"HubSpot account\"}},\"typeVersion\":2.1,\"alwaysOutputData\":true},{\"id\":\"19e54445-d0cb-40f2-a11f-5e4cb22ad7ec\",\"name\":\"Parse the mail with AI\",\"type\":\"@n8n/n8n-nodes-langchain.chainLlm\",\"position\":[-120,-260],\"parameters\":{\"text\":\"=Get all important info from this email like first name, last name, email, phone number, name of the company, country, Postal code, city, etc. Return it as a json.  The email content:  {{ $json.textHtml || $json.textPlain}} \\nFrom: {{ $json.from }} \\nSubject: {{ $json.subject }}\\nDate sent:  {{ $json.date }}\",\"messages\":{\"messageValues\":[{\"message\":\"=You are a professional Email parser\"}]},\"promptType\":\"define\",\"hasOutputParser\":true},\"typeVersion\":1.6},{\"id\":\"8b257214-0001-46aa-84df-cad844e3130b\",\"name\":\"When an email is received\",\"type\":\"n8n-nodes-base.emailReadImap\",\"position\":[-340,-260],\"parameters\":{\"options\":{\"forceReconnect\":3}},\"credentials\":{\"imap\":{\"id\":\"g7C5Z9V9vQUbsLIw\",\"name\":\"IMAP account\"}},\"typeVersion\":2},{\"id\":\"32820b69-3918-4951-9ddc-45bdbcb60aca\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-440,-400],\"parameters\":{\"color\":4,\"width\":280,\"height\":300,\"content\":\"## Set receiving email account\\n- Ddefaults to an IMAP account node, but you can put a gmail account or any  email trigger\"},\"typeVersion\":1},{\"id\":\"adbed044-08ae-4744-9b0c-09a225860267\",\"name\":\"Set the output Json\",\"type\":\"@n8n/n8n-nodes-langchain.outputParserStructured\",\"position\":[80,-40],\"parameters\":{\"jsonSchemaExample\":\"{\\\"contact_info\\\": \\n{\\n\\\"first name\\\": \\n\\\"Thomas\\\",\\n\\\"last name\\\": \\\"Vie\\\",\\n\\\"position\\\": \\n\\\"CTO\\\",\\n\\\"company\\\": \\n\\\"Pollup Data Services\\\",\\n\\\"email\\\": \\n\\\"Thomas@pollup.net\\\",\\n\\\"phone\\\": \\n\\\"+34 673626552\\\",\\n\\\"website\\\": \\n\\\"https://pollup.net\\\",\\n\\\"address\\\": \\n{\\n\\\"street\\\": \\n\\\"Oppelner Str. 32\\\",\\n\\\"postal_code\\\": \\n\\\"10997\\\",\\n\\\"city\\\": \\n\\\"Berlin\\\",\\n\\\"country\\\": \\n\\\"Germany\\\"\\n}}}\"},\"typeVersion\":1.2},{\"id\":\"e58575ee-6ac8-4de1-b4db-8525146efd74\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-140,-400],\"parameters\":{\"color\":4,\"width\":320,\"height\":300,\"content\":\"## Upgrade the prompt!\\nThis is a very simple prompt but oit does the job. Improve it and send it to me!\"},\"typeVersion\":1},{\"id\":\"23465910-0a89-45f7-9bbf-fb17abadc5de\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[200,-400],\"parameters\":{\"color\":4,\"width\":840,\"height\":400,\"content\":\"## Hubspot integration\\n- Search for the contact in hubspot\\n- If it is present creates an egagement\\n- It it is not, creates it and adds an engagement\"},\"typeVersion\":1},{\"id\":\"f5573c22-85f3-4eda-ba5a-172567827991\",\"name\":\"contact exists?\",\"type\":\"n8n-nodes-base.if\",\"position\":[476,-260],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"554c2aa3-dbdb-4955-8510-6b09bc762f63\",\"operator\":{\"type\":\"string\",\"operation\":\"exists\",\"singleValue\":true},\"leftValue\":\"={{ $json.id }}\",\"rightValue\":\"\"}]}},\"typeVersion\":2.2},{\"id\":\"914f2e6b-7a5f-4c9c-bd3b-4bfb2693728d\",\"name\":\"Edit Fields\",\"type\":\"n8n-nodes-base.set\",\"position\":[696,-360],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"75c8fc2d-dc8e-4b6c-a853-1dbd8d72f779\",\"name\":\"vid\",\"type\":\"string\",\"value\":\"={{ $json.id }}\"}]}},\"typeVersion\":3.4},{\"id\":\"4c8fa2d1-e3b4-4323-bdc8-3a4e2bbc706d\",\"name\":\"Creates contact\",\"type\":\"n8n-nodes-base.hubspot\",\"position\":[696,-160],\"parameters\":{\"email\":\"={{ $('Parse the mail with AI').item.json.output.contact_info.email }}\",\"options\":{},\"authentication\":\"oAuth2\",\"additionalFields\":{\"city\":\"={{ $('Parse the mail with AI').item.json.output.contact_info.address.city }}\",\"country\":\"={{ $('Parse the mail with AI').item.json.output.contact_info.address.country }}\",\"jobTitle\":\"={{ $('Parse the mail with AI').item.json.output.contact_info.position }}\",\"lastName\":\"={{ $('Parse the mail with AI').item.json.output.contact_info['last name'] }}\",\"postalCode\":\"={{ $('Parse the mail with AI').item.json.output.contact_info.address.postal_code }}\",\"websiteUrl\":\"={{ $('Parse the mail with AI').item.json.output.contact_info.website }}\",\"companyName\":\"={{ $('Parse the mail with AI').item.json.output.contact_info.company }}\",\"phoneNumber\":\"={{ $('Parse the mail with AI').item.json.output.contact_info.phone }}\",\"streetAddress\":\"={{ $('Parse the mail with AI').item.json.output.contact_info.address.street }}\"}},\"credentials\":{\"hubspotOAuth2Api\":{\"id\":\"JxzF93M0SJ00jDD9\",\"name\":\"HubSpot account\"}},\"typeVersion\":2.1},{\"id\":\"5f94ba18-49db-4bc0-9f0a-16a9d05ca6b0\",\"name\":\"Sticky Note7\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-440,-620],\"parameters\":{\"width\":460,\"height\":200,\"content\":\"## Contact me\\n- If you need any modification to this workflow\\n- if you need some help with this workflow\\n- Or if you need any workflow in n8n, Make, or Langchain / Langgraph\\n\\nWrite to me: [thomas@pollup.net](mailto:thomas@pollup.net)\"},\"typeVersion\":1}],\"connections\":{\"Edit Fields\":{\"main\":[[{\"node\":\"Creates an email engagement\",\"type\":\"main\",\"index\":0}]]},\"Creates contact\":{\"main\":[[{\"node\":\"Creates an email engagement\",\"type\":\"main\",\"index\":0}]]},\"contact exists?\":{\"main\":[[{\"node\":\"Edit Fields\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Creates contact\",\"type\":\"main\",\"index\":0}]]},\"OpenAI Chat Model\":{\"ai_languageModel\":[[{\"node\":\"Parse the mail with AI\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"Set the output Json\":{\"ai_outputParser\":[[{\"node\":\"Parse the mail with AI\",\"type\":\"ai_outputParser\",\"index\":0}]]},\"Parse the mail with AI\":{\"main\":[[{\"node\":\"Search for the contact via email\",\"type\":\"main\",\"index\":0}]]},\"When an email is received\":{\"main\":[[{\"node\":\"Parse the mail with AI\",\"type\":\"main\",\"index\":0}]]},\"Search for the contact via email\":{\"main\":[[{\"node\":\"contact exists?\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "## **Who is this for?**\n\nThis workflow is designed for Customer Success Managers (CSM), sales, support, or marketing teams using **HubSpot CRM** who want to automate customer engagement tracking when new emails arrive. It’s ideal for businesses looking to streamline CRM updates without manual data entry.\n\n## **Problem Solved / Use Case**\n\nManually logging email interactions in HubSpot is time-consuming. This workflow **automatically** parses incoming emails, checks if the sender exists in HubSpot, and either:\n\n  * Creates a new contact + logs the email as an engagement (if the sender is new).\n  * Logs the email as an engagement for an existing contact.\n\n\n\n## **What This Workflow Does**\n\n  1. **Triggers** when a new email arrives in a connected IMAP inbox.\n  2. **Parses the email** using AI (OpenAI) to extract structured data.\n  3. **Searches HubSpot** for the sender’s email address.\n  4. **Updates HubSpot** : \n     * Creates a contact (if missing) and logs the email as an engagement.\n     * Or logs the engagement for an existing contact.\n\n\n\n## **Setup**\n\n  1. **Configure Email Account** : Replace the default IMAP node with your email provider\n  2. **HubSpot Credentials** : Add your HubSpot API key in the HubSpot nodes.\n  3. **OpenAI Integration** : Ensure your OpenAI API key is set for email parsing.\n\n\n\n## **Customization Tips**\n\n  * **Improve AI Prompt** : Modify the OpenAI prompt to extract specific email data (e.g., customer intent).\n  * **Add Filters** : Exclude auto-replies or spam by adding a filter node.\n  * **Extend Functionality** : Use the parsed data to trigger follow-up tasks (e.g., Slack alerts, tickets).\n\n\n\n**Need Help?** Contact [thomas@polcup.net](mailto:thomas@polcup.net) for workflow modifications or help.\n\n**Discover my other workflows[here](https://n8n.io/creators/zeerobug/)**\n",
  "readme_html": "<!--[--><div data-v-50766329=\"\"><h2><strong>Who is this for?</strong></h2>\n<p>This workflow is designed for Customer Success Managers (CSM), sales, support, or marketing teams using <strong>HubSpot CRM</strong> who want to automate customer engagement tracking when new emails arrive. It’s ideal for businesses looking to streamline CRM updates without manual data entry.</p>\n<h2><strong>Problem Solved / Use Case</strong></h2>\n<p>Manually logging email interactions in HubSpot is time-consuming. This workflow <strong>automatically</strong> parses incoming emails, checks if the sender exists in HubSpot, and either:</p>\n<ul>\n<li>Creates a new contact + logs the email as an engagement (if the sender is new).</li>\n<li>Logs the email as an engagement for an existing contact.</li>\n</ul>\n<h2><strong>What This Workflow Does</strong></h2>\n<ol>\n<li><strong>Triggers</strong> when a new email arrives in a connected IMAP inbox.</li>\n<li><strong>Parses the email</strong> using AI (OpenAI) to extract structured data.</li>\n<li><strong>Searches HubSpot</strong> for the sender’s email address.</li>\n<li><strong>Updates HubSpot</strong>:\n<ul>\n<li>Creates a contact (if missing) and logs the email as an engagement.</li>\n<li>Or logs the engagement for an existing contact.</li>\n</ul>\n</li>\n</ol>\n<h2><strong>Setup</strong></h2>\n<ol>\n<li><strong>Configure Email Account</strong>: Replace the default IMAP node with your email provider</li>\n<li><strong>HubSpot Credentials</strong>: Add your HubSpot API key in the HubSpot nodes.</li>\n<li><strong>OpenAI Integration</strong>: Ensure your OpenAI API key is set for email parsing.</li>\n</ol>\n<h2><strong>Customization Tips</strong></h2>\n<ul>\n<li><strong>Improve AI Prompt</strong>: Modify the OpenAI prompt to extract specific email data (e.g., customer intent).</li>\n<li><strong>Add Filters</strong>: Exclude auto-replies or spam by adding a filter node.</li>\n<li><strong>Extend Functionality</strong>: Use the parsed data to trigger follow-up tasks (e.g., Slack alerts, tickets).</li>\n</ul>\n<p><strong>Need Help?</strong> Contact <a href=\"mailto:thomas@polcup.net\" rel=\"ugc nofollow\">thomas@polcup.net</a> for workflow modifications or help.</p>\n<p><strong>Discover my other workflows <a href=\"https://n8n.io/creators/zeerobug/\" rel=\"ugc nofollow\" target=\"_blank\">here</a></strong></p>\n</div><!--]-->",
  "readme_zh": "## **适用对象**\n\n本工作流专为使用**HubSpot CRM**的客户成功经理（CSM）、销售、支持或营销团队设计，旨在实现新邮件到达时自动追踪客户互动。特别适合希望无需手动录入即可简化CRM更新的企业。\n\n## **解决的问题/应用场景**\n\n在HubSpot中手动记录邮件互动耗时费力。该工作流**自动**解析收到的邮件，检查发件人是否存在于HubSpot中，并执行以下操作之一：\n  * 若发件人不存在，则创建新联系人并将邮件记录为互动；\n  * 若发件人已存在，则直接为该联系人记录邮件互动。\n\n## **工作流功能**\n\n  1. **触发条件**：当连接至IMAP收件箱收到新邮件时启动；\n  2. **邮件解析**：利用AI（OpenAI）提取结构化数据；\n  3. **HubSpot检索**：根据发件人邮箱地址搜索HubSpot数据库；\n  4. **HubSpot更新**：\n     * 若联系人不存在，则创建并记录邮件互动；\n     * 若联系人已存在，则仅记录互动。\n\n## **设置步骤**\n\n  1. **配置邮箱账户**：将默认IMAP节点替换为您的邮箱服务商；\n  2. **HubSpot凭证**：在HubSpot节点中添加您的API密钥；\n  3. **OpenAI集成**：确保已设置OpenAI API密钥用于邮件解析。\n\n## **自定义建议**\n\n  * **优化AI提示词**：调整OpenAI提示以提取特定邮件数据（如客户意向）；\n  * **添加过滤器**：通过过滤节点排除自动回复或垃圾邮件；\n  * **扩展功能**：利用解析数据触发后续任务（如Slack提醒、工单生成）。\n\n**需要帮助？** 如需修改工作流或获取支持，请联系[thomas@polcup.net](mailto:thomas@polcup.net)。\n\n**探索更多工作流[请点击此处](https://n8n.io/creators/zeerobug/)**",
  "title_zh": "通过AI解析收件箱邮件更新Hubspot互动记录",
  "publish_date_zh": "最后更新于6天前",
  "workflow_json_zh": "{\n  \"nodes\": [\n    {\n      \"id\": \"9f2dc93f-bae5-4419-8411-d2fff4b31f5e\",\n      \"name\": \"Creates an email engagement\",\n      \"type\": \"n8n-nodes-base.hubspot\",\n      \"position\": [\n        916,\n        -260\n      ],\n      \"parameters\": {\n        \"type\": \"email\",\n        \"metadata\": {\n          \"html\": \"={{ $('When an email is received').item.json.textHtml || $('When an email is received').item.json.textPlain}}\",\n          \"subject\": \"={{ $('When an email is received').item.json.subject }}\",\n          \"toEmail\": [\n            \"={{ $('When an email is received').item.json.to }}\"\n          ],\n          \"fromEmail\": \"={{ $('When an email is received').item.json.from }}\"\n        },\n        \"resource\": \"engagement\",\n        \"authentication\": \"oAuth2\",\n        \"additionalFields\": {\n          \"associations\": {\n            \"contactIds\": \"={{ $json.vid }}\"\n          }\n        }\n      },\n      \"credentials\": {\n        \"hubspotOAuth2Api\": {\n          \"id\": \"JxzF93M0SJ00jDD9\",\n          \"name\": \"HubSpot account\"\n        }\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"0a56ec28-afc6-40a9-bf42-4d8742e48eb4\",\n      \"name\": \"OpenAI Chat Model\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\n      \"position\": [\n        -140,\n        -40\n      ],\n      \"parameters\": {\n        \"model\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gpt-4o-mini\"\n        },\n        \"options\": {}\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"1IOLtYX7aTspCAN8\",\n          \"name\": \"OpenAI Pollup\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"8e53aeb6-7d84-4739-b482-b8cd844b89ac\",\n      \"name\": \"Search for the contact via email\",\n      \"type\": \"n8n-nodes-base.hubspot\",\n      \"position\": [\n        256,\n        -260\n      ],\n      \"parameters\": {\n        \"operation\": \"search\",\n        \"authentication\": \"oAuth2\",\n        \"filterGroupsUi\": {\n          \"filterGroupsValues\": [\n            {\n              \"filtersUi\": {\n                \"filterValues\": [\n                  {\n                    \"value\": \"={{ $json.output.contact_info.email }}\",\n                    \"propertyName\": \"email|string\"\n                  }\n                ]\n              }\n            }\n          ]\n        },\n        \"additionalFields\": {}\n      },\n      \"credentials\": {\n        \"hubspotOAuth2Api\": {\n          \"id\": \"JxzF93M0SJ00jDD9\",\n          \"name\": \"HubSpot account\"\n        }\n      },\n      \"typeVersion\": 2.1,\n      \"alwaysOutputData\": true\n    },\n    {\n      \"id\": \"19e54445-d0cb-40f2-a11f-5e4cb22ad7ec\",\n      \"name\": \"Parse the mail with AI\",\n      \"type\": \"@n8n/n8n-nodes-langchain.chainLlm\",\n      \"position\": [\n        -120,\n        -260\n      ],\n      \"parameters\": {\n        \"text\": \"=Get all important info from this email like first name, last name, email, phone number, name of the company, country, Postal code, city, etc. Return it as a json.  The email content:  {{ $json.textHtml || $json.textPlain}} \\nFrom: {{ $json.from }} \\nSubject: {{ $json.subject }}\\nDate sent:  {{ $json.date }}\",\n        \"messages\": {\n          \"messageValues\": [\n            {\n              \"message\": \"=You are a professional Email parser\"\n            }\n          ]\n        },\n        \"promptType\": \"define\",\n        \"hasOutputParser\": true\n      },\n      \"typeVersion\": 1.6\n    },\n    {\n      \"id\": \"8b257214-0001-46aa-84df-cad844e3130b\",\n      \"name\": \"When an email is received\",\n      \"type\": \"n8n-nodes-base.emailReadImap\",\n      \"position\": [\n        -340,\n        -260\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"forceReconnect\": 3\n        }\n      },\n      \"credentials\": {\n        \"imap\": {\n          \"id\": \"g7C5Z9V9vQUbsLIw\",\n          \"name\": \"IMAP account\"\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"32820b69-3918-4951-9ddc-45bdbcb60aca\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -440,\n        -400\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 280,\n        \"height\": 300,\n        \"content\": \"## 设置接收邮件账户\\n- 默认使用IMAP账户节点，但也可配置Gmail账户或任意邮件触发器\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"adbed044-08ae-4744-9b0c-09a225860267\",\n      \"name\": \"Set the output Json\",\n      \"type\": \"@n8n/n8n-nodes-langchain.outputParserStructured\",\n      \"position\": [\n        80,\n        -40\n      ],\n      \"parameters\": {\n        \"jsonSchemaExample\": \"{\\\"contact_info\\\": \\n{\\n\\\"first name\\\": \\n\\\"Thomas\\\",\\n\\\"last name\\\": \\\"Vie\\\",\\n\\\"position\\\": \\n\\\"CTO\\\",\\n\\\"company\\\": \\n\\\"Pollup Data Services\\\",\\n\\\"email\\\": \\n\\\"Thomas@pollup.net\\\",\\n\\\"phone\\\": \\n\\\"+34 673626552\\\",\\n\\\"website\\\": \\n\\\"https://pollup.net\\\",\\n\\\"address\\\": \\n{\\n\\\"street\\\": \\n\\\"Oppelner Str. 32\\\",\\n\\\"postal_code\\\": \\n\\\"10997\\\",\\n\\\"city\\\": \\n\\\"Berlin\\\",\\n\\\"country\\\": \\n\\\"Germany\\\"\\n}}}\"\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"e58575ee-6ac8-4de1-b4db-8525146efd74\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -140,\n        -400\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 320,\n        \"height\": 300,\n        \"content\": \"## 升级提示词！\\n这个提示词虽然简单但效果不错。请优化它并发给我！\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"23465910-0a89-45f7-9bbf-fb17abadc5de\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        200,\n        -400\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 840,\n        \"height\": 400,\n        \"content\": \"## HubSpot集成\\n- 在HubSpot中搜索联系人\\n- 如果存在则创建互动记录\\n- 如果不存在则先创建联系人再添加互动记录\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"f5573c22-85f3-4eda-ba5a-172567827991\",\n      \"name\": \"contact exists?\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        476,\n        -260\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"554c2aa3-dbdb-4955-8510-6b09bc762f63\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"exists\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $json.id }}\",\n              \"rightValue\": \"\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"914f2e6b-7a5f-4c9c-bd3b-4bfb2693728d\",\n      \"name\": \"Edit Fields\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        696,\n        -360\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"75c8fc2d-dc8e-4b6c-a853-1dbd8d72f779\",\n              \"name\": \"vid\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.id }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"4c8fa2d1-e3b4-4323-bdc8-3a4e2bbc706d\",\n      \"name\": \"Creates contact\",\n      \"type\": \"n8n-nodes-base.hubspot\",\n      \"position\": [\n        696,\n        -160\n      ],\n      \"parameters\": {\n        \"email\": \"={{ $('Parse the mail with AI').item.json.output.contact_info.email }}\",\n        \"options\": {},\n        \"authentication\": \"oAuth2\",\n        \"additionalFields\": {\n          \"city\": \"={{ $('Parse the mail with AI').item.json.output.contact_info.address.city }}\",\n          \"country\": \"={{ $('Parse the mail with AI').item.json.output.contact_info.address.country }}\",\n          \"jobTitle\": \"={{ $('Parse the mail with AI').item.json.output.contact_info.position }}\",\n          \"lastName\": \"={{ $('Parse the mail with AI').item.json.output.contact_info['last name'] }}\",\n          \"postalCode\": \"={{ $('Parse the mail with AI').item.json.output.contact_info.address.postal_code }}\",\n          \"websiteUrl\": \"={{ $('Parse the mail with AI').item.json.output.contact_info.website }}\",\n          \"companyName\": \"={{ $('Parse the mail with AI').item.json.output.contact_info.company }}\",\n          \"phoneNumber\": \"={{ $('Parse the mail with AI').item.json.output.contact_info.phone }}\",\n          \"streetAddress\": \"={{ $('Parse the mail with AI').item.json.output.contact_info.address.street }}\"\n        }\n      },\n      \"credentials\": {\n        \"hubspotOAuth2Api\": {\n          \"id\": \"JxzF93M0SJ00jDD9\",\n          \"name\": \"HubSpot account\"\n        }\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"5f94ba18-49db-4bc0-9f0a-16a9d05ca6b0\",\n      \"name\": \"Sticky Note7\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -440,\n        -620\n      ],\n      \"parameters\": {\n        \"width\": 460,\n        \"height\": 200,\n        \"content\": \"## 联系我\\n- 如需对此工作流进行任何修改\\n- 如需获取此工作流的帮助\\n- 或需要n8n、Make、Langchain/Langgraph相关的工作流支持\\n\\n写信至：[thomas@pollup.net](mailto:thomas@pollup.net)\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"connections\": {\n    \"Edit Fields\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Creates an email engagement\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Creates contact\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Creates an email engagement\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"contact exists?\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Edit Fields\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Creates contact\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"OpenAI Chat Model\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"Parse the mail with AI\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Set the output Json\": {\n      \"ai_outputParser\": [\n        [\n          {\n            \"node\": \"Parse the mail with AI\",\n            \"type\": \"ai_outputParser\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Parse the mail with AI\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Search for the contact via email\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When an email is received\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Parse the mail with AI\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Search for the contact via email\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"contact exists?\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}