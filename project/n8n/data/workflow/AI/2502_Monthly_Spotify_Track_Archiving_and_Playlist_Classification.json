{
  "title": "Monthly Spotify Track Archiving and Playlist Classification",
  "url": "https://n8n.io/workflows/2502-monthly-spotify-track-archiving-and-playlist-classification/",
  "category": "AI",
  "category_url": "https://n8n.io/workflows/categories/ai/?count=20",
  "author": "Arnaud MARIE",
  "publish_date": "Last update 6 months ago",
  "content": "",
  "workflow_json": "{\"meta\":{\"instanceId\":\"8e95de061dd3893a50b8b4c150c8084a7848fb1df63f53533941b7c91a8ab996\"},\"nodes\":[{\"id\":\"6325369f-5881-4e4e-b71b-510a64b236ef\",\"name\":\"Retrieve relevant info\",\"type\":\"n8n-nodes-base.set\",\"position\":[1260,400],\"parameters\":{\"mode\":\"raw\",\"options\":{},\"jsonOutput\":\"={\\n\\\"track\\\" : \\\"{{ $json.track.name.replaceAll('\\\"',\\\"'\\\") }}\\\",\\n\\\"artist\\\":  \\\"{{ $json.track.artists[0].name }}\\\",\\n\\\"album\\\" :\\\"{{ $json.track.album.name }}\\\",\\n\\\"track_spotify_uri\\\" : \\\"{{ $json.track.uri }}\\\",\\n\\\"track_spotify_id\\\" : \\\"{{ $json.track.id }}\\\",\\n\\\"external_urls\\\": \\\"{{ $json.track.external_urls.spotify }}\\\",\\n\\\"track_popularity\\\"  : \\\"{{ $json.track.popularity }}\\\",\\n\\\"album_release_date\\\" : \\\"{{ $json.track.album.release_date.toDateTime().year }}\\\"\\n}\"},\"typeVersion\":3.4},{\"id\":\"2252fe16-6ee7-4fbe-b74e-d9bdcc7ad708\",\"name\":\"Batch preparation\",\"type\":\"n8n-nodes-base.code\",\"position\":[1560,280],\"parameters\":{\"jsCode\":\"const items = $input.all();\\nconst trackSpotifyIds = items.map((item) => item?.json?.track_spotify_id);\\n\\nconst aggregatedItems = [];\\nfor (let i = 0; i < trackSpotifyIds.length; i += 100) {\\n  aggregatedItems.push({\\n    json: {\\n      trackSpotifyIds: trackSpotifyIds.slice(i, i + 100),\\n    },\\n  });\\n}\\n\\nreturn aggregatedItems;\\n\"},\"typeVersion\":2},{\"id\":\"83c181f8-ed18-41d7-8c7e-26b0dd320083\",\"name\":\"Get Track details\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[1980,280],\"parameters\":{\"url\":\"https://api.spotify.com/v1/audio-features\",\"options\":{},\"sendQuery\":true,\"authentication\":\"predefinedCredentialType\",\"queryParameters\":{\"parameters\":[{\"name\":\"ids\",\"value\":\"={{ $json.trackSpotifyIds.join(\\\",\\\")}}\"}]},\"nodeCredentialType\":\"spotifyOAuth2Api\"},\"credentials\":{\"spotifyOAuth2Api\":{\"id\":\"S9iODAILG9yn19ta\",\"name\":\"Spotify account - Arnaud's\"}},\"typeVersion\":4.2},{\"id\":\"6cf1afdd-7e62-4d76-a034-5e943e2db0ff\",\"name\":\"Split Out\",\"type\":\"n8n-nodes-base.splitOut\",\"position\":[2200,280],\"parameters\":{\"options\":{},\"fieldToSplitOut\":\"audio_features\"},\"typeVersion\":1},{\"id\":\"fc3ab428-40f9-4439-83b6-8ecb125d510f\",\"name\":\"Anthropic Chat Model\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatAnthropic\",\"position\":[4180,1100],\"parameters\":{\"options\":{\"temperature\":0.3,\"maxTokensToSample\":8192}},\"credentials\":{\"anthropicApi\":{\"id\":\"SsGpCc91NlFBaH2I\",\"name\":\"Anthropic account - Bertrand\"}},\"typeVersion\":1.2},{\"id\":\"e712d5c0-5045-4cd2-8324-5cde4fc37b2a\",\"name\":\"Get Playlist\",\"type\":\"n8n-nodes-base.spotify\",\"position\":[1080,-71],\"parameters\":{\"resource\":\"playlist\",\"operation\":\"getUserPlaylists\"},\"credentials\":{\"spotifyOAuth2Api\":{\"id\":\"S9iODAILG9yn19ta\",\"name\":\"Spotify account - Arnaud's\"}},\"typeVersion\":1},{\"id\":\"5d9d2abe-c85f-41a9-bb99-28a1306a8685\",\"name\":\"Get Tracks\",\"type\":\"n8n-nodes-base.spotify\",\"position\":[1040,400],\"parameters\":{\"resource\":\"library\",\"returnAll\":true},\"credentials\":{\"spotifyOAuth2Api\":{\"id\":\"S9iODAILG9yn19ta\",\"name\":\"Spotify account - Arnaud's\"}},\"typeVersion\":1},{\"id\":\"9e5b30cb-db4c-445e-bd82-314740d6af64\",\"name\":\"Structured Output Parser\",\"type\":\"@n8n/n8n-nodes-langchain.outputParserStructured\",\"position\":[4540,1100],\"parameters\":{\"schemaType\":\"manual\",\"inputSchema\":\"{\\n  \\\"$schema\\\": \\\"http://json-schema.org/draft-07/schema#\\\",\\n  \\\"type\\\": \\\"array\\\",\\n  \\\"items\\\": {\\n    \\\"type\\\": \\\"object\\\",\\n    \\\"properties\\\": {\\n      \\\"playlistName\\\": {\\n        \\\"type\\\": \\\"string\\\",\\n        \\\"description\\\": \\\"The name of the playlist\\\"\\n      },\\n      \\\"uri\\\": {\\n        \\\"type\\\": \\\"string\\\",\\n        \\\"description\\\": \\\"The unique identifier for the playlist, in URI format\\\"\\n      },\\n      \\\"trackUris\\\": {\\n        \\\"type\\\": \\\"array\\\",\\n        \\\"items\\\": {\\n          \\\"type\\\": \\\"string\\\",\\n          \\\"description\\\": \\\"The unique identifier for each track in the playlist, in URI format\\\"\\n        },\\n        \\\"description\\\": \\\"A list of track URIs for the playlist\\\",\\n        \\\"maxItems\\\": 1000\\n      }\\n    },\\n    \\\"required\\\": [\\\"playlistName\\\", \\\"uri\\\", \\\"trackUris\\\"],\\n    \\\"additionalProperties\\\": false\\n  }\\n}\\n\"},\"typeVersion\":1.2},{\"id\":\"8ddc9606-d70a-4a94-8dff-9ed17cec378e\",\"name\":\"Playlists informations\",\"type\":\"n8n-nodes-base.set\",\"position\":[1520,-71],\"parameters\":{\"mode\":\"raw\",\"options\":{},\"jsonOutput\":\"={\\n  \\\"playlist_name\\\": \\\"{{ $json.name }}\\\",\\n  \\\"playlist_description\\\": \\\"{{ $json.description }}\\\",\\n  \\\"playlist_spotify_uri\\\": \\\"{{ $json.uri }}\\\"\\n}\\n \"},\"typeVersion\":3.4},{\"id\":\"ec99ed3b-3cd9-4dc2-a7c6-5099eaeea93b\",\"name\":\"Filter my playlist\",\"type\":\"n8n-nodes-base.filter\",\"position\":[1300,-71],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"bad771d7-2f4c-43bb-996a-0e46bbf85231\",\"operator\":{\"name\":\"filter.operator.equals\",\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"={{ $json.owner.display_name }}\",\"rightValue\":\"Arnaud\"}]}},\"typeVersion\":2.2},{\"id\":\"64e57339-2bf2-4dc7-bca7-3de7da80b6eb\",\"name\":\"Split Out1\",\"type\":\"n8n-nodes-base.splitOut\",\"position\":[4700,880],\"parameters\":{\"options\":{},\"fieldToSplitOut\":\"output\"},\"typeVersion\":1},{\"id\":\"924f5b88-9dce-4acc-9ad6-0f25f804fcc5\",\"name\":\"Batch preparation1\",\"type\":\"n8n-nodes-base.code\",\"position\":[5380,880],\"parameters\":{\"jsCode\":\"const items = $input.all();\\nconst result = [];\\n\\nitems.forEach((item) => {\\n  const trackUris = item.json.trackUris;\\n  if (trackUris.length > 100) {\\n    for (let i = 0; i < trackUris.length; i += 100) {\\n      const newItem = { ...item.json, trackUris: trackUris.slice(i, i + 100) };\\n      result.push(newItem);\\n    }\\n  } else {\\n    result.push(item.json);\\n  }\\n});\\n\\nreturn result;\\n\"},\"typeVersion\":2},{\"id\":\"980ef09e-557d-4748-b92a-ceec9dc54a6b\",\"name\":\"Merge\",\"type\":\"n8n-nodes-base.merge\",\"position\":[2400,380],\"parameters\":{\"mode\":\"combine\",\"options\":{\"disableDotNotation\":false},\"advanced\":true,\"joinMode\":\"enrichInput2\",\"mergeByFields\":{\"values\":[{\"field1\":\"id\",\"field2\":\"track_spotify_id\"}]}},\"typeVersion\":3},{\"id\":\"a6149a04-bd65-4e55-8c1b-5e18fd98c2e8\",\"name\":\"Simplify Tracks informations\",\"type\":\"n8n-nodes-base.set\",\"position\":[2620,380],\"parameters\":{\"include\":\"except\",\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"8bd9a8c4-0c95-43b0-8962-0e005504b6ee\",\"name\":\"date_added\",\"type\":\"string\",\"value\":\"={{ $now.format('yyyy-MM-dd') }}\"}]},\"excludeFields\":\"track_spotify_id, external_urls, id, uri, track_href, analysis_url\",\"includeOtherFields\":true},\"typeVersion\":3.4},{\"id\":\"96432403-f15f-4015-8024-72731e18b18d\",\"name\":\"Limit\",\"type\":\"n8n-nodes-base.limit\",\"position\":[2860,240],\"parameters\":{},\"typeVersion\":1},{\"id\":\"3efb9ee3-1955-40eb-9958-a5fb515f30c1\",\"name\":\"Get logged tracks\",\"type\":\"n8n-nodes-base.googleSheets\",\"position\":[3120,240],\"parameters\":{\"options\":{\"dataLocationOnSheet\":{\"values\":{\"range\":\"A:B\",\"rangeDefinition\":\"specifyRangeA1\"}}},\"sheetName\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"gid=0\",\"cachedResultUrl\":\"https://docs.google.com/spreadsheets/d/19VwKRDbsh8uU6xitnTXUjk1u73XCGThzyE8nv1YsP24/edit#gid=0\",\"cachedResultName\":\"tracks listing\"},\"documentId\":{\"__rl\":true,\"mode\":\"url\",\"value\":\"https://docs.google.com/spreadsheets/d/19VwKRDbsh8uU6xitnTXUjk1u73XCGThzyE8nv1YsP24/edit?gid=0#gid=0\"},\"combineFilters\":\"OR\"},\"credentials\":{\"googleSheetsOAuth2Api\":{\"id\":\"8UJ5YBcPU0IOkjEd\",\"name\":\"Google Sheets - Arnaud Growth Perso\"}},\"typeVersion\":4.5},{\"id\":\"58821bc3-254c-46d2-b882-d1995aaf3d46\",\"name\":\"Excluding logged tracks\",\"type\":\"n8n-nodes-base.merge\",\"position\":[3380,360],\"parameters\":{\"mode\":\"combine\",\"options\":{},\"joinMode\":\"keepNonMatches\",\"outputDataFrom\":\"input2\",\"fieldsToMatchString\":\"track_spotify_uri\"},\"typeVersion\":3},{\"id\":\"8a28cd62-9316-487e-a8f7-dd5ed3eab6c8\",\"name\":\"Filter\",\"type\":\"n8n-nodes-base.filter\",\"position\":[5120,880],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"5457225f-104a-4d38-9481-d243ba656358\",\"operator\":{\"type\":\"array\",\"operation\":\"notEmpty\",\"singleValue\":true},\"leftValue\":\"={{ $json.trackUris }}\",\"rightValue\":\"\"}]}},\"typeVersion\":2.2},{\"id\":\"770a42f8-f4e5-44b8-a096-945db7c9f85e\",\"name\":\"Split Out2\",\"type\":\"n8n-nodes-base.splitOut\",\"disabled\":true,\"position\":[5120,520],\"parameters\":{\"include\":\"allOtherFields\",\"options\":{},\"fieldToSplitOut\":\"trackUris\"},\"typeVersion\":1},{\"id\":\"da5c9b03-2ace-40af-9364-c9119eaef7b0\",\"name\":\"Manual Verification\",\"type\":\"n8n-nodes-base.merge\",\"disabled\":true,\"position\":[5380,480],\"parameters\":{\"mode\":\"combine\",\"options\":{},\"advanced\":true,\"joinMode\":\"enrichInput2\",\"mergeByFields\":{\"values\":[{\"field1\":\"track_spotify_uri\",\"field2\":\"trackUris\"}]}},\"typeVersion\":3},{\"id\":\"98b3fca5-5b14-42e4-8e5f-5506643a54bb\",\"name\":\"Spotify\",\"type\":\"n8n-nodes-base.spotify\",\"onError\":\"continueErrorOutput\",\"position\":[5640,880],\"parameters\":{\"id\":\"={{ $json.uri }}\",\"trackID\":\"={{ $json.trackUris.join(\\\",\\\") }}\",\"resource\":\"playlist\",\"additionalFields\":{}},\"credentials\":{\"spotifyOAuth2Api\":{\"id\":\"S9iODAILG9yn19ta\",\"name\":\"Spotify account - Arnaud's\"}},\"retryOnFail\":true,\"typeVersion\":1,\"waitBetweenTries\":5000},{\"id\":\"536f7ed8-d3bf-4c95-8a7a-42f3a2f47e5c\",\"name\":\"Aggregate by 200 tracks\",\"type\":\"n8n-nodes-base.code\",\"position\":[4080,880],\"parameters\":{\"jsCode\":\"const items = $input.all();\\nconst chunkSize = 200;\\nconst result = [];\\n\\nfor (let i = 0; i < items.length; i += chunkSize) {\\n  const chunk = items.slice(i, i + chunkSize).map((item) => item.json);\\n  result.push({json:{chunk}}); // Wrap each chunk in an object with a json property\\n}\\n\\nreturn result;\\n\"},\"typeVersion\":2},{\"id\":\"e590ef66-4fc1-4b4d-a56c-f93db389500e\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-1160,-280],\"parameters\":{\"width\":1055,\"height\":1188.074539731524,\"content\":\"# Monthly Spotify Track Archiving and Playlist Classification\\n\\nThis n8n workflow allows you to automatically archive your monthly Spotify liked tracks in a Google Sheet, along with playlist details and descriptions. Based on this data, Claude 3.5 is used to classify each track into multiple playlists and add them in bulk.\\n\\n## Who is this template for?\\nThis workflow template is perfect for Spotify users who want to systematically archive their listening history and organize their tracks into custom playlists.\\n\\n## What problem does this workflow solve?\\nIt automates the monthly process of tracking, storing, and categorizing Spotify tracks into relevant playlists, helping users maintain well-organized music collections and keep a historical record of their listening habits.\\n\\n## Workflow Overview\\n- **Trigger Options**: Can be initiated manually or on a set schedule.\\n- **Spotify Playlists Retrieval**: Fetches the current playlists and filters them by owner.\\n- **Track Details Collection**: Retrieves information such as track ID and popularity from the user’s library.\\n- **Audio Features Fetching**: Uses Spotify's API to get audio features for each track.\\n- **Data Merging**: Combines track information with their audio features.\\n- **Duplicate Checking**: Filters out tracks that have already been logged in Google Sheets.\\n- **Data Logging**: Archives new tracks into a Google Sheet.\\n- **AI Classification**: Uses an AI model to classify tracks into suitable playlists.\\n- **Playlist Updates**: Adds classified tracks to the corresponding playlists.\\n\\n## Setup Instructions\\n1. **Credentials Setup**:  \\n   Make sure you have valid Spotify OAuth2 and Google Sheets access credentials.\\n2. **Trigger Configuration**:  \\n   Choose between manual or scheduled triggers to start the workflow.\\n3. **Google Sheets Preparation**:  \\n   Set up a Google Sheet with the necessary structure for logging track details.\\n4. **Spotify Playlists Setup**:  \\n   Have a diverse range of playlists and exhaustive description (see example) ready to accommodate different music genres and moods.\\n\\n## Customization Options\\n- **Adjust Playlist Conditions**:  \\n   Modify the AI model’s classification criteria to align with your personal music preferences.\\n- **Enhance Track Analysis**:  \\n   Incorporate additional audio features or external data sources for more refined track categorization.\\n- **Personalize Data Logging**:  \\n   Customize which track attributes to log in Google Sheets based on your archival preferences.\\n- **Configure Scheduling**:  \\n   Set a preferred schedule for periodic track archiving, e.g., monthly or weekly.\\n\\n## Cost Estimate \\nFor 300 tracks, the token usage amounts to approximately 60,000 tokens (58,000 for input and 2,000 for completion), costing around 20 cents with Claude 3.5 Sonnet (as of October 2024).\"},\"typeVersion\":1},{\"id\":\"c6e33534-a923-4a1e-8d40-54c3d39f7352\",\"name\":\"Monthly Trigger\",\"type\":\"n8n-nodes-base.scheduleTrigger\",\"position\":[660,160],\"parameters\":{\"rule\":{\"interval\":[{\"field\":\"months\"}]}},\"typeVersion\":1.2},{\"id\":\"a085a6af-ede4-4e3a-9bf4-4c29e821af35\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1000,-240],\"parameters\":{\"width\":1729.2548791395811,\"height\":349.93537232723713,\"content\":\"**Get & Log Playlists informations**\"},\"typeVersion\":1},{\"id\":\"ad33760b-7fa9-4246-806c-438fdf31247b\",\"name\":\"Get logged playlists\",\"type\":\"n8n-nodes-base.googleSheets\",\"position\":[2000,-171],\"parameters\":{\"options\":{\"dataLocationOnSheet\":{\"values\":{\"rangeDefinition\":\"detectAutomatically\"}}},\"sheetName\":{\"__rl\":true,\"mode\":\"list\",\"value\":1684849334,\"cachedResultUrl\":\"https://docs.google.com/spreadsheets/d/19VwKRDbsh8uU6xitnTXUjk1u73XCGThzyE8nv1YsP24/edit#gid=1684849334\",\"cachedResultName\":\"playslists listing\"},\"documentId\":{\"__rl\":true,\"mode\":\"url\",\"value\":\"https://docs.google.com/spreadsheets/d/19VwKRDbsh8uU6xitnTXUjk1u73XCGThzyE8nv1YsP24/edit?gid=0#gid=0\"},\"combineFilters\":\"OR\"},\"credentials\":{\"googleSheetsOAuth2Api\":{\"id\":\"8UJ5YBcPU0IOkjEd\",\"name\":\"Google Sheets - Arnaud Growth Perso\"}},\"typeVersion\":4.5},{\"id\":\"e2beb78f-227c-4ecf-bf90-377d49050646\",\"name\":\"Log new tracks\",\"type\":\"n8n-nodes-base.googleSheets\",\"position\":[3680,200],\"parameters\":{\"columns\":{\"value\":{},\"schema\":[{\"id\":\"track\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"track\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"artist\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"artist\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"album\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"album\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"track_spotify_id\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"track_spotify_id\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"external_urls\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"external_urls\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"track_popularity\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"track_popularity\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"album_release_date\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"album_release_date\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"danceability\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"danceability\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"energy\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"energy\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"key\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"key\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"loudness\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"loudness\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"mode\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"mode\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"speechiness\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"speechiness\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"acousticness\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"acousticness\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"instrumentalness\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"instrumentalness\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"liveness\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"liveness\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"valence\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"valence\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"tempo\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"tempo\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"type\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"type\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"id\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"id\",\"defaultMatch\":true,\"canBeUsedToMatch\":true},{\"id\":\"uri\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"uri\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"track_href\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"track_href\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"analysis_url\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"analysis_url\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"duration_ms\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"duration_ms\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"time_signature\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"time_signature\",\"defaultMatch\":false,\"canBeUsedToMatch\":true}],\"mappingMode\":\"autoMapInputData\",\"matchingColumns\":[]},\"options\":{\"useAppend\":true},\"operation\":\"append\",\"sheetName\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"gid=0\",\"cachedResultUrl\":\"https://docs.google.com/spreadsheets/d/19VwKRDbsh8uU6xitnTXUjk1u73XCGThzyE8nv1YsP24/edit#gid=0\",\"cachedResultName\":\"tracks listing\"},\"documentId\":{\"__rl\":true,\"mode\":\"url\",\"value\":\"https://docs.google.com/spreadsheets/d/19VwKRDbsh8uU6xitnTXUjk1u73XCGThzyE8nv1YsP24/edit?gid=0#gid=0\"}},\"credentials\":{\"googleSheetsOAuth2Api\":{\"id\":\"8UJ5YBcPU0IOkjEd\",\"name\":\"Google Sheets - Arnaud Growth Perso\"}},\"typeVersion\":4.5},{\"id\":\"e9d311c8-d39c-481d-99dc-c89d360f3217\",\"name\":\"Log new playlists\",\"type\":\"n8n-nodes-base.googleSheets\",\"position\":[2480,-91],\"parameters\":{\"columns\":{\"value\":{},\"schema\":[{\"id\":\"playlist_name\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"playlist_name\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"playlist_description\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"playlist_description\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"playlist_spotify_uri\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"playlist_spotify_uri\",\"defaultMatch\":false,\"canBeUsedToMatch\":true}],\"mappingMode\":\"autoMapInputData\",\"matchingColumns\":[]},\"options\":{\"useAppend\":true},\"operation\":\"append\",\"sheetName\":{\"__rl\":true,\"mode\":\"list\",\"value\":1684849334,\"cachedResultUrl\":\"https://docs.google.com/spreadsheets/d/19VwKRDbsh8uU6xitnTXUjk1u73XCGThzyE8nv1YsP24/edit#gid=1684849334\",\"cachedResultName\":\"playslists listing\"},\"documentId\":{\"__rl\":true,\"mode\":\"url\",\"value\":\"https://docs.google.com/spreadsheets/d/19VwKRDbsh8uU6xitnTXUjk1u73XCGThzyE8nv1YsP24/edit?gid=0#gid=0\"}},\"credentials\":{\"googleSheetsOAuth2Api\":{\"id\":\"8UJ5YBcPU0IOkjEd\",\"name\":\"Google Sheets - Arnaud Growth Perso\"}},\"typeVersion\":4.5},{\"id\":\"0e9dd47b-0bd3-4c8c-84c6-7ef566f41135\",\"name\":\"Excluding logged playlists\",\"type\":\"n8n-nodes-base.merge\",\"position\":[2240,-91],\"parameters\":{\"mode\":\"combine\",\"options\":{},\"joinMode\":\"keepNonMatches\",\"outputDataFrom\":\"input2\",\"fieldsToMatchString\":\"playlist_spotify_uri\"},\"typeVersion\":3},{\"id\":\"7e0f1d5b-d74b-474d-bde2-3966ab51e048\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1000,195.4666080114149],\"parameters\":{\"width\":2831.0439846349473,\"height\":394.4687643158222,\"content\":\"**Get & Log Playlists informations**\"},\"typeVersion\":1},{\"id\":\"b851790c-126a-43bd-a223-0a023d423309\",\"name\":\"Limit2\",\"type\":\"n8n-nodes-base.limit\",\"position\":[1780,-171],\"parameters\":{},\"typeVersion\":1},{\"id\":\"f0ec1751-116a-4d14-b815-39f4ba989e33\",\"name\":\"Classify new tracks\",\"type\":\"n8n-nodes-base.noOp\",\"position\":[3880,460],\"parameters\":{},\"typeVersion\":1},{\"id\":\"38df0ed5-697d-489d-8d0c-2b18c2e017a8\",\"name\":\"Sticky Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[3960,740],\"parameters\":{\"width\":726.2282986582347,\"height\":562.9881279640259,\"content\":\"**AI Classification**\"},\"typeVersion\":1},{\"id\":\"5649c3b6-dc55-488f-9afc-106ac410fae1\",\"name\":\"Sticky Note4\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[5080,760],\"parameters\":{\"width\":858.3555537284071,\"height\":309.3037982292949,\"content\":\"**Update Spotify Playlists**\"},\"typeVersion\":1},{\"id\":\"8410fc7d-64e3-4abf-b035-667945e84d64\",\"name\":\"Sticky Note5\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[5080,340],\"parameters\":{\"width\":578.2457729796415,\"height\":309.3037982292949,\"content\":\"**Manual Verification**\\nWe performed this merge to include the track name, making it easier to verify the AI's output. Adding the track name directly in the machine learning response would double the completion tokens, so it was avoided to keep token usage efficient.\"},\"typeVersion\":1},{\"id\":\"d59c316a-22d4-46f0-b97c-789e8c196ab1\",\"name\":\"Sticky Note6\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-1140,1040],\"parameters\":{\"width\":610.3407699712512,\"height\":922.4081979777811,\"content\":\"### Playlists' Description Examples\\n\\n\\n| Playlist Name           | Playlist Description                                                                                                                                             |\\n|-------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------|\\n| Classique               | Indulge in the timeless beauty of classical music with this refined playlist. From baroque to romantic periods, this collection showcases renowned compositions.   |\\n| Poi                     | Find your flow with this dynamic playlist tailored for poi, staff, and ball juggling. Featuring rhythmic tracks that complement your movements.                   |\\n| Pro Sound               | Boost your productivity and focus with this carefully selected mix of concentration-enhancing music. Ideal for work or study sessions.                           |\\n| ChillySleep             | Drift off to dreamland with this soothing playlist of sleep-inducing tracks. Gentle melodies and ambient sounds create a peaceful atmosphere for restful sleep.  |\\n| To Sing                 | Warm up your vocal cords and sing your heart out with karaoke-friendly tracks. Featuring popular songs, perfect for solo performances or group sing-alongs.      |\\n| 1990s                   | Relive the diverse musical landscape of the 90s with this eclectic mix. From grunge to pop, hip-hop to electronic, this playlist showcases defining genres.       |\\n| 1980s                   | Take a nostalgic trip back to the era of big hair and neon with this 80s playlist. Packed with iconic hits and forgotten gems, capturing the energy of the decade.|\\n| Groove Up               | Elevate your mood and energy with this upbeat playlist. Featuring a mix of feel-good tracks across various genres to lift your spirits and get you moving.       |\\n| Reggae & Dub            | Relax and unwind with the laid-back vibes of reggae and dub. This playlist combines classic reggae tunes with deep, spacious dub tracks for a chilled-out vibe.   |\\n| Psytrance               | Embark on a mind-bending journey with this collection of psychedelic trance tracks. Ideal for late-night dance sessions or intense focus.                        |\\n| Cumbia                  | Sway to the infectious rhythms of Cumbia with this lively playlist. Blending traditional Latin American sounds with modern interpretations for a danceable mix.  |\\n| Funky Groove            | Get your body moving with this collection of funk and disco tracks. Featuring irresistible basslines and catchy rhythms, perfect for dance parties.              |\\n| French Chanson          | Experience the romance and charm of France with this mix of classic and modern French songs, capturing the essence of French musical culture.                    |\\n| Workout Motivation      | Push your limits and power through your exercise routine with this high-energy playlist. From warm-up to cool-down, these tracks will keep you motivated.        |\\n| Cinematic Instrumentals | Immerse yourself in a world of atmospheric sounds with this collection of cinematic instrumental tracks, perfect for focus, relaxation, or contemplation.        |\\n\"},\"typeVersion\":1},{\"id\":\"d43ce92b-3831-4fd5-a59c-f9dcd7f1b8ea\",\"name\":\"Basic LLM Chain - AI Classification\",\"type\":\"@n8n/n8n-nodes-langchain.chainLlm\",\"position\":[4280,880],\"parameters\":{\"text\":\"=#### Tracks to Analyze:\\n<tracks_to_analyze>\\n   {{ JSON.stringify($json.chunk) }}\\n</tracks_to_analyze>\",\"messages\":{\"messageValues\":[{\"message\":\"You are an expert in music classification with extensive knowledge of genres, moods, and various musical elements. Your task is to analyze the provided tracks and generate a **comprehensive and exhaustive classification** to enhance my listening experience.\\n\\n### Process:\\n\\n1. **Identify Playlist Style**: For each of my personal playlist, use the information provided in <playlists_informations>, including the name and description, to understand its purpose and the types of tracks that are most suitable for it. Use this understanding to guide your classification decisions.\\n\\n2. **Identify Track Characteristics**: For each track in <tracks_to_analyze>, even if you don't have the audio, use the track's **title and artist**, along with relevant characteristics (including genre, mood, tempo, instrumentation, lyrical themes, and any other musical features), to infer these characteristics based on your expertise.\\n\\n3. **Playlist Assignment**: For each playlist, identify the most relevant tracks and assign them to the appropriate playlists based on their characteristics. A single track may belong to multiple playlists, so ensure you **exhaustively include it in all relevant categories**.\\n\\n#### Playlist Information:\\n<playlists_informations>\\n   {{ JSON.stringify($('Playlists informations').all()) }}\\n</playlists_informations>\\n\\n### Examples\\n\\nFind below the track input and a sample response for reference.\\n\\n\\n<tracks_to_analyze>\\n[ {\\\"track\\\":\\\"William Tell (Guillaume Tell) Overture: Finale [Arr. for Euphonium by Jorijn Van Hese]\\\",\\\"artist\\\":\\\"Jorijn Van Hese\\\",\\\"album\\\":\\\"William Tell (Guillaume Tell) Overture: Finale [Arr. for Euphonium by Jorijn Van Hese]\\\",\\\"track_spotify_uri\\\":\\\"spotify:track:1I5L8EAVFpTnSAYptTJVrU\\\",\\\"track_popularity\\\":\\\"28\\\",\\\"album_release_date\\\":\\\"2018\\\",\\\"danceability\\\":0.561,\\\"energy\\\":0.236,\\\"key\\\":0,\\\"loudness\\\":-27.926,\\\"mode\\\":1,\\\"speechiness\\\":0.0491,\\\"acousticness\\\":0.995,\\\"instrumentalness\\\":0.934,\\\"liveness\\\":0.121,\\\"valence\\\":0.964,\\\"tempo\\\":102.216,\\\"type\\\":\\\"audio_features\\\",\\\"duration_ms\\\":120080,\\\"time_signature\\\":4,\\\"date_added\\\":\\\"2024-10-27\\\"}, {\\\"track\\\":\\\"Geffen\\\",\\\"artist\\\":\\\"Barnt\\\",\\\"album\\\":\\\"Azari & III Presents - Body Language, Vol. 13\\\",\\\"track_spotify_uri\\\":\\\"spotify:track:7wVKbT4vwRaEEJ7fnu6Ota\\\",\\\"track_popularity\\\":\\\"13\\\",\\\"album_release_date\\\":\\\"2013\\\",\\\"danceability\\\":0.83,\\\"energy\\\":0.355,\\\"key\\\":1,\\\"loudness\\\":-12.172,\\\"mode\\\":1,\\\"speechiness\\\":0.0911,\\\"acousticness\\\":0.00151,\\\"instrumentalness\\\":0.934,\\\"liveness\\\":0.111,\\\"valence\\\":0.129,\\\"tempo\\\":118.947,\\\"type\\\":\\\"audio_features\\\",\\\"duration_ms\\\":486910,\\\"time_signature\\\":4,\\\"date_added\\\":\\\"2024-10-27\\\"}, {\\\"track\\\":\\\"I Wan'na Be Like You (The Monkey Song)\\\",\\\"artist\\\":\\\"Louis Prima\\\",\\\"album\\\":\\\"The Jungle Book\\\",\\\"track_spotify_uri\\\":\\\"spotify:track:2EeVPGHq2I7fjeDfT6LEYX\\\",\\\"track_popularity\\\":\\\"58\\\",\\\"album_release_date\\\":\\\"1997\\\",\\\"danceability\\\":0.746,\\\"energy\\\":0.404,\\\"key\\\":7,\\\"loudness\\\":-15.09,\\\"mode\\\":0,\\\"speechiness\\\":0.0995,\\\"acousticness\\\":0.662,\\\"instrumentalness\\\":0.000238,\\\"liveness\\\":0.281,\\\"valence\\\":0.795,\\\"tempo\\\":96.317,\\\"type\\\":\\\"audio_features\\\",\\\"duration_ms\\\":279453,\\\"time_signature\\\":4,\\\"date_added\\\":\\\"2024-10-27\\\"}, {\\\"track\\\":\\\"Linda Nena\\\",\\\"artist\\\":\\\"Juaneco Y Su Combo\\\",\\\"album\\\":\\\"The Roots of Chicha\\\",\\\"track_spotify_uri\\\":\\\"spotify:track:6QsovprLkdGeE9FSsOjuQA\\\",\\\"track_popularity\\\":\\\"0\\\",\\\"album_release_date\\\":\\\"2007\\\",\\\"danceability\\\":0.707,\\\"energy\\\":0.749,\\\"key\\\":4,\\\"loudness\\\":-6.36,\\\"mode\\\":0,\\\"speechiness\\\":0.0336,\\\"acousticness\\\":0.696,\\\"instrumentalness\\\":0.0000203,\\\"liveness\\\":0.104,\\\"valence\\\":0.97,\\\"tempo\\\":107.552,\\\"type\\\":\\\"audio_features\\\",\\\"duration_ms\\\":225013,\\\"time_signature\\\":4,\\\"date_added\\\":\\\"2024-10-27\\\"}, {\\\"track\\\":\\\"Sonido Amazonico\\\",\\\"artist\\\":\\\"Los Mirlos\\\",\\\"album\\\":\\\"The Roots of Chicha\\\",\\\"track_spotify_uri\\\":\\\"spotify:track:3hH0sVIoIoPOTmMdjmXSob\\\",\\\"track_popularity\\\":\\\"0\\\",\\\"album_release_date\\\":\\\"2007\\\",\\\"danceability\\\":0.883,\\\"energy\\\":0.64,\\\"key\\\":3,\\\"loudness\\\":-6.637,\\\"mode\\\":1,\\\"speechiness\\\":0.0788,\\\"acousticness\\\":0.559,\\\"instrumentalness\\\":0.000408,\\\"liveness\\\":0.176,\\\"valence\\\":0.886,\\\"tempo\\\":100.832,\\\"type\\\":\\\"audio_features\\\",\\\"duration_ms\\\":155000,\\\"time_signature\\\":4,\\\"date_added\\\":\\\"2024-10-27\\\"}, {\\\"track\\\":\\\"Para Elisa\\\",\\\"artist\\\":\\\"Los Destellos\\\",\\\"album\\\":\\\"The Roots of Chicha\\\",\\\"track_spotify_uri\\\":\\\"spotify:track:4Sd525AYAaYuiexGHTcoFy\\\",\\\"track_popularity\\\":\\\"0\\\",\\\"album_release_date\\\":\\\"2007\\\",\\\"danceability\\\":0.69,\\\"energy\\\":0.8,\\\"key\\\":11,\\\"loudness\\\":-11.125,\\\"mode\\\":1,\\\"speechiness\\\":0.0602,\\\"acousticness\\\":0.205,\\\"instrumentalness\\\":0.886,\\\"liveness\\\":0.0531,\\\"valence\\\":0.801,\\\"tempo\\\":113.401,\\\"type\\\":\\\"audio_features\\\",\\\"duration_ms\\\":166507,\\\"time_signature\\\":4,\\\"date_added\\\":\\\"2024-10-27\\\"}, {\\\"track\\\":\\\"Stand By Me\\\",\\\"artist\\\":\\\"Ben E. King\\\",\\\"album\\\":\\\"Don't Play That Song (Mono)\\\",\\\"track_spotify_uri\\\":\\\"spotify:track:3SdTKo2uVsxFblQjpScoHy\\\",\\\"track_popularity\\\":\\\"75\\\",\\\"album_release_date\\\":\\\"1962\\\",\\\"danceability\\\":0.65,\\\"energy\\\":0.306,\\\"key\\\":9,\\\"loudness\\\":-9.443,\\\"mode\\\":1,\\\"speechiness\\\":0.0393,\\\"acousticness\\\":0.57,\\\"instrumentalness\\\":0.00000707,\\\"liveness\\\":0.0707,\\\"valence\\\":0.605,\\\"tempo\\\":118.068,\\\"type\\\":\\\"audio_features\\\",\\\"duration_ms\\\":180056,\\\"time_signature\\\":4,\\\"date_added\\\":\\\"2024-10-27\\\"}, {\\\"track\\\":\\\"One Night in Bangkok\\\",\\\"artist\\\":\\\"Murray Head\\\",\\\"album\\\":\\\"Emotions (My Favourite Songs)\\\",\\\"track_spotify_uri\\\":\\\"spotify:track:6erBowZaW6Ur3vNOWhS2zM\\\",\\\"track_popularity\\\":\\\"58\\\",\\\"album_release_date\\\":\\\"1980\\\",\\\"danceability\\\":0.892,\\\"energy\\\":0.578,\\\"key\\\":10,\\\"loudness\\\":-5.025,\\\"mode\\\":1,\\\"speechiness\\\":0.15,\\\"acousticness\\\":0.112,\\\"instrumentalness\\\":0.000315,\\\"liveness\\\":0.0897,\\\"valence\\\":0.621,\\\"tempo\\\":108.703,\\\"type\\\":\\\"audio_features\\\",\\\"duration_ms\\\":236067,\\\"time_signature\\\":4,\\\"date_added\\\":\\\"2024-10-27\\\"}, {\\\"track\\\":\\\"The Big Tree\\\",\\\"artist\\\":\\\"Stand High Patrol\\\",\\\"album\\\":\\\"Midnight Walkers\\\",\\\"track_spotify_uri\\\":\\\"spotify:track:4ZpqCGtkgPn1Pxsgtmtc8O\\\",\\\"track_popularity\\\":\\\"50\\\",\\\"album_release_date\\\":\\\"2012\\\",\\\"danceability\\\":0.697,\\\"energy\\\":0.392,\\\"key\\\":2,\\\"loudness\\\":-9.713,\\\"mode\\\":1,\\\"speechiness\\\":0.0417,\\\"acousticness\\\":0.259,\\\"instrumentalness\\\":0.0000388,\\\"liveness\\\":0.0956,\\\"valence\\\":0.196,\\\"tempo\\\":167.002,\\\"type\\\":\\\"audio_features\\\",\\\"duration_ms\\\":241120,\\\"time_signature\\\":4,\\\"date_added\\\":\\\"2024-10-27\\\"}, {\\\"track\\\":\\\"Hotel California - 2013 Remaster\\\",\\\"artist\\\":\\\"Eagles\\\",\\\"album\\\":\\\"Hotel California (2013 Remaster)\\\",\\\"track_spotify_uri\\\":\\\"spotify:track:40riOy7x9W7GXjyGp4pjAv\\\",\\\"track_popularity\\\":\\\"82\\\",\\\"album_release_date\\\":\\\"1976\\\",\\\"danceability\\\":0.579,\\\"energy\\\":0.508,\\\"key\\\":2,\\\"loudness\\\":-9.484,\\\"mode\\\":1,\\\"speechiness\\\":0.027,\\\"acousticness\\\":0.00574,\\\"instrumentalness\\\":0.000494,\\\"liveness\\\":0.0575,\\\"valence\\\":0.609,\\\"tempo\\\":147.125,\\\"type\\\":\\\"audio_features\\\",\\\"duration_ms\\\":391376,\\\"time_signature\\\":4,\\\"date_added\\\":\\\"2024-10-27\\\"} ]\\n</tracks_to_analyze>\\n\\nOutput : \\n[\\n    {\\n        \\\"playlistName\\\": \\\"Classique\\\",\\n        \\\"uri\\\": \\\"spotify:playlist:1AASnV7pZApr6JWCAWg94R\\\",\\n        \\\"tracks\\\": [\\n            {\\n                \\\"trackName\\\": \\\"William Tell (Guillaume Tell) Overture: Finale [Arr. for Euphonium by Jorijn Van Hese]\\\",\\n                \\\"trackUri\\\": \\\"spotify:track:1I5L8EAVFpTnSAYptTJVrU\\\"\\n            }\\n        ]\\n    },\\n    {\\n        \\\"playlistName\\\": \\\"Pro Sound\\\",\\n        \\\"uri\\\": \\\"spotify:playlist:7G27Ccw1vZdWt7uYrUMLwk\\\",\\n        \\\"tracks\\\": [\\n            {\\n                \\\"trackName\\\": \\\"Geffen\\\",\\n                \\\"trackUri\\\": \\\"spotify:track:7wVKbT4vwRaEEJ7fnu6Ota\\\"\\n            }\\n        ]\\n    },\\n    {\\n        \\\"playlistName\\\": \\\"To Sing\\\",\\n        \\\"uri\\\": \\\"spotify:playlist:7ts0Ccxw5UijIO8zQ8YJqh\\\",\\n        \\\"tracks\\\": [\\n            {\\n                \\\"trackName\\\": \\\"I Wan'na Be Like You (The Monkey Song)\\\",\\n                \\\"trackUri\\\": \\\"spotify:track:2EeVPGHq2I7fjeDfT6LEYX\\\"\\n            },\\n            {\\n                \\\"trackName\\\": \\\"Stand By Me\\\",\\n                \\\"trackUri\\\": \\\"spotify:track:3SdTKo2uVsxFblQjpScoHy\\\"\\n            },\\n            {\\n                \\\"trackName\\\": \\\"One Night in Bangkok\\\",\\n                \\\"trackUri\\\": \\\"spotify:track:6erBowZaW6Ur3vNOWhS2zM\\\"\\n            },\\n            {\\n                \\\"trackName\\\": \\\"Hotel California - 2013 Remaster\\\",\\n                \\\"trackUri\\\": \\\"spotify:track:40riOy7x9W7GXjyGp4pjAv\\\"\\n            }\\n        ]\\n    },\\n    {\\n        \\\"playlistName\\\": \\\"1980s\\\",\\n        \\\"uri\\\": \\\"spotify:playlist:6DqSzwNT9v7eKE3hbPAQtM\\\",\\n        \\\"tracks\\\": [\\n            {\\n                \\\"trackName\\\": \\\"One Night in Bangkok\\\",\\n                \\\"trackUri\\\": \\\"spotify:track:6erBowZaW6Ur3vNOWhS2zM\\\"\\n            }\\n        ]\\n    },\\n    {\\n        \\\"playlistName\\\": \\\"Groove Up\\\",\\n        \\\"uri\\\": \\\"spotify:playlist:4rBZMQPf0u6D5FDB82LjHb\\\",\\n        \\\"tracks\\\": [\\n            {\\n                \\\"trackName\\\": \\\"I Wan'na Be Like You (The Monkey Song)\\\",\\n                \\\"trackUri\\\": \\\"spotify:track:2EeVPGHq2I7fjeDfT6LEYX\\\"\\n            },\\n            {\\n                \\\"trackName\\\": \\\"Stand By Me\\\",\\n                \\\"trackUri\\\": \\\"spotify:track:3SdTKo2uVsxFblQjpScoHy\\\"\\n            }\\n        ]\\n    },\\n    {\\n        \\\"playlistName\\\": \\\"Reggae & Dub\\\",\\n        \\\"uri\\\": \\\"spotify:playlist:60khtG2acFWcFQUIGWrPW6\\\",\\n        \\\"tracks\\\": [\\n            {\\n                \\\"trackName\\\": \\\"The Big Tree\\\",\\n                \\\"trackUri\\\": \\\"spotify:track:4ZpqCGtkgPn1Pxsgtmtc8O\\\"\\n            }\\n        ]\\n    },\\n    {\\n        \\\"playlistName\\\": \\\"Cumbia\\\",\\n        \\\"uri\\\": \\\"spotify:playlist:1SwaCdO1tS2BbF8IL3WwXO\\\",\\n        \\\"tracks\\\": [\\n            {\\n                \\\"trackName\\\": \\\"Linda Nena\\\",\\n                \\\"trackUri\\\": \\\"spotify:track:6QsovprLkdGeE9FSsOjuQA\\\"\\n            },\\n            {\\n                \\\"trackName\\\": \\\"Sonido Amazonico\\\",\\n                \\\"trackUri\\\": \\\"spotify:track:3hH0sVIoIoPOTmMdjmXSob\\\"\\n            },\\n            {\\n                \\\"trackName\\\": \\\"Para Elisa\\\",\\n                \\\"trackUri\\\": \\\"spotify:track:4Sd525AYAaYuiexGHTcoFy\\\"\\n            }\\n        ]\\n    },\\n    {\\n        \\\"playlistName\\\": \\\"Funky Groove\\\",\\n        \\\"uri\\\": \\\"spotify:playlist:7jbAj4iensK9FEWsPUez67\\\",\\n        \\\"tracks\\\": [\\n            {\\n                \\\"trackName\\\": \\\"I Wan'na Be Like You (The Monkey Song)\\\",\\n                \\\"trackUri\\\": \\\"spotify:track:2EeVPGHq2I7fjeDfT6LEYX\\\"\\n            },\\n            {\\n                \\\"trackName\\\": \\\"Stand By Me\\\",\\n                \\\"trackUri\\\": \\\"spotify:track:3SdTKo2uVsxFblQjpScoHy\\\"\\n            }\\n        ]\\n    }\\n]\\n\\n### Output Requirements:\\n\\n1. **Exhaustiveness**: Ensure that at least **80% of the tracks** are categorized into playlists. Be thorough in your analysis to leave no relevant tracks unclassified.\\n\\n2. **Step-by-Step Approach**:\\n   - **Think step by step** when classifying tracks, starting with a detailed analysis of their characteristics.\\n   - **Review each playlist one by one**, assigning tracks based on their attributes to ensure a comprehensive and accurate classification.\\n\\n3. **Avoid Duplicates**: Do not include the same track more than once in the output unless it belongs to multiple playlists. Each track should appear only once in each playlist's list of tracks.\\n\\n4. **Only Use Provided Tracks & Playlists**: Classify tracks exclusively from the given list and assign them to the specified playlists. Do not include any tracks or playlists that are not part of the provided data.\\n\\n### Output Format:\\n\\nReturn the classification results in the following JSON structure, ensuring that the output is clear and well-organized.\\n\\n\"}]},\"promptType\":\"define\",\"hasOutputParser\":true},\"typeVersion\":1.4}],\"pinData\":{},\"connections\":{\"Limit\":{\"main\":[[{\"node\":\"Get logged tracks\",\"type\":\"main\",\"index\":0}]]},\"Merge\":{\"main\":[[{\"node\":\"Simplify Tracks informations\",\"type\":\"main\",\"index\":0}]]},\"Filter\":{\"main\":[[{\"node\":\"Batch preparation1\",\"type\":\"main\",\"index\":0}]]},\"Limit2\":{\"main\":[[{\"node\":\"Get logged playlists\",\"type\":\"main\",\"index\":0}]]},\"Split Out\":{\"main\":[[{\"node\":\"Merge\",\"type\":\"main\",\"index\":0}]]},\"Get Tracks\":{\"main\":[[{\"node\":\"Retrieve relevant info\",\"type\":\"main\",\"index\":0}]]},\"Split Out1\":{\"main\":[[{\"node\":\"Split Out2\",\"type\":\"main\",\"index\":0},{\"node\":\"Filter\",\"type\":\"main\",\"index\":0}]]},\"Split Out2\":{\"main\":[[{\"node\":\"Manual Verification\",\"type\":\"main\",\"index\":1}]]},\"Get Playlist\":{\"main\":[[{\"node\":\"Filter my playlist\",\"type\":\"main\",\"index\":0}]]},\"Monthly Trigger\":{\"main\":[[{\"node\":\"Get Playlist\",\"type\":\"main\",\"index\":0},{\"node\":\"Get Tracks\",\"type\":\"main\",\"index\":0}]]},\"Batch preparation\":{\"main\":[[{\"node\":\"Get Track details\",\"type\":\"main\",\"index\":0}]]},\"Get Track details\":{\"main\":[[{\"node\":\"Split Out\",\"type\":\"main\",\"index\":0}]]},\"Get logged tracks\":{\"main\":[[{\"node\":\"Excluding logged tracks\",\"type\":\"main\",\"index\":0}]]},\"Batch preparation1\":{\"main\":[[{\"node\":\"Spotify\",\"type\":\"main\",\"index\":0}]]},\"Filter my playlist\":{\"main\":[[{\"node\":\"Playlists informations\",\"type\":\"main\",\"index\":0}]]},\"Classify new tracks\":{\"main\":[[{\"node\":\"Aggregate by 200 tracks\",\"type\":\"main\",\"index\":0},{\"node\":\"Manual Verification\",\"type\":\"main\",\"index\":0}]]},\"Anthropic Chat Model\":{\"ai_languageModel\":[[{\"node\":\"Basic LLM Chain - AI Classification\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"Get logged playlists\":{\"main\":[[{\"node\":\"Excluding logged playlists\",\"type\":\"main\",\"index\":0}]]},\"Playlists informations\":{\"main\":[[{\"node\":\"Excluding logged playlists\",\"type\":\"main\",\"index\":1},{\"node\":\"Limit2\",\"type\":\"main\",\"index\":0}]]},\"Retrieve relevant info\":{\"main\":[[{\"node\":\"Batch preparation\",\"type\":\"main\",\"index\":0},{\"node\":\"Merge\",\"type\":\"main\",\"index\":1}]]},\"Aggregate by 200 tracks\":{\"main\":[[{\"node\":\"Basic LLM Chain - AI Classification\",\"type\":\"main\",\"index\":0}]]},\"Excluding logged tracks\":{\"main\":[[{\"node\":\"Log new tracks\",\"type\":\"main\",\"index\":0},{\"node\":\"Classify new tracks\",\"type\":\"main\",\"index\":0}]]},\"Structured Output Parser\":{\"ai_outputParser\":[[{\"node\":\"Basic LLM Chain - AI Classification\",\"type\":\"ai_outputParser\",\"index\":0}]]},\"Excluding logged playlists\":{\"main\":[[{\"node\":\"Log new playlists\",\"type\":\"main\",\"index\":0}]]},\"Simplify Tracks informations\":{\"main\":[[{\"node\":\"Limit\",\"type\":\"main\",\"index\":0},{\"node\":\"Excluding logged tracks\",\"type\":\"main\",\"index\":1}]]},\"Basic LLM Chain - AI Classification\":{\"main\":[[{\"node\":\"Split Out1\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "# Monthly Spotify Track Archiving and Playlist Classification\n\nThis n8n workflow allows you to automatically archive your monthly Spotify liked tracks in a Google Sheet, along with playlist details and descriptions. Based on this data, Claude 3.5 is used to classify each track into multiple playlists and add them in bulk.\n\n## Who is this template for?\n\nThis workflow template is perfect for Spotify users who want to systematically archive their listening history and organize their tracks into custom playlists.\n\n## What problem does this workflow solve?\n\nIt automates the monthly process of tracking, storing, and categorizing Spotify tracks into relevant playlists, helping users maintain well-organized music collections and keep a historical record of their listening habits.\n\n## Workflow Overview\n\n  * **Trigger Options** : Can be initiated manually or on a set schedule.\n  * **Spotify Playlists Retrieval** : Fetches the current playlists and filters them by owner.\n  * **Track Details Collection** : Retrieves information such as track ID and popularity from the user’s library.\n  * **Audio Features Fetching** : Uses Spotify's API to get audio features for each track.\n  * **Data Merging** : Combines track information with their audio features.\n  * **Duplicate Checking** : Filters out tracks that have already been logged in Google Sheets.\n  * **Data Logging** : Archives new tracks into a Google Sheet.\n  * **AI Classification** : Uses an AI model to classify tracks into suitable playlists.\n  * **Playlist Updates** : Adds classified tracks to the corresponding playlists.\n\n\n\n## Setup Instructions\n\n  1. **Credentials Setup** :  \nMake sure you have valid Spotify OAuth2 and Google Sheets access credentials.\n  2. **Trigger Configuration** :  \nChoose between manual or scheduled triggers to start the workflow.\n  3. **Google Sheets Preparation** :  \nSet up a Google Sheet with the necessary structure for logging track details.\n  4. **Spotify Playlists Setup** :  \nHave a diverse range of playlists and exhaustive description (see example) ready to accommodate different music genres and moods.\n\n\n\n## Customization Options\n\n  * **Adjust Playlist Conditions** :  \nModify the AI model’s classification criteria to align with your personal music preferences.\n  * **Enhance Track Analysis** :  \nIncorporate additional audio features or external data sources for more refined track categorization.\n  * **Personalize Data Logging** :  \nCustomize which track attributes to log in Google Sheets based on your archival preferences.\n  * **Configure Scheduling** :  \nSet a preferred schedule for periodic track archiving, e.g., monthly or weekly.\n\n\n\n## Cost Estimate\n\nFor 300 tracks, the token usage amounts to approximately 60,000 tokens (58,000 for input and 2,000 for completion), costing around 20 cents with Claude 3.5 Sonnet (as of October 2024).\n\n### Playlists' Description Examples\n\nPlaylist Name | Playlist Description  \n---|---  \nClassique | Indulge in the timeless beauty of classical music with this refined playlist. From baroque to romantic periods, this collection showcases renowned compositions.  \nPoi | Find your flow with this dynamic playlist tailored for poi, staff, and ball juggling. Featuring rhythmic tracks that complement your movements.  \nPro Sound | Boost your productivity and focus with this carefully selected mix of concentration-enhancing music. Ideal for work or study sessions.  \nChillySleep | Drift off to dreamland with this soothing playlist of sleep-inducing tracks. Gentle melodies and ambient sounds create a peaceful atmosphere for restful sleep.  \nTo Sing | Warm up your vocal cords and sing your heart out with karaoke-friendly tracks. Featuring popular songs, perfect for solo performances or group sing-alongs.  \n1990s | Relive the diverse musical landscape of the 90s with this eclectic mix. From grunge to pop, hip-hop to electronic, this playlist showcases defining genres.  \n1980s | Take a nostalgic trip back to the era of big hair and neon with this 80s playlist. Packed with iconic hits and forgotten gems, capturing the energy of the decade.  \nGroove Up | Elevate your mood and energy with this upbeat playlist. Featuring a mix of feel-good tracks across various genres to lift your spirits and get you moving.  \nReggae & Dub | Relax and unwind with the laid-back vibes of reggae and dub. This playlist combines classic reggae tunes with deep, spacious dub tracks for a chilled-out vibe.  \nPsytrance | Embark on a mind-bending journey with this collection of psychedelic trance tracks. Ideal for late-night dance sessions or intense focus.  \nCumbia | Sway to the infectious rhythms of Cumbia with this lively playlist. Blending traditional Latin American sounds with modern interpretations for a danceable mix.  \nFunky Groove | Get your body moving with this collection of funk and disco tracks. Featuring irresistible basslines and catchy rhythms, perfect for dance parties.  \nFrench Chanson | Experience the romance and charm of France with this mix of classic and modern French songs, capturing the essence of French musical culture.  \nWorkout Motivation | Push your limits and power through your exercise routine with this high-energy playlist. From warm-up to cool-down, these tracks will keep you motivated.  \nCinematic Instrumentals | Immerse yourself in a world of atmospheric sounds with this collection of cinematic instrumental tracks, perfect for focus, relaxation, or contemplation.\n",
  "readme_html": "<!--[--><div data-v-006f9244=\"\"><h1>Monthly Spotify Track Archiving and Playlist Classification</h1>\n<p>This n8n workflow allows you to automatically archive your monthly Spotify liked tracks in a Google Sheet, along with playlist details and descriptions. Based on this data, Claude 3.5 is used to classify each track into multiple playlists and add them in bulk.</p>\n<h2>Who is this template for?</h2>\n<p>This workflow template is perfect for Spotify users who want to systematically archive their listening history and organize their tracks into custom playlists.</p>\n<h2>What problem does this workflow solve?</h2>\n<p>It automates the monthly process of tracking, storing, and categorizing Spotify tracks into relevant playlists, helping users maintain well-organized music collections and keep a historical record of their listening habits.</p>\n<h2>Workflow Overview</h2>\n<ul>\n<li><strong>Trigger Options</strong>: Can be initiated manually or on a set schedule.</li>\n<li><strong>Spotify Playlists Retrieval</strong>: Fetches the current playlists and filters them by owner.</li>\n<li><strong>Track Details Collection</strong>: Retrieves information such as track ID and popularity from the user’s library.</li>\n<li><strong>Audio Features Fetching</strong>: Uses Spotify's API to get audio features for each track.</li>\n<li><strong>Data Merging</strong>: Combines track information with their audio features.</li>\n<li><strong>Duplicate Checking</strong>: Filters out tracks that have already been logged in Google Sheets.</li>\n<li><strong>Data Logging</strong>: Archives new tracks into a Google Sheet.</li>\n<li><strong>AI Classification</strong>: Uses an AI model to classify tracks into suitable playlists.</li>\n<li><strong>Playlist Updates</strong>: Adds classified tracks to the corresponding playlists.</li>\n</ul>\n<h2>Setup Instructions</h2>\n<ol>\n<li><strong>Credentials Setup</strong>:<br>\nMake sure you have valid Spotify OAuth2 and Google Sheets access credentials.</li>\n<li><strong>Trigger Configuration</strong>:<br>\nChoose between manual or scheduled triggers to start the workflow.</li>\n<li><strong>Google Sheets Preparation</strong>:<br>\nSet up a Google Sheet with the necessary structure for logging track details.</li>\n<li><strong>Spotify Playlists Setup</strong>:<br>\nHave a diverse range of playlists and exhaustive description (see example) ready to accommodate different music genres and moods.</li>\n</ol>\n<h2>Customization Options</h2>\n<ul>\n<li><strong>Adjust Playlist Conditions</strong>:<br>\nModify the AI model’s classification criteria to align with your personal music preferences.</li>\n<li><strong>Enhance Track Analysis</strong>:<br>\nIncorporate additional audio features or external data sources for more refined track categorization.</li>\n<li><strong>Personalize Data Logging</strong>:<br>\nCustomize which track attributes to log in Google Sheets based on your archival preferences.</li>\n<li><strong>Configure Scheduling</strong>:<br>\nSet a preferred schedule for periodic track archiving, e.g., monthly or weekly.</li>\n</ul>\n<h2>Cost Estimate</h2>\n<p>For 300 tracks, the token usage amounts to approximately 60,000 tokens (58,000 for input and 2,000 for completion), costing around 20 cents with Claude 3.5 Sonnet (as of October 2024).</p>\n<h3>Playlists' Description Examples</h3>\n<table>\n<thead>\n<tr>\n<th>Playlist Name</th>\n<th>Playlist Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Classique</td>\n<td>Indulge in the timeless beauty of classical music with this refined playlist. From baroque to romantic periods, this collection showcases renowned compositions.</td>\n</tr>\n<tr>\n<td>Poi</td>\n<td>Find your flow with this dynamic playlist tailored for poi, staff, and ball juggling. Featuring rhythmic tracks that complement your movements.</td>\n</tr>\n<tr>\n<td>Pro Sound</td>\n<td>Boost your productivity and focus with this carefully selected mix of concentration-enhancing music. Ideal for work or study sessions.</td>\n</tr>\n<tr>\n<td>ChillySleep</td>\n<td>Drift off to dreamland with this soothing playlist of sleep-inducing tracks. Gentle melodies and ambient sounds create a peaceful atmosphere for restful sleep.</td>\n</tr>\n<tr>\n<td>To Sing</td>\n<td>Warm up your vocal cords and sing your heart out with karaoke-friendly tracks. Featuring popular songs, perfect for solo performances or group sing-alongs.</td>\n</tr>\n<tr>\n<td>1990s</td>\n<td>Relive the diverse musical landscape of the 90s with this eclectic mix. From grunge to pop, hip-hop to electronic, this playlist showcases defining genres.</td>\n</tr>\n<tr>\n<td>1980s</td>\n<td>Take a nostalgic trip back to the era of big hair and neon with this 80s playlist. Packed with iconic hits and forgotten gems, capturing the energy of the decade.</td>\n</tr>\n<tr>\n<td>Groove Up</td>\n<td>Elevate your mood and energy with this upbeat playlist. Featuring a mix of feel-good tracks across various genres to lift your spirits and get you moving.</td>\n</tr>\n<tr>\n<td>Reggae &amp; Dub</td>\n<td>Relax and unwind with the laid-back vibes of reggae and dub. This playlist combines classic reggae tunes with deep, spacious dub tracks for a chilled-out vibe.</td>\n</tr>\n<tr>\n<td>Psytrance</td>\n<td>Embark on a mind-bending journey with this collection of psychedelic trance tracks. Ideal for late-night dance sessions or intense focus.</td>\n</tr>\n<tr>\n<td>Cumbia</td>\n<td>Sway to the infectious rhythms of Cumbia with this lively playlist. Blending traditional Latin American sounds with modern interpretations for a danceable mix.</td>\n</tr>\n<tr>\n<td>Funky Groove</td>\n<td>Get your body moving with this collection of funk and disco tracks. Featuring irresistible basslines and catchy rhythms, perfect for dance parties.</td>\n</tr>\n<tr>\n<td>French Chanson</td>\n<td>Experience the romance and charm of France with this mix of classic and modern French songs, capturing the essence of French musical culture.</td>\n</tr>\n<tr>\n<td>Workout Motivation</td>\n<td>Push your limits and power through your exercise routine with this high-energy playlist. From warm-up to cool-down, these tracks will keep you motivated.</td>\n</tr>\n<tr>\n<td>Cinematic Instrumentals</td>\n<td>Immerse yourself in a world of atmospheric sounds with this collection of cinematic instrumental tracks, perfect for focus, relaxation, or contemplation.</td>\n</tr>\n</tbody>\n</table>\n</div><!--]-->",
  "readme_zh": "# Monthly Spotify Track Archiving and Playlist Classification\n\nThis n8n workflow allows you to automatically archive your monthly Spotify liked tracks in a Google Sheet, along with playlist details and descriptions. Based on this data, Claude 3.5 is used to classify each track into multiple playlists and add them in bulk.\n\n## Who is this template for?\n\nThis workflow template is perfect for Spotify users who want to systematically archive their listening history and organize their tracks into custom playlists.\n\n## What problem does this workflow solve?\n\nIt automates the monthly process of tracking, storing, and categorizing Spotify tracks into relevant playlists, helping users maintain well-organized music collections and keep a historical record of their listening habits.\n\n## Workflow Overview\n\n  * **Trigger Options** : Can be initiated manually or on a set schedule.\n  * **Spotify Playlists Retrieval** : Fetches the current playlists and filters them by owner.\n  * **Track Details Collection** : Retrieves information such as track ID and popularity from the user’s library.\n  * **Audio Features Fetching** : Uses Spotify's API to get audio features for each track.\n  * **Data Merging** : Combines track information with their audio features.\n  * **Duplicate Checking** : Filters out tracks that have already been logged in Google Sheets.\n  * **Data Logging** : Archives new tracks into a Google Sheet.\n  * **AI Classification** : Uses an AI model to classify tracks into suitable playlists.\n  * **Playlist Updates** : Adds classified tracks to the corresponding playlists.\n\n\n\n## Setup Instructions\n\n  1. **Credentials Setup** :  \nMake sure you have valid Spotify OAuth2 and Google Sheets access credentials.\n  2. **Trigger Configuration** :  \nChoose between manual or scheduled triggers to start the workflow.\n  3. **Google Sheets Preparation** :  \nSet up a Google Sheet with the necessary structure for logging track details.\n  4. **Spotify Playlists Setup** :  \nHave a diverse range of playlists and exhaustive description (see example) ready to accommodate different music genres and moods.\n\n\n\n## Customization Options\n\n  * **Adjust Playlist Conditions** :  \nModify the AI model’s classification criteria to align with your personal music preferences.\n  * **Enhance Track Analysis** :  \nIncorporate additional audio features or external data sources for more refined track categorization.\n  * **Personalize Data Logging** :  \nCustomize which track attributes to log in Google Sheets based on your archival preferences.\n  * **Configure Scheduling** :  \nSet a preferred schedule for periodic track archiving, e.g., monthly or weekly.\n\n\n\n## Cost Estimate\n\nFor 300 tracks, the token usage amounts to approximately 60,000 tokens (58,000 for input and 2,000 for completion), costing around 20 cents with Claude 3.5 Sonnet (as of October 2024).\n\n### Playlists' Description Examples\n\nPlaylist Name | Playlist Description  \n---|---  \nClassique | Indulge in the timeless beauty of classical music with this refined playlist. From baroque to romantic periods, this collection showcases renowned compositions.  \nPoi | Find your flow with this dynamic playlist tailored for poi, staff, and ball juggling. Featuring rhythmic tracks that complement your movements.  \nPro Sound | Boost your productivity and focus with this carefully selected mix of concentration-enhancing music. Ideal for work or study sessions.  \nChillySleep | Drift off to dreamland with this soothing playlist of sleep-inducing tracks. Gentle melodies and ambient sounds create a peaceful atmosphere for restful sleep.  \nTo Sing | Warm up your vocal cords and sing your heart out with karaoke-friendly tracks. Featuring popular songs, perfect for solo performances or group sing-alongs.  \n1990s | Relive the diverse musical landscape of the 90s with this eclectic mix. From grunge to pop, hip-hop to electronic, this playlist showcases defining genres.  \n1980s | Take a nostalgic trip back to the era of big hair and neon with this 80s playlist. Packed with iconic hits and forgotten gems, capturing the energy of the decade.  \nGroove Up | Elevate your mood and energy with this upbeat playlist. Featuring a mix of feel-good tracks across various genres to lift your spirits and get you moving.  \nReggae & Dub | Relax and unwind with the laid-back vibes of reggae and dub. This playlist combines classic reggae tunes with deep, spacious dub tracks for a chilled-out vibe.  \nPsytrance | Embark on a mind-bending journey with this collection of psychedelic trance tracks. Ideal for late-night dance sessions or intense focus.  \nCumbia | Sway to the infectious rhythms of Cumbia with this lively playlist. Blending traditional Latin American sounds with modern interpretations for a danceable mix.  \nFunky Groove | Get your body moving with this collection of funk and disco tracks. Featuring irresistible basslines and catchy rhythms, perfect for dance parties.  \nFrench Chanson | Experience the romance and charm of France with this mix of classic and modern French songs, capturing the essence of French musical culture.  \nWorkout Motivation | Push your limits and power through your exercise routine with this high-energy playlist. From warm-up to cool-down, these tracks will keep you motivated.  \nCinematic Instrumentals | Immerse yourself in a world of atmospheric sounds with this collection of cinematic instrumental tracks, perfect for focus, relaxation, or contemplation.\n",
  "title_zh": "月度Spotify曲目归档与播放列表分类",
  "publish_date_absolute": "2024-10-30",
  "publish_date_zh": "最后更新于6个月前",
  "workflow_json_zh": "{\n  \"meta\": {\n    \"instanceId\": \"8e95de061dd3893a50b8b4c150c8084a7848fb1df63f53533941b7c91a8ab996\"\n  },\n  \"nodes\": [\n    {\n      \"id\": \"6325369f-5881-4e4e-b71b-510a64b236ef\",\n      \"name\": \"Retrieve relevant info\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        1260,\n        400\n      ],\n      \"parameters\": {\n        \"mode\": \"raw\",\n        \"options\": {},\n        \"jsonOutput\": \"={\\n\\\"track\\\" : \\\"{{ $json.track.name.replaceAll('\\\"',\\\"'\\\") }}\\\",\\n\\\"artist\\\":  \\\"{{ $json.track.artists[0].name }}\\\",\\n\\\"album\\\" :\\\"{{ $json.track.album.name }}\\\",\\n\\\"track_spotify_uri\\\" : \\\"{{ $json.track.uri }}\\\",\\n\\\"track_spotify_id\\\" : \\\"{{ $json.track.id }}\\\",\\n\\\"external_urls\\\": \\\"{{ $json.track.external_urls.spotify }}\\\",\\n\\\"track_popularity\\\"  : \\\"{{ $json.track.popularity }}\\\",\\n\\\"album_release_date\\\" : \\\"{{ $json.track.album.release_date.toDateTime().year }}\\\"\\n}\"\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"2252fe16-6ee7-4fbe-b74e-d9bdcc7ad708\",\n      \"name\": \"Batch preparation\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        1560,\n        280\n      ],\n      \"parameters\": {\n        \"jsCode\": \"const items = $input.all();\\nconst trackSpotifyIds = items.map((item) => item?.json?.track_spotify_id);\\n\\nconst aggregatedItems = [];\\nfor (let i = 0; i < trackSpotifyIds.length; i += 100) {\\n  aggregatedItems.push({\\n    json: {\\n      trackSpotifyIds: trackSpotifyIds.slice(i, i + 100),\\n    },\\n  });\\n}\\n\\nreturn aggregatedItems;\\n\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"83c181f8-ed18-41d7-8c7e-26b0dd320083\",\n      \"name\": \"Get Track details\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1980,\n        280\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.spotify.com/v1/audio-features\",\n        \"options\": {},\n        \"sendQuery\": true,\n        \"authentication\": \"predefinedCredentialType\",\n        \"queryParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"ids\",\n              \"value\": \"={{ $json.trackSpotifyIds.join(\\\",\\\")}}\"\n            }\n          ]\n        },\n        \"nodeCredentialType\": \"spotifyOAuth2Api\"\n      },\n      \"credentials\": {\n        \"spotifyOAuth2Api\": {\n          \"id\": \"S9iODAILG9yn19ta\",\n          \"name\": \"Spotify account - Arnaud's\"\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"6cf1afdd-7e62-4d76-a034-5e943e2db0ff\",\n      \"name\": \"Split Out\",\n      \"type\": \"n8n-nodes-base.splitOut\",\n      \"position\": [\n        2200,\n        280\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"fieldToSplitOut\": \"audio_features\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"fc3ab428-40f9-4439-83b6-8ecb125d510f\",\n      \"name\": \"Anthropic Chat Model\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatAnthropic\",\n      \"position\": [\n        4180,\n        1100\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"temperature\": 0.3,\n          \"maxTokensToSample\": 8192\n        }\n      },\n      \"credentials\": {\n        \"anthropicApi\": {\n          \"id\": \"SsGpCc91NlFBaH2I\",\n          \"name\": \"Anthropic account - Bertrand\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"e712d5c0-5045-4cd2-8324-5cde4fc37b2a\",\n      \"name\": \"Get Playlist\",\n      \"type\": \"n8n-nodes-base.spotify\",\n      \"position\": [\n        1080,\n        -71\n      ],\n      \"parameters\": {\n        \"resource\": \"playlist\",\n        \"operation\": \"getUserPlaylists\"\n      },\n      \"credentials\": {\n        \"spotifyOAuth2Api\": {\n          \"id\": \"S9iODAILG9yn19ta\",\n          \"name\": \"Spotify account - Arnaud's\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"5d9d2abe-c85f-41a9-bb99-28a1306a8685\",\n      \"name\": \"Get Tracks\",\n      \"type\": \"n8n-nodes-base.spotify\",\n      \"position\": [\n        1040,\n        400\n      ],\n      \"parameters\": {\n        \"resource\": \"library\",\n        \"returnAll\": true\n      },\n      \"credentials\": {\n        \"spotifyOAuth2Api\": {\n          \"id\": \"S9iODAILG9yn19ta\",\n          \"name\": \"Spotify account - Arnaud's\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"9e5b30cb-db4c-445e-bd82-314740d6af64\",\n      \"name\": \"Structured Output Parser\",\n      \"type\": \"@n8n/n8n-nodes-langchain.outputParserStructured\",\n      \"position\": [\n        4540,\n        1100\n      ],\n      \"parameters\": {\n        \"schemaType\": \"manual\",\n        \"inputSchema\": \"{\\n  \\\"$schema\\\": \\\"http://json-schema.org/draft-07/schema#\\\",\\n  \\\"type\\\": \\\"array\\\",\\n  \\\"items\\\": {\\n    \\\"type\\\": \\\"object\\\",\\n    \\\"properties\\\": {\\n      \\\"playlistName\\\": {\\n        \\\"type\\\": \\\"string\\\",\\n        \\\"description\\\": \\\"The name of the playlist\\\"\\n      },\\n      \\\"uri\\\": {\\n        \\\"type\\\": \\\"string\\\",\\n        \\\"description\\\": \\\"The unique identifier for the playlist, in URI format\\\"\\n      },\\n      \\\"trackUris\\\": {\\n        \\\"type\\\": \\\"array\\\",\\n        \\\"items\\\": {\\n          \\\"type\\\": \\\"string\\\",\\n          \\\"description\\\": \\\"The unique identifier for each track in the playlist, in URI format\\\"\\n        },\\n        \\\"description\\\": \\\"A list of track URIs for the playlist\\\",\\n        \\\"maxItems\\\": 1000\\n      }\\n    },\\n    \\\"required\\\": [\\\"playlistName\\\", \\\"uri\\\", \\\"trackUris\\\"],\\n    \\\"additionalProperties\\\": false\\n  }\\n}\\n\"\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"8ddc9606-d70a-4a94-8dff-9ed17cec378e\",\n      \"name\": \"Playlists informations\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        1520,\n        -71\n      ],\n      \"parameters\": {\n        \"mode\": \"raw\",\n        \"options\": {},\n        \"jsonOutput\": \"={\\n  \\\"playlist_name\\\": \\\"{{ $json.name }}\\\",\\n  \\\"playlist_description\\\": \\\"{{ $json.description }}\\\",\\n  \\\"playlist_spotify_uri\\\": \\\"{{ $json.uri }}\\\"\\n}\\n \"\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"ec99ed3b-3cd9-4dc2-a7c6-5099eaeea93b\",\n      \"name\": \"Filter my playlist\",\n      \"type\": \"n8n-nodes-base.filter\",\n      \"position\": [\n        1300,\n        -71\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"bad771d7-2f4c-43bb-996a-0e46bbf85231\",\n              \"operator\": {\n                \"name\": \"filter.operator.equals\",\n                \"type\": \"string\",\n                \"operation\": \"equals\"\n              },\n              \"leftValue\": \"={{ $json.owner.display_name }}\",\n              \"rightValue\": \"Arnaud\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"64e57339-2bf2-4dc7-bca7-3de7da80b6eb\",\n      \"name\": \"Split Out1\",\n      \"type\": \"n8n-nodes-base.splitOut\",\n      \"position\": [\n        4700,\n        880\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"fieldToSplitOut\": \"output\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"924f5b88-9dce-4acc-9ad6-0f25f804fcc5\",\n      \"name\": \"Batch preparation1\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        5380,\n        880\n      ],\n      \"parameters\": {\n        \"jsCode\": \"const items = $input.all();\\nconst result = [];\\n\\nitems.forEach((item) => {\\n  const trackUris = item.json.trackUris;\\n  if (trackUris.length > 100) {\\n    for (let i = 0; i < trackUris.length; i += 100) {\\n      const newItem = { ...item.json, trackUris: trackUris.slice(i, i + 100) };\\n      result.push(newItem);\\n    }\\n  } else {\\n    result.push(item.json);\\n  }\\n});\\n\\nreturn result;\\n\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"980ef09e-557d-4748-b92a-ceec9dc54a6b\",\n      \"name\": \"Merge\",\n      \"type\": \"n8n-nodes-base.merge\",\n      \"position\": [\n        2400,\n        380\n      ],\n      \"parameters\": {\n        \"mode\": \"combine\",\n        \"options\": {\n          \"disableDotNotation\": false\n        },\n        \"advanced\": true,\n        \"joinMode\": \"enrichInput2\",\n        \"mergeByFields\": {\n          \"values\": [\n            {\n              \"field1\": \"id\",\n              \"field2\": \"track_spotify_id\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"a6149a04-bd65-4e55-8c1b-5e18fd98c2e8\",\n      \"name\": \"Simplify Tracks informations\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        2620,\n        380\n      ],\n      \"parameters\": {\n        \"include\": \"except\",\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"8bd9a8c4-0c95-43b0-8962-0e005504b6ee\",\n              \"name\": \"date_added\",\n              \"type\": \"string\",\n              \"value\": \"={{ $now.format('yyyy-MM-dd') }}\"\n            }\n          ]\n        },\n        \"excludeFields\": \"track_spotify_id, external_urls, id, uri, track_href, analysis_url\",\n        \"includeOtherFields\": true\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"96432403-f15f-4015-8024-72731e18b18d\",\n      \"name\": \"Limit\",\n      \"type\": \"n8n-nodes-base.limit\",\n      \"position\": [\n        2860,\n        240\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"3efb9ee3-1955-40eb-9958-a5fb515f30c1\",\n      \"name\": \"Get logged tracks\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"position\": [\n        3120,\n        240\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"dataLocationOnSheet\": {\n            \"values\": {\n              \"range\": \"A:B\",\n              \"rangeDefinition\": \"specifyRangeA1\"\n            }\n          }\n        },\n        \"sheetName\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gid=0\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/19VwKRDbsh8uU6xitnTXUjk1u73XCGThzyE8nv1YsP24/edit#gid=0\",\n          \"cachedResultName\": \"tracks listing\"\n        },\n        \"documentId\": {\n          \"__rl\": true,\n          \"mode\": \"url\",\n          \"value\": \"https://docs.google.com/spreadsheets/d/19VwKRDbsh8uU6xitnTXUjk1u73XCGThzyE8nv1YsP24/edit?gid=0#gid=0\"\n        },\n        \"combineFilters\": \"OR\"\n      },\n      \"credentials\": {\n        \"googleSheetsOAuth2Api\": {\n          \"id\": \"8UJ5YBcPU0IOkjEd\",\n          \"name\": \"Google Sheets - Arnaud Growth Perso\"\n        }\n      },\n      \"typeVersion\": 4.5\n    },\n    {\n      \"id\": \"58821bc3-254c-46d2-b882-d1995aaf3d46\",\n      \"name\": \"Excluding logged tracks\",\n      \"type\": \"n8n-nodes-base.merge\",\n      \"position\": [\n        3380,\n        360\n      ],\n      \"parameters\": {\n        \"mode\": \"combine\",\n        \"options\": {},\n        \"joinMode\": \"keepNonMatches\",\n        \"outputDataFrom\": \"input2\",\n        \"fieldsToMatchString\": \"track_spotify_uri\"\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"8a28cd62-9316-487e-a8f7-dd5ed3eab6c8\",\n      \"name\": \"Filter\",\n      \"type\": \"n8n-nodes-base.filter\",\n      \"position\": [\n        5120,\n        880\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"5457225f-104a-4d38-9481-d243ba656358\",\n              \"operator\": {\n                \"type\": \"array\",\n                \"operation\": \"notEmpty\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $json.trackUris }}\",\n              \"rightValue\": \"\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"770a42f8-f4e5-44b8-a096-945db7c9f85e\",\n      \"name\": \"Split Out2\",\n      \"type\": \"n8n-nodes-base.splitOut\",\n      \"disabled\": true,\n      \"position\": [\n        5120,\n        520\n      ],\n      \"parameters\": {\n        \"include\": \"allOtherFields\",\n        \"options\": {},\n        \"fieldToSplitOut\": \"trackUris\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"da5c9b03-2ace-40af-9364-c9119eaef7b0\",\n      \"name\": \"Manual Verification\",\n      \"type\": \"n8n-nodes-base.merge\",\n      \"disabled\": true,\n      \"position\": [\n        5380,\n        480\n      ],\n      \"parameters\": {\n        \"mode\": \"combine\",\n        \"options\": {},\n        \"advanced\": true,\n        \"joinMode\": \"enrichInput2\",\n        \"mergeByFields\": {\n          \"values\": [\n            {\n              \"field1\": \"track_spotify_uri\",\n              \"field2\": \"trackUris\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"98b3fca5-5b14-42e4-8e5f-5506643a54bb\",\n      \"name\": \"Spotify\",\n      \"type\": \"n8n-nodes-base.spotify\",\n      \"onError\": \"continueErrorOutput\",\n      \"position\": [\n        5640,\n        880\n      ],\n      \"parameters\": {\n        \"id\": \"={{ $json.uri }}\",\n        \"trackID\": \"={{ $json.trackUris.join(\\\",\\\") }}\",\n        \"resource\": \"playlist\",\n        \"additionalFields\": {}\n      },\n      \"credentials\": {\n        \"spotifyOAuth2Api\": {\n          \"id\": \"S9iODAILG9yn19ta\",\n          \"name\": \"Spotify account - Arnaud's\"\n        }\n      },\n      \"retryOnFail\": true,\n      \"typeVersion\": 1,\n      \"waitBetweenTries\": 5000\n    },\n    {\n      \"id\": \"536f7ed8-d3bf-4c95-8a7a-42f3a2f47e5c\",\n      \"name\": \"Aggregate by 200 tracks\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        4080,\n        880\n      ],\n      \"parameters\": {\n        \"jsCode\": \"const items = $input.all();\\nconst chunkSize = 200;\\nconst result = [];\\n\\nfor (let i = 0; i < items.length; i += chunkSize) {\\n  const chunk = items.slice(i, i + chunkSize).map((item) => item.json);\\n  result.push({json:{chunk}}); // Wrap each chunk in an object with a json property\\n}\\n\\nreturn result;\\n\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"e590ef66-4fc1-4b4d-a56c-f93db389500e\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -1160,\n        -280\n      ],\n      \"parameters\": {\n        \"width\": 1055,\n        \"height\": 1188.074539731524,\n        \"content\": \"# Spotify月度歌曲归档与歌单分类自动化工作流\\n\\n本n8n工作流可自动将您每月收藏的Spotify歌曲归档至Google表格，并记录歌单详情与描述信息。基于这些数据，系统会调用Claude 3.5智能模型将每首歌曲分类到多个歌单并进行批量添加。\\n\\n## 适用人群\\n本模板特别适合希望系统化归档收听历史，并将歌曲分类至自定义歌单的Spotify用户。\\n\\n## 解决痛点\\n该工作流自动化完成每月歌曲追踪、存储和分类的全流程，帮助用户维护井然有序的音乐库，同时保存珍贵的收听历史记录。\\n\\n## 工作流概览\\n- **触发机制**：支持手动启动或定时触发\\n- **歌单获取**：读取当前歌单并按所有者筛选\\n- **歌曲信息采集**：从用户曲库获取歌曲ID、流行度等元数据\\n- **音频特征提取**：通过Spotify API获取每首歌曲的音频特征\\n- **数据整合**：合并歌曲信息与音频特征\\n- **去重处理**：过滤Google表格中已存在的曲目\\n- **数据归档**：将新歌曲存档至Google表格\\n- **AI智能分类**：运用AI模型将歌曲归类至合适歌单\\n- **歌单更新**：将分类后的歌曲批量添加至对应歌单\\n\\n## 配置指南\\n1. **凭证设置**  \\n   确保已配置有效的Spotify OAuth2和Google Sheets访问凭证\\n2. **触发器配置**  \\n   选择手动或定时触发方式\\n3. **表格准备**  \\n   预先创建符合结构的Google表格用于存储歌曲数据\\n4. **歌单准备**  \\n   建立多样化歌单并完善描述（参考示例模板），以容纳不同音乐流派和情绪类型\\n\\n## 自定义选项\\n- **调整分类规则**  \\n   修改AI模型的分类标准以匹配个人音乐偏好\\n- **增强分析维度**  \\n   整合更多音频特征或外部数据源实现更精准分类\\n- **个性化归档**  \\n   自定义需要记录的歌曲属性字段\\n- **灵活调度**  \\n   设置月/周等定期归档频率\\n\\n## 成本估算\\n处理300首歌曲约消耗60,000 tokens（输入58,000+生成2,000），使用Claude 3.5 Sonnet模型成本约0.2美元（2024年10月报价）\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"c6e33534-a923-4a1e-8d40-54c3d39f7352\",\n      \"name\": \"Monthly Trigger\",\n      \"type\": \"n8n-nodes-base.scheduleTrigger\",\n      \"position\": [\n        660,\n        160\n      ],\n      \"parameters\": {\n        \"rule\": {\n          \"interval\": [\n            {\n              \"field\": \"months\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"a085a6af-ede4-4e3a-9bf4-4c29e821af35\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1000,\n        -240\n      ],\n      \"parameters\": {\n        \"width\": 1729.2548791395811,\n        \"height\": 349.93537232723713,\n        \"content\": \"**获取并记录播放列表信息**\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"ad33760b-7fa9-4246-806c-438fdf31247b\",\n      \"name\": \"Get logged playlists\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"position\": [\n        2000,\n        -171\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"dataLocationOnSheet\": {\n            \"values\": {\n              \"rangeDefinition\": \"detectAutomatically\"\n            }\n          }\n        },\n        \"sheetName\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": 1684849334,\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/19VwKRDbsh8uU6xitnTXUjk1u73XCGThzyE8nv1YsP24/edit#gid=1684849334\",\n          \"cachedResultName\": \"playslists listing\"\n        },\n        \"documentId\": {\n          \"__rl\": true,\n          \"mode\": \"url\",\n          \"value\": \"https://docs.google.com/spreadsheets/d/19VwKRDbsh8uU6xitnTXUjk1u73XCGThzyE8nv1YsP24/edit?gid=0#gid=0\"\n        },\n        \"combineFilters\": \"OR\"\n      },\n      \"credentials\": {\n        \"googleSheetsOAuth2Api\": {\n          \"id\": \"8UJ5YBcPU0IOkjEd\",\n          \"name\": \"Google Sheets - Arnaud Growth Perso\"\n        }\n      },\n      \"typeVersion\": 4.5\n    },\n    {\n      \"id\": \"e2beb78f-227c-4ecf-bf90-377d49050646\",\n      \"name\": \"Log new tracks\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"position\": [\n        3680,\n        200\n      ],\n      \"parameters\": {\n        \"columns\": {\n          \"value\": {},\n          \"schema\": [\n            {\n              \"id\": \"track\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"track\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"artist\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"artist\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"album\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"album\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"track_spotify_id\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"track_spotify_id\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"external_urls\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"external_urls\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"track_popularity\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"track_popularity\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"album_release_date\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"album_release_date\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"danceability\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"danceability\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"energy\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"energy\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"key\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"key\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"loudness\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"loudness\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"mode\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"mode\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"speechiness\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"speechiness\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"acousticness\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"acousticness\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"instrumentalness\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"instrumentalness\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"liveness\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"liveness\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"valence\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"valence\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"tempo\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"tempo\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"type\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"type\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"id\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"id\",\n              \"defaultMatch\": true,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"uri\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"uri\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"track_href\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"track_href\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"analysis_url\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"analysis_url\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"duration_ms\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"duration_ms\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"time_signature\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"time_signature\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            }\n          ],\n          \"mappingMode\": \"autoMapInputData\",\n          \"matchingColumns\": []\n        },\n        \"options\": {\n          \"useAppend\": true\n        },\n        \"operation\": \"append\",\n        \"sheetName\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gid=0\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/19VwKRDbsh8uU6xitnTXUjk1u73XCGThzyE8nv1YsP24/edit#gid=0\",\n          \"cachedResultName\": \"tracks listing\"\n        },\n        \"documentId\": {\n          \"__rl\": true,\n          \"mode\": \"url\",\n          \"value\": \"https://docs.google.com/spreadsheets/d/19VwKRDbsh8uU6xitnTXUjk1u73XCGThzyE8nv1YsP24/edit?gid=0#gid=0\"\n        }\n      },\n      \"credentials\": {\n        \"googleSheetsOAuth2Api\": {\n          \"id\": \"8UJ5YBcPU0IOkjEd\",\n          \"name\": \"Google Sheets - Arnaud Growth Perso\"\n        }\n      },\n      \"typeVersion\": 4.5\n    },\n    {\n      \"id\": \"e9d311c8-d39c-481d-99dc-c89d360f3217\",\n      \"name\": \"Log new playlists\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"position\": [\n        2480,\n        -91\n      ],\n      \"parameters\": {\n        \"columns\": {\n          \"value\": {},\n          \"schema\": [\n            {\n              \"id\": \"playlist_name\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"playlist_name\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"playlist_description\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"playlist_description\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"playlist_spotify_uri\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"playlist_spotify_uri\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            }\n          ],\n          \"mappingMode\": \"autoMapInputData\",\n          \"matchingColumns\": []\n        },\n        \"options\": {\n          \"useAppend\": true\n        },\n        \"operation\": \"append\",\n        \"sheetName\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": 1684849334,\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/19VwKRDbsh8uU6xitnTXUjk1u73XCGThzyE8nv1YsP24/edit#gid=1684849334\",\n          \"cachedResultName\": \"playslists listing\"\n        },\n        \"documentId\": {\n          \"__rl\": true,\n          \"mode\": \"url\",\n          \"value\": \"https://docs.google.com/spreadsheets/d/19VwKRDbsh8uU6xitnTXUjk1u73XCGThzyE8nv1YsP24/edit?gid=0#gid=0\"\n        }\n      },\n      \"credentials\": {\n        \"googleSheetsOAuth2Api\": {\n          \"id\": \"8UJ5YBcPU0IOkjEd\",\n          \"name\": \"Google Sheets - Arnaud Growth Perso\"\n        }\n      },\n      \"typeVersion\": 4.5\n    },\n    {\n      \"id\": \"0e9dd47b-0bd3-4c8c-84c6-7ef566f41135\",\n      \"name\": \"Excluding logged playlists\",\n      \"type\": \"n8n-nodes-base.merge\",\n      \"position\": [\n        2240,\n        -91\n      ],\n      \"parameters\": {\n        \"mode\": \"combine\",\n        \"options\": {},\n        \"joinMode\": \"keepNonMatches\",\n        \"outputDataFrom\": \"input2\",\n        \"fieldsToMatchString\": \"playlist_spotify_uri\"\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"7e0f1d5b-d74b-474d-bde2-3966ab51e048\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1000,\n        195.4666080114149\n      ],\n      \"parameters\": {\n        \"width\": 2831.0439846349473,\n        \"height\": 394.4687643158222,\n        \"content\": \"**获取并记录播放列表信息**\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"b851790c-126a-43bd-a223-0a023d423309\",\n      \"name\": \"Limit2\",\n      \"type\": \"n8n-nodes-base.limit\",\n      \"position\": [\n        1780,\n        -171\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"f0ec1751-116a-4d14-b815-39f4ba989e33\",\n      \"name\": \"Classify new tracks\",\n      \"type\": \"n8n-nodes-base.noOp\",\n      \"position\": [\n        3880,\n        460\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"38df0ed5-697d-489d-8d0c-2b18c2e017a8\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        3960,\n        740\n      ],\n      \"parameters\": {\n        \"width\": 726.2282986582347,\n        \"height\": 562.9881279640259,\n        \"content\": \"**AI分类**\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"5649c3b6-dc55-488f-9afc-106ac410fae1\",\n      \"name\": \"Sticky Note4\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        5080,\n        760\n      ],\n      \"parameters\": {\n        \"width\": 858.3555537284071,\n        \"height\": 309.3037982292949,\n        \"content\": \"**更新 Spotify 播放列表**\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"8410fc7d-64e3-4abf-b035-667945e84d64\",\n      \"name\": \"Sticky Note5\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        5080,\n        340\n      ],\n      \"parameters\": {\n        \"width\": 578.2457729796415,\n        \"height\": 309.3037982292949,\n        \"content\": \"**人工验证**\\n我们执行此次合并是为了包含曲目名称，以便更轻松地验证AI的输出结果。若直接在机器学习响应中添加曲目名称会导致完成令牌数量翻倍，因此为避免令牌使用效率下降，我们未采用该方式。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"d59c316a-22d4-46f0-b97c-789e8c196ab1\",\n      \"name\": \"Sticky Note6\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -1140,\n        1040\n      ],\n      \"parameters\": {\n        \"width\": 610.3407699712512,\n        \"height\": 922.4081979777811,\n        \"content\": \"### 播放列表描述示例\\n\\n\\n| 播放列表名称           | 播放列表描述                                                                                                                                             |\\n|-------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------|\\n| 古典殿堂               | 沉浸于古典音乐的永恒之美，精选巴洛克至浪漫时期的传世乐章，呈现大师级作曲艺术。                                                                         |\\n| 流光飞舞               | 专为荧光棒、火棍与杂耍球设计的动态歌单，律动节拍与肢体动作完美契合，助你进入心流状态。                                                                 |\\n| 专注音场               | 精挑细选的效率提升音乐，营造深度工作氛围，是办公学习时的理想白噪音。                                                                                   |\\n| 寒夜安眠               | 温柔旋律与氛围音效编织的催眠曲集，为你打造宁静祥和的入睡环境。                                                                                         |\\n| 欢唱时刻               | 热门金曲伴奏合集，适合个人练嗓或好友欢聚，用音乐点燃你的表演欲。                                                                                       |\\n| 黄金90年代             | 横跨垃圾摇滚、流行乐、嘻哈与电子乐的多元混音带，重现定义时代的音乐图景。                                                                               |\\n| 霓虹80年代             | 回到发型夸张、霓虹闪耀的迪斯科时代，经典热单与冷门佳作交织，尽显十年狂想曲。                                                                           |\\n| 跃动节拍               | 跨流派精选活力曲目，用明快旋律唤醒身体本能，瞬间提升情绪能量。                                                                                         |\\n| 雷鬼深渊               | 传统雷鬼节奏与空灵回声效果的完美融合，打造慵懒惬意的听觉沙发。                                                                                         |\\n| 迷幻旅程               |  psychedelic trance 精神漫游指南，深夜舞池狂欢或高度专注时的最佳音轨伴侣。                                                                              |\\n| 康比亚狂欢             | 拉丁传统韵律与现代编曲碰撞出的魔性节奏，让人不自觉摇摆的南美风情舞曲宝库。                                                                             |\\n| 放克风暴               | 灵魂贝斯线与抓耳节奏组成的迪斯科盛宴，每个音符都在邀请你加入这场复古派对。                                                                             |\\n| 香颂物语               | 从经典到现代的法国香颂巡礼，手风琴与诗意歌词中流淌着塞纳河畔的艺术灵魂。                                                                               |\\n| 极限燃脂               | 从热身到拉伸的全周期运动音效引擎，高强度节拍激发你的每寸肌肉潜能。                                                                                     |\\n| 史诗留声机             | 电影级器乐叙事诗，适合作为思考、冥想或创意工作的宏大背景音。                                                                                           |\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"d43ce92b-3831-4fd5-a59c-f9dcd7f1b8ea\",\n      \"name\": \"Basic LLM Chain - AI Classification\",\n      \"type\": \"@n8n/n8n-nodes-langchain.chainLlm\",\n      \"position\": [\n        4280,\n        880\n      ],\n      \"parameters\": {\n        \"text\": \"=#### Tracks to Analyze:\\n<tracks_to_analyze>\\n   {{ JSON.stringify($json.chunk) }}\\n</tracks_to_analyze>\",\n        \"messages\": {\n          \"messageValues\": [\n            {\n              \"message\": \"You are an expert in music classification with extensive knowledge of genres, moods, and various musical elements. Your task is to analyze the provided tracks and generate a **comprehensive and exhaustive classification** to enhance my listening experience.\\n\\n### Process:\\n\\n1. **Identify Playlist Style**: For each of my personal playlist, use the information provided in <playlists_informations>, including the name and description, to understand its purpose and the types of tracks that are most suitable for it. Use this understanding to guide your classification decisions.\\n\\n2. **Identify Track Characteristics**: For each track in <tracks_to_analyze>, even if you don't have the audio, use the track's **title and artist**, along with relevant characteristics (including genre, mood, tempo, instrumentation, lyrical themes, and any other musical features), to infer these characteristics based on your expertise.\\n\\n3. **Playlist Assignment**: For each playlist, identify the most relevant tracks and assign them to the appropriate playlists based on their characteristics. A single track may belong to multiple playlists, so ensure you **exhaustively include it in all relevant categories**.\\n\\n#### Playlist Information:\\n<playlists_informations>\\n   {{ JSON.stringify($('Playlists informations').all()) }}\\n</playlists_informations>\\n\\n### Examples\\n\\nFind below the track input and a sample response for reference.\\n\\n\\n<tracks_to_analyze>\\n[ {\\\"track\\\":\\\"William Tell (Guillaume Tell) Overture: Finale [Arr. for Euphonium by Jorijn Van Hese]\\\",\\\"artist\\\":\\\"Jorijn Van Hese\\\",\\\"album\\\":\\\"William Tell (Guillaume Tell) Overture: Finale [Arr. for Euphonium by Jorijn Van Hese]\\\",\\\"track_spotify_uri\\\":\\\"spotify:track:1I5L8EAVFpTnSAYptTJVrU\\\",\\\"track_popularity\\\":\\\"28\\\",\\\"album_release_date\\\":\\\"2018\\\",\\\"danceability\\\":0.561,\\\"energy\\\":0.236,\\\"key\\\":0,\\\"loudness\\\":-27.926,\\\"mode\\\":1,\\\"speechiness\\\":0.0491,\\\"acousticness\\\":0.995,\\\"instrumentalness\\\":0.934,\\\"liveness\\\":0.121,\\\"valence\\\":0.964,\\\"tempo\\\":102.216,\\\"type\\\":\\\"audio_features\\\",\\\"duration_ms\\\":120080,\\\"time_signature\\\":4,\\\"date_added\\\":\\\"2024-10-27\\\"}, {\\\"track\\\":\\\"Geffen\\\",\\\"artist\\\":\\\"Barnt\\\",\\\"album\\\":\\\"Azari & III Presents - Body Language, Vol. 13\\\",\\\"track_spotify_uri\\\":\\\"spotify:track:7wVKbT4vwRaEEJ7fnu6Ota\\\",\\\"track_popularity\\\":\\\"13\\\",\\\"album_release_date\\\":\\\"2013\\\",\\\"danceability\\\":0.83,\\\"energy\\\":0.355,\\\"key\\\":1,\\\"loudness\\\":-12.172,\\\"mode\\\":1,\\\"speechiness\\\":0.0911,\\\"acousticness\\\":0.00151,\\\"instrumentalness\\\":0.934,\\\"liveness\\\":0.111,\\\"valence\\\":0.129,\\\"tempo\\\":118.947,\\\"type\\\":\\\"audio_features\\\",\\\"duration_ms\\\":486910,\\\"time_signature\\\":4,\\\"date_added\\\":\\\"2024-10-27\\\"}, {\\\"track\\\":\\\"I Wan'na Be Like You (The Monkey Song)\\\",\\\"artist\\\":\\\"Louis Prima\\\",\\\"album\\\":\\\"The Jungle Book\\\",\\\"track_spotify_uri\\\":\\\"spotify:track:2EeVPGHq2I7fjeDfT6LEYX\\\",\\\"track_popularity\\\":\\\"58\\\",\\\"album_release_date\\\":\\\"1997\\\",\\\"danceability\\\":0.746,\\\"energy\\\":0.404,\\\"key\\\":7,\\\"loudness\\\":-15.09,\\\"mode\\\":0,\\\"speechiness\\\":0.0995,\\\"acousticness\\\":0.662,\\\"instrumentalness\\\":0.000238,\\\"liveness\\\":0.281,\\\"valence\\\":0.795,\\\"tempo\\\":96.317,\\\"type\\\":\\\"audio_features\\\",\\\"duration_ms\\\":279453,\\\"time_signature\\\":4,\\\"date_added\\\":\\\"2024-10-27\\\"}, {\\\"track\\\":\\\"Linda Nena\\\",\\\"artist\\\":\\\"Juaneco Y Su Combo\\\",\\\"album\\\":\\\"The Roots of Chicha\\\",\\\"track_spotify_uri\\\":\\\"spotify:track:6QsovprLkdGeE9FSsOjuQA\\\",\\\"track_popularity\\\":\\\"0\\\",\\\"album_release_date\\\":\\\"2007\\\",\\\"danceability\\\":0.707,\\\"energy\\\":0.749,\\\"key\\\":4,\\\"loudness\\\":-6.36,\\\"mode\\\":0,\\\"speechiness\\\":0.0336,\\\"acousticness\\\":0.696,\\\"instrumentalness\\\":0.0000203,\\\"liveness\\\":0.104,\\\"valence\\\":0.97,\\\"tempo\\\":107.552,\\\"type\\\":\\\"audio_features\\\",\\\"duration_ms\\\":225013,\\\"time_signature\\\":4,\\\"date_added\\\":\\\"2024-10-27\\\"}, {\\\"track\\\":\\\"Sonido Amazonico\\\",\\\"artist\\\":\\\"Los Mirlos\\\",\\\"album\\\":\\\"The Roots of Chicha\\\",\\\"track_spotify_uri\\\":\\\"spotify:track:3hH0sVIoIoPOTmMdjmXSob\\\",\\\"track_popularity\\\":\\\"0\\\",\\\"album_release_date\\\":\\\"2007\\\",\\\"danceability\\\":0.883,\\\"energy\\\":0.64,\\\"key\\\":3,\\\"loudness\\\":-6.637,\\\"mode\\\":1,\\\"speechiness\\\":0.0788,\\\"acousticness\\\":0.559,\\\"instrumentalness\\\":0.000408,\\\"liveness\\\":0.176,\\\"valence\\\":0.886,\\\"tempo\\\":100.832,\\\"type\\\":\\\"audio_features\\\",\\\"duration_ms\\\":155000,\\\"time_signature\\\":4,\\\"date_added\\\":\\\"2024-10-27\\\"}, {\\\"track\\\":\\\"Para Elisa\\\",\\\"artist\\\":\\\"Los Destellos\\\",\\\"album\\\":\\\"The Roots of Chicha\\\",\\\"track_spotify_uri\\\":\\\"spotify:track:4Sd525AYAaYuiexGHTcoFy\\\",\\\"track_popularity\\\":\\\"0\\\",\\\"album_release_date\\\":\\\"2007\\\",\\\"danceability\\\":0.69,\\\"energy\\\":0.8,\\\"key\\\":11,\\\"loudness\\\":-11.125,\\\"mode\\\":1,\\\"speechiness\\\":0.0602,\\\"acousticness\\\":0.205,\\\"instrumentalness\\\":0.886,\\\"liveness\\\":0.0531,\\\"valence\\\":0.801,\\\"tempo\\\":113.401,\\\"type\\\":\\\"audio_features\\\",\\\"duration_ms\\\":166507,\\\"time_signature\\\":4,\\\"date_added\\\":\\\"2024-10-27\\\"}, {\\\"track\\\":\\\"Stand By Me\\\",\\\"artist\\\":\\\"Ben E. King\\\",\\\"album\\\":\\\"Don't Play That Song (Mono)\\\",\\\"track_spotify_uri\\\":\\\"spotify:track:3SdTKo2uVsxFblQjpScoHy\\\",\\\"track_popularity\\\":\\\"75\\\",\\\"album_release_date\\\":\\\"1962\\\",\\\"danceability\\\":0.65,\\\"energy\\\":0.306,\\\"key\\\":9,\\\"loudness\\\":-9.443,\\\"mode\\\":1,\\\"speechiness\\\":0.0393,\\\"acousticness\\\":0.57,\\\"instrumentalness\\\":0.00000707,\\\"liveness\\\":0.0707,\\\"valence\\\":0.605,\\\"tempo\\\":118.068,\\\"type\\\":\\\"audio_features\\\",\\\"duration_ms\\\":180056,\\\"time_signature\\\":4,\\\"date_added\\\":\\\"2024-10-27\\\"}, {\\\"track\\\":\\\"One Night in Bangkok\\\",\\\"artist\\\":\\\"Murray Head\\\",\\\"album\\\":\\\"Emotions (My Favourite Songs)\\\",\\\"track_spotify_uri\\\":\\\"spotify:track:6erBowZaW6Ur3vNOWhS2zM\\\",\\\"track_popularity\\\":\\\"58\\\",\\\"album_release_date\\\":\\\"1980\\\",\\\"danceability\\\":0.892,\\\"energy\\\":0.578,\\\"key\\\":10,\\\"loudness\\\":-5.025,\\\"mode\\\":1,\\\"speechiness\\\":0.15,\\\"acousticness\\\":0.112,\\\"instrumentalness\\\":0.000315,\\\"liveness\\\":0.0897,\\\"valence\\\":0.621,\\\"tempo\\\":108.703,\\\"type\\\":\\\"audio_features\\\",\\\"duration_ms\\\":236067,\\\"time_signature\\\":4,\\\"date_added\\\":\\\"2024-10-27\\\"}, {\\\"track\\\":\\\"The Big Tree\\\",\\\"artist\\\":\\\"Stand High Patrol\\\",\\\"album\\\":\\\"Midnight Walkers\\\",\\\"track_spotify_uri\\\":\\\"spotify:track:4ZpqCGtkgPn1Pxsgtmtc8O\\\",\\\"track_popularity\\\":\\\"50\\\",\\\"album_release_date\\\":\\\"2012\\\",\\\"danceability\\\":0.697,\\\"energy\\\":0.392,\\\"key\\\":2,\\\"loudness\\\":-9.713,\\\"mode\\\":1,\\\"speechiness\\\":0.0417,\\\"acousticness\\\":0.259,\\\"instrumentalness\\\":0.0000388,\\\"liveness\\\":0.0956,\\\"valence\\\":0.196,\\\"tempo\\\":167.002,\\\"type\\\":\\\"audio_features\\\",\\\"duration_ms\\\":241120,\\\"time_signature\\\":4,\\\"date_added\\\":\\\"2024-10-27\\\"}, {\\\"track\\\":\\\"Hotel California - 2013 Remaster\\\",\\\"artist\\\":\\\"Eagles\\\",\\\"album\\\":\\\"Hotel California (2013 Remaster)\\\",\\\"track_spotify_uri\\\":\\\"spotify:track:40riOy7x9W7GXjyGp4pjAv\\\",\\\"track_popularity\\\":\\\"82\\\",\\\"album_release_date\\\":\\\"1976\\\",\\\"danceability\\\":0.579,\\\"energy\\\":0.508,\\\"key\\\":2,\\\"loudness\\\":-9.484,\\\"mode\\\":1,\\\"speechiness\\\":0.027,\\\"acousticness\\\":0.00574,\\\"instrumentalness\\\":0.000494,\\\"liveness\\\":0.0575,\\\"valence\\\":0.609,\\\"tempo\\\":147.125,\\\"type\\\":\\\"audio_features\\\",\\\"duration_ms\\\":391376,\\\"time_signature\\\":4,\\\"date_added\\\":\\\"2024-10-27\\\"} ]\\n</tracks_to_analyze>\\n\\nOutput : \\n[\\n    {\\n        \\\"playlistName\\\": \\\"Classique\\\",\\n        \\\"uri\\\": \\\"spotify:playlist:1AASnV7pZApr6JWCAWg94R\\\",\\n        \\\"tracks\\\": [\\n            {\\n                \\\"trackName\\\": \\\"William Tell (Guillaume Tell) Overture: Finale [Arr. for Euphonium by Jorijn Van Hese]\\\",\\n                \\\"trackUri\\\": \\\"spotify:track:1I5L8EAVFpTnSAYptTJVrU\\\"\\n            }\\n        ]\\n    },\\n    {\\n        \\\"playlistName\\\": \\\"Pro Sound\\\",\\n        \\\"uri\\\": \\\"spotify:playlist:7G27Ccw1vZdWt7uYrUMLwk\\\",\\n        \\\"tracks\\\": [\\n            {\\n                \\\"trackName\\\": \\\"Geffen\\\",\\n                \\\"trackUri\\\": \\\"spotify:track:7wVKbT4vwRaEEJ7fnu6Ota\\\"\\n            }\\n        ]\\n    },\\n    {\\n        \\\"playlistName\\\": \\\"To Sing\\\",\\n        \\\"uri\\\": \\\"spotify:playlist:7ts0Ccxw5UijIO8zQ8YJqh\\\",\\n        \\\"tracks\\\": [\\n            {\\n                \\\"trackName\\\": \\\"I Wan'na Be Like You (The Monkey Song)\\\",\\n                \\\"trackUri\\\": \\\"spotify:track:2EeVPGHq2I7fjeDfT6LEYX\\\"\\n            },\\n            {\\n                \\\"trackName\\\": \\\"Stand By Me\\\",\\n                \\\"trackUri\\\": \\\"spotify:track:3SdTKo2uVsxFblQjpScoHy\\\"\\n            },\\n            {\\n                \\\"trackName\\\": \\\"One Night in Bangkok\\\",\\n                \\\"trackUri\\\": \\\"spotify:track:6erBowZaW6Ur3vNOWhS2zM\\\"\\n            },\\n            {\\n                \\\"trackName\\\": \\\"Hotel California - 2013 Remaster\\\",\\n                \\\"trackUri\\\": \\\"spotify:track:40riOy7x9W7GXjyGp4pjAv\\\"\\n            }\\n        ]\\n    },\\n    {\\n        \\\"playlistName\\\": \\\"1980s\\\",\\n        \\\"uri\\\": \\\"spotify:playlist:6DqSzwNT9v7eKE3hbPAQtM\\\",\\n        \\\"tracks\\\": [\\n            {\\n                \\\"trackName\\\": \\\"One Night in Bangkok\\\",\\n                \\\"trackUri\\\": \\\"spotify:track:6erBowZaW6Ur3vNOWhS2zM\\\"\\n            }\\n        ]\\n    },\\n    {\\n        \\\"playlistName\\\": \\\"Groove Up\\\",\\n        \\\"uri\\\": \\\"spotify:playlist:4rBZMQPf0u6D5FDB82LjHb\\\",\\n        \\\"tracks\\\": [\\n            {\\n                \\\"trackName\\\": \\\"I Wan'na Be Like You (The Monkey Song)\\\",\\n                \\\"trackUri\\\": \\\"spotify:track:2EeVPGHq2I7fjeDfT6LEYX\\\"\\n            },\\n            {\\n                \\\"trackName\\\": \\\"Stand By Me\\\",\\n                \\\"trackUri\\\": \\\"spotify:track:3SdTKo2uVsxFblQjpScoHy\\\"\\n            }\\n        ]\\n    },\\n    {\\n        \\\"playlistName\\\": \\\"Reggae & Dub\\\",\\n        \\\"uri\\\": \\\"spotify:playlist:60khtG2acFWcFQUIGWrPW6\\\",\\n        \\\"tracks\\\": [\\n            {\\n                \\\"trackName\\\": \\\"The Big Tree\\\",\\n                \\\"trackUri\\\": \\\"spotify:track:4ZpqCGtkgPn1Pxsgtmtc8O\\\"\\n            }\\n        ]\\n    },\\n    {\\n        \\\"playlistName\\\": \\\"Cumbia\\\",\\n        \\\"uri\\\": \\\"spotify:playlist:1SwaCdO1tS2BbF8IL3WwXO\\\",\\n        \\\"tracks\\\": [\\n            {\\n                \\\"trackName\\\": \\\"Linda Nena\\\",\\n                \\\"trackUri\\\": \\\"spotify:track:6QsovprLkdGeE9FSsOjuQA\\\"\\n            },\\n            {\\n                \\\"trackName\\\": \\\"Sonido Amazonico\\\",\\n                \\\"trackUri\\\": \\\"spotify:track:3hH0sVIoIoPOTmMdjmXSob\\\"\\n            },\\n            {\\n                \\\"trackName\\\": \\\"Para Elisa\\\",\\n                \\\"trackUri\\\": \\\"spotify:track:4Sd525AYAaYuiexGHTcoFy\\\"\\n            }\\n        ]\\n    },\\n    {\\n        \\\"playlistName\\\": \\\"Funky Groove\\\",\\n        \\\"uri\\\": \\\"spotify:playlist:7jbAj4iensK9FEWsPUez67\\\",\\n        \\\"tracks\\\": [\\n            {\\n                \\\"trackName\\\": \\\"I Wan'na Be Like You (The Monkey Song)\\\",\\n                \\\"trackUri\\\": \\\"spotify:track:2EeVPGHq2I7fjeDfT6LEYX\\\"\\n            },\\n            {\\n                \\\"trackName\\\": \\\"Stand By Me\\\",\\n                \\\"trackUri\\\": \\\"spotify:track:3SdTKo2uVsxFblQjpScoHy\\\"\\n            }\\n        ]\\n    }\\n]\\n\\n### Output Requirements:\\n\\n1. **Exhaustiveness**: Ensure that at least **80% of the tracks** are categorized into playlists. Be thorough in your analysis to leave no relevant tracks unclassified.\\n\\n2. **Step-by-Step Approach**:\\n   - **Think step by step** when classifying tracks, starting with a detailed analysis of their characteristics.\\n   - **Review each playlist one by one**, assigning tracks based on their attributes to ensure a comprehensive and accurate classification.\\n\\n3. **Avoid Duplicates**: Do not include the same track more than once in the output unless it belongs to multiple playlists. Each track should appear only once in each playlist's list of tracks.\\n\\n4. **Only Use Provided Tracks & Playlists**: Classify tracks exclusively from the given list and assign them to the specified playlists. Do not include any tracks or playlists that are not part of the provided data.\\n\\n### Output Format:\\n\\nReturn the classification results in the following JSON structure, ensuring that the output is clear and well-organized.\\n\\n\"\n            }\n          ]\n        },\n        \"promptType\": \"define\",\n        \"hasOutputParser\": true\n      },\n      \"typeVersion\": 1.4\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"Limit\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get logged tracks\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Merge\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Simplify Tracks informations\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Filter\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Batch preparation1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Limit2\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get logged playlists\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Split Out\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get Tracks\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Retrieve relevant info\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Split Out1\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Split Out2\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Filter\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Split Out2\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Manual Verification\",\n            \"type\": \"main\",\n            \"index\": 1\n          }\n        ]\n      ]\n    },\n    \"Get Playlist\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Filter my playlist\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Monthly Trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get Playlist\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Get Tracks\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Batch preparation\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get Track details\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get Track details\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Split Out\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get logged tracks\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Excluding logged tracks\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Batch preparation1\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Spotify\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Filter my playlist\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Playlists informations\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Classify new tracks\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Aggregate by 200 tracks\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Manual Verification\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Anthropic Chat Model\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"Basic LLM Chain - AI Classification\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get logged playlists\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Excluding logged playlists\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Playlists informations\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Excluding logged playlists\",\n            \"type\": \"main\",\n            \"index\": 1\n          },\n          {\n            \"node\": \"Limit2\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Retrieve relevant info\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Batch preparation\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Merge\",\n            \"type\": \"main\",\n            \"index\": 1\n          }\n        ]\n      ]\n    },\n    \"Aggregate by 200 tracks\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Basic LLM Chain - AI Classification\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Excluding logged tracks\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Log new tracks\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Classify new tracks\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Structured Output Parser\": {\n      \"ai_outputParser\": [\n        [\n          {\n            \"node\": \"Basic LLM Chain - AI Classification\",\n            \"type\": \"ai_outputParser\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Excluding logged playlists\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Log new playlists\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Simplify Tracks informations\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Limit\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Excluding logged tracks\",\n            \"type\": \"main\",\n            \"index\": 1\n          }\n        ]\n      ]\n    },\n    \"Basic LLM Chain - AI Classification\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Split Out1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}