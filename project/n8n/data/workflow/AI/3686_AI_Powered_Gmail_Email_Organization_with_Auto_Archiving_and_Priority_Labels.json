{
  "title": "AI-Powered Gmail Email Organization with Auto-Archiving and Priority Labels",
  "url": "https://n8n.io/workflows/3686-ai-powered-gmail-email-organization-with-auto-archiving-and-priority-labels/",
  "category": "AI",
  "category_url": "https://n8n.io/workflows/categories/ai/",
  "author": "Junichiro Tobe",
  "publish_date": "Last update 3 days ago",
  "content": "",
  "workflow_json": "{\"meta\":{\"instanceId\":\"6af2f94153ea0551e6264b16187490bd4c4739c7f5f3d7adab90c5cf186e22a1\",\"templateCredsSetupCompleted\":true},\"nodes\":[{\"id\":\"43e68fe1-7f48-4bc9-b19a-66d39bee5bbd\",\"name\":\"When clicking ‘Test workflow’\",\"type\":\"n8n-nodes-base.manualTrigger\",\"position\":[-520,20],\"parameters\":{},\"typeVersion\":1},{\"id\":\"32aa401a-60c3-4436-94d5-5ba09d3be6ae\",\"name\":\"OpenRouter Chat Model\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatOpenRouter\",\"position\":[80,0],\"parameters\":{\"model\":\"openai/gpt-4.1-nano\",\"options\":{}},\"credentials\":{\"openRouterApi\":{\"id\":\"eQmkAlMDYm8oEtBL\",\"name\":\"OpenRouter account\"}},\"typeVersion\":1},{\"id\":\"f6d325b4-ff87-4bba-9f27-b68590c8a533\",\"name\":\"Telegram Trigger\",\"type\":\"n8n-nodes-base.telegramTrigger\",\"position\":[-520,-220],\"webhookId\":\"e61d3286-920e-406c-b787-d330cf897ef4\",\"parameters\":{\"updates\":[\"message\"],\"additionalFields\":{}},\"credentials\":{\"telegramApi\":{\"id\":\"ZOl2ZojetuN1uFiX\",\"name\":\"My Mail Agent Bot via Telegram\"}},\"typeVersion\":1.1},{\"id\":\"8e10c622-9bf8-414b-8364-185c5c4808a0\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-600,-480],\"parameters\":{\"width\":1660,\"height\":680,\"content\":\"## Mail Agent\\nFor emails in the inbox, archive those that are completely unnecessary, and label the rest based on their relevance.\\n\\n\"},\"typeVersion\":1},{\"id\":\"2e664cd4-37af-4b8f-84a5-ff07911b8aaa\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-560,-380],\"parameters\":{\"color\":5,\"width\":180,\"height\":360,\"content\":\"### Trigger\\nRun by communicating with Telegram\"},\"typeVersion\":1},{\"id\":\"966af8d0-bfca-40fa-b97c-ec1bb7de82d2\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-360,-380],\"parameters\":{\"color\":4,\"width\":180,\"height\":360,\"content\":\"### Get Mail via Gmail\\nRetrieve all emails in the Gmail inbox.\\n(Inbox = Label: INBOX)\"},\"typeVersion\":1},{\"id\":\"07dabeda-a075-4e45-9ecf-9a0e6d0df0b2\",\"name\":\"Sticky Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-160,-380],\"parameters\":{\"color\":4,\"width\":180,\"height\":360,\"content\":\"### Filter\\nFilter out emails that have already been processed to avoid unnecessary work for the AI.\\n\\n\"},\"typeVersion\":1},{\"id\":\"b9a96646-283e-4328-8c79-57befa97bb69\",\"name\":\"Sticky Note4\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[40,-380],\"parameters\":{\"color\":3,\"width\":980,\"height\":540,\"content\":\"### AI Agent\\nCheck each email one by one, categorize them as necessary or unnecessary according to the provided prompt, and instruct Gmail to apply the appropriate labels.\"},\"typeVersion\":1},{\"id\":\"32c73c57-61b5-430b-a011-f0b44fa2b226\",\"name\":\"mail_label_setter\",\"type\":\"n8n-nodes-base.gmailTool\",\"position\":[360,0],\"webhookId\":\"37bb94d2-6aeb-4038-afc7-e25a330e7860\",\"parameters\":{\"labelIds\":\"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Label_Names_or_IDs', ``, 'string') }}\",\"messageId\":\"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Message_ID', ``, 'string') }}\",\"operation\":\"addLabels\"},\"credentials\":{\"gmailOAuth2\":{\"id\":\"5GhcPqZ48DrfujWd\",\"name\":\"Gmail account\"}},\"typeVersion\":2.1},{\"id\":\"7cf38850-939c-4c8e-af62-1f730d5b7e34\",\"name\":\"mail_archiver\",\"type\":\"n8n-nodes-base.gmailTool\",\"position\":[220,0],\"webhookId\":\"81956225-38dd-4acf-b97a-8e68f332f56a\",\"parameters\":{\"labelIds\":[\"INBOX\"],\"messageId\":\"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Message_ID', ``, 'string') }}\",\"operation\":\"removeLabels\"},\"credentials\":{\"gmailOAuth2\":{\"id\":\"5GhcPqZ48DrfujWd\",\"name\":\"Gmail account\"}},\"typeVersion\":2.1},{\"id\":\"5fab497e-a632-4565-8048-7ae9b209728d\",\"name\":\"Aggregate\",\"type\":\"n8n-nodes-base.aggregate\",\"position\":[380,-220],\"parameters\":{\"options\":{},\"aggregate\":\"aggregateAllItemData\"},\"typeVersion\":1},{\"id\":\"f7144884-6ba6-4e97-be35-f5f8b27d56ad\",\"name\":\"Telegram\",\"type\":\"n8n-nodes-base.telegram\",\"position\":[820,-220],\"webhookId\":\"6324ebbf-b2c3-42c3-b4ee-849184380b4f\",\"parameters\":{\"text\":\"={{ $json.output }}\",\"chatId\":\"={{ $('Telegram Trigger').item.json.message.chat.id }}\",\"additionalFields\":{}},\"credentials\":{\"telegramApi\":{\"id\":\"ZOl2ZojetuN1uFiX\",\"name\":\"My Mail Agent Bot via Telegram\"}},\"typeVersion\":1.2},{\"id\":\"9236fbc1-ffad-4bf0-b3a1-5d389e5b422c\",\"name\":\"OpenRouter Chat Model1\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatOpenRouter\",\"position\":[520,0],\"parameters\":{\"model\":\"openai/gpt-4.1-nano\",\"options\":{}},\"credentials\":{\"openRouterApi\":{\"id\":\"eQmkAlMDYm8oEtBL\",\"name\":\"OpenRouter account\"}},\"typeVersion\":1},{\"id\":\"e0ec10ca-ad72-4784-891e-5bd5bcff7082\",\"name\":\"Reporter\",\"type\":\"@n8n/n8n-nodes-langchain.agent\",\"position\":[520,-220],\"parameters\":{\"text\":\"=Summarize data\\n```\\n{{ $json.data.map(item => item.output + '\\\\n\\\\n') }}\\n```\\n\",\"options\":{\"systemMessage\":\"=# persona\\n* You are a helpful assistant.\\n\"},\"promptType\":\"define\"},\"typeVersion\":1.8},{\"id\":\"9b4f8e14-7b9c-45b3-97cb-32f2fe756440\",\"name\":\"Get mails in INBOX\",\"type\":\"n8n-nodes-base.gmail\",\"position\":[-320,-220],\"webhookId\":\"f4c95906-916d-4c94-8e35-cb37c9472043\",\"parameters\":{\"filters\":{\"labelIds\":[\"INBOX\"]},\"operation\":\"getAll\",\"returnAll\":true},\"credentials\":{\"gmailOAuth2\":{\"id\":\"5GhcPqZ48DrfujWd\",\"name\":\"Gmail account\"}},\"typeVersion\":2.1},{\"id\":\"13088de9-6f96-463e-bcb6-92f97d7144d9\",\"name\":\"Filter processed\",\"type\":\"n8n-nodes-base.filter\",\"position\":[-120,-220],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"1091eba0-3d75-47b6-92c5-404f93e263ae\",\"operator\":{\"type\":\"array\",\"operation\":\"notContains\",\"rightType\":\"any\"},\"leftValue\":\"={{ $json.labels.map(item => item.name)}}\",\"rightValue\":\"NotNeed\"},{\"id\":\"31160689-98ce-43ac-8c7b-116cd7da5ebc\",\"operator\":{\"type\":\"array\",\"operation\":\"notContains\",\"rightType\":\"any\"},\"leftValue\":\"={{ $json.labels.map(item => item.name)}}\",\"rightValue\":\"MustRead\"}]}},\"typeVersion\":2.2},{\"id\":\"317ea413-e8fd-4148-8115-8b4d2b9a7fe4\",\"name\":\"Categoriser\",\"type\":\"@n8n/n8n-nodes-langchain.agent\",\"position\":[80,-220],\"parameters\":{\"text\":\"=<task>\\nProcess mail\\n</task>\\n<mail>\\n<id>{{ $json.id }}</id>\\n<from>{{ $json.From }}</from>\\n<subject>{{ $json.Subject }}</subject>\\n<body>{{ $json.snippet }}</body>\\n</mail>\",\"options\":{\"systemMessage\":\"=<persona>\\nYou are an email processing assistant.\\n</persona>\\n<task>\\nLook at the content of the email and decide whether to apply a label or archive it, processing it only once. First, archive those that are absolutely unnecessary using the mail_archiver tool. This judgment is the top priority. After that, if it does not fall into that category, determine whether it should be read based on the following criteria and use the mail_label_setter tool to apply the label.\\n<case>Absolutely unnecessary: Archive using the mail_archiver tool</case>\\n<case>Needs to be read: Apply \\\"Label_[label_id]\\\" using the mail_label_setter tool</case>\\n<case>Other: Apply \\\"Label_[label_id]\\\" using the mail_label_setter tool</case>\\nReport the processing results carefully.\\n</task>\\n<rules>\\n<Archive>\\nEmails that are absolutely unnecessary and will be archived\\n<item>[list up your rule1]</item>\\n<item>[list up your rule2]</item>\\n</Archive><MustRead>\\nEmails that need to be read\\n<item>[list up your rule1]</item>\\n<item>[list up your rule2]</item>\\n</MustRead>\\n<Other>\\nEmails that are not necessary to read but will not be archived\\n<item>[list up your rule1]</item>\\n<item>[list up your rule2]</item>\\n</Other>\\n</rules>\"},\"promptType\":\"define\"},\"typeVersion\":1.7}],\"pinData\":{},\"connections\":{\"Reporter\":{\"main\":[[{\"node\":\"Telegram\",\"type\":\"main\",\"index\":0}]]},\"Aggregate\":{\"main\":[[{\"node\":\"Reporter\",\"type\":\"main\",\"index\":0}]]},\"Categoriser\":{\"main\":[[{\"node\":\"Aggregate\",\"type\":\"main\",\"index\":0}]]},\"mail_archiver\":{\"ai_tool\":[[{\"node\":\"Categoriser\",\"type\":\"ai_tool\",\"index\":0}]]},\"Filter processed\":{\"main\":[[{\"node\":\"Categoriser\",\"type\":\"main\",\"index\":0}]]},\"Telegram Trigger\":{\"main\":[[{\"node\":\"Get mails in INBOX\",\"type\":\"main\",\"index\":0}]]},\"mail_label_setter\":{\"ai_tool\":[[{\"node\":\"Categoriser\",\"type\":\"ai_tool\",\"index\":0}]]},\"Get mails in INBOX\":{\"main\":[[{\"node\":\"Filter processed\",\"type\":\"main\",\"index\":0}]]},\"OpenRouter Chat Model\":{\"ai_languageModel\":[[{\"node\":\"Categoriser\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"OpenRouter Chat Model1\":{\"ai_languageModel\":[[{\"node\":\"Reporter\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"When clicking ‘Test workflow’\":{\"main\":[[{\"node\":\"Get mails in INBOX\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "### **Who is this for?**\n\nThis workflow is perfect for busy professionals, students, or anyone who struggles to keep their Gmail inbox organized and clutter-free.\n\n### **What problem is this workflow solving?**\n\nIt helps you avoid email overload by automating the process of organizing your Gmail inbox. Unnecessary emails are archived, while important emails are categorized into \"MustRead\" or \"NotNeed\" for better prioritization.\n\n### **What this workflow does**\n\n  * Connects to your Gmail inbox.\n  * Automatically archives emails that are unnecessary or irrelevant.\n  * Sorts remaining emails into two categories: \n    * **MustRead** : Emails that require immediate attention.\n    * **NotNeed** : Less critical emails for review later.\n\n\n\n### **Setup**\n\n  1. Connect your Gmail account to the workflow.\n  2. Define the criteria for \"MustRead\" and \"NotNeed\" emails by updating the filter rules in the nodes.\n  3. Activate the workflow to start organizing your inbox.\n\n\n\n### **How to customize this workflow to your needs**\n\n  * Adjust the filters for archiving emails based on your specific preferences.\n  * Modify the sorting rules for \"MustRead\" and \"NotNeed\" categories to match your workflow.\n  * Add additional actions, such as sending notifications for \"MustRead\" emails.\n\n\n",
  "readme_html": "<!--[--><div data-v-006f9244=\"\"><h3><strong>Who is this for?</strong></h3>\n<p>This workflow is perfect for busy professionals, students, or anyone who struggles to keep their Gmail inbox organized and clutter-free.</p>\n<h3><strong>What problem is this workflow solving?</strong></h3>\n<p>It helps you avoid email overload by automating the process of organizing your Gmail inbox. Unnecessary emails are archived, while important emails are categorized into \"MustRead\" or \"NotNeed\" for better prioritization.</p>\n<h3><strong>What this workflow does</strong></h3>\n<ul>\n<li>Connects to your Gmail inbox.</li>\n<li>Automatically archives emails that are unnecessary or irrelevant.</li>\n<li>Sorts remaining emails into two categories:\n<ul>\n<li><strong>MustRead</strong>: Emails that require immediate attention.</li>\n<li><strong>NotNeed</strong>: Less critical emails for review later.</li>\n</ul>\n</li>\n</ul>\n<h3><strong>Setup</strong></h3>\n<ol>\n<li>Connect your Gmail account to the workflow.</li>\n<li>Define the criteria for \"MustRead\" and \"NotNeed\" emails by updating the filter rules in the nodes.</li>\n<li>Activate the workflow to start organizing your inbox.</li>\n</ol>\n<h3><strong>How to customize this workflow to your needs</strong></h3>\n<ul>\n<li>Adjust the filters for archiving emails based on your specific preferences.</li>\n<li>Modify the sorting rules for \"MustRead\" and \"NotNeed\" categories to match your workflow.</li>\n<li>Add additional actions, such as sending notifications for \"MustRead\" emails.</li>\n</ul>\n</div><!--]-->",
  "readme_zh": "### **适用人群**\n\n本工作流非常适合忙碌的职场人士、学生，或是任何苦于整理Gmail收件箱、希望保持收件箱清爽的用户。\n\n### **解决什么问题？**\n\n通过自动化分类Gmail邮件来避免信息过载。无关邮件自动归档，重要邮件则归类为\"必读\"或\"非必要\"，实现优先级管理。\n\n### **核心功能**\n\n  * 接入您的Gmail收件箱\n  * 自动归档非必要邮件\n  * 将剩余邮件智能分类：\n    * **必读**：需立即处理的重要邮件\n    * **非必要**：可稍后处理的次要邮件\n\n### **设置步骤**\n\n  1. 将Gmail账户关联至工作流\n  2. 在节点中更新筛选规则，自定义\"必读\"和\"非必要\"邮件的判定标准\n  3. 启用工作流，开始自动整理收件箱\n\n### **个性化定制建议**\n\n  * 根据需求调整邮件归档筛选条件\n  * 修改\"必读\"和\"非必要\"分类规则以适应个人工作习惯\n  * 添加额外操作（如为\"必读\"邮件设置通知提醒）",
  "title_zh": "AI驱动的Gmail邮件自动归档与优先级标签管理",
  "publish_date_absolute": "2025-05-03",
  "publish_date_zh": "最后更新于3天前",
  "workflow_json_zh": "{\"meta\":{\"instanceId\":\"6af2f94153ea0551e6264b16187490bd4c4739c7f5f3d7adab90c5cf186e22a1\",\"templateCredsSetupCompleted\":true},\"nodes\":[{\"id\":\"43e68fe1-7f48-4bc9-b19a-66d39bee5bbd\",\"name\":\"When clicking ‘Test workflow’\",\"type\":\"n8n-nodes-base.manualTrigger\",\"position\":[-520,20],\"parameters\":{},\"typeVersion\":1},{\"id\":\"32aa401a-60c3-4436-94d5-5ba09d3be6ae\",\"name\":\"OpenRouter Chat Model\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatOpenRouter\",\"position\":[80,0],\"parameters\":{\"model\":\"openai/gpt-4.1-nano\",\"options\":{}},\"credentials\":{\"openRouterApi\":{\"id\":\"eQmkAlMDYm8oEtBL\",\"name\":\"OpenRouter account\"}},\"typeVersion\":1},{\"id\":\"f6d325b4-ff87-4bba-9f27-b68590c8a533\",\"name\":\"Telegram Trigger\",\"type\":\"n8n-nodes-base.telegramTrigger\",\"position\":[-520,-220],\"webhookId\":\"e61d3286-920e-406c-b787-d330cf897ef4\",\"parameters\":{\"updates\":[\"message\"],\"additionalFields\":{}},\"credentials\":{\"telegramApi\":{\"id\":\"ZOl2ZojetuN1uFiX\",\"name\":\"My Mail Agent Bot via Telegram\"}},\"typeVersion\":1.1},{\"id\":\"8e10c622-9bf8-414b-8364-185c5c4808a0\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-600,-480],\"parameters\":{\"width\":1660,\"height\":680,\"content\":\"## 邮件代理\\n对于收件箱中的邮件，将完全不必要的归档处理，其余则根据相关性进行标签分类。\"},\"typeVersion\":1},{\"id\":\"2e664cd4-37af-4b8f-84a5-ff07911b8aaa\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-560,-380],\"parameters\":{\"color\":5,\"width\":180,\"height\":360,\"content\":\"### 触发器\\n通过Telegram通信运行\"},\"typeVersion\":1},{\"id\":\"966af8d0-bfca-40fa-b97c-ec1bb7de82d2\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-360,-380],\"parameters\":{\"color\":4,\"width\":180,\"height\":360,\"content\":\"### 通过Gmail获取邮件\\n获取Gmail收件箱中的所有邮件。\\n（收件箱 = 标签：INBOX）\"},\"typeVersion\":1},{\"id\":\"07dabeda-a075-4e45-9ecf-9a0e6d0df0b2\",\"name\":\"Sticky Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-160,-380],\"parameters\":{\"color\":4,\"width\":180,\"height\":360,\"content\":\"### 过滤\\n筛选掉已处理的邮件，以避免人工智能进行不必要的工作。\"},\"typeVersion\":1},{\"id\":\"b9a96646-283e-4328-8c79-57befa97bb69\",\"name\":\"Sticky Note4\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[40,-380],\"parameters\":{\"color\":3,\"width\":980,\"height\":540,\"content\":\"### AI代理\\n逐一检查每封邮件，根据给定的提示将其分类为必要或非必要，并指示Gmail应用相应的标签。\"},\"typeVersion\":1},{\"id\":\"32c73c57-61b5-430b-a011-f0b44fa2b226\",\"name\":\"mail_label_setter\",\"type\":\"n8n-nodes-base.gmailTool\",\"position\":[360,0],\"webhookId\":\"37bb94d2-6aeb-4038-afc7-e25a330e7860\",\"parameters\":{\"labelIds\":\"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Label_Names_or_IDs', ``, 'string') }}\",\"messageId\":\"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Message_ID', ``, 'string') }}\",\"operation\":\"addLabels\"},\"credentials\":{\"gmailOAuth2\":{\"id\":\"5GhcPqZ48DrfujWd\",\"name\":\"Gmail account\"}},\"typeVersion\":2.1},{\"id\":\"7cf38850-939c-4c8e-af62-1f730d5b7e34\",\"name\":\"mail_archiver\",\"type\":\"n8n-nodes-base.gmailTool\",\"position\":[220,0],\"webhookId\":\"81956225-38dd-4acf-b97a-8e68f332f56a\",\"parameters\":{\"labelIds\":[\"INBOX\"],\"messageId\":\"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Message_ID', ``, 'string') }}\",\"operation\":\"removeLabels\"},\"credentials\":{\"gmailOAuth2\":{\"id\":\"5GhcPqZ48DrfujWd\",\"name\":\"Gmail account\"}},\"typeVersion\":2.1},{\"id\":\"5fab497e-a632-4565-8048-7ae9b209728d\",\"name\":\"Aggregate\",\"type\":\"n8n-nodes-base.aggregate\",\"position\":[380,-220],\"parameters\":{\"options\":{},\"aggregate\":\"aggregateAllItemData\"},\"typeVersion\":1},{\"id\":\"f7144884-6ba6-4e97-be35-f5f8b27d56ad\",\"name\":\"Telegram\",\"type\":\"n8n-nodes-base.telegram\",\"position\":[820,-220],\"webhookId\":\"6324ebbf-b2c3-42c3-b4ee-849184380b4f\",\"parameters\":{\"text\":\"={{ $json.output }}\",\"chatId\":\"={{ $('Telegram Trigger').item.json.message.chat.id }}\",\"additionalFields\":{}},\"credentials\":{\"telegramApi\":{\"id\":\"ZOl2ZojetuN1uFiX\",\"name\":\"My Mail Agent Bot via Telegram\"}},\"typeVersion\":1.2},{\"id\":\"9236fbc1-ffad-4bf0-b3a1-5d389e5b422c\",\"name\":\"OpenRouter Chat Model1\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatOpenRouter\",\"position\":[520,0],\"parameters\":{\"model\":\"openai/gpt-4.1-nano\",\"options\":{}},\"credentials\":{\"openRouterApi\":{\"id\":\"eQmkAlMDYm8oEtBL\",\"name\":\"OpenRouter account\"}},\"typeVersion\":1},{\"id\":\"e0ec10ca-ad72-4784-891e-5bd5bcff7082\",\"name\":\"Reporter\",\"type\":\"@n8n/n8n-nodes-langchain.agent\",\"position\":[520,-220],\"parameters\":{\"text\":\"=Summarize data\\n```\\n{{ $json.data.map(item => item.output + '\\\\n\\\\n') }}\\n```\\n\",\"options\":{\"systemMessage\":\"=# persona\\n* You are a helpful assistant.\\n\"},\"promptType\":\"define\"},\"typeVersion\":1.8},{\"id\":\"9b4f8e14-7b9c-45b3-97cb-32f2fe756440\",\"name\":\"Get mails in INBOX\",\"type\":\"n8n-nodes-base.gmail\",\"position\":[-320,-220],\"webhookId\":\"f4c95906-916d-4c94-8e35-cb37c9472043\",\"parameters\":{\"filters\":{\"labelIds\":[\"INBOX\"]},\"operation\":\"getAll\",\"returnAll\":true},\"credentials\":{\"gmailOAuth2\":{\"id\":\"5GhcPqZ48DrfujWd\",\"name\":\"Gmail account\"}},\"typeVersion\":2.1},{\"id\":\"13088de9-6f96-463e-bcb6-92f97d7144d9\",\"name\":\"Filter processed\",\"type\":\"n8n-nodes-base.filter\",\"position\":[-120,-220],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"1091eba0-3d75-47b6-92c5-404f93e263ae\",\"operator\":{\"type\":\"array\",\"operation\":\"notContains\",\"rightType\":\"any\"},\"leftValue\":\"={{ $json.labels.map(item => item.name)}}\",\"rightValue\":\"NotNeed\"},{\"id\":\"31160689-98ce-43ac-8c7b-116cd7da5ebc\",\"operator\":{\"type\":\"array\",\"operation\":\"notContains\",\"rightType\":\"any\"},\"leftValue\":\"={{ $json.labels.map(item => item.name)}}\",\"rightValue\":\"MustRead\"}]}},\"typeVersion\":2.2},{\"id\":\"317ea413-e8fd-4148-8115-8b4d2b9a7fe4\",\"name\":\"Categoriser\",\"type\":\"@n8n/n8n-nodes-langchain.agent\",\"position\":[80,-220],\"parameters\":{\"text\":\"=<task>\\nProcess mail\\n</task>\\n<mail>\\n<id>{{ $json.id }}</id>\\n<from>{{ $json.From }}</from>\\n<subject>{{ $json.Subject }}</subject>\\n<body>{{ $json.snippet }}</body>\\n</mail>\",\"options\":{\"systemMessage\":\"=<persona>\\nYou are an email processing assistant.\\n</persona>\\n<task>\\nLook at the content of the email and decide whether to apply a label or archive it, processing it only once. First, archive those that are absolutely unnecessary using the mail_archiver tool. This judgment is the top priority. After that, if it does not fall into that category, determine whether it should be read based on the following criteria and use the mail_label_setter tool to apply the label.\\n<case>Absolutely unnecessary: Archive using the mail_archiver tool</case>\\n<case>Needs to be read: Apply \\\"Label_[label_id]\\\" using the mail_label_setter tool</case>\\n<case>Other: Apply \\\"Label_[label_id]\\\" using the mail_label_setter tool</case>\\nReport the processing results carefully.\\n</task>\\n<rules>\\n<Archive>\\nEmails that are absolutely unnecessary and will be archived\\n<item>[list up your rule1]</item>\\n<item>[list up your rule2]</item>\\n</Archive><MustRead>\\nEmails that need to be read\\n<item>[list up your rule1]</item>\\n<item>[list up your rule2]</item>\\n</MustRead>\\n<Other>\\nEmails that are not necessary to read but will not be archived\\n<item>[list up your rule1]</item>\\n<item>[list up your rule2]</item>\\n</Other>\\n</rules>\"},\"promptType\":\"define\"},\"typeVersion\":1.7}],\"pinData\":{},\"connections\":{\"Reporter\":{\"main\":[[{\"node\":\"Telegram\",\"type\":\"main\",\"index\":0}]]},\"Aggregate\":{\"main\":[[{\"node\":\"Reporter\",\"type\":\"main\",\"index\":0}]]},\"Categoriser\":{\"main\":[[{\"node\":\"Aggregate\",\"type\":\"main\",\"index\":0}]]},\"mail_archiver\":{\"ai_tool\":[[{\"node\":\"Categoriser\",\"type\":\"ai_tool\",\"index\":0}]]},\"Filter processed\":{\"main\":[[{\"node\":\"Categoriser\",\"type\":\"main\",\"index\":0}]]},\"Telegram Trigger\":{\"main\":[[{\"node\":\"Get mails in INBOX\",\"type\":\"main\",\"index\":0}]]},\"mail_label_setter\":{\"ai_tool\":[[{\"node\":\"Categoriser\",\"type\":\"ai_tool\",\"index\":0}]]},\"Get mails in INBOX\":{\"main\":[[{\"node\":\"Filter processed\",\"type\":\"main\",\"index\":0}]]},\"OpenRouter Chat Model\":{\"ai_languageModel\":[[{\"node\":\"Categoriser\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"OpenRouter Chat Model1\":{\"ai_languageModel\":[[{\"node\":\"Reporter\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"When clicking ‘Test workflow’\":{\"main\":[[{\"node\":\"Get mails in INBOX\",\"type\":\"main\",\"index\":0}]]}}}"
}