{
  "title": "Generate AI Prompts with Google Gemini and store them in Airtable",
  "url": "https://n8n.io/workflows/3027-generate-ai-prompts-with-google-gemini-and-store-them-in-airtable/",
  "category": "AI",
  "category_url": "https://n8n.io/workflows/categories/ai/?count=20",
  "author": "Imperol",
  "publish_date": "Last update 2 months ago",
  "content": "",
  "workflow_json": "{\"meta\":{\"instanceId\":\"db80165df40cb07c0377167c050b3f9ab0b0fb04f0e8cae0dc53f5a8527103ca\",\"templateCredsSetupCompleted\":true},\"nodes\":[{\"id\":\"ed5363cf-1fb6-4662-b12c-073b2b3a3576\",\"name\":\"When chat message received\",\"type\":\"@n8n/n8n-nodes-langchain.chatTrigger\",\"position\":[-240,140],\"webhookId\":\"ebe97b63-ae4b-40e7-9738-b7cf7ffbc8b6\",\"parameters\":{\"options\":{}},\"typeVersion\":1.1},{\"id\":\"e47a166f-3e70-433e-ad0d-2100309cac92\",\"name\":\"Google Gemini Chat Model\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatGoogleGemini\",\"position\":[-60,500],\"parameters\":{\"options\":{\"topP\":1},\"modelName\":\"models/gemini-2.0-flash-lite\"},\"credentials\":{\"googlePalmApi\":{\"id\":\"Xp5T9q3YYxBIw2nd\",\"name\":\"Google Gemini(PaLM) Api account✅\"}},\"typeVersion\":1},{\"id\":\"5474805f-8d18-4a09-a3ea-5602af97a5de\",\"name\":\"Auto-fixing Output Parser\",\"type\":\"@n8n/n8n-nodes-langchain.outputParserAutofixing\",\"position\":[500,360],\"parameters\":{\"options\":{}},\"typeVersion\":1},{\"id\":\"d9a0eadc-54c7-4980-b4f8-79fd77627c32\",\"name\":\"Structured Output Parser\",\"type\":\"@n8n/n8n-nodes-langchain.outputParserStructured\",\"position\":[600,520],\"parameters\":{\"jsonSchemaExample\":\"{\\n\\t\\\"name\\\": \\\"Name of the prompt\\\",\\n    \\\"category\\\" : \\\"the prompt category\\\"\\n}\"},\"typeVersion\":1.2},{\"id\":\"898f64cd-2332-42ad-9bac-a817dd9bf3d7\",\"name\":\"Edit Fields\",\"type\":\"n8n-nodes-base.set\",\"position\":[220,140],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"9c5fec90-b7f0-45f3-81a3-22e0956fc3bf\",\"name\":\"text\",\"type\":\"string\",\"value\":\"={{ $json.text }}\"}]}},\"typeVersion\":3.4},{\"id\":\"4bbd160a-98bd-4622-a54e-77b61ff91b46\",\"name\":\"Google Gemini Chat Model1\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatGoogleGemini\",\"position\":[380,540],\"parameters\":{\"options\":{\"topP\":1},\"modelName\":\"models/gemini-2.0-flash-lite\"},\"credentials\":{\"googlePalmApi\":{\"id\":\"Xp5T9q3YYxBIw2nd\",\"name\":\"Google Gemini(PaLM) Api account✅\"}},\"typeVersion\":1},{\"id\":\"f45cbed4-c2b8-4f1b-8026-4686324a714a\",\"name\":\"Return results\",\"type\":\"n8n-nodes-base.set\",\"position\":[960,140],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"40aba86b-57b7-4c74-8e9f-d09cd2f344c5\",\"name\":\"text\",\"type\":\"string\",\"value\":\"={{ $('Generate a new prompt').item.json.text }}\"}]}},\"typeVersion\":3.4},{\"id\":\"25650ec5-b559-4bfc-a95a-f81c674bc680\",\"name\":\"Categorize and name Prompt\",\"type\":\"@n8n/n8n-nodes-langchain.chainLlm\",\"position\":[360,140],\"parameters\":{\"text\":\"={{ $json.text }}\",\"messages\":{\"messageValues\":[{\"message\":\"=Categorize the above prompt into a category that it can fall into\"}]},\"promptType\":\"define\",\"hasOutputParser\":true},\"typeVersion\":1.5},{\"id\":\"c324d952-0722-40aa-981c-fcb2007b43b9\",\"name\":\"set prompt fields\",\"type\":\"n8n-nodes-base.set\",\"position\":[660,140],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"cbf3b587-67fd-4f08-b50f-53561e869827\",\"name\":\"name\",\"type\":\"string\",\"value\":\"={{ $json.output.name }}\"},{\"id\":\"7fda5833-9a3b-4c8a-b18d-4c31b35dae94\",\"name\":\"category\",\"type\":\"string\",\"value\":\"={{ $json.output.category }}\"},{\"id\":\"50f06ab3-97d5-43cb-83ff-1a6aac45251b\",\"name\":\"Prompt\",\"type\":\"string\",\"value\":\"={{ $('Edit Fields').item.json.text }}\"}]}},\"typeVersion\":3.4},{\"id\":\"97ad8d84-141e-4c21-8ce4-930dbe921f76\",\"name\":\"add to airtable\",\"type\":\"n8n-nodes-base.airtable\",\"position\":[800,140],\"parameters\":{\"base\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"app994hU3fOw0ssrx\",\"cachedResultUrl\":\"https://airtable.com/app994hU3fOw0ssrx\",\"cachedResultName\":\"Prompt Library\"},\"table\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"tbldwJrCK2HmAeknA\",\"cachedResultUrl\":\"https://airtable.com/app994hU3fOw0ssrx/tbldwJrCK2HmAeknA\",\"cachedResultName\":\"Prompt Library\"},\"columns\":{\"value\":{\"Name\":\"={{ $json.name }}\",\"Prompt\":\"={{ $json.Prompt }}\",\"Category\":\"={{ $json.category }}\"},\"schema\":[{\"id\":\"Name\",\"type\":\"string\",\"display\":true,\"removed\":false,\"readOnly\":false,\"required\":false,\"displayName\":\"Name\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"Prompt\",\"type\":\"string\",\"display\":true,\"removed\":false,\"readOnly\":false,\"required\":false,\"displayName\":\"Prompt\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"Created ON\",\"type\":\"string\",\"display\":true,\"removed\":true,\"readOnly\":true,\"required\":false,\"displayName\":\"Created ON\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"Updated\",\"type\":\"string\",\"display\":true,\"removed\":true,\"readOnly\":true,\"required\":false,\"displayName\":\"Updated\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"Category\",\"type\":\"string\",\"display\":true,\"removed\":false,\"readOnly\":false,\"required\":false,\"displayName\":\"Category\",\"defaultMatch\":false,\"canBeUsedToMatch\":true}],\"mappingMode\":\"defineBelow\",\"matchingColumns\":[],\"attemptToConvertTypes\":false,\"convertFieldsToString\":false},\"options\":{},\"operation\":\"create\"},\"credentials\":{\"airtableTokenApi\":{\"id\":\"CAa937hASXcJZWTv\",\"name\":\"Airtable Personal Access Token account✅\"}},\"typeVersion\":2.1},{\"id\":\"516dc434-25d9-4011-9453-bb28521823ca\",\"name\":\"Generate a new prompt\",\"type\":\"@n8n/n8n-nodes-langchain.chainLlm\",\"position\":[-80,140],\"parameters\":{\"messages\":{\"messageValues\":[{\"message\":\"=You are an **expert n8n prompt engineer**, specializing in creating highly optimized, context-aware prompts for AI agents in n8n workflows. Your primary goal is to ensure AI agents execute well-defined tasks **accurately, autonomously, and efficiently**.  \\n\\n### Instructions  \\n1. **Define the AI Agent's Role and Rules**  \\n   - Use a structured role definition format:  \\n     `\\\"You are a [SPECIFIC ROLE] working for [SPECIFIC BUSINESS CONTEXT].\\\"`  \\n   - Clearly specify the agent's responsibilities and scope.  \\n\\n2. **Provide Task Instructions**  \\n   - Use a **step-by-step** numbered list to outline the process.  \\n   - Ensure the instructions allow for flexibility but prevent errors.  \\n\\n3. **Set Rules to Guide AI Behavior**  \\n   - Enumerate key constraints such as:  \\n     - Timezone requirements  \\n     - Prohibitions on making assumptions  \\n     - Required formatting for responses  \\n\\n4. **Use Few-Shot Prompting**  \\n   - Provide clear examples of desired outputs inside `<example>` tags.  \\n\\n5. **Include Additional Context**  \\n   - Define relevant business details, the current date/time, and any required environmental context.  \\n\\n---\\n\\n## Input Layer  \\n### Structuring User Inputs  \\n1. **Define Input Type**  \\n   - Specify whether inputs come from a human user (chat-based) or an external system (API calls).  \\n\\n2. **Handle Dynamic Inputs**  \\n   - Use placeholders (e.g., `{customer_name}`, `{appointment_date}`) for adaptable prompts.  \\n\\n3. **Ensure Personalization**  \\n   - Format prompts naturally while maintaining clarity and specificity.  \\n\\n4. **Merge Static & Dynamic Data**  \\n   - Concatenate fixed prompt structures with real-time system data from n8n.  \\n\\n---\\n## Action Layer  \\n### Tool and Function Calling  \\n1. **Standardized Tool Naming**  \\n   - Use `snake_case` names for tools (e.g., `check_calendar_availability`).  \\n\\n2. **Provide Clear Tool Descriptions**  \\n   - Example:  \\n     `\\\"Use the `fetch_customer_data` tool to retrieve details about a specific user based on their email address.\\\"`  \\n\\n3. **Specify Tool Parameters & Expected Responses**  \\n   - Define required inputs, expected formats, and error handling strategies.  \\n\\n4. **Avoid Hallucinations**  \\n   - AI should **only** use tools for their defined purposes. If information is missing, request clarification instead of guessing.  \\n\\n---\\n## Example Prompt for an AI Agent in n8n  \\n\\n```yaml\\n# System Layer\\n## Role\\nYou are a **Scheduling Assistant** working for a **beauty salon**. Your role is to help customers book appointments.  \\n\\n## Instructions\\n1. Ask the user for their preferred appointment date.  \\n2. Use `check_calendar_availability` to find open slots.  \\n3. If no slots are available, ask the user to select another day.  \\n4. Capture the user’s **full name** and **email**.  \\n5. Use `create_calendar_appointment` to confirm the booking.  \\n6. Notify the user with appointment details.  \\n\\n## Rules\\n- Always use **UTC+1 timezone**.  \\n- Do not assume details—ask if unsure.  \\n- If asked about non-scheduling topics, respond: `\\\"I can only assist with booking appointments.\\\"`  \\n\\n## Few-shot Example  \\n<example>\\n\\\"I have successfully booked your appointment:\\n- Date & Time: **Wednesday, 15 March 2025, 14:00 (UTC+1)**\\n- Booking Email: **jane.doe@example.com**\\nIf you need to cancel, please call +49 123 456 789.\\\"\\n</example>\\n```\\n---\\n## Key Considerations  \\n✅ **Avoid vague roles** (e.g., \\\"You are an assistant\\\"). Always specify **business context**.  \\n✅ **Keep task steps structured** but flexible.  \\n✅ **Provide explicit tool instructions** in a separate section.  \\n✅ **Enable AI to ask clarifying questions** instead of making assumptions.  \\n✅ **Use examples to guide expected outputs.**  \\n\\n\\n\"}]}},\"typeVersion\":1.5}],\"pinData\":{},\"connections\":{\"Edit Fields\":{\"main\":[[{\"node\":\"Categorize and name Prompt\",\"type\":\"main\",\"index\":0}]]},\"add to airtable\":{\"main\":[[{\"node\":\"Return results\",\"type\":\"main\",\"index\":0}]]},\"set prompt fields\":{\"main\":[[{\"node\":\"add to airtable\",\"type\":\"main\",\"index\":0}]]},\"Generate a new prompt\":{\"main\":[[{\"node\":\"Edit Fields\",\"type\":\"main\",\"index\":0}]]},\"Google Gemini Chat Model\":{\"ai_languageModel\":[[{\"node\":\"Generate a new prompt\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"Structured Output Parser\":{\"ai_outputParser\":[[{\"node\":\"Auto-fixing Output Parser\",\"type\":\"ai_outputParser\",\"index\":0}]]},\"Auto-fixing Output Parser\":{\"ai_outputParser\":[[{\"node\":\"Categorize and name Prompt\",\"type\":\"ai_outputParser\",\"index\":0}]]},\"Google Gemini Chat Model1\":{\"ai_languageModel\":[[{\"node\":\"Categorize and name Prompt\",\"type\":\"ai_languageModel\",\"index\":0},{\"node\":\"Auto-fixing Output Parser\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"Categorize and name Prompt\":{\"main\":[[{\"node\":\"set prompt fields\",\"type\":\"main\",\"index\":0}]]},\"When chat message received\":{\"main\":[[{\"node\":\"Generate a new prompt\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "This workflow is designed to generate prompts for AI agents and store them in Airtable.\n\nIt starts by receiving a chat message, processes it to create a structured prompt, categorizes the prompt, and finally stores it in Airtable.\n\n## 2\\. Setup Instructions\n\n### Prerequisites\n\n  * **AI model eg Gemini, openAI etc**\n  * **Airtable base and table or other storage tool**\n\n\n\n### Step-by-Step Guide\n\n  1. **Clone the Workflow**\n\n\n  * Copy the provided workflow JSON and import it into your n8n instance.\n\n\n  1. **Configure Credentials**\n\n\n  * Set up the Google Gemini(PaLM) API account credentials.\n  * Set up the Airtable Personal Access Token account credentials.\n\n\n  1. **Map Airtable Base and Table**\n\n\n  * Create a copy of the [Prompt Library](https://airtable.com/app994hU3fOw0ssrx/shrRxcst3vzWMKFcR) in Airtable.\n  * Map the Airtable base and table in the Airtable node.\n\n\n  1. **Customize Prompt Template**\n\n\n  * Edit the 'Create prompt' node to customize the prompt template as needed.\n\n\n\n### Configuration Options\n\n  * **Prompt Template:** Customize the prompt template in the 'Create prompt' node to fit your specific use case.\n  * **Airtable Mapping:** Ensure the Airtable base and table are correctly mapped in the Airtable node.\n\n\n\n## 4\\. Running and Troubleshooting\n\n### Running the Workflow\n\n  1. **Trigger the Workflow:** Send a chat message to trigger the workflow.\n  2. **Monitor Execution:** Use the n8n interface to monitor the workflow execution.\n  3. **Check Completion:** Verify that the prompt is stored in Airtable and check the chat interface for the result.\n\n\n\n### Troubleshooting Tips\n\n  * **API Issues:** Ensure that the APIs and Airtable credentials are correctly configured.\n  * **Data Mapping:** Verify that the Airtable base and table are correctly mapped.\n  * **Prompt Template:** Check the prompt template for any errors or inconsistencies.\n\n\n  1. Use Case Examples\n\n\n\nThis workflow is particularly useful in scenarios where you want to automate the generation and management of AI agent prompts.\n\nHere are some examples:\n\n**Rapid Prototyping of AI Agents:**\n\nQuickly generate and test different prompts for AI agents in various applications.\n\n  * **Content Creation:** Generate prompts for AI models that create blog posts, articles, or social media content.\n  * **Customer Service Automation:** Develop prompts for AI-powered chatbots to handle customer inquiries and support requests.\n  * **Educational Tools:** Create prompts for AI tutors or learning assistants.\n\n\n\n**Industries/Professionals:**\n\n  * **Software Development:** Developers building AI-powered applications.\n\n  * **Marketing:** Marketers automating content creation and social media management.\n\n  * **Customer Service:** Customer service managers implementing AI-driven chatbots.\n\n  * **Education:** Educators creating AI-based learning tools.\n\n\n\n\n**Practical Value:**\n\n  * **Time Savings:** Automates the prompt generation process, saving significant time and effort.\n\n  * **Improved Prompt Quality:** Leverages Google Gemini and structured prompt engineering principles to generate more effective prompts.\n\n  * **Centralized Prompt Management:** Stores prompts in Airtable for easy access, organization, and reuse.\n\n\n\n\n## 4\\. Running and Troubleshooting\n\n  * **Running the Workflow:**\n\n\n  1. Activate the workflow in n8n.\n  2. Send a chat message to the webhook URL configured in the \"When chat message received\" node.\n  3. Monitor the workflow execution in the n8n editor.\n\n\n  * **Monitoring Execution:**\n\n  * Check the execution log in n8n to see the data flowing through each node and identify any errors.\n\n  * **Checking for Successful Completion:**\n\n  * Verify that a new record is created in your Airtable base with the generated prompt, name, and category.\n\n  * Confirm that the \"Return results\" node sends back confirmation of the prompt in the chat interface.\n\n  * **Troubleshooting Tips:**\n\n  * **Error:** `400: Bad Request` in the Google Gemini nodes:\n\n  * **Cause:** Invalid API key or insufficient permissions.\n\n  * **Solution:** Double-check your Google Gemini API key and ensure that the API is enabled for your project.\n\n  * **Error:** Airtable node fails to create a record:\n\n  * **Cause:** Invalid Airtable credentials, incorrect Base ID or Table ID, or mismatched column names.\n\n  * **Solution:** Verify your Airtable API key, Base ID, Table ID, and column names. Ensure that the data types in n8n match the data types in your Airtable columns.\n\n\n\n\nFollow me on [Linkedin](https://www.linkedin.com/in/zacharia-kimotho/) for more\n",
  "readme_html": "<!--[--><div data-v-006f9244=\"\"><p>This workflow is designed to generate prompts for AI agents and store them in Airtable.</p>\n<p>It starts by receiving a chat message, processes it to create a structured prompt, categorizes the prompt, and finally stores it in Airtable.</p>\n<h2>2. Setup Instructions</h2>\n<h3>Prerequisites</h3>\n<ul>\n<li><strong>AI model eg Gemini, openAI etc</strong></li>\n<li><strong>Airtable base and table or other storage tool</strong></li>\n</ul>\n<h3>Step-by-Step Guide</h3>\n<ol>\n<li><strong>Clone the Workflow</strong></li>\n</ol>\n<ul>\n<li>Copy the provided workflow JSON and import it into your n8n instance.</li>\n</ul>\n<ol>\n<li><strong>Configure Credentials</strong></li>\n</ol>\n<ul>\n<li>Set up the Google Gemini(PaLM) API account credentials.</li>\n<li>Set up the Airtable Personal Access Token account credentials.</li>\n</ul>\n<ol>\n<li><strong>Map Airtable Base and Table</strong></li>\n</ol>\n<ul>\n<li>Create a copy of the <a href=\"https://airtable.com/app994hU3fOw0ssrx/shrRxcst3vzWMKFcR\" rel=\"ugc nofollow\" target=\"_blank\">Prompt Library</a> in Airtable.</li>\n<li>Map the Airtable base and table in the Airtable node.</li>\n</ul>\n<ol>\n<li><strong>Customize Prompt Template</strong></li>\n</ol>\n<ul>\n<li>Edit the 'Create prompt' node to customize the prompt template as needed.</li>\n</ul>\n<h3>Configuration Options</h3>\n<ul>\n<li><strong>Prompt Template:</strong> Customize the prompt template in the 'Create prompt' node to fit your specific use case.</li>\n<li><strong>Airtable Mapping:</strong> Ensure the Airtable base and table are correctly mapped in the Airtable node.</li>\n</ul>\n<h2>4. Running and Troubleshooting</h2>\n<h3>Running the Workflow</h3>\n<ol>\n<li><strong>Trigger the Workflow:</strong> Send a chat message to trigger the workflow.</li>\n<li><strong>Monitor Execution:</strong> Use the n8n interface to monitor the workflow execution.</li>\n<li><strong>Check Completion:</strong> Verify that the prompt is stored in Airtable and check the chat interface for the result.</li>\n</ol>\n<h3>Troubleshooting Tips</h3>\n<ul>\n<li><strong>API Issues:</strong> Ensure that the APIs and Airtable credentials are correctly configured.</li>\n<li><strong>Data Mapping:</strong> Verify that the Airtable base and table are correctly mapped.</li>\n<li><strong>Prompt Template:</strong> Check the prompt template for any errors or inconsistencies.</li>\n</ul>\n<ol>\n<li>Use Case Examples</li>\n</ol>\n<p>This workflow is particularly useful in scenarios where you want to automate the generation and management of AI agent prompts.</p>\n<p>Here are some examples:</p>\n<p><strong>Rapid Prototyping of AI Agents:</strong></p>\n<p>Quickly generate and test different prompts for AI agents in various applications.</p>\n<ul>\n<li><strong>Content Creation:</strong> Generate prompts for AI models that create blog posts, articles, or social media content.</li>\n<li><strong>Customer Service Automation:</strong> Develop prompts for AI-powered chatbots to handle customer inquiries and support requests.</li>\n<li><strong>Educational Tools:</strong> Create prompts for AI tutors or learning assistants.</li>\n</ul>\n<p><strong>Industries/Professionals:</strong></p>\n<ul>\n<li>\n<p><strong>Software Development:</strong> Developers building AI-powered applications.</p>\n</li>\n<li>\n<p><strong>Marketing:</strong> Marketers automating content creation and social media management.</p>\n</li>\n<li>\n<p><strong>Customer Service:</strong> Customer service managers implementing AI-driven chatbots.</p>\n</li>\n<li>\n<p><strong>Education:</strong> Educators creating AI-based learning tools.</p>\n</li>\n</ul>\n<p><strong>Practical Value:</strong></p>\n<ul>\n<li>\n<p><strong>Time Savings:</strong> Automates the prompt generation process, saving significant time and effort.</p>\n</li>\n<li>\n<p><strong>Improved Prompt Quality:</strong> Leverages Google Gemini and structured prompt engineering principles to generate more effective prompts.</p>\n</li>\n<li>\n<p><strong>Centralized Prompt Management:</strong> Stores prompts in Airtable for easy access, organization, and reuse.</p>\n</li>\n</ul>\n<h2>4. Running and Troubleshooting</h2>\n<ul>\n<li><strong>Running the Workflow:</strong></li>\n</ul>\n<ol>\n<li>Activate the workflow in n8n.</li>\n<li>Send a chat message to the webhook URL configured in the \"When chat message received\" node.</li>\n<li>Monitor the workflow execution in the n8n editor.</li>\n</ol>\n<ul>\n<li>\n<p><strong>Monitoring Execution:</strong></p>\n</li>\n<li>\n<p>Check the execution log in n8n to see the data flowing through each node and identify any errors.</p>\n</li>\n<li>\n<p><strong>Checking for Successful Completion:</strong></p>\n</li>\n<li>\n<p>Verify that a new record is created in your Airtable base with the generated prompt, name, and category.</p>\n</li>\n<li>\n<p>Confirm that the \"Return results\" node sends back confirmation of the prompt in the chat interface.</p>\n</li>\n<li>\n<p><strong>Troubleshooting Tips:</strong></p>\n</li>\n<li>\n<p><strong>Error:</strong> <code>400: Bad Request</code> in the Google Gemini nodes:</p>\n</li>\n<li>\n<p><strong>Cause:</strong> Invalid API key or insufficient permissions.</p>\n</li>\n<li>\n<p><strong>Solution:</strong> Double-check your Google Gemini API key and ensure that the API is enabled for your project.</p>\n</li>\n<li>\n<p><strong>Error:</strong> Airtable node fails to create a record:</p>\n</li>\n<li>\n<p><strong>Cause:</strong> Invalid Airtable credentials, incorrect Base ID or Table ID, or mismatched column names.</p>\n</li>\n<li>\n<p><strong>Solution:</strong> Verify your Airtable API key, Base ID, Table ID, and column names. Ensure that the data types in n8n match the data types in your Airtable columns.</p>\n</li>\n</ul>\n<p>Follow me on <a href=\"https://www.linkedin.com/in/zacharia-kimotho/\" rel=\"ugc nofollow\" target=\"_blank\">Linkedin</a> for more</p>\n</div><!--]-->",
  "readme_zh": "该工作流专为生成AI智能体提示词并存储至Airtable而设计。\n\n流程始于接收聊天消息，经处理后生成结构化提示词，分类后最终存入Airtable。\n\n## 2. 配置说明\n\n### 前置条件\n\n  * **AI模型（如Gemini、OpenAI等）**\n  * **Airtable数据库及表格（或其他存储工具）**\n\n### 分步指南\n\n  1. **克隆工作流**\n     * 复制提供的JSON工作流文件并导入n8n实例\n\n  2. **配置凭证**\n     * 设置Google Gemini(PaLM) API账户凭证\n     * 配置Airtable个人访问令牌账户凭证\n\n  3. **映射Airtable数据库**\n     * 在Airtable中复制[提示词库模板](https://airtable.com/app994hU3fOw0ssrx/shrRxcst3vzWMKFcR)\n     * 在Airtable节点中映射对应数据库和表格\n\n  4. **自定义提示模板**\n     * 根据需要编辑\"创建提示词\"节点中的模板\n\n### 配置选项\n\n  * **提示模板:** 在\"创建提示词\"节点中按需定制模板\n  * **Airtable映射:** 确保Airtable节点中数据库与表格映射正确\n\n## 4. 运行与排错\n\n### 执行工作流\n\n  1. **触发流程:** 发送聊天消息启动工作流\n  2. **监控执行:** 通过n8n界面查看运行状态\n  3. **验证结果:** 确认提示词已存入Airtable，并在聊天界面查看返回结果\n\n### 排错技巧\n\n  * **API问题:** 检查API和Airtable凭证配置\n  * **数据映射:** 核对Airtable数据库与表格映射关系\n  * **提示模板:** 检查模板是否存在错误或不一致\n\n## 1. 应用场景示例\n\n本工作流特别适用于需要自动化生成和管理AI智能体提示词的场景：\n\n**AI智能体快速原型开发:**\n  * **内容创作:** 生成博客/社交媒体内容的AI模型提示词\n  * **客服自动化:** 开发AI聊天机器人处理客户咨询\n  * **教育工具:** 创建AI辅导助手提示词\n\n**适用行业/人员:**\n  * **软件开发:** 构建AI应用的开发者\n  * **市场营销:** 自动化内容创作的营销人员\n  * **客户服务:** 部署AI聊天客服的管理者\n  * **教育领域:** 开发AI教学工具的教育工作者\n\n**核心价值:**\n  * **节省时间:** 自动化提示词生成流程\n  * **提升质量:** 基于Gemini和结构化提示工程生成高效提示\n  * **集中管理:** 通过Airtable实现提示词统一存储与调用\n\n## 4. 运行与排错（续）\n\n  * **执行工作流:**\n    1. 在n8n中激活工作流\n    2. 向\"接收聊天消息\"节点配置的webhook URL发送消息\n    3. 通过n8n编辑器监控执行过程\n\n  * **监控执行:**\n    * 查看n8n执行日志追踪各节点数据流\n\n  * **验证结果:**\n    * 确认Airtable中已生成包含提示词、名称和分类的新记录\n    * 检查\"返回结果\"节点是否在聊天界面返回确认信息\n\n  * **排错指南:**\n    * **错误:** Google Gemini节点报错`400: Bad Request`\n      * **原因:** API密钥无效或权限不足\n      * **解决:** 检查Gemini API密钥并确认项目已启用该API\n\n    * **错误:** Airtable节点记录创建失败\n      * **原因:** 凭证无效/数据库ID错误/列名不匹配\n      * **解决:** 核对API密钥、数据库ID、表格ID及列名，确保n8n数据类型与Airtable列定义一致\n\n关注我的[LinkedIn](https://www.linkedin.com/in/zacharia-kimotho/)获取更多资讯",
  "title_zh": "使用Google Gemini生成AI提示并存储在Airtable中",
  "publish_date_absolute": "2025-03-06",
  "publish_date_zh": "最后更新于2个月前",
  "workflow_json_zh": "{\n  \"meta\": {\n    \"instanceId\": \"db80165df40cb07c0377167c050b3f9ab0b0fb04f0e8cae0dc53f5a8527103ca\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"nodes\": [\n    {\n      \"id\": \"ed5363cf-1fb6-4662-b12c-073b2b3a3576\",\n      \"name\": \"When chat message received\",\n      \"type\": \"@n8n/n8n-nodes-langchain.chatTrigger\",\n      \"position\": [\n        -240,\n        140\n      ],\n      \"webhookId\": \"ebe97b63-ae4b-40e7-9738-b7cf7ffbc8b6\",\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"e47a166f-3e70-433e-ad0d-2100309cac92\",\n      \"name\": \"Google Gemini Chat Model\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatGoogleGemini\",\n      \"position\": [\n        -60,\n        500\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"topP\": 1\n        },\n        \"modelName\": \"models/gemini-2.0-flash-lite\"\n      },\n      \"credentials\": {\n        \"googlePalmApi\": {\n          \"id\": \"Xp5T9q3YYxBIw2nd\",\n          \"name\": \"Google Gemini(PaLM) Api account✅\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"5474805f-8d18-4a09-a3ea-5602af97a5de\",\n      \"name\": \"Auto-fixing Output Parser\",\n      \"type\": \"@n8n/n8n-nodes-langchain.outputParserAutofixing\",\n      \"position\": [\n        500,\n        360\n      ],\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"d9a0eadc-54c7-4980-b4f8-79fd77627c32\",\n      \"name\": \"Structured Output Parser\",\n      \"type\": \"@n8n/n8n-nodes-langchain.outputParserStructured\",\n      \"position\": [\n        600,\n        520\n      ],\n      \"parameters\": {\n        \"jsonSchemaExample\": \"{\\n\\t\\\"name\\\": \\\"Name of the prompt\\\",\\n    \\\"category\\\" : \\\"the prompt category\\\"\\n}\"\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"898f64cd-2332-42ad-9bac-a817dd9bf3d7\",\n      \"name\": \"Edit Fields\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        220,\n        140\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"9c5fec90-b7f0-45f3-81a3-22e0956fc3bf\",\n              \"name\": \"text\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.text }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"4bbd160a-98bd-4622-a54e-77b61ff91b46\",\n      \"name\": \"Google Gemini Chat Model1\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatGoogleGemini\",\n      \"position\": [\n        380,\n        540\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"topP\": 1\n        },\n        \"modelName\": \"models/gemini-2.0-flash-lite\"\n      },\n      \"credentials\": {\n        \"googlePalmApi\": {\n          \"id\": \"Xp5T9q3YYxBIw2nd\",\n          \"name\": \"Google Gemini(PaLM) Api account✅\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"f45cbed4-c2b8-4f1b-8026-4686324a714a\",\n      \"name\": \"Return results\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        960,\n        140\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"40aba86b-57b7-4c74-8e9f-d09cd2f344c5\",\n              \"name\": \"text\",\n              \"type\": \"string\",\n              \"value\": \"={{ $('Generate a new prompt').item.json.text }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"25650ec5-b559-4bfc-a95a-f81c674bc680\",\n      \"name\": \"Categorize and name Prompt\",\n      \"type\": \"@n8n/n8n-nodes-langchain.chainLlm\",\n      \"position\": [\n        360,\n        140\n      ],\n      \"parameters\": {\n        \"text\": \"={{ $json.text }}\",\n        \"messages\": {\n          \"messageValues\": [\n            {\n              \"message\": \"=Categorize the above prompt into a category that it can fall into\"\n            }\n          ]\n        },\n        \"promptType\": \"define\",\n        \"hasOutputParser\": true\n      },\n      \"typeVersion\": 1.5\n    },\n    {\n      \"id\": \"c324d952-0722-40aa-981c-fcb2007b43b9\",\n      \"name\": \"set prompt fields\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        660,\n        140\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"cbf3b587-67fd-4f08-b50f-53561e869827\",\n              \"name\": \"name\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.output.name }}\"\n            },\n            {\n              \"id\": \"7fda5833-9a3b-4c8a-b18d-4c31b35dae94\",\n              \"name\": \"category\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.output.category }}\"\n            },\n            {\n              \"id\": \"50f06ab3-97d5-43cb-83ff-1a6aac45251b\",\n              \"name\": \"Prompt\",\n              \"type\": \"string\",\n              \"value\": \"={{ $('Edit Fields').item.json.text }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"97ad8d84-141e-4c21-8ce4-930dbe921f76\",\n      \"name\": \"add to airtable\",\n      \"type\": \"n8n-nodes-base.airtable\",\n      \"position\": [\n        800,\n        140\n      ],\n      \"parameters\": {\n        \"base\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"app994hU3fOw0ssrx\",\n          \"cachedResultUrl\": \"https://airtable.com/app994hU3fOw0ssrx\",\n          \"cachedResultName\": \"Prompt Library\"\n        },\n        \"table\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"tbldwJrCK2HmAeknA\",\n          \"cachedResultUrl\": \"https://airtable.com/app994hU3fOw0ssrx/tbldwJrCK2HmAeknA\",\n          \"cachedResultName\": \"Prompt Library\"\n        },\n        \"columns\": {\n          \"value\": {\n            \"Name\": \"={{ $json.name }}\",\n            \"Prompt\": \"={{ $json.Prompt }}\",\n            \"Category\": \"={{ $json.category }}\"\n          },\n          \"schema\": [\n            {\n              \"id\": \"Name\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"readOnly\": false,\n              \"required\": false,\n              \"displayName\": \"Name\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Prompt\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"readOnly\": false,\n              \"required\": false,\n              \"displayName\": \"Prompt\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Created ON\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"readOnly\": true,\n              \"required\": false,\n              \"displayName\": \"Created ON\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Updated\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"readOnly\": true,\n              \"required\": false,\n              \"displayName\": \"Updated\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Category\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"readOnly\": false,\n              \"required\": false,\n              \"displayName\": \"Category\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            }\n          ],\n          \"mappingMode\": \"defineBelow\",\n          \"matchingColumns\": [],\n          \"attemptToConvertTypes\": false,\n          \"convertFieldsToString\": false\n        },\n        \"options\": {},\n        \"operation\": \"create\"\n      },\n      \"credentials\": {\n        \"airtableTokenApi\": {\n          \"id\": \"CAa937hASXcJZWTv\",\n          \"name\": \"Airtable Personal Access Token account✅\"\n        }\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"516dc434-25d9-4011-9453-bb28521823ca\",\n      \"name\": \"Generate a new prompt\",\n      \"type\": \"@n8n/n8n-nodes-langchain.chainLlm\",\n      \"position\": [\n        -80,\n        140\n      ],\n      \"parameters\": {\n        \"messages\": {\n          \"messageValues\": [\n            {\n              \"message\": \"=You are an **expert n8n prompt engineer**, specializing in creating highly optimized, context-aware prompts for AI agents in n8n workflows. Your primary goal is to ensure AI agents execute well-defined tasks **accurately, autonomously, and efficiently**.  \\n\\n### Instructions  \\n1. **Define the AI Agent's Role and Rules**  \\n   - Use a structured role definition format:  \\n     `\\\"You are a [SPECIFIC ROLE] working for [SPECIFIC BUSINESS CONTEXT].\\\"`  \\n   - Clearly specify the agent's responsibilities and scope.  \\n\\n2. **Provide Task Instructions**  \\n   - Use a **step-by-step** numbered list to outline the process.  \\n   - Ensure the instructions allow for flexibility but prevent errors.  \\n\\n3. **Set Rules to Guide AI Behavior**  \\n   - Enumerate key constraints such as:  \\n     - Timezone requirements  \\n     - Prohibitions on making assumptions  \\n     - Required formatting for responses  \\n\\n4. **Use Few-Shot Prompting**  \\n   - Provide clear examples of desired outputs inside `<example>` tags.  \\n\\n5. **Include Additional Context**  \\n   - Define relevant business details, the current date/time, and any required environmental context.  \\n\\n---\\n\\n## Input Layer  \\n### Structuring User Inputs  \\n1. **Define Input Type**  \\n   - Specify whether inputs come from a human user (chat-based) or an external system (API calls).  \\n\\n2. **Handle Dynamic Inputs**  \\n   - Use placeholders (e.g., `{customer_name}`, `{appointment_date}`) for adaptable prompts.  \\n\\n3. **Ensure Personalization**  \\n   - Format prompts naturally while maintaining clarity and specificity.  \\n\\n4. **Merge Static & Dynamic Data**  \\n   - Concatenate fixed prompt structures with real-time system data from n8n.  \\n\\n---\\n## Action Layer  \\n### Tool and Function Calling  \\n1. **Standardized Tool Naming**  \\n   - Use `snake_case` names for tools (e.g., `check_calendar_availability`).  \\n\\n2. **Provide Clear Tool Descriptions**  \\n   - Example:  \\n     `\\\"Use the `fetch_customer_data` tool to retrieve details about a specific user based on their email address.\\\"`  \\n\\n3. **Specify Tool Parameters & Expected Responses**  \\n   - Define required inputs, expected formats, and error handling strategies.  \\n\\n4. **Avoid Hallucinations**  \\n   - AI should **only** use tools for their defined purposes. If information is missing, request clarification instead of guessing.  \\n\\n---\\n## Example Prompt for an AI Agent in n8n  \\n\\n```yaml\\n# System Layer\\n## Role\\nYou are a **Scheduling Assistant** working for a **beauty salon**. Your role is to help customers book appointments.  \\n\\n## Instructions\\n1. Ask the user for their preferred appointment date.  \\n2. Use `check_calendar_availability` to find open slots.  \\n3. If no slots are available, ask the user to select another day.  \\n4. Capture the user’s **full name** and **email**.  \\n5. Use `create_calendar_appointment` to confirm the booking.  \\n6. Notify the user with appointment details.  \\n\\n## Rules\\n- Always use **UTC+1 timezone**.  \\n- Do not assume details—ask if unsure.  \\n- If asked about non-scheduling topics, respond: `\\\"I can only assist with booking appointments.\\\"`  \\n\\n## Few-shot Example  \\n<example>\\n\\\"I have successfully booked your appointment:\\n- Date & Time: **Wednesday, 15 March 2025, 14:00 (UTC+1)**\\n- Booking Email: **jane.doe@example.com**\\nIf you need to cancel, please call +49 123 456 789.\\\"\\n</example>\\n```\\n---\\n## Key Considerations  \\n✅ **Avoid vague roles** (e.g., \\\"You are an assistant\\\"). Always specify **business context**.  \\n✅ **Keep task steps structured** but flexible.  \\n✅ **Provide explicit tool instructions** in a separate section.  \\n✅ **Enable AI to ask clarifying questions** instead of making assumptions.  \\n✅ **Use examples to guide expected outputs.**  \\n\\n\\n\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1.5\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"Edit Fields\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Categorize and name Prompt\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"add to airtable\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Return results\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"set prompt fields\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"add to airtable\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Generate a new prompt\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Edit Fields\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Google Gemini Chat Model\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"Generate a new prompt\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Structured Output Parser\": {\n      \"ai_outputParser\": [\n        [\n          {\n            \"node\": \"Auto-fixing Output Parser\",\n            \"type\": \"ai_outputParser\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Auto-fixing Output Parser\": {\n      \"ai_outputParser\": [\n        [\n          {\n            \"node\": \"Categorize and name Prompt\",\n            \"type\": \"ai_outputParser\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Google Gemini Chat Model1\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"Categorize and name Prompt\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Auto-fixing Output Parser\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Categorize and name Prompt\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"set prompt fields\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When chat message received\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Generate a new prompt\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}