{
  "title": "Build your own Google Drive MCP server",
  "url": "https://n8n.io/workflows/3634-build-your-own-google-drive-mcp-server/",
  "category": "AI",
  "category_url": "https://n8n.io/workflows/categories/ai/",
  "author": "Jimleuk",
  "publish_date": "Last update 4 days ago",
  "content": "",
  "workflow_json": "{\"meta\":{\"instanceId\":\"408f9fb9940c3cb18ffdef0e0150fe342d6e655c3a9fac21f0f644e8bedabcd9\",\"templateCredsSetupCompleted\":true},\"nodes\":[{\"id\":\"fb5b682b-5e30-497e-b465-c3369bb3c2e3\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-32,-20],\"parameters\":{\"color\":7,\"width\":680,\"height\":660,\"content\":\"## 1. Set up an MCP Server Trigger\\n[Read more about the MCP Server Trigger](https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-langchain.mcptrigger)\"},\"typeVersion\":1},{\"id\":\"cfc2c7f1-a6ee-42a9-b955-e5bce012b6e1\",\"name\":\"Sticky Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-40,-160],\"parameters\":{\"color\":5,\"width\":380,\"height\":100,\"content\":\"### Always Authenticate Your Server!\\nBefore going to production, it's always advised to enable authentication on your MCP server trigger.\"},\"typeVersion\":1},{\"id\":\"79586d35-0582-4da8-91da-5bc8451c2089\",\"name\":\"When Executed by Another Workflow\",\"type\":\"n8n-nodes-base.executeWorkflowTrigger\",\"position\":[800,360],\"parameters\":{\"workflowInputs\":{\"values\":[{\"name\":\"operation\"},{\"name\":\"folderId\"},{\"name\":\"fileId\"}]}},\"typeVersion\":1.1},{\"id\":\"02aee033-58e8-4f33-a18d-b872840e81d8\",\"name\":\"Google Drive MCP Server\",\"type\":\"@n8n/n8n-nodes-langchain.mcpTrigger\",\"position\":[160,160],\"webhookId\":\"a289c719-fb71-4b08-97c6-79d12645dc7e\",\"parameters\":{\"path\":\"a289c719-fb71-4b08-97c6-79d12645dc7e\"},\"typeVersion\":1},{\"id\":\"e0e50653-d98a-4ad4-a2ed-e1b73332c380\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[680,-20],\"parameters\":{\"color\":7,\"width\":1340,\"height\":860,\"content\":\"## 2. Handle Multiple Binary Formats via Conversion and AI\\n[Read more about the PostgreSQL Node](https://docs.n8n.io/integrations/builtin/app-nodes/n8n-nodes-base.postgres/)\\n\\nMCP clients (or rather, the AI agents) still expect and require text responses from our MCP server.\\nN8N can provide the right conversion tools to parse most text formats such as PDF, CSV and XML.\\nFor images, audio and video, consider using multimodal LLMs to describe or transcribe the file instead.\"},\"typeVersion\":1},{\"id\":\"6be1ff49-5edc-42d2-87de-09d207ee7733\",\"name\":\"Download File1\",\"type\":\"n8n-nodes-base.googleDrive\",\"position\":[1160,360],\"parameters\":{\"fileId\":{\"__rl\":true,\"mode\":\"id\",\"value\":\"={{ $json.fileId }}\"},\"options\":{\"googleFileConversion\":{\"conversion\":{\"docsToFormat\":\"text/plain\",\"slidesToFormat\":\"application/pdf\"}}},\"operation\":\"download\"},\"credentials\":{\"googleDriveOAuth2Api\":{\"id\":\"yOwz41gMQclOadgu\",\"name\":\"Google Drive account\"}},\"typeVersion\":3},{\"id\":\"91b0a549-0494-48a1-bdf3-6c2b91409d01\",\"name\":\"FileType\",\"type\":\"n8n-nodes-base.switch\",\"position\":[1340,320],\"parameters\":{\"rules\":{\"values\":[{\"outputKey\":\"pdf\",\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"7b6958ce-d553-4379-a5d6-743f39b342d0\",\"operator\":{\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"={{ $binary.data.mimeType }}\",\"rightValue\":\"application/pdf\"}]},\"renameOutput\":true},{\"outputKey\":\"csv\",\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"d0816a37-ac06-49e3-8d63-17fcd061e33f\",\"operator\":{\"name\":\"filter.operator.equals\",\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"={{ $binary.data.mimeType }}\",\"rightValue\":\"text/csv\"}]},\"renameOutput\":true},{\"outputKey\":\"image\",\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"589540e1-1439-41e3-ba89-b27f5e936190\",\"operator\":{\"type\":\"boolean\",\"operation\":\"true\",\"singleValue\":true},\"leftValue\":\"={{\\n[\\n  'image/jpeg',\\n  'image/jpg',\\n  'image/png',\\n  'image/gif'\\n].some(mimeType => $binary.data.mimeType === mimeType)\\n}}\",\"rightValue\":\"\"}]},\"renameOutput\":true},{\"outputKey\":\"audio\",\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"b8fc61a1-6057-4db3-960e-b8ddcbdd0f31\",\"operator\":{\"type\":\"string\",\"operation\":\"contains\"},\"leftValue\":\"={{ $binary.data.mimeType }}\",\"rightValue\":\"audio\"}]},\"renameOutput\":true},{\"outputKey\":\"video\",\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"959d65a6-372f-4978-b2d1-f28aa1e372c6\",\"operator\":{\"type\":\"string\",\"operation\":\"contains\"},\"leftValue\":\"={{ $binary.data.mimeType }}\",\"rightValue\":\"video\"}]},\"renameOutput\":true}]},\"options\":{}},\"typeVersion\":3.2},{\"id\":\"d88ed202-1121-41db-859d-b31d53d46292\",\"name\":\"Operation\",\"type\":\"n8n-nodes-base.switch\",\"position\":[980,360],\"parameters\":{\"rules\":{\"values\":[{\"outputKey\":\"ReadFile\",\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"b03bb746-dc4e-469c-b8e6-a34c0aa8d0a6\",\"operator\":{\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"={{ $json.operation }}\",\"rightValue\":\"readFile\"}]},\"renameOutput\":true}]},\"options\":{}},\"typeVersion\":3.2},{\"id\":\"7e8791e6-24c2-441a-8efb-7f4375f2519b\",\"name\":\"Extract from PDF\",\"type\":\"n8n-nodes-base.extractFromFile\",\"position\":[1620,80],\"parameters\":{\"options\":{},\"operation\":\"pdf\"},\"typeVersion\":1},{\"id\":\"2b33623c-cea4-4a83-80ef-f852b9a3d126\",\"name\":\"Extract from CSV\",\"type\":\"n8n-nodes-base.extractFromFile\",\"position\":[1620,260],\"parameters\":{\"options\":{\"encoding\":\"utf-8\",\"headerRow\":false,\"relaxQuotes\":true,\"includeEmptyCells\":true}},\"typeVersion\":1},{\"id\":\"6ca2542d-225e-4a65-b5ce-3edafb11379c\",\"name\":\"Get PDF Response\",\"type\":\"n8n-nodes-base.set\",\"position\":[1780,80],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"a481cde3-b8ec-4d97-aa13-4668bd66c24d\",\"name\":\"response\",\"type\":\"string\",\"value\":\"={{ $json.text }}\"}]}},\"typeVersion\":3.4},{\"id\":\"3d1c4aa6-cac1-4957-ab7e-3134368e4b53\",\"name\":\"Get CSV Response\",\"type\":\"n8n-nodes-base.set\",\"position\":[1780,260],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"a481cde3-b8ec-4d97-aa13-4668bd66c24d\",\"name\":\"response\",\"type\":\"string\",\"value\":\"={{\\n$input.all()\\n  .map(item => item.json.row.map(cell => `\\\"${cell}\\\"`).join(','))\\n  .join('\\\\n')\\n}}\"}]}},\"executeOnce\":true,\"typeVersion\":3.4},{\"id\":\"141444f9-e937-41f9-ab97-09624646ddba\",\"name\":\"Read File From GDrive\",\"type\":\"@n8n/n8n-nodes-langchain.toolWorkflow\",\"position\":[400,380],\"parameters\":{\"name\":\"ReadFile\",\"workflowId\":{\"__rl\":true,\"mode\":\"id\",\"value\":\"={{ $workflow.id }}\"},\"description\":\"Call this tool to download and read the contents of a file within google drive.\",\"workflowInputs\":{\"value\":{\"fileId\":\"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('fileId', ``, 'string') }}\",\"folderId\":\"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('folderId', ``, 'string') }}\",\"operation\":\"readFile\"},\"schema\":[{\"id\":\"operation\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"operation\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"folderId\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"folderId\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"fileId\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"fileId\",\"defaultMatch\":false,\"canBeUsedToMatch\":true}],\"mappingMode\":\"defineBelow\",\"matchingColumns\":[],\"attemptToConvertTypes\":false,\"convertFieldsToString\":false}},\"typeVersion\":2.1},{\"id\":\"b5851527-0b57-447b-ac8c-10408a684862\",\"name\":\"Search Files from Gdrive\",\"type\":\"n8n-nodes-base.googleDriveTool\",\"position\":[240,380],\"parameters\":{\"limit\":10,\"filter\":{\"driveId\":{\"mode\":\"list\",\"value\":\"My Drive\"},\"whatToSearch\":\"files\"},\"options\":{},\"resource\":\"fileFolder\",\"queryString\":\"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Search_Query', ``, 'string') }}\"},\"credentials\":{\"googleDriveOAuth2Api\":{\"id\":\"yOwz41gMQclOadgu\",\"name\":\"Google Drive account\"}},\"typeVersion\":3},{\"id\":\"98197c91-c7e9-4fbb-a2b1-c16c873fa0a1\",\"name\":\"Analyse Image\",\"type\":\"@n8n/n8n-nodes-langchain.openAi\",\"position\":[1620,440],\"parameters\":{\"modelId\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"gpt-4o-mini\",\"cachedResultName\":\"GPT-4O-MINI\"},\"options\":{},\"resource\":\"image\",\"inputType\":\"base64\",\"operation\":\"analyze\"},\"credentials\":{\"openAiApi\":{\"id\":\"8gccIjcuf3gvaoEr\",\"name\":\"OpenAi account\"}},\"typeVersion\":1.8},{\"id\":\"b44a787a-c670-47e1-b87e-d880425ce610\",\"name\":\"Transcribe Audio\",\"type\":\"@n8n/n8n-nodes-langchain.openAi\",\"position\":[1620,620],\"parameters\":{\"options\":{},\"resource\":\"audio\",\"operation\":\"transcribe\"},\"credentials\":{\"openAiApi\":{\"id\":\"8gccIjcuf3gvaoEr\",\"name\":\"OpenAi account\"}},\"typeVersion\":1.8},{\"id\":\"1e1a358d-769e-48c9-bf27-6a3cfaaacb14\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-500,-420],\"parameters\":{\"width\":440,\"height\":1060,\"content\":\"## Try It Out!\\n### This n8n demonstrates how to build a simple Google Drive MCP server to search and get contents of files from Google Drive.\\n\\nThis MCP example is based off an official MCP reference implementation which can be found here -https://github.com/modelcontextprotocol/servers/tree/main/src/gdrive\\n\\n### How it works\\n* A MCP server trigger is used and connected to 1x Google Drive tool and 1x Custom Workflow tool.\\n* The Google Drive tool is set to perform a search on files within our Google Drive folder.\\n* The Custom Workflow tool downloads target files found in our drive and converts the binaries to their text representation. Eg. PDFs have only their text contents extracted and returned to the MCP client.\\n\\n### How to use\\n* This Google Drive MCP server allows any compatible MCP client to manage a person or shared Google Drive. Simple select a drive or for better control, specify a folder within the drive to scope the operations to.\\n* Connect your MCP client by following the n8n guidelines here - https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-langchain.mcptrigger/#integrating-with-claude-desktop\\n* Try the following queries in your MCP client:\\n  * \\\"Please help me search for last month's expense reports.\\\"\\n * \\\"What does the company policy document say about cancellations and refunds?\\\"\\n\\n### Requirements\\n* Google Drive for documents.\\n* OpenAI for image and audio understanding.\\n* MCP Client or Agent for usage such as Claude Desktop - https://claude.ai/download\\n\\n### Customising this workflow\\n* Add additional capabilities such as renaming, moving and/or deleting files.\\n* Remember to set the MCP server to require credentials before going to production and sharing this MCP server with others!\"},\"typeVersion\":1}],\"pinData\":{},\"connections\":{\"FileType\":{\"main\":[[{\"node\":\"Extract from PDF\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Extract from CSV\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Analyse Image\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Transcribe Audio\",\"type\":\"main\",\"index\":0}],[]]},\"Operation\":{\"main\":[[{\"node\":\"Download File1\",\"type\":\"main\",\"index\":0}]]},\"Download File1\":{\"main\":[[{\"node\":\"FileType\",\"type\":\"main\",\"index\":0}]]},\"Extract from CSV\":{\"main\":[[{\"node\":\"Get CSV Response\",\"type\":\"main\",\"index\":0}]]},\"Extract from PDF\":{\"main\":[[{\"node\":\"Get PDF Response\",\"type\":\"main\",\"index\":0}]]},\"Read File From GDrive\":{\"ai_tool\":[[{\"node\":\"Google Drive MCP Server\",\"type\":\"ai_tool\",\"index\":0}]]},\"Search Files from Gdrive\":{\"ai_tool\":[[{\"node\":\"Google Drive MCP Server\",\"type\":\"ai_tool\",\"index\":0}]]},\"When Executed by Another Workflow\":{\"main\":[[{\"node\":\"Operation\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "### This n8n demonstrates how to build a simple Google Drive MCP server to search and get contents of files from Google Drive.\n\nThis MCP example is based off an official MCP reference implementation which can be found here -<https://github.com/modelcontextprotocol/servers/tree/main/src/gdrive>\n\n### How it works\n\n  * A MCP server trigger is used and connected to 1x Google Drive tool and 1x Custom Workflow tool.\n  * The Google Drive tool is set to perform a search on files within our Google Drive folder.\n  * The Custom Workflow tool downloads target files found in our drive and converts the binaries to their text representation. Eg. PDFs have only their text contents extracted and returned to the MCP client.\n\n\n\n### How to use\n\n  * This Google Drive MCP server allows any compatible MCP client to manage a person or shared Google Drive. Simple select a drive or for better control, specify a folder within the drive to scope the operations to.\n  * Connect your MCP client by following the n8n guidelines here - <https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-langchain.mcptrigger/#integrating-with-claude-desktop>\n  * Try the following queries in your MCP client: \n    * \"Please help me search for last month's expense reports.\"\n  * \"What does the company policy document say about cancellations and refunds?\"\n\n\n\n### Requirements\n\n  * Google Drive for documents.\n  * OpenAI for image and audio understanding.\n  * MCP Client or Agent for usage such as Claude Desktop - <https://claude.ai/download>\n\n\n\n### Customising this workflow\n\n  * Add additional capabilities such as renaming, moving and/or deleting files.\n  * Remember to set the MCP server to require credentials before going to production and sharing this MCP server with others!\n\n\n",
  "readme_html": "<!--[--><div data-v-006f9244=\"\"><h3>This n8n demonstrates how to build a simple Google Drive MCP server to search and get contents of files from Google Drive.</h3>\n<p>This MCP example is based off an official MCP reference implementation which can be found here -<a href=\"https://github.com/modelcontextprotocol/servers/tree/main/src/gdrive\" rel=\"ugc nofollow\" target=\"_blank\">https://github.com/modelcontextprotocol/servers/tree/main/src/gdrive</a></p>\n<h3>How it works</h3>\n<ul>\n<li>A MCP server trigger is used and connected to 1x Google Drive tool and 1x Custom Workflow tool.</li>\n<li>The Google Drive tool is set to perform a search on files within our Google Drive folder.</li>\n<li>The Custom Workflow tool downloads target files found in our drive and converts the binaries to their text representation. Eg. PDFs have only their text contents extracted and returned to the MCP client.</li>\n</ul>\n<h3>How to use</h3>\n<ul>\n<li>This Google Drive MCP server allows any compatible MCP client to manage a person or shared Google Drive. Simple select a drive or for better control, specify a folder within the drive to scope the operations to.</li>\n<li>Connect your MCP client by following the n8n guidelines here - <a href=\"https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-langchain.mcptrigger/#integrating-with-claude-desktop\" rel=\"ugc nofollow\" target=\"_blank\">https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-langchain.mcptrigger/#integrating-with-claude-desktop</a></li>\n<li>Try the following queries in your MCP client:\n<ul>\n<li>\"Please help me search for last month's expense reports.\"</li>\n</ul>\n</li>\n<li>\"What does the company policy document say about cancellations and refunds?\"</li>\n</ul>\n<h3>Requirements</h3>\n<ul>\n<li>Google Drive for documents.</li>\n<li>OpenAI for image and audio understanding.</li>\n<li>MCP Client or Agent for usage such as Claude Desktop - <a href=\"https://claude.ai/download\" rel=\"ugc nofollow\" target=\"_blank\">https://claude.ai/download</a></li>\n</ul>\n<h3>Customising this workflow</h3>\n<ul>\n<li>Add additional capabilities such as renaming, moving and/or deleting files.</li>\n<li>Remember to set the MCP server to require credentials before going to production and sharing this MCP server with others!</li>\n</ul>\n</div><!--]-->",
  "readme_zh": "### 本n8n示例演示如何构建一个简单的Google Drive MCP服务器，用于搜索并获取Google Drive中的文件内容。\n\n该MCP示例基于官方MCP参考实现，源码详见：<https://github.com/modelcontextprotocol/servers/tree/main/src/gdrive>\n\n### 实现原理\n\n* 使用MCP服务器触发器连接1个Google Drive工具和1个自定义工作流工具\n* Google Drive工具设置为在指定文件夹内执行文件搜索\n* 自定义工作流工具会下载找到的目标文件，并将二进制内容转换为文本形式（例如PDF仅提取文本内容返回给MCP客户端）\n\n### 使用方法\n\n* 该Google Drive MCP服务器允许任何兼容的MCP客户端管理个人或共享云盘。可选择整个云盘，或指定特定文件夹限定操作范围\n* 按照n8n指南连接MCP客户端：<https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-langchain.mcptrigger/#integrating-with-claude-desktop>\n* 可在MCP客户端尝试以下查询：\n  * \"请帮我搜索上个月的支出报告\"\n  * \"公司政策文件中关于取消和退款的规定是什么？\"\n\n### 系统要求\n\n* 文档存储需使用Google Drive\n* 图像和语音理解需OpenAI支持\n* 需安装MCP客户端（如Claude桌面端：<https://claude.ai/download>）\n\n### 自定义扩展\n\n* 可添加文件重命名、移动或删除等扩展功能\n* 注意：正式上线前请务必设置MCP服务器身份验证，与他人共享服务器时需启用凭证验证！",
  "title_zh": "搭建你自己的Google Drive MCP服务器",
  "publish_date_absolute": "2025-05-03",
  "publish_date_zh": "最后更新于4天前",
  "workflow_json_zh": "{\n  \"meta\": {\n    \"instanceId\": \"408f9fb9940c3cb18ffdef0e0150fe342d6e655c3a9fac21f0f644e8bedabcd9\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"nodes\": [\n    {\n      \"id\": \"fb5b682b-5e30-497e-b465-c3369bb3c2e3\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -32,\n        -20\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 680,\n        \"height\": 660,\n        \"content\": \"## 1. 设置MCP服务器触发器\\n[了解更多关于MCP服务器触发器的信息](https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-langchain.mcptrigger)\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"cfc2c7f1-a6ee-42a9-b955-e5bce012b6e1\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -40,\n        -160\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 380,\n        \"height\": 100,\n        \"content\": \"### 始终验证您的服务器身份！\\n在投入生产环境前，强烈建议您为MCP服务器触发器启用身份验证功能。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"79586d35-0582-4da8-91da-5bc8451c2089\",\n      \"name\": \"When Executed by Another Workflow\",\n      \"type\": \"n8n-nodes-base.executeWorkflowTrigger\",\n      \"position\": [\n        800,\n        360\n      ],\n      \"parameters\": {\n        \"workflowInputs\": {\n          \"values\": [\n            {\n              \"name\": \"operation\"\n            },\n            {\n              \"name\": \"folderId\"\n            },\n            {\n              \"name\": \"fileId\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"02aee033-58e8-4f33-a18d-b872840e81d8\",\n      \"name\": \"Google Drive MCP Server\",\n      \"type\": \"@n8n/n8n-nodes-langchain.mcpTrigger\",\n      \"position\": [\n        160,\n        160\n      ],\n      \"webhookId\": \"a289c719-fb71-4b08-97c6-79d12645dc7e\",\n      \"parameters\": {\n        \"path\": \"a289c719-fb71-4b08-97c6-79d12645dc7e\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"e0e50653-d98a-4ad4-a2ed-e1b73332c380\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        680,\n        -20\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 1340,\n        \"height\": 860,\n        \"content\": \"## 2. 通过转换与AI处理多种二进制格式\\n[详细了解PostgreSQL节点](https://docs.n8n.io/integrations/builtin/app-nodes/n8n-nodes-base.postgres/)\\n\\nMCP客户端（确切地说是AI代理）仍期待并需要我们的MCP服务器返回文本响应。N8N能提供合适的转换工具来解析PDF、CSV和XML等大多数文本格式。对于图像、音频和视频文件，建议采用多模态大语言模型进行文件描述或转录。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"6be1ff49-5edc-42d2-87de-09d207ee7733\",\n      \"name\": \"Download File1\",\n      \"type\": \"n8n-nodes-base.googleDrive\",\n      \"position\": [\n        1160,\n        360\n      ],\n      \"parameters\": {\n        \"fileId\": {\n          \"__rl\": true,\n          \"mode\": \"id\",\n          \"value\": \"={{ $json.fileId }}\"\n        },\n        \"options\": {\n          \"googleFileConversion\": {\n            \"conversion\": {\n              \"docsToFormat\": \"text/plain\",\n              \"slidesToFormat\": \"application/pdf\"\n            }\n          }\n        },\n        \"operation\": \"download\"\n      },\n      \"credentials\": {\n        \"googleDriveOAuth2Api\": {\n          \"id\": \"yOwz41gMQclOadgu\",\n          \"name\": \"Google Drive account\"\n        }\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"91b0a549-0494-48a1-bdf3-6c2b91409d01\",\n      \"name\": \"FileType\",\n      \"type\": \"n8n-nodes-base.switch\",\n      \"position\": [\n        1340,\n        320\n      ],\n      \"parameters\": {\n        \"rules\": {\n          \"values\": [\n            {\n              \"outputKey\": \"pdf\",\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 2,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"7b6958ce-d553-4379-a5d6-743f39b342d0\",\n                    \"operator\": {\n                      \"type\": \"string\",\n                      \"operation\": \"equals\"\n                    },\n                    \"leftValue\": \"={{ $binary.data.mimeType }}\",\n                    \"rightValue\": \"application/pdf\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            },\n            {\n              \"outputKey\": \"csv\",\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 2,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"d0816a37-ac06-49e3-8d63-17fcd061e33f\",\n                    \"operator\": {\n                      \"name\": \"filter.operator.equals\",\n                      \"type\": \"string\",\n                      \"operation\": \"equals\"\n                    },\n                    \"leftValue\": \"={{ $binary.data.mimeType }}\",\n                    \"rightValue\": \"text/csv\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            },\n            {\n              \"outputKey\": \"image\",\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 2,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"589540e1-1439-41e3-ba89-b27f5e936190\",\n                    \"operator\": {\n                      \"type\": \"boolean\",\n                      \"operation\": \"true\",\n                      \"singleValue\": true\n                    },\n                    \"leftValue\": \"={{\\n[\\n  'image/jpeg',\\n  'image/jpg',\\n  'image/png',\\n  'image/gif'\\n].some(mimeType => $binary.data.mimeType === mimeType)\\n}}\",\n                    \"rightValue\": \"\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            },\n            {\n              \"outputKey\": \"audio\",\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 2,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"b8fc61a1-6057-4db3-960e-b8ddcbdd0f31\",\n                    \"operator\": {\n                      \"type\": \"string\",\n                      \"operation\": \"contains\"\n                    },\n                    \"leftValue\": \"={{ $binary.data.mimeType }}\",\n                    \"rightValue\": \"audio\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            },\n            {\n              \"outputKey\": \"video\",\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 2,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"959d65a6-372f-4978-b2d1-f28aa1e372c6\",\n                    \"operator\": {\n                      \"type\": \"string\",\n                      \"operation\": \"contains\"\n                    },\n                    \"leftValue\": \"={{ $binary.data.mimeType }}\",\n                    \"rightValue\": \"video\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            }\n          ]\n        },\n        \"options\": {}\n      },\n      \"typeVersion\": 3.2\n    },\n    {\n      \"id\": \"d88ed202-1121-41db-859d-b31d53d46292\",\n      \"name\": \"Operation\",\n      \"type\": \"n8n-nodes-base.switch\",\n      \"position\": [\n        980,\n        360\n      ],\n      \"parameters\": {\n        \"rules\": {\n          \"values\": [\n            {\n              \"outputKey\": \"ReadFile\",\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 2,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"b03bb746-dc4e-469c-b8e6-a34c0aa8d0a6\",\n                    \"operator\": {\n                      \"type\": \"string\",\n                      \"operation\": \"equals\"\n                    },\n                    \"leftValue\": \"={{ $json.operation }}\",\n                    \"rightValue\": \"readFile\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            }\n          ]\n        },\n        \"options\": {}\n      },\n      \"typeVersion\": 3.2\n    },\n    {\n      \"id\": \"7e8791e6-24c2-441a-8efb-7f4375f2519b\",\n      \"name\": \"Extract from PDF\",\n      \"type\": \"n8n-nodes-base.extractFromFile\",\n      \"position\": [\n        1620,\n        80\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"operation\": \"pdf\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"2b33623c-cea4-4a83-80ef-f852b9a3d126\",\n      \"name\": \"Extract from CSV\",\n      \"type\": \"n8n-nodes-base.extractFromFile\",\n      \"position\": [\n        1620,\n        260\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"encoding\": \"utf-8\",\n          \"headerRow\": false,\n          \"relaxQuotes\": true,\n          \"includeEmptyCells\": true\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"6ca2542d-225e-4a65-b5ce-3edafb11379c\",\n      \"name\": \"Get PDF Response\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        1780,\n        80\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"a481cde3-b8ec-4d97-aa13-4668bd66c24d\",\n              \"name\": \"response\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.text }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"3d1c4aa6-cac1-4957-ab7e-3134368e4b53\",\n      \"name\": \"Get CSV Response\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        1780,\n        260\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"a481cde3-b8ec-4d97-aa13-4668bd66c24d\",\n              \"name\": \"response\",\n              \"type\": \"string\",\n              \"value\": \"={{\\n$input.all()\\n  .map(item => item.json.row.map(cell => `\\\"${cell}\\\"`).join(','))\\n  .join('\\\\n')\\n}}\"\n            }\n          ]\n        }\n      },\n      \"executeOnce\": true,\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"141444f9-e937-41f9-ab97-09624646ddba\",\n      \"name\": \"Read File From GDrive\",\n      \"type\": \"@n8n/n8n-nodes-langchain.toolWorkflow\",\n      \"position\": [\n        400,\n        380\n      ],\n      \"parameters\": {\n        \"name\": \"ReadFile\",\n        \"workflowId\": {\n          \"__rl\": true,\n          \"mode\": \"id\",\n          \"value\": \"={{ $workflow.id }}\"\n        },\n        \"description\": \"Call this tool to download and read the contents of a file within google drive.\",\n        \"workflowInputs\": {\n          \"value\": {\n            \"fileId\": \"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('fileId', ``, 'string') }}\",\n            \"folderId\": \"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('folderId', ``, 'string') }}\",\n            \"operation\": \"readFile\"\n          },\n          \"schema\": [\n            {\n              \"id\": \"operation\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"operation\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"folderId\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"folderId\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"fileId\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"fileId\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            }\n          ],\n          \"mappingMode\": \"defineBelow\",\n          \"matchingColumns\": [],\n          \"attemptToConvertTypes\": false,\n          \"convertFieldsToString\": false\n        }\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"b5851527-0b57-447b-ac8c-10408a684862\",\n      \"name\": \"Search Files from Gdrive\",\n      \"type\": \"n8n-nodes-base.googleDriveTool\",\n      \"position\": [\n        240,\n        380\n      ],\n      \"parameters\": {\n        \"limit\": 10,\n        \"filter\": {\n          \"driveId\": {\n            \"mode\": \"list\",\n            \"value\": \"My Drive\"\n          },\n          \"whatToSearch\": \"files\"\n        },\n        \"options\": {},\n        \"resource\": \"fileFolder\",\n        \"queryString\": \"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Search_Query', ``, 'string') }}\"\n      },\n      \"credentials\": {\n        \"googleDriveOAuth2Api\": {\n          \"id\": \"yOwz41gMQclOadgu\",\n          \"name\": \"Google Drive account\"\n        }\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"98197c91-c7e9-4fbb-a2b1-c16c873fa0a1\",\n      \"name\": \"Analyse Image\",\n      \"type\": \"@n8n/n8n-nodes-langchain.openAi\",\n      \"position\": [\n        1620,\n        440\n      ],\n      \"parameters\": {\n        \"modelId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gpt-4o-mini\",\n          \"cachedResultName\": \"GPT-4O-MINI\"\n        },\n        \"options\": {},\n        \"resource\": \"image\",\n        \"inputType\": \"base64\",\n        \"operation\": \"analyze\"\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"8gccIjcuf3gvaoEr\",\n          \"name\": \"OpenAi account\"\n        }\n      },\n      \"typeVersion\": 1.8\n    },\n    {\n      \"id\": \"b44a787a-c670-47e1-b87e-d880425ce610\",\n      \"name\": \"Transcribe Audio\",\n      \"type\": \"@n8n/n8n-nodes-langchain.openAi\",\n      \"position\": [\n        1620,\n        620\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"resource\": \"audio\",\n        \"operation\": \"transcribe\"\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"8gccIjcuf3gvaoEr\",\n          \"name\": \"OpenAi account\"\n        }\n      },\n      \"typeVersion\": 1.8\n    },\n    {\n      \"id\": \"1e1a358d-769e-48c9-bf27-6a3cfaaacb14\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -500,\n        -420\n      ],\n      \"parameters\": {\n        \"width\": 440,\n        \"height\": 1060,\n        \"content\": \"## 试试看吧！\\n### 本n8n示例演示如何构建一个简易的Google Drive MCP服务器，用于搜索并获取Google Drive中的文件内容。\\n\\n该MCP示例基于官方参考实现开发，源码详见：https://github.com/modelcontextprotocol/servers/tree/main/src/gdrive\\n\\n### 工作原理\\n* 使用MCP服务器触发器连接1个Google Drive工具和1个自定义工作流工具\\n* Google Drive工具设置为在指定文件夹内执行文件搜索\\n* 自定义工作流工具会下载找到的目标文件，并将二进制内容转换为文本格式（例如PDF仅提取文字内容返回给MCP客户端）\\n\\n### 使用方法\\n* 该Google Drive MCP服务器允许任何兼容的MCP客户端管理个人或共享云盘。您可以选择整个驱动器，或指定特定文件夹限定操作范围\\n* 按照n8n指南连接您的MCP客户端：https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-langchain.mcptrigger/#integrating-with-claude-desktop\\n* 在客户端尝试以下查询：\\n  * \\\"请帮我搜索上个月的报销单据\\\"\\n  * \\\"公司政策文件中关于取消订单和退款是如何规定的？\\\"\\n\\n### 系统要求\\n* 文档存储需使用Google Drive\\n* 图像和语音理解需OpenAI支持\\n* 需安装MCP客户端（如Claude桌面版：https://claude.ai/download）\\n\\n### 自定义扩展\\n* 可添加文件重命名/移动/删除等扩展功能\\n* 正式部署前请务必设置MCP服务器身份验证，再与他人共享该服务！\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"FileType\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Extract from PDF\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Extract from CSV\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Analyse Image\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Transcribe Audio\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        []\n      ]\n    },\n    \"Operation\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Download File1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Download File1\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"FileType\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Extract from CSV\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get CSV Response\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Extract from PDF\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get PDF Response\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Read File From GDrive\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"Google Drive MCP Server\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Search Files from Gdrive\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"Google Drive MCP Server\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When Executed by Another Workflow\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Operation\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}