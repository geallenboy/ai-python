{
  "url": "https://n8n.io/workflows/4243-gmail-attachment-backup-to-google-drive/",
  "title": "Gmail Attachment Backup to Google Drive",
  "author": "Akhil Varma Gadiraju",
  "publish_date": "Last update 4 days ago",
  "publish_date_absolute": "",
  "categories": [
    {
      "name": "IT Ops"
    }
  ],
  "workflow_json": "{\"meta\":{\"instanceId\":\"7d8066d2f56a07000fe7d753d3eeabf0ecdf68413466f30d10afe0906f058427\",\"templateCredsSetupCompleted\":true},\"nodes\":[{\"id\":\"9b0e3c5c-6f27-4034-b281-960b039b883a\",\"name\":\"Gmail Trigger\",\"type\":\"n8n-nodes-base.gmailTrigger\",\"position\":[0,-20],\"parameters\":{\"filters\":{\"sender\":\"akhilgadiraju@gmail.com\"},\"pollTimes\":{\"item\":[{\"mode\":\"everyMinute\"}]}},\"credentials\":{\"gmailOAuth2\":{\"id\":\"wqFUFuFpF5eRAp4E\",\"name\":\"Gmail OAuth2 - Akhil\"}},\"typeVersion\":1.2},{\"id\":\"c68ebbfb-8fad-4f2b-837b-fb8ac0ffe4df\",\"name\":\"Gmail\",\"type\":\"n8n-nodes-base.gmail\",\"position\":[220,-20],\"webhookId\":\"2614ede2-d4ce-4490-9792-8157980bece3\",\"parameters\":{\"simple\":false,\"options\":{\"downloadAttachments\":true,\"dataPropertyAttachmentsPrefixName\":\"attachment_\"},\"messageId\":\"={{ $json.id }}\",\"operation\":\"get\"},\"credentials\":{\"gmailOAuth2\":{\"id\":\"wqFUFuFpF5eRAp4E\",\"name\":\"Gmail OAuth2 - Akhil\"}},\"typeVersion\":2.1},{\"id\":\"40b97338-6ffe-4cfd-869e-a50815808a89\",\"name\":\"Replace Me\",\"type\":\"n8n-nodes-base.noOp\",\"position\":[800,-20],\"parameters\":{},\"typeVersion\":1},{\"id\":\"0d4ae5a5-51d5-4917-8a88-7828d2f0e5ea\",\"name\":\"Google Drive\",\"type\":\"n8n-nodes-base.googleDrive\",\"position\":[620,-20],\"parameters\":{\"name\":\"={{ $('Gmail Trigger').item.json.id + \\\"_\\\" + $now + \\\"_\\\" + \\\"backup_attachment\\\" }}\",\"driveId\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"My Drive\",\"cachedResultUrl\":\"https://drive.google.com/drive/my-drive\",\"cachedResultName\":\"My Drive\"},\"options\":{},\"folderId\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"1aZmIqT9jG-GqW_OIGT3HWvRb6JalTlBi\",\"cachedResultUrl\":\"https://drive.google.com/drive/folders/1aZmIqT9jG-GqW_OIGT3HWvRb6JalTlBi\",\"cachedResultName\":\"DOcs\"},\"inputDataFieldName\":\"=data\"},\"credentials\":{\"googleDriveOAuth2Api\":{\"id\":\"LxzMJWxwgbnYKUly\",\"name\":\"Google Drive - Akhil\"}},\"typeVersion\":3},{\"id\":\"3f2bd52a-7637-4b65-bae3-daebc5f664de\",\"name\":\"Code\",\"type\":\"n8n-nodes-base.code\",\"position\":[420,-20],\"parameters\":{\"jsCode\":\"return Object.entries(items[0].binary).map(([key, value]) => {\\n  return {\\n    binary: {\\n      data: value\\n    }\\n  };\\n});\"},\"typeVersion\":2},{\"id\":\"c0ae6ad0-7f25-4912-9bbd-7610ef61d6cd\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[140,-120],\"parameters\":{\"color\":4,\"width\":260,\"height\":80,\"content\":\"### Change sender filter\\nModify the sender field in the Gmail Trigger node\"},\"typeVersion\":1},{\"id\":\"0552dd8a-341e-4a67-ad12-8bab41371685\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[560,140],\"parameters\":{\"color\":4,\"height\":180,\"content\":\"### Change destination folder \\nUpdate folderId in the Google Drive node\\n\\n### Modify filename format\\nEdit the name expression in the Google Drive node\"},\"typeVersion\":1},{\"id\":\"f19c4cff-b85d-4ac3-99d7-bf70e61fe5bb\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[740,-140],\"parameters\":{\"height\":100,\"content\":\"### Add post-upload logic\\nReplace or extend the Replace Me node with notifications, logs, etc.\"},\"typeVersion\":1}],\"pinData\":{},\"connections\":{\"Code\":{\"main\":[[{\"node\":\"Google Drive\",\"type\":\"main\",\"index\":0}]]},\"Gmail\":{\"main\":[[{\"node\":\"Code\",\"type\":\"main\",\"index\":0}]]},\"Replace Me\":{\"main\":[[]]},\"Google Drive\":{\"main\":[[{\"node\":\"Replace Me\",\"type\":\"main\",\"index\":0}]]},\"Gmail Trigger\":{\"main\":[[{\"node\":\"Gmail\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "# üì• Gmail Attachment Backup to Google Drive ‚Äî n8n Workflow\n\nThis n8n workflow automatically backs up email attachments from a specific sender in Gmail to a designated folder in Google Drive. It polls Gmail every minute and uploads any new attachments from matching emails to the specified Google Drive folder with a timestamped filename.\n\n* * *\n\n## üìå Use Case\n\n**Primary Purpose** :\n\n  * Automatically archive and back up attachments from a specific sender (e.g., `test@gmail.com`) to Google Drive for safekeeping, audit, or processing.\n\n\n\n**Ideal For** :\n\n  * Automating invoice/receipt collection from a vendor\n  * Archiving reports from a monitored email address\n  * Creating a searchable historical log of attachments for compliance\n\n\n\n* * *\n\n## üß≠ Workflow Overview\n\nHere‚Äôs how the workflow operates:\n\n  1. **üîî Gmail Trigger**  \nPolls Gmail every minute for new messages from a specific sender (`test@gmail.com`).\n\n  2. **üì© Gmail Get Message**  \nRetrieves the full contents (including attachments) of the matched email.\n\n  3. **üß† Code (JS)**  \nIterates over all binary attachments in the email and restructures them as individual binary items to upload separately.\n\n  4. **üì§ Google Drive**  \nUploads each attachment to a target Google Drive folder (`DOcs`) with a timestamp and unique name.\n\n  5. **üìç Replace Me (NoOp)**  \nPlaceholder node to indicate workflow completion. You can replace this with Slack notifications, logs, or alerts.\n\n\n\n\n* * *\n\n## üîß How to Use\n\n### Prerequisites\n\n  * An [n8n](https://n8n.io/) instance (self-hosted or cloud)\n  * A connected Gmail account with OAuth2 credentials\n  * A connected Google Drive account with OAuth2 credentials\n  * Permissions for n8n to access your Gmail and Google Drive\n\n\n\n### Setup Instructions\n\n  1. **Import the Workflow**  \nCopy and paste the workflow JSON into your n8n editor.\n\n  2. **Set Up Credentials**  \nEnsure the following credentials exist and are authorized:\n\n     * `Gmail (for Gmail nodes)\n     * `Google Drive (for Google Drive node)\n  3. **Configure the Folder**  \nUpdate the `folderId` in the Google Drive node if you want to use a different target folder.\n\n  4. **Activate the Workflow**  \nEnable the workflow in n8n. It will start polling Gmail every minute.\n\n\n\n\n* * *\n\n## ‚úèÔ∏è How to Customize\n\nTask | How to Customize  \n---|---  \nChange sender filter | Modify the `sender` field in the **Gmail Trigger** node  \nAdjust polling frequency | Change the `pollTimes` configuration in the trigger node  \nChange destination folder | Update `folderId` in the **Google Drive** node  \nModify filename format | Edit the `name` expression in the **Google Drive** node  \nAdd post-upload logic | Replace or extend the **Replace Me** node with notifications, logs, etc.  \nProcess only specific attachments | Add logic in the **Code** node to filter by filename or MIME type  \n  \n* * *\n\n## üìÇ Filename Format Example\n    \n    \n    [MessageID]_[Timestamp]_backup_attachment\n    \n\nThis naming convention ensures uniqueness and traceability back to the original message.\n\n* * *\n\n## ‚úÖ Future Improvements\n\n  * **Email subject filtering** to narrow down the match\n  * **Slack/Email notifications** after upload\n  * **Deduplication check** to avoid reuploading the same files\n  * **Virus scan or file validation** before upload\n\n\n\n* * *\n\n## üí¨ Support\n\nFor any issues using this workflow:\n\n  * Double-check your credential permissions\n  * Review n8n logs for Gmail or Google Drive errors\n  * Visit the [n8n community forums](https://community.n8n.io)\n\n\n",
  "crawled_at": "2025-05-26T07:25:06.617124"
}