{
  "url": "https://n8n.io/workflows/3547-convert-text-to-speech-with-local-kokoro-tts/",
  "title": "Convert Text to Speech with Local KOKORO TTS",
  "author": "bswlife",
  "publish_date": "Last update a month ago",
  "publish_date_absolute": "",
  "categories": [
    {
      "name": "AI"
    }
  ],
  "workflow_json": "{\"meta\":{\"instanceId\":\"a6d5191e58fd6be87222f47435e6f9df8f98ec0d945d3e7b7f6373c59a6c3f37\",\"templateCredsSetupCompleted\":true},\"nodes\":[{\"id\":\"fcf1064e-557f-4514-9109-bb10ac837f8b\",\"name\":\"Run python script\",\"type\":\"n8n-nodes-base.executeCommand\",\"position\":[-100,20],\"parameters\":{\"command\":\"=python C:\\\\KOKORO\\\\voicegen.py \\\"{{ $json.text }}\\\" \\\"{{ $json.voice }}\\\" 1\\n\"},\"typeVersion\":1},{\"id\":\"199a3212-69c0-4314-92c8-783573f165d7\",\"name\":\"Passing variables\",\"type\":\"n8n-nodes-base.set\",\"position\":[-320,20],\"parameters\":{\"mode\":\"raw\",\"options\":{},\"jsonOutput\":\"{\\n  \\\"voice\\\": \\\"af_sarah\\\",\\n  \\\"text\\\": \\\"Hello world!\\\"\\n}\\n\"},\"typeVersion\":3.4},{\"id\":\"deb008d0-53ae-4348-a555-9e54b6e0efd4\",\"name\":\"Start\",\"type\":\"n8n-nodes-base.manualTrigger\",\"position\":[-540,20],\"parameters\":{},\"typeVersion\":1},{\"id\":\"ffa1b2bf-abc3-45d8-8b7b-de4c0780a609\",\"name\":\"Play sound\",\"type\":\"n8n-nodes-base.readBinaryFiles\",\"position\":[120,20],\"parameters\":{\"fileSelector\":\"D:/output.mp3\"},\"typeVersion\":1,\"alwaysOutputData\":false}],\"pinData\":{},\"connections\":{\"Start\":{\"main\":[[{\"node\":\"Passing variables\",\"type\":\"main\",\"index\":0}]]},\"Passing variables\":{\"main\":[[{\"node\":\"Run python script\",\"type\":\"main\",\"index\":0}]]},\"Run python script\":{\"main\":[[{\"node\":\"Play sound\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "## Disclaimer\n\nThe _Execute Command_ node is only supported on _self-hosted_ (local) instances of n8n.\n\n## Introduction\n\n![1.jpg](https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/1_afbe14cda3.jpg)\n\n**KOKORO TTS** \\- Kokoro TTS is a compact yet powerful text-to-speech model, currently available on Hugging Face and GitHub. Despite its modest size—trained on less than 100 hours of audio—it delivers impressive results, consistently topping the TTS leaderboard on Hugging Face. Unlike larger systems, Kokoro TTS offers the advantage of running locally, even on devices without GPUs, making it accessible for a wide range of users.\n\n**Who will benefit from this integration?**\n\nThis will be useful for video bloggers, TikTokers, and it will also enable the creation of a free voice chat bot. Currently, TTS models are mostly paid, but this integration will allow for fully free voice generation. The possibilities are limited only by your imagination.\n\n#### Note\n\nUnfortunately, we can't interact with the KOKORO API via browser URL (GET/POST),  \n**but** we can run a Python script through n8n and pass any variables to it.\n\nIn the tutorial, the D drive is used, but you can rewrite this for any paths, including the C drive.\n\n## Step 1\n\nYou need to have Python installed. [link](https://github.com/PierrunoYT/Kokoro-TTS-Local)  \nAlso, download and extract the portable version of KOKORO from GitHub.\n\nCreate a file named [voicegen.py](http://voicegen.py) with the following code in the KOKORO folder: (C:\\KOKORO). As you can see, the output path is: (D:\\output.mp3).\n    \n    \n    import sys\n    import shutil\n    from gradio_client import Client\n    \n    # Set UTF-8 encoding for stdout\n    sys.stdout.reconfigure(encoding='utf-8')\n    \n    # Get arguments from command line\n    text = sys.argv[1] # First argument: input text\n    voice = sys.argv[2] # Second argument: voice\n    speed = float(sys.argv[3]) # Third argument: speed (converted to float)\n    \n    print(f\"Received text: {text}\")\n    print(f\"Voice: {voice}\")\n    print(f\"Speed: {speed}\")\n    \n    # Connect to local Gradio server\n    client = Client(\"http://localhost:7860/\")\n    \n    # Generate speech using the API\n    result = client.predict(\n    text=text,\n    voice=voice,\n    speed=speed,\n    api_name=\"/generate_speech\"\n    )\n    \n    # Define output path\n    output_path = r\"D:\\output.mp3\"\n    \n    # Move the generated file\n    shutil.move(result[1], output_path)\n    \n    # Print output path\n    print(output_path)\n    \n\n## Step 2\n\nGo to n8n and create the following workflow.  \n![2.jpg](https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/2_a68200b442.jpg)\n\n## Step 3\n\nEdit Field Module.\n    \n    \n    {\n      \"voice\": \"af_sarah\",\n      \"text\": \"Hello world!\"\n    }\n    \n\n![33.jpg](https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/33_0bf357873e.jpg)\n\n## Step 4\n\nWe’ll need an Execute Command module with the command: python\n    \n    \n    C:\\KOKORO\\voicegen.py “{{ $json.text }}” “{{ $json.voice }}” 1\n    \n\n![44.jpg](https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/44_fafc00c452.jpg)\n\n## Step 5\n\nThe script is already working, but to listen to it, you can connect a Binary module with the path to the generated MP3 file\n    \n    \n    D:/output.mp3\n    \n\n![55.jpg](https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/55_51bc02e866.jpg)\n\n## Step 6\n\nClick “Text workflow” and enjoy the result.\n\nThere are more voices and accents than in ChatGPT, plus it’s free.\n\n### P.S.\n\nIf you want, there is a [detailed tutorial](https://blog.bswlife.site/2025/04/14/n8n-kokoro-tts-integration-setup/) on my blog.\n",
  "crawled_at": "2025-05-26T04:50:00.539915"
}