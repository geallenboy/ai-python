{
  "url": "https://n8n.io/workflows/4044-ai-chatbot-call-center-telegram-call-in-production-ready-part-1a/",
  "title": "AI Chatbot Call Center: Telegram Call In (Production-Ready, Part 1a)",
  "author": "ChatPayLabs",
  "publish_date": "Last update 11 days ago",
  "publish_date_absolute": "",
  "categories": [],
  "workflow_json": "{\"id\":\"pT3WWhziyHqc0Wru\",\"meta\":{\"instanceId\":\"daae7bb90c8655b08e0b68de8a52b1178f2812f6a234efb0b0509279dbb70b3e\",\"templateCredsSetupCompleted\":true},\"name\":\"ðŸ¤™ Telegram Call In\",\"tags\":[{\"id\":\"no8Mb078mvRgw7PS\",\"name\":\"DEMO\",\"createdAt\":\"2025-04-30T05:34:10.330Z\",\"updatedAt\":\"2025-04-30T05:34:10.330Z\"},{\"id\":\"M2uPwGVjWmavBPky\",\"name\":\"2.0\",\"createdAt\":\"2025-05-01T16:38:48.524Z\",\"updatedAt\":\"2025-05-01T16:38:48.524Z\"},{\"id\":\"WfVDdyMwitySVPfo\",\"name\":\"Input\",\"createdAt\":\"2025-05-05T10:21:45.271Z\",\"updatedAt\":\"2025-05-05T10:21:45.271Z\"}],\"nodes\":[{\"id\":\"83a6a0bd-4d48-4a83-9ac4-9c5391267e70\",\"name\":\"Telegram Trigger\",\"type\":\"n8n-nodes-base.telegramTrigger\",\"notes\":\"@chpy_demo_bot\",\"position\":[-1560,820],\"webhookId\":\"dcac86de-74a3-48e4-81b2-7b63c8fac5be\",\"parameters\":{},\"notesInFlow\":true,\"typeVersion\":1.2},{\"id\":\"604b543f-6eb1-4c3b-88ed-59e21690392d\",\"name\":\"Test Trigger\",\"type\":\"@n8n/n8n-nodes-langchain.chatTrigger\",\"position\":[-1560,1560],\"webhookId\":\"9ed1eb5f-bfe9-4bd3-8451-b26d11613388\",\"parameters\":{},\"typeVersion\":1.1},{\"id\":\"da05274e-8d03-47a6-9e6d-4e67e51d4232\",\"name\":\"Test Input\",\"type\":\"n8n-nodes-base.set\",\"position\":[80,1560],\"parameters\":{},\"typeVersion\":3.4},{\"id\":\"8fcce9e5-83fe-4d34-a085-18d3236237d5\",\"name\":\"Telegram Input\",\"type\":\"n8n-nodes-base.set\",\"position\":[80,1060],\"parameters\":{},\"typeVersion\":3.4},{\"id\":\"4ac6e9d3-3a49-49c1-af6e-03dea00a4487\",\"name\":\"Type Switch\",\"type\":\"n8n-nodes-base.switch\",\"position\":[-180,800],\"parameters\":{},\"typeVersion\":3.2},{\"id\":\"6b11f82b-e996-436f-90b0-02507ded4354\",\"name\":\"Download Audio\",\"type\":\"n8n-nodes-base.telegram\",\"notes\":\"@chpy_demo_bot\",\"position\":[80,360],\"webhookId\":\"97df0286-dbe3-46dd-ab54-99c01e73e540\",\"parameters\":{},\"notesInFlow\":true,\"typeVersion\":1.2},{\"id\":\"6c5b409c-23f1-488c-9be9-36ba7ac20f5c\",\"name\":\"Extract from File\",\"type\":\"n8n-nodes-base.extractFromFile\",\"position\":[260,360],\"parameters\":{},\"typeVersion\":1},{\"id\":\"776fb632-2d0f-4214-be25-e369ec9ab766\",\"name\":\"Google STT\",\"type\":\"n8n-nodes-google-speech.googleSpeech\",\"onError\":\"continueRegularOutput\",\"position\":[920,360],\"parameters\":{},\"typeVersion\":1},{\"id\":\"ed56defb-887e-4950-a72d-1f5e7132b235\",\"name\":\"Telegram Voice Input\",\"type\":\"n8n-nodes-base.set\",\"position\":[1320,340],\"parameters\":{},\"typeVersion\":3.4},{\"id\":\"2c34afcc-5936-4009-a3b2-65364f2a4060\",\"name\":\"Input\",\"type\":\"n8n-nodes-base.set\",\"position\":[1560,1060],\"parameters\":{},\"typeVersion\":3.4},{\"id\":\"4b9e3343-525a-46ee-8164-def8f5603b1b\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[0,0],\"parameters\":{\"content\":\"\"},\"typeVersion\":1},{\"id\":\"42d7e86f-dd8e-447d-b236-55b6dca3f902\",\"name\":\"If Telegram\",\"type\":\"n8n-nodes-base.if\",\"position\":[1540,1560],\"parameters\":{},\"typeVersion\":2.2},{\"id\":\"f9a0a9d3-4c74-4322-af8c-06a90edee657\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-20,1460],\"parameters\":{\"content\":\"\"},\"typeVersion\":1},{\"id\":\"d95c57a9-6c1b-474e-86f7-9f6a4dbbaa54\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[0,960],\"parameters\":{\"content\":\"\"},\"typeVersion\":1},{\"id\":\"b178b3ca-a944-4d31-a342-a9f1ff6df8e2\",\"name\":\"Sticky Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1300,880],\"parameters\":{\"content\":\"\"},\"typeVersion\":1},{\"id\":\"24a7ffa8-86a2-4800-8557-4bfe57aa9f26\",\"name\":\"If Active\",\"type\":\"n8n-nodes-base.if\",\"position\":[-720,1240],\"parameters\":{},\"typeVersion\":2.2},{\"id\":\"a95d2df5-9075-4be7-8428-b67b3ec4e49d\",\"name\":\"Parse Service\",\"type\":\"n8n-nodes-base.code\",\"position\":[-720,800],\"parameters\":{},\"typeVersion\":2},{\"id\":\"5d6c8ab7-95b8-4de8-bc9b-9ef55e96f0ec\",\"name\":\"Sticky Note4\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-1360,700],\"parameters\":{\"content\":\"\"},\"typeVersion\":1},{\"id\":\"3b38c690-2b14-44ee-884c-62920a35968e\",\"name\":\"Member Cache\",\"type\":\"n8n-nodes-base.redis\",\"notes\":\"member:telegram:{user_id}:data\\nTTL 5m\",\"onError\":\"continueRegularOutput\",\"position\":[-1160,820],\"parameters\":{},\"notesInFlow\":true,\"typeVersion\":1},{\"id\":\"a8e8a046-b1ce-4452-82de-84ade7619f73\",\"name\":\"If Member Cache\",\"type\":\"n8n-nodes-base.if\",\"position\":[-940,820],\"parameters\":{},\"typeVersion\":2.2},{\"id\":\"6a45ad3d-4afb-4a27-8ab8-39b564007cac\",\"name\":\"Load Memer Data\",\"type\":\"n8n-nodes-base.postgres\",\"onError\":\"continueRegularOutput\",\"position\":[-720,1000],\"parameters\":{},\"executeOnce\":true,\"typeVersion\":2.6,\"alwaysOutputData\":true},{\"id\":\"396b03a6-3d31-4440-89cf-4e206017e97a\",\"name\":\"Save Member Cache\",\"type\":\"n8n-nodes-base.redis\",\"notes\":\"TTL 5m\",\"onError\":\"continueRegularOutput\",\"position\":[-440,1220],\"parameters\":{},\"notesInFlow\":true,\"typeVersion\":1},{\"id\":\"ce6bfd49-5e15-4693-9bb0-165b9ab2658c\",\"name\":\"Member\",\"type\":\"n8n-nodes-base.set\",\"notes\":\"language: English\",\"position\":[-440,800],\"parameters\":{},\"notesInFlow\":true,\"typeVersion\":3.4},{\"id\":\"01a5ee20-55b5-46e6-b249-3d8dc666be55\",\"name\":\"Switch\",\"type\":\"n8n-nodes-base.switch\",\"position\":[440,320],\"parameters\":{},\"typeVersion\":3.2},{\"id\":\"14ec3274-411d-4edf-ba62-20fa251b7632\",\"name\":\"English\",\"type\":\"n8n-nodes-base.set\",\"position\":[660,680],\"parameters\":{},\"typeVersion\":3.4},{\"id\":\"04b6d053-f58a-4aed-b973-5b9501e91152\",\"name\":\"yue-Hant-HK\",\"type\":\"n8n-nodes-base.set\",\"position\":[660,40],\"parameters\":{},\"typeVersion\":3.4},{\"id\":\"91fb5e72-928e-46cc-b2a1-a99d6a553f65\",\"name\":\"cmn-Hant-TW\",\"type\":\"n8n-nodes-base.set\",\"position\":[660,360],\"parameters\":{},\"typeVersion\":3.4},{\"id\":\"a06a0231-81b6-4670-8471-f8cff2d2c91a\",\"name\":\"cmn-Hans-CN\",\"type\":\"n8n-nodes-base.set\",\"position\":[660,200],\"parameters\":{},\"typeVersion\":3.4},{\"id\":\"f9a3efca-b539-4c70-92c8-db33641715e9\",\"name\":\"ja-JP\",\"type\":\"n8n-nodes-base.set\",\"position\":[660,520],\"parameters\":{},\"typeVersion\":3.4},{\"id\":\"4964da4f-3fde-44c2-b214-fdbf914adf18\",\"name\":\"If Transcript\",\"type\":\"n8n-nodes-base.if\",\"position\":[1100,360],\"parameters\":{},\"typeVersion\":2.2},{\"id\":\"f34dfa75-979e-44fc-9d73-3312e5cb3c4c\",\"name\":\"No Transcript Input\",\"type\":\"n8n-nodes-base.set\",\"notes\":\"I don't understand\",\"position\":[1720,640],\"parameters\":{},\"notesInFlow\":true,\"typeVersion\":3.4},{\"id\":\"eb90c445-b21f-4265-aba7-a309eb0d498c\",\"name\":\"Sticky Note5\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1620,560],\"parameters\":{\"content\":\"\"},\"typeVersion\":1},{\"id\":\"ddfc222b-b617-470e-96c5-779ebe01c9a7\",\"name\":\"Demo Call Back\",\"type\":\"n8n-nodes-base.executeWorkflow\",\"position\":[1940,640],\"parameters\":{},\"typeVersion\":1.2},{\"id\":\"09097191-a808-4f35-b111-84604b8ff872\",\"name\":\"Demo Call Center\",\"type\":\"n8n-nodes-base.executeWorkflow\",\"notes\":\"Demo Call Center\",\"position\":[1740,1060],\"parameters\":{},\"notesInFlow\":true,\"typeVersion\":1.2},{\"id\":\"f313bea0-0346-4011-82a8-b0a0d4bd46a1\",\"name\":\"Telegram Test Output\",\"type\":\"n8n-nodes-base.telegram\",\"notes\":\"@chpy_demo_bot\",\"position\":[1720,1540],\"webhookId\":\"ff303e8b-3ed5-429f-b26b-88acf01bc90d\",\"parameters\":{},\"notesInFlow\":true,\"typeVersion\":1.2}],\"active\":false,\"pinData\":{},\"settings\":{\"timezone\":\"Etc/UTC\",\"callerPolicy\":\"workflowsFromSameOwner\",\"errorWorkflow\":\"vuso7W8t402BPcT2\",\"executionOrder\":\"v1\"},\"versionId\":\"86a4b876-5de9-4f72-afdf-a613d56fe94c\",\"connections\":{\"Input\":{\"main\":[[{\"node\":\"Demo Call Center\",\"type\":\"main\",\"index\":0},{\"node\":\"If Telegram\",\"type\":\"main\",\"index\":0}]]},\"ja-JP\":{\"main\":[[{\"node\":\"Google STT\",\"type\":\"main\",\"index\":0}]]},\"Member\":{\"main\":[[{\"node\":\"Type Switch\",\"type\":\"main\",\"index\":0}]]},\"Switch\":{\"main\":[[{\"node\":\"yue-Hant-HK\",\"type\":\"main\",\"index\":0}],[{\"node\":\"cmn-Hans-CN\",\"type\":\"main\",\"index\":0}],[{\"node\":\"cmn-Hant-TW\",\"type\":\"main\",\"index\":0}],[{\"node\":\"ja-JP\",\"type\":\"main\",\"index\":0}],[{\"node\":\"English\",\"type\":\"main\",\"index\":0}]]},\"English\":{\"main\":[[{\"node\":\"Google STT\",\"type\":\"main\",\"index\":0}]]},\"If Active\":{\"main\":[[{\"node\":\"Save Member Cache\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Save Member Cache\",\"type\":\"main\",\"index\":0}]]},\"Google STT\":{\"main\":[[{\"node\":\"If Transcript\",\"type\":\"main\",\"index\":0}]]},\"Test Input\":{\"main\":[[{\"node\":\"Input\",\"type\":\"main\",\"index\":0}]]},\"If Telegram\":{\"main\":[[{\"node\":\"Telegram Test Output\",\"type\":\"main\",\"index\":0}]]},\"Type Switch\":{\"main\":[[{\"node\":\"Telegram Input\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Download Audio\",\"type\":\"main\",\"index\":0}]]},\"cmn-Hant-TW\":{\"main\":[[{\"node\":\"Google STT\",\"type\":\"main\",\"index\":0}]]},\"yue-Hant-HK\":{\"main\":[[{\"node\":\"Google STT\",\"type\":\"main\",\"index\":0}]]},\"Member Cache\":{\"main\":[[{\"node\":\"If Member Cache\",\"type\":\"main\",\"index\":0}]]},\"Test Trigger\":{\"main\":[[{\"node\":\"Test Input\",\"type\":\"main\",\"index\":0}]]},\"If Transcript\":{\"main\":[[{\"node\":\"Telegram Voice Input\",\"type\":\"main\",\"index\":0}],[{\"node\":\"No Transcript Input\",\"type\":\"main\",\"index\":0}]]},\"Parse Service\":{\"main\":[[{\"node\":\"Member\",\"type\":\"main\",\"index\":0}]]},\"Download Audio\":{\"main\":[[{\"node\":\"Extract from File\",\"type\":\"main\",\"index\":0}]]},\"Telegram Input\":{\"main\":[[{\"node\":\"Input\",\"type\":\"main\",\"index\":0}]]},\"If Member Cache\":{\"main\":[[{\"node\":\"Parse Service\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Load Memer Data\",\"type\":\"main\",\"index\":0}]]},\"Load Memer Data\":{\"main\":[[{\"node\":\"If Active\",\"type\":\"main\",\"index\":0}]]},\"Telegram Trigger\":{\"main\":[[{\"node\":\"Member Cache\",\"type\":\"main\",\"index\":0}]]},\"Extract from File\":{\"main\":[[{\"node\":\"Switch\",\"type\":\"main\",\"index\":0}]]},\"Save Member Cache\":{\"main\":[[{\"node\":\"Member\",\"type\":\"main\",\"index\":0}]]},\"No Transcript Input\":{\"main\":[[{\"node\":\"Demo Call Back\",\"type\":\"main\",\"index\":0}]]},\"Telegram Voice Input\":{\"main\":[[{\"node\":\"Input\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "### Workflow Name: ðŸ¤™ **Telegram Call In**\n\nTemplate was created in n8n v1.90.2\n\n### Skill Level: High\n\n### Categories: n8n, Chatbot\n\n### Stacks\n\n  * Chat Trigger node\n  * Telegram Trigger node\n  * Redis node\n  * Postgres node\n  * Execute Sub-workflow\n  * If node, Code node, Edit Fields (Set), Extract From File\n\n\n\n### Prerequisite\n\n  * Community nodes: **n8n-nodes-google-speech**\n  * Sub-workflow: **Demo Call Back**\n  * Sub-workflow: **Demo Call Center**\n\n\n\n# Production Features\n\n  * **Scaling Design** for n8n **Queue mode** in production environment\n  * Optional **Member Data** from **external Database** with **Caching Mechanism**.\n  * Optional **Voice Message to Text Message** via Google STT API with **Multi-Languages** support.\n  * **Testing Flow** with or without dependance on other workflow.\n  * **Error Management**\n\n\n\n# What this workflow does?\n\nThis is a n8n **Telegram Call In Workflow**. It will wait for message from Telegram bot and sent to the Call Center to process.\n\n# **How it works**\n\n  * The **Telegram Trigger** node will wait for the message from the Telegram bot.\n  * When message is received, it will first check for the matching Member from the PostgreSQL database.\n  * Then determine if it is a Text message or Voice message.\n  * For voice message, use the **Google Speech to Text API** to transcript it into text.\n  * Finally, pass the text to the next flow, i.e. the **Call Center**.\n\n\n\n# **Set up instructions**\n\n**n8n-nodes-google-speech**\n\n  1. Pull and Set up the required SQL from our [Github repository](https://github.com/ChatPayLabs/n8n-chatbot-core).\n  2. Go User > Settings > Community nodes, install **n8n-nodes-google-speech** node \n     1. Follow <https://www.npmjs.com/package/n8n-nodes-google-speech>\n     2. Setup the **Google STT node**\n  3. Create you **Telegram credentials** , refer to [n8n integration documentation](https://docs.n8n.io/integrations/builtin/credentials/slack/?utm_source=n8n_app&utm_medium=credential_settings&utm_campaign=create_new_credentials_modal) for more information.\n  4. Select your Credentials in **Telegram Trigger**\n  5. Create you **Redis credentials** , refer to [n8n integration documentation](https://docs.n8n.io/integrations/builtin/credentials/slack/?utm_source=n8n_app&utm_medium=credential_settings&utm_campaign=create_new_credentials_modal) for more information.\n  6. Select your Credentials in **Member Cache** and **Save Member Cache**.\n  7. Create you **Postgres credentials** , refer to [n8n integration documentation](https://docs.n8n.io/integrations/builtin/credentials/slack/?utm_source=n8n_app&utm_medium=credential_settings&utm_campaign=create_new_credentials_modal) for more information.\n  8. Select your Credentials in **Load Member Data.**\n  9. FOR TEST ONLY. Enable the **Telegram Test Output** for testing from the **Test Input**.\n  10. **Remember to activate this workflow for incoming message.**\n\n\n\n# How to adjust it to your needs\n\n  1. By default, this template will use the **sys_member** table for member information, you could change it for your own design.\n  2. The demo implementation does not include failed member loading situation, you should implement based on your needs, e.g. if is_active is not true, doâ€¦\n  3. You can replace the sub-workflow Demo Call Back and Demo Call Center to another flow as needs.\n\n\n",
  "crawled_at": "2025-05-26T06:21:18.842369"
}