{
  "url": "https://n8n.io/workflows/2663-youtube-report-generator/",
  "title": "YouTube Report Generator",
  "author": "Mauricio Perera",
  "publish_date": "Last update 5 months ago",
  "publish_date_absolute": "2024-12-26",
  "categories": [],
  "workflow_json": "{\"id\":\"nP0jpScffi653CjX\",\"meta\":{\"instanceId\":\"92786e96ce436aecd3a1d62d818a74e51ca684bb36c805928bef93a3b46549ad\"},\"name\":\"YouTube Subtitles Report Generator\",\"tags\":[],\"nodes\":[{\"id\":\"60e90a8d-d97a-4e9b-91f4-cc24af3bf22d\",\"name\":\"Trigger Webhook\",\"type\":\"n8n-nodes-base.webhook\",\"position\":[-280,0],\"webhookId\":\"97aa1730-20ba-425c-852d-d08710a7f895\",\"parameters\":{\"path\":\"c18956b9-f9b7-4fc8-b01c-67d5c9eeddd9\",\"options\":{},\"responseMode\":\"responseNode\"},\"typeVersion\":2},{\"id\":\"8c51d64f-e380-4bee-9ce6-d0417a833167\",\"name\":\"Extract Subtitles URLs\",\"type\":\"n8n-nodes-base.code\",\"position\":[320,0],\"parameters\":{\"jsCode\":\"// Get the HTML content\\nconst html = items[0].json.data;\\n\\n// Search for the subtitles block in the HTML\\nconst match = html.match(/\\\\\\\"captions\\\\\\\":\\\\\\\\{.*?\\\\\\\\}/);\\n\\nif (!match) {\\n    throw new Error(\\\"No subtitles information found in the HTML.\\\");\\n}\\n\\n// Extract the subtitles block\\nconst captionsBlock = match[0];\\n\\n// Search for all base URLs of subtitles\\nconst baseUrlMatches = [...captionsBlock.matchAll(/\\\\\\\"baseUrl\\\\\\\":\\\\\\\"(.*?)\\\\\\\"/g)];\\n\\nif (!baseUrlMatches.length) {\\n    throw new Error(\\\"No subtitle URLs found.\\\");\\n}\\n\\n// Decode and clean all base URLs\\nconst baseUrls = baseUrlMatches.map(match => \\n    decodeURIComponent(match[1]).replace(/\\\\\\\\\\\\u0026/g, \\\"&\\\")\\n);\\n\\n// Return all URLs as the node's output\\nreturn baseUrls.map(url => ({ json: { baseUrl: url } }));\\n\"},\"typeVersion\":2},{\"id\":\"87193be8-889e-464c-b4b6-08486b5f187c\",\"name\":\"Fetch Video HTML\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[-20,0],\"parameters\":{\"url\":\"https://www.youtube.com/watch\",\"options\":{},\"sendQuery\":true,\"sendHeaders\":true,\"queryParameters\":{\"parameters\":[{\"name\":\"v\",\"value\":\"={{ $json.query.id }}\"}]},\"headerParameters\":{\"parameters\":[{\"name\":\"User-Agent\",\"value\":\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36\"},{\"name\":\"Accept\",\"value\":\"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8\"},{\"name\":\"Accept-Language\",\"value\":\"en-US,en;q=0.5\"},{\"name\":\"Connection\",\"value\":\"keep-alive\"}]}},\"typeVersion\":4.2},{\"id\":\"73db26d3-7934-4dfe-af79-4827c64a9872\",\"name\":\"Fetch Subtitles Content\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[660,0],\"parameters\":{\"url\":\"={{ $json.baseUrl }}\",\"options\":{}},\"typeVersion\":4.2},{\"id\":\"fb7aa63c-9664-4311-ba29-8e46eb3b02e2\",\"name\":\"Generate Analytical Report\",\"type\":\"@n8n/n8n-nodes-langchain.chainLlm\",\"position\":[900,0],\"parameters\":{\"text\":\"={{ $json.data }}\",\"messages\":{\"messageValues\":[{\"message\":\"**Prompt:**  \\nYour task is to process subtitles in XML format and generate an **analytical report** focusing on the main theme of the transcript. The report should focus solely on the theme and must not explicitly refer to the source of the content (e.g., avoid phrases like \\\"this video\\\" or \\\"this dialogue\\\").  \\n\\n**Instructions:**  \\n1. **Input:**  \\n   - You will receive subtitles in XML format. This format will include tags such as <text>, <cue>, or similar that structure the data.  \\n2. **Extraction:**  \\n   - Ignore the XML tags and extract only the textual content.  \\n   - Maintain consistency and logical flow of the content during extraction.  \\n3. **Analysis:**  \\n   - Identify the main ideas, key concepts, recurring themes, and connections between them.  \\n   - Focus on the themes discussed and their overall relevance.  \\n4. **Report:**  \\n   - Write a direct and analytical report that synthesizes the central theme.  \\n   - Use formal and objective language without referencing the format or source of the subtitles.  \\n   - Ensure the report is clear, well-structured, and centered on the theme.  \\n\\n**Report Format:**  \\n- **Title:** A brief phrase capturing the essence of the main theme.  \\n- **Body of the report:** An analytical description of the main theme in **a maximum of 3 paragraphs**, with concise and coherent explanations.  \\n\\n**Example Output:**  \\n\\n**Title:** The Ethical Challenges of Artificial Intelligence  \\n\\n**Report:**  \\nArtificial intelligence presents significant challenges in areas such as privacy, fairness, and automated decision-making. Its implementation in critical sectors such as healthcare, justice, and security has sparked debates about inherent biases and lack of transparency. Additionally, there is growing concern over the ethical implications of automation, including its impact on employment and the global economy. Finally, the importance of establishing strong regulatory frameworks is highlighted to balance technological innovation with the protection of human rights.  \\n\\nApply this structure to any XML subtitle to transform it into a clear and professional thematic report.\"}]},\"promptType\":\"define\"},\"typeVersion\":1.5},{\"id\":\"64604d71-c0ef-465d-a2f2-9dabd8456a89\",\"name\":\"AI Model Configuration\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatGoogleGemini\",\"position\":[980,200],\"parameters\":{\"options\":{\"temperature\":0.4},\"modelName\":\"models/gemini-1.5-flash-002\"},\"credentials\":{\"googlePalmApi\":{\"id\":\"ll8OrIkHyNF0nCKT\",\"name\":\"Google Gemini(PaLM) Api account\"}},\"typeVersion\":1},{\"id\":\"fabb904d-b27d-4202-9b2d-8b1d76c6a597\",\"name\":\"Return Analytical Report\",\"type\":\"n8n-nodes-base.respondToWebhook\",\"position\":[1260,0],\"parameters\":{\"options\":{},\"respondWith\":\"text\",\"responseBody\":\"={{ $json.text }}\"},\"typeVersion\":1.1},{\"id\":\"c7345678-9abc-4ef0-8bdf-1234567890ab\",\"name\":\"Workflow Overview\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-500,0],\"parameters\":{\"height\":200,\"content\":\"This workflow processes YouTube video subtitles to generate a thematic analytical report.\\n\\nSteps:\\n1. Trigger the workflow using the Webhook node with a YouTube video ID.\\n2. Fetch HTML content and extract subtitle data.\\n3. Process the subtitles and generate an AI-powered analytical report.\\n4. Return the report as the response to the webhook.\\n\\nNotes:\\n- This workflow extracts data directly from YouTube's public HTML, requiring no API key.\\n- Execution costs depend on the language model used and the length of the video (token count).\\n- Using the free tier of models like Google Gemini is recommended to minimize costs.\"},\"typeVersion\":1}],\"active\":true,\"settings\":{\"executionOrder\":\"v1\"},\"versionId\":\"01e378ed-fb29-4826-9d43-5ed5cf8579de\",\"connections\":{\"Trigger Webhook\":{\"main\":[[{\"node\":\"Fetch Video HTML\",\"type\":\"main\",\"index\":0}]]},\"Fetch Video HTML\":{\"main\":[[{\"node\":\"Extract Subtitles URLs\",\"type\":\"main\",\"index\":0}]]},\"AI Model Configuration\":{\"ai_languageModel\":[[{\"node\":\"Generate Analytical Report\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"Extract Subtitles URLs\":{\"main\":[[{\"node\":\"Fetch Subtitles Content\",\"type\":\"main\",\"index\":0}]]},\"Fetch Subtitles Content\":{\"main\":[[{\"node\":\"Generate Analytical Report\",\"type\":\"main\",\"index\":0}]]},\"Generate Analytical Report\":{\"main\":[[{\"node\":\"Return Analytical Report\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "# YouTube Subtitles Report Generator\n\n### Overview\n\nThis template enables users to generate analytical reports from YouTube video subtitles, providing insights into the thematic content of the video. Designed for efficiency and simplicity, it processes video subtitles without requiring an API key, making it an accessible solution for content analysis. The system assumes videos already have subtitles available, excluding live streams and videos without subtitle data.\n\n* * *\n\n### Key Features\n\n  1. **Trigger Webhook:** Seamlessly receive video IDs through a webhook trigger.\n  2. **Fetch Video HTML:** Retrieves the video’s HTML content directly from YouTube.\n  3. **Extract Subtitles URLs:** Processes the HTML content to find and decode subtitle URLs.\n  4. **Fetch Subtitles Content:** Downloads the subtitles from the decoded URLs in XML format.\n  5. **Generate Analytical Report:** Utilizes an AI model to summarize and analyze the thematic essence of video content. \n     * The system supports models such as Google Gemini, OpenAI, and other compatible language models.\n     * The quality of the results may vary depending on the model used, with better models providing faster and more accurate summaries.\n     * The default prompt focuses on identifying and summarizing the main theme of the video while excluding content related to promotions, subscriptions, or sponsored content.\n  6. **Return Analytical Report:** Delivers concise analytical reports as the final response to the webhook, suitable for various use cases like research, content creation, or consumption as plain text.\n\n\n\n* * *\n\n### Setup Instructions\n\n#### Step 1: Webhook Configuration\n\n  * Set up the webhook URL in your external system (e.g., app, API) to send YouTube video IDs to this workflow.\n\n\n\n#### Step 2: API Access\n\n  * Ensure that your environment has access to YouTube’s public HTML content. An API key is not required since the workflow parses publicly available data.\n\n\n\n#### Step 3: AI Integration\n\n  * Verify the connection to the AI model used for report generation. Supported models include Google Gemini and OpenAI.\n  * Note that the system can be customized by modifying the provided prompt to suit specific analysis needs.\n\n\n\n#### Step 4: Testing\n\n  * Run a sample test with a YouTube video ID to ensure subtitles are correctly retrieved and the report is generated successfully.\n\n\n\n* * *\n\n### Expected Outcomes\n\n  * **Effortless Content Analysis:** Generate thematic reports with minimal setup.\n  * **No API Key Dependency:** Simplified access by leveraging YouTube’s public HTML.\n  * **Actionable Insights:** Gain valuable information on video content for business, research, or personal projects.\n  * **Cost Considerations:** The execution cost depends primarily on the model used and the length of the video (affecting token usage). Leveraging the free tier of Google Gemini models is recommended to minimize costs.\n  * **Main Theme Extraction:** The default prompt excludes irrelevant promotional content, providing clear and focused thematic summaries.\n\n\n\nEstimated setup time: 15–20 minutes with a ready environment.\n\n* * *\n\n### Prompt Description\n\nThe workflow includes a customizable prompt used to process subtitles in XML format and generate analytical reports. The generated report includes:\n\n  1. **Title:** A brief phrase capturing the essence of the main theme.\n  2. **Body:** An analytical description of the main theme, structured into a maximum of three concise paragraphs. It focuses on summarizing key ideas, recurring themes, and connections without referencing the source explicitly (e.g., avoiding phrases like “this video”). The system also removes content related to sales, subscriptions, or promotions to maintain a clear thematic focus.\n\n\n\n* * *\n\n### Example Output\n\n**Title:** The Ethical Challenges of Artificial Intelligence\n\n**Report:**  \nArtificial intelligence presents significant challenges in areas such as privacy, fairness, and automated decision-making. Its implementation in critical sectors such as healthcare, justice, and security has sparked debates about inherent biases and lack of transparency. Additionally, there is growing concern over the ethical implications of automation, including its impact on employment and the global economy. Finally, the importance of establishing strong regulatory frameworks is highlighted to balance technological innovation with the protection of human rights.\n",
  "crawled_at": "2025-05-26T01:38:31.603150"
}