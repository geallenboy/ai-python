{
  "url": "https://n8n.io/workflows/1420-google-calendar-to-slack-status-and-philips-hue/",
  "title": "Google Calendar to Slack Status and Philips Hue",
  "author": "TheUnknownEntity",
  "publish_date": "Last update 10 months ago",
  "publish_date_absolute": "2024-07-25",
  "categories": [
    {
      "name": "Building Blocks"
    }
  ],
  "workflow_json": "{\"id\":118,\"name\":\"Google Calendar to Slack Status & Philips Hue\",\"nodes\":[{\"name\":\"On clicking 'execute'\",\"type\":\"n8n-nodes-base.manualTrigger\",\"disabled\":true,\"position\":[420,420],\"parameters\":{},\"typeVersion\":1},{\"name\":\"Google Calendar\",\"type\":\"n8n-nodes-base.googleCalendar\",\"position\":[720,600],\"parameters\":{\"eventId\":\"={{$node[\\\"Event Started\\\"].json[\\\"id\\\"].split(\\\"_\\\")[0]}}\",\"options\":{},\"calendar\":\"youremail@domain.com\",\"operation\":\"get\"},\"credentials\":{\"googleCalendarOAuth2Api\":{\"id\":\"15\",\"name\":\"GoogleCalendar - Personal\"}},\"typeVersion\":1},{\"name\":\"Light - Busy\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[1220,180],\"parameters\":{\"url\":\"WEBHOOK1\",\"options\":{},\"requestMethod\":\"POST\"},\"typeVersion\":1},{\"name\":\"Light - Available\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[1220,600],\"parameters\":{\"url\":\"WEBHOOK3\",\"options\":{},\"requestMethod\":\"POST\"},\"typeVersion\":1},{\"name\":\"Switch\",\"type\":\"n8n-nodes-base.switch\",\"position\":[1040,460],\"parameters\":{\"rules\":{\"rules\":[{\"value2\":\"4dw_doing\",\"operation\":\"startsWith\"},{\"value2\":\"4dw_managing\",\"operation\":\"startsWith\"},{\"value2\":\"4dw_leading\",\"operation\":\"startsWith\"},{\"output\":1,\"value2\":\"4dw_living\",\"operation\":\"startsWith\"}]},\"value1\":\"={{$json[\\\"calColor\\\"]}}\",\"dataType\":\"string\",\"fallbackOutput\":3},\"typeVersion\":1},{\"name\":\"Light - Personal\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[1220,340],\"parameters\":{\"url\":\"WEBHOOK2\",\"options\":{},\"requestMethod\":\"POST\"},\"typeVersion\":1},{\"name\":\"Event Started\",\"type\":\"n8n-nodes-base.googleCalendarTrigger\",\"position\":[540,600],\"parameters\":{\"options\":{},\"pollTimes\":{\"item\":[{\"mode\":\"everyX\",\"unit\":\"minutes\",\"value\":5}]},\"triggerOn\":\"eventStarted\",\"calendarId\":\"youremail@domain.com\"},\"credentials\":{\"googleCalendarOAuth2Api\":{\"id\":\"15\",\"name\":\"GoogleCalendar - Personal\"}},\"typeVersion\":1},{\"name\":\"Slack - Status\",\"type\":\"n8n-nodes-base.slack\",\"position\":[1040,720],\"parameters\":{\"resource\":\"userProfile\",\"operation\":\"update\",\"additionalFields\":{\"status_text\":\"={{$json[\\\"summary\\\"]}}\",\"status_emoji\":\"=:{{$json[\\\"calColor\\\"]}}:\"}},\"credentials\":{\"slackApi\":{\"id\":\"17\",\"name\":\"CompanySlack\"}},\"typeVersion\":1},{\"name\":\"Set CalColor\",\"type\":\"n8n-nodes-base.function\",\"position\":[880,600],\"parameters\":{\"functionCode\":\"for (item of items) {\\n\\n  switch (item.json.colorId) {\\n    case '1':\\n      calColor = 'Lavendar';\\n      break;\\n    case '2':\\n      calColor = '4dw_leading';\\n      break;\\n    case '3':\\n      calColor = 'Grape';\\n      break;\\n    case '4':\\n      calColor = 'Flamingo';\\n      break;\\n    case '5':\\n      calColor = '4dw_managing';\\n      break;\\n    case '6':\\n      calColor = 'Tangerine';\\n      break;\\n    case '7':\\n      calColor = '4dw_living';\\n      break;\\n    case '8':\\n      calColor = 'Graphite';\\n      break;\\n    case '9':\\n      calColor = 'Blueberry';\\n      break;\\n    case '10':\\n      calColor = 'Basil';\\n      break;\\n    case '11':\\n      calColor = '4dw_doing';\\n      break;\\n    default:\\n      calColor = 'undefined';\\n  }\\n  item.json.calColor = calColor;\\n}\\n\\nreturn items;\"},\"typeVersion\":1}],\"active\":false,\"settings\":{},\"connections\":{\"Switch\":{\"main\":[[{\"node\":\"Light - Busy\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Light - Personal\",\"type\":\"main\",\"index\":0}],[],[{\"node\":\"Light - Available\",\"type\":\"main\",\"index\":0}]]},\"Set CalColor\":{\"main\":[[{\"node\":\"Slack - Status\",\"type\":\"main\",\"index\":0},{\"node\":\"Switch\",\"type\":\"main\",\"index\":0}]]},\"Event Started\":{\"main\":[[{\"node\":\"Google Calendar\",\"type\":\"main\",\"index\":0}]]},\"Google Calendar\":{\"main\":[[{\"node\":\"Set CalColor\",\"type\":\"main\",\"index\":0}]]},\"On clicking 'execute'\":{\"main\":[[]]}}}",
  "readme": "I'm currently trialing a 4 day work week for all staff at my company, and one of the major impacts on productivity is interruptions.\n\nAs such, I opted to use N8N to create a workflow to monitor my Google Calendar and when an event starts, to update my Slack status with an emote and the title of the calendar task. Additionally I opted to include to change the colour of Philips Hue lamp located in my living room where my wife is currently working so she know's if she can interrupt me or not.\n\nMy calendar is built on the theory behind the [Diary Detox](https://diarydetox.com/) system and as such the Slack Status reflect the colours involved. This was achieved using the emote aliases for the relevant colour circles.\n\n![4DW Colours.png](https://f000.backblazeb2.com/file/n8n-website-images/c7bf9cb3bc0d4b0c95ec749e5f866fae.png)\n\nThe Philips Hue lamp status is changed via the local API with Home Assistant. This is a very similiar process to controlling it with something like the Streamdeck, but the workflow calls the Webhook instead of the Streamdeck. This process can be found in lots of Youtube videos such as [this](https://www.youtube.com/watch?v=QI328yziiZs).\n\nThis gives my wife a very quick and easy way to know if she can interrupt me in my office (when the lights are Green or Blue) or when I'm busy (Red).\n\n![RedGreenLight.png](https://f000.backblazeb2.com/file/n8n-website-images/d770898b83314c128622f8926d80c9bf.png)\n\n**Please Note:** The above images are not intended to be an incentive to create your own Squid Games.\n\nAdditionally, when integrating Slack with N8N, there are 2 x APIs which can be used. Typically the Bot User OAuth Token is used, however in order for your Status to be updated, the **User OAuth Token** must be used with the _users.profile:read_ and _users.profile:write_ permissions enabled.\n\nFor clarity, I have removed the Webhooks from the Workflow as this would allow any person to control my lights. These can be inserted in the HTTP Request nodes. Each node responds to a different automation within the Home Assistant infrastructure.\n\n_Acknowledgement: I would also credit Jon (Discord) aka 8668 (Workflows) for writing the Function node which turns the ColorID into a named variable._\n",
  "crawled_at": "2025-05-25T19:41:01.928469"
}