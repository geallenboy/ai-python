{
  "url": "https://n8n.io/workflows/2287-classify-lemlist-replies-using-openai-and-automate-reply-handling/",
  "title": "Classify lemlist replies using OpenAI and automate reply handling",
  "author": "Lucas Perret",
  "publish_date": "Last update a year ago",
  "publish_date_absolute": "",
  "categories": [
    {
      "name": "Sales"
    },
    {
      "name": "AI"
    }
  ],
  "workflow_json": "{\"meta\":{\"instanceId\":\"2b1cc1a8b0a2fb9caab11ab2d5eb3712f9973066051b2e898cf4041a1f2a7757\",\"templateCredsSetupCompleted\":true},\"nodes\":[{\"id\":\"7786165e-5e74-4614-b065-86db19482b72\",\"name\":\"Format text with Markdown\",\"type\":\"n8n-nodes-base.markdown\",\"position\":[-1200,980],\"parameters\":{\"html\":\"={{ $json.text }}\",\"options\":{},\"destinationKey\":\"textClean\"},\"typeVersion\":1,\"continueOnFail\":true},{\"id\":\"8f73d4d6-2473-4fdf-8797-c049d6df6967\",\"name\":\"Lemlist Trigger - On new reply\",\"type\":\"n8n-nodes-base.lemlistTrigger\",\"position\":[-1600,980],\"webhookId\":\"039bb443-8d2a-4eb3-9c16-772943a46db7\",\"parameters\":{\"event\":\"emailsReplied\",\"options\":{\"isFirst\":true}},\"typeVersion\":1},{\"id\":\"1f94d672-0a70-45ad-bf96-72c4aecabcd0\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-1700,680],\"parameters\":{\"width\":304.92548549441915,\"height\":504.9663351162785,\"content\":\"### Get your lemlist API key\\n\\n1. Go to your lemlist account or create one [HERE](https://app.lemlist.com/create-account)\\n\\n2. Go to Settings -> Integrations\\n\\n3. Generate your API Key and copy it\\n\\n4. On this node, click on create new credential and paste your API key\"},\"typeVersion\":1},{\"id\":\"3032b04c-76a2-4f7c-a790-ede26b102254\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-2040,680],\"parameters\":{\"width\":319.6621253622332,\"height\":507.1074887209538,\"content\":\"# Read me\\n\\nThis workflow send email replies of your lemlist campaigns to the Slack channel of your choice.\\n\\nThe OpenAI node will classify the reply status. \\n\\nThe Slack alert is structured in a way that make it easy to read for the user.\"},\"typeVersion\":1},{\"id\":\"df142fcb-f5ec-475d-8f90-c0bd064d390c\",\"name\":\"OpenAI Chat Model\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\"position\":[-760,1320],\"parameters\":{\"model\":\"gpt-4o\",\"options\":{}},\"typeVersion\":1},{\"id\":\"1fa6d12c-2555-42c6-8f80-b24dc3608ed7\",\"name\":\"Structured Output Parser\",\"type\":\"@n8n/n8n-nodes-langchain.outputParserStructured\",\"position\":[-600,1320],\"parameters\":{\"schemaType\":\"manual\",\"inputSchema\":\"{\\n\\t\\\"type\\\": \\\"object\\\",\\n\\t\\\"properties\\\": {\\n\\t\\t\\\"category\\\": {\\n\\t\\t\\t\\\"type\\\": \\\"string\\\"\\n        }\\n\\t}\\n}\"},\"typeVersion\":1.2},{\"id\":\"734013f9-d058-4f08-9026-a41cd5877a3b\",\"name\":\"Send alert to Slack\",\"type\":\"n8n-nodes-base.slack\",\"position\":[320,700],\"parameters\":{\"text\":\"=\",\"select\":\"channel\",\"blocksUi\":\"={\\n\\t\\\"blocks\\\": [\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"section\\\",\\n\\t\\t\\t\\\"text\\\": {\\n\\t\\t\\t\\t\\\"type\\\": \\\"mrkdwn\\\",\\n\\t\\t\\t\\t\\\"text\\\": \\\":raised_hands: New reply in lemlist!\\\\n\\\"\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"section\\\",\\n\\t\\t\\t\\\"fields\\\": [\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\\"type\\\": \\\"mrkdwn\\\",\\n\\t\\t\\t\\t\\t\\\"text\\\": \\\"*Categorized as:*\\\\n{{ $json[\\\"output\\\"][\\\"category\\\"] }}\\\"\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\\"type\\\": \\\"mrkdwn\\\",\\n\\t\\t\\t\\t\\t\\\"text\\\": \\\"*Campaign:*\\\\n<https://app.lemlist.com/teams/{{ $json[\\\"teamId\\\"] }}/reports/campaigns/{{ $json[\\\"campaignId\\\"] }}|{{ $json[\\\"campaignName\\\"] }}>\\\"\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\\"type\\\": \\\"mrkdwn\\\",\\n\\t\\t\\t\\t\\t\\\"text\\\": \\\"*Sender Email:*\\\\n{{ $json[\\\"sendUserEmail\\\"] }}\\\"\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\\"type\\\": \\\"mrkdwn\\\",\\n\\t\\t\\t\\t\\t\\\"text\\\": \\\"*Lead Email:*\\\\n{{ $json[\\\"leadEmail\\\"] }}\\\"\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\\"type\\\": \\\"mrkdwn\\\",\\n\\t\\t\\t\\t\\t\\\"text\\\": \\\"*Linkedin URL:*\\\\n{{ $json[\\\"linkedinUrl\\\"] }}\\\"\\n\\t\\t\\t\\t}\\n\\t\\t\\t]\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"section\\\",\\n\\t\\t\\t\\\"text\\\": {\\n\\t\\t\\t\\t\\\"type\\\": \\\"mrkdwn\\\",\\n\\t\\t\\t\\t\\\"text\\\": \\\"*Reply preview*:\\\\n{{ JSON.stringify($json[\\\"textClean\\\"]).replace(/^\\\"(.+(?=\\\"$))\\\"$/, '$1').substring(0, 100) }}\\\"\\n\\t\\t\\t}\\n\\t\\t}\\n\\t]\\n}\",\"channelId\":{\"__rl\":true,\"mode\":\"name\",\"value\":\"automated_outbound_replies\"},\"messageType\":\"block\",\"otherOptions\":{\"botProfile\":{\"imageValues\":{\"icon_emoji\":\":fire:\",\"profilePhotoType\":\"emoji\"}},\"unfurl_links\":false,\"includeLinkToWorkflow\":false}},\"typeVersion\":2.1},{\"id\":\"0558c166-16d7-4c26-a09c-fb46c2b6b687\",\"name\":\"Lemlist - Unsubscribe\",\"type\":\"n8n-nodes-base.lemlist\",\"position\":[300,1000],\"parameters\":{\"email\":\"={{ $json[\\\"leadEmail\\\"] }}\",\"resource\":\"lead\",\"operation\":\"unsubscribe\",\"campaignId\":\"={{$json[\\\"campaignId\\\"]}}\"},\"typeVersion\":1},{\"id\":\"79d17d20-a60a-4b5a-a83c-821cac265b17\",\"name\":\"lemlist - Mark as interested\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[300,1260],\"parameters\":{\"url\":\"=https://api.lemlist.com/api/campaigns/{{$json[\\\"campaignId\\\"]}}/leads/{{$json[\\\"leadEmail\\\"]}}/interested\",\"options\":{},\"requestMethod\":\"POST\",\"authentication\":\"predefinedCredentialType\",\"nodeCredentialType\":\"lemlistApi\"},\"typeVersion\":2},{\"id\":\"04f74337-903c-481a-95ca-a1d4a5985b9e\",\"name\":\"Categorize lemlist reply\",\"type\":\"@n8n/n8n-nodes-langchain.chainLlm\",\"position\":[-780,1120],\"parameters\":{\"text\":\"=Classify the [email_content] in one only of the following categories: \\n\\nCategories=[\\\"Interested\\\", \\\"Out of office\\\", \\\"Unsubscribe\\\", \\\"Not interested\\\", \\\"Other\\\"]  \\n\\n- Interested is when the reply is positive, and the person want more information or a meeting  \\n\\nDon't output quotes like in the next example: \\nemail_content_example:Hey I would like to know more \\ncategory:Interested\\n\\nemail_content:\\\"{{ $json.textClean }}\\\" \\n\\nOnly answer with JSON in the following format:\\n{\\\"replyStatus\\\":category}\\n\\nJSON:\",\"promptType\":\"define\",\"hasOutputParser\":true},\"typeVersion\":1.4},{\"id\":\"c1d66785-e096-4fd7-90de-51c7b9117413\",\"name\":\"Merge data\",\"type\":\"n8n-nodes-base.merge\",\"position\":[-280,1000],\"parameters\":{\"mode\":\"combine\",\"options\":{},\"combinationMode\":\"mergeByPosition\"},\"typeVersion\":2.1},{\"id\":\"bf21f5b9-6978-4657-a0a2-847265cff31e\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[260,520],\"parameters\":{\"width\":480.38008828116847,\"height\":341.5885389153657,\"content\":\"### Create a Slack notification for each new replies\\n\\n1. Connect your Slack account by clicking to add Credentials\\n\\n2. Write the name of the channel where you want to send the Slack alert\"},\"typeVersion\":1},{\"id\":\"024b4399-8e20-4974-986d-6c1ee4103fa0\",\"name\":\"Route reply to the right branch\",\"type\":\"n8n-nodes-base.switch\",\"position\":[-100,1000],\"parameters\":{\"rules\":{\"values\":[{\"outputKey\":\"Send all replies to Slack\",\"conditions\":{\"options\":{\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"operator\":{\"type\":\"string\",\"operation\":\"exists\",\"singleValue\":true},\"leftValue\":\"={{ $json.output.category }}\",\"rightValue\":\"\"}]},\"renameOutput\":true},{\"outputKey\":\"Unsubscribe\",\"conditions\":{\"options\":{\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"9ad6f5cd-8c50-4710-8eaf-085e8f11f202\",\"operator\":{\"name\":\"filter.operator.equals\",\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"={{ $json.output.category }}\",\"rightValue\":\"Unsubscribe\"}]},\"renameOutput\":true},{\"outputKey\":\"Interested\",\"conditions\":{\"options\":{\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"cb410bcc-a70c-4430-aec1-b71f3f615c4d\",\"operator\":{\"name\":\"filter.operator.equals\",\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"={{ $json.output.category }}\",\"rightValue\":\"Interested\"}]},\"renameOutput\":true}]},\"options\":{\"allMatchingOutputs\":true}},\"typeVersion\":3},{\"id\":\"f9f23daa-f7a9-49f9-8ffb-16798656af73\",\"name\":\"Sticky Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[260,900],\"parameters\":{\"width\":480.38008828116847,\"height\":256.5682017131378,\"content\":\"### Save time by automatically unsubscribing leads that don't want to receive emails from you\"},\"typeVersion\":1},{\"id\":\"63c536bd-e624-4118-b0c8-38c07f2d1955\",\"name\":\"Sticky Note4\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[260,1200],\"parameters\":{\"width\":480.38008828116847,\"height\":256.5682017131378,\"content\":\"### Mark interested leads as interested in lemlist\"},\"typeVersion\":1},{\"id\":\"8ed8b714-8196-4593-87b8-18c6a7318fbe\",\"name\":\"Sticky Note5\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-880,875.46282303881],\"parameters\":{\"width\":480.38008828116847,\"height\":608.2279357257166,\"content\":\"### Categorize the reply with OpenAI\"},\"typeVersion\":1},{\"id\":\"6b1846df-0214-4383-87cf-55232093ae2a\",\"name\":\"Sticky Note6\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-1320,880],\"parameters\":{\"width\":336.62085535637357,\"height\":311.3046602455328,\"content\":\"### This node will clean the text and make sure it looks pretty on Slack\"},\"typeVersion\":1},{\"id\":\"f7378ecd-e8d2-4204-a883-3161be601ffc\",\"name\":\"Sticky Note7\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-220,880],\"parameters\":{\"width\":336.62085535637357,\"height\":311.3046602455328,\"content\":\"### Trigger a different scenario according to the category of the reply\"},\"typeVersion\":1}],\"pinData\":{},\"connections\":{\"Merge data\":{\"main\":[[{\"node\":\"Route reply to the right branch\",\"type\":\"main\",\"index\":0}]]},\"OpenAI Chat Model\":{\"ai_languageModel\":[[{\"node\":\"Categorize lemlist reply\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"Categorize lemlist reply\":{\"main\":[[{\"node\":\"Merge data\",\"type\":\"main\",\"index\":1}]]},\"Structured Output Parser\":{\"ai_outputParser\":[[{\"node\":\"Categorize lemlist reply\",\"type\":\"ai_outputParser\",\"index\":0}]]},\"Format text with Markdown\":{\"main\":[[{\"node\":\"Merge data\",\"type\":\"main\",\"index\":0},{\"node\":\"Categorize lemlist reply\",\"type\":\"main\",\"index\":0}]]},\"Lemlist Trigger - On new reply\":{\"main\":[[{\"node\":\"Format text with Markdown\",\"type\":\"main\",\"index\":0}]]},\"Route reply to the right branch\":{\"main\":[[{\"node\":\"Send alert to Slack\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Lemlist - Unsubscribe\",\"type\":\"main\",\"index\":0}],[{\"node\":\"lemlist - Mark as interested\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "## Who this is for\n\nThis workflow is for sales people who want to quickly and efficiently follow up with their leads\n\n## What this workflow does\n\nThis workflow starts every time a new reply is received in lemlist. It then classifies the response using openAI and creates the correct follow up task. The follow-up tasks currently include:\n\n  * Slack alerts when a lead for each new replies\n  * Tag interested leads in lemlist\n  * Unsubscription of leads when they request it\n\n\n\nThe Slack alerts include:\n\n  * Lead email address\n  * Sender email address\n  * Reply type (positive, not interested...etc)\n  * A preview of the reply\n\n\n\n## Setup\n\nTo set this template up, simply follow the stickies steps in it\n\n## How to customize this workflow to your needs\n\n  * Adjust the follow up tasks to your needs\n  * Change the Slack notification to your needs\n  * ...\n\n\n",
  "crawled_at": "2025-05-25T22:01:04.932248",
  "readme_zh": "## 适用对象  \n本工作流专为希望快速高效跟进潜在客户的销售人员设计  \n\n## 工作流功能  \n每当lemlist收到新回复时自动触发，通过openAI对回复内容进行分类，并创建相应的跟进任务。当前支持的跟进任务包括：  \n\n  * 每收到新回复时发送Slack提醒  \n  * 在lemlist中标记有意向的潜在客户  \n  * 当客户要求退订时执行退订操作  \n\nSlack提醒包含以下信息：  \n  * 潜在客户邮箱地址  \n  * 发件人邮箱地址  \n  * 回复类型（积极意向、无兴趣等）  \n  * 回复内容预览  \n\n## 配置说明  \n按照模板中的便签步骤即可完成设置  \n\n## 自定义工作流  \n  * 根据需求调整跟进任务类型  \n  * 按需修改Slack通知内容  \n  * ...",
  "title_zh": "利用OpenAI对lemlist回复进行分类并自动化回复处理",
  "publish_date_zh": "Last update 10 months ago",
  "workflow_json_zh": "{\n  \"meta\": {\n    \"instanceId\": \"2b1cc1a8b0a2fb9caab11ab2d5eb3712f9973066051b2e898cf4041a1f2a7757\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"nodes\": [\n    {\n      \"id\": \"7786165e-5e74-4614-b065-86db19482b72\",\n      \"name\": \"Format text with Markdown\",\n      \"type\": \"n8n-nodes-base.markdown\",\n      \"position\": [\n        -1200,\n        980\n      ],\n      \"parameters\": {\n        \"html\": \"={{ $json.text }}\",\n        \"options\": {},\n        \"destinationKey\": \"textClean\"\n      },\n      \"typeVersion\": 1,\n      \"continueOnFail\": true\n    },\n    {\n      \"id\": \"8f73d4d6-2473-4fdf-8797-c049d6df6967\",\n      \"name\": \"Lemlist Trigger - On new reply\",\n      \"type\": \"n8n-nodes-base.lemlistTrigger\",\n      \"position\": [\n        -1600,\n        980\n      ],\n      \"webhookId\": \"039bb443-8d2a-4eb3-9c16-772943a46db7\",\n      \"parameters\": {\n        \"event\": \"emailsReplied\",\n        \"options\": {\n          \"isFirst\": true\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"1f94d672-0a70-45ad-bf96-72c4aecabcd0\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -1700,\n        680\n      ],\n      \"parameters\": {\n        \"width\": 304.92548549441915,\n        \"height\": 504.9663351162785,\n        \"content\": \"### 获取您的lemlist API密钥\\n\\n1. 登录您的lemlist账户或[点击此处](https://app.lemlist.com/create-account)创建新账户\\n\\n2. 进入设置 -> 集成功能\\n\\n3. 生成并复制您的API密钥\\n\\n4. 在本节点点击\\\"创建新凭证\\\"，粘贴您的API密钥\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"3032b04c-76a2-4f7c-a790-ede26b102254\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -2040,\n        680\n      ],\n      \"parameters\": {\n        \"width\": 319.6621253622332,\n        \"height\": 507.1074887209538,\n        \"content\": \"# Read me\\n\\nThis workflow send email replies of your lemlist campaigns to the Slack channel of your choice.\\n\\nThe OpenAI node will classify the reply status. \\n\\nThe Slack alert is structured in a way that make it easy to read for the user.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"df142fcb-f5ec-475d-8f90-c0bd064d390c\",\n      \"name\": \"OpenAI Chat Model\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\n      \"position\": [\n        -760,\n        1320\n      ],\n      \"parameters\": {\n        \"model\": \"gpt-4o\",\n        \"options\": {}\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"1fa6d12c-2555-42c6-8f80-b24dc3608ed7\",\n      \"name\": \"Structured Output Parser\",\n      \"type\": \"@n8n/n8n-nodes-langchain.outputParserStructured\",\n      \"position\": [\n        -600,\n        1320\n      ],\n      \"parameters\": {\n        \"schemaType\": \"manual\",\n        \"inputSchema\": \"{\\n\\t\\\"type\\\": \\\"object\\\",\\n\\t\\\"properties\\\": {\\n\\t\\t\\\"category\\\": {\\n\\t\\t\\t\\\"type\\\": \\\"string\\\"\\n        }\\n\\t}\\n}\"\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"734013f9-d058-4f08-9026-a41cd5877a3b\",\n      \"name\": \"Send alert to Slack\",\n      \"type\": \"n8n-nodes-base.slack\",\n      \"position\": [\n        320,\n        700\n      ],\n      \"parameters\": {\n        \"text\": \"=\",\n        \"select\": \"channel\",\n        \"blocksUi\": \"={\\n\\t\\\"blocks\\\": [\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"section\\\",\\n\\t\\t\\t\\\"text\\\": {\\n\\t\\t\\t\\t\\\"type\\\": \\\"mrkdwn\\\",\\n\\t\\t\\t\\t\\\"text\\\": \\\":raised_hands: New reply in lemlist!\\\\n\\\"\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"section\\\",\\n\\t\\t\\t\\\"fields\\\": [\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\\"type\\\": \\\"mrkdwn\\\",\\n\\t\\t\\t\\t\\t\\\"text\\\": \\\"*Categorized as:*\\\\n{{ $json[\\\"output\\\"][\\\"category\\\"] }}\\\"\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\\"type\\\": \\\"mrkdwn\\\",\\n\\t\\t\\t\\t\\t\\\"text\\\": \\\"*Campaign:*\\\\n<https://app.lemlist.com/teams/{{ $json[\\\"teamId\\\"] }}/reports/campaigns/{{ $json[\\\"campaignId\\\"] }}|{{ $json[\\\"campaignName\\\"] }}>\\\"\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\\"type\\\": \\\"mrkdwn\\\",\\n\\t\\t\\t\\t\\t\\\"text\\\": \\\"*Sender Email:*\\\\n{{ $json[\\\"sendUserEmail\\\"] }}\\\"\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\\"type\\\": \\\"mrkdwn\\\",\\n\\t\\t\\t\\t\\t\\\"text\\\": \\\"*Lead Email:*\\\\n{{ $json[\\\"leadEmail\\\"] }}\\\"\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\\"type\\\": \\\"mrkdwn\\\",\\n\\t\\t\\t\\t\\t\\\"text\\\": \\\"*Linkedin URL:*\\\\n{{ $json[\\\"linkedinUrl\\\"] }}\\\"\\n\\t\\t\\t\\t}\\n\\t\\t\\t]\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"section\\\",\\n\\t\\t\\t\\\"text\\\": {\\n\\t\\t\\t\\t\\\"type\\\": \\\"mrkdwn\\\",\\n\\t\\t\\t\\t\\\"text\\\": \\\"*Reply preview*:\\\\n{{ JSON.stringify($json[\\\"textClean\\\"]).replace(/^\\\"(.+(?=\\\"$))\\\"$/, '$1').substring(0, 100) }}\\\"\\n\\t\\t\\t}\\n\\t\\t}\\n\\t]\\n}\",\n        \"channelId\": {\n          \"__rl\": true,\n          \"mode\": \"name\",\n          \"value\": \"automated_outbound_replies\"\n        },\n        \"messageType\": \"block\",\n        \"otherOptions\": {\n          \"botProfile\": {\n            \"imageValues\": {\n              \"icon_emoji\": \":fire:\",\n              \"profilePhotoType\": \"emoji\"\n            }\n          },\n          \"unfurl_links\": false,\n          \"includeLinkToWorkflow\": false\n        }\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"0558c166-16d7-4c26-a09c-fb46c2b6b687\",\n      \"name\": \"Lemlist - Unsubscribe\",\n      \"type\": \"n8n-nodes-base.lemlist\",\n      \"position\": [\n        300,\n        1000\n      ],\n      \"parameters\": {\n        \"email\": \"={{ $json[\\\"leadEmail\\\"] }}\",\n        \"resource\": \"lead\",\n        \"operation\": \"unsubscribe\",\n        \"campaignId\": \"={{$json[\\\"campaignId\\\"]}}\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"79d17d20-a60a-4b5a-a83c-821cac265b17\",\n      \"name\": \"lemlist - Mark as interested\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        300,\n        1260\n      ],\n      \"parameters\": {\n        \"url\": \"=https://api.lemlist.com/api/campaigns/{{$json[\\\"campaignId\\\"]}}/leads/{{$json[\\\"leadEmail\\\"]}}/interested\",\n        \"options\": {},\n        \"requestMethod\": \"POST\",\n        \"authentication\": \"predefinedCredentialType\",\n        \"nodeCredentialType\": \"lemlistApi\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"04f74337-903c-481a-95ca-a1d4a5985b9e\",\n      \"name\": \"Categorize lemlist reply\",\n      \"type\": \"@n8n/n8n-nodes-langchain.chainLlm\",\n      \"position\": [\n        -780,\n        1120\n      ],\n      \"parameters\": {\n        \"text\": \"=Classify the [email_content] in one only of the following categories: \\n\\nCategories=[\\\"Interested\\\", \\\"Out of office\\\", \\\"Unsubscribe\\\", \\\"Not interested\\\", \\\"Other\\\"]  \\n\\n- Interested is when the reply is positive, and the person want more information or a meeting  \\n\\nDon't output quotes like in the next example: \\nemail_content_example:Hey I would like to know more \\ncategory:Interested\\n\\nemail_content:\\\"{{ $json.textClean }}\\\" \\n\\nOnly answer with JSON in the following format:\\n{\\\"replyStatus\\\":category}\\n\\nJSON:\",\n        \"promptType\": \"define\",\n        \"hasOutputParser\": true\n      },\n      \"typeVersion\": 1.4\n    },\n    {\n      \"id\": \"c1d66785-e096-4fd7-90de-51c7b9117413\",\n      \"name\": \"Merge data\",\n      \"type\": \"n8n-nodes-base.merge\",\n      \"position\": [\n        -280,\n        1000\n      ],\n      \"parameters\": {\n        \"mode\": \"combine\",\n        \"options\": {},\n        \"combinationMode\": \"mergeByPosition\"\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"bf21f5b9-6978-4657-a0a2-847265cff31e\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        260,\n        520\n      ],\n      \"parameters\": {\n        \"width\": 480.38008828116847,\n        \"height\": 341.5885389153657,\n        \"content\": \"### 为每条新回复创建Slack通知\\n\\n1. 点击添加凭证，连接您的Slack账户\\n\\n2. 输入您希望发送Slack提醒的频道名称\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"024b4399-8e20-4974-986d-6c1ee4103fa0\",\n      \"name\": \"Route reply to the right branch\",\n      \"type\": \"n8n-nodes-base.switch\",\n      \"position\": [\n        -100,\n        1000\n      ],\n      \"parameters\": {\n        \"rules\": {\n          \"values\": [\n            {\n              \"outputKey\": \"Send all replies to Slack\",\n              \"conditions\": {\n                \"options\": {\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"operator\": {\n                      \"type\": \"string\",\n                      \"operation\": \"exists\",\n                      \"singleValue\": true\n                    },\n                    \"leftValue\": \"={{ $json.output.category }}\",\n                    \"rightValue\": \"\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            },\n            {\n              \"outputKey\": \"Unsubscribe\",\n              \"conditions\": {\n                \"options\": {\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"9ad6f5cd-8c50-4710-8eaf-085e8f11f202\",\n                    \"operator\": {\n                      \"name\": \"filter.operator.equals\",\n                      \"type\": \"string\",\n                      \"operation\": \"equals\"\n                    },\n                    \"leftValue\": \"={{ $json.output.category }}\",\n                    \"rightValue\": \"Unsubscribe\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            },\n            {\n              \"outputKey\": \"Interested\",\n              \"conditions\": {\n                \"options\": {\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"cb410bcc-a70c-4430-aec1-b71f3f615c4d\",\n                    \"operator\": {\n                      \"name\": \"filter.operator.equals\",\n                      \"type\": \"string\",\n                      \"operation\": \"equals\"\n                    },\n                    \"leftValue\": \"={{ $json.output.category }}\",\n                    \"rightValue\": \"Interested\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            }\n          ]\n        },\n        \"options\": {\n          \"allMatchingOutputs\": true\n        }\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"f9f23daa-f7a9-49f9-8ffb-16798656af73\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        260,\n        900\n      ],\n      \"parameters\": {\n        \"width\": 480.38008828116847,\n        \"height\": 256.5682017131378,\n        \"content\": \"通过自动退订不想接收您邮件的潜在客户来节省时间\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"63c536bd-e624-4118-b0c8-38c07f2d1955\",\n      \"name\": \"Sticky Note4\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        260,\n        1200\n      ],\n      \"parameters\": {\n        \"width\": 480.38008828116847,\n        \"height\": 256.5682017131378,\n        \"content\": \"### 将有兴趣的潜在客户标记为对lemlist感兴趣\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"8ed8b714-8196-4593-87b8-18c6a7318fbe\",\n      \"name\": \"Sticky Note5\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -880,\n        875.46282303881\n      ],\n      \"parameters\": {\n        \"width\": 480.38008828116847,\n        \"height\": 608.2279357257166,\n        \"content\": \"### 使用OpenAI对回复进行分类\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"6b1846df-0214-4383-87cf-55232093ae2a\",\n      \"name\": \"Sticky Note6\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -1320,\n        880\n      ],\n      \"parameters\": {\n        \"width\": 336.62085535637357,\n        \"height\": 311.3046602455328,\n        \"content\": \"该节点将清理文本并确保其在Slack上显示美观\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"f7378ecd-e8d2-4204-a883-3161be601ffc\",\n      \"name\": \"Sticky Note7\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -220,\n        880\n      ],\n      \"parameters\": {\n        \"width\": 336.62085535637357,\n        \"height\": 311.3046602455328,\n        \"content\": \"根据回复类别触发不同情景\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"Merge data\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Route reply to the right branch\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"OpenAI Chat Model\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"Categorize lemlist reply\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Categorize lemlist reply\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge data\",\n            \"type\": \"main\",\n            \"index\": 1\n          }\n        ]\n      ]\n    },\n    \"Structured Output Parser\": {\n      \"ai_outputParser\": [\n        [\n          {\n            \"node\": \"Categorize lemlist reply\",\n            \"type\": \"ai_outputParser\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Format text with Markdown\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge data\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Categorize lemlist reply\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Lemlist Trigger - On new reply\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Format text with Markdown\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Route reply to the right branch\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Send alert to Slack\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Lemlist - Unsubscribe\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"lemlist - Mark as interested\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}