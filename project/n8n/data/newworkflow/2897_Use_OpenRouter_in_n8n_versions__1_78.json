{
  "url": "https://n8n.io/workflows/2897-use-openrouter-in-n8n-versions-less178/",
  "title": "Use OpenRouter in n8n versions <1.78",
  "author": "Daniel Nolde",
  "publish_date": "Last update 3 months ago",
  "publish_date_absolute": "2025-02-26",
  "categories": [
    {
      "name": "Building Blocks"
    },
    {
      "name": "AI"
    }
  ],
  "workflow_json": "{\"id\":\"VhN3CX6QPBkX77pZ\",\"meta\":{\"instanceId\":\"98bf0d6aef1dd8b7a752798121440fb171bf7686b95727fd617f43452393daa3\",\"templateCredsSetupCompleted\":true},\"name\":\"Use any LLM-Model via OpenRouter\",\"tags\":[{\"id\":\"uumvgGHY5e6zEL7V\",\"name\":\"Published Template\",\"createdAt\":\"2025-02-10T11:18:10.923Z\",\"updatedAt\":\"2025-02-10T11:18:10.923Z\"}],\"nodes\":[{\"id\":\"b72721d2-bce7-458d-8ff1-cc9f6d099aaf\",\"name\":\"Settings\",\"type\":\"n8n-nodes-base.set\",\"position\":[-420,-640],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"3d7f9677-c753-4126-b33a-d78ef701771f\",\"name\":\"model\",\"type\":\"string\",\"value\":\"deepseek/deepseek-r1-distill-llama-8b\"},{\"id\":\"301f86ec-260f-4d69-abd9-bde982e3e0aa\",\"name\":\"prompt\",\"type\":\"string\",\"value\":\"={{ $json.chatInput }}\"},{\"id\":\"a9f65181-902d-48f5-95ce-1352d391a056\",\"name\":\"sessionId\",\"type\":\"string\",\"value\":\"={{ $json.sessionId }}\"}]}},\"typeVersion\":3.4},{\"id\":\"a4593d64-e67a-490e-9cb4-936cc46273a0\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-460,-740],\"parameters\":{\"width\":180,\"height\":400,\"content\":\"## Settings\\nSpecify the model\"},\"typeVersion\":1},{\"id\":\"3ea3b09a-0ab7-4e0f-bb4f-3d807d072d4e\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-240,-740],\"parameters\":{\"color\":3,\"width\":380,\"height\":400,\"content\":\"## Run LLM\\nUsing OpenRouter to make model fully configurable\"},\"typeVersion\":1},{\"id\":\"19d47fcb-af37-4daa-84fd-3f43ffcb90ff\",\"name\":\"When chat message received\",\"type\":\"@n8n/n8n-nodes-langchain.chatTrigger\",\"position\":[-660,-640],\"webhookId\":\"71f56e44-401f-44ba-b54d-c947e283d034\",\"parameters\":{\"options\":{}},\"typeVersion\":1.1},{\"id\":\"f5a793f2-1e2f-4349-a075-9b9171297277\",\"name\":\"AI Agent\",\"type\":\"@n8n/n8n-nodes-langchain.agent\",\"position\":[-180,-640],\"parameters\":{\"text\":\"={{ $json.prompt }}\",\"options\":{},\"promptType\":\"define\"},\"typeVersion\":1.7},{\"id\":\"dbbd9746-ca25-4163-91c5-a9e33bff62a4\",\"name\":\"Chat Memory\",\"type\":\"@n8n/n8n-nodes-langchain.memoryBufferWindow\",\"position\":[-80,-460],\"parameters\":{\"sessionKey\":\"={{ $json.sessionId }}\",\"sessionIdType\":\"customKey\"},\"typeVersion\":1.3},{\"id\":\"ef368cea-1b38-455b-b46a-5d0ef7a3ceb3\",\"name\":\"LLM Model\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\"position\":[-200,-460],\"parameters\":{\"model\":\"={{ $json.model }}\",\"options\":{}},\"credentials\":{\"openAiApi\":{\"id\":\"66JEQJ5kJel1P9t3\",\"name\":\"OpenRouter\"}},\"typeVersion\":1.1},{\"id\":\"32601e76-0979-4690-8dcf-149ddbf61983\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-460,-320],\"parameters\":{\"width\":600,\"height\":240,\"content\":\"## Model examples\\n\\n* openai/o3-mini\\n* google/gemini-2.0-flash-001\\n* deepseek/deepseek-r1-distill-llama-8b\\n* mistralai/mistral-small-24b-instruct-2501:free\\n* qwen/qwen-turbo\\n\\nFor more see https://openrouter.ai/models\"},\"typeVersion\":1}],\"active\":false,\"pinData\":{},\"settings\":{\"executionOrder\":\"v1\"},\"versionId\":\"6d0caf5d-d6e6-4059-9211-744b0f4bc204\",\"connections\":{\"Settings\":{\"main\":[[{\"node\":\"AI Agent\",\"type\":\"main\",\"index\":0}]]},\"LLM Model\":{\"ai_languageModel\":[[{\"node\":\"AI Agent\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"Chat Memory\":{\"ai_memory\":[[{\"node\":\"AI Agent\",\"type\":\"ai_memory\",\"index\":0}]]},\"When chat message received\":{\"main\":[[{\"node\":\"Settings\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "## What it is:\n\nIn version 1.78, n8n introduced a dedicated node to use the OpenRouter service, which lets you to use a lot of different LLM models and providers and change models on the fly in an agentic workflow.\n\nFor prior n8n versions, there's a workaround to make OpenRouter accessible, by using the OpenAI node with a OpenRouter-specific BaseURL.\n\nThis trivial workflow demonstrates this for version before 1.78, so that you can use different LLM model dynamically with the available n8n nodes for OpenAI LLM and OpenAI credentials.\n\n## What you can do:\n\n  * Use any of the [OpenRouter models](https://openrouter.ai/models)\n  * Have the model even dynamically configured or changing (by some external config, some rule, or some specific chat message)\n\n\n\n## Setup steps:\n\n  * Import the workflow\n  * Ensure you have registered and account, purchased some credits and created and API key for [OpenRouter.ai](https://openrouter.ai)\n  * Configure the \"OpenRouter\" credentials with your own credentials, using an _OpenAI type_ credential, but making sure in the credential's config form its \"Base URL\" is set to _<https://openrouter.ai/api/v1_> so OpenRouter is used instead of OpenAI.\n  * Open the \"Settings\" node and change the model value to any valid model id from the [OpenRouter models list](https://openrouter.ai/models) or even have the model property set dynamically\n\n\n",
  "crawled_at": "2025-05-26T02:19:30.756871",
  "readme_zh": "## 功能说明:\n\nn8n在1.78版本中推出了专用于OpenRouter服务的节点，该服务支持动态切换多种大语言模型及供应商，实现智能体工作流中的灵活调用。\n\n针对1.78之前版本的用户，可通过变通方案访问OpenRouter：使用OpenAI节点并配置OpenRouter专属的BaseURL地址。\n\n本简易工作流为1.78以下版本提供了实现方案，让您能利用n8n现有的OpenAI大语言模型节点和凭证体系，动态调用不同的大语言模型。\n\n## 核心功能:\n\n* 支持调用[OpenRouter平台所有模型](https://openrouter.ai/models)\n* 支持通过外部配置、规则或特定聊天消息实现模型动态切换\n\n## 配置步骤:\n\n* 导入工作流\n* 确保已完成[OpenRouter.ai](https://openrouter.ai)账号注册、购买额度并创建API密钥\n* 配置\"OpenRouter\"凭证时选择_OpenAI类型_凭证，但务必在凭证配置表单中将\"Base URL\"设置为_<https://openrouter.ai/api/v1_>以替代OpenAI服务\n* 打开\"Settings\"节点，将模型值修改为[OpenRouter模型列表](https://openrouter.ai/models)中的任一有效模型ID，或设置为动态获取模型参数",
  "title_zh": "在n8n版本<1.78中使用OpenRouter",
  "publish_date_zh": "最后更新于2个月前",
  "workflow_json_zh": "{\"id\":\"VhN3CX6QPBkX77pZ\",\"meta\":{\"instanceId\":\"98bf0d6aef1dd8b7a752798121440fb171bf7686b95727fd617f43452393daa3\",\"templateCredsSetupCompleted\":true},\"name\":\"Use any LLM-Model via OpenRouter\",\"tags\":[{\"id\":\"uumvgGHY5e6zEL7V\",\"name\":\"Published Template\",\"createdAt\":\"2025-02-10T11:18:10.923Z\",\"updatedAt\":\"2025-02-10T11:18:10.923Z\"}],\"nodes\":[{\"id\":\"b72721d2-bce7-458d-8ff1-cc9f6d099aaf\",\"name\":\"Settings\",\"type\":\"n8n-nodes-base.set\",\"position\":[-420,-640],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"3d7f9677-c753-4126-b33a-d78ef701771f\",\"name\":\"model\",\"type\":\"string\",\"value\":\"deepseek/deepseek-r1-distill-llama-8b\"},{\"id\":\"301f86ec-260f-4d69-abd9-bde982e3e0aa\",\"name\":\"prompt\",\"type\":\"string\",\"value\":\"={{ $json.chatInput }}\"},{\"id\":\"a9f65181-902d-48f5-95ce-1352d391a056\",\"name\":\"sessionId\",\"type\":\"string\",\"value\":\"={{ $json.sessionId }}\"}]}},\"typeVersion\":3.4},{\"id\":\"a4593d64-e67a-490e-9cb4-936cc46273a0\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-460,-740],\"parameters\":{\"width\":180,\"height\":400,\"content\":\"## 设置\\n指定模型\"},\"typeVersion\":1},{\"id\":\"3ea3b09a-0ab7-4e0f-bb4f-3d807d072d4e\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-240,-740],\"parameters\":{\"color\":3,\"width\":380,\"height\":400,\"content\":\"## 运行大语言模型\\n通过OpenRouter实现模型完全可配置化\"},\"typeVersion\":1},{\"id\":\"19d47fcb-af37-4daa-84fd-3f43ffcb90ff\",\"name\":\"When chat message received\",\"type\":\"@n8n/n8n-nodes-langchain.chatTrigger\",\"position\":[-660,-640],\"webhookId\":\"71f56e44-401f-44ba-b54d-c947e283d034\",\"parameters\":{\"options\":{}},\"typeVersion\":1.1},{\"id\":\"f5a793f2-1e2f-4349-a075-9b9171297277\",\"name\":\"AI Agent\",\"type\":\"@n8n/n8n-nodes-langchain.agent\",\"position\":[-180,-640],\"parameters\":{\"text\":\"={{ $json.prompt }}\",\"options\":{},\"promptType\":\"define\"},\"typeVersion\":1.7},{\"id\":\"dbbd9746-ca25-4163-91c5-a9e33bff62a4\",\"name\":\"Chat Memory\",\"type\":\"@n8n/n8n-nodes-langchain.memoryBufferWindow\",\"position\":[-80,-460],\"parameters\":{\"sessionKey\":\"={{ $json.sessionId }}\",\"sessionIdType\":\"customKey\"},\"typeVersion\":1.3},{\"id\":\"ef368cea-1b38-455b-b46a-5d0ef7a3ceb3\",\"name\":\"LLM Model\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\"position\":[-200,-460],\"parameters\":{\"model\":\"={{ $json.model }}\",\"options\":{}},\"credentials\":{\"openAiApi\":{\"id\":\"66JEQJ5kJel1P9t3\",\"name\":\"OpenRouter\"}},\"typeVersion\":1.1},{\"id\":\"32601e76-0979-4690-8dcf-149ddbf61983\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-460,-320],\"parameters\":{\"width\":600,\"height\":240,\"content\":\"## 模型示例\\n\\n* openai/o3-mini\\n* google/gemini-2.0-flash-001\\n* deepseek/deepseek-r1-distill-llama-8b\\n* mistralai/mistral-small-24b-instruct-2501:免费版\\n* qwen/qwen-turbo\\n\\n更多模型请访问 https://openrouter.ai/models\"},\"typeVersion\":1}],\"active\":false,\"pinData\":{},\"settings\":{\"executionOrder\":\"v1\"},\"versionId\":\"6d0caf5d-d6e6-4059-9211-744b0f4bc204\",\"connections\":{\"Settings\":{\"main\":[[{\"node\":\"AI Agent\",\"type\":\"main\",\"index\":0}]]},\"LLM Model\":{\"ai_languageModel\":[[{\"node\":\"AI Agent\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"Chat Memory\":{\"ai_memory\":[[{\"node\":\"AI Agent\",\"type\":\"ai_memory\",\"index\":0}]]},\"When chat message received\":{\"main\":[[{\"node\":\"Settings\",\"type\":\"main\",\"index\":0}]]}}}"
}