{
  "url": "https://n8n.io/workflows/3069-analyze-meta-ad-library-video-ads-with-gemini-and-store-results-in-google-sheets/",
  "title": "Analyze Meta Ad Library Video Ads with Gemini and store results in Google Sheets",
  "author": "Daniel Setzermann",
  "publish_date": "Last update 3 months ago",
  "publish_date_absolute": "2025-02-26",
  "categories": [
    {
      "name": "AI"
    },
    {
      "name": "Marketing"
    }
  ],
  "workflow_json": "{\"id\":\"Yfi6wLGrS1JxYNeN\",\"meta\":{\"instanceId\":\"e57685206b2ffad6bb88e99d036876c83d8c4db170e93fa79e832ec88de4560b\",\"templateCredsSetupCompleted\":true},\"name\":\"Scrape Meta Ad Library and analyze Video Ads with Gemini and store data to Google Sheets\",\"tags\":[],\"nodes\":[{\"id\":\"30c7e140-fafe-4ae7-9de9-a969857967d5\",\"name\":\"When clicking ‘Test workflow’\",\"type\":\"n8n-nodes-base.manualTrigger\",\"position\":[-100,380],\"parameters\":{},\"typeVersion\":1},{\"id\":\"d38614bf-bbcc-4619-bcc4-cb42a80a1148\",\"name\":\"Settings\",\"type\":\"n8n-nodes-base.set\",\"position\":[100,380],\"parameters\":{},\"typeVersion\":3.4},{\"id\":\"7bb34d03-5cf0-497a-bead-87df84661ffd\",\"name\":\"Loop Over Items\",\"type\":\"n8n-nodes-base.splitInBatches\",\"position\":[1960,380],\"parameters\":{},\"typeVersion\":3},{\"id\":\"d23fed5b-f230-4511-b4ea-76393617e740\",\"name\":\"Google Gemini Chat Model\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatGoogleGemini\",\"position\":[3460,700],\"parameters\":{},\"typeVersion\":1},{\"id\":\"e56dbefc-458f-40db-850e-f243740c5651\",\"name\":\"Clean Prompt\",\"type\":\"n8n-nodes-base.code\",\"position\":[300,380],\"parameters\":{},\"typeVersion\":2},{\"id\":\"6dbce614-58ce-4389-be16-a117ba5b6032\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[20,0],\"parameters\":{\"content\":\"\"},\"typeVersion\":1},{\"id\":\"1f26b54d-d0c5-483b-b3cf-e5e971128f2e\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[3260,300],\"parameters\":{\"content\":\"\"},\"typeVersion\":1},{\"id\":\"e554fcd8-90f0-4f38-ad78-1b08f4cd4a82\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[3360,860],\"parameters\":{\"content\":\"\"},\"typeVersion\":1},{\"id\":\"96359003-2cd3-4ebf-90aa-8be4c44f1949\",\"name\":\"Sticky Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[3640,320],\"parameters\":{\"content\":\"\"},\"typeVersion\":1},{\"id\":\"3e3c13b8-063c-4e0d-99dd-93902646c197\",\"name\":\"Store Data\",\"type\":\"n8n-nodes-base.googleSheets\",\"position\":[3860,440],\"parameters\":{},\"typeVersion\":4.5},{\"id\":\"717fa264-afc3-4e2f-a48a-f3101e3ccf97\",\"name\":\"Structured Output Parsing Agent\",\"type\":\"@n8n/n8n-nodes-langchain.agent\",\"position\":[3480,440],\"parameters\":{},\"retryOnFail\":true,\"typeVersion\":1.7},{\"id\":\"a61b82eb-21bf-4a0a-8863-e3fd3321c280\",\"name\":\"Wait for Upload Processing\",\"type\":\"n8n-nodes-base.wait\",\"position\":[3020,440],\"webhookId\":\"a0e5485e-3f3c-47c6-ab19-9b9dc6158ab5\",\"parameters\":{},\"typeVersion\":1.1},{\"id\":\"b3a0113f-a5e4-45e6-b093-a61ec5933446\",\"name\":\"Pass Values for Gemini\",\"type\":\"n8n-nodes-base.set\",\"position\":[2780,440],\"parameters\":{},\"typeVersion\":3.4},{\"id\":\"590f1356-4e6a-4e2a-aef4-9ec3c421b3bf\",\"name\":\"Upload Video to Gemini\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[2580,440],\"parameters\":{},\"typeVersion\":4.2},{\"id\":\"88d88a31-4137-40e9-8470-4fb247cfac27\",\"name\":\"Analyze Video with Gemini\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[3240,440],\"parameters\":{},\"typeVersion\":4.2},{\"id\":\"2168902d-1a0c-4807-9e88-08b9349ba19a\",\"name\":\"Download File\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[2200,440],\"parameters\":{},\"typeVersion\":4.2},{\"id\":\"4fc6c731-ac04-4b33-a7df-919bff17ddc1\",\"name\":\"Change Filetype to Video\",\"type\":\"n8n-nodes-base.code\",\"position\":[2380,440],\"parameters\":{},\"typeVersion\":2},{\"id\":\"9cb29e1e-be52-4f7d-90aa-c930d283d442\",\"name\":\"Scrape Meta Ad Library with Apify\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[500,380],\"parameters\":{},\"typeVersion\":4.2},{\"id\":\"59a198fa-3859-41a0-806b-280e9b9dd72a\",\"name\":\"Pass relevant Fields\",\"type\":\"n8n-nodes-base.set\",\"position\":[1720,380],\"parameters\":{},\"typeVersion\":3.4},{\"id\":\"ea30c850-3ae8-455e-9681-f42f59681a8a\",\"name\":\"Structured Output Parser\",\"type\":\"@n8n/n8n-nodes-langchain.outputParserStructured\",\"position\":[3660,700],\"parameters\":{},\"typeVersion\":1.2},{\"id\":\"ac3ae0cd-8dda-4b38-858e-d3f4f21f7e5c\",\"name\":\"Calculate Runtime in Days\",\"type\":\"n8n-nodes-base.set\",\"position\":[700,380],\"parameters\":{},\"typeVersion\":3.4},{\"id\":\"28d391b3-d708-43a1-9d4b-28da08bc8175\",\"name\":\"Sort by Reach or Days Running\",\"type\":\"n8n-nodes-base.sort\",\"position\":[960,380],\"parameters\":{},\"typeVersion\":1},{\"id\":\"82f7bdd7-5d20-4431-9772-4255e21ea963\",\"name\":\"Filter only Video Ads\",\"type\":\"n8n-nodes-base.filter\",\"position\":[1200,380],\"parameters\":{},\"typeVersion\":2.2},{\"id\":\"b0a7273e-f540-49e9-98c2-f0437ea2749d\",\"name\":\"Limit Videos to Analyze\",\"type\":\"n8n-nodes-base.limit\",\"position\":[1460,380],\"parameters\":{},\"typeVersion\":1}],\"active\":false,\"pinData\":{},\"settings\":{\"executionOrder\":\"v1\"},\"versionId\":\"79ac2590-6d68-4f1d-adb5-2c2fb5541f90\",\"connections\":{\"Settings\":{\"main\":[[{\"node\":\"Clean Prompt\",\"type\":\"main\",\"index\":0}]]},\"Store Data\":{\"main\":[[{\"node\":\"Loop Over Items\",\"type\":\"main\",\"index\":0}]]},\"Clean Prompt\":{\"main\":[[{\"node\":\"Scrape Meta Ad Library with Apify\",\"type\":\"main\",\"index\":0}]]},\"Download File\":{\"main\":[[{\"node\":\"Change Filetype to Video\",\"type\":\"main\",\"index\":0}]]},\"Loop Over Items\":{\"main\":[[],[{\"node\":\"Download File\",\"type\":\"main\",\"index\":0}]]},\"Pass relevant Fields\":{\"main\":[[{\"node\":\"Loop Over Items\",\"type\":\"main\",\"index\":0}]]},\"Filter only Video Ads\":{\"main\":[[{\"node\":\"Limit Videos to Analyze\",\"type\":\"main\",\"index\":0}]]},\"Pass Values for Gemini\":{\"main\":[[{\"node\":\"Wait for Upload Processing\",\"type\":\"main\",\"index\":0}]]},\"Upload Video to Gemini\":{\"main\":[[{\"node\":\"Pass Values for Gemini\",\"type\":\"main\",\"index\":0}]]},\"Limit Videos to Analyze\":{\"main\":[[{\"node\":\"Pass relevant Fields\",\"type\":\"main\",\"index\":0}]]},\"Change Filetype to Video\":{\"main\":[[{\"node\":\"Upload Video to Gemini\",\"type\":\"main\",\"index\":0}]]},\"Google Gemini Chat Model\":{\"ai_languageModel\":[[{\"node\":\"Structured Output Parsing Agent\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"Structured Output Parser\":{\"ai_outputParser\":[[{\"node\":\"Structured Output Parsing Agent\",\"type\":\"ai_outputParser\",\"index\":0}]]},\"Analyze Video with Gemini\":{\"main\":[[{\"node\":\"Structured Output Parsing Agent\",\"type\":\"main\",\"index\":0}]]},\"Calculate Runtime in Days\":{\"main\":[[{\"node\":\"Sort by Reach or Days Running\",\"type\":\"main\",\"index\":0}]]},\"Wait for Upload Processing\":{\"main\":[[{\"node\":\"Analyze Video with Gemini\",\"type\":\"main\",\"index\":0}]]},\"Sort by Reach or Days Running\":{\"main\":[[{\"node\":\"Filter only Video Ads\",\"type\":\"main\",\"index\":0}]]},\"Structured Output Parsing Agent\":{\"main\":[[{\"node\":\"Store Data\",\"type\":\"main\",\"index\":0}]]},\"Scrape Meta Ad Library with Apify\":{\"main\":[[{\"node\":\"Calculate Runtime in Days\",\"type\":\"main\",\"index\":0}]]},\"When clicking ‘Test workflow’\":{\"main\":[[{\"node\":\"Settings\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "# Meta Ads Analyzer\n\nThis n8n template builds an automated system to scrape, analyze, and extract insights from Meta advertising content. The workflow uses AI to perform deep analysis of video ads and organize the results in a structured format.\n\n**How it works**\n\n  * The workflow connects to Facebook's Ad Library to scrape video ads based on a specified page ID.\n  * Videos are filtered by reach and processed through Google's Gemini AI to analyze their content.\n  * Each video is systematically analyzed for its hook, transcript, advertising format, concept, and narrative structure.\n  * Results are processed through an AI agent that structures the data into standardized fields.\n  * All analysis is saved to a Google Sheet for easy access and further processing.\n\n\n\n**How to use**  \nOnce you've set up your Credentials and configured the output:\n\n  * Configure the Google Sheets connection for data output.\n  * Specify the Meta Ad Library URL you want to analyze.\n  * Adjust the maximum number of ads to scrape and analyze based on your needs.\n  * Click \"Test Workflow\" to start the analysis process.\n\n\n\n**Requirements**\n\n  * Apify account (for Meta Ad Library scraping)\n  * Google Gemini\n  * Google Sheets\n\n\n\n**Customizing this workflow**\n\n  * Modify the AI prompts in the Settings node to extract different information from the videos.\n  * Adjust the output formats in the AI Agent and Structured Output Parser nodes.\n  * Change the Google Sheets mapping to match your desired output structure.\n  * Increase the number of ads analyzed for more comprehensive research.\n\n\n",
  "crawled_at": "2025-05-26T03:38:15.818244",
  "readme_zh": "# Meta广告分析器  \n\n该n8n模板构建了一个自动化系统，用于抓取、分析Meta广告内容并提取洞察。工作流利用AI对视频广告进行深度分析，并将结果以结构化格式整理。  \n\n**运作原理**  \n- 工作流连接Facebook广告资料库，根据指定页面ID抓取视频广告  \n- 按覆盖范围筛选视频，并通过Google Gemini AI分析内容  \n- 系统化分析每支视频的吸引力要素、文字稿、广告形式、创意概念及叙事结构  \n- 通过AI代理处理结果，将数据整理为标准字段  \n- 所有分析结果保存至Google表格，便于查阅和进一步处理  \n\n**使用方法**  \n完成凭证设置和输出配置后：  \n1. 配置Google表格连接用于数据输出  \n2. 指定待分析的Meta广告资料库URL  \n3. 根据需要调整抓取分析的广告数量上限  \n4. 点击\"测试工作流\"启动分析流程  \n\n**系统要求**  \n- Apify账号（用于Meta广告库抓取）  \n- Google Gemini  \n- Google表格  \n\n**自定义工作流**  \n- 在设置节点修改AI提示词以提取不同视频信息  \n- 调整AI代理和结构化输出解析器节点的输出格式  \n- 更改Google表格字段映射以匹配目标输出结构  \n- 增加分析广告数量可获得更全面的研究数据",
  "title_zh": "使用Gemini分析Meta广告库中的视频广告并将结果存储到Google表格",
  "publish_date_zh": "最后更新于2个月前",
  "workflow_json_zh": "{\"id\":\"Yfi6wLGrS1JxYNeN\",\"meta\":{\"instanceId\":\"e57685206b2ffad6bb88e99d036876c83d8c4db170e93fa79e832ec88de4560b\",\"templateCredsSetupCompleted\":true},\"name\":\"Scrape Meta Ad Library and analyze Video Ads with Gemini and store data to Google Sheets\",\"tags\":[],\"nodes\":[{\"id\":\"30c7e140-fafe-4ae7-9de9-a969857967d5\",\"name\":\"When clicking ‘Test workflow’\",\"type\":\"n8n-nodes-base.manualTrigger\",\"position\":[-100,380],\"parameters\":{},\"typeVersion\":1},{\"id\":\"d38614bf-bbcc-4619-bcc4-cb42a80a1148\",\"name\":\"Settings\",\"type\":\"n8n-nodes-base.set\",\"position\":[100,380],\"parameters\":{},\"typeVersion\":3.4},{\"id\":\"7bb34d03-5cf0-497a-bead-87df84661ffd\",\"name\":\"Loop Over Items\",\"type\":\"n8n-nodes-base.splitInBatches\",\"position\":[1960,380],\"parameters\":{},\"typeVersion\":3},{\"id\":\"d23fed5b-f230-4511-b4ea-76393617e740\",\"name\":\"Google Gemini Chat Model\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatGoogleGemini\",\"position\":[3460,700],\"parameters\":{},\"typeVersion\":1},{\"id\":\"e56dbefc-458f-40db-850e-f243740c5651\",\"name\":\"Clean Prompt\",\"type\":\"n8n-nodes-base.code\",\"position\":[300,380],\"parameters\":{},\"typeVersion\":2},{\"id\":\"6dbce614-58ce-4389-be16-a117ba5b6032\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[20,0],\"parameters\":{\"content\":\"\"},\"typeVersion\":1},{\"id\":\"1f26b54d-d0c5-483b-b3cf-e5e971128f2e\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[3260,300],\"parameters\":{\"content\":\"\"},\"typeVersion\":1},{\"id\":\"e554fcd8-90f0-4f38-ad78-1b08f4cd4a82\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[3360,860],\"parameters\":{\"content\":\"\"},\"typeVersion\":1},{\"id\":\"96359003-2cd3-4ebf-90aa-8be4c44f1949\",\"name\":\"Sticky Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[3640,320],\"parameters\":{\"content\":\"\"},\"typeVersion\":1},{\"id\":\"3e3c13b8-063c-4e0d-99dd-93902646c197\",\"name\":\"Store Data\",\"type\":\"n8n-nodes-base.googleSheets\",\"position\":[3860,440],\"parameters\":{},\"typeVersion\":4.5},{\"id\":\"717fa264-afc3-4e2f-a48a-f3101e3ccf97\",\"name\":\"Structured Output Parsing Agent\",\"type\":\"@n8n/n8n-nodes-langchain.agent\",\"position\":[3480,440],\"parameters\":{},\"retryOnFail\":true,\"typeVersion\":1.7},{\"id\":\"a61b82eb-21bf-4a0a-8863-e3fd3321c280\",\"name\":\"Wait for Upload Processing\",\"type\":\"n8n-nodes-base.wait\",\"position\":[3020,440],\"webhookId\":\"a0e5485e-3f3c-47c6-ab19-9b9dc6158ab5\",\"parameters\":{},\"typeVersion\":1.1},{\"id\":\"b3a0113f-a5e4-45e6-b093-a61ec5933446\",\"name\":\"Pass Values for Gemini\",\"type\":\"n8n-nodes-base.set\",\"position\":[2780,440],\"parameters\":{},\"typeVersion\":3.4},{\"id\":\"590f1356-4e6a-4e2a-aef4-9ec3c421b3bf\",\"name\":\"Upload Video to Gemini\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[2580,440],\"parameters\":{},\"typeVersion\":4.2},{\"id\":\"88d88a31-4137-40e9-8470-4fb247cfac27\",\"name\":\"Analyze Video with Gemini\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[3240,440],\"parameters\":{},\"typeVersion\":4.2},{\"id\":\"2168902d-1a0c-4807-9e88-08b9349ba19a\",\"name\":\"Download File\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[2200,440],\"parameters\":{},\"typeVersion\":4.2},{\"id\":\"4fc6c731-ac04-4b33-a7df-919bff17ddc1\",\"name\":\"Change Filetype to Video\",\"type\":\"n8n-nodes-base.code\",\"position\":[2380,440],\"parameters\":{},\"typeVersion\":2},{\"id\":\"9cb29e1e-be52-4f7d-90aa-c930d283d442\",\"name\":\"Scrape Meta Ad Library with Apify\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[500,380],\"parameters\":{},\"typeVersion\":4.2},{\"id\":\"59a198fa-3859-41a0-806b-280e9b9dd72a\",\"name\":\"Pass relevant Fields\",\"type\":\"n8n-nodes-base.set\",\"position\":[1720,380],\"parameters\":{},\"typeVersion\":3.4},{\"id\":\"ea30c850-3ae8-455e-9681-f42f59681a8a\",\"name\":\"Structured Output Parser\",\"type\":\"@n8n/n8n-nodes-langchain.outputParserStructured\",\"position\":[3660,700],\"parameters\":{},\"typeVersion\":1.2},{\"id\":\"ac3ae0cd-8dda-4b38-858e-d3f4f21f7e5c\",\"name\":\"Calculate Runtime in Days\",\"type\":\"n8n-nodes-base.set\",\"position\":[700,380],\"parameters\":{},\"typeVersion\":3.4},{\"id\":\"28d391b3-d708-43a1-9d4b-28da08bc8175\",\"name\":\"Sort by Reach or Days Running\",\"type\":\"n8n-nodes-base.sort\",\"position\":[960,380],\"parameters\":{},\"typeVersion\":1},{\"id\":\"82f7bdd7-5d20-4431-9772-4255e21ea963\",\"name\":\"Filter only Video Ads\",\"type\":\"n8n-nodes-base.filter\",\"position\":[1200,380],\"parameters\":{},\"typeVersion\":2.2},{\"id\":\"b0a7273e-f540-49e9-98c2-f0437ea2749d\",\"name\":\"Limit Videos to Analyze\",\"type\":\"n8n-nodes-base.limit\",\"position\":[1460,380],\"parameters\":{},\"typeVersion\":1}],\"active\":false,\"pinData\":{},\"settings\":{\"executionOrder\":\"v1\"},\"versionId\":\"79ac2590-6d68-4f1d-adb5-2c2fb5541f90\",\"connections\":{\"Settings\":{\"main\":[[{\"node\":\"Clean Prompt\",\"type\":\"main\",\"index\":0}]]},\"Store Data\":{\"main\":[[{\"node\":\"Loop Over Items\",\"type\":\"main\",\"index\":0}]]},\"Clean Prompt\":{\"main\":[[{\"node\":\"Scrape Meta Ad Library with Apify\",\"type\":\"main\",\"index\":0}]]},\"Download File\":{\"main\":[[{\"node\":\"Change Filetype to Video\",\"type\":\"main\",\"index\":0}]]},\"Loop Over Items\":{\"main\":[[],[{\"node\":\"Download File\",\"type\":\"main\",\"index\":0}]]},\"Pass relevant Fields\":{\"main\":[[{\"node\":\"Loop Over Items\",\"type\":\"main\",\"index\":0}]]},\"Filter only Video Ads\":{\"main\":[[{\"node\":\"Limit Videos to Analyze\",\"type\":\"main\",\"index\":0}]]},\"Pass Values for Gemini\":{\"main\":[[{\"node\":\"Wait for Upload Processing\",\"type\":\"main\",\"index\":0}]]},\"Upload Video to Gemini\":{\"main\":[[{\"node\":\"Pass Values for Gemini\",\"type\":\"main\",\"index\":0}]]},\"Limit Videos to Analyze\":{\"main\":[[{\"node\":\"Pass relevant Fields\",\"type\":\"main\",\"index\":0}]]},\"Change Filetype to Video\":{\"main\":[[{\"node\":\"Upload Video to Gemini\",\"type\":\"main\",\"index\":0}]]},\"Google Gemini Chat Model\":{\"ai_languageModel\":[[{\"node\":\"Structured Output Parsing Agent\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"Structured Output Parser\":{\"ai_outputParser\":[[{\"node\":\"Structured Output Parsing Agent\",\"type\":\"ai_outputParser\",\"index\":0}]]},\"Analyze Video with Gemini\":{\"main\":[[{\"node\":\"Structured Output Parsing Agent\",\"type\":\"main\",\"index\":0}]]},\"Calculate Runtime in Days\":{\"main\":[[{\"node\":\"Sort by Reach or Days Running\",\"type\":\"main\",\"index\":0}]]},\"Wait for Upload Processing\":{\"main\":[[{\"node\":\"Analyze Video with Gemini\",\"type\":\"main\",\"index\":0}]]},\"Sort by Reach or Days Running\":{\"main\":[[{\"node\":\"Filter only Video Ads\",\"type\":\"main\",\"index\":0}]]},\"Structured Output Parsing Agent\":{\"main\":[[{\"node\":\"Store Data\",\"type\":\"main\",\"index\":0}]]},\"Scrape Meta Ad Library with Apify\":{\"main\":[[{\"node\":\"Calculate Runtime in Days\",\"type\":\"main\",\"index\":0}]]},\"When clicking ‘Test workflow’\":{\"main\":[[{\"node\":\"Settings\",\"type\":\"main\",\"index\":0}]]}}}"
}