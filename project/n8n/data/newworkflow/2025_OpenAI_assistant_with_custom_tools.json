{
  "url": "https://n8n.io/workflows/2025-openai-assistant-with-custom-tools/",
  "title": "OpenAI assistant with custom tools",
  "author": "David Roberts",
  "publish_date": "Last update 2 months ago",
  "publish_date_absolute": "2025-03-25",
  "categories": [
    {
      "name": "AI"
    }
  ],
  "workflow_json": "",
  "readme": "This workflow shows how you can get your OpenAI assistant to call an n8n workflow as a tool. Since you can put almost any functionality in an n8n workflow, this means you can give your assistant access to almost any data source.\n\nNote that to use this template, you need to be on n8n version 1.19.4 or later.\n",
  "crawled_at": "2025-05-25T20:36:53.577386",
  "readme_zh": "本工作流程展示了如何让您的OpenAI助手调用n8n工作流作为工具。由于您几乎可以在n8n工作流中实现任何功能，这意味着您能让助手访问几乎任何数据源。\n\n请注意，使用此模板需确保n8n版本为1.19.4或更高。",
  "title_zh": "带有自定义工具的OpenAI助手",
  "publish_date_zh": "最后一次更新于一个月前",
  "workflow_json_zh": "{\n  \"meta\": {\n    \"instanceId\": \"408f9fb9940c3cb18ffdef0e0150fe342d6e655c3a9fac21f0f644e8bedabcd9\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"nodes\": [\n    {\n      \"id\": \"79573e58-f33f-445a-ad9a-0a92fde845c2\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -280,\n        480\n      ],\n      \"parameters\": {\n        \"width\": 1174.6162657502882,\n        \"height\": 578.9520146851776,\n        \"content\": \"## 子流程：返回虚构国家的首都\\n该流程可列出已知国家名录，亦可返回指定国家的首都信息\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"5eddcce9-7ee5-4ec7-a0a1-525a9b806994\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -280,\n        -80\n      ],\n      \"parameters\": {\n        \"width\": 1168,\n        \"height\": 528,\n        \"content\": \"## 主要工作流程：与OpenAI助手对话\\n点击屏幕底部的“聊天”按钮即可体验\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"a6c38394-1be1-4002-a9b7-c4672823aaa5\",\n      \"name\": \"When chat message received\",\n      \"type\": \"@n8n/n8n-nodes-langchain.chatTrigger\",\n      \"position\": [\n        -180,\n        40\n      ],\n      \"webhookId\": \"91f22813-2f7b-4ff9-a3e6-9d53fc86fbd9\",\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"de0398ea-c2ad-49b9-860b-695149b94590\",\n      \"name\": \"OpenAI\",\n      \"type\": \"@n8n/n8n-nodes-langchain.openAi\",\n      \"position\": [\n        100,\n        40\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"resource\": \"assistant\",\n        \"assistantId\": {\n          \"__rl\": true,\n          \"mode\": \"id\",\n          \"value\": \"asst_BWy0154vMGMdrX7MjCYaYv6a\"\n        }\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"8gccIjcuf3gvaoEr\",\n          \"name\": \"OpenAi account\"\n        }\n      },\n      \"typeVersion\": 1.8\n    },\n    {\n      \"id\": \"050042f4-f5ff-433a-9651-43cbec8eafb6\",\n      \"name\": \"Simple Memory\",\n      \"type\": \"@n8n/n8n-nodes-langchain.memoryBufferWindow\",\n      \"position\": [\n        360,\n        260\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1.3\n    },\n    {\n      \"id\": \"e4ed4cfe-78fb-44a5-8bef-67168dac95ec\",\n      \"name\": \"When Executed by Another Workflow\",\n      \"type\": \"n8n-nodes-base.executeWorkflowTrigger\",\n      \"position\": [\n        -180,\n        740\n      ],\n      \"parameters\": {\n        \"workflowInputs\": {\n          \"values\": [\n            {\n              \"name\": \"query\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"a3a1059c-5c36-4d90-90e2-98e37f62bdd2\",\n      \"name\": \"Tool to call the workflow below\",\n      \"type\": \"@n8n/n8n-nodes-langchain.toolWorkflow\",\n      \"position\": [\n        40,\n        260\n      ],\n      \"parameters\": {\n        \"name\": \"country_capitals_tool\",\n        \"workflowId\": {\n          \"__rl\": true,\n          \"mode\": \"id\",\n          \"value\": \"={{ $workflow.id }}\"\n        },\n        \"description\": \"This tool has two modes:\\n1. Pass 'list' to the tool to get a list of countries that the tool has the capitals for (one per line). This is useful if you can't find a match, to see if the country being asked about might have been misspelled.\\n2. Pass one of the country names in the list to the tool to get the capital of that country. Note that the country must be spelled exactly as it is in the list of countries returned in mode 1\",\n        \"workflowInputs\": {\n          \"value\": {\n            \"query\": \"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('query', ``, 'string') }}\"\n          },\n          \"schema\": [\n            {\n              \"id\": \"query\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"query\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            }\n          ],\n          \"mappingMode\": \"defineBelow\",\n          \"matchingColumns\": [],\n          \"attemptToConvertTypes\": false,\n          \"convertFieldsToString\": false\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"80924ec9-5e82-4e90-8b72-42fc805d83c0\",\n      \"name\": \"Tool: Get current date and time\",\n      \"type\": \"@n8n/n8n-nodes-langchain.toolCode\",\n      \"position\": [\n        200,\n        260\n      ],\n      \"parameters\": {\n        \"name\": \"date_tool\",\n        \"jsCode\": \"let now = DateTime.now()\\nreturn now.toISO()\",\n        \"description\": \"Call this tool to get the current timestamp (in ISO format). No parameters necessary\"\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"8f6a83bd-71eb-4f2d-b906-a18476f18f40\",\n      \"name\": \"List countries?\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        40,\n        740\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"ca43a9bd-5db3-4240-ae46-0402c8411818\",\n              \"operator\": {\n                \"name\": \"filter.operator.equals\",\n                \"type\": \"string\",\n                \"operation\": \"equals\"\n              },\n              \"leftValue\": \"={{ $json.query }}\",\n              \"rightValue\": \"list\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"40d93a59-4c91-43e4-a4a3-3732475617d6\",\n      \"name\": \"Mapping data\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        260,\n        600\n      ],\n      \"parameters\": {\n        \"jsCode\": \"return [\\n    {\\n        \\\"country\\\": \\\"Wakanda\\\",\\n        \\\"capital\\\": \\\"Birnin Zana\\\"\\n    },\\n    {\\n        \\\"country\\\": \\\"Narnia\\\",\\n        \\\"capital\\\": \\\"Cair Paravel\\\"\\n    },\\n    {\\n        \\\"country\\\": \\\"Gondor\\\",\\n        \\\"capital\\\": \\\"Minas Tirith\\\"\\n    },\\n    {\\n        \\\"country\\\": \\\"Oz\\\",\\n        \\\"capital\\\": \\\"The Emerald City\\\"\\n    },\\n    {\\n        \\\"country\\\": \\\"Westeros\\\",\\n        \\\"capital\\\": \\\"King's Landing\\\"\\n    },\\n    {\\n        \\\"country\\\": \\\"Panem\\\",\\n        \\\"capital\\\": \\\"The Capitol\\\"\\n    },\\n    {\\n        \\\"country\\\": \\\"Ruritania\\\",\\n        \\\"capital\\\": \\\"Strelsau\\\"\\n    },\\n    {\\n        \\\"country\\\": \\\"Mordor\\\",\\n        \\\"capital\\\": \\\"Barad-dûr\\\"\\n    },\\n    {\\n        \\\"country\\\": \\\"Latveria\\\",\\n        \\\"capital\\\": \\\"Doomstadt\\\"\\n    },\\n    {\\n        \\\"country\\\": \\\"Atlantis\\\",\\n        \\\"capital\\\": \\\"Poseidonis\\\"\\n    }\\n]\\n\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"8765b405-8991-421c-bdc5-3eb6d3757fcb\",\n      \"name\": \"Concatenate country names\",\n      \"type\": \"n8n-nodes-base.summarize\",\n      \"position\": [\n        460,\n        600\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"fieldsToSummarize\": {\n          \"values\": [\n            {\n              \"field\": \"country\",\n              \"separateBy\": \"\\n\",\n              \"aggregation\": \"concatenate\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"c0b21934-8518-49b4-bbab-f13ad0a74343\",\n      \"name\": \"Return country list\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        660,\n        600\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"c97c3abc-40b2-4238-912d-030eb9ca3440\",\n              \"name\": \"response\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.concatenated_country }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"5d4f05cc-f4e3-4ce6-9ea8-a324257fa7c3\",\n      \"name\": \"Mapping data1\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        260,\n        880\n      ],\n      \"parameters\": {\n        \"jsCode\": \"return [\\n    {\\n        \\\"country\\\": \\\"Wakanda\\\",\\n        \\\"capital\\\": \\\"Birnin Zana\\\"\\n    },\\n    {\\n        \\\"country\\\": \\\"Narnia\\\",\\n        \\\"capital\\\": \\\"Cair Paravel\\\"\\n    },\\n    {\\n        \\\"country\\\": \\\"Gondor\\\",\\n        \\\"capital\\\": \\\"Minas Tirith\\\"\\n    },\\n    {\\n        \\\"country\\\": \\\"Oz\\\",\\n        \\\"capital\\\": \\\"The Emerald City\\\"\\n    },\\n    {\\n        \\\"country\\\": \\\"Westeros\\\",\\n        \\\"capital\\\": \\\"King's Landing\\\"\\n    },\\n    {\\n        \\\"country\\\": \\\"Panem\\\",\\n        \\\"capital\\\": \\\"The Capitol\\\"\\n    },\\n    {\\n        \\\"country\\\": \\\"Ruritania\\\",\\n        \\\"capital\\\": \\\"Strelsau\\\"\\n    },\\n    {\\n        \\\"country\\\": \\\"Mordor\\\",\\n        \\\"capital\\\": \\\"Barad-dûr\\\"\\n    },\\n    {\\n        \\\"country\\\": \\\"Latveria\\\",\\n        \\\"capital\\\": \\\"Doomstadt\\\"\\n    },\\n    {\\n        \\\"country\\\": \\\"Atlantis\\\",\\n        \\\"capital\\\": \\\"Poseidonis\\\"\\n    }\\n]\\n\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"5ed65e2c-b56d-49d9-a205-1e4cc8914fa9\",\n      \"name\": \"Get the matching country's details\",\n      \"type\": \"n8n-nodes-base.merge\",\n      \"position\": [\n        460,\n        820\n      ],\n      \"parameters\": {\n        \"mode\": \"combine\",\n        \"options\": {},\n        \"advanced\": true,\n        \"joinMode\": \"enrichInput1\",\n        \"mergeByFields\": {\n          \"values\": [\n            {\n              \"field1\": \"query\",\n              \"field2\": \"country\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"313775a0-a4ce-488e-a7db-b1ddd49dc3cd\",\n      \"name\": \"Return specific capital\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        660,\n        820\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"03ac1883-126f-4419-93e4-c5062b2d766d\",\n              \"name\": \"response\",\n              \"type\": \"string\",\n              \"value\": \"={{ $ifEmpty($json.capital, 'Capital not found') }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"Mapping data\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Concatenate country names\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Mapping data1\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get the matching country's details\",\n            \"type\": \"main\",\n            \"index\": 1\n          }\n        ]\n      ]\n    },\n    \"Simple Memory\": {\n      \"ai_memory\": [\n        [\n          {\n            \"node\": \"OpenAI\",\n            \"type\": \"ai_memory\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"List countries?\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Mapping data\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Get the matching country's details\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Mapping data1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Concatenate country names\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Return country list\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When chat message received\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"OpenAI\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Tool to call the workflow below\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"OpenAI\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Tool: Get current date and time\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"OpenAI\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When Executed by Another Workflow\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"List countries?\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get the matching country's details\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Return specific capital\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}