{
  "url": "https://n8n.io/workflows/3050-build-your-first-ai-data-analyst-chatbot/",
  "title": "Build Your First AI Data Analyst Chatbot",
  "author": "Solomon",
  "publish_date": "Last update a month ago",
  "publish_date_absolute": "",
  "categories": [
    {
      "name": "Sales"
    },
    {
      "name": "Finance"
    },
    {
      "name": "Product"
    },
    {
      "name": "AI"
    }
  ],
  "workflow_json": "{\"meta\":{\"instanceId\":\"d6b502dfa4d9dd072cdc5c2bb763558661053f651289291352a84403e01b3d1b\",\"templateCredsSetupCompleted\":true},\"nodes\":[{\"id\":\"0951fd33-1811-4a89-b84f-f46dc9e6fde1\",\"name\":\"When chat message received\",\"type\":\"@n8n/n8n-nodes-langchain.chatTrigger\",\"position\":[20,-340],\"webhookId\":\"cdc03fce-33b6-4eed-86b5-f628994e5e31\",\"parameters\":{\"options\":{}},\"typeVersion\":1.1},{\"id\":\"699c2f89-5547-4d28-92a9-5e216aecb251\",\"name\":\"AI Agent\",\"type\":\"@n8n/n8n-nodes-langchain.agent\",\"position\":[240,-340],\"parameters\":{\"options\":{\"maxIterations\":15,\"systemMessage\":\"=You are a helpful assistant.\\nCurrent timestamp is {{ $now }}\"}},\"typeVersion\":1.7},{\"id\":\"640c29f7-b67e-49f6-a864-c9b396c446b7\",\"name\":\"OpenAI Chat Model\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\"position\":[160,-100],\"parameters\":{\"model\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"gpt-4o\",\"cachedResultName\":\"gpt-4o\"},\"options\":{\"temperature\":0.2}},\"credentials\":{\"openAiApi\":{\"id\":\"5LVOlVwHUgB8MAj2\",\"name\":\"OpenAI - n8n project\"}},\"typeVersion\":1.2},{\"id\":\"807630b4-c138-4b66-a438-fb70eab12a07\",\"name\":\"Calculator\",\"type\":\"@n8n/n8n-nodes-langchain.toolCalculator\",\"position\":[840,60],\"parameters\":{},\"typeVersion\":1},{\"id\":\"132a97a3-239c-403f-843f-55b652e3efc5\",\"name\":\"Code\",\"type\":\"n8n-nodes-base.code\",\"position\":[840,640],\"parameters\":{\"jsCode\":\"// Ensure there's at least one input item.\\nif (!items || items.length === 0) {\\n  throw new Error(\\\"No input items found.\\\");\\n}\\n\\n// Our input is expected to have a 'data' property containing the JSONP string.\\nconst input = items[0].json;\\n\\nif (!input.data) {\\n  throw new Error(\\\"Input JSON does not have a 'data' property.\\\");\\n}\\n\\nconst rawData = input.data;\\n\\n// Use a regex to extract the JSON content from the Google Visualization JSONP response.\\nconst regex = /google\\\\.visualization\\\\.Query\\\\.setResponse\\\\((.*)\\\\);?$/s;\\nconst match = rawData.match(regex);\\n\\nif (!match) {\\n  throw new Error(\\\"Input data does not match the expected Google Visualization JSONP format.\\\");\\n}\\n\\nconst jsonString = match[1];\\n\\n// Parse the extracted JSON string.\\nlet parsed;\\ntry {\\n  parsed = JSON.parse(jsonString);\\n} catch (error) {\\n  throw new Error(\\\"Failed to parse JSON: \\\" + error.message);\\n}\\n\\n// Verify that the parsed JSON has the expected 'table' structure with 'cols' and 'rows'.\\nif (!parsed.table || !Array.isArray(parsed.table.cols) || !Array.isArray(parsed.table.rows)) {\\n  throw new Error(\\\"Parsed JSON does not have the expected 'table' structure with 'cols' and 'rows'.\\\");\\n}\\n\\nconst cols = parsed.table.cols;\\nconst rows = parsed.table.rows;\\n\\n// Helper function to convert date string from \\\"Date(YYYY,M,D)\\\" to \\\"YYYY-MM-DD\\\"\\nfunction formatDate(dateStr) {\\n  const match = dateStr.match(/^Date\\\\((\\\\d+),(\\\\d+),(\\\\d+)\\\\)$/);\\n  if (!match) return dateStr;\\n  const year = parseInt(match[1], 10);\\n  const month = parseInt(match[2], 10) + 1; // JavaScript months are 0-indexed\\n  const day = parseInt(match[3], 10);\\n  // Format with leading zeros\\n  return `${year}-${String(month).padStart(2, '0')}-${String(day).padStart(2, '0')}`;\\n}\\n\\n// Map each row into an object using the column labels as keys.\\nconst newItems = rows.map(row => {\\n  const obj = {};\\n  cols.forEach((col, index) => {\\n    let value = row.c && row.c[index] ? row.c[index].v : null;\\n    // If the column type is \\\"date\\\" and the value is a string that looks like \\\"Date(YYYY,M,D)\\\"\\n    if (col.type === \\\"date\\\" && typeof value === \\\"string\\\") {\\n      value = formatDate(value);\\n    }\\n    obj[col.label] = value;\\n  });\\n  return { json: obj };\\n});\\n\\n// Return the new array of items.\\nreturn newItems;\\n\"},\"typeVersion\":2},{\"id\":\"3dc1e670-bfb1-4b63-b9c8-85656134c843\",\"name\":\"When Executed by Another Workflow\",\"type\":\"n8n-nodes-base.executeWorkflowTrigger\",\"position\":[280,640],\"parameters\":{\"workflowInputs\":{\"values\":[{\"name\":\"start_date\"},{\"name\":\"end_date\"},{\"name\":\"status\"}]}},\"typeVersion\":1.1},{\"id\":\"52a26e43-12a5-4b4a-a224-d70cdabf6aaf\",\"name\":\"Records by date\",\"type\":\"@n8n/n8n-nodes-langchain.toolWorkflow\",\"position\":[1020,-120],\"parameters\":{\"name\":\"records_by_date_and_or_status\",\"workflowId\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"a2BIIjr2gLBay06M\",\"cachedResultName\":\"Template | Your first AI Data Analyst\"},\"description\":\"Use this tool to get records filtered by date. You can also filter by status at the same time, if you want.\",\"workflowInputs\":{\"value\":{\"status\":\"={{ $fromAI(\\\"status\\\", \\\"Status of the transaction. Can be Completed, Refund or Error. Leave empty if you don't need this now.\\\", \\\"string\\\") }}\",\"end_date\":\"={{ $fromAI(\\\"end_date\\\", \\\"End date in format YYYY-MM-DD\\\", \\\"string\\\") }}\",\"start_date\":\"={{ $fromAI(\\\"start_date\\\", \\\"Start date in format YYYY-MM-DD\\\", \\\"string\\\") }}\"},\"schema\":[{\"id\":\"start_date\",\"type\":\"string\",\"display\":true,\"required\":false,\"displayName\":\"start_date\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"end_date\",\"type\":\"string\",\"display\":true,\"required\":false,\"displayName\":\"end_date\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"status\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"status\",\"defaultMatch\":false,\"canBeUsedToMatch\":true}],\"mappingMode\":\"defineBelow\",\"matchingColumns\":[],\"attemptToConvertTypes\":false,\"convertFieldsToString\":false}},\"typeVersion\":2},{\"id\":\"e1811519-8699-4243-8c64-0db1ab26004d\",\"name\":\"Aggregate\",\"type\":\"n8n-nodes-base.aggregate\",\"position\":[1280,640],\"parameters\":{\"options\":{},\"aggregate\":\"aggregateAllItemData\"},\"typeVersion\":1},{\"id\":\"3b129abd-ac9a-460c-abb3-007e2c94e284\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1220,400],\"parameters\":{\"color\":7,\"width\":220,\"height\":400,\"content\":\"To send all the items back to the AI, we need to finish with everything aggregated into one single item.\\n\\nOtherwise it will respond with one item at a time, and the AI will only get the first item that arrives.\"},\"typeVersion\":1},{\"id\":\"645ac0f9-8022-4f2c-8c6c-5aadd6cf09cc\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[460,400],\"parameters\":{\"color\":7,\"width\":300,\"height\":400,\"content\":\"This node sends a custom HTTP Request to the Google Sheets API.\\n\\nFiltering by date range in the Google Sheets API is very complicated.\\n\\nThis node solves that problem.\\n\\nBut doing the same in a database is much simpler. A tool could do it without needing a sub-workflow.\"},\"typeVersion\":1},{\"id\":\"14221a72-914d-4c75-866a-d64ba7f8109f\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[780,400],\"parameters\":{\"color\":7,\"width\":220,\"height\":400,\"content\":\"The output from this complex request is also messy.\\n\\nSo we use some code generated by ChatGPT to transform the data into JSON objects.\"},\"typeVersion\":1},{\"id\":\"f12668ea-b59d-4caf-a997-381f78b7cfe7\",\"name\":\"Google Sheets request\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[560,640],\"parameters\":{\"url\":\"https://docs.google.com/spreadsheets/d/18A4d7KYrk8-uEMbu7shoQe_UIzmbTLV1FMN43bjA7qc/gviz/tq\",\"options\":{},\"sendQuery\":true,\"authentication\":\"predefinedCredentialType\",\"queryParameters\":{\"parameters\":[{\"name\":\"sheet\",\"value\":\"Sheet1\"},{\"name\":\"tq\",\"value\":\"=SELECT * WHERE A >= DATE \\\"{{ $json.start_date }}\\\" AND A <= DATE \\\"{{ $json.end_date }}\\\"\"}]},\"nodeCredentialType\":\"googleSheetsOAuth2Api\"},\"credentials\":{\"googleSheetsOAuth2Api\":{\"id\":\"YR4pbjuZM5Xs4CTD\",\"name\":\"Google Sheets\"}},\"typeVersion\":4.2},{\"id\":\"f59a2606-0981-43d1-9a07-b802891b9220\",\"name\":\"Get transactions by product name\",\"type\":\"n8n-nodes-base.googleSheetsTool\",\"position\":[1020,-320],\"parameters\":{\"options\":{},\"filtersUI\":{\"values\":[{\"lookupValue\":\"={{ $fromAI(\\\"product_name\\\", \\\"The product name\\\", \\\"string\\\") }}\",\"lookupColumn\":\"Product\"}]},\"sheetName\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"gid=0\",\"cachedResultUrl\":\"https://docs.google.com/spreadsheets/d/18A4d7KYrk8-uEMbu7shoQe_UIzmbTLV1FMN43bjA7qc/edit#gid=0\",\"cachedResultName\":\"Sheet1\"},\"documentId\":{\"__rl\":true,\"mode\":\"url\",\"value\":\"https://docs.google.com/spreadsheets/d/18A4d7KYrk8-uEMbu7shoQe_UIzmbTLV1FMN43bjA7qc/edit?usp=sharing\"},\"descriptionType\":\"manual\",\"toolDescription\":\"Find transactions by product.\\nOur products are:\\n- Widget A\\n- Widget B\\n- Widget C\\n- Widget D\"},\"credentials\":{\"googleSheetsOAuth2Api\":{\"id\":\"YR4pbjuZM5Xs4CTD\",\"name\":\"Google Sheets\"}},\"typeVersion\":4.5},{\"id\":\"1ed7168c-1639-4b3b-a3b4-ed162bcef880\",\"name\":\"Get all transactions\",\"type\":\"n8n-nodes-base.googleSheetsTool\",\"position\":[840,-120],\"parameters\":{\"options\":{},\"sheetName\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"gid=0\",\"cachedResultUrl\":\"https://docs.google.com/spreadsheets/d/18A4d7KYrk8-uEMbu7shoQe_UIzmbTLV1FMN43bjA7qc/edit#gid=0\",\"cachedResultName\":\"Sheet1\"},\"documentId\":{\"__rl\":true,\"mode\":\"url\",\"value\":\"https://docs.google.com/spreadsheets/d/18A4d7KYrk8-uEMbu7shoQe_UIzmbTLV1FMN43bjA7qc/edit?usp=sharing\"},\"descriptionType\":\"manual\",\"toolDescription\":\"Only use this as last resort, because it will pull all data at once.\"},\"credentials\":{\"googleSheetsOAuth2Api\":{\"id\":\"YR4pbjuZM5Xs4CTD\",\"name\":\"Google Sheets\"}},\"typeVersion\":4.5},{\"id\":\"798453da-8a65-4d14-ae0a-778d64ab02ad\",\"name\":\"Sticky Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-360,-340],\"parameters\":{\"color\":4,\"width\":320,\"height\":340,\"content\":\"## Some questions to try\\nThere's a red button on this page that you can click to chat with the AI.\\n\\nTry asking it these questions:\\n\\n- How many refunds in January and what was the amount refunded?\\n\\n- How many successful sales did we have in January 2025 and what was the final income of those?\\n\\n- What is the most frequent reason for refunds?\"},\"typeVersion\":1},{\"id\":\"b8336f1a-3855-4247-9589-2f9aa35d211f\",\"name\":\"Sticky Note4\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-780,-340],\"parameters\":{\"color\":4,\"width\":400,\"content\":\"## Copy this Sheets file to your Google Drive\\nhttps://docs.google.com/spreadsheets/d/18A4d7KYrk8-uEMbu7shoQe_UIzmbTLV1FMN43bjA7qc/edit?gid=0#gid=0\"},\"typeVersion\":1},{\"id\":\"99a55b39-965b-4454-b416-d3991f0bdfbc\",\"name\":\"Sticky Note5\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[940,60],\"parameters\":{\"color\":7,\"width\":200,\"height\":140,\"content\":\"### 👈\\nThe Calculator is a tool that allows an agent to run mathematical calculations.\"},\"typeVersion\":1},{\"id\":\"7ebebf56-e065-41c4-8270-f636785b0def\",\"name\":\"Sticky Note6\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-780,-160],\"parameters\":{\"color\":4,\"width\":400,\"content\":\"### How to connect to Google Sheets?\\nTo connect your n8n to your Google Sheets you're gonna need Google OAuth credentials\\n\\nSee documentation **[here](https://docs.n8n.io/integrations/builtin/credentials/google/oauth-single-service/)**\"},\"typeVersion\":1},{\"id\":\"b64df0dd-6425-4fc2-9f60-8c5a85412d61\",\"name\":\"Sticky Note7\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[120,20],\"parameters\":{\"color\":7,\"width\":170,\"height\":260,\"content\":\"## 👆\\nYou can use many models here, including the free Google Gemini options.\\n\\nMake sure to test it thoroughly. Some models are better for data analysis.\"},\"typeVersion\":1},{\"id\":\"23c7bb52-b189-45f1-949b-ea588f065583\",\"name\":\"Sticky Note8\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[340,20],\"parameters\":{\"color\":7,\"width\":150,\"height\":260,\"content\":\"## 👆\\nThis is a short term memory. It will remember the 5 previous interactions during the chat\"},\"typeVersion\":1},{\"id\":\"6097e5a1-139b-4329-81ff-4fda16ea5221\",\"name\":\"Buffer Memory\",\"type\":\"@n8n/n8n-nodes-langchain.memoryBufferWindow\",\"position\":[360,-100],\"parameters\":{},\"typeVersion\":1.3},{\"id\":\"6de4a7f2-5c58-4401-bd7c-19c5a73ba775\",\"name\":\"Sticky Note9\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1160,-320],\"parameters\":{\"color\":7,\"width\":340,\"height\":180,\"content\":\"The **AI Tools Agent** has access to all the tools at the same time. It uses the name and description to decide when to use each tool.\\n\\nNotice I'm using `$fromAI` function in all of them.\\n\\nSee documentations **[here](https://docs.n8n.io/advanced-ai/examples/using-the-fromai-function/)**\"},\"typeVersion\":1},{\"id\":\"a308d895-bc18-4b2c-9567-78f6c29f79e8\",\"name\":\"Sticky Note11\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1160,-120],\"parameters\":{\"color\":7,\"width\":340,\"height\":320,\"content\":\"## 👈 This is a special tool\\nIt is used to call another workflow.\\nThis concept is called sub-workflow.\\n\\nSee documentation [here](https://docs.n8n.io/flow-logic/subworkflows/).\\n\\nInstead of running a completely separate workflow, we are calling the one below.\\n\\nIt's contained in the same workflow, but we are using the trigger to define it will run only when called by this tool.\"},\"typeVersion\":1},{\"id\":\"0a6d94bc-21e1-4949-b7f4-c93abbecf08c\",\"name\":\"Sticky Note12\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[120,340],\"parameters\":{\"color\":7,\"width\":1380,\"height\":520,\"content\":\"# Sub-workflow\\nThe AI can call this sub-workflow anytime,\\nby using the **Records by date** tool.\\n\\nThe sub-workflow automatically return\\n the result of the last executed node to the AI.\"},\"typeVersion\":1},{\"id\":\"3e424615-6e49-4bd3-b066-005b9f0f773e\",\"name\":\"Filter by status\",\"type\":\"n8n-nodes-base.filter\",\"position\":[1060,640],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"e50da873-bbbd-41d3-a418-83193907977c\",\"operator\":{\"type\":\"string\",\"operation\":\"contains\"},\"leftValue\":\"={{ $json.Status }}\",\"rightValue\":\"={{ $('When Executed by Another Workflow').item.json.status }}\"}]}},\"typeVersion\":2.2},{\"id\":\"0ad0102c-adb9-4ec9-bdf3-b1ce425b88ba\",\"name\":\"Get transactions by status\",\"type\":\"n8n-nodes-base.googleSheetsTool\",\"position\":[840,-320],\"parameters\":{\"options\":{},\"filtersUI\":{\"values\":[{\"lookupValue\":\"={{ $fromAI(\\\"transaction_status\\\", \\\"Transaction status can be Refund, Completed or Error\\\", \\\"string\\\") }}\",\"lookupColumn\":\"Status\"}]},\"sheetName\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"gid=0\",\"cachedResultUrl\":\"https://docs.google.com/spreadsheets/d/18A4d7KYrk8-uEMbu7shoQe_UIzmbTLV1FMN43bjA7qc/edit#gid=0\",\"cachedResultName\":\"Sheet1\"},\"documentId\":{\"__rl\":true,\"mode\":\"url\",\"value\":\"https://docs.google.com/spreadsheets/d/18A4d7KYrk8-uEMbu7shoQe_UIzmbTLV1FMN43bjA7qc/edit?usp=sharing\"},\"descriptionType\":\"manual\",\"toolDescription\":\"Find transactions by status\"},\"credentials\":{\"googleSheetsOAuth2Api\":{\"id\":\"YR4pbjuZM5Xs4CTD\",\"name\":\"Google Sheets\"}},\"typeVersion\":4.5},{\"id\":\"5b80cb08-6e19-47b2-8146-c299e709a34a\",\"name\":\"Sticky Note13\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[820,-540],\"parameters\":{\"color\":4,\"width\":300,\"content\":\"## Change the URL of the Sheets file in all the Sheets tools 👇\"},\"typeVersion\":1},{\"id\":\"ddc1351e-0ad0-480f-9742-30f2aa860d61\",\"name\":\"Sticky Note14\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[500,820],\"parameters\":{\"color\":4,\"width\":260,\"height\":100,\"content\":\"## 👆 Change the URL of the Sheets file\"},\"typeVersion\":1},{\"id\":\"ab837a10-932f-4b14-8e2c-546077ca2c86\",\"name\":\"Sticky Note10\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-780,20],\"parameters\":{\"color\":7,\"width\":740,\"height\":580,\"content\":\"# Author\\n![Solomon](https://gravatar.com/avatar/79aa147f090807fe0f618fb47a1de932669e385bb0c84bf3a7f891ae7d174256?r=pg&d=retro&size=200)\\n### Solomon\\nFreelance consultant from Brazil, specializing in automations and data analysis. I work with select clients, addressing their toughest projects.\\n\\nCurrently running the [Scrapes community](https://www.skool.com/scrapes/about?ref=21f10ad99f4d46ba9b8aaea8c9f58c34) with Simon 💪\\n\\nFor business inquiries, email me at automations.solomon@gmail.com\\nOr message me on [Telegram](https://t.me/salomaoguilherme) for a faster response.\\n\\n## Check out my other templates\\n### 👉 https://n8n.io/creators/solomon/\\n\"},\"typeVersion\":1},{\"id\":\"e58351b3-3b18-4c03-9435-27ba853d03bb\",\"name\":\"Sticky Note15\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-780,620],\"parameters\":{\"width\":740,\"height\":180,\"content\":\"# Need help?\\nFor getting help with this workflow, please create a topic on the community forums here:\\nhttps://community.n8n.io/c/questions/\"},\"typeVersion\":1}],\"pinData\":{},\"connections\":{\"Code\":{\"main\":[[{\"node\":\"Filter by status\",\"type\":\"main\",\"index\":0}]]},\"Calculator\":{\"ai_tool\":[[{\"node\":\"AI Agent\",\"type\":\"ai_tool\",\"index\":0}]]},\"Buffer Memory\":{\"ai_memory\":[[{\"node\":\"AI Agent\",\"type\":\"ai_memory\",\"index\":0}]]},\"Records by date\":{\"ai_tool\":[[{\"node\":\"AI Agent\",\"type\":\"ai_tool\",\"index\":0}]]},\"Filter by status\":{\"main\":[[{\"node\":\"Aggregate\",\"type\":\"main\",\"index\":0}]]},\"OpenAI Chat Model\":{\"ai_languageModel\":[[{\"node\":\"AI Agent\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"Get all transactions\":{\"ai_tool\":[[{\"node\":\"AI Agent\",\"type\":\"ai_tool\",\"index\":0}]]},\"Google Sheets request\":{\"main\":[[{\"node\":\"Code\",\"type\":\"main\",\"index\":0}]]},\"Get transactions by status\":{\"ai_tool\":[[{\"node\":\"AI Agent\",\"type\":\"ai_tool\",\"index\":0}]]},\"When chat message received\":{\"main\":[[{\"node\":\"AI Agent\",\"type\":\"main\",\"index\":0}]]},\"Get transactions by product name\":{\"ai_tool\":[[{\"node\":\"AI Agent\",\"type\":\"ai_tool\",\"index\":0}]]},\"When Executed by Another Workflow\":{\"main\":[[{\"node\":\"Google Sheets request\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "Enhance your data analysis by connecting an AI Agent to your dataset, using n8n tools.\n\nThis template teaches you how to build an AI Data Analyst Chatbot that is capable of pulling data from your sources, using tools like Google Sheets or databases. It's designed to be easy and efficient, making it a good starting point for AI-driven data analysis.\n\nYou can easily replace the current Google Sheets tools for databases like Postgres or MySQL.\n\n![image_template_data.png](https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/image_template_data_d6c839fcb9.png)\n\n### How It Works\n\nThe core of the workflow is the AI Agent. It's connected to different data retrieval tools, to get data from Google Sheets (or your preferred database) in many different ways.\n\nOnce the data is retrieved, the Calculator tool allows the AI to perform mathematical operations, making your data analysis precise.\n\n### Who is this template for\n\n  * **Data Analysts & Researchers:** Pull data from different sources and perform quick calculations.\n  * **Developers & AI Enthusiasts:** Learn to build your first AI Agent with easy dataset access.\n  * **Business Owners:** Streamline your data analysis with AI insights and automate repetitive tasks.\n  * **Automation Experts:** Enhance your automation skills by integrating AI with your existing databases.\n\n\n\n### How to Set Up\n\nYou can find detailed instructions in the workflow itself.\n\n### Check out my other templates\n\n👉 [**https://n8n.io/creators/solomon/**](https://n8n.io/creators/solomon/)\n",
  "crawled_at": "2025-05-26T03:35:34.989137",
  "readme_zh": "通过n8n工具将AI智能体连接至您的数据集，提升数据分析能力。\n\n本模板将指导您构建一个AI数据分析聊天机器人，该机器人能够从Google Sheets或数据库等数据源提取信息。设计简洁高效，是开启AI驱动数据分析的理想起点。\n\n您可轻松将现有Google Sheets工具替换为Postgres或MySQL等数据库。\n\n![image_template_data.png](https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/image_template_data_d6c839fcb9.png)\n\n### 工作原理\n\n工作流核心是AI智能体，它通过多种数据获取工具连接Google Sheets（或您指定的数据库）实现数据抓取。\n\n数据获取后，计算器工具可辅助AI执行数学运算，确保分析结果精确无误。\n\n### 适用人群\n\n* **数据分析师与研究人员**：从多源获取数据并快速完成计算\n* **开发者与AI爱好者**：学习构建首个支持简易数据集访问的AI智能体\n* **企业主**：通过AI洞察简化数据分析流程，自动化重复任务\n* **自动化专家**：将AI与现有数据库集成，提升自动化技能\n\n### 设置指南\n\n工作流内附详细配置说明。\n\n### 探索更多模板\n\n👉 [**https://n8n.io/creators/solomon/**](https://n8n.io/creators/solomon/)",
  "title_zh": "构建你的首个AI数据分析师聊天机器人",
  "publish_date_zh": "上次更新于16天前",
  "workflow_json_zh": "{\n  \"meta\": {\n    \"instanceId\": \"d6b502dfa4d9dd072cdc5c2bb763558661053f651289291352a84403e01b3d1b\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"nodes\": [\n    {\n      \"id\": \"0951fd33-1811-4a89-b84f-f46dc9e6fde1\",\n      \"name\": \"When chat message received\",\n      \"type\": \"@n8n/n8n-nodes-langchain.chatTrigger\",\n      \"position\": [\n        20,\n        -340\n      ],\n      \"webhookId\": \"cdc03fce-33b6-4eed-86b5-f628994e5e31\",\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"699c2f89-5547-4d28-92a9-5e216aecb251\",\n      \"name\": \"AI Agent\",\n      \"type\": \"@n8n/n8n-nodes-langchain.agent\",\n      \"position\": [\n        240,\n        -340\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"maxIterations\": 15,\n          \"systemMessage\": \"=You are a helpful assistant.\\nCurrent timestamp is {{ $now }}\"\n        }\n      },\n      \"typeVersion\": 1.7\n    },\n    {\n      \"id\": \"640c29f7-b67e-49f6-a864-c9b396c446b7\",\n      \"name\": \"OpenAI Chat Model\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\n      \"position\": [\n        160,\n        -100\n      ],\n      \"parameters\": {\n        \"model\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gpt-4o\",\n          \"cachedResultName\": \"gpt-4o\"\n        },\n        \"options\": {\n          \"temperature\": 0.2\n        }\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"5LVOlVwHUgB8MAj2\",\n          \"name\": \"OpenAI - n8n project\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"807630b4-c138-4b66-a438-fb70eab12a07\",\n      \"name\": \"Calculator\",\n      \"type\": \"@n8n/n8n-nodes-langchain.toolCalculator\",\n      \"position\": [\n        840,\n        60\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"132a97a3-239c-403f-843f-55b652e3efc5\",\n      \"name\": \"Code\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        840,\n        640\n      ],\n      \"parameters\": {\n        \"jsCode\": \"// Ensure there's at least one input item.\\nif (!items || items.length === 0) {\\n  throw new Error(\\\"No input items found.\\\");\\n}\\n\\n// Our input is expected to have a 'data' property containing the JSONP string.\\nconst input = items[0].json;\\n\\nif (!input.data) {\\n  throw new Error(\\\"Input JSON does not have a 'data' property.\\\");\\n}\\n\\nconst rawData = input.data;\\n\\n// Use a regex to extract the JSON content from the Google Visualization JSONP response.\\nconst regex = /google\\\\.visualization\\\\.Query\\\\.setResponse\\\\((.*)\\\\);?$/s;\\nconst match = rawData.match(regex);\\n\\nif (!match) {\\n  throw new Error(\\\"Input data does not match the expected Google Visualization JSONP format.\\\");\\n}\\n\\nconst jsonString = match[1];\\n\\n// Parse the extracted JSON string.\\nlet parsed;\\ntry {\\n  parsed = JSON.parse(jsonString);\\n} catch (error) {\\n  throw new Error(\\\"Failed to parse JSON: \\\" + error.message);\\n}\\n\\n// Verify that the parsed JSON has the expected 'table' structure with 'cols' and 'rows'.\\nif (!parsed.table || !Array.isArray(parsed.table.cols) || !Array.isArray(parsed.table.rows)) {\\n  throw new Error(\\\"Parsed JSON does not have the expected 'table' structure with 'cols' and 'rows'.\\\");\\n}\\n\\nconst cols = parsed.table.cols;\\nconst rows = parsed.table.rows;\\n\\n// Helper function to convert date string from \\\"Date(YYYY,M,D)\\\" to \\\"YYYY-MM-DD\\\"\\nfunction formatDate(dateStr) {\\n  const match = dateStr.match(/^Date\\\\((\\\\d+),(\\\\d+),(\\\\d+)\\\\)$/);\\n  if (!match) return dateStr;\\n  const year = parseInt(match[1], 10);\\n  const month = parseInt(match[2], 10) + 1; // JavaScript months are 0-indexed\\n  const day = parseInt(match[3], 10);\\n  // Format with leading zeros\\n  return `${year}-${String(month).padStart(2, '0')}-${String(day).padStart(2, '0')}`;\\n}\\n\\n// Map each row into an object using the column labels as keys.\\nconst newItems = rows.map(row => {\\n  const obj = {};\\n  cols.forEach((col, index) => {\\n    let value = row.c && row.c[index] ? row.c[index].v : null;\\n    // If the column type is \\\"date\\\" and the value is a string that looks like \\\"Date(YYYY,M,D)\\\"\\n    if (col.type === \\\"date\\\" && typeof value === \\\"string\\\") {\\n      value = formatDate(value);\\n    }\\n    obj[col.label] = value;\\n  });\\n  return { json: obj };\\n});\\n\\n// Return the new array of items.\\nreturn newItems;\\n\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"3dc1e670-bfb1-4b63-b9c8-85656134c843\",\n      \"name\": \"When Executed by Another Workflow\",\n      \"type\": \"n8n-nodes-base.executeWorkflowTrigger\",\n      \"position\": [\n        280,\n        640\n      ],\n      \"parameters\": {\n        \"workflowInputs\": {\n          \"values\": [\n            {\n              \"name\": \"start_date\"\n            },\n            {\n              \"name\": \"end_date\"\n            },\n            {\n              \"name\": \"status\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"52a26e43-12a5-4b4a-a224-d70cdabf6aaf\",\n      \"name\": \"Records by date\",\n      \"type\": \"@n8n/n8n-nodes-langchain.toolWorkflow\",\n      \"position\": [\n        1020,\n        -120\n      ],\n      \"parameters\": {\n        \"name\": \"records_by_date_and_or_status\",\n        \"workflowId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"a2BIIjr2gLBay06M\",\n          \"cachedResultName\": \"Template | Your first AI Data Analyst\"\n        },\n        \"description\": \"Use this tool to get records filtered by date. You can also filter by status at the same time, if you want.\",\n        \"workflowInputs\": {\n          \"value\": {\n            \"status\": \"={{ $fromAI(\\\"status\\\", \\\"Status of the transaction. Can be Completed, Refund or Error. Leave empty if you don't need this now.\\\", \\\"string\\\") }}\",\n            \"end_date\": \"={{ $fromAI(\\\"end_date\\\", \\\"End date in format YYYY-MM-DD\\\", \\\"string\\\") }}\",\n            \"start_date\": \"={{ $fromAI(\\\"start_date\\\", \\\"Start date in format YYYY-MM-DD\\\", \\\"string\\\") }}\"\n          },\n          \"schema\": [\n            {\n              \"id\": \"start_date\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"start_date\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"end_date\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"end_date\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"status\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"status\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            }\n          ],\n          \"mappingMode\": \"defineBelow\",\n          \"matchingColumns\": [],\n          \"attemptToConvertTypes\": false,\n          \"convertFieldsToString\": false\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"e1811519-8699-4243-8c64-0db1ab26004d\",\n      \"name\": \"Aggregate\",\n      \"type\": \"n8n-nodes-base.aggregate\",\n      \"position\": [\n        1280,\n        640\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"aggregate\": \"aggregateAllItemData\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"3b129abd-ac9a-460c-abb3-007e2c94e284\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1220,\n        400\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 220,\n        \"height\": 400,\n        \"content\": \"为了将所有项目一次性发送回AI，我们需要确保所有内容汇总成一个单一的项目。\\n\\n否则，系统会逐项回复，而AI只会接收到最先到达的第一项。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"645ac0f9-8022-4f2c-8c6c-5aadd6cf09cc\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        460,\n        400\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 300,\n        \"height\": 400,\n        \"content\": \"该节点向Google Sheets API发送自定义HTTP请求。\\n\\n在Google Sheets API中按日期范围筛选非常复杂。\\n\\n此节点解决了该问题。\\n\\n但在数据库中实现相同功能则简单得多。一个工具即可完成，无需子工作流。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"14221a72-914d-4c75-866a-d64ba7f8109f\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        780,\n        400\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 220,\n        \"height\": 400,\n        \"content\": \"这个复杂请求的输出结果同样杂乱无章。\\n\\n于是我们使用了一些由ChatGPT生成的代码，将数据转换为JSON对象。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"f12668ea-b59d-4caf-a997-381f78b7cfe7\",\n      \"name\": \"Google Sheets request\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        560,\n        640\n      ],\n      \"parameters\": {\n        \"url\": \"https://docs.google.com/spreadsheets/d/18A4d7KYrk8-uEMbu7shoQe_UIzmbTLV1FMN43bjA7qc/gviz/tq\",\n        \"options\": {},\n        \"sendQuery\": true,\n        \"authentication\": \"predefinedCredentialType\",\n        \"queryParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"sheet\",\n              \"value\": \"Sheet1\"\n            },\n            {\n              \"name\": \"tq\",\n              \"value\": \"=SELECT * WHERE A >= DATE \\\"{{ $json.start_date }}\\\" AND A <= DATE \\\"{{ $json.end_date }}\\\"\"\n            }\n          ]\n        },\n        \"nodeCredentialType\": \"googleSheetsOAuth2Api\"\n      },\n      \"credentials\": {\n        \"googleSheetsOAuth2Api\": {\n          \"id\": \"YR4pbjuZM5Xs4CTD\",\n          \"name\": \"Google Sheets\"\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"f59a2606-0981-43d1-9a07-b802891b9220\",\n      \"name\": \"Get transactions by product name\",\n      \"type\": \"n8n-nodes-base.googleSheetsTool\",\n      \"position\": [\n        1020,\n        -320\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"filtersUI\": {\n          \"values\": [\n            {\n              \"lookupValue\": \"={{ $fromAI(\\\"product_name\\\", \\\"The product name\\\", \\\"string\\\") }}\",\n              \"lookupColumn\": \"Product\"\n            }\n          ]\n        },\n        \"sheetName\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gid=0\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/18A4d7KYrk8-uEMbu7shoQe_UIzmbTLV1FMN43bjA7qc/edit#gid=0\",\n          \"cachedResultName\": \"Sheet1\"\n        },\n        \"documentId\": {\n          \"__rl\": true,\n          \"mode\": \"url\",\n          \"value\": \"https://docs.google.com/spreadsheets/d/18A4d7KYrk8-uEMbu7shoQe_UIzmbTLV1FMN43bjA7qc/edit?usp=sharing\"\n        },\n        \"descriptionType\": \"manual\",\n        \"toolDescription\": \"Find transactions by product.\\nOur products are:\\n- Widget A\\n- Widget B\\n- Widget C\\n- Widget D\"\n      },\n      \"credentials\": {\n        \"googleSheetsOAuth2Api\": {\n          \"id\": \"YR4pbjuZM5Xs4CTD\",\n          \"name\": \"Google Sheets\"\n        }\n      },\n      \"typeVersion\": 4.5\n    },\n    {\n      \"id\": \"1ed7168c-1639-4b3b-a3b4-ed162bcef880\",\n      \"name\": \"Get all transactions\",\n      \"type\": \"n8n-nodes-base.googleSheetsTool\",\n      \"position\": [\n        840,\n        -120\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"sheetName\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gid=0\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/18A4d7KYrk8-uEMbu7shoQe_UIzmbTLV1FMN43bjA7qc/edit#gid=0\",\n          \"cachedResultName\": \"Sheet1\"\n        },\n        \"documentId\": {\n          \"__rl\": true,\n          \"mode\": \"url\",\n          \"value\": \"https://docs.google.com/spreadsheets/d/18A4d7KYrk8-uEMbu7shoQe_UIzmbTLV1FMN43bjA7qc/edit?usp=sharing\"\n        },\n        \"descriptionType\": \"manual\",\n        \"toolDescription\": \"Only use this as last resort, because it will pull all data at once.\"\n      },\n      \"credentials\": {\n        \"googleSheetsOAuth2Api\": {\n          \"id\": \"YR4pbjuZM5Xs4CTD\",\n          \"name\": \"Google Sheets\"\n        }\n      },\n      \"typeVersion\": 4.5\n    },\n    {\n      \"id\": \"798453da-8a65-4d14-ae0a-778d64ab02ad\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -360,\n        -340\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 320,\n        \"height\": 340,\n        \"content\": \"## 尝试提问\\n本页有一个红色按钮，点击即可与AI对话。\\n\\n试着问这些问题：\\n\\n- 一月份有多少笔退款，退款金额是多少？\\n\\n- 2025年1月我们有多少笔成功销售，最终收入是多少？\\n\\n- 退款最常见的原因是什么？\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"b8336f1a-3855-4247-9589-2f9aa35d211f\",\n      \"name\": \"Sticky Note4\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -780,\n        -340\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 400,\n        \"content\": \"## 将此Sheets文件复制到您的Google Drive\\nhttps://docs.google.com/spreadsheets/d/18A4d7KYrk8-uEMbu7shoQe_UIzmbTLV1FMN43bjA7qc/edit?gid=0#gid=0\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"99a55b39-965b-4454-b416-d3991f0bdfbc\",\n      \"name\": \"Sticky Note5\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        940,\n        60\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 200,\n        \"height\": 140,\n        \"content\": \"### 👈\\n计算器是一种工具，能让代理执行数学运算。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"7ebebf56-e065-41c4-8270-f636785b0def\",\n      \"name\": \"Sticky Note6\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -780,\n        -160\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 400,\n        \"content\": \"### 如何连接Google表格？\\n要将您的n8n连接到Google表格，您需要获取Google OAuth凭据\\n\\n查看文档**[此处](https://docs.n8n.io/integrations/builtin/credentials/google/oauth-single-service/)**\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"b64df0dd-6425-4fc2-9f60-8c5a85412d61\",\n      \"name\": \"Sticky Note7\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        120,\n        20\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 170,\n        \"height\": 260,\n        \"content\": \"## 👆  \\n这里可以使用多种模型，包括免费的Google Gemini选项。  \\n\\n务必进行全面测试。某些模型更擅长数据分析。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"23c7bb52-b189-45f1-949b-ea588f065583\",\n      \"name\": \"Sticky Note8\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        340,\n        20\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 150,\n        \"height\": 260,\n        \"content\": \"## 👆\\n这是一个短期记忆功能。在聊天过程中，它将记住最近的5次对话内容。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"6097e5a1-139b-4329-81ff-4fda16ea5221\",\n      \"name\": \"Buffer Memory\",\n      \"type\": \"@n8n/n8n-nodes-langchain.memoryBufferWindow\",\n      \"position\": [\n        360,\n        -100\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1.3\n    },\n    {\n      \"id\": \"6de4a7f2-5c58-4401-bd7c-19c5a73ba775\",\n      \"name\": \"Sticky Note9\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1160,\n        -320\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 340,\n        \"height\": 180,\n        \"content\": \"**AI工具代理**能够同时访问所有工具，并根据名称和描述来决定何时使用各个工具。\\n\\n注意，我在所有工具中都使用了`$fromAI`函数。\\n\\n相关文档请参阅**[此处](https://docs.n8n.io/advanced-ai/examples/using-the-fromai-function/)**\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"a308d895-bc18-4b2c-9567-78f6c29f79e8\",\n      \"name\": \"Sticky Note11\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1160,\n        -120\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 340,\n        \"height\": 320,\n        \"content\": \"## 👈 这是一个特殊工具  \\n用于调用另一个工作流。  \\n这个概念被称为子工作流。  \\n\\n查看文档[请点击此处](https://docs.n8n.io/flow-logic/subworkflows/)。  \\n\\n我们并非运行完全独立的工作流，而是调用下方定义的工作流。  \\n\\n它虽然包含在同一个主工作流中，但通过触发器设定仅在被此工具调用时才会执行。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"0a6d94bc-21e1-4949-b7f4-c93abbecf08c\",\n      \"name\": \"Sticky Note12\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        120,\n        340\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 1380,\n        \"height\": 520,\n        \"content\": \"# 子工作流程\\nAI可随时通过**按日期记录**工具调用此子工作流程。\\n\\n该子工作流程会自动将最后执行节点的结果返回给AI。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"3e424615-6e49-4bd3-b066-005b9f0f773e\",\n      \"name\": \"Filter by status\",\n      \"type\": \"n8n-nodes-base.filter\",\n      \"position\": [\n        1060,\n        640\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"e50da873-bbbd-41d3-a418-83193907977c\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"contains\"\n              },\n              \"leftValue\": \"={{ $json.Status }}\",\n              \"rightValue\": \"={{ $('When Executed by Another Workflow').item.json.status }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"0ad0102c-adb9-4ec9-bdf3-b1ce425b88ba\",\n      \"name\": \"Get transactions by status\",\n      \"type\": \"n8n-nodes-base.googleSheetsTool\",\n      \"position\": [\n        840,\n        -320\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"filtersUI\": {\n          \"values\": [\n            {\n              \"lookupValue\": \"={{ $fromAI(\\\"transaction_status\\\", \\\"Transaction status can be Refund, Completed or Error\\\", \\\"string\\\") }}\",\n              \"lookupColumn\": \"Status\"\n            }\n          ]\n        },\n        \"sheetName\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gid=0\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/18A4d7KYrk8-uEMbu7shoQe_UIzmbTLV1FMN43bjA7qc/edit#gid=0\",\n          \"cachedResultName\": \"Sheet1\"\n        },\n        \"documentId\": {\n          \"__rl\": true,\n          \"mode\": \"url\",\n          \"value\": \"https://docs.google.com/spreadsheets/d/18A4d7KYrk8-uEMbu7shoQe_UIzmbTLV1FMN43bjA7qc/edit?usp=sharing\"\n        },\n        \"descriptionType\": \"manual\",\n        \"toolDescription\": \"Find transactions by status\"\n      },\n      \"credentials\": {\n        \"googleSheetsOAuth2Api\": {\n          \"id\": \"YR4pbjuZM5Xs4CTD\",\n          \"name\": \"Google Sheets\"\n        }\n      },\n      \"typeVersion\": 4.5\n    },\n    {\n      \"id\": \"5b80cb08-6e19-47b2-8146-c299e709a34a\",\n      \"name\": \"Sticky Note13\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        820,\n        -540\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 300,\n        \"content\": \"## 更改所有Sheets工具中Sheets文件的URL 👇\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"ddc1351e-0ad0-480f-9742-30f2aa860d61\",\n      \"name\": \"Sticky Note14\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        500,\n        820\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 260,\n        \"height\": 100,\n        \"content\": \"## 👆 修改表格文件的网址\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"ab837a10-932f-4b14-8e2c-546077ca2c86\",\n      \"name\": \"Sticky Note10\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -780,\n        20\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 740,\n        \"height\": 580,\n        \"content\": \"# 作者\\n![所罗门](https://gravatar.com/avatar/79aa147f090807fe0f618fb47a1de932669e385bb0c84bf3a7f891ae7d174256?r=pg&d=retro&size=200)\\n### 所罗门\\n来自巴西的自由顾问，专精自动化流程与数据分析。我为精选客户服务，解决他们最具挑战性的项目。\\n\\n目前与西蒙共同运营[Scrapes社区](https://www.skool.com/scrapes/about?ref=21f10ad99f4d46ba9b8aaea8c9f58c34) 💪\\n\\n商务合作请发送邮件至 automations.solomon@gmail.com\\n或通过[Telegram](https://t.me/salomaoguilherme)联系获取更快速回复\\n\\n## 查看我的其他模板\\n### 👉 https://n8n.io/creators/solomon/\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"e58351b3-3b18-4c03-9435-27ba853d03bb\",\n      \"name\": \"Sticky Note15\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -780,\n        620\n      ],\n      \"parameters\": {\n        \"width\": 740,\n        \"height\": 180,\n        \"content\": \"# 需要帮助？\\n如需获取此工作流的帮助，请在社区论坛上创建主题：\\nhttps://community.n8n.io/c/questions/\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"Code\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Filter by status\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Calculator\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Buffer Memory\": {\n      \"ai_memory\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"ai_memory\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Records by date\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Filter by status\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Aggregate\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"OpenAI Chat Model\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get all transactions\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Google Sheets request\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Code\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get transactions by status\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When chat message received\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get transactions by product name\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When Executed by Another Workflow\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Google Sheets request\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}