{
  "url": "https://n8n.io/workflows/851-detect-web-visitors-country-by-ip-address-with-uproc/",
  "title": "Detect web visitors country by IP address with uProc",
  "author": "Miquel Colomer",
  "publish_date": "Last update 10 months ago",
  "publish_date_absolute": "2024-07-25",
  "categories": [
    {
      "name": "Sales"
    },
    {
      "name": "Marketing"
    }
  ],
  "workflow_json": "{\"id\":\"104\",\"name\":\"location_by_ip\",\"nodes\":[{\"name\":\"On clicking 'execute'\",\"type\":\"n8n-nodes-base.manualTrigger\",\"position\":[440,510],\"parameters\":{},\"typeVersion\":1},{\"name\":\"Get Location By IP\",\"type\":\"n8n-nodes-base.uproc\",\"position\":[850,510],\"parameters\":{\"ip\":\"={{$node[\\\"Create IP and Email Item\\\"].json[\\\"ip\\\"]}}\",\"tool\":\"getLocationByIp\",\"group\":\"geographic\",\"additionalOptions\":{}},\"credentials\":{\"uprocApi\":\"miquel-uproc\"},\"typeVersion\":1},{\"name\":\"User in Spain?\",\"type\":\"n8n-nodes-base.if\",\"position\":[1050,510],\"parameters\":{\"conditions\":{\"string\":[{\"value1\":\"={{$node[\\\"Get Location By IP\\\"].json[\\\"message\\\"][\\\"country_code\\\"]}}\",\"value2\":\"ES\"}]}},\"typeVersion\":1},{\"name\":\"Create IP and Email Item\",\"type\":\"n8n-nodes-base.functionItem\",\"position\":[640,510],\"parameters\":{\"functionCode\":\"item.ip = \\\"83.46.131.46\\\";\\nitem.email = \\\"miquel@uproc.io\\\";\\n\\nreturn item;\"},\"typeVersion\":1},{\"name\":\"Send English Email\",\"type\":\"n8n-nodes-base.awsSes\",\"position\":[1270,650],\"parameters\":{\"body\":\"Hi,\\n\\nThank you for your signup!\",\"subject\":\"Welcome aboard\",\"fromEmail\":\"sample@uproc.io\",\"toAddresses\":[\"={{$node[\\\"Create IP and Email Item\\\"].json[\\\"email\\\"]}}\"],\"additionalFields\":{}},\"credentials\":{\"aws\":\"ses\"},\"typeVersion\":1},{\"name\":\"Send Spanish Email\",\"type\":\"n8n-nodes-base.awsSes\",\"position\":[1270,420],\"parameters\":{\"body\":\"Hola,\\n\\n¡Gracias por registrarte!\",\"subject\":\"Bienvenido a bordo\",\"fromEmail\":\"sample@uproc.io\",\"toAddresses\":[\"={{$node[\\\"Create IP and Email Item\\\"].json[\\\"email\\\"]}}\"],\"additionalFields\":{}},\"credentials\":{\"aws\":\"ses\"},\"typeVersion\":1}],\"active\":false,\"settings\":{},\"connections\":{\"User in Spain?\":{\"main\":[[{\"node\":\"Send Spanish Email\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Send English Email\",\"type\":\"main\",\"index\":0}]]},\"Get Location By IP\":{\"main\":[[{\"node\":\"User in Spain?\",\"type\":\"main\",\"index\":0}]]},\"On clicking 'execute'\":{\"main\":[[{\"node\":\"Create IP and Email Item\",\"type\":\"main\",\"index\":0}]]},\"Create IP and Email Item\":{\"main\":[[{\"node\":\"Get Location By IP\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "Do you want to know where a web visitor lives?\n\nThis workflow enriches any lead by IP address using the [uProc.io](http://uProc.io) [**Location By IP address tool**](https://app.uproc.io/#/tools/processor/get/location/by-ip) and sends an email in Spanish or English depending on the detected web visitor country.\n\nYou need to add your credentials (Email and API Key - real -) located at [**Integration section**](https://app.uproc.io/#/settings/integration) to n8n.\n\nNode \"Create IP and Email Item\" can be replaced by any other supported service with IP and Email values, like Mailchimp, Calendly, or MySQL.\n\nThe \"uProc\" node returns the location of the provided IP address.\n\n\"If\" node checks if the web visitor country code belongs to Spain (ES Isocode). If positive, we use the Spanish language in our emails. Otherwise, we will use the English language in our communications.\n\nDepending on the detected country code, we use the Amazon SES node to send the customized email adapted to the right language.\n",
  "crawled_at": "2025-05-25T18:57:38.380689",
  "readme_zh": "您想知道网站访客来自哪里吗？\n\n本工作流通过[uProc.io](http://uProc.io)的[**IP定位工具**](https://app.uproc.io/#/tools/processor/get/location/by-ip)对任意潜在客户进行IP地址数据增强，并根据检测到的访客国家自动发送西班牙语或英语邮件。\n\n您需要在n8n平台配置位于[**集成版块**](https://app.uproc.io/#/settings/integration)的真实凭证（邮箱和API密钥）。\n\n\"创建IP和邮箱条目\"节点可替换为其他支持IP和邮箱数据的服务，如Mailchimp、Calendly或MySQL。\n\n\"uProc\"节点将返回所提供IP地址的地理位置信息。\n\n\"条件判断\"节点会检测访客国家代码是否属于西班牙（ES代码）。若匹配，则采用西班牙语邮件模板；反之则使用英语进行沟通。\n\n根据识别的国家代码，系统通过Amazon SES节点发送适配对应语言的定制化邮件。",
  "title_zh": "使用uProc通过IP地址检测网站访问者的国家",
  "publish_date_zh": "最后更新于10个月前",
  "workflow_json_zh": "{\"id\":\"104\",\"name\":\"location_by_ip\",\"nodes\":[{\"name\":\"On clicking 'execute'\",\"type\":\"n8n-nodes-base.manualTrigger\",\"position\":[440,510],\"parameters\":{},\"typeVersion\":1},{\"name\":\"Get Location By IP\",\"type\":\"n8n-nodes-base.uproc\",\"position\":[850,510],\"parameters\":{\"ip\":\"={{$node[\\\"Create IP and Email Item\\\"].json[\\\"ip\\\"]}}\",\"tool\":\"getLocationByIp\",\"group\":\"geographic\",\"additionalOptions\":{}},\"credentials\":{\"uprocApi\":\"miquel-uproc\"},\"typeVersion\":1},{\"name\":\"User in Spain?\",\"type\":\"n8n-nodes-base.if\",\"position\":[1050,510],\"parameters\":{\"conditions\":{\"string\":[{\"value1\":\"={{$node[\\\"Get Location By IP\\\"].json[\\\"message\\\"][\\\"country_code\\\"]}}\",\"value2\":\"ES\"}]}},\"typeVersion\":1},{\"name\":\"Create IP and Email Item\",\"type\":\"n8n-nodes-base.functionItem\",\"position\":[640,510],\"parameters\":{\"functionCode\":\"item.ip = \\\"83.46.131.46\\\";\\nitem.email = \\\"miquel@uproc.io\\\";\\n\\nreturn item;\"},\"typeVersion\":1},{\"name\":\"Send English Email\",\"type\":\"n8n-nodes-base.awsSes\",\"position\":[1270,650],\"parameters\":{\"body\":\"Hi,\\n\\nThank you for your signup!\",\"subject\":\"Welcome aboard\",\"fromEmail\":\"sample@uproc.io\",\"toAddresses\":[\"={{$node[\\\"Create IP and Email Item\\\"].json[\\\"email\\\"]}}\"],\"additionalFields\":{}},\"credentials\":{\"aws\":\"ses\"},\"typeVersion\":1},{\"name\":\"Send Spanish Email\",\"type\":\"n8n-nodes-base.awsSes\",\"position\":[1270,420],\"parameters\":{\"body\":\"Hola,\\n\\n¡Gracias por registrarte!\",\"subject\":\"Bienvenido a bordo\",\"fromEmail\":\"sample@uproc.io\",\"toAddresses\":[\"={{$node[\\\"Create IP and Email Item\\\"].json[\\\"email\\\"]}}\"],\"additionalFields\":{}},\"credentials\":{\"aws\":\"ses\"},\"typeVersion\":1}],\"active\":false,\"settings\":{},\"connections\":{\"User in Spain?\":{\"main\":[[{\"node\":\"Send Spanish Email\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Send English Email\",\"type\":\"main\",\"index\":0}]]},\"Get Location By IP\":{\"main\":[[{\"node\":\"User in Spain?\",\"type\":\"main\",\"index\":0}]]},\"On clicking 'execute'\":{\"main\":[[{\"node\":\"Create IP and Email Item\",\"type\":\"main\",\"index\":0}]]},\"Create IP and Email Item\":{\"main\":[[{\"node\":\"Get Location By IP\",\"type\":\"main\",\"index\":0}]]}}}"
}