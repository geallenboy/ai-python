{
  "url": "https://n8n.io/workflows/3892-postgresql-conversational-agent-with-claude-and-deepseek-multi-kpi-secure/",
  "title": "PostgreSQL Conversational Agent with Claude & DeepSeek (Multi-KPI, Secure)",
  "author": "hippolyte-hu",
  "publish_date": "Last update 19 days ago",
  "publish_date_absolute": "2025-05-07",
  "categories": [
    {
      "name": "Support"
    },
    {
      "name": "AI"
    },
    {
      "name": "IT Ops"
    }
  ],
  "workflow_json": "{\"id\":\"Wsw6HdSAFk8y7jxh\",\"meta\":{\"instanceId\":\"1fc85153dfc4ea22a8172f0d7347fa9f591f71e2064dc331f7bdc1d7ee422e7a\",\"templateId\":\"3631\",\"templateCredsSetupCompleted\":true},\"name\":\"Build your own PostgreSQL MCP server(No visuals)\",\"tags\":[],\"nodes\":[{\"id\":\"735a96e6-a254-4c0c-8268-88c33db886e8\",\"name\":\"GetTableSchema\",\"type\":\"n8n-nodes-base.postgresTool\",\"position\":[-40,920],\"parameters\":{},\"typeVersion\":2.6},{\"id\":\"aba773b1-8fd0-4b5a-953f-c2de44029b68\",\"name\":\"ListTables\",\"type\":\"n8n-nodes-base.postgresTool\",\"position\":[60,1020],\"parameters\":{},\"typeVersion\":2.6},{\"id\":\"217bac36-8448-4f91-b53f-2ffb8dcb13c1\",\"name\":\"When Executed by Another Workflow\",\"type\":\"n8n-nodes-base.executeWorkflowTrigger\",\"position\":[760,880],\"parameters\":{},\"typeVersion\":1.1},{\"id\":\"8752c39a-5bb6-4696-a591-cb7a4f649586\",\"name\":\"CreateTableRecords\",\"type\":\"@n8n/n8n-nodes-langchain.toolWorkflow\",\"position\":[180,1020],\"parameters\":{},\"typeVersion\":2.1},{\"id\":\"448c74a8-8051-4aeb-be50-98f61b4c1476\",\"name\":\"ReadTableRecord\",\"type\":\"n8n-nodes-base.postgres\",\"position\":[1260,720],\"parameters\":{},\"typeVersion\":2.6,\"alwaysOutputData\":true},{\"id\":\"a51c89a7-3c6e-4c71-83f7-c17dea2fac6a\",\"name\":\"Operation\",\"type\":\"n8n-nodes-base.switch\",\"position\":[920,880],\"parameters\":{},\"typeVersion\":3.2},{\"id\":\"0ee5c0cf-cb53-41a7-a81e-1eca93648eee\",\"name\":\"UpdateTableRecord\",\"type\":\"n8n-nodes-base.postgres\",\"position\":[1260,1040],\"parameters\":{},\"typeVersion\":2.6},{\"id\":\"2f0fafb5-e369-4550-99df-04983c4f0080\",\"name\":\"UpdateTableRecords\",\"type\":\"@n8n/n8n-nodes-langchain.toolWorkflow\",\"position\":[300,1040],\"parameters\":{},\"typeVersion\":2.1},{\"id\":\"40deab57-d6f3-4f40-8368-ae0b5c0830e7\",\"name\":\"CreateTableRecord\",\"type\":\"n8n-nodes-base.postgres\",\"position\":[1260,880],\"parameters\":{},\"typeVersion\":2.6},{\"id\":\"e6d70398-2fda-4ad4-9fa9-9277b0e8037f\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-120,500],\"parameters\":{\"content\":\"\"},\"typeVersion\":1},{\"id\":\"13154e61-77a4-40bb-b2a1-49c43af5e8c8\",\"name\":\"PostgreSQL MCP Server\",\"type\":\"@n8n/n8n-nodes-langchain.mcpTrigger\",\"position\":[120,580],\"webhookId\":\"9007e426-56a9-489f-a131-28b63d76ddfa\",\"parameters\":{},\"typeVersion\":1},{\"id\":\"62e57740-0e1c-46ce-8a12-d963dfe47d65\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[720,500],\"parameters\":{\"content\":\"\"},\"typeVersion\":1},{\"id\":\"87fba2e8-96d1-48e1-bd2e-fefbf6d1ba74\",\"name\":\"When chat message received\",\"type\":\"@n8n/n8n-nodes-langchain.chatTrigger\",\"position\":[300,1440],\"webhookId\":\"5c88c23d-5544-46f9-867c-4ea03b41ed62\",\"parameters\":{},\"typeVersion\":1.1},{\"id\":\"19d4bfb8-ab2f-447f-8d58-4bfe2b7d182c\",\"name\":\"AI Agent\",\"type\":\"@n8n/n8n-nodes-langchain.agent\",\"position\":[540,1400],\"parameters\":{},\"typeVersion\":1.8},{\"id\":\"87781b4a-1c07-4447-b28f-bc9010dfe672\",\"name\":\"Simple Memory\",\"type\":\"@n8n/n8n-nodes-langchain.memoryBufferWindow\",\"position\":[540,1760],\"parameters\":{},\"typeVersion\":1.3},{\"id\":\"3ff30556-c402-47d7-b0d4-200c61006cb9\",\"name\":\"MCP Client\",\"type\":\"@n8n/n8n-nodes-langchain.mcpClientTool\",\"position\":[700,1760],\"parameters\":{},\"typeVersion\":1},{\"id\":\"a43e3dc5-adbf-4ae5-b46a-d04654cebbf0\",\"name\":\"Anthropic Chat Model\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatAnthropic\",\"position\":[360,1740],\"parameters\":{},\"typeVersion\":1.3},{\"id\":\"b683d331-989f-4b09-8158-df302fe12cab\",\"name\":\"Think\",\"type\":\"@n8n/n8n-nodes-langchain.toolThink\",\"position\":[1000,1720],\"parameters\":{},\"typeVersion\":1},{\"id\":\"cf864de0-57a5-4537-b42c-5ad12da49d01\",\"name\":\"get table details\",\"type\":\"@n8n/n8n-nodes-langchain.toolWorkflow\",\"position\":[540,860],\"parameters\":{},\"typeVersion\":2.1},{\"id\":\"01300da8-259d-43ca-9185-2f16cf7e2913\",\"name\":\"ReadTableRows\",\"type\":\"@n8n/n8n-nodes-langchain.toolWorkflow\",\"position\":[480,1020],\"parameters\":{},\"typeVersion\":2.1},{\"id\":\"9bdb7802-23ad-45d2-a35e-1de546aa8903\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-80,1320],\"parameters\":{\"content\":\"\"},\"typeVersion\":1}],\"active\":true,\"pinData\":{},\"settings\":{},\"versionId\":\"ab18f1aa-d451-4aa8-b682-e8d3ab6697b7\",\"connections\":{\"Think\":{\"ai_tool\":[[{\"node\":\"AI Agent\",\"type\":\"ai_tool\",\"index\":0}]]},\"AI Agent\":{\"main\":[[]]},\"Operation\":{\"main\":[[{\"node\":\"ReadTableRecord\",\"type\":\"main\",\"index\":0}],[{\"node\":\"CreateTableRecord\",\"type\":\"main\",\"index\":0}],[{\"node\":\"UpdateTableRecord\",\"type\":\"main\",\"index\":0}]]},\"ListTables\":{\"ai_tool\":[[{\"node\":\"PostgreSQL MCP Server\",\"type\":\"ai_tool\",\"index\":0}]]},\"MCP Client\":{\"ai_tool\":[[{\"node\":\"AI Agent\",\"type\":\"ai_tool\",\"index\":0}]]},\"ReadTableRows\":{\"ai_tool\":[[{\"node\":\"PostgreSQL MCP Server\",\"type\":\"ai_tool\",\"index\":0}]]},\"Simple Memory\":{\"ai_memory\":[[{\"node\":\"AI Agent\",\"type\":\"ai_memory\",\"index\":0}]]},\"GetTableSchema\":{\"ai_tool\":[[{\"node\":\"PostgreSQL MCP Server\",\"type\":\"ai_tool\",\"index\":0}]]},\"ReadTableRecord\":{\"main\":[[]]},\"get table details\":{\"ai_tool\":[[{\"node\":\"PostgreSQL MCP Server\",\"type\":\"ai_tool\",\"index\":0}]]},\"CreateTableRecords\":{\"ai_tool\":[[{\"node\":\"PostgreSQL MCP Server\",\"type\":\"ai_tool\",\"index\":0}]]},\"UpdateTableRecords\":{\"ai_tool\":[[{\"node\":\"PostgreSQL MCP Server\",\"type\":\"ai_tool\",\"index\":0}]]},\"Anthropic Chat Model\":{\"ai_languageModel\":[[{\"node\":\"AI Agent\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"When chat message received\":{\"main\":[[{\"node\":\"AI Agent\",\"type\":\"main\",\"index\":0}]]},\"When Executed by Another Workflow\":{\"main\":[[{\"node\":\"Operation\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "# 🧠 Conversational PostgreSQL Agent\n\nEnable AI-driven conversations with your PostgreSQL database using a secure and visual-free agent powered by n8n’s Model Context Protocol (MCP). This template allows users to ask multiple KPIs in a single message, returning consolidated insights — more efficient than the original Conversing with Data template.\n\n* * *\n\n## 🚀 Why This Template\n\nUnlike the Conversing with Data workflow, which handles one KPI per message, this version:\n\n  * ✅ Supports multi-KPI questions\n  * ✅ Returns structured, human-readable reports\n  * ✅ Uses fewer AI calls, making it faster and cheaper\n  * ✅ Avoids raw SQL execution for enhanced security\n\n\n\n💲 **Estimated cost per full multi-request run: ~$0.01**\n\nThis template is optimized for efficiency. Each message can return 2–4 KPIs (You can change the MaxIteration of the Agent to make it more, it is currently set up at 30 iterations) using a single Claude 3.5 Haiku session and DeepSeek-based SQL generation — balancing speed, reasoning, and affordability.\n\n* * *\n\n## 💬 Sample Use Case\n\n**User:**  \n“Can you show product performance, revenue trends, and top 5 customers?”\n\n**Agent:**\n\n  * Uses `ListTables` and `GetTableSchema`\n  * Generates three SQL queries using `get_query_and_data`\n  * Returns:\n\n\n\n📊 **Product Performance**\n\n  1. High-Waist Jeans — 10 units, $1,027 revenue\n  2. Denim Jacket — 10 units, $783 revenue\n\n\n\n📈 **Sales Trends**\n\n  * Peak Month: January 2024 — 32 units, $2,378\n  * Average Monthly Units: 10–16\n\n\n\n🧍 **Customer Insights**\n\n  1. Bob Brown — $1,520 spent\n  2. Diana Wilson — $925 spent\n\n\n\nAll from one natural prompt.\n\n* * *\n\n## 🖼️ Real-World Interaction Screenshot\n\n![novisual_sql.png](https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/novisual_sql_cff3d9a8b4.png)\n\n* * *\n\n## 🧰 What’s Inside\n\nNode | Purpose  \n---|---  \nMCP Server Trigger | Receives user queries via `/mcp/...`  \nAI Agent + Memory | Understands and plans multi-step queries  \nThink Tool | Breaks down the user’s question into structured goals  \nget_query_and_data | Generates SQL securely from natural language  \nListTables, GetSchema | AI tools to explore DB safely  \nRead/Insert/Update Tools | Execute structured operations (never raw SQL)  \ncheckdatabase Subflow | Validates SQL, formats response as clean text  \n  \n* * *\n\n## 🤖 Model Selection Recommendations\n\nThis template uses two types of models, selected for cost-performance balance and role alignment:\n\n**1\\. Claude 3.5 Haiku (Anthropic) – for the MCP Agent**  \nThe main conversational agent uses Claude 3.5 Haiku, ideal for MCP because it was built by Anthropic — the creators of the MCP standard. It’s fast, affordable, and performs excellently in tool-calling and reasoning tasks.\n\n**2\\. DeepSeek – for the SQL subworkflow**  \nThe subworkflow that turns natural language into SQL uses DeepSeek. It’s one of the most affordable and performant models available today for structured outputs like SQL, making it a perfect fit for utility logic.\n\n✅ This setup provides top-tier reasoning + low-cost execution.\n\n* * *\n\n## 🔐 Security Benefits\n\n  * No raw SQL accepted from the user or LLM\n  * All queries are parameterized\n  * Schema is dynamically retrieved\n  * Final output is clean, safe, and human-readable\n\n\n\n* * *\n\n## 🧪 Try a Prompt\n\n> “Show me the top 5 products by units sold and revenue, total monthly sales trend, and top 5 customers by spending.”\n\nIn one message, the agent will:\n\n  * Generate and run multiple queries\n  * Use the schema to validate logic\n  * Return a single, comprehensive answer\n\n\n\n* * *\n\n## 🛠 How to Use\n\n  1. 📥 Upload both workflow files into your n8n instance: \n     * `Build_your_own_PostgreSQL_MCP_server_No_visuals_.json`\n     * `checkdatabase.json`\n  2. 🔐 Set up PostgreSQL credentials (e.g. “Postgres account 3”)\n  3. 🧠 Confirm model setup: \n     * Claude 3.5 Haiku for the main agent\n     * DeepSeek for the subflow\n  4. 🌐 Use the `/mcp/...` URL from the MCP Server Trigger to connect your frontend or chatbot\n  5. 🗣 Ask questions naturally — the agent takes care of planning, querying, and formatting\n\n\n\n* * *\n\n## 🔄 Customization Ideas\n\n  * Swap Claude or DeepSeek for OpenAI, Mistral, Gemini, etc.\n  * Export insights to Slack, Notion, or Google Sheets\n  * Add Switch nodes to control access to specific tables\n  * Integrate with any front-end app, internal dashboard, or bot\n\n\n\n* * *\n\n## 📦 What's Included\n\n  * `Build_your_own_PostgreSQL_MCP_server_No_visuals_.json` – MCP agent logic\n  * `checkdatabase.json` – SQL generation and formatting utility workflow\n\n\n\n📝 These must be uploaded into your n8n workspace for the template to function.\n\n* * *\n\n## 📊 Comparison: Conversing with Data vs This Workflow\n\nFeature | Conversing with Data | This Workflow  \n---|---|---  \nHandles multi-KPI questions | ❌ No | ✅ Yes  \nSecure query execution | ✅ Yes | ✅ Yes  \nStructured response | ⚠️ JSON / raw | ✅ Clean natural language  \nCost-efficiency | ⚠️ More calls | ✅ Optimized with fewer calls  \nEndpoint support | ❌ Manual interaction | ✅ MCP-ready (`/mcp/...`)  \n  \n🔗 Prefer something more lightweight and cost-sensitive?  \nTry the original Conversing with Data template (single KPI + chart support):  \n[Conversing with Data: Transforming Text into SQL Queries and Visual Curves](https://n8n.io/workflows/3497-conversing-with-data-transforming-text-into-sql-queries-and-visual-curves)\n\n> I used this version for over 3 months and only spent **$0.80 total** , making it a great entry point if you're just getting started or on a limited budget.\n\n* * *\n\n## 📚 More from the Same Creator\n\nLooking for a different kind of AI reporting workflow?\n\nExplore:  \n**Customer Feedback Analysis with AI, QuickChart & HTML Report Generator**  \n→ Automatically analyze customer input and generate full reports with insights and charts.  \n[Customer Feedback Analysis with AI, QuickChart & HTML Report Generator](https://n8n.io/workflows/3642-customer-feedback-analysis-with-ai-quickchart-and-html-report-generator)\n",
  "crawled_at": "2025-05-26T05:54:38.111885",
  "readme_zh": "# 🧠 对话式PostgreSQL智能代理\n\n通过n8n的模型上下文协议(MCP)驱动，启用与PostgreSQL数据库的AI对话交互。该模板支持单条消息查询多个关键指标，返回整合分析结果——比原版\"数据对话\"模板更高效。\n\n* * *\n\n## 🚀 模板优势\n\n与单次仅处理一个KPI的原版工作流不同，本版本：\n  * ✅ 支持多KPI复合问题\n  * ✅ 返回结构化可读报告\n  * ✅ 减少AI调用次数，更快更经济\n  * ✅ 禁止原始SQL执行，安全性更强\n\n💲 **每次完整多请求运行成本约：0.01美元**\n\n本模板经过高效优化。单条消息可返回2-4个KPI（可通过修改Agent的MaxIteration参数提升，当前设置为30次迭代），仅需调用一次Claude 3.5 Haiku会话和基于DeepSeek的SQL生成——完美平衡速度、推理能力和成本。\n\n* * *\n\n## 💬 使用案例演示\n\n**用户提问：**  \n\"请展示产品表现、收入趋势和Top5客户\"\n\n**代理响应：**\n  * 调用`ListTables`和`GetTableSchema`\n  * 通过`get_query_and_data`生成三条SQL查询\n  * 返回：\n\n📊 **产品表现**\n  1. 高腰牛仔裤 — 10件，1027美元销售额\n  2. 牛仔夹克 — 10件，783美元销售额\n\n📈 **销售趋势**\n  * 峰值月份：2024年1月 — 32件，2378美元\n  * 月均销量：10-16件\n\n🧍 **客户洞察**\n  1. 鲍勃·布朗 — 消费1520美元\n  2. 戴安娜·威尔逊 — 消费925美元\n\n全部来自一次自然语言提问。\n\n* * *\n\n## 🖼️ 实际交互截图\n\n![novisual_sql.png](https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/novisual_sql_cff3d9a8b4.png)\n\n* * *\n\n## 🧰 核心组件\n\n节点 | 功能  \n---|---  \nMCP服务触发器 | 通过`/mcp/...`接收用户查询  \nAI代理+记忆模块 | 理解并规划多步骤查询  \n思维工具 | 将用户问题分解为结构化目标  \nget_query_and_data | 从自然语言安全生成SQL  \nListTables/GetSchema | 安全探索数据库的AI工具  \n读/写/改工具 | 执行结构化操作(非原始SQL)  \ncheckdatabase子流程 | 验证SQL，返回整洁文本  \n\n* * *\n\n## 🤖 模型选型建议\n\n本模板采用两种模型，兼顾成本效益与角色匹配：\n\n**1. Claude 3.5 Haiku(Anthropic) — MCP主代理**  \n作为核心对话代理，采用MCP标准制定者Anthropic开发的Claude 3.5 Haiku，在工具调用和推理任务中表现卓越，兼具速度与经济性。\n\n**2. DeepSeek — SQL生成子流程**  \n自然语言转SQL的子流程采用当前性价比最优的DeepSeek模型，特别适合SQL等结构化输出场景。\n\n✅ 该组合提供顶级推理能力+低成本执行方案。\n\n* * *\n\n## 🔐 安全特性\n  * 拒绝用户或LLM输入的原始SQL\n  * 全量参数化查询\n  * 动态获取数据架构\n  * 最终输出经过净化处理\n\n* * *\n\n## � 测试提问示例\n\n> \"显示销量前5的产品及其收入、月度销售总额趋势、消费额前5的客户\"\n\n单次交互中，代理将：\n  * 生成并执行多个查询\n  * 利用架构验证逻辑\n  * 返回整合分析报告\n\n* * *\n\n## 🛠 使用指南\n\n1. 📥 上传工作流文件至n8n实例：\n   * `Build_your_own_PostgreSQL_MCP_server_No_visuals_.json`\n   * `checkdatabase.json`\n2. 🔐 配置PostgreSQL凭证(如\"Postgres account 3\")\n3. 🧠 确认模型配置：\n   * 主代理使用Claude 3.5 Haiku\n   * 子流程使用DeepSeek\n4. 🌐 通过MCP触发器获取`/mcp/...`对接前端/聊天机器人\n5. 🗣 自然提问——代理自动处理查询规划与结果格式化\n\n* * *\n\n## 🔄 定制建议\n\n  * 可替换为OpenAI/Mistral/Gemini等模型\n  * 导出分析至Slack/Notion/Google Sheets\n  * 添加Switch节点控制表访问权限\n  * 对接任意前端应用/内部看板/机器人\n\n* * *\n\n## 📦 包含文件\n\n  * `Build_your_own_PostgreSQL_MCP_server_No_visuals_.json` — MCP代理逻辑\n  * `checkdatabase.json` — SQL生成与格式化工具流\n\n📝 需同时上传至n8n工作区使用。\n\n* * *\n\n## 📊 功能对比：数据对话 vs 本工作流\n\n功能 | 数据对话 | 本工作流  \n---|---|---  \n多KPI支持 | ❌ 否 | ✅ 是  \n安全查询 | ✅ 是 | ✅ 是  \n响应格式 | ⚠️ JSON/原始数据 | ✅ 自然语言  \n成本效益 | ⚠️ 高频调用 | ✅ 优化调用  \n端点支持 | ❌ 手动交互 | ✅ 支持MCP(`/mcp/...`)  \n\n🔗 需要更轻量级方案？  \n尝试原版单KPI+图表支持模板：  \n[数据对话：将文本转换为SQL查询与可视化曲线](https://n8n.io/workflows/3497-conversing-with-data-transforming-text-into-sql-queries-and-visual-curves)\n\n> 实测使用三个月总成本仅0.80美元，是预算有限场景的理想选择。\n\n* * *\n\n## 📚 同作者推荐\n\n需要其他AI分析工作流？\n\n探索：  \n**客户反馈AI分析+QuickChart&HTML报告生成器**  \n→ 自动分析客户意见并生成含图表洞见的完整报告  \n[客户反馈AI分析+QuickChart&HTML报告生成器](https://n8n.io/workflows/3642-customer-feedback-analysis-with-ai-quickchart-and-html-report-generator)",
  "title_zh": "PostgreSQL 对话代理集成 Claude 与 DeepSeek（多指标安全版）",
  "publish_date_zh": "上次更新于12天前",
  "workflow_json_zh": "{\"id\":\"Wsw6HdSAFk8y7jxh\",\"meta\":{\"instanceId\":\"1fc85153dfc4ea22a8172f0d7347fa9f591f71e2064dc331f7bdc1d7ee422e7a\",\"templateId\":\"3631\",\"templateCredsSetupCompleted\":true},\"name\":\"Build your own PostgreSQL MCP server(No visuals)\",\"tags\":[],\"nodes\":[{\"id\":\"735a96e6-a254-4c0c-8268-88c33db886e8\",\"name\":\"GetTableSchema\",\"type\":\"n8n-nodes-base.postgresTool\",\"position\":[-40,920],\"parameters\":{},\"typeVersion\":2.6},{\"id\":\"aba773b1-8fd0-4b5a-953f-c2de44029b68\",\"name\":\"ListTables\",\"type\":\"n8n-nodes-base.postgresTool\",\"position\":[60,1020],\"parameters\":{},\"typeVersion\":2.6},{\"id\":\"217bac36-8448-4f91-b53f-2ffb8dcb13c1\",\"name\":\"When Executed by Another Workflow\",\"type\":\"n8n-nodes-base.executeWorkflowTrigger\",\"position\":[760,880],\"parameters\":{},\"typeVersion\":1.1},{\"id\":\"8752c39a-5bb6-4696-a591-cb7a4f649586\",\"name\":\"CreateTableRecords\",\"type\":\"@n8n/n8n-nodes-langchain.toolWorkflow\",\"position\":[180,1020],\"parameters\":{},\"typeVersion\":2.1},{\"id\":\"448c74a8-8051-4aeb-be50-98f61b4c1476\",\"name\":\"ReadTableRecord\",\"type\":\"n8n-nodes-base.postgres\",\"position\":[1260,720],\"parameters\":{},\"typeVersion\":2.6,\"alwaysOutputData\":true},{\"id\":\"a51c89a7-3c6e-4c71-83f7-c17dea2fac6a\",\"name\":\"Operation\",\"type\":\"n8n-nodes-base.switch\",\"position\":[920,880],\"parameters\":{},\"typeVersion\":3.2},{\"id\":\"0ee5c0cf-cb53-41a7-a81e-1eca93648eee\",\"name\":\"UpdateTableRecord\",\"type\":\"n8n-nodes-base.postgres\",\"position\":[1260,1040],\"parameters\":{},\"typeVersion\":2.6},{\"id\":\"2f0fafb5-e369-4550-99df-04983c4f0080\",\"name\":\"UpdateTableRecords\",\"type\":\"@n8n/n8n-nodes-langchain.toolWorkflow\",\"position\":[300,1040],\"parameters\":{},\"typeVersion\":2.1},{\"id\":\"40deab57-d6f3-4f40-8368-ae0b5c0830e7\",\"name\":\"CreateTableRecord\",\"type\":\"n8n-nodes-base.postgres\",\"position\":[1260,880],\"parameters\":{},\"typeVersion\":2.6},{\"id\":\"e6d70398-2fda-4ad4-9fa9-9277b0e8037f\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-120,500],\"parameters\":{\"content\":\"\"},\"typeVersion\":1},{\"id\":\"13154e61-77a4-40bb-b2a1-49c43af5e8c8\",\"name\":\"PostgreSQL MCP Server\",\"type\":\"@n8n/n8n-nodes-langchain.mcpTrigger\",\"position\":[120,580],\"webhookId\":\"9007e426-56a9-489f-a131-28b63d76ddfa\",\"parameters\":{},\"typeVersion\":1},{\"id\":\"62e57740-0e1c-46ce-8a12-d963dfe47d65\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[720,500],\"parameters\":{\"content\":\"\"},\"typeVersion\":1},{\"id\":\"87fba2e8-96d1-48e1-bd2e-fefbf6d1ba74\",\"name\":\"When chat message received\",\"type\":\"@n8n/n8n-nodes-langchain.chatTrigger\",\"position\":[300,1440],\"webhookId\":\"5c88c23d-5544-46f9-867c-4ea03b41ed62\",\"parameters\":{},\"typeVersion\":1.1},{\"id\":\"19d4bfb8-ab2f-447f-8d58-4bfe2b7d182c\",\"name\":\"AI Agent\",\"type\":\"@n8n/n8n-nodes-langchain.agent\",\"position\":[540,1400],\"parameters\":{},\"typeVersion\":1.8},{\"id\":\"87781b4a-1c07-4447-b28f-bc9010dfe672\",\"name\":\"Simple Memory\",\"type\":\"@n8n/n8n-nodes-langchain.memoryBufferWindow\",\"position\":[540,1760],\"parameters\":{},\"typeVersion\":1.3},{\"id\":\"3ff30556-c402-47d7-b0d4-200c61006cb9\",\"name\":\"MCP Client\",\"type\":\"@n8n/n8n-nodes-langchain.mcpClientTool\",\"position\":[700,1760],\"parameters\":{},\"typeVersion\":1},{\"id\":\"a43e3dc5-adbf-4ae5-b46a-d04654cebbf0\",\"name\":\"Anthropic Chat Model\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatAnthropic\",\"position\":[360,1740],\"parameters\":{},\"typeVersion\":1.3},{\"id\":\"b683d331-989f-4b09-8158-df302fe12cab\",\"name\":\"Think\",\"type\":\"@n8n/n8n-nodes-langchain.toolThink\",\"position\":[1000,1720],\"parameters\":{},\"typeVersion\":1},{\"id\":\"cf864de0-57a5-4537-b42c-5ad12da49d01\",\"name\":\"get table details\",\"type\":\"@n8n/n8n-nodes-langchain.toolWorkflow\",\"position\":[540,860],\"parameters\":{},\"typeVersion\":2.1},{\"id\":\"01300da8-259d-43ca-9185-2f16cf7e2913\",\"name\":\"ReadTableRows\",\"type\":\"@n8n/n8n-nodes-langchain.toolWorkflow\",\"position\":[480,1020],\"parameters\":{},\"typeVersion\":2.1},{\"id\":\"9bdb7802-23ad-45d2-a35e-1de546aa8903\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-80,1320],\"parameters\":{\"content\":\"\"},\"typeVersion\":1}],\"active\":true,\"pinData\":{},\"settings\":{},\"versionId\":\"ab18f1aa-d451-4aa8-b682-e8d3ab6697b7\",\"connections\":{\"Think\":{\"ai_tool\":[[{\"node\":\"AI Agent\",\"type\":\"ai_tool\",\"index\":0}]]},\"AI Agent\":{\"main\":[[]]},\"Operation\":{\"main\":[[{\"node\":\"ReadTableRecord\",\"type\":\"main\",\"index\":0}],[{\"node\":\"CreateTableRecord\",\"type\":\"main\",\"index\":0}],[{\"node\":\"UpdateTableRecord\",\"type\":\"main\",\"index\":0}]]},\"ListTables\":{\"ai_tool\":[[{\"node\":\"PostgreSQL MCP Server\",\"type\":\"ai_tool\",\"index\":0}]]},\"MCP Client\":{\"ai_tool\":[[{\"node\":\"AI Agent\",\"type\":\"ai_tool\",\"index\":0}]]},\"ReadTableRows\":{\"ai_tool\":[[{\"node\":\"PostgreSQL MCP Server\",\"type\":\"ai_tool\",\"index\":0}]]},\"Simple Memory\":{\"ai_memory\":[[{\"node\":\"AI Agent\",\"type\":\"ai_memory\",\"index\":0}]]},\"GetTableSchema\":{\"ai_tool\":[[{\"node\":\"PostgreSQL MCP Server\",\"type\":\"ai_tool\",\"index\":0}]]},\"ReadTableRecord\":{\"main\":[[]]},\"get table details\":{\"ai_tool\":[[{\"node\":\"PostgreSQL MCP Server\",\"type\":\"ai_tool\",\"index\":0}]]},\"CreateTableRecords\":{\"ai_tool\":[[{\"node\":\"PostgreSQL MCP Server\",\"type\":\"ai_tool\",\"index\":0}]]},\"UpdateTableRecords\":{\"ai_tool\":[[{\"node\":\"PostgreSQL MCP Server\",\"type\":\"ai_tool\",\"index\":0}]]},\"Anthropic Chat Model\":{\"ai_languageModel\":[[{\"node\":\"AI Agent\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"When chat message received\":{\"main\":[[{\"node\":\"AI Agent\",\"type\":\"main\",\"index\":0}]]},\"When Executed by Another Workflow\":{\"main\":[[{\"node\":\"Operation\",\"type\":\"main\",\"index\":0}]]}}}"
}