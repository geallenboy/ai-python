{
  "url": "https://n8n.io/workflows/3666-real-estate-lead-generation-with-batchdata-skip-tracing-and-crm-integration/",
  "title": "Real Estate Lead Generation with BatchData Skip Tracing & CRM Integration",
  "author": "Preston Zeller",
  "publish_date": "Last update a month ago",
  "publish_date_absolute": "",
  "categories": [
    {
      "name": "Sales"
    },
    {
      "name": "AI"
    }
  ],
  "workflow_json": "{\"id\":\"RGVS0tHJV7Wh6aX4\",\"meta\":{\"instanceId\":\"bb9853d4d7d87207561a30bc6fe4ece20b295264f7d27d4a62215de2f3846a56\"},\"name\":\"Property Lead Contact Enrichment from CRM\",\"tags\":[],\"nodes\":[{\"id\":\"518b14de-23b9-4821-930c-8fa55eb4cfb4\",\"name\":\"When clicking \\\"Execute Workflow\\\"\",\"type\":\"n8n-nodes-base.manualTrigger\",\"position\":[-340,280],\"parameters\":{},\"typeVersion\":1},{\"id\":\"939df2a3-f6dd-40c9-a01a-460923a332a6\",\"name\":\"Daily Schedule\",\"type\":\"n8n-nodes-base.scheduleTrigger\",\"position\":[-340,100],\"parameters\":{\"rule\":{\"interval\":[{}]}},\"typeVersion\":1.1},{\"id\":\"3228372f-ac40-4898-8bf5-09a4f37fde85\",\"name\":\"Search Properties API\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[320,260],\"parameters\":{\"url\":\"https://api.batchdata.com/api/v1/properties/search\",\"method\":\"POST\",\"options\":{},\"authentication\":\"genericCredentialType\",\"genericAuthType\":\"httpHeaderAuth\"},\"typeVersion\":4.1},{\"id\":\"0aa1fb95-66c8-4b61-81f5-04b37e5c1185\",\"name\":\"Configure Search Parameters\",\"type\":\"n8n-nodes-base.set\",\"position\":[40,240],\"parameters\":{\"values\":{\"string\":[{\"name\":\"search_parameters\",\"value\":\"={ \\\"location\\\": { \\\"city\\\": \\\"Austin\\\", \\\"state\\\": \\\"TX\\\" }, \\\"propertyType\\\": \\\"single_family\\\", \\\"value\\\": { \\\"min\\\": 200000, \\\"max\\\": 500000 }, \\\"status\\\": \\\"distressed\\\", \\\"equity\\\": { \\\"min\\\": 30 }, \\\"limit\\\": 50 }\"}]},\"options\":{}},\"typeVersion\":2},{\"id\":\"052b357b-a374-4e0c-ab98-67e79ed8cf2b\",\"name\":\"Filter Property Results\",\"type\":\"n8n-nodes-base.code\",\"position\":[540,260],\"parameters\":{\"jsCode\":\"// Process batch property results and filter according to criteria\\nconst results = $input.all()[0].json.results || [];\\n\\n// Filter to find matching properties\\nconst filteredProperties = results.filter(property => {\\n  // Example filtering criteria - customize as needed\\n  // Only include properties where:\\n  // 1. Owner doesn't live at the property (absentee)\\n  // 2. Property has been owned for 5+ years\\n  // 3. No sales in the last 3 years\\n  \\n  const isAbsentee = property.owner_occupied === false;\\n  \\n  // Calculate years of ownership if purchase date exists\\n  let yearsOwned = 0;\\n  if (property.last_sale_date) {\\n    const purchaseDate = new Date(property.last_sale_date);\\n    const currentDate = new Date();\\n    yearsOwned = currentDate.getFullYear() - purchaseDate.getFullYear();\\n  }\\n  \\n  // Check if no recent sales (last 3 years)\\n  let noRecentSales = true;\\n  if (property.last_sale_date) {\\n    const lastSale = new Date(property.last_sale_date);\\n    const threeYearsAgo = new Date();\\n    threeYearsAgo.setFullYear(threeYearsAgo.getFullYear() - 3);\\n    noRecentSales = lastSale < threeYearsAgo;\\n  }\\n  \\n  return isAbsentee && yearsOwned >= 5 && noRecentSales;\\n});\\n\\n// Add relevant score to each property\\nconst scoredProperties = filteredProperties.map(property => {\\n  // Create a simple scoring system from 0-100\\n  // This helps prioritize the best leads\\n  let score = 50; // Base score\\n  \\n  // Increase score for properties with more equity\\n  if (property.equity_percentage) {\\n    score += Math.min(property.equity_percentage / 2, 25);\\n  }\\n  \\n  // Increase score for longer ownership\\n  if (property.last_sale_date) {\\n    const purchaseDate = new Date(property.last_sale_date);\\n    const currentDate = new Date();\\n    const yearsOwned = currentDate.getFullYear() - purchaseDate.getFullYear();\\n    score += Math.min(yearsOwned, 15);\\n  }\\n  \\n  // Increase score for tax delinquency\\n  if (property.tax_delinquent) {\\n    score += 10;\\n  }\\n  \\n  return { ...property, lead_score: Math.round(score) };\\n});\\n\\n// Sort by score descending\\nscoredProperties.sort((a, b) => b.lead_score - a.lead_score);\\n\\n// Return the filtered and scored properties\\nreturn scoredProperties.map(property => {\\n  return {\\n    json: property\\n  };\\n});\"},\"typeVersion\":2},{\"id\":\"2c183cc1-06a1-4528-82c3-df2585df58eb\",\"name\":\"Get Owner Contact Info\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[760,260],\"parameters\":{\"url\":\"https://api.batchdata.com/api/v1/property/skip-trace\",\"method\":\"POST\",\"options\":{},\"authentication\":\"genericCredentialType\",\"genericAuthType\":\"httpHeaderAuth\"},\"typeVersion\":4.1},{\"id\":\"2fe0aef9-30d2-4c30-9029-571f3b4c8ca9\",\"name\":\"Format Lead Data\",\"type\":\"n8n-nodes-base.code\",\"position\":[960,260],\"parameters\":{\"jsCode\":\"// Process and format the property data with owner contact info\\nreturn $input.all().map(item => {\\n  const property = item.json;\\n  const skipTraceData = property.skip_trace_data || {};\\n  const ownerInfo = property.owner_info || {};\\n  \\n  return {\\n    json: {\\n      // Property Information\\n      property_id: property.property_id,\\n      address: property.address,\\n      city: property.city,\\n      state: property.state,\\n      zip: property.zip,\\n      property_type: property.property_type,\\n      beds: property.beds,\\n      baths: property.baths,\\n      sqft: property.building_sqft,\\n      lot_size: property.lot_size,\\n      year_built: property.year_built,\\n      last_sale_date: property.last_sale_date,\\n      last_sale_price: property.last_sale_price,\\n      estimated_value: property.estimated_value,\\n      estimated_equity: property.estimated_equity,\\n      equity_percentage: property.equity_percentage,\\n      lead_score: property.lead_score,\\n      \\n      // Owner Information\\n      owner_name: ownerInfo.full_name || `${ownerInfo.first_name || ''} ${ownerInfo.last_name || ''}`.trim(),\\n      owner_mailing_address: ownerInfo.mailing_address,\\n      owner_mailing_city: ownerInfo.mailing_city,\\n      owner_mailing_state: ownerInfo.mailing_state,\\n      owner_mailing_zip: ownerInfo.mailing_zip,\\n      \\n      // Contact Info from Skip Trace\\n      email: skipTraceData.email,\\n      phone: skipTraceData.phone_number,\\n      mobile: skipTraceData.mobile_number,\\n      alternate_phone: skipTraceData.alternate_phone,\\n      \\n      // Additional Details\\n      absentee_owner: property.owner_occupied === false ? 'Yes' : 'No',\\n      tax_delinquent: property.tax_delinquent ? 'Yes' : 'No',\\n      years_owned: property.years_owned,\\n      lead_source: 'BatchData Property Search',\\n      date_added: new Date().toISOString().split('T')[0]\\n    }\\n  };\\n});\"},\"typeVersion\":2},{\"id\":\"013469c2-1e83-44e0-b078-c0b3d052a2c5\",\"name\":\"Create Excel Spreadsheet\",\"type\":\"n8n-nodes-base.spreadsheetFile\",\"position\":[1280,160],\"parameters\":{\"options\":{\"fileName\":\"Property_Leads_{{ $now.format('YYYY-MM-DD') }}.xlsx\",\"headerRow\":true},\"operation\":\"toFile\",\"fileFormat\":\"xlsx\"},\"typeVersion\":2},{\"id\":\"954c492a-7da2-4902-99ab-318d4ea6e333\",\"name\":\"Push to CRM\",\"type\":\"n8n-nodes-base.hubspot\",\"position\":[1280,540],\"parameters\":{\"options\":{},\"additionalFields\":{}},\"typeVersion\":2},{\"id\":\"61bfd72b-8971-4298-8d2a-09baea403956\",\"name\":\"Email Notification\",\"type\":\"n8n-nodes-base.emailSend\",\"position\":[1520,300],\"webhookId\":\"e9459278-1cd9-47bb-bffd-88380d297217\",\"parameters\":{\"options\":{},\"subject\":\"Property Lead Report - {{ $now.format('YYYY-MM-DD') }}\",\"toEmail\":\"your-email@yourdomain.com\",\"fromEmail\":\"no-reply@yourdomain.com\"},\"typeVersion\":2.1},{\"id\":\"a79a0618-ac63-4aaf-8337-b9ccc5940eef\",\"name\":\"Summarize Results\",\"type\":\"n8n-nodes-base.code\",\"position\":[1280,360],\"parameters\":{\"jsCode\":\"// Summarize the results of the property lead search\\nconst leads = $input.all();\\nconst totalLeads = leads.length;\\n\\n// Calculate the highest lead score\\nlet highestScore = 0;\\nif (totalLeads > 0) {\\n  highestScore = Math.max(...leads.map(item => item.json.lead_score || 0));\\n}\\n\\n// Return a summary object\\nreturn {\\n  json: {\\n    total_leads: totalLeads,\\n    highest_score: highestScore,\\n    execution_date: new Date().toISOString(),\\n    success: true\\n  }\\n};\"},\"typeVersion\":2},{\"id\":\"cf6bbc2b-4892-4612-aee9-7f255f627a67\",\"name\":\"Sticky Note - Workflow Overview\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-420,-520],\"parameters\":{\"width\":800,\"height\":280,\"content\":\"# Property Lead Automation Workflow\\n\\nThis workflow automatically searches for potential real estate leads based on configured criteria, obtains owner contact information through skip tracing, and pushes the leads to your CRM. It can be run manually or scheduled to run daily.\\n\\n## Steps: Property Search → Filter Results → Skip Trace → Format Data → Export (Excel & CRM)\"},\"typeVersion\":1},{\"id\":\"ff155460-3f4e-44e8-aac7-4b84dff2dceb\",\"name\":\"Sticky Note - Triggers\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-420,-160],\"parameters\":{\"color\":2,\"width\":320,\"height\":620,\"content\":\"## Workflow Triggers\\n\\nThis workflow can be triggered in two ways:\\n\\n1. **Scheduled Trigger** - Runs automatically every day at the specified time\\n\\n2. **Manual Trigger** - Run the workflow on-demand by clicking Execute\"},\"typeVersion\":1},{\"id\":\"8c127497-0dc4-428d-a946-14c10b9572cb\",\"name\":\"Sticky Note - Property Search\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-80,-180],\"parameters\":{\"color\":4,\"width\":320,\"height\":650,\"content\":\"## Search Configuration\\n\\nConfigure your property search criteria including:\\n\\n- Location (city, state, zip)\\n- Property type\\n- Value range\\n- Equity percentage\\n- Owner status\\n- And more\\n\\nEdit the 'search_parameters' in the Set node to customize your search criteria.\"},\"typeVersion\":1},{\"id\":\"20ad7c5e-5d73-4b43-b5b0-6c9eaae18400\",\"name\":\"Sticky Note - Data Processing\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[260,-180],\"parameters\":{\"color\":5,\"width\":880,\"height\":660,\"content\":\"## Property Data Processing\\n\\n1. **Search Properties API** - Connect to BatchData to search for properties\\n\\n2. **Filter Property Results** - Apply additional filtering logic and calculate lead scores based on factors like:\\n   - Equity percentage\\n   - Years of ownership\\n   - Owner occupancy status\\n   - Tax delinquency\\n   - Recent sales activity\\n\\n3. **Get Owner Contact Info** - Skip trace each property to find owner contact details\\n\\n4. **Format Lead Data** - Structure the data for CRM and reporting\"},\"typeVersion\":1},{\"id\":\"a0254233-a0af-43b2-8258-0820d8fdd49d\",\"name\":\"Sticky Note - Output\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1180,-180],\"parameters\":{\"color\":6,\"width\":560,\"height\":920,\"content\":\"## Lead Output Options\\n\\n1. **Create Excel Spreadsheet** - Generates an Excel file with all property leads and details\\n\\n2. **Push to CRM** - Adds leads to your CRM system (HubSpot in this example, but can be changed to Salesforce, Zoho, etc.)\\n\\n3. **Email Notification** - Sends a summary email with the Excel file attached\\n\\n4. **Summarize Results** - Provides a summary of the execution results\"},\"typeVersion\":1}],\"active\":false,\"pinData\":{},\"settings\":{\"executionOrder\":\"v1\"},\"versionId\":\"ff401fba-f56d-4d22-b259-d23a4e141a98\",\"connections\":{\"Daily Schedule\":{\"main\":[[{\"node\":\"Configure Search Parameters\",\"type\":\"main\",\"index\":0}]]},\"Format Lead Data\":{\"main\":[[{\"node\":\"Create Excel Spreadsheet\",\"type\":\"main\",\"index\":0},{\"node\":\"Push to CRM\",\"type\":\"main\",\"index\":0},{\"node\":\"Summarize Results\",\"type\":\"main\",\"index\":0}]]},\"Summarize Results\":{\"main\":[[{\"node\":\"Email Notification\",\"type\":\"main\",\"index\":0}]]},\"Search Properties API\":{\"main\":[[{\"node\":\"Filter Property Results\",\"type\":\"main\",\"index\":0}]]},\"Get Owner Contact Info\":{\"main\":[[{\"node\":\"Format Lead Data\",\"type\":\"main\",\"index\":0}]]},\"Filter Property Results\":{\"main\":[[{\"node\":\"Get Owner Contact Info\",\"type\":\"main\",\"index\":0}]]},\"Create Excel Spreadsheet\":{\"main\":[[{\"node\":\"Email Notification\",\"type\":\"main\",\"index\":0}]]},\"Configure Search Parameters\":{\"main\":[[{\"node\":\"Search Properties API\",\"type\":\"main\",\"index\":0}]]},\"When clicking \\\"Execute Workflow\\\"\":{\"main\":[[{\"node\":\"Configure Search Parameters\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "## How It Works\n\nThis workflow automates the entire property lead generation process in a few simple steps:\n\n  1. Property Search: Connects to BatchData's Property Search API with customizable parameters (location, property type, value range, equity percentage, etc.)\n  2. Lead Filtering & Scoring: Processes results to identify the most promising leads based on criteria like absentee ownership, years owned, equity percentage, and tax status. Each property receives a lead score to prioritize follow-up.\n  3. Skip Tracing: Automatically retrieves owner contact information (phone, email, mailing address) for each qualified property.\n  4. Data Formatting: Structures all property and owner data into a clean, organized format ready for your systems.\n  5. Multi-Channel Output:\n\n\n  * Generates an Excel spreadsheet with all lead details\n  * Pushes leads directly to your CRM (configurable for HubSpot, Salesforce, etc.)\n  * Sends a summary email with the spreadsheet attached\n\n\n\nThe workflow can run on a daily schedule or be triggered manually as needed. All parameters are easily configurable through dedicated nodes, requiring no coding knowledge.\n\n## Who's It For\n\nThis workflow is perfect for:\n\n  * Real Estate Investors looking to find off-market properties with motivated sellers\n  * Real Estate Agents who want to generate listing leads from distressed or high-equity properties\n  * Investment Companies that need regular lead flow for acquisitions\n  * Real Estate Marketers who run targeted campaigns to property owners\n  * Wholesalers seeking to build a pipeline of potential deals\n  * Property Service Providers (roof repair, renovation contractors, etc.) who target specific property types\n\n\n\nAnyone who needs reliable, consistent lead generation for real estate without the manual work of searching, filtering, and organizing property data will benefit from this automation.\n\n## About BatchData\n\nBatchData is a comprehensive property data provider that offers access to nationwide property information, owner details, and skip tracing services. Key features include:\n\n  * Extensive Database: Covers 150+ million properties across all 50 states\n  * Rich Property Data: Includes ownership information, tax records, sales history, valuation estimates, equity positions, and more\n  * Skip Tracing Services: Provides owner contact information including phone numbers, email addresses, and mailing addresses\n  * Distressed Property Indicators: Flags for pre-foreclosure, tax delinquency, vacancy, and other motivation factors\n  * RESTful API: Professional API for programmatic access to all property data services\n  * Regular Updates: Continuously refreshed data for accurate information\n\n\n\nBatchData's services are designed for real estate professionals who need reliable property and owner information to power their marketing and acquisition strategies. Their API-first approach makes it ideal for workflow automation tools like N8N.\n",
  "crawled_at": "2025-05-26T05:13:27.258949",
  "readme_zh": "## 运作原理\n\n本工作流通过几个简单步骤实现房产潜在客户全流程自动化生成：\n\n1. **房产搜索**：对接BatchData房产搜索API，支持自定义参数（地理位置、物业类型、价值区间、产权比例等）\n2. **线索筛选评分**：根据业主缺席情况、持有年限、产权比例、纳税状态等标准评估潜在价值，为每处房产生成优先级评分\n3. **业主追踪**：自动获取合格房产的业主联系方式（电话、邮箱、邮寄地址）\n4. **数据格式化**：将房产与业主信息整理为结构化数据\n5. **多渠道输出**：\n   * 生成含完整线索信息的Excel表格\n   * 直接推送至客户关系管理系统（支持HubSpot、Salesforce等配置）\n   * 发送附带数据表格的摘要邮件\n\n支持每日自动运行或手动触发，所有参数均通过可视化节点配置，无需编程知识。\n\n## 适用人群\n\n本方案特别适合：\n\n* **房产投资者**：寻找有出售意愿的非挂牌房源\n* **房产经纪人**：从高净值或不良资产中挖掘挂牌资源\n* **投资机构**：需要持续获取收购标的\n* **地产营销商**：针对特定业主开展定向推广\n* **批发买家**：建立潜在交易渠道库\n* **房屋服务商**（屋顶维修/装修承包商等）：精准定位特定物业类型\n\n任何需要稳定获取房产线索，又希望避免人工搜索、筛选、整理数据的用户都将受益于此自动化方案。\n\n## BatchData平台介绍\n\nBatchData是全美领先的房产数据服务平台，提供覆盖全境的房产信息、业主数据及追踪服务，核心优势包括：\n\n* **海量数据库**：涵盖50个州超1.5亿处房产\n* **多维数据**：产权记录、纳税信息、交易历史、估值报告、资产净值等\n* **业主追踪**：提供电话、邮箱、住址等联系方式\n* **不良资产标识**：法拍预警、欠税标记、空置识别等动机指标\n* **RESTful API**：支持通过编程接口调用所有数据服务\n* **实时更新**：持续更新的数据保障准确性\n\n专为依赖精准房产数据开展营销与收购的地产从业者设计，其API优先的特性尤其适合与N8N等自动化工具集成。",
  "title_zh": "房地产潜在客户开发：利用BatchData的Skip Tracing技术与CRM系统集成",
  "publish_date_zh": "最后更新于3天前",
  "workflow_json_zh": "{\n  \"id\": \"RGVS0tHJV7Wh6aX4\",\n  \"meta\": {\n    \"instanceId\": \"bb9853d4d7d87207561a30bc6fe4ece20b295264f7d27d4a62215de2f3846a56\"\n  },\n  \"name\": \"Property Lead Contact Enrichment from CRM\",\n  \"tags\": [],\n  \"nodes\": [\n    {\n      \"id\": \"518b14de-23b9-4821-930c-8fa55eb4cfb4\",\n      \"name\": \"When clicking \\\"Execute Workflow\\\"\",\n      \"type\": \"n8n-nodes-base.manualTrigger\",\n      \"position\": [\n        -340,\n        280\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"939df2a3-f6dd-40c9-a01a-460923a332a6\",\n      \"name\": \"Daily Schedule\",\n      \"type\": \"n8n-nodes-base.scheduleTrigger\",\n      \"position\": [\n        -340,\n        100\n      ],\n      \"parameters\": {\n        \"rule\": {\n          \"interval\": [\n            {}\n          ]\n        }\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"3228372f-ac40-4898-8bf5-09a4f37fde85\",\n      \"name\": \"Search Properties API\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        320,\n        260\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.batchdata.com/api/v1/properties/search\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"authentication\": \"genericCredentialType\",\n        \"genericAuthType\": \"httpHeaderAuth\"\n      },\n      \"typeVersion\": 4.1\n    },\n    {\n      \"id\": \"0aa1fb95-66c8-4b61-81f5-04b37e5c1185\",\n      \"name\": \"Configure Search Parameters\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        40,\n        240\n      ],\n      \"parameters\": {\n        \"values\": {\n          \"string\": [\n            {\n              \"name\": \"search_parameters\",\n              \"value\": \"={ \\\"location\\\": { \\\"city\\\": \\\"Austin\\\", \\\"state\\\": \\\"TX\\\" }, \\\"propertyType\\\": \\\"single_family\\\", \\\"value\\\": { \\\"min\\\": 200000, \\\"max\\\": 500000 }, \\\"status\\\": \\\"distressed\\\", \\\"equity\\\": { \\\"min\\\": 30 }, \\\"limit\\\": 50 }\"\n            }\n          ]\n        },\n        \"options\": {}\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"052b357b-a374-4e0c-ab98-67e79ed8cf2b\",\n      \"name\": \"Filter Property Results\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        540,\n        260\n      ],\n      \"parameters\": {\n        \"jsCode\": \"// Process batch property results and filter according to criteria\\nconst results = $input.all()[0].json.results || [];\\n\\n// Filter to find matching properties\\nconst filteredProperties = results.filter(property => {\\n  // Example filtering criteria - customize as needed\\n  // Only include properties where:\\n  // 1. Owner doesn't live at the property (absentee)\\n  // 2. Property has been owned for 5+ years\\n  // 3. No sales in the last 3 years\\n  \\n  const isAbsentee = property.owner_occupied === false;\\n  \\n  // Calculate years of ownership if purchase date exists\\n  let yearsOwned = 0;\\n  if (property.last_sale_date) {\\n    const purchaseDate = new Date(property.last_sale_date);\\n    const currentDate = new Date();\\n    yearsOwned = currentDate.getFullYear() - purchaseDate.getFullYear();\\n  }\\n  \\n  // Check if no recent sales (last 3 years)\\n  let noRecentSales = true;\\n  if (property.last_sale_date) {\\n    const lastSale = new Date(property.last_sale_date);\\n    const threeYearsAgo = new Date();\\n    threeYearsAgo.setFullYear(threeYearsAgo.getFullYear() - 3);\\n    noRecentSales = lastSale < threeYearsAgo;\\n  }\\n  \\n  return isAbsentee && yearsOwned >= 5 && noRecentSales;\\n});\\n\\n// Add relevant score to each property\\nconst scoredProperties = filteredProperties.map(property => {\\n  // Create a simple scoring system from 0-100\\n  // This helps prioritize the best leads\\n  let score = 50; // Base score\\n  \\n  // Increase score for properties with more equity\\n  if (property.equity_percentage) {\\n    score += Math.min(property.equity_percentage / 2, 25);\\n  }\\n  \\n  // Increase score for longer ownership\\n  if (property.last_sale_date) {\\n    const purchaseDate = new Date(property.last_sale_date);\\n    const currentDate = new Date();\\n    const yearsOwned = currentDate.getFullYear() - purchaseDate.getFullYear();\\n    score += Math.min(yearsOwned, 15);\\n  }\\n  \\n  // Increase score for tax delinquency\\n  if (property.tax_delinquent) {\\n    score += 10;\\n  }\\n  \\n  return { ...property, lead_score: Math.round(score) };\\n});\\n\\n// Sort by score descending\\nscoredProperties.sort((a, b) => b.lead_score - a.lead_score);\\n\\n// Return the filtered and scored properties\\nreturn scoredProperties.map(property => {\\n  return {\\n    json: property\\n  };\\n});\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"2c183cc1-06a1-4528-82c3-df2585df58eb\",\n      \"name\": \"Get Owner Contact Info\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        760,\n        260\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.batchdata.com/api/v1/property/skip-trace\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"authentication\": \"genericCredentialType\",\n        \"genericAuthType\": \"httpHeaderAuth\"\n      },\n      \"typeVersion\": 4.1\n    },\n    {\n      \"id\": \"2fe0aef9-30d2-4c30-9029-571f3b4c8ca9\",\n      \"name\": \"Format Lead Data\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        960,\n        260\n      ],\n      \"parameters\": {\n        \"jsCode\": \"// Process and format the property data with owner contact info\\nreturn $input.all().map(item => {\\n  const property = item.json;\\n  const skipTraceData = property.skip_trace_data || {};\\n  const ownerInfo = property.owner_info || {};\\n  \\n  return {\\n    json: {\\n      // Property Information\\n      property_id: property.property_id,\\n      address: property.address,\\n      city: property.city,\\n      state: property.state,\\n      zip: property.zip,\\n      property_type: property.property_type,\\n      beds: property.beds,\\n      baths: property.baths,\\n      sqft: property.building_sqft,\\n      lot_size: property.lot_size,\\n      year_built: property.year_built,\\n      last_sale_date: property.last_sale_date,\\n      last_sale_price: property.last_sale_price,\\n      estimated_value: property.estimated_value,\\n      estimated_equity: property.estimated_equity,\\n      equity_percentage: property.equity_percentage,\\n      lead_score: property.lead_score,\\n      \\n      // Owner Information\\n      owner_name: ownerInfo.full_name || `${ownerInfo.first_name || ''} ${ownerInfo.last_name || ''}`.trim(),\\n      owner_mailing_address: ownerInfo.mailing_address,\\n      owner_mailing_city: ownerInfo.mailing_city,\\n      owner_mailing_state: ownerInfo.mailing_state,\\n      owner_mailing_zip: ownerInfo.mailing_zip,\\n      \\n      // Contact Info from Skip Trace\\n      email: skipTraceData.email,\\n      phone: skipTraceData.phone_number,\\n      mobile: skipTraceData.mobile_number,\\n      alternate_phone: skipTraceData.alternate_phone,\\n      \\n      // Additional Details\\n      absentee_owner: property.owner_occupied === false ? 'Yes' : 'No',\\n      tax_delinquent: property.tax_delinquent ? 'Yes' : 'No',\\n      years_owned: property.years_owned,\\n      lead_source: 'BatchData Property Search',\\n      date_added: new Date().toISOString().split('T')[0]\\n    }\\n  };\\n});\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"013469c2-1e83-44e0-b078-c0b3d052a2c5\",\n      \"name\": \"Create Excel Spreadsheet\",\n      \"type\": \"n8n-nodes-base.spreadsheetFile\",\n      \"position\": [\n        1280,\n        160\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"fileName\": \"Property_Leads_{{ $now.format('YYYY-MM-DD') }}.xlsx\",\n          \"headerRow\": true\n        },\n        \"operation\": \"toFile\",\n        \"fileFormat\": \"xlsx\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"954c492a-7da2-4902-99ab-318d4ea6e333\",\n      \"name\": \"Push to CRM\",\n      \"type\": \"n8n-nodes-base.hubspot\",\n      \"position\": [\n        1280,\n        540\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"additionalFields\": {}\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"61bfd72b-8971-4298-8d2a-09baea403956\",\n      \"name\": \"Email Notification\",\n      \"type\": \"n8n-nodes-base.emailSend\",\n      \"position\": [\n        1520,\n        300\n      ],\n      \"webhookId\": \"e9459278-1cd9-47bb-bffd-88380d297217\",\n      \"parameters\": {\n        \"options\": {},\n        \"subject\": \"Property Lead Report - {{ $now.format('YYYY-MM-DD') }}\",\n        \"toEmail\": \"your-email@yourdomain.com\",\n        \"fromEmail\": \"no-reply@yourdomain.com\"\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"a79a0618-ac63-4aaf-8337-b9ccc5940eef\",\n      \"name\": \"Summarize Results\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        1280,\n        360\n      ],\n      \"parameters\": {\n        \"jsCode\": \"// Summarize the results of the property lead search\\nconst leads = $input.all();\\nconst totalLeads = leads.length;\\n\\n// Calculate the highest lead score\\nlet highestScore = 0;\\nif (totalLeads > 0) {\\n  highestScore = Math.max(...leads.map(item => item.json.lead_score || 0));\\n}\\n\\n// Return a summary object\\nreturn {\\n  json: {\\n    total_leads: totalLeads,\\n    highest_score: highestScore,\\n    execution_date: new Date().toISOString(),\\n    success: true\\n  }\\n};\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"cf6bbc2b-4892-4612-aee9-7f255f627a67\",\n      \"name\": \"Sticky Note - Workflow Overview\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -420,\n        -520\n      ],\n      \"parameters\": {\n        \"width\": 800,\n        \"height\": 280,\n        \"content\": \"# 房产潜在客户自动化工作流\\n\\n该工作流程可根据预设条件自动搜索潜在房产客户线索，通过跳号追踪获取业主联系方式，并将线索推送至您的CRM系统。支持手动运行或设置为每日自动执行。\\n\\n## 流程步骤：房产搜索 → 结果筛选 → 跳号追踪 → 数据格式化 → 导出（Excel表格及CRM系统）\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"ff155460-3f4e-44e8-aac7-4b84dff2dceb\",\n      \"name\": \"Sticky Note - Triggers\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -420,\n        -160\n      ],\n      \"parameters\": {\n        \"color\": 2,\n        \"width\": 320,\n        \"height\": 620,\n        \"content\": \"## 工作流触发方式\\n\\n本工作流可通过以下两种方式触发：\\n\\n1. **定时触发** - 每天在指定时间自动运行\\n\\n2. **手动触发** - 点击\\\"执行\\\"按钮随时启动作业\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"8c127497-0dc4-428d-a946-14c10b9572cb\",\n      \"name\": \"Sticky Note - Property Search\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -80,\n        -180\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 320,\n        \"height\": 650,\n        \"content\": \"## 搜索配置\\n\\n设置您的房产搜索条件，包括：\\n\\n- 位置（城市、州、邮编）\\n- 房产类型\\n- 价值范围\\n- 产权比例\\n- 业主状态\\n- 及其他选项\\n\\n在Set节点中编辑'search_parameters'以自定义您的搜索条件。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"20ad7c5e-5d73-4b43-b5b0-6c9eaae18400\",\n      \"name\": \"Sticky Note - Data Processing\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        260,\n        -180\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 880,\n        \"height\": 660,\n        \"content\": \"## 房产数据处理\\n\\n1. **房产搜索API** - 接入BatchData系统进行房产检索\\n\\n2. **筛选房产结果** - 应用附加筛选逻辑并基于以下因素计算潜在客户价值评分：\\n   - 资产净值比例\\n   - 持有年限\\n   - 业主自住状态\\n   - 税务拖欠情况\\n   - 近期交易动态\\n\\n3. **获取业主联系信息** - 通过线索追踪获取每处房产的业主联系方式\\n\\n4. **格式化潜在客户数据** - 将数据整理为适合客户关系管理系统(CRM)和报表分析的格式\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"a0254233-a0af-43b2-8258-0820d8fdd49d\",\n      \"name\": \"Sticky Note - Output\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1180,\n        -180\n      ],\n      \"parameters\": {\n        \"color\": 6,\n        \"width\": 560,\n        \"height\": 920,\n        \"content\": \"## 潜在客户输出选项\\n\\n1. **生成Excel表格** - 创建包含所有房产潜在客户及详细信息的Excel文件\\n\\n2. **推送至CRM系统** - 将潜在客户添加至您的CRM系统（本例为HubSpot，可更改为Salesforce、Zoho等）\\n\\n3. **邮件通知** - 发送附带Excel文件的摘要邮件\\n\\n4. **汇总结果** - 提供执行结果的摘要报告\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"active\": false,\n  \"pinData\": {},\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"ff401fba-f56d-4d22-b259-d23a4e141a98\",\n  \"connections\": {\n    \"Daily Schedule\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Configure Search Parameters\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Format Lead Data\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Create Excel Spreadsheet\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Push to CRM\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Summarize Results\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Summarize Results\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Email Notification\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Search Properties API\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Filter Property Results\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get Owner Contact Info\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Format Lead Data\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Filter Property Results\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get Owner Contact Info\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Create Excel Spreadsheet\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Email Notification\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Configure Search Parameters\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Search Properties API\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When clicking \\\"Execute Workflow\\\"\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Configure Search Parameters\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}