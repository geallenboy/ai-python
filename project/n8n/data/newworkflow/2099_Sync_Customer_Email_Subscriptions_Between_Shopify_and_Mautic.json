{
  "url": "https://n8n.io/workflows/2099-sync-customer-email-subscriptions-between-shopify-and-mautic/",
  "title": "Sync Customer Email Subscriptions Between Shopify and Mautic",
  "author": "Sascha",
  "publish_date": "Last update a year ago",
  "publish_date_absolute": "",
  "categories": [
    {
      "name": "Marketing"
    }
  ],
  "workflow_json": "{\"id\":\"JiSesGjDIXIPYtbt\",\"meta\":{\"instanceId\":\"e2c978396c9c745cf0aaa9ed3abe4464dbcef93c5fe2df809b9e14440e628df6\"},\"name\":\"Shopify + Mautic\",\"tags\":[],\"nodes\":[{\"id\":\"592b2608-e77e-4988-8f77-8820645b56ee\",\"name\":\"Shopify Trigger\",\"type\":\"n8n-nodes-base.shopifyTrigger\",\"position\":[540,320],\"webhookId\":\"252052f3-e844-4500-8c34-c57f583d4432\",\"parameters\":{\"topic\":\"customers/update\",\"authentication\":\"accessToken\"},\"credentials\":{\"shopifyAccessTokenApi\":{\"id\":\"WbxXaLMHozAgY3Rz\",\"name\":\"Shopify Access Token account\"}},\"typeVersion\":1},{\"id\":\"f2e6931d-0279-4142-9b9e-1092657d91e2\",\"name\":\"Accepts Marketing?\",\"type\":\"n8n-nodes-base.if\",\"position\":[1240,180],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"8e207eec-212a-48a9-b64e-2d15094c987f\",\"operator\":{\"name\":\"filter.operator.equals\",\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"={{ $('Shopify Trigger').item.json.email_marketing_consent.state }}\",\"rightValue\":\"subscribed\"}]}},\"typeVersion\":2},{\"id\":\"2a31657b-f1b3-4e4a-8f6a-3d3ee15aa052\",\"name\":\"Accepts Marketing?1\",\"type\":\"n8n-nodes-base.if\",\"position\":[1240,500],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"8e207eec-212a-48a9-b64e-2d15094c987f\",\"operator\":{\"name\":\"filter.operator.equals\",\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"={{ $('Shopify Trigger').item.json.email_marketing_consent.state }}\",\"rightValue\":\"subscribed\"}]}},\"typeVersion\":2},{\"id\":\"266a07ca-915a-4afd-9a0a-60eb974ee263\",\"name\":\"No Operation, do nothing\",\"type\":\"n8n-nodes-base.noOp\",\"position\":[1540,720],\"parameters\":{},\"typeVersion\":1},{\"id\":\"b9aee974-4d75-4b1e-80b7-8aab9d4f403d\",\"name\":\"Add to confirmed segment\",\"type\":\"n8n-nodes-base.mautic\",\"position\":[1840,40],\"parameters\":{\"resource\":\"contactSegment\",\"contactId\":\"={{ $json.id }}\",\"segmentId\":1,\"authentication\":\"oAuth2\"},\"credentials\":{\"mauticOAuth2Api\":{\"id\":\"cBmAMa80nofah9QG\",\"name\":\"Mautic account\"}},\"typeVersion\":1},{\"id\":\"a0fbd9e7-a60d-430b-b5df-4ec063e181c9\",\"name\":\"Remove from confirmed segment\",\"type\":\"n8n-nodes-base.mautic\",\"position\":[1840,300],\"parameters\":{\"resource\":\"contactSegment\",\"contactId\":\"={{ $json.id }}\",\"operation\":\"remove\",\"segmentId\":1,\"authentication\":\"oAuth2\"},\"credentials\":{\"mauticOAuth2Api\":{\"id\":\"cBmAMa80nofah9QG\",\"name\":\"Mautic account\"}},\"typeVersion\":1},{\"id\":\"0bc8fc06-3bf5-4c49-acc2-1ed499a07ea1\",\"name\":\"Webhook\",\"type\":\"n8n-nodes-base.webhook\",\"position\":[540,1500],\"webhookId\":\"6485fca6-c641-4067-b19a-192709b88e45\",\"parameters\":{\"path\":\"6485fca6-c641-4067-b19a-192709b88e45\",\"options\":{\"rawBody\":true},\"httpMethod\":\"POST\"},\"typeVersion\":1.1},{\"id\":\"001eff12-6f14-4fb2-afdd-e6b7956437bf\",\"name\":\"Crypto\",\"type\":\"n8n-nodes-base.crypto\",\"position\":[760,1500],\"parameters\":{\"type\":\"SHA256\",\"action\":\"hmac\",\"secret\":\"a031f434181d2bce0a81694c11fafb5887c78a48c50da98d62b7ab7c6d57080c\",\"encoding\":\"base64\",\"binaryData\":true},\"typeVersion\":1},{\"id\":\"6cde7c3c-e1f9-4584-908c-9b4a82e4f2a4\",\"name\":\"If\",\"type\":\"n8n-nodes-base.if\",\"position\":[980,1500],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"eb322a60-a1e6-46ed-b7b9-539373f9d881\",\"operator\":{\"name\":\"filter.operator.equals\",\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"={{ $('Webhook').item.json.headers['webhook-signature'] }}\",\"rightValue\":\"={{ $json.data }}\"}]}},\"typeVersion\":2},{\"id\":\"e848a1d3-2f9b-4d27-8862-b3284654f818\",\"name\":\"No Operation, do nothing1\",\"type\":\"n8n-nodes-base.noOp\",\"position\":[1260,1700],\"parameters\":{},\"typeVersion\":1},{\"id\":\"ff27ee31-c13d-4a52-a260-aef9df8c64a6\",\"name\":\"GraphQL\",\"type\":\"n8n-nodes-base.graphql\",\"position\":[1260,1480],\"parameters\":{\"query\":\"=query {\\n  customers(first: 1, query: \\\"email:'{{ $json[\\\"body\\\"][\\\"mautic.lead_channel_subscription_changed\\\"][0][\\\"contact\\\"][\\\"fields\\\"][\\\"core\\\"][\\\"email\\\"][\\\"value\\\"] }}'\\\") {\\n    edges {\\n      node {\\n        id\\n        state\\n      }\\n    }\\n  }\\n}\\n\",\"endpoint\":\"=https://{{ $('Set Shopify Subdomain').params[\\\"fields\\\"][\\\"values\\\"][0][\\\"stringValue\\\"] }}.myshopify.com/admin/api/2024-01/graphql.json\",\"authentication\":\"headerAuth\"},\"credentials\":{\"httpHeaderAuth\":{\"id\":\"Z98cM8akgh1jPtG7\",\"name\":\"Header Auth  Shopify\"}},\"typeVersion\":1},{\"id\":\"168b255b-f796-426c-80fd-c2fe79ef973f\",\"name\":\"Marketing Consent - subscribed\",\"type\":\"n8n-nodes-base.graphql\",\"position\":[2120,1160],\"parameters\":{\"query\":\"mutation customerEmailMarketingConsentUpdate($input: CustomerEmailMarketingConsentUpdateInput!) {\\n  customerEmailMarketingConsentUpdate(input: $input) {\\n    customer {\\n      id\\n    }\\n    userErrors {\\n      field\\n      message\\n    }\\n  }\\n}\\n\",\"endpoint\":\"=https://{{ $('Set Shopify Subdomain').params[\\\"fields\\\"][\\\"values\\\"][0][\\\"stringValue\\\"] }}.myshopify.com/admin/api/2024-01/graphql.json\",\"variables\":\"={\\n  \\\"input\\\": {\\n    \\\"customerId\\\": \\\"{{ $json[\\\"data\\\"][\\\"customers\\\"][\\\"edges\\\"][0][\\\"node\\\"][\\\"id\\\"] }}\\\",\\n    \\\"emailMarketingConsent\\\": {\\n      \\\"consentUpdatedAt\\\": \\\"{{ $now }}\\\",\\n      \\\"marketingOptInLevel\\\": \\\"CONFIRMED_OPT_IN\\\",\\n      \\\"marketingState\\\": \\\"SUBSCRIBED\\\"\\n    }\\n  }\\n}\\n\",\"requestFormat\":\"json\",\"authentication\":\"headerAuth\"},\"credentials\":{\"httpHeaderAuth\":{\"id\":\"Z98cM8akgh1jPtG7\",\"name\":\"Header Auth  Shopify\"}},\"typeVersion\":1},{\"id\":\"f7db8ec3-27d4-41f7-a0c9-6249bf6e805a\",\"name\":\"Marketing Consent - unsubscribed\",\"type\":\"n8n-nodes-base.graphql\",\"position\":[2120,1500],\"parameters\":{\"query\":\"mutation customerEmailMarketingConsentUpdate($input: CustomerEmailMarketingConsentUpdateInput!) {\\n  customerEmailMarketingConsentUpdate(input: $input) {\\n    customer {\\n      id\\n    }\\n    userErrors {\\n      field\\n      message\\n    }\\n  }\\n}\\n\",\"endpoint\":\"=https://{{ $('Set Shopify Subdomain').params[\\\"fields\\\"][\\\"values\\\"][0][\\\"stringValue\\\"] }}.myshopify.com/admin/api/2024-01/graphql.json\",\"variables\":\"={\\n  \\\"input\\\": {\\n    \\\"customerId\\\": \\\"{{ $json[\\\"data\\\"][\\\"customers\\\"][\\\"edges\\\"][0][\\\"node\\\"][\\\"id\\\"] }}\\\",\\n    \\\"emailMarketingConsent\\\": {\\n      \\\"consentUpdatedAt\\\": \\\"{{ $now }}\\\",\\n      \\\"marketingOptInLevel\\\": \\\"CONFIRMED_OPT_IN\\\",\\n      \\\"marketingState\\\": \\\"UNSUBSCRIBED\\\"\\n    }\\n  }\\n}\\n\",\"requestFormat\":\"json\",\"authentication\":\"headerAuth\"},\"credentials\":{\"httpHeaderAuth\":{\"id\":\"Z98cM8akgh1jPtG7\",\"name\":\"Header Auth  Shopify\"}},\"typeVersion\":1},{\"id\":\"ff62697d-29d0-4b7e-b695-cd90535e5fa8\",\"name\":\"Mautic - Accepts Marketing?\",\"type\":\"n8n-nodes-base.if\",\"position\":[1820,1180],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"960e386c-4198-4b04-88a6-715162729064\",\"operator\":{\"name\":\"filter.operator.equals\",\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"={{ $('Webhook').item.json.body['mautic.lead_channel_subscription_changed'][0].new_status }}\",\"rightValue\":\"contactable\"}]}},\"typeVersion\":2},{\"id\":\"8515256f-c49b-4000-9a1e-be9958720dd6\",\"name\":\"Customer exists?\",\"type\":\"n8n-nodes-base.if\",\"position\":[1540,1480],\"parameters\":{\"options\":{\"looseTypeValidation\":false},\"conditions\":{\"options\":{\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"4d2f02ab-f5e3-437d-8a35-f301888a8597\",\"operator\":{\"type\":\"array\",\"operation\":\"notEmpty\",\"singleValue\":true},\"leftValue\":\"={{ $json.data.customers.edges }}\",\"rightValue\":0}]}},\"typeVersion\":2},{\"id\":\"616ae364-82a0-456a-abaf-b8855ca56f8f\",\"name\":\"No Operation, do nothing2\",\"type\":\"n8n-nodes-base.noOp\",\"position\":[1820,1640],\"parameters\":{},\"typeVersion\":1},{\"id\":\"afdeb330-06d0-4fdf-9f42-1d8ce74d483d\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[540,1680],\"parameters\":{\"width\":580.807881773399,\"content\":\"## Webhook Validation\\nWe use the same key shared with Mautic to hash the incoming request. If the computed hash is identical to the one delivered the request is valid and can be processed\"},\"typeVersion\":1},{\"id\":\"38633539-cc9a-4bde-92f7-39e697bd803f\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[2040,40],\"parameters\":{\"width\":279.1188177339898,\"height\":383.7477832512317,\"content\":\"## Mautic Segments\\nThe n8n Shopify node cannot Please make sure to select your segment on both nodes\"},\"typeVersion\":1},{\"id\":\"4107ce14-58bc-4171-87bb-5fc74a506e38\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1080,1300],\"parameters\":{\"width\":279.1188177339898,\"content\":\"## Shopify \\nThe n8n Shopify node cannot get customer marketing consent, so we get this from the Shopify GraphQL API\"},\"typeVersion\":1},{\"id\":\"33f97be7-a4bf-42ee-96ae-dbbe54f5248f\",\"name\":\"Sticky Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[580,1140],\"parameters\":{\"width\":279.1188177339898,\"content\":\"## Set your Shopify Subdomain here\"},\"typeVersion\":1},{\"id\":\"7f203946-a365-44a3-8de0-1fe0b1964eab\",\"name\":\"Set Shopify Subdomain\",\"type\":\"n8n-nodes-base.set\",\"position\":[760,1320],\"parameters\":{\"fields\":{\"values\":[{\"name\":\"Shopify Subdomain\",\"stringValue\":\"n8n-mautic-demo\"}]},\"options\":{}},\"typeVersion\":3.2},{\"id\":\"544a4da2-11a4-465b-a30e-02ed618a77a6\",\"name\":\"Search for Contact by Email\",\"type\":\"n8n-nodes-base.mautic\",\"position\":[760,320],\"parameters\":{\"limit\":1,\"options\":{\"search\":\"={{ $json.email }}\"},\"operation\":\"getAll\",\"authentication\":\"oAuth2\"},\"credentials\":{\"mauticOAuth2Api\":{\"id\":\"cBmAMa80nofah9QG\",\"name\":\"Mautic account\"}},\"typeVersion\":1,\"alwaysOutputData\":true},{\"id\":\"1332db6d-99ab-4d38-89b8-7f7ba25d4cf1\",\"name\":\"Contact exists?\",\"type\":\"n8n-nodes-base.if\",\"position\":[980,320],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"5872c5d4-655f-4cd6-9b21-622acdcb0814\",\"operator\":{\"type\":\"number\",\"operation\":\"exists\",\"singleValue\":true},\"leftValue\":\"={{ $json.id }}\",\"rightValue\":\"\"}]}},\"typeVersion\":2},{\"id\":\"488494df-6e8c-4f8c-b7ed-5d6d67f083c8\",\"name\":\"Create a new contact\",\"type\":\"n8n-nodes-base.mautic\",\"position\":[1540,480],\"parameters\":{\"email\":\"={{ $('Shopify Trigger').item.json.email }}\",\"company\":\"=\",\"options\":{},\"lastName\":\"={{ $('Shopify Trigger').item.json.last_name }}\",\"firstName\":\"={{ $('Shopify Trigger').item.json.first_name }}\",\"authentication\":\"oAuth2\",\"additionalFields\":{}},\"credentials\":{\"mauticOAuth2Api\":{\"id\":\"cBmAMa80nofah9QG\",\"name\":\"Mautic account\"}},\"typeVersion\":1},{\"id\":\"586c736b-cd46-4c5c-ac2f-c4380cf465bb\",\"name\":\"Sticky Note4\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[0,1420],\"parameters\":{\"color\":4,\"width\":360.408084305475,\"height\":315.5897364788551,\"content\":\"## Mautic to Shopify\\n\\nThis part uses GraphQL calls to the Shopify Admin API. In order to get a better understanding for the queries and mutations please check the API Docs.\\n\\nExamples from the Shopify Docs used in this workflow:\\n\\n[Get the first ten customers with an enabled customer account](https://shopify.dev/docs/api/admin-graphql/2024-01/queries/customers#examples-Get_the_first_ten_customers_with_an_enabled_customer_account)\\n\\n\\n[Mutation to update the Email Marketing consent](https://shopify.dev/docs/api/admin-graphql/2024-01/mutations/customerEmailMarketingConsentUpdate)\"},\"typeVersion\":1},{\"id\":\"47e8a011-b2ba-4839-ac85-24dd45e18020\",\"name\":\"Sticky Note5\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[20,220],\"parameters\":{\"color\":4,\"width\":360.408084305475,\"height\":315.5897364788551,\"content\":\"## Shopify to Mautic\\n\\nThis part uses the Shopify Trigger to watch for changes on customer data.\\n\\nTo use the Mautic nodes please make sure you have the API enabled in your Mautic Instance.\"},\"typeVersion\":1}],\"active\":true,\"pinData\":{},\"settings\":{\"executionOrder\":\"v1\"},\"versionId\":\"71208adf-ebfb-4961-b23b-fb46c86ca09f\",\"connections\":{\"If\":{\"main\":[[{\"node\":\"GraphQL\",\"type\":\"main\",\"index\":0}],[{\"node\":\"No Operation, do nothing1\",\"type\":\"main\",\"index\":0}]]},\"Crypto\":{\"main\":[[{\"node\":\"If\",\"type\":\"main\",\"index\":0}]]},\"GraphQL\":{\"main\":[[{\"node\":\"Customer exists?\",\"type\":\"main\",\"index\":0}]]},\"Webhook\":{\"main\":[[{\"node\":\"Crypto\",\"type\":\"main\",\"index\":0},{\"node\":\"Set Shopify Subdomain\",\"type\":\"main\",\"index\":0}]]},\"Contact exists?\":{\"main\":[[{\"node\":\"Accepts Marketing?\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Accepts Marketing?1\",\"type\":\"main\",\"index\":0}]]},\"Shopify Trigger\":{\"main\":[[{\"node\":\"Search for Contact by Email\",\"type\":\"main\",\"index\":0}]]},\"Customer exists?\":{\"main\":[[{\"node\":\"Mautic - Accepts Marketing?\",\"type\":\"main\",\"index\":0}],[{\"node\":\"No Operation, do nothing2\",\"type\":\"main\",\"index\":0}]]},\"Accepts Marketing?\":{\"main\":[[{\"node\":\"Add to confirmed segment\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Remove from confirmed segment\",\"type\":\"main\",\"index\":0}]]},\"Accepts Marketing?1\":{\"main\":[[{\"node\":\"Create a new contact\",\"type\":\"main\",\"index\":0}],[{\"node\":\"No Operation, do nothing\",\"type\":\"main\",\"index\":0}]]},\"Create a new contact\":{\"main\":[[{\"node\":\"Add to confirmed segment\",\"type\":\"main\",\"index\":0}]]},\"Mautic - Accepts Marketing?\":{\"main\":[[{\"node\":\"Marketing Consent - subscribed\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Marketing Consent - unsubscribed\",\"type\":\"main\",\"index\":0}]]},\"Search for Contact by Email\":{\"main\":[[{\"node\":\"Contact exists?\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "Having a seamless flow of customer data between your online store and your marketing platform is essential.\n\nBy keeping your systems synchronized, you can ensure that your marketing campaigns are accurately targeted and effective.\n\nThe integration between Shopify, a leading e-commerce platform, and Mautic, an open-source marketing automation system, is not available out-of-the-box.\n\nHowever, with a n8n workflow you can bridge this gap with.\n\n## This template will help you:\n\n  1. enhance accuracy in marketing lists by ensuring that subscription changes in Shopify are instantly updated in Mautic.\n  2. improve compliance with data protection laws by respecting users' subscription preferences across platforms\n  3. achieve integration without the need for additional plugins or software, minimizing complexity and potential points of failure.\n\n\n\n## This template will demonstrate the follwing concepts in n8n:\n\n  * working with Shopify in n8n\n  * control flow with the IF node\n  * use Webhooks\n  * validate Webhooks with the Crypto node\n  * use the GraphQL node to call the Shopify Admin API\n\n\n\n## The template consists of two parts:\n\n  1. Sync Email Subscriptions from Shopify to Mautic\n  2. Sync Email Subscriptions from Mautic to Shopify\n\n\n\n## How to get started?\n\n  1. Create a custom app in Shopify get the credentials needed to connect n8n to Shopify  \nThis is needed for the Shopify Trigger\n  2. Create **Shopify Acces Token API** credentials n n8n for the Shopify trigger node\n  3. Create **Header Auth** credentials:  \nUse **X-Shopify-Access-Token** as the name and the Acces-Token from the Shopify App you created as the value.  \nThe Header Auth is neccessary for the GraphQL nodes.\n  4. Enable the Mautic API under Configuration/API Settings, After the settings are saved you will have an additional entry in your settings menu to create API credentials for n8n\n  5. Create Mautic credentials in n8n\n\n\n\nPlease make sure to read the notes in the template.\n\nFor a detailed explanation please check the corresponding video: <https://youtu.be/x63rrh_yJzI>\n",
  "crawled_at": "2025-05-25T20:56:18.425891",
  "readme_zh": "实现网店与营销平台间客户数据的无缝流动至关重要。\n\n通过保持系统同步，您能确保营销活动精准触达目标人群并高效转化。\n\n目前主流电商平台Shopify与开源营销自动化系统Mautic之间并未提供原生集成方案。\n\n但借助n8n工作流，您可轻松搭建两者间的数据桥梁。\n\n## 本模板将帮助您：\n\n1. 提升营销名单准确性：Shopify中的订阅变更将实时同步至Mautic\n2. 强化数据合规性：跨平台统一遵循用户的订阅偏好设置\n3. 实现零插件集成：无需额外安装组件，降低系统复杂度与故障风险\n\n## 本模板将演示n8n中的核心功能：\n\n* Shopify节点操作\n* IF节点控制流\n* Webhook应用\n* Crypto节点验证Webhook\n* GraphQL节点调用Shopify管理API\n\n## 模板包含两大模块：\n\n1. Shopify至Mautic的邮件订阅同步\n2. Mautic至Shopify的邮件订阅同步\n\n## 快速开始指南：\n\n1. 在Shopify创建自定义应用，获取n8n连接凭证（Shopify触发器必需）\n2. 在n8n创建**Shopify访问令牌API**凭证（用于触发器节点）\n3. 创建**Header Auth**凭证：\n   - 名称填写「X-Shopify-Access-Token」\n   - 值填入Shopify应用的访问令牌（GraphQL节点必需）\n4. 在Mautic配置/API设置中启用API功能，保存后可在设置菜单创建n8n专用API凭证\n5. 在n8n配置Mautic连接凭证\n\n请务必仔细阅读模板中的注释说明。\n\n详细操作演示请观看配套视频：<https://youtu.be/x63rrh_yJzI>",
  "title_zh": "在Shopify和Mautic之间同步客户电子邮件订阅",
  "publish_date_zh": "上次更新于一年前",
  "workflow_json_zh": "{\n  \"id\": \"JiSesGjDIXIPYtbt\",\n  \"meta\": {\n    \"instanceId\": \"e2c978396c9c745cf0aaa9ed3abe4464dbcef93c5fe2df809b9e14440e628df6\"\n  },\n  \"name\": \"Shopify + Mautic\",\n  \"tags\": [],\n  \"nodes\": [\n    {\n      \"id\": \"592b2608-e77e-4988-8f77-8820645b56ee\",\n      \"name\": \"Shopify Trigger\",\n      \"type\": \"n8n-nodes-base.shopifyTrigger\",\n      \"position\": [\n        540,\n        320\n      ],\n      \"webhookId\": \"252052f3-e844-4500-8c34-c57f583d4432\",\n      \"parameters\": {\n        \"topic\": \"customers/update\",\n        \"authentication\": \"accessToken\"\n      },\n      \"credentials\": {\n        \"shopifyAccessTokenApi\": {\n          \"id\": \"WbxXaLMHozAgY3Rz\",\n          \"name\": \"Shopify Access Token account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"f2e6931d-0279-4142-9b9e-1092657d91e2\",\n      \"name\": \"Accepts Marketing?\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        1240,\n        180\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"8e207eec-212a-48a9-b64e-2d15094c987f\",\n              \"operator\": {\n                \"name\": \"filter.operator.equals\",\n                \"type\": \"string\",\n                \"operation\": \"equals\"\n              },\n              \"leftValue\": \"={{ $('Shopify Trigger').item.json.email_marketing_consent.state }}\",\n              \"rightValue\": \"subscribed\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"2a31657b-f1b3-4e4a-8f6a-3d3ee15aa052\",\n      \"name\": \"Accepts Marketing?1\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        1240,\n        500\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"8e207eec-212a-48a9-b64e-2d15094c987f\",\n              \"operator\": {\n                \"name\": \"filter.operator.equals\",\n                \"type\": \"string\",\n                \"operation\": \"equals\"\n              },\n              \"leftValue\": \"={{ $('Shopify Trigger').item.json.email_marketing_consent.state }}\",\n              \"rightValue\": \"subscribed\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"266a07ca-915a-4afd-9a0a-60eb974ee263\",\n      \"name\": \"No Operation, do nothing\",\n      \"type\": \"n8n-nodes-base.noOp\",\n      \"position\": [\n        1540,\n        720\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"b9aee974-4d75-4b1e-80b7-8aab9d4f403d\",\n      \"name\": \"Add to confirmed segment\",\n      \"type\": \"n8n-nodes-base.mautic\",\n      \"position\": [\n        1840,\n        40\n      ],\n      \"parameters\": {\n        \"resource\": \"contactSegment\",\n        \"contactId\": \"={{ $json.id }}\",\n        \"segmentId\": 1,\n        \"authentication\": \"oAuth2\"\n      },\n      \"credentials\": {\n        \"mauticOAuth2Api\": {\n          \"id\": \"cBmAMa80nofah9QG\",\n          \"name\": \"Mautic account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"a0fbd9e7-a60d-430b-b5df-4ec063e181c9\",\n      \"name\": \"Remove from confirmed segment\",\n      \"type\": \"n8n-nodes-base.mautic\",\n      \"position\": [\n        1840,\n        300\n      ],\n      \"parameters\": {\n        \"resource\": \"contactSegment\",\n        \"contactId\": \"={{ $json.id }}\",\n        \"operation\": \"remove\",\n        \"segmentId\": 1,\n        \"authentication\": \"oAuth2\"\n      },\n      \"credentials\": {\n        \"mauticOAuth2Api\": {\n          \"id\": \"cBmAMa80nofah9QG\",\n          \"name\": \"Mautic account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"0bc8fc06-3bf5-4c49-acc2-1ed499a07ea1\",\n      \"name\": \"Webhook\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"position\": [\n        540,\n        1500\n      ],\n      \"webhookId\": \"6485fca6-c641-4067-b19a-192709b88e45\",\n      \"parameters\": {\n        \"path\": \"6485fca6-c641-4067-b19a-192709b88e45\",\n        \"options\": {\n          \"rawBody\": true\n        },\n        \"httpMethod\": \"POST\"\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"001eff12-6f14-4fb2-afdd-e6b7956437bf\",\n      \"name\": \"Crypto\",\n      \"type\": \"n8n-nodes-base.crypto\",\n      \"position\": [\n        760,\n        1500\n      ],\n      \"parameters\": {\n        \"type\": \"SHA256\",\n        \"action\": \"hmac\",\n        \"secret\": \"a031f434181d2bce0a81694c11fafb5887c78a48c50da98d62b7ab7c6d57080c\",\n        \"encoding\": \"base64\",\n        \"binaryData\": true\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"6cde7c3c-e1f9-4584-908c-9b4a82e4f2a4\",\n      \"name\": \"If\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        980,\n        1500\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"eb322a60-a1e6-46ed-b7b9-539373f9d881\",\n              \"operator\": {\n                \"name\": \"filter.operator.equals\",\n                \"type\": \"string\",\n                \"operation\": \"equals\"\n              },\n              \"leftValue\": \"={{ $('Webhook').item.json.headers['webhook-signature'] }}\",\n              \"rightValue\": \"={{ $json.data }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"e848a1d3-2f9b-4d27-8862-b3284654f818\",\n      \"name\": \"No Operation, do nothing1\",\n      \"type\": \"n8n-nodes-base.noOp\",\n      \"position\": [\n        1260,\n        1700\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"ff27ee31-c13d-4a52-a260-aef9df8c64a6\",\n      \"name\": \"GraphQL\",\n      \"type\": \"n8n-nodes-base.graphql\",\n      \"position\": [\n        1260,\n        1480\n      ],\n      \"parameters\": {\n        \"query\": \"=query {\\n  customers(first: 1, query: \\\"email:'{{ $json[\\\"body\\\"][\\\"mautic.lead_channel_subscription_changed\\\"][0][\\\"contact\\\"][\\\"fields\\\"][\\\"core\\\"][\\\"email\\\"][\\\"value\\\"] }}'\\\") {\\n    edges {\\n      node {\\n        id\\n        state\\n      }\\n    }\\n  }\\n}\\n\",\n        \"endpoint\": \"=https://{{ $('Set Shopify Subdomain').params[\\\"fields\\\"][\\\"values\\\"][0][\\\"stringValue\\\"] }}.myshopify.com/admin/api/2024-01/graphql.json\",\n        \"authentication\": \"headerAuth\"\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": {\n          \"id\": \"Z98cM8akgh1jPtG7\",\n          \"name\": \"Header Auth  Shopify\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"168b255b-f796-426c-80fd-c2fe79ef973f\",\n      \"name\": \"Marketing Consent - subscribed\",\n      \"type\": \"n8n-nodes-base.graphql\",\n      \"position\": [\n        2120,\n        1160\n      ],\n      \"parameters\": {\n        \"query\": \"mutation customerEmailMarketingConsentUpdate($input: CustomerEmailMarketingConsentUpdateInput!) {\\n  customerEmailMarketingConsentUpdate(input: $input) {\\n    customer {\\n      id\\n    }\\n    userErrors {\\n      field\\n      message\\n    }\\n  }\\n}\\n\",\n        \"endpoint\": \"=https://{{ $('Set Shopify Subdomain').params[\\\"fields\\\"][\\\"values\\\"][0][\\\"stringValue\\\"] }}.myshopify.com/admin/api/2024-01/graphql.json\",\n        \"variables\": \"={\\n  \\\"input\\\": {\\n    \\\"customerId\\\": \\\"{{ $json[\\\"data\\\"][\\\"customers\\\"][\\\"edges\\\"][0][\\\"node\\\"][\\\"id\\\"] }}\\\",\\n    \\\"emailMarketingConsent\\\": {\\n      \\\"consentUpdatedAt\\\": \\\"{{ $now }}\\\",\\n      \\\"marketingOptInLevel\\\": \\\"CONFIRMED_OPT_IN\\\",\\n      \\\"marketingState\\\": \\\"SUBSCRIBED\\\"\\n    }\\n  }\\n}\\n\",\n        \"requestFormat\": \"json\",\n        \"authentication\": \"headerAuth\"\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": {\n          \"id\": \"Z98cM8akgh1jPtG7\",\n          \"name\": \"Header Auth  Shopify\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"f7db8ec3-27d4-41f7-a0c9-6249bf6e805a\",\n      \"name\": \"Marketing Consent - unsubscribed\",\n      \"type\": \"n8n-nodes-base.graphql\",\n      \"position\": [\n        2120,\n        1500\n      ],\n      \"parameters\": {\n        \"query\": \"mutation customerEmailMarketingConsentUpdate($input: CustomerEmailMarketingConsentUpdateInput!) {\\n  customerEmailMarketingConsentUpdate(input: $input) {\\n    customer {\\n      id\\n    }\\n    userErrors {\\n      field\\n      message\\n    }\\n  }\\n}\\n\",\n        \"endpoint\": \"=https://{{ $('Set Shopify Subdomain').params[\\\"fields\\\"][\\\"values\\\"][0][\\\"stringValue\\\"] }}.myshopify.com/admin/api/2024-01/graphql.json\",\n        \"variables\": \"={\\n  \\\"input\\\": {\\n    \\\"customerId\\\": \\\"{{ $json[\\\"data\\\"][\\\"customers\\\"][\\\"edges\\\"][0][\\\"node\\\"][\\\"id\\\"] }}\\\",\\n    \\\"emailMarketingConsent\\\": {\\n      \\\"consentUpdatedAt\\\": \\\"{{ $now }}\\\",\\n      \\\"marketingOptInLevel\\\": \\\"CONFIRMED_OPT_IN\\\",\\n      \\\"marketingState\\\": \\\"UNSUBSCRIBED\\\"\\n    }\\n  }\\n}\\n\",\n        \"requestFormat\": \"json\",\n        \"authentication\": \"headerAuth\"\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": {\n          \"id\": \"Z98cM8akgh1jPtG7\",\n          \"name\": \"Header Auth  Shopify\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"ff62697d-29d0-4b7e-b695-cd90535e5fa8\",\n      \"name\": \"Mautic - Accepts Marketing?\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        1820,\n        1180\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"960e386c-4198-4b04-88a6-715162729064\",\n              \"operator\": {\n                \"name\": \"filter.operator.equals\",\n                \"type\": \"string\",\n                \"operation\": \"equals\"\n              },\n              \"leftValue\": \"={{ $('Webhook').item.json.body['mautic.lead_channel_subscription_changed'][0].new_status }}\",\n              \"rightValue\": \"contactable\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"8515256f-c49b-4000-9a1e-be9958720dd6\",\n      \"name\": \"Customer exists?\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        1540,\n        1480\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"looseTypeValidation\": false\n        },\n        \"conditions\": {\n          \"options\": {\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"4d2f02ab-f5e3-437d-8a35-f301888a8597\",\n              \"operator\": {\n                \"type\": \"array\",\n                \"operation\": \"notEmpty\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $json.data.customers.edges }}\",\n              \"rightValue\": 0\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"616ae364-82a0-456a-abaf-b8855ca56f8f\",\n      \"name\": \"No Operation, do nothing2\",\n      \"type\": \"n8n-nodes-base.noOp\",\n      \"position\": [\n        1820,\n        1640\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"afdeb330-06d0-4fdf-9f42-1d8ce74d483d\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        540,\n        1680\n      ],\n      \"parameters\": {\n        \"width\": 580.807881773399,\n        \"content\": \"## Webhook 验证  \\n我们使用与Mautic共享的相同密钥对传入请求进行哈希计算。若计算得出的哈希值与请求携带的哈希值一致，则该请求有效并可继续处理。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"38633539-cc9a-4bde-92f7-39e697bd803f\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        2040,\n        40\n      ],\n      \"parameters\": {\n        \"width\": 279.1188177339898,\n        \"height\": 383.7477832512317,\n        \"content\": \"## Mautic 细分市场  \\nn8n Shopify节点无法确保同时在两个节点上选择您的细分市场\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"4107ce14-58bc-4171-87bb-5fc74a506e38\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1080,\n        1300\n      ],\n      \"parameters\": {\n        \"width\": 279.1188177339898,\n        \"content\": \"## Shopify  \\n由于n8n的Shopify节点无法获取客户营销授权信息，因此我们通过Shopify GraphQL API获取该数据。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"33f97be7-a4bf-42ee-96ae-dbbe54f5248f\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        580,\n        1140\n      ],\n      \"parameters\": {\n        \"width\": 279.1188177339898,\n        \"content\": \"## 在此设置您的Shopify子域名\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"7f203946-a365-44a3-8de0-1fe0b1964eab\",\n      \"name\": \"Set Shopify Subdomain\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        760,\n        1320\n      ],\n      \"parameters\": {\n        \"fields\": {\n          \"values\": [\n            {\n              \"name\": \"Shopify Subdomain\",\n              \"stringValue\": \"n8n-mautic-demo\"\n            }\n          ]\n        },\n        \"options\": {}\n      },\n      \"typeVersion\": 3.2\n    },\n    {\n      \"id\": \"544a4da2-11a4-465b-a30e-02ed618a77a6\",\n      \"name\": \"Search for Contact by Email\",\n      \"type\": \"n8n-nodes-base.mautic\",\n      \"position\": [\n        760,\n        320\n      ],\n      \"parameters\": {\n        \"limit\": 1,\n        \"options\": {\n          \"search\": \"={{ $json.email }}\"\n        },\n        \"operation\": \"getAll\",\n        \"authentication\": \"oAuth2\"\n      },\n      \"credentials\": {\n        \"mauticOAuth2Api\": {\n          \"id\": \"cBmAMa80nofah9QG\",\n          \"name\": \"Mautic account\"\n        }\n      },\n      \"typeVersion\": 1,\n      \"alwaysOutputData\": true\n    },\n    {\n      \"id\": \"1332db6d-99ab-4d38-89b8-7f7ba25d4cf1\",\n      \"name\": \"Contact exists?\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        980,\n        320\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"5872c5d4-655f-4cd6-9b21-622acdcb0814\",\n              \"operator\": {\n                \"type\": \"number\",\n                \"operation\": \"exists\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $json.id }}\",\n              \"rightValue\": \"\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"488494df-6e8c-4f8c-b7ed-5d6d67f083c8\",\n      \"name\": \"Create a new contact\",\n      \"type\": \"n8n-nodes-base.mautic\",\n      \"position\": [\n        1540,\n        480\n      ],\n      \"parameters\": {\n        \"email\": \"={{ $('Shopify Trigger').item.json.email }}\",\n        \"company\": \"=\",\n        \"options\": {},\n        \"lastName\": \"={{ $('Shopify Trigger').item.json.last_name }}\",\n        \"firstName\": \"={{ $('Shopify Trigger').item.json.first_name }}\",\n        \"authentication\": \"oAuth2\",\n        \"additionalFields\": {}\n      },\n      \"credentials\": {\n        \"mauticOAuth2Api\": {\n          \"id\": \"cBmAMa80nofah9QG\",\n          \"name\": \"Mautic account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"586c736b-cd46-4c5c-ac2f-c4380cf465bb\",\n      \"name\": \"Sticky Note4\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        0,\n        1420\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 360.408084305475,\n        \"height\": 315.5897364788551,\n        \"content\": \"## Mautic 对接 Shopify\\n\\n本模块通过 GraphQL 调用 Shopify 管理端 API 实现。如需深入理解查询与变更操作，请查阅官方 API 文档。\\n\\n本工作流中使用的 Shopify 文档示例：\\n\\n[获取前10位启用客户账户的顾客](https://shopify.dev/docs/api/admin-graphql/2024-01/queries/customers#examples-Get_the_first_ten_customers_with_an_enabled_customer_account)\\n\\n[更新邮件营销订阅状态的变更操作](https://shopify.dev/docs/api/admin-graphql/2024-01/mutations/customerEmailMarketingConsentUpdate)\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"47e8a011-b2ba-4839-ac85-24dd45e18020\",\n      \"name\": \"Sticky Note5\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        20,\n        220\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 360.408084305475,\n        \"height\": 315.5897364788551,\n        \"content\": \"## Shopify 到 Mautic 集成\\n\\n此部分利用 Shopify 触发器监控客户数据变更。\\n\\n使用 Mautic 节点前，请确保您的 Mautic 实例已启用 API 功能。\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"active\": true,\n  \"pinData\": {},\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"71208adf-ebfb-4961-b23b-fb46c86ca09f\",\n  \"connections\": {\n    \"If\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"GraphQL\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"No Operation, do nothing1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Crypto\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"If\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"GraphQL\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Customer exists?\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Webhook\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Crypto\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Set Shopify Subdomain\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Contact exists?\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Accepts Marketing?\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Accepts Marketing?1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Shopify Trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Search for Contact by Email\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Customer exists?\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Mautic - Accepts Marketing?\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"No Operation, do nothing2\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Accepts Marketing?\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Add to confirmed segment\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Remove from confirmed segment\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Accepts Marketing?1\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Create a new contact\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"No Operation, do nothing\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Create a new contact\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Add to confirmed segment\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Mautic - Accepts Marketing?\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Marketing Consent - subscribed\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Marketing Consent - unsubscribed\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Search for Contact by Email\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Contact exists?\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}