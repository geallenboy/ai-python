{
  "url": "https://n8n.io/workflows/4187-discover-hidden-youtube-trends-outlier-videos-in-your-niche-apify-airtable/",
  "title": "Discover HIDDEN Youtube Trends / Outlier Videos in Your Niche (Apify + Airtable)",
  "author": "Nasser",
  "publish_date": "Last update 5 days ago",
  "publish_date_absolute": "2025-05-21",
  "categories": [],
  "workflow_json": "{\"id\":\"\",\"meta\":{\"instanceId\":\"\",\"templateCredsSetupCompleted\":true},\"name\":\"YTB Outlier Finder\",\"tags\":[],\"nodes\":[{\"id\":\"\",\"name\":\"Wait\",\"type\":\"n8n-nodes-base.wait\",\"position\":[0,-460],\"webhookId\":\"\",\"parameters\":{},\"typeVersion\":1.1},{\"id\":\"\",\"name\":\"If\",\"type\":\"n8n-nodes-base.if\",\"position\":[-160,-640],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"\",\"operator\":{\"name\":\"filter.operator.equals\",\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"={{ $json.data.status }}\",\"rightValue\":\"SUCCEEDED\"}]}},\"typeVersion\":2.2},{\"id\":\"\",\"name\":\"Check IF Finished\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[-440,-640],\"parameters\":{\"url\":\"https://api.apify.com/v2/acts/streamers~youtube-scraper/runs/last?token=[YOUR_API_TOKEN]\",\"options\":{}},\"typeVersion\":4.2},{\"id\":\"\",\"name\":\"Get Videos Data\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[160,-660],\"parameters\":{\"url\":\"https://api.apify.com/v2/acts/streamers~youtube-scraper/runs/last/dataset/items?token=[YOUR_API_TOKEN]\",\"options\":{}},\"typeVersion\":4.2},{\"id\":\"\",\"name\":\"Create Videos Dataset\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[-700,-640],\"parameters\":{\"url\":\"https://api.apify.com/v2/acts/streamers~youtube-scraper/runs?token=[YOUR_API_TOKEN]\",\"method\":\"POST\",\"options\":{},\"jsonBody\":\"={\\n    \\\"dateFilter\\\": \\\"week\\\",\\n    \\\"downloadSubtitles\\\": true,\\n    \\\"hasCC\\\": false,\\n    \\\"hasLocation\\\": false,\\n    \\\"hasSubtitles\\\": false,\\n    \\\"is360\\\": false,\\n    \\\"is3D\\\": false,\\n    \\\"is4K\\\": false,\\n    \\\"isBought\\\": false,\\n    \\\"isHD\\\": false,\\n    \\\"isHDR\\\": false,\\n    \\\"isLive\\\": false,\\n    \\\"isVR180\\\": false,\\n    \\\"lengthFilter\\\": \\\"between420\\\",\\n    \\\"maxResultStreams\\\": 0,\\n    \\\"maxResults\\\": 3,\\n    \\\"maxResultsShorts\\\": 0,\\n    \\\"preferAutoGeneratedSubtitles\\\": false,\\n    \\\"saveSubsToKVS\\\": false,\\n    \\\"searchQueries\\\": [\\n        \\\"{{ $json.keyword1 }}\\\",\\n        \\\"{{ $json.keyword2 }}\\\",\\n        \\\"{{ $json.keyword3 }}\\\"\\n    ],\\n    \\\"sortingOrder\\\": \\\"relevance\\\",\\n    \\\"subtitlesLanguage\\\": \\\"en\\\"\\n} \",\"sendBody\":true,\"sendHeaders\":true,\"specifyBody\":\"json\",\"headerParameters\":{\"parameters\":[{\"name\":\"Content-Type\",\"value\":\"application/json\"}]}},\"typeVersion\":4.2},{\"id\":\"\",\"name\":\"Loop Over Items\",\"type\":\"n8n-nodes-base.splitInBatches\",\"position\":[400,-660],\"parameters\":{\"options\":{}},\"typeVersion\":3},{\"id\":\"\",\"name\":\"Mistral Cloud Chat Model\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatMistralCloud\",\"position\":[980,-300],\"parameters\":{\"options\":{}},\"credentials\":{\"mistralCloudApi\":{\"id\":\"\",\"name\":\"Mistral Cloud account\"}},\"typeVersion\":1},{\"id\":\"\",\"name\":\"No Operation, do nothing\",\"type\":\"n8n-nodes-base.noOp\",\"position\":[900,-680],\"parameters\":{},\"typeVersion\":1},{\"id\":\"\",\"name\":\"Airtable\",\"type\":\"n8n-nodes-base.airtable\",\"position\":[1460,-320],\"parameters\":{\"base\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"\",\"cachedResultUrl\":\"https://airtable.com/[YOUR_DB]\",\"cachedResultName\":\"YTB Trend Finder\"},\"table\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"\",\"cachedResultUrl\":\"https://airtable.com/[YOUR_DB]\",\"cachedResultName\":\"Listing\"},\"columns\":{\"value\":{\"Link\":\"={{ $('Loop Over Items').item.json.url }}\",\"Title\":\"={{ $('Loop Over Items').item.json.title }}\",\"Duration\":\"={{ $('Loop Over Items').item.json.duration }}\",\"Structure\":\"={{ $json.text }}\",\"SubsCount\":\"={{ $('Loop Over Items').item.json.numberOfSubscribers }}\",\"Thumbnail\":\"={{ [{ \\\"url\\\": $('Loop Over Items').item.json.thumbnailUrl }] }}\",\"ViewsCount\":\"={{ $('Loop Over Items').item.json.viewCount }}\",\"ChannelName\":\"={{ $('Loop Over Items').item.json.channelName }}\",\"CommentsCount\":\"={{ $('Loop Over Items').item.json.commentsCount }}\"},\"schema\":[{\"id\":\"Link\",\"type\":\"string\",\"display\":true,\"removed\":false,\"readOnly\":false,\"required\":false,\"displayName\":\"Link\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"Title\",\"type\":\"string\",\"display\":true,\"removed\":false,\"readOnly\":false,\"required\":false,\"displayName\":\"Title\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"ChannelName\",\"type\":\"string\",\"display\":true,\"removed\":false,\"readOnly\":false,\"required\":false,\"displayName\":\"ChannelName\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"Thumbnail\",\"type\":\"array\",\"display\":true,\"removed\":false,\"readOnly\":false,\"required\":false,\"displayName\":\"Thumbnail\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"ViewsCount\",\"type\":\"number\",\"display\":true,\"removed\":false,\"readOnly\":false,\"required\":false,\"displayName\":\"ViewsCount\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"SubsCount\",\"type\":\"number\",\"display\":true,\"removed\":false,\"readOnly\":false,\"required\":false,\"displayName\":\"SubsCount\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"CommentsCount\",\"type\":\"number\",\"display\":true,\"removed\":false,\"readOnly\":false,\"required\":false,\"displayName\":\"CommentsCount\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"Duration\",\"type\":\"string\",\"display\":true,\"removed\":false,\"readOnly\":false,\"required\":false,\"displayName\":\"Duration\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"Structure\",\"type\":\"string\",\"display\":true,\"removed\":false,\"readOnly\":false,\"required\":false,\"displayName\":\"Structure\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"VSC Ratio\",\"type\":\"string\",\"display\":true,\"removed\":false,\"readOnly\":true,\"required\":false,\"displayName\":\"VSC Ratio\",\"defaultMatch\":false,\"canBeUsedToMatch\":true}],\"mappingMode\":\"defineBelow\",\"matchingColumns\":[],\"attemptToConvertTypes\":false,\"convertFieldsToString\":false},\"options\":{},\"operation\":\"create\"},\"credentials\":{\"airtableTokenApi\":{\"id\":\"\",\"name\":\"Airtable Personal Access Token account\"}},\"typeVersion\":2.1},{\"id\":\"\",\"name\":\"Schedule Trigger\",\"type\":\"n8n-nodes-base.scheduleTrigger\",\"position\":[-1220,-640],\"parameters\":{\"rule\":{\"interval\":[{\"field\":\"weeks\",\"triggerAtDay\":[1]}]}},\"typeVersion\":1.2},{\"id\":\"\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-1300,-900],\"parameters\":{\"color\":7,\"width\":780,\"height\":440,\"content\":\"## SETUP\\n\\n**Scheduled Trigger :** Select the Frequency you want. If you change it, update the data accordingly in the \\\"Create Videos Dataset\\\" HTTP Request Node in Body ➡️ JSON ➡️ dateFilter.\\n\\n\\n**Setup Keywords :** Enter Keyword Related to the niche you want. If you change the number of keywords, update the data accordingly in the \\\"Create Videos Dataset\\\" HTTP Request Node in Body ➡️ JSON ➡️ searchQueries.\\n\\n**Create Videos Dataset :** Refer to the Apify Documentation for more https://docs.apify.com/api/v2/getting-started\\n\\n**APIs :** For all HTTP Request node in the URL field, replace [YOUR_API_TOKEN] with your API Token. \"},\"typeVersion\":1},{\"id\":\"\",\"name\":\"Text Cleaning\",\"type\":\"n8n-nodes-base.code\",\"position\":[700,-500],\"parameters\":{\"jsCode\":\"// Assume input is a single string like SRT format\\nconst input = $input.first().json.subtitles[0].srt; // or wherever your caption string is\\n\\n// Step-by-step cleanup\\nconst cleaned = input\\n  // Remove caption numbers (lines with only digits)\\n  .replace(/^\\\\d+\\\\s*$/gm, \\\"\\\")\\n  // Remove timing lines\\n  .replace(/^\\\\d{2}:\\\\d{2}:\\\\d{1,2},\\\\d{1,3} --> \\\\d{2}:\\\\d{2}:\\\\d{1,2},\\\\d{1,3}\\\\s*$/gm, \\\"\\\")\\n  // Remove leftover newlines\\n  .replace(/\\\\n{2,}/g, \\\"\\\\n\\\")\\n  // Trim and flatten everything to single paragraph\\n  .replace(/\\\\n/g, \\\" \\\")\\n  .trim();\\n\\nreturn [{ cleanedText: cleaned }];\"},\"typeVersion\":2},{\"id\":\"\",\"name\":\"Text Synthesis \",\"type\":\"@n8n/n8n-nodes-langchain.chainLlm\",\"position\":[960,-500],\"parameters\":{\"text\":\"={{ $json.cleanedText }}\",\"messages\":{\"messageValues\":[{\"type\":\"HumanMessagePromptTemplate\",\"message\":\"=You are a summarization assistant.  Given a transcript of a YouTube video, your task is to summarize the content using only information found in the transcript, do not invent, infer, or add anything beyond what is said.  Structure your output as follows: \\n\\n1. Intro how the video begins or introduces the topic.  Don't do any modification on this part. \\n\\n2. Structure of the Video A breakdown of the video’s flow using bullet points: \\nMajor Points: The main topics or arguments discussed.  \\nSubpoints: Supporting details, examples, or smaller elements related to each major point. Use indentation or clear labeling to distinguish between major points and their related subpoints. \\n\"}]},\"promptType\":\"define\",\"hasOutputParser\":true},\"typeVersion\":1.5},{\"id\":\"\",\"name\":\"Setup Keywords\",\"type\":\"n8n-nodes-base.set\",\"position\":[-960,-640],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"\",\"name\":\"keyword1\",\"type\":\"string\",\"value\":\"Healthy food\"},{\"id\":\"\",\"name\":\"keyword2\",\"type\":\"string\",\"value\":\"Meal prep healthy\"},{\"id\":\"\",\"name\":\"keyword3\",\"type\":\"string\",\"value\":\"High Protein Snack\"}]}},\"typeVersion\":3.4},{\"id\":\"\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-1300,-1140],\"parameters\":{\"color\":7,\"width\":780,\"height\":220,\"content\":\"## How this is Working ?\\n**1 -** Every Week retrieve Keywords you want to track\\n**2 -** Thanks to Apify, scrap video from Youtube Search related to these Keywords filtered by relevance\\n**3 -** Wait until the Dataset is completed\\n**4 -** Get the Information contained in the Dataset\\n**5 -** For each Video, clean and summarize the script\\n**6 -** Upload everything in your Airtable Database\\n\\n**Youtube Video Tutorial : https://youtu.be/pH2hVaij3FY**\\n**Need Help with Your Workflows ? https://tally.so/r/wayeqB**\"},\"typeVersion\":1},{\"id\":\"\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1360,-700],\"parameters\":{\"color\":7,\"width\":320,\"height\":620,\"content\":\"## Airtable DB Fields\\n**1 -** Video Link (ID)\\n**2 -** Video Title\\n**3 -** Channel Name\\n**4 -** Thumbnail ⬇️\\nTo Upload an Image on Airtable Attachement Field you need an Array of the URL in this format : {{ [{ \\\"url\\\": $json.thumbnail}] }}\\n**5 -** Views Count\\n**6 -** Subs Count\\n**7 -** Comments Count\\n**8 -** Duration\\n**9 -** Structure\\n**10 -** VSC Ratio ⬇️\\nFormula :(ViewsCount/SubsCount)*0.7 + (CommentsCount/ViewsCount)*0.3)\\n\"},\"typeVersion\":1}],\"active\":false,\"pinData\":{},\"settings\":{\"executionOrder\":\"v1\"},\"versionId\":\"\",\"connections\":{\"If\":{\"main\":[[{\"node\":\"Get Videos Data\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Wait\",\"type\":\"main\",\"index\":0}]]},\"Wait\":{\"main\":[[{\"node\":\"Check IF Finished\",\"type\":\"main\",\"index\":0}]]},\"Airtable\":{\"main\":[[{\"node\":\"Loop Over Items\",\"type\":\"main\",\"index\":0}]]},\"Text Cleaning\":{\"main\":[[{\"node\":\"Text Synthesis \",\"type\":\"main\",\"index\":0}]]},\"Setup Keywords\":{\"main\":[[{\"node\":\"Create Videos Dataset\",\"type\":\"main\",\"index\":0}]]},\"Get Videos Data\":{\"main\":[[{\"node\":\"Loop Over Items\",\"type\":\"main\",\"index\":0}]]},\"Loop Over Items\":{\"main\":[[{\"node\":\"No Operation, do nothing\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Text Cleaning\",\"type\":\"main\",\"index\":0}]]},\"Text Synthesis \":{\"main\":[[{\"node\":\"Airtable\",\"type\":\"main\",\"index\":0}]]},\"Schedule Trigger\":{\"main\":[[{\"node\":\"Setup Keywords\",\"type\":\"main\",\"index\":0}]]},\"Check IF Finished\":{\"main\":[[{\"node\":\"If\",\"type\":\"main\",\"index\":0}]]},\"Create Videos Dataset\":{\"main\":[[{\"node\":\"Check IF Finished\",\"type\":\"main\",\"index\":0}]]},\"Mistral Cloud Chat Model\":{\"ai_languageModel\":[[{\"node\":\"Text Synthesis \",\"type\":\"ai_languageModel\",\"index\":0}]]}}}",
  "readme": "Here is your text with grammar corrected, while keeping all content exactly as it is:\n\n* * *\n\n## How does it work?\n\n**1 -** Every week, retrieve the keywords you want to track  \n**2 -** Thanks to Apify, scrape videos from YouTube Search related to these keywords, filtered by relevance  \n**3 -** Wait until the dataset is completed  \n**4 -** Get the information contained in the dataset  \n**5 -** For each video, clean and summarize the script  \n**6 -** Upload everything to your Airtable database\n\n**YouTube Video Tutorial:** <https://youtu.be/pH2hVaij3FY>  \n**Need Help with Your Workflows?** <https://tally.so/r/wayeqB>\n\n* * *\n\n## Setup\n\n**Scheduled Trigger:** Select the frequency you want. If you change it, update the data accordingly in the \"Create Videos Dataset\" HTTP Request node in Body ➡️ JSON ➡️ dateFilter.\n\n**Setup Keywords:** Enter keywords related to the niche you want. If you change the number of keywords, update the data accordingly in the \"Create Videos Dataset\" HTTP Request node in Body ➡️ JSON ➡️ searchQueries.\n\n**Create Videos Dataset:** Refer to the Apify documentation for more: <https://docs.apify.com/api/v2/getting-started>\n\n**APIs:** For all HTTP Request nodes in the URL field, replace `[YOUR_API_TOKEN]` with your API token.\n\n* * *\n\n## Airtable DB fields\n\n**1 -** Video Link (ID)  \n**2 -** Video Title  \n**3 -** Channel Name  \n**4 -** Thumbnail ⬇️  \nTo upload an image to an Airtable attachment field, you need an array of the URL in this format:  \n`{{ [{ \"url\": $json.thumbnail }] }}`  \n**5 -** Views Count  \n**6 -** Subs Count  \n**7 -** Comments Count  \n**8 -** Duration  \n**9 -** Structure  \n**10 -** VSC Ratio ⬇️  \nFormula:  \n`(ViewsCount/SubsCount)*0.7 + (CommentsCount/ViewsCount)*0.3`\n",
  "crawled_at": "2025-05-26T06:48:11.498899",
  "readme_zh": "## 运作原理\n\n**1 -** 每周提取您需要追踪的关键词  \n**2 -** 通过Apify从YouTube搜索中抓取与这些关键词相关并按相关性筛选的视频  \n**3 -** 等待数据集完成  \n**4 -** 获取数据集中的信息  \n**5 -** 为每个视频清理并总结脚本内容  \n**6 -** 将所有内容上传至您的Airtable数据库  \n\n**YouTube视频教程:** <https://youtu.be/pH2hVaij3FY>  \n**需要工作流协助?** <https://tally.so/r/wayeqB>  \n\n## 设置步骤  \n\n**定时触发:** 选择您需要的频率。若调整频率，需同步更新\"创建视频数据集\"HTTP请求节点中Body ➡️ JSON ➡️ dateFilter的数据。  \n\n**关键词设置:** 输入目标领域相关的关键词。若关键词数量变更，需同步更新\"创建视频数据集\"HTTP请求节点中Body ➡️ JSON ➡️ searchQueries的数据。  \n\n**创建视频数据集:** 更多细节请参阅Apify文档: <https://docs.apify.com/api/v2/getting-started>  \n\n**API配置:** 所有HTTP请求节点的URL字段中，将`[YOUR_API_TOKEN]`替换为您的API令牌。  \n\n## Airtable数据库字段  \n\n**1 -** 视频链接(ID)  \n**2 -** 视频标题  \n**3 -** 频道名称  \n**4 -** 缩略图 ⬇️  \n上传图片至Airtable附件字段时，需按此格式提供URL数组:  \n`{{ [{ \"url\": $json.thumbnail }] }}`  \n**5 -** 播放量  \n**6 -** 订阅数  \n**7 -** 评论数  \n**8 -** 时长  \n**9 -** 结构  \n**10 -** VSC比率 ⬇️  \n计算公式:  \n`(播放量/订阅数)*0.7 + (评论数/播放量)*0.3`",
  "title_zh": "发现你利基市场中隐藏的YouTube趋势/异常视频（Apify + Airtable）",
  "publish_date_zh": "上次更新于5天前",
  "workflow_json_zh": "{\n  \"id\": \"\",\n  \"meta\": {\n    \"instanceId\": \"\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"name\": \"YTB Outlier Finder\",\n  \"tags\": [],\n  \"nodes\": [\n    {\n      \"id\": \"\",\n      \"name\": \"Wait\",\n      \"type\": \"n8n-nodes-base.wait\",\n      \"position\": [\n        0,\n        -460\n      ],\n      \"webhookId\": \"\",\n      \"parameters\": {},\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"\",\n      \"name\": \"If\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        -160,\n        -640\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"\",\n              \"operator\": {\n                \"name\": \"filter.operator.equals\",\n                \"type\": \"string\",\n                \"operation\": \"equals\"\n              },\n              \"leftValue\": \"={{ $json.data.status }}\",\n              \"rightValue\": \"SUCCEEDED\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"\",\n      \"name\": \"Check IF Finished\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        -440,\n        -640\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.apify.com/v2/acts/streamers~youtube-scraper/runs/last?token=[YOUR_API_TOKEN]\",\n        \"options\": {}\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"\",\n      \"name\": \"Get Videos Data\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        160,\n        -660\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.apify.com/v2/acts/streamers~youtube-scraper/runs/last/dataset/items?token=[YOUR_API_TOKEN]\",\n        \"options\": {}\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"\",\n      \"name\": \"Create Videos Dataset\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        -700,\n        -640\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.apify.com/v2/acts/streamers~youtube-scraper/runs?token=[YOUR_API_TOKEN]\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"jsonBody\": \"={\\n    \\\"dateFilter\\\": \\\"week\\\",\\n    \\\"downloadSubtitles\\\": true,\\n    \\\"hasCC\\\": false,\\n    \\\"hasLocation\\\": false,\\n    \\\"hasSubtitles\\\": false,\\n    \\\"is360\\\": false,\\n    \\\"is3D\\\": false,\\n    \\\"is4K\\\": false,\\n    \\\"isBought\\\": false,\\n    \\\"isHD\\\": false,\\n    \\\"isHDR\\\": false,\\n    \\\"isLive\\\": false,\\n    \\\"isVR180\\\": false,\\n    \\\"lengthFilter\\\": \\\"between420\\\",\\n    \\\"maxResultStreams\\\": 0,\\n    \\\"maxResults\\\": 3,\\n    \\\"maxResultsShorts\\\": 0,\\n    \\\"preferAutoGeneratedSubtitles\\\": false,\\n    \\\"saveSubsToKVS\\\": false,\\n    \\\"searchQueries\\\": [\\n        \\\"{{ $json.keyword1 }}\\\",\\n        \\\"{{ $json.keyword2 }}\\\",\\n        \\\"{{ $json.keyword3 }}\\\"\\n    ],\\n    \\\"sortingOrder\\\": \\\"relevance\\\",\\n    \\\"subtitlesLanguage\\\": \\\"en\\\"\\n} \",\n        \"sendBody\": true,\n        \"sendHeaders\": true,\n        \"specifyBody\": \"json\",\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"Content-Type\",\n              \"value\": \"application/json\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"\",\n      \"name\": \"Loop Over Items\",\n      \"type\": \"n8n-nodes-base.splitInBatches\",\n      \"position\": [\n        400,\n        -660\n      ],\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"\",\n      \"name\": \"Mistral Cloud Chat Model\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatMistralCloud\",\n      \"position\": [\n        980,\n        -300\n      ],\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"credentials\": {\n        \"mistralCloudApi\": {\n          \"id\": \"\",\n          \"name\": \"Mistral Cloud account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"\",\n      \"name\": \"No Operation, do nothing\",\n      \"type\": \"n8n-nodes-base.noOp\",\n      \"position\": [\n        900,\n        -680\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"\",\n      \"name\": \"Airtable\",\n      \"type\": \"n8n-nodes-base.airtable\",\n      \"position\": [\n        1460,\n        -320\n      ],\n      \"parameters\": {\n        \"base\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"\",\n          \"cachedResultUrl\": \"https://airtable.com/[YOUR_DB]\",\n          \"cachedResultName\": \"YTB Trend Finder\"\n        },\n        \"table\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"\",\n          \"cachedResultUrl\": \"https://airtable.com/[YOUR_DB]\",\n          \"cachedResultName\": \"Listing\"\n        },\n        \"columns\": {\n          \"value\": {\n            \"Link\": \"={{ $('Loop Over Items').item.json.url }}\",\n            \"Title\": \"={{ $('Loop Over Items').item.json.title }}\",\n            \"Duration\": \"={{ $('Loop Over Items').item.json.duration }}\",\n            \"Structure\": \"={{ $json.text }}\",\n            \"SubsCount\": \"={{ $('Loop Over Items').item.json.numberOfSubscribers }}\",\n            \"Thumbnail\": \"={{ [{ \\\"url\\\": $('Loop Over Items').item.json.thumbnailUrl }] }}\",\n            \"ViewsCount\": \"={{ $('Loop Over Items').item.json.viewCount }}\",\n            \"ChannelName\": \"={{ $('Loop Over Items').item.json.channelName }}\",\n            \"CommentsCount\": \"={{ $('Loop Over Items').item.json.commentsCount }}\"\n          },\n          \"schema\": [\n            {\n              \"id\": \"Link\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"readOnly\": false,\n              \"required\": false,\n              \"displayName\": \"Link\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Title\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"readOnly\": false,\n              \"required\": false,\n              \"displayName\": \"Title\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"ChannelName\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"readOnly\": false,\n              \"required\": false,\n              \"displayName\": \"ChannelName\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Thumbnail\",\n              \"type\": \"array\",\n              \"display\": true,\n              \"removed\": false,\n              \"readOnly\": false,\n              \"required\": false,\n              \"displayName\": \"Thumbnail\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"ViewsCount\",\n              \"type\": \"number\",\n              \"display\": true,\n              \"removed\": false,\n              \"readOnly\": false,\n              \"required\": false,\n              \"displayName\": \"ViewsCount\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"SubsCount\",\n              \"type\": \"number\",\n              \"display\": true,\n              \"removed\": false,\n              \"readOnly\": false,\n              \"required\": false,\n              \"displayName\": \"SubsCount\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"CommentsCount\",\n              \"type\": \"number\",\n              \"display\": true,\n              \"removed\": false,\n              \"readOnly\": false,\n              \"required\": false,\n              \"displayName\": \"CommentsCount\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Duration\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"readOnly\": false,\n              \"required\": false,\n              \"displayName\": \"Duration\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Structure\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"readOnly\": false,\n              \"required\": false,\n              \"displayName\": \"Structure\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"VSC Ratio\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"readOnly\": true,\n              \"required\": false,\n              \"displayName\": \"VSC Ratio\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            }\n          ],\n          \"mappingMode\": \"defineBelow\",\n          \"matchingColumns\": [],\n          \"attemptToConvertTypes\": false,\n          \"convertFieldsToString\": false\n        },\n        \"options\": {},\n        \"operation\": \"create\"\n      },\n      \"credentials\": {\n        \"airtableTokenApi\": {\n          \"id\": \"\",\n          \"name\": \"Airtable Personal Access Token account\"\n        }\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"\",\n      \"name\": \"Schedule Trigger\",\n      \"type\": \"n8n-nodes-base.scheduleTrigger\",\n      \"position\": [\n        -1220,\n        -640\n      ],\n      \"parameters\": {\n        \"rule\": {\n          \"interval\": [\n            {\n              \"field\": \"weeks\",\n              \"triggerAtDay\": [\n                1\n              ]\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -1300,\n        -900\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 780,\n        \"height\": 440,\n        \"content\": \"## 设置\\n\\n**定时触发器：** 选择您需要的频率。若更改此处设置，需同步更新\\\"创建视频数据集\\\"HTTP请求节点中Body ➡️ JSON ➡️ dateFilter的对应数据。\\n\\n**关键词设置：** 输入与目标领域相关的关键词。若调整关键词数量，需同步更新\\\"创建视频数据集\\\"HTTP请求节点中Body ➡️ JSON ➡️ searchQueries的对应数据。\\n\\n**创建视频数据集：** 更多详情请参阅Apify官方文档 https://docs.apify.com/api/v2/getting-started\\n\\n**API配置：** 所有HTTP请求节点的URL字段中，请将[YOUR_API_TOKEN]替换为您的实际API令牌。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"\",\n      \"name\": \"Text Cleaning\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        700,\n        -500\n      ],\n      \"parameters\": {\n        \"jsCode\": \"// Assume input is a single string like SRT format\\nconst input = $input.first().json.subtitles[0].srt; // or wherever your caption string is\\n\\n// Step-by-step cleanup\\nconst cleaned = input\\n  // Remove caption numbers (lines with only digits)\\n  .replace(/^\\\\d+\\\\s*$/gm, \\\"\\\")\\n  // Remove timing lines\\n  .replace(/^\\\\d{2}:\\\\d{2}:\\\\d{1,2},\\\\d{1,3} --> \\\\d{2}:\\\\d{2}:\\\\d{1,2},\\\\d{1,3}\\\\s*$/gm, \\\"\\\")\\n  // Remove leftover newlines\\n  .replace(/\\\\n{2,}/g, \\\"\\\\n\\\")\\n  // Trim and flatten everything to single paragraph\\n  .replace(/\\\\n/g, \\\" \\\")\\n  .trim();\\n\\nreturn [{ cleanedText: cleaned }];\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"\",\n      \"name\": \"Text Synthesis \",\n      \"type\": \"@n8n/n8n-nodes-langchain.chainLlm\",\n      \"position\": [\n        960,\n        -500\n      ],\n      \"parameters\": {\n        \"text\": \"={{ $json.cleanedText }}\",\n        \"messages\": {\n          \"messageValues\": [\n            {\n              \"type\": \"HumanMessagePromptTemplate\",\n              \"message\": \"=You are a summarization assistant.  Given a transcript of a YouTube video, your task is to summarize the content using only information found in the transcript, do not invent, infer, or add anything beyond what is said.  Structure your output as follows: \\n\\n1. Intro how the video begins or introduces the topic.  Don't do any modification on this part. \\n\\n2. Structure of the Video A breakdown of the video’s flow using bullet points: \\nMajor Points: The main topics or arguments discussed.  \\nSubpoints: Supporting details, examples, or smaller elements related to each major point. Use indentation or clear labeling to distinguish between major points and their related subpoints. \\n\"\n            }\n          ]\n        },\n        \"promptType\": \"define\",\n        \"hasOutputParser\": true\n      },\n      \"typeVersion\": 1.5\n    },\n    {\n      \"id\": \"\",\n      \"name\": \"Setup Keywords\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        -960,\n        -640\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"\",\n              \"name\": \"keyword1\",\n              \"type\": \"string\",\n              \"value\": \"Healthy food\"\n            },\n            {\n              \"id\": \"\",\n              \"name\": \"keyword2\",\n              \"type\": \"string\",\n              \"value\": \"Meal prep healthy\"\n            },\n            {\n              \"id\": \"\",\n              \"name\": \"keyword3\",\n              \"type\": \"string\",\n              \"value\": \"High Protein Snack\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -1300,\n        -1140\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 780,\n        \"height\": 220,\n        \"content\": \"## 运作原理\\n**1 -** 每周提取您需要追踪的关键词  \\n**2 -** 通过Apify从YouTube搜索中抓取与这些关键词相关并按相关性筛选的视频  \\n**3 -** 等待数据集完成  \\n**4 -** 获取数据集中包含的信息  \\n**5 -** 对每个视频的脚本进行清理和摘要  \\n**6 -** 将所有内容上传至您的Airtable数据库  \\n\\n**YouTube视频教程：https://youtu.be/pH2hVaij3FY**  \\n**需要工作流程帮助？https://tally.so/r/wayeqB**\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1360,\n        -700\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 320,\n        \"height\": 620,\n        \"content\": \"## Airtable 数据库字段  \\n**1 -** 视频链接（ID）  \\n**2 -** 视频标题  \\n**3 -** 频道名称  \\n**4 -** 缩略图 ⬇️  \\n在Airtable附件字段上传图片需使用以下格式的URL数组：{{ [{ \\\"url\\\": $json.thumbnail}] }}  \\n**5 -** 观看次数  \\n**6 -** 订阅数  \\n**7 -** 评论数  \\n**8 -** 视频时长  \\n**9 -** 结构分类  \\n**10 -** VSC比率 ⬇️  \\n计算公式：(观看次数/订阅数)*0.7 + (评论数/观看次数)*0.3)\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"active\": false,\n  \"pinData\": {},\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"\",\n  \"connections\": {\n    \"If\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get Videos Data\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Wait\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Wait\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Check IF Finished\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Airtable\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Loop Over Items\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Text Cleaning\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Text Synthesis \",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Setup Keywords\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Create Videos Dataset\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get Videos Data\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Loop Over Items\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Loop Over Items\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"No Operation, do nothing\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Text Cleaning\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Text Synthesis \": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Airtable\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Schedule Trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Setup Keywords\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Check IF Finished\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"If\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Create Videos Dataset\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Check IF Finished\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Mistral Cloud Chat Model\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"Text Synthesis \",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}