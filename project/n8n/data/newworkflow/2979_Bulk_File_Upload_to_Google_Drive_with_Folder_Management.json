{
  "url": "https://n8n.io/workflows/2979-bulk-file-upload-to-google-drive-with-folder-management/",
  "title": "Bulk File Upload to Google Drive with Folder Management",
  "author": "Julian Kaiser",
  "publish_date": "Last update 3 months ago",
  "publish_date_absolute": "2025-02-26",
  "categories": [
    {
      "name": "HR"
    },
    {
      "name": "IT Ops"
    }
  ],
  "workflow_json": "",
  "readme": "# 🗂️ Bulk File Upload to Google Drive with Folder Management\n\n## How it works\n\n  1. User submits files and target folder name via form\n  2. Workflow checks if folder exists in Drive\n  3. Creates folder if needed or uses existing one\n  4. Processes and uploads all files maintaining structure\n\n\n\n## Set up steps (Est. 10-15 mins)\n\n  1. Set up Google Drive credentials in n8n\n  2. Replace parent folder ID in search query with your Drive folder ID\n  3. Configure form node with: \n     * Multiple file upload field\n     * Folder name text field\n  4. Test workflow with sample files\n\n\n\n💡 Detailed configuration steps and patterns are documented in sticky notes within the workflow.\n\nPerfect for:\n\n  * Bulk file organization\n  * Automated Drive folder management\n  * File upload automation\n  * Maintaining consistent file structures\n\n\n",
  "crawled_at": "2025-05-26T02:33:50.603153",
  "readme_zh": "# 🗂️ 批量文件上传至Google Drive并管理文件夹\n\n## 工作原理\n\n  1. 用户通过表单提交文件及目标文件夹名称\n  2. 工作流检查Drive中是否存在该文件夹\n  3. 如需则创建新文件夹，否则使用现有文件夹\n  4. 处理并上传所有文件，保持原有结构",
  "title_zh": "批量上传文件至Google Drive并管理文件夹",
  "publish_date_zh": "最后更新于2个月前",
  "workflow_json_zh": "{\n  \"meta\": {\n    \"instanceId\": \"d4d7965840e96e50a3e02959a8487c692901dfa8d5cc294134442c67ce1622d3\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"nodes\": [\n    {\n      \"id\": \"9252c041-d6b2-49fe-8edb-8d8cb8a1341d\",\n      \"name\": \"On form submission\",\n      \"type\": \"n8n-nodes-base.formTrigger\",\n      \"position\": [\n        240,\n        0\n      ],\n      \"webhookId\": \"0c5c8b39-06a7-4d07-95be-b729d2a9eb6f\",\n      \"parameters\": {\n        \"options\": {},\n        \"formTitle\": \"Batch File Upload to Google Drive\",\n        \"formFields\": {\n          \"values\": [\n            {\n              \"fieldType\": \"file\",\n              \"fieldLabel\": \"file\",\n              \"requiredField\": true\n            },\n            {\n              \"fieldLabel\": \"folderName\",\n              \"requiredField\": true\n            }\n          ]\n        },\n        \"formDescription\": \"Use this form to upload multiple files to a specific Google Drive folder. Simply select your files and specify your target folder name. If the folder doesn't exist yet, we'll create it automatically for you. This streamlined process allows you to organize and store multiple files in one go, saving you time and effort.\"\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"e27712ac-238d-4b45-b842-a044dc40dccd\",\n      \"name\": \"Get Folder Name\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        560,\n        0\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"1b997842-86f3-4bce-b8d2-e8d73387dae1\",\n              \"name\": \"folderName\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.folderName }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"555e761a-ea79-40eb-b36f-72fbcc642fda\",\n      \"name\": \"Search specific folder\",\n      \"type\": \"n8n-nodes-base.googleDrive\",\n      \"position\": [\n        800,\n        0\n      ],\n      \"parameters\": {\n        \"filter\": {},\n        \"options\": {},\n        \"resource\": \"fileFolder\",\n        \"queryString\": \"=mimeType='application/vnd.google-apps.folder' and name = '{{ $json.folderName }}' and '<folderId>' in parents\\n\",\n        \"searchMethod\": \"query\"\n      },\n      \"credentials\": {\n        \"googleDriveOAuth2Api\": {\n          \"id\": \"2SIFnsVfdw9nx9I4\",\n          \"name\": \"Google Drive account\"\n        }\n      },\n      \"executeOnce\": false,\n      \"typeVersion\": 3,\n      \"alwaysOutputData\": true\n    },\n    {\n      \"id\": \"2a92c031-44e5-4e07-89ff-058251c43027\",\n      \"name\": \"Folder found ?\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        1280,\n        0\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"11abd7e3-d90b-4bb1-a8ba-d3cbc4333d8f\",\n              \"operator\": {\n                \"type\": \"object\",\n                \"operation\": \"notEmpty\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $json }}\",\n              \"rightValue\": \"\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"e413cdc8-8424-41d3-8791-e036392a16ac\",\n      \"name\": \"Create Folder\",\n      \"type\": \"n8n-nodes-base.googleDrive\",\n      \"position\": [\n        1680,\n        100\n      ],\n      \"parameters\": {\n        \"name\": \"={{ $('On form submission').item.json.folderName }}\",\n        \"driveId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"My Drive\"\n        },\n        \"options\": {},\n        \"folderId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"17sGS9HdmAtgpd5rC1sVuiIUGyw2hq9IY\",\n          \"cachedResultUrl\": \"https://drive.google.com/drive/folders/17sGS9HdmAtgpd5rC1sVuiIUGyw2hq9IY\",\n          \"cachedResultName\": \"n8n\"\n        },\n        \"resource\": \"folder\"\n      },\n      \"credentials\": {\n        \"googleDriveOAuth2Api\": {\n          \"id\": \"2SIFnsVfdw9nx9I4\",\n          \"name\": \"Google Drive account\"\n        }\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"aada549c-3bbd-453b-9d48-4ab25446d8ce\",\n      \"name\": \"Upload Files\",\n      \"type\": \"n8n-nodes-base.googleDrive\",\n      \"position\": [\n        2180,\n        -100\n      ],\n      \"parameters\": {\n        \"name\": \"={{ $json.fileName }}\",\n        \"driveId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"My Drive\"\n        },\n        \"options\": {},\n        \"folderId\": {\n          \"__rl\": true,\n          \"mode\": \"id\",\n          \"value\": \"={{ $('Search specific folder').item.json.id }}\"\n        },\n        \"inputDataFieldName\": \"=data\"\n      },\n      \"credentials\": {\n        \"googleDriveOAuth2Api\": {\n          \"id\": \"2SIFnsVfdw9nx9I4\",\n          \"name\": \"Google Drive account\"\n        }\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"7b4bcb6e-3b63-4243-8f38-a18f3d5d44f2\",\n      \"name\": \"Prepare Files for Upload\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        1920,\n        -100\n      ],\n      \"parameters\": {\n        \"jsCode\": \"let results = [];\\nconst items = $(\\\"On form submission\\\").all()\\n\\nfor (item of items) {\\n    for (key of Object.keys(item.binary)) {\\n        results.push({\\n            json: {\\n                fileName: item.binary[key].fileName\\n            },\\n            binary: {\\n                data: item.binary[key],\\n            }\\n        });\\n    }\\n}\\n\\nreturn results;\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"1d08ef78-68e7-4901-80fc-17923344fee3\",\n      \"name\": \"Prepare Files for New Folder\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        1920,\n        100\n      ],\n      \"parameters\": {\n        \"jsCode\": \"let results = [];\\nconst items = $(\\\"On form submission\\\").all()\\n\\nfor (item of items) {\\n    for (key of Object.keys(item.binary)) {\\n        results.push({\\n            json: {\\n                fileName: item.binary[key].fileName\\n            },\\n            binary: {\\n                data: item.binary[key],\\n            }\\n        });\\n    }\\n}\\n\\nreturn results;\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"557d2c63-7bbb-4280-b16e-71c6d900973b\",\n      \"name\": \"Upload to New Folder\",\n      \"type\": \"n8n-nodes-base.googleDrive\",\n      \"position\": [\n        2180,\n        100\n      ],\n      \"parameters\": {\n        \"name\": \"={{ $json.fileName }}\",\n        \"driveId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"My Drive\"\n        },\n        \"options\": {},\n        \"folderId\": {\n          \"__rl\": true,\n          \"mode\": \"id\",\n          \"value\": \"={{ $('Create Folder').item.json.id }}\"\n        },\n        \"inputDataFieldName\": \"=data\"\n      },\n      \"credentials\": {\n        \"googleDriveOAuth2Api\": {\n          \"id\": \"2SIFnsVfdw9nx9I4\",\n          \"name\": \"Google Drive account\"\n        }\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"e90ccfb0-cf21-45d2-860e-bc2049ed9682\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -400,\n        -200\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 520,\n        \"height\": 520,\n        \"content\": \"# 🗂️ 批量文件上传至Google Drive并管理文件夹\\n\\n## 概述\\n本工作流处理包含以下内容的表单提交：\\n- 多文件上传（支持任意格式）\\n- 目标文件夹名称输入\\n\\n工作流将自动执行：\\n- 检查Google Drive中是否存在指定文件夹\\n- 若不存在则自动创建该文件夹\\n- 将所有文件上传至正确文件夹\\n- 保持原始文件名和结构\\n\\n是批量上传文件同时保持云端硬盘井井有条的完美解决方案！\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"cd00c8a3-42e3-44f4-89b3-663da809346c\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1100,\n        -440\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 460,\n        \"height\": 380,\n        \"content\": \"## 🔄 决策点：文件夹检查\\n工作流根据文件夹是否存在分叉为两条路径：\\n- ✅ 存在：使用现有文件夹路径\\n- 🆕 不存在：创建新文件夹路径\\n\\n## 🗂️ 现有文件夹路径（上层分支）\\n1. 准备上传文件：拆分文件以进行单独处理\\n2. 上传文件：保持目录结构上传至现有文件夹\\n\\n## 📁 新建文件夹路径（下层分支）\\n1. 创建文件夹：在云端硬盘中生成新文件夹\\n2. 为新文件夹准备文件：拆分文件以进行单独处理\\n3. 上传至新文件夹：将文件上传至新建的文件夹\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"a0b1ff8a-3308-41da-bb4b-01b50cccc456\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1920,\n        -340\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 360,\n        \"height\": 200,\n        \"content\": \"## ⚙️ 文件处理说明\\n- 所有二进制文件均已单独拆分以确保上传处理正常\\n- 原始文件名及结构均完整保留\\n- 两种路径方案均可保证完全一致的文件组织结构\\n\\n另见 https://n8n.io/workflows/1621-split-out-binary-data/\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"c16b2105-638d-4d48-b39d-ff8772375674\",\n      \"name\": \"Sticky Note4\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        400,\n        -340\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 660,\n        \"height\": 280,\n        \"content\": \"## 🔍 搜索查询模式\\n\\n以下搜索模式用于在特定父文件夹中查找指定名称的文件夹：\\n请确保替换<folderId>\\n\\n```javascript\\nmimeType='application/vnd.google-apps.folder' and name = '{{ $json.folderName }}' and '<folderId>' in parents\\n```\\n\\n**重要提示**：始终输出数据以便检查，即使未找到任何结果。\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"Create Folder\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Prepare Files for New Folder\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Folder found ?\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Prepare Files for Upload\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Create Folder\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get Folder Name\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Search specific folder\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"On form submission\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get Folder Name\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Search specific folder\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Folder found ?\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Prepare Files for Upload\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Upload Files\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Prepare Files for New Folder\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Upload to New Folder\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}