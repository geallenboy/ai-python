{
  "url": "https://n8n.io/workflows/3495-loading-json-via-ftp-to-qdrant-vector-database-embedding-pipeline/",
  "title": "Loading JSON via FTP to Qdrant Vector Database Embedding Pipeline",
  "author": "Ghaith Alsirawan",
  "publish_date": "Last update a month ago",
  "publish_date_absolute": "",
  "categories": [
    {
      "name": "AI"
    }
  ],
  "workflow_json": "{\"id\":\"YoUP55V241b9F2ze\",\"meta\":{\"instanceId\":\"35ec7a1e5284dd5dab4dac454bbb30405138d2784c99e56ef8887a4fa9cd1977\",\"templateCredsSetupCompleted\":true},\"name\":\"Qdrant Vector Database Embedding Pipeline\",\"tags\":[],\"nodes\":[{\"id\":\"934ffad4-c93e-40c1-b4fd-1c09b518a9c3\",\"name\":\"Qdrant Vector Store\",\"type\":\"@n8n/n8n-nodes-langchain.vectorStoreQdrant\",\"position\":[460,-460],\"parameters\":{\"mode\":\"insert\",\"options\":{},\"qdrantCollection\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"sv_lang_data\",\"cachedResultName\":\"sv_lang_data\"},\"embeddingBatchSize\":100},\"credentials\":{\"qdrantApi\":{\"id\":\"vUb9tbEnXzu7uNUb\",\"name\":\"QdrantApi svenska\"}},\"typeVersion\":1.1},{\"id\":\"4127d85d-45c9-4536-a15d-08af9dfdcfa8\",\"name\":\"When clicking ‘Test workflow’\",\"type\":\"n8n-nodes-base.manualTrigger\",\"position\":[-960,-460],\"parameters\":{},\"typeVersion\":1},{\"id\":\"abb61b81-72e0-468e-855b-72402db828fc\",\"name\":\"Embeddings OpenAI\",\"type\":\"@n8n/n8n-nodes-langchain.embeddingsOpenAi\",\"position\":[400,-240],\"parameters\":{\"options\":{}},\"credentials\":{\"openAiApi\":{\"id\":\"kftHaZgVKiB9BmKU\",\"name\":\"OpenAi account\"}},\"typeVersion\":1.2},{\"id\":\"e9ae24be-6da9-4c04-b891-7e450f505e02\",\"name\":\"Default Data Loader\",\"type\":\"@n8n/n8n-nodes-langchain.documentDefaultDataLoader\",\"position\":[780,-180],\"parameters\":{\"options\":{},\"dataType\":\"binary\"},\"typeVersion\":1},{\"id\":\"9aff896d-4edb-494c-b84f-ede4e47db1e3\",\"name\":\"Character Text Splitter\",\"type\":\"@n8n/n8n-nodes-langchain.textSplitterCharacterTextSplitter\",\"position\":[800,20],\"parameters\":{\"separator\":\"\\\"chunk_id\\\"\"},\"typeVersion\":1},{\"id\":\"a083a47e-a835-4323-86a8-a2eaed226aaa\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-760,-680],\"parameters\":{\"color\":4,\"width\":260,\"height\":200,\"content\":\"### Fetch JSON File List\\n**Node:** FTP (all files)\\n**Operation:** List\\n**Path:** <file path>\\n\\nRecursively lists all .json files prepared for embedding.\"},\"typeVersion\":1},{\"id\":\"072ae9dc-c1cd-4ceb-954a-6b6b1b984e29\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-460,-660],\"parameters\":{\"color\":5,\"height\":180,\"content\":\"### Iterate Over Files\\n**Node:** Loop Over Items\\n\\nBatches each file path individually for processing.\"},\"typeVersion\":1},{\"id\":\"08d852f2-f1de-42ce-b882-1dc1343ed967\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-160,-700],\"parameters\":{\"color\":4,\"width\":420,\"height\":220,\"content\":\"### Download Each File\\n**Node:** FTP (1 file download)\\n\\nDownloads the current file in binary form using:\\n```\\nPath = file_path/{{ $json.name }}\\n```\"},\"typeVersion\":1},{\"id\":\"905c3d74-2817-4aa3-865d-51e972cbbb5a\",\"name\":\"Sticky Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[920,-80],\"parameters\":{\"color\":3,\"width\":320,\"height\":400,\"content\":\"### Parse JSON Document (Default Data Loader)\\n**Node:** Default Data Loader\\n**Loader Type**: binary\\n- Converts JSON structure into a document format compatible with embedding.\\n\\n\\n### Split into Smaller Chunks\\n**Node:** Character Text Splitter\\n**Split by:** \\\"chunk_id\\\" or custom logic based on chunk formatting\\n\\nOptional node if chunk size normalization is required before embedding.\"},\"typeVersion\":1},{\"id\":\"9fb8e5be-3ee1-42b4-a858-40bc6afcf457\",\"name\":\"List all the files\",\"type\":\"n8n-nodes-base.ftp\",\"position\":[-700,-460],\"parameters\":{\"path\":\"Oracle/AI/embedding/svenska\",\"operation\":\"list\"},\"credentials\":{\"ftp\":{\"id\":\"JufoKeNjsIgbCBWe\",\"name\":\"FTP account\"}},\"typeVersion\":1},{\"id\":\"6f8d0390-5851-44ca-9712-0ae51f9a22ef\",\"name\":\"Loop over one item\",\"type\":\"n8n-nodes-base.splitInBatches\",\"position\":[-400,-460],\"parameters\":{\"options\":{}},\"typeVersion\":3},{\"id\":\"1c89a4a9-ec68-4c48-b7bc-74f5b30d8ac2\",\"name\":\"Downloading item\",\"type\":\"n8n-nodes-base.ftp\",\"position\":[-40,-440],\"parameters\":{\"path\":\"=Oracle/AI/embedding/svenska/{{ $json.name }}\",\"binaryPropertyName\":\"binary.data\"},\"credentials\":{\"ftp\":{\"id\":\"JufoKeNjsIgbCBWe\",\"name\":\"FTP account\"}},\"typeVersion\":1,\"alwaysOutputData\":true},{\"id\":\"01ca4ee3-5f1c-4977-a7f9-88e46db580ad\",\"name\":\"Sticky Note4\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[360,-960],\"parameters\":{\"width\":480,\"height\":460,\"content\":\"### Store in Vector DB\\n**Node:** Qdrant Vector Store\\n**Batch Size:** 100\\n\\n**Collection:** <collection_name>\\nSends cleaned text chunks to OpenAI to get embeddings (1536 dim for text-embedding-ada-002)\\n\\n#### collection settings in Qdrant cluster\\n```\\nPUT /collections/{collection_name}\\n{\\n    \\\"vectors\\\": {\\n      \\\"size\\\": 1536,\\n      \\\"distance\\\": \\\"Cosine\\\"\\n    }\\n}\\n```\\nEmbed Chunks\\n**Node:** Embeddings OpenAI\\nPushes the embedded chunks (with metadata) into Qdrant for semantic retrieval.\"},\"typeVersion\":1}],\"active\":false,\"pinData\":{},\"settings\":{\"executionOrder\":\"v1\"},\"versionId\":\"c71fca63-26e9-4795-9a00-942dab6d07ce\",\"connections\":{\"Downloading item\":{\"main\":[[{\"node\":\"Qdrant Vector Store\",\"type\":\"main\",\"index\":0}]]},\"Embeddings OpenAI\":{\"ai_embedding\":[[{\"node\":\"Qdrant Vector Store\",\"type\":\"ai_embedding\",\"index\":0}]]},\"List all the files\":{\"main\":[[{\"node\":\"Loop over one item\",\"type\":\"main\",\"index\":0}]]},\"Loop over one item\":{\"main\":[[],[{\"node\":\"Downloading item\",\"type\":\"main\",\"index\":0}]]},\"Default Data Loader\":{\"ai_document\":[[{\"node\":\"Qdrant Vector Store\",\"type\":\"ai_document\",\"index\":0}]]},\"Qdrant Vector Store\":{\"main\":[[{\"node\":\"List all the files\",\"type\":\"main\",\"index\":0}]]},\"Character Text Splitter\":{\"ai_textSplitter\":[[{\"node\":\"Default Data Loader\",\"type\":\"ai_textSplitter\",\"index\":0}]]},\"When clicking ‘Test workflow’\":{\"main\":[[{\"node\":\"List all the files\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "🧠 This workflow is designed for one purpose only, to bulk-upload structured JSON articles from an FTP server into a Qdrant vector database for use in LLM-powered semantic search, RAG systems, or AI assistants.\n\nThe JSON files are pre-cleaned and contain metadata and rich text chunks, ready for vectorization. This workflow handles\n\n  * Downloading from FTP\n  * Parsing & splitting\n  * Embedding with OpenAI-embedding\n  * Storing in Qdrant for future querying\n\n\n\n#### JSON structure format for blog articles\n    \n    \n    {\n      \"id\": \"article_001\",\n      \"title\": \"reseguider\",\n      \"language\": \"sv\",\n      \"tags\": [\"london\", \"resa\", \"info\"],\n      \"source\": \"alltomlondon.se\",\n      \"url\": \"https://...\",\n      \"embedded_at\": \"2025-04-08T15:27:00Z\",\n      \"chunks\": [\n        {\n          \"chunk_id\": \"article_001_01\",\n          \"section_title\": \"Introduktion\",\n          \"text\": \"Välkommen till London...\"\n        },\n        ...\n      ]\n    }\n    \n\n### 🧰 Benefits\n\n✅ Automated Vector Loading  \nHandles FTP → JSON → Qdrant in a hands-free pipeline.\n\n✅ Clean Embedding Input  \nSupports pre-validated chunks with metadata: titles, tags, language, and article ID.\n\n✅ AI-Ready Format  \nPerfect for Retrieval-Augmented Generation (RAG), semantic search, or assistant memory.\n\n✅ Flexible Architecture  \nModular and swappable: FTP can be replaced with GDrive/Notion/S3, and embeddings can switch to local models like Ollama.\n\n✅ Community Friendly  \nThis template helps others adopt best practices for vector DB feeding and LLM integration.\n",
  "crawled_at": "2025-05-26T04:39:33.994006",
  "readme_zh": "🧠 本工作流专为单一目标设计：将FTP服务器中的结构化JSON文章批量导入Qdrant向量数据库，用于支持LLM语义搜索、RAG系统或AI助手。\n\n所有JSON文件均已预先清洗，包含元数据和富文本分块，可直接进行向量化处理。该工作流涵盖：\n\n  * 从FTP下载文件\n  * 解析与分块处理\n  * 通过OpenAI嵌入模型生成向量\n  * 存储至Qdrant数据库供后续查询",
  "title_zh": "通过FTP加载JSON至Qdrant向量数据库的嵌入处理流程",
  "publish_date_zh": "上次更新于18天前",
  "workflow_json_zh": "{\n  \"id\": \"YoUP55V241b9F2ze\",\n  \"meta\": {\n    \"instanceId\": \"35ec7a1e5284dd5dab4dac454bbb30405138d2784c99e56ef8887a4fa9cd1977\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"name\": \"Qdrant Vector Database Embedding Pipeline\",\n  \"tags\": [],\n  \"nodes\": [\n    {\n      \"id\": \"934ffad4-c93e-40c1-b4fd-1c09b518a9c3\",\n      \"name\": \"Qdrant Vector Store\",\n      \"type\": \"@n8n/n8n-nodes-langchain.vectorStoreQdrant\",\n      \"position\": [\n        460,\n        -460\n      ],\n      \"parameters\": {\n        \"mode\": \"insert\",\n        \"options\": {},\n        \"qdrantCollection\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"sv_lang_data\",\n          \"cachedResultName\": \"sv_lang_data\"\n        },\n        \"embeddingBatchSize\": 100\n      },\n      \"credentials\": {\n        \"qdrantApi\": {\n          \"id\": \"vUb9tbEnXzu7uNUb\",\n          \"name\": \"QdrantApi svenska\"\n        }\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"4127d85d-45c9-4536-a15d-08af9dfdcfa8\",\n      \"name\": \"When clicking ‘Test workflow’\",\n      \"type\": \"n8n-nodes-base.manualTrigger\",\n      \"position\": [\n        -960,\n        -460\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"abb61b81-72e0-468e-855b-72402db828fc\",\n      \"name\": \"Embeddings OpenAI\",\n      \"type\": \"@n8n/n8n-nodes-langchain.embeddingsOpenAi\",\n      \"position\": [\n        400,\n        -240\n      ],\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"kftHaZgVKiB9BmKU\",\n          \"name\": \"OpenAi account\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"e9ae24be-6da9-4c04-b891-7e450f505e02\",\n      \"name\": \"Default Data Loader\",\n      \"type\": \"@n8n/n8n-nodes-langchain.documentDefaultDataLoader\",\n      \"position\": [\n        780,\n        -180\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"dataType\": \"binary\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"9aff896d-4edb-494c-b84f-ede4e47db1e3\",\n      \"name\": \"Character Text Splitter\",\n      \"type\": \"@n8n/n8n-nodes-langchain.textSplitterCharacterTextSplitter\",\n      \"position\": [\n        800,\n        20\n      ],\n      \"parameters\": {\n        \"separator\": \"\\\"chunk_id\\\"\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"a083a47e-a835-4323-86a8-a2eaed226aaa\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -760,\n        -680\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 260,\n        \"height\": 200,\n        \"content\": \"### 获取JSON文件列表  \\n**节点:** FTP（所有文件）  \\n**操作:** 列表  \\n**路径:** <文件路径>  \\n\\n递归列出所有为嵌入准备的.json文件。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"072ae9dc-c1cd-4ceb-954a-6b6b1b984e29\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -460,\n        -660\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"height\": 180,\n        \"content\": \"### 遍历文件\\n**节点：** 循环处理项目\\n\\n将每个文件路径单独分批进行处理。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"08d852f2-f1de-42ce-b882-1dc1343ed967\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -160,\n        -700\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 420,\n        \"height\": 220,\n        \"content\": \"### 下载每个文件\\n**节点：** FTP（单文件下载）\\n\\n使用以下方式以二进制形式下载当前文件：\\n```\\n路径 = file_path/{{ $json.name }}\\n```\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"905c3d74-2817-4aa3-865d-51e972cbbb5a\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        920,\n        -80\n      ],\n      \"parameters\": {\n        \"color\": 3,\n        \"width\": 320,\n        \"height\": 400,\n        \"content\": \"### 解析JSON文档（默认数据加载器）  \\n**节点:** 默认数据加载器  \\n**加载器类型:** 二进制  \\n- 将JSON结构转换为兼容嵌入处理的文档格式  \\n\\n### 分割为小块  \\n**节点:** 字符文本分割器  \\n**分割依据:** \\\"chunk_id\\\"或基于分块格式的自定义逻辑  \\n\\n如需在嵌入前统一分块大小，此节点为可选配置\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"9fb8e5be-3ee1-42b4-a858-40bc6afcf457\",\n      \"name\": \"List all the files\",\n      \"type\": \"n8n-nodes-base.ftp\",\n      \"position\": [\n        -700,\n        -460\n      ],\n      \"parameters\": {\n        \"path\": \"Oracle/AI/embedding/svenska\",\n        \"operation\": \"list\"\n      },\n      \"credentials\": {\n        \"ftp\": {\n          \"id\": \"JufoKeNjsIgbCBWe\",\n          \"name\": \"FTP account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"6f8d0390-5851-44ca-9712-0ae51f9a22ef\",\n      \"name\": \"Loop over one item\",\n      \"type\": \"n8n-nodes-base.splitInBatches\",\n      \"position\": [\n        -400,\n        -460\n      ],\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"1c89a4a9-ec68-4c48-b7bc-74f5b30d8ac2\",\n      \"name\": \"Downloading item\",\n      \"type\": \"n8n-nodes-base.ftp\",\n      \"position\": [\n        -40,\n        -440\n      ],\n      \"parameters\": {\n        \"path\": \"=Oracle/AI/embedding/svenska/{{ $json.name }}\",\n        \"binaryPropertyName\": \"binary.data\"\n      },\n      \"credentials\": {\n        \"ftp\": {\n          \"id\": \"JufoKeNjsIgbCBWe\",\n          \"name\": \"FTP account\"\n        }\n      },\n      \"typeVersion\": 1,\n      \"alwaysOutputData\": true\n    },\n    {\n      \"id\": \"01ca4ee3-5f1c-4977-a7f9-88e46db580ad\",\n      \"name\": \"Sticky Note4\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        360,\n        -960\n      ],\n      \"parameters\": {\n        \"width\": 480,\n        \"height\": 460,\n        \"content\": \"### 存储至向量数据库\\n**节点:** Qdrant向量存储  \\n**批量大小:** 100  \\n\\n**集合名称:** <collection_name>  \\n将清洗后的文本分块发送至OpenAI获取嵌入向量（text-embedding-ada-002模型生成1536维向量）  \\n\\n#### Qdrant集群中的集合配置\\n```\\nPUT /collections/{collection_name}\\n{\\n    \\\"vectors\\\": {\\n      \\\"size\\\": 1536,\\n      \\\"distance\\\": \\\"Cosine\\\"\\n    }\\n}\\n```\\n嵌入文本分块  \\n**节点:** OpenAI嵌入模型  \\n将带元数据的嵌入分块推入Qdrant数据库，支持语义检索功能。\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"active\": false,\n  \"pinData\": {},\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"c71fca63-26e9-4795-9a00-942dab6d07ce\",\n  \"connections\": {\n    \"Downloading item\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Qdrant Vector Store\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Embeddings OpenAI\": {\n      \"ai_embedding\": [\n        [\n          {\n            \"node\": \"Qdrant Vector Store\",\n            \"type\": \"ai_embedding\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"List all the files\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Loop over one item\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Loop over one item\": {\n      \"main\": [\n        [],\n        [\n          {\n            \"node\": \"Downloading item\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Default Data Loader\": {\n      \"ai_document\": [\n        [\n          {\n            \"node\": \"Qdrant Vector Store\",\n            \"type\": \"ai_document\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Qdrant Vector Store\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"List all the files\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Character Text Splitter\": {\n      \"ai_textSplitter\": [\n        [\n          {\n            \"node\": \"Default Data Loader\",\n            \"type\": \"ai_textSplitter\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When clicking ‘Test workflow’\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"List all the files\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}