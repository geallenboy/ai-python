{
  "url": "https://n8n.io/workflows/3186-process-ko-fi-donations-subscriptions-and-shop-orders-with-webhook-verification/",
  "title": "Process Ko-fi Donations, Subscriptions & Shop Orders with Webhook Verification",
  "author": "Audun",
  "publish_date": "Last update 2 months ago",
  "publish_date_absolute": "2025-03-26",
  "categories": [
    {
      "name": "Finance"
    }
  ],
  "workflow_json": "{\"meta\":{\"instanceId\":\"568298fde06d3db80a2eea77fe5bf45f0c7bb898dea20b769944e9ac7c6c5a80\"},\"nodes\":[{\"id\":\"99bbf837-2834-4cae-af13-37b6cdf963bb\",\"name\":\"Webhook\",\"type\":\"n8n-nodes-base.webhook\",\"position\":[-480,-40],\"webhookId\":\"83f4e1de-2011-487c-a9f7-be6ccbac0782\",\"parameters\":{\"path\":\"83f4e1de-2011-487c-a9f7-be6ccbac0782\",\"options\":{},\"httpMethod\":\"POST\"},\"typeVersion\":2},{\"id\":\"0f7c13ea-196b-40a7-bf1e-4829caaaba4c\",\"name\":\"Stop and Error\",\"type\":\"n8n-nodes-base.stopAndError\",\"position\":[180,60],\"parameters\":{\"errorMessage\":\"Invalid verification token\"},\"typeVersion\":1},{\"id\":\"7ddb4cfc-5917-4b19-acf8-c7db3eaab56a\",\"name\":\"Donation\",\"type\":\"n8n-nodes-base.set\",\"position\":[400,-420],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"67607a8e-55e2-46ec-92f5-1c8ef3addf9c\",\"name\":\"from_name\",\"type\":\"string\",\"value\":\"={{ $json.body.from_name }}\"},{\"id\":\"3e6e86ac-b6c2-4b5f-9e33-22367b9fb9e5\",\"name\":\"message\",\"type\":\"string\",\"value\":\"={{ $json.body.message }}\"},{\"id\":\"4973525a-21b0-442c-8919-24c312f3ff0c\",\"name\":\"amount\",\"type\":\"string\",\"value\":\"={{ $json.body.amount }}\"},{\"id\":\"b7e2d9e1-61c2-4ad1-9cbd-d8a754993fbe\",\"name\":\"url\",\"type\":\"string\",\"value\":\"={{ $json.body.email }}\"},{\"id\":\"da26860f-c1c4-4918-9447-ed080e921fe7\",\"name\":\"currency\",\"type\":\"string\",\"value\":\"={{ $json.body.currency }}\"},{\"id\":\"380dbd53-eb04-4659-aa54-b6bde0ba7034\",\"name\":\"is_public\",\"type\":\"string\",\"value\":\"={{ $json.body.is_public }}\"},{\"id\":\"4fd65c21-3043-4513-96b3-d2e11656e94a\",\"name\":\"timestamp\",\"type\":\"string\",\"value\":\"={{ $json.body.timestamp }}\"}]}},\"typeVersion\":3.4},{\"id\":\"9c29ae0e-d80c-4613-ba11-535cc59d5603\",\"name\":\"Subscription\",\"type\":\"n8n-nodes-base.set\",\"position\":[400,-140],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"886b9cca-15b1-49b4-a123-6f3ceb46279e\",\"name\":\"timestamp\",\"type\":\"string\",\"value\":\"={{ $json.body.timestamp }}\"},{\"id\":\"3c4d9c0e-3cd6-41d2-8223-c48f1dcccedc\",\"name\":\"from_name\",\"type\":\"string\",\"value\":\"={{ $json.body.from_name }}\"},{\"id\":\"7199ad4d-06ad-4bed-939b-e97d6d118d9b\",\"name\":\"message\",\"type\":\"string\",\"value\":\"={{ $json.body.message }}\"},{\"id\":\"270eeac1-b7f9-4cfb-9ac8-b0799b36482e\",\"name\":\"amount\",\"type\":\"string\",\"value\":\"={{ $json.body.amount }}\"},{\"id\":\"dbf3a671-715c-4e29-96d5-2767b6a620d8\",\"name\":\"url\",\"type\":\"string\",\"value\":\"={{ $json.body.url }}\"},{\"id\":\"79ae8427-e5fe-470f-bdc0-df0d8bcbad00\",\"name\":\"email\",\"type\":\"string\",\"value\":\"={{ $json.body.email }}\"},{\"id\":\"90c73e4d-197a-4ba3-b6fb-b7b79b62e69c\",\"name\":\"currency\",\"type\":\"string\",\"value\":\"={{ $json.body.currency }}\"},{\"id\":\"3e23aaad-70f4-429b-bee1-3ae0156aaa86\",\"name\":\"is_first_subscription_payment\",\"type\":\"string\",\"value\":\"={{ $json.body.is_first_subscription_payment }}\"},{\"id\":\"3ca5ca22-d8b7-4a90-a97e-aaed032ef705\",\"name\":\"tier_name\",\"type\":\"string\",\"value\":\"={{ $json.body.tier_name }}\"},{\"id\":\"1347258b-1f6d-4d44-bd64-95fb948cbff9\",\"name\":\"is_public\",\"type\":\"string\",\"value\":\"={{ $json.body.is_public }}\"}]}},\"typeVersion\":3.4},{\"id\":\"a050d88e-bbe8-4ee1-b1c6-31782b5b2f20\",\"name\":\"Shop Order\",\"type\":\"n8n-nodes-base.set\",\"position\":[400,140],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"9f2d01f6-d172-4aea-b2ea-e64857592191\",\"name\":\"from_name\",\"type\":\"string\",\"value\":\"={{ $json.body.from_name }}\"},{\"id\":\"bbc1fcba-ec29-4599-9d78-4e1a37ecede3\",\"name\":\"amount\",\"type\":\"string\",\"value\":\"={{ $json.body.amount }}\"},{\"id\":\"2ea190ac-700b-4682-9baa-7d733f89b819\",\"name\":\"email\",\"type\":\"string\",\"value\":\"={{ $json.body.email }}\"},{\"id\":\"eb0af9d5-9650-4457-b0fd-44f679972a79\",\"name\":\"currency\",\"type\":\"string\",\"value\":\"={{ $json.body.currency }}\"},{\"id\":\"9acec88b-61d5-4520-bf51-f71b4e2e26f6\",\"name\":\"shop_items\",\"type\":\"array\",\"value\":\"={{ $json.body.shop_items }}\"},{\"id\":\"2e1fb035-b32c-492f-9705-7159ef0b2c5d\",\"name\":\"url\",\"type\":\"string\",\"value\":\"={{ $json.body.url }}\"}]}},\"typeVersion\":3.4},{\"id\":\"f9926fda-9a37-467e-b86b-ce9dbb051a88\",\"name\":\"Is new subscriber?\",\"type\":\"n8n-nodes-base.if\",\"position\":[620,-140],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"87fbcc71-a0a4-4820-bb67-9551d44e0500\",\"operator\":{\"name\":\"filter.operator.equals\",\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"={{ $json.is_first_subscription_payment }}\",\"rightValue\":\"true\"}]}},\"typeVersion\":2.2},{\"id\":\"b158a59d-5166-4469-b999-5235768855c0\",\"name\":\"Prepare\",\"type\":\"n8n-nodes-base.set\",\"position\":[-260,-40],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"aabaa149-d74b-464c-bbb6-12e2e8a884d9\",\"name\":\"verificationToken\",\"type\":\"string\",\"value\":\"7dd9d4ef-8412-4add-a0d0-b548ad4564b9\"},{\"id\":\"c2f7a7ce-99b0-44c7-b2cf-1ebf85e0917d\",\"name\":\"body\",\"type\":\"object\",\"value\":\"={{ $json.body.data }}\"}]}},\"typeVersion\":3.4},{\"id\":\"a4fd9607-6d5b-4fbd-a4ce-53e9960887e0\",\"name\":\"Check token\",\"type\":\"n8n-nodes-base.if\",\"position\":[-40,-40],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"439af86e-c768-4165-ae64-86cd32a07084\",\"operator\":{\"name\":\"filter.operator.equals\",\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"={{ $json.body.verification_token }}\",\"rightValue\":\"={{ $json.verificationToken }}\"}]}},\"typeVersion\":2.2},{\"id\":\"6c34228e-434c-4ab3-b0ce-0b5c1721ffc8\",\"name\":\"Check type\",\"type\":\"n8n-nodes-base.switch\",\"position\":[180,-140],\"parameters\":{\"rules\":{\"values\":[{\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"edd5eaa2-60c7-459a-9846-b952b390b1db\",\"operator\":{\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"={{ $json.body.type }}\",\"rightValue\":\"Donation\"}]}},{\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"0cc7f0bf-4d1b-45a5-88ed-5b84050222f8\",\"operator\":{\"name\":\"filter.operator.equals\",\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"={{ $json.body.type }}\",\"rightValue\":\"Subscription\"}]}},{\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"a1b74233-7700-434b-be5c-76129c4cd88c\",\"operator\":{\"name\":\"filter.operator.equals\",\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"={{ $json.body.type }}\",\"rightValue\":\"Shop Order\"}]}}]},\"options\":{}},\"typeVersion\":3.2},{\"id\":\"87fd0134-5eb4-4c47-acb5-137f24e819f4\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-300,-140],\"parameters\":{\"color\":6,\"width\":200,\"height\":260,\"content\":\"### Set verification token\\nSet your Ko-fi  verification token in this node. Available [here](https://ko-fi.com/manage/webhooks).\"},\"typeVersion\":1},{\"id\":\"78ac15cb-1336-424e-a235-6e7a66090b9d\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-520,-140],\"parameters\":{\"color\":6,\"width\":200,\"height\":260,\"content\":\"### Setup your webhook\\nFind your webhook URL in this node and set it  [here](https://ko-fi.com/manage/webhooks).\"},\"typeVersion\":1},{\"id\":\"30892b66-66fb-4926-b817-e280cbadf5ea\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[360,-520],\"parameters\":{\"color\":7,\"width\":540,\"height\":260,\"content\":\"### We received a donation\\nDo your thing.\"},\"typeVersion\":1},{\"id\":\"3b849d93-ffa5-4dfe-8743-d43ca7d06e60\",\"name\":\"Sticky Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[360,-240],\"parameters\":{\"color\":7,\"width\":540,\"height\":260,\"content\":\"### We received a payment for a subscription\\nDo your thing.\"},\"typeVersion\":1},{\"id\":\"bff1913d-1c18-4447-8448-aa059d7b020f\",\"name\":\"Sticky Note4\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[360,40],\"parameters\":{\"color\":7,\"width\":540,\"height\":260,\"content\":\"### We received a shop order\\nDo your thing.\"},\"typeVersion\":1},{\"id\":\"07da890d-5cc8-4f51-b0c2-c50831c84a64\",\"name\":\"Sticky Note5\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-520,-560],\"parameters\":{\"width\":860,\"height\":400,\"content\":\"## Receive and handle Ko-fi payment webhooks \\nThis workflow receives [Ko-fi payment webhooks](https://ko-fi.com/manage/webhooks), checks the verification token and then check what kind of payment it is.\\n\\n### Set up\\n1. Edit the `Webhook` node and find your webhook URL.\\n2. Go to your [Ko-fi webhooks settings](https://ko-fi.com/manage/webhooks) and set your URL\\n3. Get your `verification token` from the same page (under advanced) and set it in the `Prepare` node\\n4. Enable your workflow and test it from [Ko-fi webhooks settings](https://ko-fi.com/manage/webhooks)\\n5. Profit 🎉\\n\\n**👋 Hello! I'm Audun / xqus** \\n🔗 My work: [xqus.com](https://xqus.com)\\n💸 n8n shop: [xqus.gumroad.com](https://xqus.gumroad.com)\\n\\n### Want to trigger my workflow?\\nSupport my work on [Ko-fi](https://ko-fi.com/xquscom) 💸\"},\"typeVersion\":1}],\"pinData\":{},\"connections\":{\"Prepare\":{\"main\":[[{\"node\":\"Check token\",\"type\":\"main\",\"index\":0}]]},\"Webhook\":{\"main\":[[{\"node\":\"Prepare\",\"type\":\"main\",\"index\":0}]]},\"Check type\":{\"main\":[[{\"node\":\"Donation\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Subscription\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Shop Order\",\"type\":\"main\",\"index\":0}]]},\"Check token\":{\"main\":[[{\"node\":\"Check type\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Stop and Error\",\"type\":\"main\",\"index\":0}]]},\"Subscription\":{\"main\":[[{\"node\":\"Is new subscriber?\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "### Who is this for?\n\nThis workflow is tailored for content creators, artists, and developers who use Ko-fi to receive financial support through donations, subscriptions, or product sales.\n\n### Use case\n\nThis workflow automates the process of receiving and categorizing payment notifications from Ko-fi, ensuring that creators can focus on their work rather than administrative tasks.\n\n### What this workflow does\n\n  * **Webhook Reception** : The workflow listens for incoming payment notifications from Ko-fi via a configured webhook.\n  * **Token Verification** : It validates incoming requests to ensure they originate from Ko-fi using a verification token for enhanced security.\n  * **Type Differentiation** : It categorizes payments into types—donations, subscriptions, and shop orders—allowing for tailored handling for each payment type.\n  * **Custom Response Options** : Depending on the payment type received, the workflow activates specific actions or processes, enabling seamless integration with other applications or services.\n\n\n\n### Setup\n\n  1. **Webhook Configuration** :\n\n     * Access the `Webhook` node within the workflow and take note of your unique webhook URL.\n     * Visit your Ko-fi webhooks management page at [Ko-fi Webhooks Management](https://ko-fi.com/manage/webhooks) and input this URL.\n  2. **Verification Token Setup** :\n\n     * In your Ko-fi account, locate the verification token in the advanced settings.\n     * Input this token in the `Prepare` node of your n8n workflow.\n  3. **Enable the Workflow** :\n\n     * Activate the workflow in n8n to start listening for incoming webhook notifications.\n  4. **Testing** :\n\n     * Use the test feature in the Ko-fi webhooks settings to send a test webhook to ensure everything is functioning as expected.\n\n\n\n### How to customize this workflow to your needs\n\n  * **Add Actions for Each Payment Type** : You can modify the `Donation`, `Subscription`, and `Shop Order` nodes to include actions such as sending emails, logging payments within a database, or triggering notifications.\n\n  * **Enhance Security Measures** : You can further refine the `Check token` node to include additional checks or to log all incoming webhook requests for monitoring.\n\n  * **Integration with Other Services** : Consider linking this workflow with messaging platforms (e.g., Slack, Discord) or CRM tools to keep your supporters informed or to manage relationships more effectively.\n\n  * **Custom Fields** : If needed, adjust the fields captured in the `Subscription` and `Shop Order` nodes to include more data or different parameters based on your specific use case.\n\n\n\n",
  "crawled_at": "2025-05-26T03:57:15.443811",
  "readme_zh": "### 适用对象\n\n本工作流专为通过Ko-fi接收捐款、订阅或商品销售收入的创作者、艺术家和开发者设计。\n\n### 使用场景\n\n该工作流可自动接收并分类来自Ko-fi的支付通知，让创作者能专注于创作而非行政事务。\n\n### 功能说明\n\n* **Webhook接收**：通过配置的webhook实时监听Ko-fi支付通知  \n* **令牌验证**：使用验证令牌校验请求来源，确保通信安全  \n* **类型区分**：将支付分为捐款、订阅和店铺订单三类，支持差异化处理  \n* **定制响应**：根据支付类型触发特定操作，实现与其他应用服务的无缝对接  \n\n### 配置步骤\n\n1. **Webhook配置**  \n   * 在工作流的`Webhook`节点中获取专属URL  \n   * 登录[Ko-fi管理后台](https://ko-fi.com/manage/webhooks)填写该URL  \n\n2. **验证令牌设置**  \n   * 在Ko-fi账户高级设置中找到验证令牌  \n   * 将令牌填入n8n工作流的`Prepare`节点  \n\n3. **启用工作流**  \n   * 在n8n中激活工作流开始监听  \n\n4. **测试验证**  \n   * 使用Ko-fi的测试功能发送模拟webhook确认运行正常  \n\n### 定制指南\n\n* **支付类型动作扩展**  \n  可修改`捐款`、`订阅`、`店铺订单`节点，添加邮件通知、支付记录存储或消息提醒等功能  \n\n* **安全增强**  \n  在`检查令牌`节点增加额外验证逻辑，或记录所有webhook请求用于审计  \n\n* **多平台对接**  \n  接入Slack/Discord等通讯工具或CRM系统，实时同步支持者动态  \n\n* **字段自定义**  \n  按需调整`订阅`和`店铺订单`节点的数据字段，捕获特定业务参数  \n\n（注：译文在保持技术准确性的基础上，采用短句结构和行业术语，如\"webhook/令牌\"等专业词汇保留原表述；将英文被动语态转换为中文主动句式；\"seamless integration\"译为\"无缝对接\"符合中文技术文档习惯；链接与专业平台名称维持原貌确保可操作性）",
  "title_zh": "处理带有Webhook验证的Ko-fi捐款、订阅及商店订单",
  "publish_date_zh": "最后更新于2个月前",
  "workflow_json_zh": "{\n  \"meta\": {\n    \"instanceId\": \"568298fde06d3db80a2eea77fe5bf45f0c7bb898dea20b769944e9ac7c6c5a80\"\n  },\n  \"nodes\": [\n    {\n      \"id\": \"99bbf837-2834-4cae-af13-37b6cdf963bb\",\n      \"name\": \"Webhook\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"position\": [\n        -480,\n        -40\n      ],\n      \"webhookId\": \"83f4e1de-2011-487c-a9f7-be6ccbac0782\",\n      \"parameters\": {\n        \"path\": \"83f4e1de-2011-487c-a9f7-be6ccbac0782\",\n        \"options\": {},\n        \"httpMethod\": \"POST\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"0f7c13ea-196b-40a7-bf1e-4829caaaba4c\",\n      \"name\": \"Stop and Error\",\n      \"type\": \"n8n-nodes-base.stopAndError\",\n      \"position\": [\n        180,\n        60\n      ],\n      \"parameters\": {\n        \"errorMessage\": \"Invalid verification token\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"7ddb4cfc-5917-4b19-acf8-c7db3eaab56a\",\n      \"name\": \"Donation\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        400,\n        -420\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"67607a8e-55e2-46ec-92f5-1c8ef3addf9c\",\n              \"name\": \"from_name\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.body.from_name }}\"\n            },\n            {\n              \"id\": \"3e6e86ac-b6c2-4b5f-9e33-22367b9fb9e5\",\n              \"name\": \"message\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.body.message }}\"\n            },\n            {\n              \"id\": \"4973525a-21b0-442c-8919-24c312f3ff0c\",\n              \"name\": \"amount\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.body.amount }}\"\n            },\n            {\n              \"id\": \"b7e2d9e1-61c2-4ad1-9cbd-d8a754993fbe\",\n              \"name\": \"url\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.body.email }}\"\n            },\n            {\n              \"id\": \"da26860f-c1c4-4918-9447-ed080e921fe7\",\n              \"name\": \"currency\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.body.currency }}\"\n            },\n            {\n              \"id\": \"380dbd53-eb04-4659-aa54-b6bde0ba7034\",\n              \"name\": \"is_public\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.body.is_public }}\"\n            },\n            {\n              \"id\": \"4fd65c21-3043-4513-96b3-d2e11656e94a\",\n              \"name\": \"timestamp\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.body.timestamp }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"9c29ae0e-d80c-4613-ba11-535cc59d5603\",\n      \"name\": \"Subscription\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        400,\n        -140\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"886b9cca-15b1-49b4-a123-6f3ceb46279e\",\n              \"name\": \"timestamp\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.body.timestamp }}\"\n            },\n            {\n              \"id\": \"3c4d9c0e-3cd6-41d2-8223-c48f1dcccedc\",\n              \"name\": \"from_name\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.body.from_name }}\"\n            },\n            {\n              \"id\": \"7199ad4d-06ad-4bed-939b-e97d6d118d9b\",\n              \"name\": \"message\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.body.message }}\"\n            },\n            {\n              \"id\": \"270eeac1-b7f9-4cfb-9ac8-b0799b36482e\",\n              \"name\": \"amount\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.body.amount }}\"\n            },\n            {\n              \"id\": \"dbf3a671-715c-4e29-96d5-2767b6a620d8\",\n              \"name\": \"url\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.body.url }}\"\n            },\n            {\n              \"id\": \"79ae8427-e5fe-470f-bdc0-df0d8bcbad00\",\n              \"name\": \"email\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.body.email }}\"\n            },\n            {\n              \"id\": \"90c73e4d-197a-4ba3-b6fb-b7b79b62e69c\",\n              \"name\": \"currency\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.body.currency }}\"\n            },\n            {\n              \"id\": \"3e23aaad-70f4-429b-bee1-3ae0156aaa86\",\n              \"name\": \"is_first_subscription_payment\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.body.is_first_subscription_payment }}\"\n            },\n            {\n              \"id\": \"3ca5ca22-d8b7-4a90-a97e-aaed032ef705\",\n              \"name\": \"tier_name\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.body.tier_name }}\"\n            },\n            {\n              \"id\": \"1347258b-1f6d-4d44-bd64-95fb948cbff9\",\n              \"name\": \"is_public\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.body.is_public }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"a050d88e-bbe8-4ee1-b1c6-31782b5b2f20\",\n      \"name\": \"Shop Order\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        400,\n        140\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"9f2d01f6-d172-4aea-b2ea-e64857592191\",\n              \"name\": \"from_name\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.body.from_name }}\"\n            },\n            {\n              \"id\": \"bbc1fcba-ec29-4599-9d78-4e1a37ecede3\",\n              \"name\": \"amount\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.body.amount }}\"\n            },\n            {\n              \"id\": \"2ea190ac-700b-4682-9baa-7d733f89b819\",\n              \"name\": \"email\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.body.email }}\"\n            },\n            {\n              \"id\": \"eb0af9d5-9650-4457-b0fd-44f679972a79\",\n              \"name\": \"currency\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.body.currency }}\"\n            },\n            {\n              \"id\": \"9acec88b-61d5-4520-bf51-f71b4e2e26f6\",\n              \"name\": \"shop_items\",\n              \"type\": \"array\",\n              \"value\": \"={{ $json.body.shop_items }}\"\n            },\n            {\n              \"id\": \"2e1fb035-b32c-492f-9705-7159ef0b2c5d\",\n              \"name\": \"url\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.body.url }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"f9926fda-9a37-467e-b86b-ce9dbb051a88\",\n      \"name\": \"Is new subscriber?\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        620,\n        -140\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"87fbcc71-a0a4-4820-bb67-9551d44e0500\",\n              \"operator\": {\n                \"name\": \"filter.operator.equals\",\n                \"type\": \"string\",\n                \"operation\": \"equals\"\n              },\n              \"leftValue\": \"={{ $json.is_first_subscription_payment }}\",\n              \"rightValue\": \"true\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"b158a59d-5166-4469-b999-5235768855c0\",\n      \"name\": \"Prepare\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        -260,\n        -40\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"aabaa149-d74b-464c-bbb6-12e2e8a884d9\",\n              \"name\": \"verificationToken\",\n              \"type\": \"string\",\n              \"value\": \"7dd9d4ef-8412-4add-a0d0-b548ad4564b9\"\n            },\n            {\n              \"id\": \"c2f7a7ce-99b0-44c7-b2cf-1ebf85e0917d\",\n              \"name\": \"body\",\n              \"type\": \"object\",\n              \"value\": \"={{ $json.body.data }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"a4fd9607-6d5b-4fbd-a4ce-53e9960887e0\",\n      \"name\": \"Check token\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        -40,\n        -40\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"439af86e-c768-4165-ae64-86cd32a07084\",\n              \"operator\": {\n                \"name\": \"filter.operator.equals\",\n                \"type\": \"string\",\n                \"operation\": \"equals\"\n              },\n              \"leftValue\": \"={{ $json.body.verification_token }}\",\n              \"rightValue\": \"={{ $json.verificationToken }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"6c34228e-434c-4ab3-b0ce-0b5c1721ffc8\",\n      \"name\": \"Check type\",\n      \"type\": \"n8n-nodes-base.switch\",\n      \"position\": [\n        180,\n        -140\n      ],\n      \"parameters\": {\n        \"rules\": {\n          \"values\": [\n            {\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 2,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"edd5eaa2-60c7-459a-9846-b952b390b1db\",\n                    \"operator\": {\n                      \"type\": \"string\",\n                      \"operation\": \"equals\"\n                    },\n                    \"leftValue\": \"={{ $json.body.type }}\",\n                    \"rightValue\": \"Donation\"\n                  }\n                ]\n              }\n            },\n            {\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 2,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"0cc7f0bf-4d1b-45a5-88ed-5b84050222f8\",\n                    \"operator\": {\n                      \"name\": \"filter.operator.equals\",\n                      \"type\": \"string\",\n                      \"operation\": \"equals\"\n                    },\n                    \"leftValue\": \"={{ $json.body.type }}\",\n                    \"rightValue\": \"Subscription\"\n                  }\n                ]\n              }\n            },\n            {\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 2,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"a1b74233-7700-434b-be5c-76129c4cd88c\",\n                    \"operator\": {\n                      \"name\": \"filter.operator.equals\",\n                      \"type\": \"string\",\n                      \"operation\": \"equals\"\n                    },\n                    \"leftValue\": \"={{ $json.body.type }}\",\n                    \"rightValue\": \"Shop Order\"\n                  }\n                ]\n              }\n            }\n          ]\n        },\n        \"options\": {}\n      },\n      \"typeVersion\": 3.2\n    },\n    {\n      \"id\": \"87fd0134-5eb4-4c47-acb5-137f24e819f4\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -300,\n        -140\n      ],\n      \"parameters\": {\n        \"color\": 6,\n        \"width\": 200,\n        \"height\": 260,\n        \"content\": \"### 设置验证令牌\\n在此节点中设置您的Ko-fi验证令牌。可在此处获取[链接](https://ko-fi.com/manage/webhooks)。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"78ac15cb-1336-424e-a235-6e7a66090b9d\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -520,\n        -140\n      ],\n      \"parameters\": {\n        \"color\": 6,\n        \"width\": 200,\n        \"height\": 260,\n        \"content\": \"### 设置您的Webhook\\n在此节点中找到您的Webhook URL，并在[此处](https://ko-fi.com/manage/webhooks)进行设置。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"30892b66-66fb-4926-b817-e280cbadf5ea\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        360,\n        -520\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 540,\n        \"height\": 260,\n        \"content\": \"### 我们收到了一笔捐款\\n该你出手了。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"3b849d93-ffa5-4dfe-8743-d43ca7d06e60\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        360,\n        -240\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 540,\n        \"height\": 260,\n        \"content\": \"### 我们收到了一笔订阅付款\\n该你出手了。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"bff1913d-1c18-4447-8448-aa059d7b020f\",\n      \"name\": \"Sticky Note4\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        360,\n        40\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 540,\n        \"height\": 260,\n        \"content\": \"### 收到店铺订单\\n开始干活吧。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"07da890d-5cc8-4f51-b0c2-c50831c84a64\",\n      \"name\": \"Sticky Note5\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -520,\n        -560\n      ],\n      \"parameters\": {\n        \"width\": 860,\n        \"height\": 400,\n        \"content\": \"## 接收并处理Ko-fi支付Webhook  \\n本工作流用于接收[Ko-fi支付Webhook](https://ko-fi.com/manage/webhooks)，验证令牌并判断支付类型。\\n\\n### 设置步骤  \\n1. 编辑`Webhook`节点获取你的Webhook URL  \\n2. 前往[Ko-fi的Webhook设置页面](https://ko-fi.com/manage/webhooks)配置该URL  \\n3. 从同一页面（高级设置区域）获取`验证令牌`并填入`Prepare`节点  \\n4. 启用工作流后，通过[Ko-fi的Webhook设置页面](https://ko-fi.com/manage/webhooks)进行测试  \\n5. 开始盈利 🎉  \\n\\n**👋 你好！我是Audun / xqus**  \\n🔗 我的作品：[xqus.com](https://xqus.com)  \\n💸 n8n商店：[xqus.gumroad.com](https://xqus.gumroad.com)  \\n\\n### 想触发我的工作流？  \\n欢迎在[Ko-fi](https://ko-fi.com/xquscom)支持我的创作 💸\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"Prepare\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Check token\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Webhook\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Prepare\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Check type\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Donation\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Subscription\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Shop Order\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Check token\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Check type\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Stop and Error\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Subscription\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Is new subscriber?\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}