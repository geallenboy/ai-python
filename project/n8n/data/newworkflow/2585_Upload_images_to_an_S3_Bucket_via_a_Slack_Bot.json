{
  "url": "https://n8n.io/workflows/2585-upload-images-to-an-s3-bucket-via-a-slack-bot/",
  "title": "Upload images to an S3 Bucket via a Slack Bot",
  "author": "Angel Menendez",
  "publish_date": "Last update 6 months ago",
  "publish_date_absolute": "2024-11-26",
  "categories": [
    {
      "name": "DevOps"
    },
    {
      "name": "Marketing"
    },
    {
      "name": "IT Ops"
    }
  ],
  "workflow_json": "{\"nodes\":[{\"id\":\"ec2683b4-06ae-4255-bf20-b6c5850f4fc5\",\"name\":\"Parse Webhook\",\"type\":\"n8n-nodes-base.set\",\"position\":[-480,1100],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"e63f9299-a19d-4ba1-93b0-59f458769fb2\",\"name\":\"response\",\"type\":\"object\",\"value\":\"={{ $json.body.payload }}\"}]}},\"typeVersion\":3.3},{\"id\":\"bb178ce9-3177-433e-a877-3635be7c3705\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-820,740],\"parameters\":{\"color\":7,\"width\":466.8168310000617,\"height\":567.6433222116042,\"content\":\"![Imgur](https://i.imgur.com/iKyMV0N.png)\\n## Events Webhook Trigger\\nThe first node receives all messages from Slack API via Subscription Events API. You can find more information about setting up the subscription events API by [clicking here](https://api.slack.com/apis/connections/events-api). \\n\\nThe second node extracts the payload from slack into an object that n8n can understand.  \"},\"typeVersion\":1},{\"id\":\"04d35926-1c7d-406b-90f1-9641680cb3b7\",\"name\":\"Sticky Note15\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-340,420],\"parameters\":{\"color\":7,\"width\":566.0553219408072,\"height\":1390.6748140207737,\"content\":\"![n8n](https://i.imgur.com/lKnBNnH.png)\\n## Efficient Slack Interaction Handling with n8n\\n\\nThis section of the workflow is designed to efficiently manage and route messages and submissions from Slack based on specific triggers and conditions. When a Slack interaction occurs—such as a user triggering a vulnerability scan or generating a report through a modal—the workflow intelligently routes the message to the appropriate action:\\n\\n- **Dynamic Routing**: Uses conditions to determine the nature of the Slack interaction, whether it's a direct command to initiate a scan or a request to generate a report.\\n- **Modal Management**: Differentiates actions based on modal titles and `callback_id`s, ensuring that each type of submission is processed according to its context.\\n- **Streamlined Responses**: After routing, the workflow promptly handles the necessary responses or actions, including closing modal popups and responding to Slack with appropriate confirmation or data.\\n\\n**Purpose**: This mechanism ensures that all interactions within Slack are handled quickly and accurately, automating responses and actions in real-time to enhance user experience and workflow efficiency.\"},\"typeVersion\":1},{\"id\":\"e6a046b1-1c8b-4585-b257-117f562dd30f\",\"name\":\"Sticky Note11\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[240,520],\"parameters\":{\"color\":7,\"width\":396.6025898621133,\"height\":1553.6713675640199,\"content\":\"![Imgur](https://i.imgur.com/iKyMV0N.png)\\n## Display Modal Popup\\nThis section pops open a modal window that is later used to send data into TheHive. \\n\\nModals can be customized to perform all sorts of actions. And they are natively mobile! You can see a screenshot of the Slack Modals on the right. \\n\\nLearn more about them by [clicking here](https://api.slack.com/surfaces/modals)\"},\"typeVersion\":1},{\"id\":\"93b094eb-4a0a-4639-b343-932b7f261b0d\",\"name\":\"Close Modal Popup\",\"type\":\"n8n-nodes-base.respondToWebhook\",\"position\":[-320,2180],\"parameters\":{\"options\":{},\"respondWith\":\"json\",\"responseBody\":\"{\\n  \\\"response_action\\\": \\\"clear\\\"\\n}\"},\"typeVersion\":1.1},{\"id\":\"6d67a6f5-9966-40a9-a9ad-db514027257b\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[240,860],\"parameters\":{\"color\":5,\"width\":376.26546828439086,\"height\":113.6416448104651,\"content\":\"### 🙋 Don't forget your slack credentials!\\nThankfully n8n makes it easy, as long as you've added credentials to a normal slack node, these http nodes are a snap to change via the drop down. \"},\"typeVersion\":1},{\"id\":\"3222f63e-036f-43b6-9d60-a9d1a19bafa5\",\"name\":\"Idea Selector Modal\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[320,1000],\"parameters\":{\"url\":\"https://slack.com/api/views.open\",\"method\":\"POST\",\"options\":{},\"jsonBody\":\"=  {\\n    \\\"trigger_id\\\": \\\"{{ $('Parse Webhook').item.json['response']['trigger_id'] }}\\\",\\n    \\\"external_id\\\": \\\"Image Uploader\\\",\\n    \\\"view\\\": {\\n\\t\\\"title\\\": {\\n\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\\"text\\\": \\\"File Upload - Select\\\",\\n\\t\\t\\\"emoji\\\": true\\n\\t},\\n\\t\\\"type\\\": \\\"modal\\\",\\n\\t\\\"external_id\\\": \\\"file_upload_selector\\\",\\n\\t\\\"close\\\": {\\n\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\\"text\\\": \\\"Cancel\\\",\\n\\t\\t\\\"emoji\\\": true\\n\\t},\\n\\t\\\"blocks\\\": [\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"section\\\",\\n\\t\\t\\t\\\"block_id\\\": \\\"greeting_section\\\",\\n\\t\\t\\t\\\"text\\\": {\\n\\t\\t\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\t\\t\\\"text\\\": \\\":wave: Hey {{ $('Route Message').item.json.response.user.username }}!\\\\n\\\\nNeed to upload an image to a public repository? If so, you've come to the right place. Use the form below to upload your images to our public S3 CDN. You will get a message with the link to the file after submission. This tool only accepts .jpg, .png, and .pdf uploads.\\\",\\n\\t\\t\\t\\t\\\"emoji\\\": true\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"divider\\\",\\n\\t\\t\\t\\\"block_id\\\": \\\"divider_1\\\"\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"actions\\\",\\n\\t\\t\\t\\\"block_id\\\": \\\"folder_type_selection\\\",\\n\\t\\t\\t\\\"elements\\\": [\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\\"type\\\": \\\"radio_buttons\\\",\\n\\t\\t\\t\\t\\t\\\"options\\\": [\\n\\t\\t\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\t\\t\\\"text\\\": {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\t\\t\\t\\t\\t\\t\\\"text\\\": \\\"Create New Folder\\\",\\n\\t\\t\\t\\t\\t\\t\\t\\t\\\"emoji\\\": true\\n\\t\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\t\\t\\\"value\\\": \\\"createfolder\\\"\\n\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\t\\t\\\"text\\\": {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\t\\t\\t\\t\\t\\t\\\"text\\\": \\\"Use Existing Folder\\\",\\n\\t\\t\\t\\t\\t\\t\\t\\t\\\"emoji\\\": true\\n\\t\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\t\\t\\\"value\\\": \\\"selectfolder\\\"\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t],\\n\\t\\t\\t\\t\\t\\\"action_id\\\": \\\"folder-type\\\"\\n\\t\\t\\t\\t}\\n\\t\\t\\t]\\n\\t\\t}\\n\\t]\\n}\\n}\",\"sendBody\":true,\"jsonQuery\":\"{\\n  \\\"Content-type\\\": \\\"application/json\\\"\\n}\",\"sendQuery\":true,\"specifyBody\":\"json\",\"specifyQuery\":\"json\",\"authentication\":\"predefinedCredentialType\",\"nodeCredentialType\":\"slackApi\"},\"credentials\":{\"slackApi\":{\"id\":\"GjRorC99RZt4Wnrp\",\"name\":\"Image Upload Bot\"}},\"typeVersion\":4.2},{\"id\":\"a23e7c3b-7f20-4832-a4f0-a696e661accf\",\"name\":\"Route Message\",\"type\":\"n8n-nodes-base.switch\",\"position\":[-300,1100],\"parameters\":{\"rules\":{\"values\":[{\"outputKey\":\"Idea Selector\",\"conditions\":{\"options\":{\"version\":1,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"operator\":{\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"={{ $json.response.callback_id }}\",\"rightValue\":\"idea_selector\"}]},\"renameOutput\":true},{\"outputKey\":\"Block Action\",\"conditions\":{\"options\":{\"version\":1,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"a0374196-2553-4916-bc55-c2ea663a7c1f\",\"operator\":{\"name\":\"filter.operator.equals\",\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"={{ $json.response.type }}\",\"rightValue\":\"block_actions\"}]},\"renameOutput\":true},{\"outputKey\":\"Submit Data\",\"conditions\":{\"options\":{\"version\":1,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"65daa75f-2e17-4ba0-8fd8-2ac2159399e3\",\"operator\":{\"name\":\"filter.operator.equals\",\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"={{ $json.response.type }}\",\"rightValue\":\"view_submission\"}]},\"renameOutput\":true}]},\"options\":{\"fallbackOutput\":\"none\"}},\"typeVersion\":3},{\"id\":\"91cde8d3-2eca-4a00-a2cc-61a4f2d3280f\",\"name\":\"Route Message1\",\"type\":\"n8n-nodes-base.switch\",\"position\":[40,1400],\"parameters\":{\"rules\":{\"values\":[{\"outputKey\":\"Create Folder\",\"conditions\":{\"options\":{\"version\":1,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"02868fd8-2577-4c6d-af5e-a1963cb2f786\",\"operator\":{\"name\":\"filter.operator.equals\",\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"={{ $json.response.view.state.values.folder_type_selection['folder-type'].selected_option.value }}\",\"rightValue\":\"createfolder\"}]},\"renameOutput\":true},{\"outputKey\":\"Select Folder\",\"conditions\":{\"options\":{\"version\":1,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"211e13e8-3433-42d3-8884-ad89f2fee5d0\",\"operator\":{\"name\":\"filter.operator.equals\",\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"={{ $json.response.view.state.values.folder_type_selection['folder-type'].selected_option.value }}\",\"rightValue\":\"selectfolder\"}]},\"renameOutput\":true}]},\"options\":{\"fallbackOutput\":\"none\"}},\"typeVersion\":3},{\"id\":\"0dd0e945-8a1d-4ba8-b711-e8ccc4a98ec1\",\"name\":\"Create Folder\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[320,1320],\"parameters\":{\"url\":\"https://slack.com/api/views.push\",\"method\":\"POST\",\"options\":{},\"jsonBody\":\"=  {\\n    \\\"trigger_id\\\": \\\"{{ $('Parse Webhook').item.json['response']['trigger_id'] }}\\\",\\n    \\\"view\\\": {\\n\\t\\\"title\\\": {\\n\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\\"text\\\": \\\"File Upload - New Folder\\\",\\n\\t\\t\\\"emoji\\\": true\\n\\t},\\n\\t\\\"submit\\\": {\\n\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\\"text\\\": \\\"Upload\\\",\\n\\t\\t\\\"emoji\\\": true\\n\\t},\\n\\t\\\"type\\\": \\\"modal\\\",\\n\\t\\\"external_id\\\": \\\"file_upload_new_folder\\\",\\n\\t\\\"close\\\": {\\n\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\\"text\\\": \\\"Cancel\\\",\\n\\t\\t\\\"emoji\\\": true\\n\\t},\\n\\t\\\"blocks\\\": [\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"section\\\",\\n\\t\\t\\t\\\"block_id\\\": \\\"greeting_section\\\",\\n\\t\\t\\t\\\"text\\\": {\\n\\t\\t\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\t\\t\\\"text\\\": \\\":wave: Hey there!\\\\n\\\\nNeed to upload an image to a public repository? If so, you've come to the right place. Use the form below to upload your images to our public S3 CDN. You will get a message with the link to the file after submission. This tool only accepts .jpg, .png, and .pdf uploads.\\\",\\n\\t\\t\\t\\t\\\"emoji\\\": true\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"divider\\\",\\n\\t\\t\\t\\\"block_id\\\": \\\"divider_1\\\"\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"input\\\",\\n\\t\\t\\t\\\"block_id\\\": \\\"folder_name_block\\\",\\n\\t\\t\\t\\\"element\\\": {\\n\\t\\t\\t\\t\\\"type\\\": \\\"plain_text_input\\\",\\n\\t\\t\\t\\t\\\"action_id\\\": \\\"folder_name_input_action\\\",\\n\\t\\t\\t\\t\\\"placeholder\\\": {\\n\\t\\t\\t\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\t\\t\\t\\\"text\\\": \\\"example_folder_name\\\"\\n\\t\\t\\t\\t}\\n\\t\\t\\t},\\n\\t\\t\\t\\\"label\\\": {\\n\\t\\t\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\t\\t\\\"text\\\": \\\"Folder Name\\\",\\n\\t\\t\\t\\t\\\"emoji\\\": true\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"context\\\",\\n\\t\\t\\t\\\"block_id\\\": \\\"folder_creation_context\\\",\\n\\t\\t\\t\\\"elements\\\": [\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\t\\t\\t\\\"text\\\": \\\"This will create a new folder in the CDN.\\\",\\n\\t\\t\\t\\t\\t\\\"emoji\\\": true\\n\\t\\t\\t\\t}\\n\\t\\t\\t]\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"input\\\",\\n\\t\\t\\t\\\"block_id\\\": \\\"input_block_file\\\",\\n\\t\\t\\t\\\"label\\\": {\\n\\t\\t\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\t\\t\\\"text\\\": \\\"Image File Binary\\\"\\n\\t\\t\\t},\\n\\t\\t\\t\\\"element\\\": {\\n\\t\\t\\t\\t\\\"type\\\": \\\"file_input\\\",\\n\\t\\t\\t\\t\\\"action_id\\\": \\\"file_input_action\\\",\\n\\t\\t\\t\\t\\\"filetypes\\\": [\\n\\t\\t\\t\\t\\t\\\"jpg\\\",\\n\\t\\t\\t\\t\\t\\\"png\\\",\\n\\t\\t\\t\\t\\t\\\"pdf\\\"\\n\\t\\t\\t\\t],\\n\\t\\t\\t\\t\\\"max_files\\\": 10\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"context\\\",\\n\\t\\t\\t\\\"elements\\\": [\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\t\\t\\t\\\"text\\\": \\\"You can upload up to 10 files at a time.\\\",\\n\\t\\t\\t\\t\\t\\\"emoji\\\": true\\n\\t\\t\\t\\t}\\n\\t\\t\\t]\\n\\t\\t}\\n\\t]\\n}\\n}\",\"sendBody\":true,\"jsonQuery\":\"{\\n  \\\"Content-type\\\": \\\"application/json\\\"\\n}\",\"sendQuery\":true,\"specifyBody\":\"json\",\"specifyQuery\":\"json\",\"authentication\":\"predefinedCredentialType\",\"nodeCredentialType\":\"slackApi\"},\"credentials\":{\"slackApi\":{\"id\":\"GjRorC99RZt4Wnrp\",\"name\":\"Image Upload Bot\"}},\"typeVersion\":4.2},{\"id\":\"d4cdcd35-b28e-4d01-a35f-20d239f92fca\",\"name\":\"Select Folder\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[320,1560],\"parameters\":{\"url\":\"https://slack.com/api/views.push\",\"method\":\"POST\",\"options\":{},\"jsonBody\":\"=  {\\n    \\\"trigger_id\\\": \\\"{{ $('Parse Webhook').item.json['response']['trigger_id'] }}\\\",\\n    \\\"view\\\": {\\n\\t\\\"title\\\": {\\n\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\\"text\\\": \\\"File Upload - Old Folder\\\",\\n\\t\\t\\\"emoji\\\": true\\n\\t},\\n\\t\\\"submit\\\": {\\n\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\\"text\\\": \\\"Upload\\\",\\n\\t\\t\\\"emoji\\\": true\\n\\t},\\n\\t\\\"type\\\": \\\"modal\\\",\\n\\t\\\"external_id\\\": \\\"file_upload_old_folder\\\",\\n\\t\\\"close\\\": {\\n\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\\"text\\\": \\\"Cancel\\\",\\n\\t\\t\\\"emoji\\\": true\\n\\t},\\n\\t\\\"blocks\\\": [\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"section\\\",\\n\\t\\t\\t\\\"block_id\\\": \\\"greeting_section\\\",\\n\\t\\t\\t\\\"text\\\": {\\n\\t\\t\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\t\\t\\\"text\\\": \\\":wave: Hey there!\\\\n\\\\nNeed to upload an image to a public repository? If so, you've come to the right place. Use the form below to upload your images to our public S3 CDN. You will get a message with the link to the file after submission. This tool only accepts .jpg, .png, and .pdf uploads.\\\",\\n\\t\\t\\t\\t\\\"emoji\\\": true\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"divider\\\",\\n\\t\\t\\t\\\"block_id\\\": \\\"divider_1\\\"\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"input\\\",\\n\\t\\t\\t\\\"block_id\\\": \\\"tool_selector\\\",\\n\\t\\t\\t\\\"element\\\": {\\n\\t\\t\\t\\t\\\"type\\\": \\\"external_select\\\",\\n\\t\\t\\t\\t\\\"placeholder\\\": {\\n\\t\\t\\t\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\t\\t\\t\\\"text\\\": \\\"Search For Existing Folder Name\\\",\\n\\t\\t\\t\\t\\t\\\"emoji\\\": true\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\\"action_id\\\": \\\"folder_selector\\\"\\n\\t\\t\\t},\\n\\t\\t\\t\\\"label\\\": {\\n\\t\\t\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\t\\t\\\"text\\\": \\\"Folder Selector\\\",\\n\\t\\t\\t\\t\\\"emoji\\\": true\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"context\\\",\\n\\t\\t\\t\\\"elements\\\": [\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\t\\t\\t\\\"text\\\": \\\"To see all folders, type in 'all'\\\",\\n\\t\\t\\t\\t\\t\\\"emoji\\\": true\\n\\t\\t\\t\\t}\\n\\t\\t\\t]\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"input\\\",\\n\\t\\t\\t\\\"block_id\\\": \\\"input_block_file\\\",\\n\\t\\t\\t\\\"label\\\": {\\n\\t\\t\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\t\\t\\\"text\\\": \\\"Image File Binary\\\"\\n\\t\\t\\t},\\n\\t\\t\\t\\\"element\\\": {\\n\\t\\t\\t\\t\\\"type\\\": \\\"file_input\\\",\\n\\t\\t\\t\\t\\\"action_id\\\": \\\"file_input_action\\\",\\n\\t\\t\\t\\t\\\"filetypes\\\": [\\n\\t\\t\\t\\t\\t\\\"jpg\\\",\\n\\t\\t\\t\\t\\t\\\"png\\\",\\n\\t\\t\\t\\t\\t\\\"pdf\\\"\\n\\t\\t\\t\\t],\\n\\t\\t\\t\\t\\\"max_files\\\": 10\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"context\\\",\\n\\t\\t\\t\\\"elements\\\": [\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\t\\t\\t\\\"text\\\": \\\"You can upload up to 10 files at a time.\\\",\\n\\t\\t\\t\\t\\t\\\"emoji\\\": true\\n\\t\\t\\t\\t}\\n\\t\\t\\t]\\n\\t\\t}\\n\\t]\\n}\\n}\",\"sendBody\":true,\"jsonQuery\":\"{\\n  \\\"Content-type\\\": \\\"application/json\\\"\\n}\",\"sendQuery\":true,\"specifyBody\":\"json\",\"specifyQuery\":\"json\",\"authentication\":\"predefinedCredentialType\",\"nodeCredentialType\":\"slackApi\"},\"credentials\":{\"slackApi\":{\"id\":\"GjRorC99RZt4Wnrp\",\"name\":\"Image Upload Bot\"}},\"typeVersion\":4.2},{\"id\":\"997821dc-c8e8-45f5-87e9-d006fe6b5de7\",\"name\":\"Loop Over Items\",\"type\":\"n8n-nodes-base.splitInBatches\",\"position\":[460,2140],\"parameters\":{\"options\":{}},\"typeVersion\":3},{\"id\":\"e7ae5827-2fe3-411b-9689-f0f6b2d9dfc0\",\"name\":\"Success Response\",\"type\":\"n8n-nodes-base.set\",\"position\":[1440,2360],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"bd5f7054-0259-45a4-b01e-11c63b76c18e\",\"name\":\"link\",\"type\":\"string\",\"value\":\"=https://uploads.n8n.io/{{ $('Parse Webhook').item.json.response.view.state.values.folder_name_block?.folder_name_input_action?.value ? $('Parse Webhook').item.json.response.view.state.values.folder_name_block.folder_name_input_action.value.replace(/\\\\s+/g, '_') : $('Parse Webhook').item.json.response.view.state.values.tool_selector.folder_selector.selected_option.value }}/{{ $('Split Out Files').item.json.name.replace(/\\\\s+/g, '_') }}\"},{\"id\":\"2ed40d88-8ca5-4fe6-9387-3b021fe00dcf\",\"name\":\"slackresponse\",\"type\":\"string\",\"value\":\"={\\\"type\\\":\\\"section\\\",\\\"text\\\":{\\\"type\\\":\\\"mrkdwn\\\",\\\"text\\\":\\\"`https://uploads.n8n.io/{{ $('Parse Webhook').item.json.response.view.state.values.folder_name_block?.folder_name_input_action?.value ? $('Parse Webhook').item.json.response.view.state.values.folder_name_block.folder_name_input_action.value.replace(/\\\\s+/g, '_') : $('Parse Webhook').item.json.response.view.state.values.tool_selector.folder_selector.selected_option.value }}/{{ $('Split Out Files').item.json.name.replace(/\\\\s+/g, '_') }}`\\\"}}\"}]}},\"typeVersion\":3.4},{\"id\":\"72f1af25-faef-4556-8b71-97deb03b7755\",\"name\":\"Check if uploaded successfully\",\"type\":\"n8n-nodes-base.if\",\"position\":[1160,2420],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"8b51d4d6-feb6-4e1a-9077-9bd88207d3b7\",\"operator\":{\"type\":\"boolean\",\"operation\":\"true\",\"singleValue\":true},\"leftValue\":\"={{ $json.success }}\",\"rightValue\":\"\"}]}},\"typeVersion\":2.2},{\"id\":\"912e8689-53e0-4919-a664-b9025b4618b6\",\"name\":\"move on to next\",\"type\":\"n8n-nodes-base.noOp\",\"position\":[1800,2360],\"parameters\":{},\"typeVersion\":1},{\"id\":\"69d94e2e-9ff8-42ae-8969-bbe4b11976d2\",\"name\":\"No Operation, do nothing\",\"type\":\"n8n-nodes-base.noOp\",\"position\":[760,1940],\"parameters\":{},\"typeVersion\":1},{\"id\":\"8c43201b-97ee-419a-81a3-5cd9c204022a\",\"name\":\"Aggregate\",\"type\":\"n8n-nodes-base.aggregate\",\"position\":[980,1940],\"parameters\":{\"options\":{\"mergeLists\":false},\"fieldsToAggregate\":{\"fieldToAggregate\":[{\"fieldToAggregate\":\"slackresponse\"}]}},\"typeVersion\":1},{\"id\":\"792eaa0e-e281-451a-b582-4e3ecef9cb20\",\"name\":\"Route Action\",\"type\":\"n8n-nodes-base.switch\",\"position\":[-80,2180],\"parameters\":{\"rules\":{\"values\":[{\"outputKey\":\"File Upload\",\"conditions\":{\"options\":{\"version\":1,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"54f7e9ca-23d5-428c-8148-41f27cafffd8\",\"operator\":{\"name\":\"filter.operator.equals\",\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"t\",\"rightValue\":\"f\"}]},\"renameOutput\":true}]},\"options\":{\"fallbackOutput\":0}},\"typeVersion\":3},{\"id\":\"3877766c-dc3f-4e4e-9921-5ef36c7ae787\",\"name\":\"Webhook\",\"type\":\"n8n-nodes-base.webhook\",\"position\":[-720,1100],\"webhookId\":\"7f9dd2fb-e324-4f72-8fbf-d1f6b4fa5c79\",\"parameters\":{\"path\":\"slack-image-upload-bot\",\"options\":{},\"httpMethod\":\"POST\",\"responseMode\":\"responseNode\"},\"typeVersion\":2},{\"id\":\"b2ee67cb-dd60-4775-aa1a-8d52e192991a\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-320,2080],\"parameters\":{\"color\":7,\"width\":940,\"height\":300,\"content\":\"## Split Files out for processing\\nTakes the single response from Slack and splits out the file objects to loop across them.\"},\"typeVersion\":1},{\"id\":\"c28de034-b4d6-4f78-a91b-0667830a7632\",\"name\":\"Sticky Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[640,2180],\"parameters\":{\"color\":7,\"width\":1360,\"height\":540,\"content\":\"## Loop through files to upload to S3 Cloudflare Bucket\\nThe success and failure path report back to slack once all files are uploaded. \"},\"typeVersion\":1},{\"id\":\"141cb7dc-d9a3-4440-b60f-7a3b3dd8f831\",\"name\":\"Failure Response\",\"type\":\"n8n-nodes-base.set\",\"position\":[1460,2560],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"bd5f7054-0259-45a4-b01e-11c63b76c18e\",\"name\":\"link\",\"type\":\"string\",\"value\":\"=Unable to upload {{ $('Parse Webhook').item.json.response.view.state.values.folder_name_block?.folder_name_input_action?.value ? $('Parse Webhook').item.json.response.view.state.values.folder_name_block.folder_name_input_action.value.replace(/\\\\s+/g, '_') : $('Parse Webhook').item.json.response.view.state.values.tool_selector.folder_selector.selected_option.value }}/{{ $('Split Out Files').item.json.name.replace(/\\\\s+/g, '_') }}\"},{\"id\":\"39bbddba-e7a4-44cf-aab4-a90669548454\",\"name\":\"slackresponse\",\"type\":\"string\",\"value\":\"={\\\"type\\\":\\\"section\\\",\\\"text\\\":{\\\"type\\\":\\\"mrkdwn\\\",\\\"text\\\":\\\":warning:Unable to upload: `https://uploads.n8n.io/{{ $('Parse Webhook').item.json.response.view.state.values.folder_name_block?.folder_name_input_action?.value ? $('Parse Webhook').item.json.response.view.state.values.folder_name_block.folder_name_input_action.value.replace(/\\\\s+/g, '_') : $('Parse Webhook').item.json.response.view.state.values.tool_selector.folder_selector.selected_option.value }}/{{ $('Split Out Files').item.json.name.replace(/\\\\s+/g, '_') }}`\\\"}}\"}]}},\"typeVersion\":3.4},{\"id\":\"e947e3b4-a016-4d9e-a647-53a666d4c1b9\",\"name\":\"Sticky Note4\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[640,1780],\"parameters\":{\"color\":7,\"width\":1080,\"height\":380,\"content\":\"## Combine Success and failure responses in final message\\nAllows for the workflow to fail gracefully. \"},\"typeVersion\":1},{\"id\":\"7e7275c8-976b-493d-bfd8-7180517bac53\",\"name\":\"Respond to Slack Webhook - Success\",\"type\":\"n8n-nodes-base.respondToWebhook\",\"position\":[40,1000],\"parameters\":{\"options\":{},\"respondWith\":\"noData\"},\"typeVersion\":1.1},{\"id\":\"d508c32d-414d-4316-8fdc-e1c8687f6fa8\",\"name\":\"Respond to Slack Webhook - No Action\",\"type\":\"n8n-nodes-base.respondToWebhook\",\"position\":[-140,1400],\"parameters\":{\"options\":{},\"respondWith\":\"noData\"},\"typeVersion\":1.1},{\"id\":\"b2a06a70-4ec6-4d10-94e6-0467009af01e\",\"name\":\"Download File Binary\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[760,2420],\"parameters\":{\"url\":\"={{ $json.url_private_download }}\",\"options\":{\"response\":{\"response\":{\"responseFormat\":\"file\"}}},\"authentication\":\"predefinedCredentialType\",\"nodeCredentialType\":\"slackApi\"},\"credentials\":{\"slackApi\":{\"id\":\"bqdMGoCMwzFKzBXQ\",\"name\":\"Image Upload Bot User Token\"}},\"typeVersion\":4.2},{\"id\":\"3ea9d291-233b-4f25-8538-f9427e55001b\",\"name\":\"Upload to S3 Bucket\",\"type\":\"n8n-nodes-base.s3\",\"position\":[960,2420],\"parameters\":{\"fileName\":\"={{ $('Parse Webhook').item.json.response.view.state.values.folder_name_block?.folder_name_input_action?.value ? $('Parse Webhook').item.json.response.view.state.values.folder_name_block.folder_name_input_action.value.replace(/\\\\s+/g, '_') : $('Parse Webhook').item.json.response.view.state.values.tool_selector.folder_selector.selected_option.value }}/{{ $('Split Out Files').item.json.name.replace(/\\\\s+/g, '_') }}\",\"operation\":\"upload\",\"bucketName\":\"n8n-uploads\",\"additionalFields\":{}},\"credentials\":{\"s3\":{\"id\":\"5sdH8lDK8m8bje6X\",\"name\":\"S3 account\"}},\"typeVersion\":1},{\"id\":\"e1182b20-d90d-4f53-96e7-90b36aff7053\",\"name\":\"Post Image to Channel\",\"type\":\"n8n-nodes-base.slack\",\"position\":[1420,1940],\"webhookId\":\"050fb588-26db-489d-86c0-9ac5d573108d\",\"parameters\":{\"text\":\"New Files Uploaded\",\"select\":\"channel\",\"blocksUi\":\"={\\n\\t\\\"blocks\\\": [\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"section\\\",\\n\\t\\t\\t\\\"text\\\": {\\n\\t\\t\\t\\t\\\"type\\\": \\\"mrkdwn\\\",\\n\\t\\t\\t\\t\\\"text\\\": \\\":file_folder: *{{ $('Parse Webhook').item.json.response.view.state.values.folder_name_block?.folder_name_input_action?.value ? $('Parse Webhook').item.json.response.view.state.values.folder_name_block.folder_name_input_action.value.replace(/\\\\s+/g, '_') : $('Parse Webhook').item.json.response.view.state.values.tool_selector.folder_selector.selected_option.value }}*\\\"\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"divider\\\"\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"section\\\",\\n\\t\\t\\t\\\"text\\\": {\\n\\t\\t\\t\\t\\\"type\\\": \\\"mrkdwn\\\",\\n\\t\\t\\t\\t\\\"text\\\": \\\"*Here are the file URLs you uploaded:*\\\"\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\t{{ $('Aggregate').item.json.slackresponse }}\\n\\t]\\n}\",\"channelId\":{\"__rl\":true,\"mode\":\"id\",\"value\":\"C081EHWKKH6\"},\"messageType\":\"block\",\"otherOptions\":{}},\"credentials\":{\"slackApi\":{\"id\":\"GjRorC99RZt4Wnrp\",\"name\":\"Image Upload Bot\"}},\"typeVersion\":2.2},{\"id\":\"39814189-fbc3-46c0-992a-41623d7d0e7b\",\"name\":\"Split Out Files\",\"type\":\"n8n-nodes-base.splitOut\",\"position\":[140,2180],\"parameters\":{\"options\":{},\"fieldToSplitOut\":\"response.view.state.values.input_block_file.file_input_action.files\"},\"typeVersion\":1}],\"pinData\":{\"Webhook\":[{\"body\":{\"payload\":\"{\\\"type\\\":\\\"view_submission\\\",\\\"team\\\":{\\\"id\\\":\\\"T07JRGYN3KR\\\",\\\"domain\\\":\\\"n8n-labs\\\"},\\\"user\\\":{\\\"id\\\":\\\"U07K60SESLB\\\",\\\"username\\\":\\\"angel\\\",\\\"name\\\":\\\"angel\\\",\\\"team_id\\\":\\\"T07JRGYN3KR\\\"},\\\"api_app_id\\\":\\\"A07S1KHUHRD\\\",\\\"token\\\":\\\"dBcQKoCOKOLa2AkgMZH3EGvt\\\",\\\"trigger_id\\\":\\\"8124283638884.7637576751671.e215c65a755f3dcb5523094558e07a50\\\",\\\"view\\\":{\\\"id\\\":\\\"V0848FGHQ2C\\\",\\\"team_id\\\":\\\"T07JRGYN3KR\\\",\\\"type\\\":\\\"modal\\\",\\\"blocks\\\":[{\\\"type\\\":\\\"section\\\",\\\"block_id\\\":\\\"greeting_section\\\",\\\"text\\\":{\\\"type\\\":\\\"plain_text\\\",\\\"text\\\":\\\":wave: Hey there!\\\\n\\\\nNeed to upload an image to a public repository? If so, you've come to the right place. Use the form below to upload your images to our public S3 CDN. You will get a message with the link to the file after submission. This tool only accepts .jpg, .png, and .pdf uploads.\\\",\\\"emoji\\\":true}},{\\\"type\\\":\\\"divider\\\",\\\"block_id\\\":\\\"divider_1\\\"},{\\\"type\\\":\\\"input\\\",\\\"block_id\\\":\\\"tool_selector\\\",\\\"label\\\":{\\\"type\\\":\\\"plain_text\\\",\\\"text\\\":\\\"Folder Selector\\\",\\\"emoji\\\":true},\\\"optional\\\":false,\\\"dispatch_action\\\":false,\\\"element\\\":{\\\"type\\\":\\\"external_select\\\",\\\"action_id\\\":\\\"folder_selector\\\",\\\"placeholder\\\":{\\\"type\\\":\\\"plain_text\\\",\\\"text\\\":\\\"Search For Existing Folder Name\\\",\\\"emoji\\\":true}}},{\\\"type\\\":\\\"context\\\",\\\"block_id\\\":\\\"2nw+9\\\",\\\"elements\\\":[{\\\"type\\\":\\\"plain_text\\\",\\\"text\\\":\\\"To see all folders, type in 'all'\\\",\\\"emoji\\\":true}]},{\\\"type\\\":\\\"input\\\",\\\"block_id\\\":\\\"input_block_file\\\",\\\"label\\\":{\\\"type\\\":\\\"plain_text\\\",\\\"text\\\":\\\"Image File Binary\\\",\\\"emoji\\\":true},\\\"optional\\\":false,\\\"dispatch_action\\\":false,\\\"element\\\":{\\\"type\\\":\\\"file_input\\\",\\\"action_id\\\":\\\"file_input_action\\\",\\\"filetypes\\\":[\\\"jpg\\\",\\\"jpeg\\\",\\\"png\\\",\\\"pdf\\\"],\\\"max_files\\\":10,\\\"max_file_size_bytes\\\":10000000}},{\\\"type\\\":\\\"context\\\",\\\"block_id\\\":\\\"PsTmm\\\",\\\"elements\\\":[{\\\"type\\\":\\\"plain_text\\\",\\\"text\\\":\\\"You can upload up to 10 files at a time.\\\",\\\"emoji\\\":true}]}],\\\"private_metadata\\\":\\\"\\\",\\\"callback_id\\\":\\\"\\\",\\\"state\\\":{\\\"values\\\":{\\\"tool_selector\\\":{\\\"folder_selector\\\":{\\\"type\\\":\\\"external_select\\\",\\\"selected_option\\\":{\\\"text\\\":{\\\"type\\\":\\\"plain_text\\\",\\\"text\\\":\\\"\\\\ud83d\\\\udcc1 test_folder\\\",\\\"emoji\\\":true},\\\"value\\\":\\\"test_folder\\\"}}},\\\"input_block_file\\\":{\\\"file_input_action\\\":{\\\"type\\\":\\\"file_input\\\",\\\"files\\\":[{\\\"id\\\":\\\"F0848GKNTB2\\\",\\\"created\\\":1733297013,\\\"timestamp\\\":1733297013,\\\"name\\\":\\\"loveslack.png\\\",\\\"title\\\":\\\"loveslack.png\\\",\\\"mimetype\\\":\\\"image\\\\/png\\\",\\\"filetype\\\":\\\"png\\\",\\\"pretty_type\\\":\\\"PNG\\\",\\\"user\\\":\\\"U07K60SESLB\\\",\\\"user_team\\\":\\\"T07JRGYN3KR\\\",\\\"editable\\\":false,\\\"size\\\":31334,\\\"mode\\\":\\\"hosted\\\",\\\"is_external\\\":false,\\\"external_type\\\":\\\"\\\",\\\"is_public\\\":false,\\\"public_url_shared\\\":false,\\\"display_as_bot\\\":false,\\\"username\\\":\\\"\\\",\\\"url_private\\\":\\\"https:\\\\/\\\\/files.slack.com\\\\/files-pri\\\\/T07JRGYN3KR-F0848GKNTB2\\\\/loveslack.png\\\",\\\"url_private_download\\\":\\\"https:\\\\/\\\\/files.slack.com\\\\/files-pri\\\\/T07JRGYN3KR-F0848GKNTB2\\\\/download\\\\/loveslack.png\\\",\\\"media_display_type\\\":\\\"unknown\\\",\\\"thumb_64\\\":\\\"https:\\\\/\\\\/files.slack.com\\\\/files-tmb\\\\/T07JRGYN3KR-F0848GKNTB2-930517eeb6\\\\/loveslack_64.png\\\",\\\"thumb_80\\\":\\\"https:\\\\/\\\\/files.slack.com\\\\/files-tmb\\\\/T07JRGYN3KR-F0848GKNTB2-930517eeb6\\\\/loveslack_80.png\\\",\\\"thumb_360\\\":\\\"https:\\\\/\\\\/files.slack.com\\\\/files-tmb\\\\/T07JRGYN3KR-F0848GKNTB2-930517eeb6\\\\/loveslack_360.png\\\",\\\"thumb_360_w\\\":360,\\\"thumb_360_h\\\":360,\\\"thumb_160\\\":\\\"https:\\\\/\\\\/files.slack.com\\\\/files-tmb\\\\/T07JRGYN3KR-F0848GKNTB2-930517eeb6\\\\/loveslack_160.png\\\",\\\"original_w\\\":400,\\\"original_h\\\":400,\\\"thumb_tiny\\\":\\\"AwAwADDTooqFrhQ+MEgd6BN2JSQoyTgUKwYZBzUVx\\\\/qtw5A5qqkzbsZwDU31sPSxoUVHCSVOenapKoSdxGO1ST2rPmJ3nHAPNaBAIIPeozAnV+QPWmKSbGWjb4ijDIHH4ULaxplnOQPXoKil1CKMhYxux1I4Ap96nmQCRTkDn6ipaLjHZMVryNThAWHqKsIwdAy9DWXFCzsM\\\\/KD3NacaCNAo6ChO5c4xWw6q16rtGu0EgHkCrNFMhOzuYptnLZxtU9zWlZjEGwkkLxzU7KrDDDNCqFGFGBQJtt3GCEBs5OPSpKKKSSWw27n\\\\/2Q==\\\",\\\"permalink\\\":\\\"https:\\\\/\\\\/n8n-labs.slack.com\\\\/files\\\\/U07K60SESLB\\\\/F0848GKNTB2\\\\/loveslack.png\\\",\\\"permalink_public\\\":\\\"https:\\\\/\\\\/slack-files.com\\\\/T07JRGYN3KR-F0848GKNTB2-135b89a0c2\\\",\\\"comments_count\\\":0,\\\"shares\\\":{},\\\"channels\\\":[],\\\"groups\\\":[],\\\"ims\\\":[],\\\"has_more_shares\\\":false,\\\"has_rich_preview\\\":false,\\\"file_access\\\":\\\"visible\\\"}]}}}},\\\"hash\\\":\\\"1733296393.EXon8ZjS\\\",\\\"title\\\":{\\\"type\\\":\\\"plain_text\\\",\\\"text\\\":\\\"File Upload - Old Folder\\\",\\\"emoji\\\":true},\\\"clear_on_close\\\":false,\\\"notify_on_close\\\":false,\\\"close\\\":{\\\"type\\\":\\\"plain_text\\\",\\\"text\\\":\\\"Cancel\\\",\\\"emoji\\\":true},\\\"submit\\\":{\\\"type\\\":\\\"plain_text\\\",\\\"text\\\":\\\"Upload\\\",\\\"emoji\\\":true},\\\"previous_view_id\\\":\\\"V083KJV6BDH\\\",\\\"root_view_id\\\":\\\"V083KJV6BDH\\\",\\\"app_id\\\":\\\"A07S1KHUHRD\\\",\\\"external_id\\\":\\\"file_upload_old_folder\\\",\\\"app_installed_team_id\\\":\\\"T07JRGYN3KR\\\",\\\"bot_id\\\":\\\"B07SG49L53M\\\"},\\\"response_urls\\\":[],\\\"is_enterprise_install\\\":false,\\\"enterprise\\\":null}\"},\"query\":{},\"params\":{},\"headers\":{\"host\":\"internal.users.n8n.cloud\",\"accept\":\"application/json,*/*\",\"x-real-ip\":\"10.255.0.2\",\"user-agent\":\"Slackbot 1.0 (+https://api.slack.com/robots)\",\"content-type\":\"application/x-www-form-urlencoded\",\"content-length\":\"6177\",\"accept-encoding\":\"gzip,deflate\",\"x-forwarded-for\":\"10.255.0.2\",\"x-forwarded-host\":\"internal.users.n8n.cloud\",\"x-forwarded-port\":\"443\",\"x-forwarded-proto\":\"https\",\"x-slack-signature\":\"v0=33ddc24aff06b872a518fafa28b78939ea0c88696498b5054d2624f096e02293\",\"x-forwarded-server\":\"076ef9270428\",\"x-slack-request-timestamp\":\"1733297021\"},\"webhookUrl\":\"https://internal.users.n8n.cloud/webhook/slack-image-upload-bot\",\"executionMode\":\"production\"}]},\"connections\":{\"Webhook\":{\"main\":[[{\"node\":\"Parse Webhook\",\"type\":\"main\",\"index\":0}]]},\"Aggregate\":{\"main\":[[{\"node\":\"Post Image to Channel\",\"type\":\"main\",\"index\":0}]]},\"Route Action\":{\"main\":[[{\"node\":\"Split Out Files\",\"type\":\"main\",\"index\":0}]]},\"Parse Webhook\":{\"main\":[[{\"node\":\"Route Message\",\"type\":\"main\",\"index\":0}]]},\"Route Message\":{\"main\":[[{\"node\":\"Respond to Slack Webhook - Success\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Respond to Slack Webhook - No Action\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Close Modal Popup\",\"type\":\"main\",\"index\":0}]]},\"Route Message1\":{\"main\":[[{\"node\":\"Create Folder\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Select Folder\",\"type\":\"main\",\"index\":0}]]},\"Loop Over Items\":{\"main\":[[{\"node\":\"No Operation, do nothing\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Download File Binary\",\"type\":\"main\",\"index\":0}]]},\"Split Out Files\":{\"main\":[[{\"node\":\"Loop Over Items\",\"type\":\"main\",\"index\":0}]]},\"move on to next\":{\"main\":[[{\"node\":\"Loop Over Items\",\"type\":\"main\",\"index\":0}]]},\"Failure Response\":{\"main\":[[{\"node\":\"move on to next\",\"type\":\"main\",\"index\":0}]]},\"Success Response\":{\"main\":[[{\"node\":\"move on to next\",\"type\":\"main\",\"index\":0}]]},\"Close Modal Popup\":{\"main\":[[{\"node\":\"Route Action\",\"type\":\"main\",\"index\":0}]]},\"Upload to S3 Bucket\":{\"main\":[[{\"node\":\"Check if uploaded successfully\",\"type\":\"main\",\"index\":0}]]},\"Download File Binary\":{\"main\":[[{\"node\":\"Upload to S3 Bucket\",\"type\":\"main\",\"index\":0}]]},\"No Operation, do nothing\":{\"main\":[[{\"node\":\"Aggregate\",\"type\":\"main\",\"index\":0}]]},\"Check if uploaded successfully\":{\"main\":[[{\"node\":\"Success Response\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Failure Response\",\"type\":\"main\",\"index\":0}]]},\"Respond to Slack Webhook - Success\":{\"main\":[[{\"node\":\"Idea Selector Modal\",\"type\":\"main\",\"index\":0}]]},\"Respond to Slack Webhook - No Action\":{\"main\":[[{\"node\":\"Route Message1\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "# Upload Public-Facing Images to an S3 Cloudflare Bucket via Slack Modal\n\n## 🛠 Who is this for?\n\nThis workflow is for teams that use **Slack** for internal communication and need a streamlined way to upload public-facing images to an **S3 Cloudflare bucket**. It's especially beneficial for DevOps, marketing, or content management teams who frequently share assets and require efficient cloud storage integration.\n\n* * *\n\n## 💡 What problem does this workflow solve?\n\nManually uploading images to cloud storage can be time-consuming and disruptive, especially if you're already working in Slack. This workflow automates the process, allowing you to upload images directly from Slack via a modal popup. It reduces friction and keeps your workflow within a single platform.\n\n* * *\n\n## 🔍 What does this workflow do?\n\nThis workflow connects Slack with an S3 Cloudflare bucket to simplify the image-uploading process:\n\n  * **Slack Modal Interaction** : Users trigger a Slack modal to select images for upload.\n  * **Dynamic Folder Management** : Choose to create a new folder or use an existing one for uploads.\n  * **S3 Integration** : Automatically uploads the images to a specified S3 Cloudflare bucket.\n  * **Slack Confirmation** : After upload, Slack sends a confirmation with the uploaded file URLs.\n\n\n\n* * *\n\n## 🚀 Setup Instructions\n\n### Prerequisites\n\n  1. **Slack Bot** with the following permissions: \n     * `commands`\n     * `files:write`\n     * `files:read`\n     * `chat:write`\n  2. **Cloudflare S3 Credentials** : Create an API token with write access to your S3 bucket.\n  3. **n8n Instance** : Ensure n8n is properly set up with webhook capabilities.\n\n\n\n### Steps\n\n  1. **Configure Slack Bot** : \n     * Set up a Slack app and enable the Events API.\n     * Add your n8n webhook URL to the Events Subscription section.\n  2. **Add Credentials** : \n     * Add your Slack API and S3 Cloudflare credentials to n8n.\n  3. **Customize the Workflow** : \n     * Open the `Idea Selector Modal` node and update folder options to suit your needs.\n     * Update the `Post Image to Channel` node with your Slack channel ID.\n  4. **Deploy the Workflow** : \n     * Activate the workflow and test by triggering the Slack modal.\n\n\n\n* * *\n\n## 🛠 How to Customize This Workflow\n\n### Adjust the Slack Modal\n\nYou can modify the modal layout in the `Idea Selector Modal` node to add additional fields or adjust the styling.\n\n### Change the Bucket Structure\n\nUpdate the `Upload to S3 Bucket` node to customize the folder paths or change naming conventions.\n\n* * *\n\n## 🔗 References and Helpful Links\n\n  * [Slack API Documentation](https://api.slack.com/)\n  * [Cloudflare S3 Setup](https://developers.cloudflare.com/r2/)\n  * [n8n Documentation](https://docs.n8n.io/)\n\n\n\n* * *\n\n## 📓 Workflow Notes\n\n### Key Features:\n\n  * **Slack Integration** : Uses Slack modal interactions to streamline the upload process.\n  * **Cloud Storage** : Automatically uploads to a Cloudflare S3 bucket.\n  * **User Feedback** : Sends a Slack message with file URLs upon successful upload.\n\n\n\n### Setup Dependencies:\n\n  * Slack API token\n  * Cloudflare S3 credentials\n  * n8n webhook configuration\n\n\n\n### Sticky Notes Included\n\nSticky notes are embedded within the workflow to guide you through configuration and explain node functionality.\n\n* * *\n\n## 🌟 Why Use This Workflow?\n\nThis workflow keeps your image-uploading process intuitive, efficient, and fully integrated with tools you already use. By leveraging n8n's flexibility, you can ensure smooth collaboration and quick sharing of public-facing assets without switching contexts.\n",
  "crawled_at": "2025-05-26T00:24:15.679051",
  "readme_zh": "# 通过Slack模态窗口上传公开图片至Cloudflare S3存储桶\n\n## 🛠 适用对象\n\n本工作流适用于使用**Slack**进行内部沟通，并需要高效上传公开图片至**Cloudflare S3存储桶**的团队。尤其适合频繁共享素材且需要云端存储集成的DevOps、市场营销或内容管理团队。\n\n* * *\n\n## 💡 解决痛点\n\n手动上传图片至云端存储耗时费力，特别是在Slack中协作时。本工作流通过模态窗口实现直接从Slack上传图片的自动化流程，减少操作摩擦，保持工作流统一性。\n\n* * *\n\n## 🔍 核心功能\n\n该工作流连接Slack与Cloudflare S3存储桶，提供便捷上传方案：\n\n  * **Slack模态交互**：通过弹窗选择待上传图片\n  * **动态文件夹管理**：支持新建或选择现有存储目录\n  * **S3云端集成**：自动上传至指定Cloudflare S3存储桶\n  * **操作反馈**：上传完成后通过Slack返回文件URL",
  "title_zh": "通过Slack机器人上传图片至S3存储桶",
  "publish_date_zh": "最后更新于5个月前",
  "workflow_json_zh": "{\n  \"nodes\": [\n    {\n      \"id\": \"ec2683b4-06ae-4255-bf20-b6c5850f4fc5\",\n      \"name\": \"Parse Webhook\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        -480,\n        1100\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"e63f9299-a19d-4ba1-93b0-59f458769fb2\",\n              \"name\": \"response\",\n              \"type\": \"object\",\n              \"value\": \"={{ $json.body.payload }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.3\n    },\n    {\n      \"id\": \"bb178ce9-3177-433e-a877-3635be7c3705\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -820,\n        740\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 466.8168310000617,\n        \"height\": 567.6433222116042,\n        \"content\": \"![Imgur](https://i.imgur.com/iKyMV0N.png)\\n## 事件Webhook触发器\\n首个节点通过订阅事件API接收来自Slack API的所有消息。您可以通过[点击此处](https://api.slack.com/apis/connections/events-api)获取关于设置订阅事件API的更多信息。\\n\\n第二个节点将Slack的有效载荷提取为n8n可理解的格式对象。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"04d35926-1c7d-406b-90f1-9641680cb3b7\",\n      \"name\": \"Sticky Note15\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -340,\n        420\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 566.0553219408072,\n        \"height\": 1390.6748140207737,\n        \"content\": \"![n8n](https://i.imgur.com/lKnBNnH.png)\\n## 使用n8n高效处理Slack交互\\n\\n该工作流模块专为基于特定触发条件和规则高效管理及路由Slack消息与提交内容而设计。当发生Slack交互时（例如用户触发漏洞扫描或通过模态框生成报告），工作流将智能地将消息路由至相应操作：\\n\\n- **动态路由**：通过条件判断区分Slack交互类型，无论是直接触发扫描命令还是生成报告请求\\n- **模态框管理**：根据模态框标题和`callback_id`区分操作类型，确保每种提交内容都能按上下文准确处理\\n- **响应优化**：完成路由后即时处理必要响应，包括关闭模态弹窗、向Slack返回确认信息或数据\\n\\n**设计目标**：该机制确保所有Slack交互都能得到快速精准的处理，通过实时自动化响应与操作提升用户体验及工作流效率。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"e6a046b1-1c8b-4585-b257-117f562dd30f\",\n      \"name\": \"Sticky Note11\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        240,\n        520\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 396.6025898621133,\n        \"height\": 1553.6713675640199,\n        \"content\": \"![Imgur](https://i.imgur.com/iKyMV0N.png)\\n## 显示模态弹窗\\n本部分会弹出一个模态窗口，后续用于向TheHive发送数据。\\n\\n模态窗口可自定义以执行各类操作，且原生支持移动端！右侧可见Slack模态窗口的截图示例。\\n\\n了解更多信息请[点击此处](https://api.slack.com/surfaces/modals)\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"93b094eb-4a0a-4639-b343-932b7f261b0d\",\n      \"name\": \"Close Modal Popup\",\n      \"type\": \"n8n-nodes-base.respondToWebhook\",\n      \"position\": [\n        -320,\n        2180\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"respondWith\": \"json\",\n        \"responseBody\": \"{\\n  \\\"response_action\\\": \\\"clear\\\"\\n}\"\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"6d67a6f5-9966-40a9-a9ad-db514027257b\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        240,\n        860\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 376.26546828439086,\n        \"height\": 113.6416448104651,\n        \"content\": \"### 🙋 别忘了你的Slack凭证！\\n幸好n8n让这变得很简单，只要你已经在普通Slack节点添加过凭证，通过这些下拉菜单就能轻松切换HTTP节点的配置。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"3222f63e-036f-43b6-9d60-a9d1a19bafa5\",\n      \"name\": \"Idea Selector Modal\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        320,\n        1000\n      ],\n      \"parameters\": {\n        \"url\": \"https://slack.com/api/views.open\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"jsonBody\": \"=  {\\n    \\\"trigger_id\\\": \\\"{{ $('Parse Webhook').item.json['response']['trigger_id'] }}\\\",\\n    \\\"external_id\\\": \\\"Image Uploader\\\",\\n    \\\"view\\\": {\\n\\t\\\"title\\\": {\\n\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\\"text\\\": \\\"File Upload - Select\\\",\\n\\t\\t\\\"emoji\\\": true\\n\\t},\\n\\t\\\"type\\\": \\\"modal\\\",\\n\\t\\\"external_id\\\": \\\"file_upload_selector\\\",\\n\\t\\\"close\\\": {\\n\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\\"text\\\": \\\"Cancel\\\",\\n\\t\\t\\\"emoji\\\": true\\n\\t},\\n\\t\\\"blocks\\\": [\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"section\\\",\\n\\t\\t\\t\\\"block_id\\\": \\\"greeting_section\\\",\\n\\t\\t\\t\\\"text\\\": {\\n\\t\\t\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\t\\t\\\"text\\\": \\\":wave: Hey {{ $('Route Message').item.json.response.user.username }}!\\\\n\\\\nNeed to upload an image to a public repository? If so, you've come to the right place. Use the form below to upload your images to our public S3 CDN. You will get a message with the link to the file after submission. This tool only accepts .jpg, .png, and .pdf uploads.\\\",\\n\\t\\t\\t\\t\\\"emoji\\\": true\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"divider\\\",\\n\\t\\t\\t\\\"block_id\\\": \\\"divider_1\\\"\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"actions\\\",\\n\\t\\t\\t\\\"block_id\\\": \\\"folder_type_selection\\\",\\n\\t\\t\\t\\\"elements\\\": [\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\\"type\\\": \\\"radio_buttons\\\",\\n\\t\\t\\t\\t\\t\\\"options\\\": [\\n\\t\\t\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\t\\t\\\"text\\\": {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\t\\t\\t\\t\\t\\t\\\"text\\\": \\\"Create New Folder\\\",\\n\\t\\t\\t\\t\\t\\t\\t\\t\\\"emoji\\\": true\\n\\t\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\t\\t\\\"value\\\": \\\"createfolder\\\"\\n\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\t\\t\\\"text\\\": {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\t\\t\\t\\t\\t\\t\\\"text\\\": \\\"Use Existing Folder\\\",\\n\\t\\t\\t\\t\\t\\t\\t\\t\\\"emoji\\\": true\\n\\t\\t\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\t\\t\\t\\\"value\\\": \\\"selectfolder\\\"\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t],\\n\\t\\t\\t\\t\\t\\\"action_id\\\": \\\"folder-type\\\"\\n\\t\\t\\t\\t}\\n\\t\\t\\t]\\n\\t\\t}\\n\\t]\\n}\\n}\",\n        \"sendBody\": true,\n        \"jsonQuery\": \"{\\n  \\\"Content-type\\\": \\\"application/json\\\"\\n}\",\n        \"sendQuery\": true,\n        \"specifyBody\": \"json\",\n        \"specifyQuery\": \"json\",\n        \"authentication\": \"predefinedCredentialType\",\n        \"nodeCredentialType\": \"slackApi\"\n      },\n      \"credentials\": {\n        \"slackApi\": {\n          \"id\": \"GjRorC99RZt4Wnrp\",\n          \"name\": \"Image Upload Bot\"\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"a23e7c3b-7f20-4832-a4f0-a696e661accf\",\n      \"name\": \"Route Message\",\n      \"type\": \"n8n-nodes-base.switch\",\n      \"position\": [\n        -300,\n        1100\n      ],\n      \"parameters\": {\n        \"rules\": {\n          \"values\": [\n            {\n              \"outputKey\": \"Idea Selector\",\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 1,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"operator\": {\n                      \"type\": \"string\",\n                      \"operation\": \"equals\"\n                    },\n                    \"leftValue\": \"={{ $json.response.callback_id }}\",\n                    \"rightValue\": \"idea_selector\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            },\n            {\n              \"outputKey\": \"Block Action\",\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 1,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"a0374196-2553-4916-bc55-c2ea663a7c1f\",\n                    \"operator\": {\n                      \"name\": \"filter.operator.equals\",\n                      \"type\": \"string\",\n                      \"operation\": \"equals\"\n                    },\n                    \"leftValue\": \"={{ $json.response.type }}\",\n                    \"rightValue\": \"block_actions\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            },\n            {\n              \"outputKey\": \"Submit Data\",\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 1,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"65daa75f-2e17-4ba0-8fd8-2ac2159399e3\",\n                    \"operator\": {\n                      \"name\": \"filter.operator.equals\",\n                      \"type\": \"string\",\n                      \"operation\": \"equals\"\n                    },\n                    \"leftValue\": \"={{ $json.response.type }}\",\n                    \"rightValue\": \"view_submission\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            }\n          ]\n        },\n        \"options\": {\n          \"fallbackOutput\": \"none\"\n        }\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"91cde8d3-2eca-4a00-a2cc-61a4f2d3280f\",\n      \"name\": \"Route Message1\",\n      \"type\": \"n8n-nodes-base.switch\",\n      \"position\": [\n        40,\n        1400\n      ],\n      \"parameters\": {\n        \"rules\": {\n          \"values\": [\n            {\n              \"outputKey\": \"Create Folder\",\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 1,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"02868fd8-2577-4c6d-af5e-a1963cb2f786\",\n                    \"operator\": {\n                      \"name\": \"filter.operator.equals\",\n                      \"type\": \"string\",\n                      \"operation\": \"equals\"\n                    },\n                    \"leftValue\": \"={{ $json.response.view.state.values.folder_type_selection['folder-type'].selected_option.value }}\",\n                    \"rightValue\": \"createfolder\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            },\n            {\n              \"outputKey\": \"Select Folder\",\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 1,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"211e13e8-3433-42d3-8884-ad89f2fee5d0\",\n                    \"operator\": {\n                      \"name\": \"filter.operator.equals\",\n                      \"type\": \"string\",\n                      \"operation\": \"equals\"\n                    },\n                    \"leftValue\": \"={{ $json.response.view.state.values.folder_type_selection['folder-type'].selected_option.value }}\",\n                    \"rightValue\": \"selectfolder\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            }\n          ]\n        },\n        \"options\": {\n          \"fallbackOutput\": \"none\"\n        }\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"0dd0e945-8a1d-4ba8-b711-e8ccc4a98ec1\",\n      \"name\": \"Create Folder\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        320,\n        1320\n      ],\n      \"parameters\": {\n        \"url\": \"https://slack.com/api/views.push\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"jsonBody\": \"=  {\\n    \\\"trigger_id\\\": \\\"{{ $('Parse Webhook').item.json['response']['trigger_id'] }}\\\",\\n    \\\"view\\\": {\\n\\t\\\"title\\\": {\\n\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\\"text\\\": \\\"File Upload - New Folder\\\",\\n\\t\\t\\\"emoji\\\": true\\n\\t},\\n\\t\\\"submit\\\": {\\n\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\\"text\\\": \\\"Upload\\\",\\n\\t\\t\\\"emoji\\\": true\\n\\t},\\n\\t\\\"type\\\": \\\"modal\\\",\\n\\t\\\"external_id\\\": \\\"file_upload_new_folder\\\",\\n\\t\\\"close\\\": {\\n\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\\"text\\\": \\\"Cancel\\\",\\n\\t\\t\\\"emoji\\\": true\\n\\t},\\n\\t\\\"blocks\\\": [\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"section\\\",\\n\\t\\t\\t\\\"block_id\\\": \\\"greeting_section\\\",\\n\\t\\t\\t\\\"text\\\": {\\n\\t\\t\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\t\\t\\\"text\\\": \\\":wave: Hey there!\\\\n\\\\nNeed to upload an image to a public repository? If so, you've come to the right place. Use the form below to upload your images to our public S3 CDN. You will get a message with the link to the file after submission. This tool only accepts .jpg, .png, and .pdf uploads.\\\",\\n\\t\\t\\t\\t\\\"emoji\\\": true\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"divider\\\",\\n\\t\\t\\t\\\"block_id\\\": \\\"divider_1\\\"\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"input\\\",\\n\\t\\t\\t\\\"block_id\\\": \\\"folder_name_block\\\",\\n\\t\\t\\t\\\"element\\\": {\\n\\t\\t\\t\\t\\\"type\\\": \\\"plain_text_input\\\",\\n\\t\\t\\t\\t\\\"action_id\\\": \\\"folder_name_input_action\\\",\\n\\t\\t\\t\\t\\\"placeholder\\\": {\\n\\t\\t\\t\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\t\\t\\t\\\"text\\\": \\\"example_folder_name\\\"\\n\\t\\t\\t\\t}\\n\\t\\t\\t},\\n\\t\\t\\t\\\"label\\\": {\\n\\t\\t\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\t\\t\\\"text\\\": \\\"Folder Name\\\",\\n\\t\\t\\t\\t\\\"emoji\\\": true\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"context\\\",\\n\\t\\t\\t\\\"block_id\\\": \\\"folder_creation_context\\\",\\n\\t\\t\\t\\\"elements\\\": [\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\t\\t\\t\\\"text\\\": \\\"This will create a new folder in the CDN.\\\",\\n\\t\\t\\t\\t\\t\\\"emoji\\\": true\\n\\t\\t\\t\\t}\\n\\t\\t\\t]\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"input\\\",\\n\\t\\t\\t\\\"block_id\\\": \\\"input_block_file\\\",\\n\\t\\t\\t\\\"label\\\": {\\n\\t\\t\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\t\\t\\\"text\\\": \\\"Image File Binary\\\"\\n\\t\\t\\t},\\n\\t\\t\\t\\\"element\\\": {\\n\\t\\t\\t\\t\\\"type\\\": \\\"file_input\\\",\\n\\t\\t\\t\\t\\\"action_id\\\": \\\"file_input_action\\\",\\n\\t\\t\\t\\t\\\"filetypes\\\": [\\n\\t\\t\\t\\t\\t\\\"jpg\\\",\\n\\t\\t\\t\\t\\t\\\"png\\\",\\n\\t\\t\\t\\t\\t\\\"pdf\\\"\\n\\t\\t\\t\\t],\\n\\t\\t\\t\\t\\\"max_files\\\": 10\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"context\\\",\\n\\t\\t\\t\\\"elements\\\": [\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\t\\t\\t\\\"text\\\": \\\"You can upload up to 10 files at a time.\\\",\\n\\t\\t\\t\\t\\t\\\"emoji\\\": true\\n\\t\\t\\t\\t}\\n\\t\\t\\t]\\n\\t\\t}\\n\\t]\\n}\\n}\",\n        \"sendBody\": true,\n        \"jsonQuery\": \"{\\n  \\\"Content-type\\\": \\\"application/json\\\"\\n}\",\n        \"sendQuery\": true,\n        \"specifyBody\": \"json\",\n        \"specifyQuery\": \"json\",\n        \"authentication\": \"predefinedCredentialType\",\n        \"nodeCredentialType\": \"slackApi\"\n      },\n      \"credentials\": {\n        \"slackApi\": {\n          \"id\": \"GjRorC99RZt4Wnrp\",\n          \"name\": \"Image Upload Bot\"\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"d4cdcd35-b28e-4d01-a35f-20d239f92fca\",\n      \"name\": \"Select Folder\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        320,\n        1560\n      ],\n      \"parameters\": {\n        \"url\": \"https://slack.com/api/views.push\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"jsonBody\": \"=  {\\n    \\\"trigger_id\\\": \\\"{{ $('Parse Webhook').item.json['response']['trigger_id'] }}\\\",\\n    \\\"view\\\": {\\n\\t\\\"title\\\": {\\n\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\\"text\\\": \\\"File Upload - Old Folder\\\",\\n\\t\\t\\\"emoji\\\": true\\n\\t},\\n\\t\\\"submit\\\": {\\n\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\\"text\\\": \\\"Upload\\\",\\n\\t\\t\\\"emoji\\\": true\\n\\t},\\n\\t\\\"type\\\": \\\"modal\\\",\\n\\t\\\"external_id\\\": \\\"file_upload_old_folder\\\",\\n\\t\\\"close\\\": {\\n\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\\"text\\\": \\\"Cancel\\\",\\n\\t\\t\\\"emoji\\\": true\\n\\t},\\n\\t\\\"blocks\\\": [\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"section\\\",\\n\\t\\t\\t\\\"block_id\\\": \\\"greeting_section\\\",\\n\\t\\t\\t\\\"text\\\": {\\n\\t\\t\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\t\\t\\\"text\\\": \\\":wave: Hey there!\\\\n\\\\nNeed to upload an image to a public repository? If so, you've come to the right place. Use the form below to upload your images to our public S3 CDN. You will get a message with the link to the file after submission. This tool only accepts .jpg, .png, and .pdf uploads.\\\",\\n\\t\\t\\t\\t\\\"emoji\\\": true\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"divider\\\",\\n\\t\\t\\t\\\"block_id\\\": \\\"divider_1\\\"\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"input\\\",\\n\\t\\t\\t\\\"block_id\\\": \\\"tool_selector\\\",\\n\\t\\t\\t\\\"element\\\": {\\n\\t\\t\\t\\t\\\"type\\\": \\\"external_select\\\",\\n\\t\\t\\t\\t\\\"placeholder\\\": {\\n\\t\\t\\t\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\t\\t\\t\\\"text\\\": \\\"Search For Existing Folder Name\\\",\\n\\t\\t\\t\\t\\t\\\"emoji\\\": true\\n\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\\"action_id\\\": \\\"folder_selector\\\"\\n\\t\\t\\t},\\n\\t\\t\\t\\\"label\\\": {\\n\\t\\t\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\t\\t\\\"text\\\": \\\"Folder Selector\\\",\\n\\t\\t\\t\\t\\\"emoji\\\": true\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"context\\\",\\n\\t\\t\\t\\\"elements\\\": [\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\t\\t\\t\\\"text\\\": \\\"To see all folders, type in 'all'\\\",\\n\\t\\t\\t\\t\\t\\\"emoji\\\": true\\n\\t\\t\\t\\t}\\n\\t\\t\\t]\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"input\\\",\\n\\t\\t\\t\\\"block_id\\\": \\\"input_block_file\\\",\\n\\t\\t\\t\\\"label\\\": {\\n\\t\\t\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\t\\t\\\"text\\\": \\\"Image File Binary\\\"\\n\\t\\t\\t},\\n\\t\\t\\t\\\"element\\\": {\\n\\t\\t\\t\\t\\\"type\\\": \\\"file_input\\\",\\n\\t\\t\\t\\t\\\"action_id\\\": \\\"file_input_action\\\",\\n\\t\\t\\t\\t\\\"filetypes\\\": [\\n\\t\\t\\t\\t\\t\\\"jpg\\\",\\n\\t\\t\\t\\t\\t\\\"png\\\",\\n\\t\\t\\t\\t\\t\\\"pdf\\\"\\n\\t\\t\\t\\t],\\n\\t\\t\\t\\t\\\"max_files\\\": 10\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"context\\\",\\n\\t\\t\\t\\\"elements\\\": [\\n\\t\\t\\t\\t{\\n\\t\\t\\t\\t\\t\\\"type\\\": \\\"plain_text\\\",\\n\\t\\t\\t\\t\\t\\\"text\\\": \\\"You can upload up to 10 files at a time.\\\",\\n\\t\\t\\t\\t\\t\\\"emoji\\\": true\\n\\t\\t\\t\\t}\\n\\t\\t\\t]\\n\\t\\t}\\n\\t]\\n}\\n}\",\n        \"sendBody\": true,\n        \"jsonQuery\": \"{\\n  \\\"Content-type\\\": \\\"application/json\\\"\\n}\",\n        \"sendQuery\": true,\n        \"specifyBody\": \"json\",\n        \"specifyQuery\": \"json\",\n        \"authentication\": \"predefinedCredentialType\",\n        \"nodeCredentialType\": \"slackApi\"\n      },\n      \"credentials\": {\n        \"slackApi\": {\n          \"id\": \"GjRorC99RZt4Wnrp\",\n          \"name\": \"Image Upload Bot\"\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"997821dc-c8e8-45f5-87e9-d006fe6b5de7\",\n      \"name\": \"Loop Over Items\",\n      \"type\": \"n8n-nodes-base.splitInBatches\",\n      \"position\": [\n        460,\n        2140\n      ],\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"e7ae5827-2fe3-411b-9689-f0f6b2d9dfc0\",\n      \"name\": \"Success Response\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        1440,\n        2360\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"bd5f7054-0259-45a4-b01e-11c63b76c18e\",\n              \"name\": \"link\",\n              \"type\": \"string\",\n              \"value\": \"=https://uploads.n8n.io/{{ $('Parse Webhook').item.json.response.view.state.values.folder_name_block?.folder_name_input_action?.value ? $('Parse Webhook').item.json.response.view.state.values.folder_name_block.folder_name_input_action.value.replace(/\\\\s+/g, '_') : $('Parse Webhook').item.json.response.view.state.values.tool_selector.folder_selector.selected_option.value }}/{{ $('Split Out Files').item.json.name.replace(/\\\\s+/g, '_') }}\"\n            },\n            {\n              \"id\": \"2ed40d88-8ca5-4fe6-9387-3b021fe00dcf\",\n              \"name\": \"slackresponse\",\n              \"type\": \"string\",\n              \"value\": \"={\\\"type\\\":\\\"section\\\",\\\"text\\\":{\\\"type\\\":\\\"mrkdwn\\\",\\\"text\\\":\\\"`https://uploads.n8n.io/{{ $('Parse Webhook').item.json.response.view.state.values.folder_name_block?.folder_name_input_action?.value ? $('Parse Webhook').item.json.response.view.state.values.folder_name_block.folder_name_input_action.value.replace(/\\\\s+/g, '_') : $('Parse Webhook').item.json.response.view.state.values.tool_selector.folder_selector.selected_option.value }}/{{ $('Split Out Files').item.json.name.replace(/\\\\s+/g, '_') }}`\\\"}}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"72f1af25-faef-4556-8b71-97deb03b7755\",\n      \"name\": \"Check if uploaded successfully\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        1160,\n        2420\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"8b51d4d6-feb6-4e1a-9077-9bd88207d3b7\",\n              \"operator\": {\n                \"type\": \"boolean\",\n                \"operation\": \"true\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $json.success }}\",\n              \"rightValue\": \"\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"912e8689-53e0-4919-a664-b9025b4618b6\",\n      \"name\": \"move on to next\",\n      \"type\": \"n8n-nodes-base.noOp\",\n      \"position\": [\n        1800,\n        2360\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"69d94e2e-9ff8-42ae-8969-bbe4b11976d2\",\n      \"name\": \"No Operation, do nothing\",\n      \"type\": \"n8n-nodes-base.noOp\",\n      \"position\": [\n        760,\n        1940\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"8c43201b-97ee-419a-81a3-5cd9c204022a\",\n      \"name\": \"Aggregate\",\n      \"type\": \"n8n-nodes-base.aggregate\",\n      \"position\": [\n        980,\n        1940\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"mergeLists\": false\n        },\n        \"fieldsToAggregate\": {\n          \"fieldToAggregate\": [\n            {\n              \"fieldToAggregate\": \"slackresponse\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"792eaa0e-e281-451a-b582-4e3ecef9cb20\",\n      \"name\": \"Route Action\",\n      \"type\": \"n8n-nodes-base.switch\",\n      \"position\": [\n        -80,\n        2180\n      ],\n      \"parameters\": {\n        \"rules\": {\n          \"values\": [\n            {\n              \"outputKey\": \"File Upload\",\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 1,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"54f7e9ca-23d5-428c-8148-41f27cafffd8\",\n                    \"operator\": {\n                      \"name\": \"filter.operator.equals\",\n                      \"type\": \"string\",\n                      \"operation\": \"equals\"\n                    },\n                    \"leftValue\": \"t\",\n                    \"rightValue\": \"f\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            }\n          ]\n        },\n        \"options\": {\n          \"fallbackOutput\": 0\n        }\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"3877766c-dc3f-4e4e-9921-5ef36c7ae787\",\n      \"name\": \"Webhook\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"position\": [\n        -720,\n        1100\n      ],\n      \"webhookId\": \"7f9dd2fb-e324-4f72-8fbf-d1f6b4fa5c79\",\n      \"parameters\": {\n        \"path\": \"slack-image-upload-bot\",\n        \"options\": {},\n        \"httpMethod\": \"POST\",\n        \"responseMode\": \"responseNode\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"b2ee67cb-dd60-4775-aa1a-8d52e192991a\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -320,\n        2080\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 940,\n        \"height\": 300,\n        \"content\": \"## 分割文件以供处理\\n接收来自Slack的单一响应，并将文件对象拆分出来以便逐个遍历处理。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"c28de034-b4d6-4f78-a91b-0667830a7632\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        640,\n        2180\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 1360,\n        \"height\": 540,\n        \"content\": \"## 循环遍历文件以上传至Cloudflare S3存储桶\\n所有文件上传完成后，成功与失败路径将反馈至Slack。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"141cb7dc-d9a3-4440-b60f-7a3b3dd8f831\",\n      \"name\": \"Failure Response\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        1460,\n        2560\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"bd5f7054-0259-45a4-b01e-11c63b76c18e\",\n              \"name\": \"link\",\n              \"type\": \"string\",\n              \"value\": \"=Unable to upload {{ $('Parse Webhook').item.json.response.view.state.values.folder_name_block?.folder_name_input_action?.value ? $('Parse Webhook').item.json.response.view.state.values.folder_name_block.folder_name_input_action.value.replace(/\\\\s+/g, '_') : $('Parse Webhook').item.json.response.view.state.values.tool_selector.folder_selector.selected_option.value }}/{{ $('Split Out Files').item.json.name.replace(/\\\\s+/g, '_') }}\"\n            },\n            {\n              \"id\": \"39bbddba-e7a4-44cf-aab4-a90669548454\",\n              \"name\": \"slackresponse\",\n              \"type\": \"string\",\n              \"value\": \"={\\\"type\\\":\\\"section\\\",\\\"text\\\":{\\\"type\\\":\\\"mrkdwn\\\",\\\"text\\\":\\\":warning:Unable to upload: `https://uploads.n8n.io/{{ $('Parse Webhook').item.json.response.view.state.values.folder_name_block?.folder_name_input_action?.value ? $('Parse Webhook').item.json.response.view.state.values.folder_name_block.folder_name_input_action.value.replace(/\\\\s+/g, '_') : $('Parse Webhook').item.json.response.view.state.values.tool_selector.folder_selector.selected_option.value }}/{{ $('Split Out Files').item.json.name.replace(/\\\\s+/g, '_') }}`\\\"}}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"e947e3b4-a016-4d9e-a647-53a666d4c1b9\",\n      \"name\": \"Sticky Note4\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        640,\n        1780\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 1080,\n        \"height\": 380,\n        \"content\": \"## 在最终消息中合并成功与失败响应\\n允许工作流程优雅地处理失败情况。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"7e7275c8-976b-493d-bfd8-7180517bac53\",\n      \"name\": \"Respond to Slack Webhook - Success\",\n      \"type\": \"n8n-nodes-base.respondToWebhook\",\n      \"position\": [\n        40,\n        1000\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"respondWith\": \"noData\"\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"d508c32d-414d-4316-8fdc-e1c8687f6fa8\",\n      \"name\": \"Respond to Slack Webhook - No Action\",\n      \"type\": \"n8n-nodes-base.respondToWebhook\",\n      \"position\": [\n        -140,\n        1400\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"respondWith\": \"noData\"\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"b2a06a70-4ec6-4d10-94e6-0467009af01e\",\n      \"name\": \"Download File Binary\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        760,\n        2420\n      ],\n      \"parameters\": {\n        \"url\": \"={{ $json.url_private_download }}\",\n        \"options\": {\n          \"response\": {\n            \"response\": {\n              \"responseFormat\": \"file\"\n            }\n          }\n        },\n        \"authentication\": \"predefinedCredentialType\",\n        \"nodeCredentialType\": \"slackApi\"\n      },\n      \"credentials\": {\n        \"slackApi\": {\n          \"id\": \"bqdMGoCMwzFKzBXQ\",\n          \"name\": \"Image Upload Bot User Token\"\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"3ea9d291-233b-4f25-8538-f9427e55001b\",\n      \"name\": \"Upload to S3 Bucket\",\n      \"type\": \"n8n-nodes-base.s3\",\n      \"position\": [\n        960,\n        2420\n      ],\n      \"parameters\": {\n        \"fileName\": \"={{ $('Parse Webhook').item.json.response.view.state.values.folder_name_block?.folder_name_input_action?.value ? $('Parse Webhook').item.json.response.view.state.values.folder_name_block.folder_name_input_action.value.replace(/\\\\s+/g, '_') : $('Parse Webhook').item.json.response.view.state.values.tool_selector.folder_selector.selected_option.value }}/{{ $('Split Out Files').item.json.name.replace(/\\\\s+/g, '_') }}\",\n        \"operation\": \"upload\",\n        \"bucketName\": \"n8n-uploads\",\n        \"additionalFields\": {}\n      },\n      \"credentials\": {\n        \"s3\": {\n          \"id\": \"5sdH8lDK8m8bje6X\",\n          \"name\": \"S3 account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"e1182b20-d90d-4f53-96e7-90b36aff7053\",\n      \"name\": \"Post Image to Channel\",\n      \"type\": \"n8n-nodes-base.slack\",\n      \"position\": [\n        1420,\n        1940\n      ],\n      \"webhookId\": \"050fb588-26db-489d-86c0-9ac5d573108d\",\n      \"parameters\": {\n        \"text\": \"New Files Uploaded\",\n        \"select\": \"channel\",\n        \"blocksUi\": \"={\\n\\t\\\"blocks\\\": [\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"section\\\",\\n\\t\\t\\t\\\"text\\\": {\\n\\t\\t\\t\\t\\\"type\\\": \\\"mrkdwn\\\",\\n\\t\\t\\t\\t\\\"text\\\": \\\":file_folder: *{{ $('Parse Webhook').item.json.response.view.state.values.folder_name_block?.folder_name_input_action?.value ? $('Parse Webhook').item.json.response.view.state.values.folder_name_block.folder_name_input_action.value.replace(/\\\\s+/g, '_') : $('Parse Webhook').item.json.response.view.state.values.tool_selector.folder_selector.selected_option.value }}*\\\"\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"divider\\\"\\n\\t\\t},\\n\\t\\t{\\n\\t\\t\\t\\\"type\\\": \\\"section\\\",\\n\\t\\t\\t\\\"text\\\": {\\n\\t\\t\\t\\t\\\"type\\\": \\\"mrkdwn\\\",\\n\\t\\t\\t\\t\\\"text\\\": \\\"*Here are the file URLs you uploaded:*\\\"\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\t{{ $('Aggregate').item.json.slackresponse }}\\n\\t]\\n}\",\n        \"channelId\": {\n          \"__rl\": true,\n          \"mode\": \"id\",\n          \"value\": \"C081EHWKKH6\"\n        },\n        \"messageType\": \"block\",\n        \"otherOptions\": {}\n      },\n      \"credentials\": {\n        \"slackApi\": {\n          \"id\": \"GjRorC99RZt4Wnrp\",\n          \"name\": \"Image Upload Bot\"\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"39814189-fbc3-46c0-992a-41623d7d0e7b\",\n      \"name\": \"Split Out Files\",\n      \"type\": \"n8n-nodes-base.splitOut\",\n      \"position\": [\n        140,\n        2180\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"fieldToSplitOut\": \"response.view.state.values.input_block_file.file_input_action.files\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"pinData\": {\n    \"Webhook\": [\n      {\n        \"body\": {\n          \"payload\": \"{\\\"type\\\":\\\"view_submission\\\",\\\"team\\\":{\\\"id\\\":\\\"T07JRGYN3KR\\\",\\\"domain\\\":\\\"n8n-labs\\\"},\\\"user\\\":{\\\"id\\\":\\\"U07K60SESLB\\\",\\\"username\\\":\\\"angel\\\",\\\"name\\\":\\\"angel\\\",\\\"team_id\\\":\\\"T07JRGYN3KR\\\"},\\\"api_app_id\\\":\\\"A07S1KHUHRD\\\",\\\"token\\\":\\\"dBcQKoCOKOLa2AkgMZH3EGvt\\\",\\\"trigger_id\\\":\\\"8124283638884.7637576751671.e215c65a755f3dcb5523094558e07a50\\\",\\\"view\\\":{\\\"id\\\":\\\"V0848FGHQ2C\\\",\\\"team_id\\\":\\\"T07JRGYN3KR\\\",\\\"type\\\":\\\"modal\\\",\\\"blocks\\\":[{\\\"type\\\":\\\"section\\\",\\\"block_id\\\":\\\"greeting_section\\\",\\\"text\\\":{\\\"type\\\":\\\"plain_text\\\",\\\"text\\\":\\\":wave: Hey there!\\\\n\\\\nNeed to upload an image to a public repository? If so, you've come to the right place. Use the form below to upload your images to our public S3 CDN. You will get a message with the link to the file after submission. This tool only accepts .jpg, .png, and .pdf uploads.\\\",\\\"emoji\\\":true}},{\\\"type\\\":\\\"divider\\\",\\\"block_id\\\":\\\"divider_1\\\"},{\\\"type\\\":\\\"input\\\",\\\"block_id\\\":\\\"tool_selector\\\",\\\"label\\\":{\\\"type\\\":\\\"plain_text\\\",\\\"text\\\":\\\"Folder Selector\\\",\\\"emoji\\\":true},\\\"optional\\\":false,\\\"dispatch_action\\\":false,\\\"element\\\":{\\\"type\\\":\\\"external_select\\\",\\\"action_id\\\":\\\"folder_selector\\\",\\\"placeholder\\\":{\\\"type\\\":\\\"plain_text\\\",\\\"text\\\":\\\"Search For Existing Folder Name\\\",\\\"emoji\\\":true}}},{\\\"type\\\":\\\"context\\\",\\\"block_id\\\":\\\"2nw+9\\\",\\\"elements\\\":[{\\\"type\\\":\\\"plain_text\\\",\\\"text\\\":\\\"To see all folders, type in 'all'\\\",\\\"emoji\\\":true}]},{\\\"type\\\":\\\"input\\\",\\\"block_id\\\":\\\"input_block_file\\\",\\\"label\\\":{\\\"type\\\":\\\"plain_text\\\",\\\"text\\\":\\\"Image File Binary\\\",\\\"emoji\\\":true},\\\"optional\\\":false,\\\"dispatch_action\\\":false,\\\"element\\\":{\\\"type\\\":\\\"file_input\\\",\\\"action_id\\\":\\\"file_input_action\\\",\\\"filetypes\\\":[\\\"jpg\\\",\\\"jpeg\\\",\\\"png\\\",\\\"pdf\\\"],\\\"max_files\\\":10,\\\"max_file_size_bytes\\\":10000000}},{\\\"type\\\":\\\"context\\\",\\\"block_id\\\":\\\"PsTmm\\\",\\\"elements\\\":[{\\\"type\\\":\\\"plain_text\\\",\\\"text\\\":\\\"You can upload up to 10 files at a time.\\\",\\\"emoji\\\":true}]}],\\\"private_metadata\\\":\\\"\\\",\\\"callback_id\\\":\\\"\\\",\\\"state\\\":{\\\"values\\\":{\\\"tool_selector\\\":{\\\"folder_selector\\\":{\\\"type\\\":\\\"external_select\\\",\\\"selected_option\\\":{\\\"text\\\":{\\\"type\\\":\\\"plain_text\\\",\\\"text\\\":\\\"\\\\ud83d\\\\udcc1 test_folder\\\",\\\"emoji\\\":true},\\\"value\\\":\\\"test_folder\\\"}}},\\\"input_block_file\\\":{\\\"file_input_action\\\":{\\\"type\\\":\\\"file_input\\\",\\\"files\\\":[{\\\"id\\\":\\\"F0848GKNTB2\\\",\\\"created\\\":1733297013,\\\"timestamp\\\":1733297013,\\\"name\\\":\\\"loveslack.png\\\",\\\"title\\\":\\\"loveslack.png\\\",\\\"mimetype\\\":\\\"image\\\\/png\\\",\\\"filetype\\\":\\\"png\\\",\\\"pretty_type\\\":\\\"PNG\\\",\\\"user\\\":\\\"U07K60SESLB\\\",\\\"user_team\\\":\\\"T07JRGYN3KR\\\",\\\"editable\\\":false,\\\"size\\\":31334,\\\"mode\\\":\\\"hosted\\\",\\\"is_external\\\":false,\\\"external_type\\\":\\\"\\\",\\\"is_public\\\":false,\\\"public_url_shared\\\":false,\\\"display_as_bot\\\":false,\\\"username\\\":\\\"\\\",\\\"url_private\\\":\\\"https:\\\\/\\\\/files.slack.com\\\\/files-pri\\\\/T07JRGYN3KR-F0848GKNTB2\\\\/loveslack.png\\\",\\\"url_private_download\\\":\\\"https:\\\\/\\\\/files.slack.com\\\\/files-pri\\\\/T07JRGYN3KR-F0848GKNTB2\\\\/download\\\\/loveslack.png\\\",\\\"media_display_type\\\":\\\"unknown\\\",\\\"thumb_64\\\":\\\"https:\\\\/\\\\/files.slack.com\\\\/files-tmb\\\\/T07JRGYN3KR-F0848GKNTB2-930517eeb6\\\\/loveslack_64.png\\\",\\\"thumb_80\\\":\\\"https:\\\\/\\\\/files.slack.com\\\\/files-tmb\\\\/T07JRGYN3KR-F0848GKNTB2-930517eeb6\\\\/loveslack_80.png\\\",\\\"thumb_360\\\":\\\"https:\\\\/\\\\/files.slack.com\\\\/files-tmb\\\\/T07JRGYN3KR-F0848GKNTB2-930517eeb6\\\\/loveslack_360.png\\\",\\\"thumb_360_w\\\":360,\\\"thumb_360_h\\\":360,\\\"thumb_160\\\":\\\"https:\\\\/\\\\/files.slack.com\\\\/files-tmb\\\\/T07JRGYN3KR-F0848GKNTB2-930517eeb6\\\\/loveslack_160.png\\\",\\\"original_w\\\":400,\\\"original_h\\\":400,\\\"thumb_tiny\\\":\\\"AwAwADDTooqFrhQ+MEgd6BN2JSQoyTgUKwYZBzUVx\\\\/qtw5A5qqkzbsZwDU31sPSxoUVHCSVOenapKoSdxGO1ST2rPmJ3nHAPNaBAIIPeozAnV+QPWmKSbGWjb4ijDIHH4ULaxplnOQPXoKil1CKMhYxux1I4Ap96nmQCRTkDn6ipaLjHZMVryNThAWHqKsIwdAy9DWXFCzsM\\\\/KD3NacaCNAo6ChO5c4xWw6q16rtGu0EgHkCrNFMhOzuYptnLZxtU9zWlZjEGwkkLxzU7KrDDDNCqFGFGBQJtt3GCEBs5OPSpKKKSSWw27n\\\\/2Q==\\\",\\\"permalink\\\":\\\"https:\\\\/\\\\/n8n-labs.slack.com\\\\/files\\\\/U07K60SESLB\\\\/F0848GKNTB2\\\\/loveslack.png\\\",\\\"permalink_public\\\":\\\"https:\\\\/\\\\/slack-files.com\\\\/T07JRGYN3KR-F0848GKNTB2-135b89a0c2\\\",\\\"comments_count\\\":0,\\\"shares\\\":{},\\\"channels\\\":[],\\\"groups\\\":[],\\\"ims\\\":[],\\\"has_more_shares\\\":false,\\\"has_rich_preview\\\":false,\\\"file_access\\\":\\\"visible\\\"}]}}}},\\\"hash\\\":\\\"1733296393.EXon8ZjS\\\",\\\"title\\\":{\\\"type\\\":\\\"plain_text\\\",\\\"text\\\":\\\"File Upload - Old Folder\\\",\\\"emoji\\\":true},\\\"clear_on_close\\\":false,\\\"notify_on_close\\\":false,\\\"close\\\":{\\\"type\\\":\\\"plain_text\\\",\\\"text\\\":\\\"Cancel\\\",\\\"emoji\\\":true},\\\"submit\\\":{\\\"type\\\":\\\"plain_text\\\",\\\"text\\\":\\\"Upload\\\",\\\"emoji\\\":true},\\\"previous_view_id\\\":\\\"V083KJV6BDH\\\",\\\"root_view_id\\\":\\\"V083KJV6BDH\\\",\\\"app_id\\\":\\\"A07S1KHUHRD\\\",\\\"external_id\\\":\\\"file_upload_old_folder\\\",\\\"app_installed_team_id\\\":\\\"T07JRGYN3KR\\\",\\\"bot_id\\\":\\\"B07SG49L53M\\\"},\\\"response_urls\\\":[],\\\"is_enterprise_install\\\":false,\\\"enterprise\\\":null}\"\n        },\n        \"query\": {},\n        \"params\": {},\n        \"headers\": {\n          \"host\": \"internal.users.n8n.cloud\",\n          \"accept\": \"application/json,*/*\",\n          \"x-real-ip\": \"10.255.0.2\",\n          \"user-agent\": \"Slackbot 1.0 (+https://api.slack.com/robots)\",\n          \"content-type\": \"application/x-www-form-urlencoded\",\n          \"content-length\": \"6177\",\n          \"accept-encoding\": \"gzip,deflate\",\n          \"x-forwarded-for\": \"10.255.0.2\",\n          \"x-forwarded-host\": \"internal.users.n8n.cloud\",\n          \"x-forwarded-port\": \"443\",\n          \"x-forwarded-proto\": \"https\",\n          \"x-slack-signature\": \"v0=33ddc24aff06b872a518fafa28b78939ea0c88696498b5054d2624f096e02293\",\n          \"x-forwarded-server\": \"076ef9270428\",\n          \"x-slack-request-timestamp\": \"1733297021\"\n        },\n        \"webhookUrl\": \"https://internal.users.n8n.cloud/webhook/slack-image-upload-bot\",\n        \"executionMode\": \"production\"\n      }\n    ]\n  },\n  \"connections\": {\n    \"Webhook\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Parse Webhook\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Aggregate\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Post Image to Channel\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Route Action\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Split Out Files\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Parse Webhook\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Route Message\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Route Message\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Respond to Slack Webhook - Success\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Respond to Slack Webhook - No Action\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Close Modal Popup\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Route Message1\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Create Folder\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Select Folder\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Loop Over Items\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"No Operation, do nothing\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Download File Binary\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Split Out Files\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Loop Over Items\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"move on to next\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Loop Over Items\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Failure Response\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"move on to next\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Success Response\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"move on to next\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Close Modal Popup\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Route Action\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Upload to S3 Bucket\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Check if uploaded successfully\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Download File Binary\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Upload to S3 Bucket\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"No Operation, do nothing\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Aggregate\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Check if uploaded successfully\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Success Response\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Failure Response\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Respond to Slack Webhook - Success\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Idea Selector Modal\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Respond to Slack Webhook - No Action\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Route Message1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}