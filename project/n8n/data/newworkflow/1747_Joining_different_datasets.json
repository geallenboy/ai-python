{
  "url": "https://n8n.io/workflows/1747-joining-different-datasets/",
  "title": "Joining different datasets",
  "author": "Jonathan",
  "publish_date": "Last update 10 months ago",
  "publish_date_absolute": "2024-07-25",
  "categories": [
    {
      "name": "Engineering"
    },
    {
      "name": "Building Blocks"
    }
  ],
  "workflow_json": "",
  "readme": "**Task:**  \nMerge two datasets into one based on matching rules\n\n**Why:**  \nA powerful capability of n8n is to easily branch out the workflow in order to process different datasets. Even more powerful is the ability to join them back together with SQL-like joining logic.\n\n**Main use cases:**\n\n  * Appending data sets\n  * Keep only new items\n  * Keep only existing items\n\n\n",
  "crawled_at": "2025-05-25T19:59:59.124717",
  "readme_zh": "**任务：**  \n根据匹配规则将两个数据集合并为一个  \n\n**原因：**  \nn8n 的一项强大功能是能够轻松扩展工作流以处理不同的数据集。而更强大的是，它还能通过类似 SQL 的连接逻辑将这些数据集重新合并。  \n\n**主要应用场景：**  \n\n  * 追加数据集  \n  * 仅保留新增项  \n  * 仅保留现有项",
  "title_zh": "整合不同数据集",
  "publish_date_zh": "最后更新于9个月前",
  "workflow_json_zh": "{\n  \"meta\": {\n    \"instanceId\": \"8c8c5237b8e37b006a7adce87f4369350c58e41f3ca9de16196d3197f69eabcd\"\n  },\n  \"nodes\": [\n    {\n      \"id\": \"9971f7ab-ecc3-468b-8eb9-b58491b660bd\",\n      \"name\": \"On clicking 'execute'\",\n      \"type\": \"n8n-nodes-base.manualTrigger\",\n      \"position\": [\n        1040,\n        360\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"bb212963-9b6f-434c-9777-3360fb456d4b\",\n      \"name\": \"Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1320,\n        600\n      ],\n      \"parameters\": {\n        \"width\": 1020,\n        \"height\": 360,\n        \"content\": \"# 3. 将B项内容添加到A项内容下方\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"cc9461f1-1016-4ef5-bc10-525942c45047\",\n      \"name\": \"Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1320,\n        -200\n      ],\n      \"parameters\": {\n        \"width\": 1020,\n        \"height\": 380,\n        \"content\": \"# 1. 如果B中有匹配项，则保留A中的项目\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"09a68f64-5b2d-43a8-acff-7c26817cc025\",\n      \"name\": \"Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1320,\n        200\n      ],\n      \"parameters\": {\n        \"width\": 1020,\n        \"height\": 380,\n        \"content\": \"# 2. 用B中的匹配数据丰富A中的项目\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"bcf0c7df-fb64-4ef8-9d75-300ff9b55f40\",\n      \"name\": \"Note4\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        175,\n        235\n      ],\n      \"parameters\": {\n        \"width\": 740,\n        \"height\": 460,\n        \"content\": \"# 使用合并节点聚合数据\\n\\n## 合并节点是n8n中最实用的节点之一。本工作流将展示如何合并来自两个不同源的数据（类似于SQL连接操作）。\\n\\n## 这里展示了合并节点最常用的几种操作方式。如需了解更多信息，请查阅[合并节点文档](https://docs.n8n.io/integrations/core-nodes/n8n-nodes-base.merge/)\\n\\n## 点击`执行工作流`按钮并双击各节点，即可查看输入和输出项。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"b418defd-f58f-4f53-9bac-b1e6611151dc\",\n      \"name\": \"Note6\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1855,\n        335\n      ],\n      \"parameters\": {\n        \"width\": 480,\n        \"content\": \"## 为食谱中的每种食材添加所需数量\\n\\n## 类似于SQL的左连接操作\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"017b5902-865e-4481-98d2-0a969cc09482\",\n      \"name\": \"Note8\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1855,\n        -65\n      ],\n      \"parameters\": {\n        \"width\": 480,\n        \"content\": \"## 这将仅保留所需且库存中已有的原料\\n\\n## 类似于SQL内连接\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"e2b46667-da41-4448-a74d-3aa095f72619\",\n      \"name\": \"Note9\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1855,\n        695\n      ],\n      \"parameters\": {\n        \"width\": 480,\n        \"height\": 200,\n        \"content\": \"## 这将通过合并皇后乐队和齐柏林飞艇打造一支超级乐队\\n\\n## 类似于SQL中的Union All操作\\n（更为灵活，不要求所有字段完全一致）\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"9726c9cc-cab1-44f8-8c62-2b80899af4aa\",\n      \"name\": \"Ingredients in stock from recipe\",\n      \"type\": \"n8n-nodes-base.merge\",\n      \"position\": [\n        1600,\n        -20\n      ],\n      \"parameters\": {\n        \"mode\": \"combine\",\n        \"options\": {},\n        \"mergeByFields\": {\n          \"values\": [\n            {\n              \"field1\": \"Name\",\n              \"field2\": \"Name\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"42367b1e-8a5d-4b0c-bfd3-8bb3f1b63df9\",\n      \"name\": \"Super Band\",\n      \"type\": \"n8n-nodes-base.merge\",\n      \"position\": [\n        1620,\n        760\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"b4a756d8-a729-4add-aafa-9868738a6790\",\n      \"name\": \"A. Ingredients Needed\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        1360,\n        -100\n      ],\n      \"parameters\": {\n        \"jsCode\": \" return [\\n  {\\n    \\\"Name\\\": \\\"Flour\\\",\\n  },\\n  {\\n    \\\"Name\\\": \\\"Eggs\\\",\\n  },\\n  {\\n    \\\"Name\\\": \\\"Milk\\\",\\n  },\\n  {\\n    \\\"Name\\\": \\\"Lemon\\\",\\n  },\\n  {\\n    \\\"Name\\\": \\\"Sugar\\\",\\n  },\\n];\\n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"eb69abdc-cb89-43c5-bcd6-5f1f6383b391\",\n      \"name\": \"B. Ingredients in stock\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        1360,\n        40\n      ],\n      \"parameters\": {\n        \"jsCode\": \" return [\\n  {\\n    \\\"Name\\\": \\\"Eggs\\\",\\n  },\\n  {\\n    \\\"Name\\\": \\\"Lemon\\\",\\n  },\\n  {\\n    \\\"Name\\\": \\\"Sugar\\\",\\n  },\\n];\\n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"b01228b8-c860-4725-a0e1-00b4c11218cc\",\n      \"name\": \"Merge recipe\",\n      \"type\": \"n8n-nodes-base.merge\",\n      \"position\": [\n        1620,\n        380\n      ],\n      \"parameters\": {\n        \"mode\": \"combine\",\n        \"options\": {},\n        \"joinMode\": \"enrichInput1\",\n        \"mergeByFields\": {\n          \"values\": [\n            {\n              \"field1\": \"Name\",\n              \"field2\": \"Name\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"fdb8a9cb-8a85-4a9a-bd2f-c9711178333f\",\n      \"name\": \"A. Ingredients\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        1360,\n        300\n      ],\n      \"parameters\": {\n        \"jsCode\": \" return [\\n  {\\n    \\\"Name\\\": \\\"Flour\\\",\\n  },\\n  {\\n    \\\"Name\\\": \\\"Eggs\\\",\\n  },\\n  {\\n    \\\"Name\\\": \\\"Milk\\\",\\n  },\\n  {\\n    \\\"Name\\\": \\\"Lemon\\\",\\n  },\\n  {\\n    \\\"Name\\\": \\\"Sugar\\\",\\n  },\\n];\\n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"2ca385e5-6833-49fa-b052-abc8583b4a7a\",\n      \"name\": \"B. Recipe quantities\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        1360,\n        440\n      ],\n      \"parameters\": {\n        \"jsCode\": \" return [\\n  {\\n    \\\"Name\\\": \\\"Flour\\\",\\n    \\\"Quantity\\\": \\\"100g\\\",\\n  },\\n  {\\n    \\\"Name\\\": \\\"Eggs\\\",\\n    \\\"Quantity\\\": 2,\\n  },\\n  {\\n    \\\"Name\\\": \\\"Salt\\\",\\n    \\\"Quantity\\\": \\\"50g\\\"\\n  },\\n  {\\n    \\\"Name\\\": \\\"Lemon\\\",\\n    \\\"Quantity\\\": 1,\\n  },\\n  {\\n    \\\"Name\\\": \\\"Sugar\\\",\\n    \\\"Quantity\\\": \\\"6tbsp\\\",\\n  },\\n];\\n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"8e4c7da8-3700-4b1f-b937-739debf7aba4\",\n      \"name\": \"A. Queen\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        1360,\n        680\n      ],\n      \"parameters\": {\n        \"jsCode\": \" return [\\n{\\n\\\"FirstName\\\": \\\"John\\\",\\n\\\"LastName\\\": \\\"Deacon\\\",\\n\\\"Instrument\\\": \\\"Drums\\\",\\n},\\n{\\n\\\"FirstName\\\": \\\"Freddy\\\",\\n\\\"LastName\\\": \\\"Mercury\\\",\\n\\\"Instrument\\\": \\\"Vocals and Piano\\\",\\n\\\"Superpower\\\": \\\"Crowd control\\\"\\n},\\n{\\n\\\"FirstName\\\": \\\"Brian\\\",\\n\\\"LastName\\\": \\\"May\\\",\\n\\\"Instrument\\\": \\\"Guitar\\\",\\n},\\n{\\n\\\"FirstName\\\": \\\"Roger\\\",\\n\\\"LastName\\\": \\\"Taylor\\\",\\n\\\"Instrument\\\": \\\"Bass\\\",\\n}\\n];\\n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"260c7a0a-43ba-46aa-bfa8-cbbb66aca493\",\n      \"name\": \"B. Led Zeppelin\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        1360,\n        820\n      ],\n      \"parameters\": {\n        \"jsCode\": \" return [\\n{\\n\\\"FirstName\\\": \\\"Jimmy\\\",\\n\\\"LastName\\\": \\\"Page\\\",\\n\\\"Instrument\\\": \\\"Guitar\\\"\\n},\\n{\\n\\\"FirstName\\\": \\\"Robert\\\",\\n\\\"LastName\\\": \\\"Plant\\\",\\n\\\"Instrument\\\": \\\"Vocals\\\",\\n},\\n{\\n\\\"FirstName\\\": \\\"John\\\",\\n\\\"LastName\\\": \\\"Bonham\\\",\\n\\\"Instrument\\\": \\\"Drums\\\",\\n},\\n{\\n\\\"FirstName\\\": \\\"John\\\",\\n\\\"LastName\\\": \\\"Paul Jones\\\",\\n\\\"Instrument\\\": \\\"Bass\\\",\\n\\\"Second Instrument\\\": \\\"Keyboard\\\",\\n}\\n];\\n\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"connections\": {\n    \"A. Queen\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Super Band\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"A. Ingredients\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge recipe\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"B. Led Zeppelin\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Super Band\",\n            \"type\": \"main\",\n            \"index\": 1\n          }\n        ]\n      ]\n    },\n    \"B. Recipe quantities\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge recipe\",\n            \"type\": \"main\",\n            \"index\": 1\n          }\n        ]\n      ]\n    },\n    \"A. Ingredients Needed\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Ingredients in stock from recipe\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"On clicking 'execute'\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"A. Ingredients Needed\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"B. Ingredients in stock\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"A. Ingredients\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"B. Recipe quantities\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"A. Queen\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"B. Led Zeppelin\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"B. Ingredients in stock\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Ingredients in stock from recipe\",\n            \"type\": \"main\",\n            \"index\": 1\n          }\n        ]\n      ]\n    }\n  }\n}"
}