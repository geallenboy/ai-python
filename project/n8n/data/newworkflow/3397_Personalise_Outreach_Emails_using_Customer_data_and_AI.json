{
  "url": "https://n8n.io/workflows/3397-personalise-outreach-emails-using-customer-data-and-ai/",
  "title": "Personalise Outreach Emails using Customer data and AI",
  "author": "Jimleuk",
  "publish_date": "Last update 19 days ago",
  "publish_date_absolute": "2025-05-07",
  "categories": [
    {
      "name": "Support"
    },
    {
      "name": "AI"
    }
  ],
  "workflow_json": "{\"meta\":{\"instanceId\":\"408f9fb9940c3cb18ffdef0e0150fe342d6e655c3a9fac21f0f644e8bedabcd9\",\"templateCredsSetupCompleted\":true},\"nodes\":[{\"id\":\"93a8b03f-ff6b-4559-9cb1-9f439ff5e990\",\"name\":\"When clicking ‘Test workflow’\",\"type\":\"n8n-nodes-base.manualTrigger\",\"position\":[-1180,0],\"parameters\":{},\"typeVersion\":1},{\"id\":\"0aed449c-c60a-4309-91d2-4db9ed1f4ad2\",\"name\":\"Variables\",\"type\":\"n8n-nodes-base.set\",\"position\":[-120,0],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"a6c47778-33f4-46a3-a86a-fd1e75930d93\",\"name\":\"firstname\",\"type\":\"string\",\"value\":\"={{ $json.properties.firstname }}\"},{\"id\":\"0e50b2bc-4bea-4fd0-95c0-46a87da69c19\",\"name\":\"lastname\",\"type\":\"string\",\"value\":\"={{ $json.properties.lastname }}\"},{\"id\":\"ee15f298-77f6-4c4a-b03b-c2cf9a53bdc2\",\"name\":\"email\",\"type\":\"string\",\"value\":\"={{ $json.properties.email }}\"},{\"id\":\"98a718f5-4372-4282-8a9a-46f2af39677a\",\"name\":\"product_to_sell\",\"type\":\"string\",\"value\":\"=AI partnerships: a consulting package of AI development and services. We help customers find a strong foothold on AI initiatives bringing them to life cost effectively and always with results.\"}]}},\"typeVersion\":3.4},{\"id\":\"f21c0147-dd18-4b06-9f58-258b8946977d\",\"name\":\"Google Gemini Chat Model\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatGoogleGemini\",\"position\":[520,160],\"parameters\":{\"options\":{},\"modelName\":\"models/gemini-2.0-flash\"},\"credentials\":{\"googlePalmApi\":{\"id\":\"dSxo6ns5wn658r8N\",\"name\":\"Google Gemini(PaLM) Api account\"}},\"typeVersion\":1},{\"id\":\"27aaa070-4de5-479a-83eb-d2e0810a19da\",\"name\":\"Google Gemini Chat Model1\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatGoogleGemini\",\"position\":[1120,160],\"parameters\":{\"options\":{},\"modelName\":\"models/gemini-2.0-flash\"},\"credentials\":{\"googlePalmApi\":{\"id\":\"dSxo6ns5wn658r8N\",\"name\":\"Google Gemini(PaLM) Api account\"}},\"typeVersion\":1},{\"id\":\"b76ec237-3d90-4ed4-8746-36693775a39f\",\"name\":\"Create Draft Email For Review\",\"type\":\"n8n-nodes-base.gmail\",\"position\":[1680,180],\"webhookId\":\"8b3d78e5-8cea-4205-a9db-c66ec01f9558\",\"parameters\":{\"message\":\"={{ $json.output.body }}\",\"options\":{\"sendTo\":\"={{ $('Variables').first().json.email }}\"},\"subject\":\"={{ $json.output.subject }}\",\"resource\":\"draft\",\"emailType\":\"html\"},\"credentials\":{\"gmailOAuth2\":{\"id\":\"Sf5Gfl9NiFTNXFWb\",\"name\":\"Gmail account\"}},\"typeVersion\":2.1},{\"id\":\"7d62abe5-9278-45f2-ba07-aba0f4353a00\",\"name\":\"Generate Sales Email\",\"type\":\"@n8n/n8n-nodes-langchain.informationExtractor\",\"position\":[1040,0],\"parameters\":{\"text\":\"=# Profile of {{ $('Variables').first().json.firstname }} {{ $('Variables').first().json.lastname }}\\n{{ Object.keys($json.output).map(key => `## ${key}\\\\n${$json.output[key]}`).join('\\\\n') }}\",\"options\":{\"systemPromptTemplate\":\"=You are a sales representative drafting an email to close a potential customer on the following product: <product>{{ $('Variables').first().json.product_to_sell }}</product>\\n\\nUse the provided profile to draft the a suitable email which reflects similar communication style and addresses their values, ultimately convinces the customer to inquire about and/or buy this product. Provide only the subject and body of the message as this text will go into a template. Omit the subject and signature.\"},\"attributes\":{\"attributes\":[{\"name\":\"subject\",\"required\":true,\"description\":\"the subject of the message\"},{\"name\":\"body\",\"required\":true,\"description\":\"the body of the message with html styling\"}]}},\"typeVersion\":1},{\"id\":\"71cd4b52-c3cd-413e-b495-f0ef511af9b1\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-220,-200],\"parameters\":{\"color\":7,\"width\":520,\"height\":420,\"content\":\"## 2. Research Customer via Emails\\nEmails can be a great source of research on how a customer or potential customer thinks, behaves and communicates. This template does require some interaction beforehand but this should could be shared amongst colleagues or a CRM.\"},\"typeVersion\":1},{\"id\":\"f3cb9e8d-8d67-42a2-a9cd-7aae93a23816\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[320,-200],\"parameters\":{\"color\":7,\"width\":540,\"height\":540,\"content\":\"## 3. Build Persona Outline from Research\\nOnce we gather all the emails, we can use AI to analyse and construct a quick persona on our customer. Personas are useful to understand the customer's position and how favourably they might respond to a product and/or service. The Information Extractor node is used to guide the LLM for attributes we're interested in.\"},\"typeVersion\":1},{\"id\":\"e0bdca91-e744-4717-ada6-5991e2d6c054\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[880,-200],\"parameters\":{\"color\":7,\"width\":560,\"height\":540,\"content\":\"## 4. Generate Sales Pitch based on Persona\\nUsing the persona, we can again ask AI to generate the perfect sales email which takes into consideration the customer's beliefs, values and communication style. In this way, each sales email can be carefully written to improve its appeal to the customer.\"},\"typeVersion\":1},{\"id\":\"68be2c2c-5006-4041-b8ed-8c6b26d37251\",\"name\":\"Sticky Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1480,-40],\"parameters\":{\"color\":7,\"width\":480,\"height\":440,\"content\":\"## 5. Create Draft for Human Review\\nFinally, an email draft is created to store the generated sales pitch for human review. If given, a list of customers to target, a SDR can ensure customised outreach in minutes rather than hours or days. \"},\"typeVersion\":1},{\"id\":\"893d42c3-c5fc-4cc3-acd2-5d847d4ebf1a\",\"name\":\"Analyse and Build Persona\",\"type\":\"@n8n/n8n-nodes-langchain.informationExtractor\",\"position\":[440,0],\"parameters\":{\"text\":\"={{\\n$input.all()\\n  .map(item => `subject: ${item.json.subject}\\ndate: ${$json.headers.date}\\nmessage: ${item.json.text.substr(0, item.json.text.indexOf('> wrote:') ?? item.json.text.length).replace(/^On[\\\\w\\\\W]+$/im, '')}`\\n  ).join('\\\\n---\\\\n')\\n}}\",\"options\":{\"systemPromptTemplate\":\"=Your task is to build a persona of a customer or potential customer so that we may better serve them for our business. Analyse the recent correspondence of the user, {{ $('Variables').item.json.email }}, and extract the required attributes.\"},\"attributes\":{\"attributes\":[{\"name\":\"decision_making_style\",\"required\":true,\"description\":\"=Analytical vs. Intuitive: Do they rely on data or gut feelings?\\n\\nRisk Appetite: Conservative, calculated risk-taker, or bold?\\n\\nSpeed of Decision-Making: Quick and assertive or deliberate and methodical?\"},{\"name\":\" communication_preferences\",\"required\":true,\"description\":\"=Preferred Medium: Email, phone calls, in-person meetings, messaging apps?\\n\\nDetail Orientation: High-level summaries or deep-dive explanations?\\n\\nTone & Formality: Casual vs. professional, direct vs. diplomatic?\"},{\"name\":\"pain_points_challenges\",\"required\":true,\"description\":\"=Current Business Challenges: What problems are they actively trying to solve?\\n\\nIndustry Pressures: Competitive landscape, economic concerns, regulatory issues?\\n\\nOperational Bottlenecks: Efficiency, team structure, technology gaps?\"},{\"name\":\"professional_goals_motivations\",\"required\":true,\"description\":\"=Personal Career Goals: Promotion, recognition, financial growth, legacy-building?\\n\\nBusiness Priorities: Revenue growth, innovation, market expansion, cost reduction?\\n\\nKey Performance Indicators (KPIs): How do they measure success?\"},{\"name\":\"work_style_preferences\",\"required\":true,\"description\":\"=Collaboration vs. Independence: Do they prefer teamwork or autonomy?\\n\\nLevel of Involvement: Hands-on or delegate-and-review?\\n\\nResponse Time Expectation: Do they expect immediate follow-ups or are they flexible?\"},{\"name\":\"personality_behavioral_traits\",\"required\":true,\"description\":\"=Big Five Traits: Are they open to new ideas, structured, agreeable, extroverted?\\n\\nConflict Resolution Style: Do they avoid, confront, or negotiate?\\n\\nTrust-Building Factors: Do they value reliability, transparency, exclusivity?\"},{\"name\":\" buying_investment_behavior\",\"required\":true,\"description\":\"=Budget Sensitivity: Price-conscious or value-focused?\\n\\nBrand Loyalty vs. Openness: Do they stick with familiar providers or explore new options?\\n\\nDecision Influencers: Do they rely on peers, market research, gut instinct?\"},{\"name\":\"preferred_business_culture_ethics\",\"required\":true,\"description\":\"=Formality vs. Informality: Corporate structure vs. entrepreneurial mindset?\\n\\nCore Values: Integrity, innovation, customer-first, sustainability?\\n\\nCultural Sensitivity: Are there cultural nuances to be aware of in their decision-making?\"},{\"name\":\"industry_competitive_awareness\",\"required\":true,\"description\":\"=Market Trends Interest: Do they actively track industry shifts?\\n\\nCompetitor Awareness: Are they reactive to competitors, or focused on internal growth?\\n\\nTech Adoption: Do they embrace innovation, or are they slow adopters?\"}]}},\"executeOnce\":true,\"typeVersion\":1},{\"id\":\"f27b7b8d-e9e8-445c-9209-25323bb40db4\",\"name\":\"Sticky Note4\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-1400,-860],\"parameters\":{\"width\":480,\"height\":1080,\"content\":\"## Try it out\\n### This n8n template uses existing emails from customers as context to customise and \\\"finetune\\\" outreach emails to them using AI.\\n\\nBy now, it should be common knowledge that we can leverage AI to generate unique emails but in a way, they can remain generic as the AI lacks the customer context to be truly personalised. One way to solve this is \\n\\n### How it works\\n* Customers to target are pulled from Hubspot and each customer is then run in a loop. We're using a loop as the retrieved emails for each customer become separate items and a loop helps with item reference.\\n* We connect to our Gmail account to pull all emails recieved from the customer.\\n* The contents of the email will be suitable to build a short persona of the customer. We use the Information Extractor to get our AI model to pull out the key attributes of this persona such as decision making style and communication preferences.\\n* With this persona, we can now pass this to our AI model to generate a personalised outreach email specifically for our customer.\\n* Finally, a draft email is created for human review before sending. If you would rather send the email straight away, this is also possible.\\n\\n### How to use\\n* Define the topic of the outreach email in the \\\"variables\\\" node. This directs the AI on what outreach email to generate.\\n* Ensure the emails are pulled from the right account. If emails may contain sensitive data, adjust the filters and text parsing to ensure these are not leaked to the AI (which might then leak into the generated email).\\n\\n### Need Help?\\nJoin the [Discord](https://discord.com/invite/XPKeKXeB7d) or ask in the [Forum](https://community.n8n.io/)!\\n\\nHappy Hacking!\"},\"typeVersion\":1},{\"id\":\"72efcdea-3429-44e0-a29c-8ae0144783ae\",\"name\":\"Get All Customer's Correspondence\",\"type\":\"n8n-nodes-base.gmail\",\"position\":[80,0],\"webhookId\":\"4d8c4b7a-da0b-49aa-bda8-7b1d89c62636\",\"parameters\":{\"limit\":20,\"simple\":false,\"filters\":{\"q\":\"=from:{{ $json.email }}\"},\"options\":{},\"operation\":\"getAll\"},\"credentials\":{\"gmailOAuth2\":{\"id\":\"Sf5Gfl9NiFTNXFWb\",\"name\":\"Gmail account\"}},\"typeVersion\":2.1},{\"id\":\"e73c8a55-c85f-45a1-9735-1cea61caff3e\",\"name\":\"Get Contacts\",\"type\":\"n8n-nodes-base.hubspot\",\"position\":[-820,0],\"parameters\":{\"operation\":\"search\",\"authentication\":\"appToken\",\"filterGroupsUi\":{\"filterGroupsValues\":[{\"filtersUi\":{\"filterValues\":[{\"value\":\"DECISION_MAKER\",\"propertyName\":\"hs_buying_role|enumeration\"}]}}]},\"additionalFields\":{}},\"credentials\":{\"hubspotAppToken\":{\"id\":\"Qhag92BwOPZfXGfz\",\"name\":\"HubSpot account (Intrigued-Zoo)\"}},\"typeVersion\":2.1},{\"id\":\"3579a71d-ce1f-4175-9118-87997158dcb6\",\"name\":\"For Each Contact\",\"type\":\"n8n-nodes-base.splitInBatches\",\"position\":[-620,0],\"parameters\":{\"options\":{}},\"typeVersion\":3},{\"id\":\"45679613-3114-4742-9e7a-700d8d29eff6\",\"name\":\"Contact Ref\",\"type\":\"n8n-nodes-base.noOp\",\"position\":[-420,0],\"parameters\":{},\"typeVersion\":1},{\"id\":\"18594bbd-efc5-4fbf-8693-ffcdfcfd900f\",\"name\":\"Sticky Note5\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-880,-200],\"parameters\":{\"color\":7,\"width\":640,\"height\":420,\"content\":\"## 1. Get Targeted Existing Customers\\nAs with all campaigns, it's good to have a targeted subset of customers to aim for to assess the response. Here, we can pull them out of a CRM like Hubspot if granular filtering is required for example but even a simple csv of contacts would also work.\"},\"typeVersion\":1}],\"pinData\":{},\"connections\":{\"Variables\":{\"main\":[[{\"node\":\"Get All Customer's Correspondence\",\"type\":\"main\",\"index\":0}]]},\"Contact Ref\":{\"main\":[[{\"node\":\"Variables\",\"type\":\"main\",\"index\":0}]]},\"Get Contacts\":{\"main\":[[{\"node\":\"For Each Contact\",\"type\":\"main\",\"index\":0}]]},\"For Each Contact\":{\"main\":[[],[{\"node\":\"Contact Ref\",\"type\":\"main\",\"index\":0}]]},\"Generate Sales Email\":{\"main\":[[{\"node\":\"Create Draft Email For Review\",\"type\":\"main\",\"index\":0}]]},\"Google Gemini Chat Model\":{\"ai_languageModel\":[[{\"node\":\"Analyse and Build Persona\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"Analyse and Build Persona\":{\"main\":[[{\"node\":\"Generate Sales Email\",\"type\":\"main\",\"index\":0}]]},\"Google Gemini Chat Model1\":{\"ai_languageModel\":[[{\"node\":\"Generate Sales Email\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"Create Draft Email For Review\":{\"main\":[[{\"node\":\"For Each Contact\",\"type\":\"main\",\"index\":0}]]},\"Get All Customer's Correspondence\":{\"main\":[[{\"node\":\"Analyse and Build Persona\",\"type\":\"main\",\"index\":0}]]},\"When clicking ‘Test workflow’\":{\"main\":[[{\"node\":\"Get Contacts\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "### This n8n template uses existing emails from customers as context to customise and \"finetune\" outreach emails to them using AI.\n\nBy now, it should be common knowledge that we can leverage AI to generate unique emails but in a way, they can remain generic as the AI lacks the customer context to be truly personalised. One way to solve this is by pulling in a source of customer data - and what better way then by using existing email correspondence.\n\n### How it works\n\n  * Customers to target are pulled from Hubspot and each customer is then run in a loop. We're using a loop as the retrieved emails for each customer become separate items and a loop helps with item reference.\n  * We connect to our Gmail account to pull all emails recieved from the customer.\n  * The contents of the email will be suitable to build a short persona of the customer. We use the Information Extractor to get our AI model to pull out the key attributes of this persona such as decision making style and communication preferences.\n  * With this persona, we can now pass this to our AI model to generate a personalised outreach email specifically for our customer.\n  * Finally, a draft email is created for human review before sending. If you would rather send the email straight away, this is also possible.\n\n\n\n### How to use\n\n  * Define the topic of the outreach email in the \"variables\" node. This directs the AI on what outreach email to generate.\n  * Ensure the emails are pulled from the right account. If emails may contain sensitive data, adjust the filters and text parsing to ensure these are not leaked to the AI (which might then leak into the generated email).\n\n\n\n### Requirements\n\n  * Hubspot for Contacts List\n  * OpenAI for LLM\n  * Gmail for Existing Emails and Sending Emails\n\n\n\n### Customising this workflow\n\n  * Not using Hubspot? Any CRM would work just as well or even a simple text csv!\n  * If you have customer past deals or engagements in your CRM, consider using this as additional context for the AI to use.\n\n\n",
  "crawled_at": "2025-05-26T04:23:02.830000",
  "readme_zh": "### 该n8n模板利用客户历史邮件作为上下文，通过AI定制化\"微调\"外联邮件内容。\n\n当前利用AI生成个性化邮件已非新鲜事，但缺乏客户背景的AI邮件往往流于泛泛。解决方案之一便是引入客户数据源——而历史邮件往来正是绝佳的个性化素材库。\n\n### 运作原理\n\n  * 从Hubspot提取目标客户列表，通过循环节点逐条处理（循环结构可有效管理每客户关联的多封邮件）\n  * 连接Gmail账户获取与该客户的所有往来邮件\n  * 基于邮件内容构建客户画像，通过信息提取器让AI模型识别关键特征（如决策风格、沟通偏好等）\n  * 将生成的客户画像输入AI模型，产出完全个性化的外联邮件\n  * 最终创建待审阅的邮件草稿（也可直接发送）\n\n### 使用指南\n\n  * 在\"variables\"节点定义邮件主题，引导AI生成对应内容\n  * 确保从正确邮箱拉取邮件，若涉及敏感数据需调整过滤器和文本解析规则，防止泄露至AI模型\n\n### 环境要求\n\n  * Hubspot（联系人管理）\n  * OpenAI（大语言模型）\n  * Gmail（历史邮件获取与发送）\n\n### 定制化建议\n\n  * 非Hubspot用户可使用任意CRM系统甚至CSV文件替代\n  * 若CRM存有客户历史交易记录，可作为附加上下文提升AI输出质量",
  "title_zh": "利用客户数据和人工智能个性化推广邮件",
  "publish_date_zh": "上次更新于19天前",
  "workflow_json_zh": "{\n  \"meta\": {\n    \"instanceId\": \"408f9fb9940c3cb18ffdef0e0150fe342d6e655c3a9fac21f0f644e8bedabcd9\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"nodes\": [\n    {\n      \"id\": \"93a8b03f-ff6b-4559-9cb1-9f439ff5e990\",\n      \"name\": \"When clicking ‘Test workflow’\",\n      \"type\": \"n8n-nodes-base.manualTrigger\",\n      \"position\": [\n        -1180,\n        0\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"0aed449c-c60a-4309-91d2-4db9ed1f4ad2\",\n      \"name\": \"Variables\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        -120,\n        0\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"a6c47778-33f4-46a3-a86a-fd1e75930d93\",\n              \"name\": \"firstname\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.properties.firstname }}\"\n            },\n            {\n              \"id\": \"0e50b2bc-4bea-4fd0-95c0-46a87da69c19\",\n              \"name\": \"lastname\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.properties.lastname }}\"\n            },\n            {\n              \"id\": \"ee15f298-77f6-4c4a-b03b-c2cf9a53bdc2\",\n              \"name\": \"email\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.properties.email }}\"\n            },\n            {\n              \"id\": \"98a718f5-4372-4282-8a9a-46f2af39677a\",\n              \"name\": \"product_to_sell\",\n              \"type\": \"string\",\n              \"value\": \"=AI partnerships: a consulting package of AI development and services. We help customers find a strong foothold on AI initiatives bringing them to life cost effectively and always with results.\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"f21c0147-dd18-4b06-9f58-258b8946977d\",\n      \"name\": \"Google Gemini Chat Model\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatGoogleGemini\",\n      \"position\": [\n        520,\n        160\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"modelName\": \"models/gemini-2.0-flash\"\n      },\n      \"credentials\": {\n        \"googlePalmApi\": {\n          \"id\": \"dSxo6ns5wn658r8N\",\n          \"name\": \"Google Gemini(PaLM) Api account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"27aaa070-4de5-479a-83eb-d2e0810a19da\",\n      \"name\": \"Google Gemini Chat Model1\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatGoogleGemini\",\n      \"position\": [\n        1120,\n        160\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"modelName\": \"models/gemini-2.0-flash\"\n      },\n      \"credentials\": {\n        \"googlePalmApi\": {\n          \"id\": \"dSxo6ns5wn658r8N\",\n          \"name\": \"Google Gemini(PaLM) Api account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"b76ec237-3d90-4ed4-8746-36693775a39f\",\n      \"name\": \"Create Draft Email For Review\",\n      \"type\": \"n8n-nodes-base.gmail\",\n      \"position\": [\n        1680,\n        180\n      ],\n      \"webhookId\": \"8b3d78e5-8cea-4205-a9db-c66ec01f9558\",\n      \"parameters\": {\n        \"message\": \"={{ $json.output.body }}\",\n        \"options\": {\n          \"sendTo\": \"={{ $('Variables').first().json.email }}\"\n        },\n        \"subject\": \"={{ $json.output.subject }}\",\n        \"resource\": \"draft\",\n        \"emailType\": \"html\"\n      },\n      \"credentials\": {\n        \"gmailOAuth2\": {\n          \"id\": \"Sf5Gfl9NiFTNXFWb\",\n          \"name\": \"Gmail account\"\n        }\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"7d62abe5-9278-45f2-ba07-aba0f4353a00\",\n      \"name\": \"Generate Sales Email\",\n      \"type\": \"@n8n/n8n-nodes-langchain.informationExtractor\",\n      \"position\": [\n        1040,\n        0\n      ],\n      \"parameters\": {\n        \"text\": \"=# Profile of {{ $('Variables').first().json.firstname }} {{ $('Variables').first().json.lastname }}\\n{{ Object.keys($json.output).map(key => `## ${key}\\\\n${$json.output[key]}`).join('\\\\n') }}\",\n        \"options\": {\n          \"systemPromptTemplate\": \"=You are a sales representative drafting an email to close a potential customer on the following product: <product>{{ $('Variables').first().json.product_to_sell }}</product>\\n\\nUse the provided profile to draft the a suitable email which reflects similar communication style and addresses their values, ultimately convinces the customer to inquire about and/or buy this product. Provide only the subject and body of the message as this text will go into a template. Omit the subject and signature.\"\n        },\n        \"attributes\": {\n          \"attributes\": [\n            {\n              \"name\": \"subject\",\n              \"required\": true,\n              \"description\": \"the subject of the message\"\n            },\n            {\n              \"name\": \"body\",\n              \"required\": true,\n              \"description\": \"the body of the message with html styling\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"71cd4b52-c3cd-413e-b495-f0ef511af9b1\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -220,\n        -200\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 520,\n        \"height\": 420,\n        \"content\": \"## 2. 通过邮件研究客户  \\n邮件是了解客户或潜在客户思维模式、行为方式和沟通风格的绝佳渠道。该模板确实需要事先进行一些互动，但这些信息可以在同事之间共享或录入客户关系管理系统（CRM）。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"f3cb9e8d-8d67-42a2-a9cd-7aae93a23816\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        320,\n        -200\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 540,\n        \"height\": 540,\n        \"content\": \"## 3. 根据研究构建用户画像框架\\n收集完所有邮件后，我们可以利用人工智能分析并快速构建客户画像。用户画像有助于理解客户立场，预判他们对产品或服务的积极反应程度。信息提取节点用于引导大语言模型聚焦我们感兴趣的属性特征。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"e0bdca91-e744-4717-ada6-5991e2d6c054\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        880,\n        -200\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 560,\n        \"height\": 540,\n        \"content\": \"## 4. 基于用户画像生成销售话术  \\n利用用户画像，我们可以再次借助人工智能生成完美的销售邮件，这些邮件会充分考虑客户的信仰、价值观和沟通风格。通过这种方式，每一封销售邮件都能精心撰写，以增强对客户的吸引力。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"68be2c2c-5006-4041-b8ed-8c6b26d37251\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1480,\n        -40\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 480,\n        \"height\": 440,\n        \"content\": \"## 5. 生成人工审核草稿  \\n最后，系统会创建一封邮件草稿用于存储生成的销售话术，供人工审核。若提供目标客户列表，销售开发代表（SDR）可在数分钟内完成个性化外联，无需耗费数小时甚至数日。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"893d42c3-c5fc-4cc3-acd2-5d847d4ebf1a\",\n      \"name\": \"Analyse and Build Persona\",\n      \"type\": \"@n8n/n8n-nodes-langchain.informationExtractor\",\n      \"position\": [\n        440,\n        0\n      ],\n      \"parameters\": {\n        \"text\": \"={{\\n$input.all()\\n  .map(item => `subject: ${item.json.subject}\\ndate: ${$json.headers.date}\\nmessage: ${item.json.text.substr(0, item.json.text.indexOf('> wrote:') ?? item.json.text.length).replace(/^On[\\\\w\\\\W]+$/im, '')}`\\n  ).join('\\\\n---\\\\n')\\n}}\",\n        \"options\": {\n          \"systemPromptTemplate\": \"=Your task is to build a persona of a customer or potential customer so that we may better serve them for our business. Analyse the recent correspondence of the user, {{ $('Variables').item.json.email }}, and extract the required attributes.\"\n        },\n        \"attributes\": {\n          \"attributes\": [\n            {\n              \"name\": \"decision_making_style\",\n              \"required\": true,\n              \"description\": \"=Analytical vs. Intuitive: Do they rely on data or gut feelings?\\n\\nRisk Appetite: Conservative, calculated risk-taker, or bold?\\n\\nSpeed of Decision-Making: Quick and assertive or deliberate and methodical?\"\n            },\n            {\n              \"name\": \" communication_preferences\",\n              \"required\": true,\n              \"description\": \"=Preferred Medium: Email, phone calls, in-person meetings, messaging apps?\\n\\nDetail Orientation: High-level summaries or deep-dive explanations?\\n\\nTone & Formality: Casual vs. professional, direct vs. diplomatic?\"\n            },\n            {\n              \"name\": \"pain_points_challenges\",\n              \"required\": true,\n              \"description\": \"=Current Business Challenges: What problems are they actively trying to solve?\\n\\nIndustry Pressures: Competitive landscape, economic concerns, regulatory issues?\\n\\nOperational Bottlenecks: Efficiency, team structure, technology gaps?\"\n            },\n            {\n              \"name\": \"professional_goals_motivations\",\n              \"required\": true,\n              \"description\": \"=Personal Career Goals: Promotion, recognition, financial growth, legacy-building?\\n\\nBusiness Priorities: Revenue growth, innovation, market expansion, cost reduction?\\n\\nKey Performance Indicators (KPIs): How do they measure success?\"\n            },\n            {\n              \"name\": \"work_style_preferences\",\n              \"required\": true,\n              \"description\": \"=Collaboration vs. Independence: Do they prefer teamwork or autonomy?\\n\\nLevel of Involvement: Hands-on or delegate-and-review?\\n\\nResponse Time Expectation: Do they expect immediate follow-ups or are they flexible?\"\n            },\n            {\n              \"name\": \"personality_behavioral_traits\",\n              \"required\": true,\n              \"description\": \"=Big Five Traits: Are they open to new ideas, structured, agreeable, extroverted?\\n\\nConflict Resolution Style: Do they avoid, confront, or negotiate?\\n\\nTrust-Building Factors: Do they value reliability, transparency, exclusivity?\"\n            },\n            {\n              \"name\": \" buying_investment_behavior\",\n              \"required\": true,\n              \"description\": \"=Budget Sensitivity: Price-conscious or value-focused?\\n\\nBrand Loyalty vs. Openness: Do they stick with familiar providers or explore new options?\\n\\nDecision Influencers: Do they rely on peers, market research, gut instinct?\"\n            },\n            {\n              \"name\": \"preferred_business_culture_ethics\",\n              \"required\": true,\n              \"description\": \"=Formality vs. Informality: Corporate structure vs. entrepreneurial mindset?\\n\\nCore Values: Integrity, innovation, customer-first, sustainability?\\n\\nCultural Sensitivity: Are there cultural nuances to be aware of in their decision-making?\"\n            },\n            {\n              \"name\": \"industry_competitive_awareness\",\n              \"required\": true,\n              \"description\": \"=Market Trends Interest: Do they actively track industry shifts?\\n\\nCompetitor Awareness: Are they reactive to competitors, or focused on internal growth?\\n\\nTech Adoption: Do they embrace innovation, or are they slow adopters?\"\n            }\n          ]\n        }\n      },\n      \"executeOnce\": true,\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"f27b7b8d-e9e8-445c-9209-25323bb40db4\",\n      \"name\": \"Sticky Note4\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -1400,\n        -860\n      ],\n      \"parameters\": {\n        \"width\": 480,\n        \"height\": 1080,\n        \"content\": \"## 试试看\\n### 该n8n模板利用客户历史邮件作为上下文，通过AI定制化\\\"微调\\\"外联邮件\\n\\n如今利用AI生成个性化邮件已是常识，但缺乏客户背景的AI往往只能产出泛泛内容。本方案通过以下方式实现真正个性化：\\n\\n### 运作原理\\n* 从Hubspot提取目标客户列表，通过循环处理器逐条处理（循环结构可有效管理每封邮件的独立引用）\\n* 连接Gmail账户获取与该客户的所有往来邮件\\n* 基于邮件内容构建客户画像：使用信息提取器让AI模型识别关键特征（如决策风格、沟通偏好）\\n* 将客户画像输入AI模型生成专属外联邮件\\n* 最终生成待审阅的草稿（支持直接发送）\\n\\n### 使用指南\\n* 在\\\"variables\\\"节点定义邮件主题（引导AI生成方向）\\n* 确保从正确邮箱拉取邮件，若涉及敏感数据请调整过滤器和文本解析规则（防止泄露至AI）\\n\\n### 需要帮助？\\n加入[Discord社区](https://discord.com/invite/XPKeKXeB7d)或访问[官方论坛](https://community.n8n.io/)！\\n\\n祝您探索愉快！\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"72efcdea-3429-44e0-a29c-8ae0144783ae\",\n      \"name\": \"Get All Customer's Correspondence\",\n      \"type\": \"n8n-nodes-base.gmail\",\n      \"position\": [\n        80,\n        0\n      ],\n      \"webhookId\": \"4d8c4b7a-da0b-49aa-bda8-7b1d89c62636\",\n      \"parameters\": {\n        \"limit\": 20,\n        \"simple\": false,\n        \"filters\": {\n          \"q\": \"=from:{{ $json.email }}\"\n        },\n        \"options\": {},\n        \"operation\": \"getAll\"\n      },\n      \"credentials\": {\n        \"gmailOAuth2\": {\n          \"id\": \"Sf5Gfl9NiFTNXFWb\",\n          \"name\": \"Gmail account\"\n        }\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"e73c8a55-c85f-45a1-9735-1cea61caff3e\",\n      \"name\": \"Get Contacts\",\n      \"type\": \"n8n-nodes-base.hubspot\",\n      \"position\": [\n        -820,\n        0\n      ],\n      \"parameters\": {\n        \"operation\": \"search\",\n        \"authentication\": \"appToken\",\n        \"filterGroupsUi\": {\n          \"filterGroupsValues\": [\n            {\n              \"filtersUi\": {\n                \"filterValues\": [\n                  {\n                    \"value\": \"DECISION_MAKER\",\n                    \"propertyName\": \"hs_buying_role|enumeration\"\n                  }\n                ]\n              }\n            }\n          ]\n        },\n        \"additionalFields\": {}\n      },\n      \"credentials\": {\n        \"hubspotAppToken\": {\n          \"id\": \"Qhag92BwOPZfXGfz\",\n          \"name\": \"HubSpot account (Intrigued-Zoo)\"\n        }\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"3579a71d-ce1f-4175-9118-87997158dcb6\",\n      \"name\": \"For Each Contact\",\n      \"type\": \"n8n-nodes-base.splitInBatches\",\n      \"position\": [\n        -620,\n        0\n      ],\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"45679613-3114-4742-9e7a-700d8d29eff6\",\n      \"name\": \"Contact Ref\",\n      \"type\": \"n8n-nodes-base.noOp\",\n      \"position\": [\n        -420,\n        0\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"18594bbd-efc5-4fbf-8693-ffcdfcfd900f\",\n      \"name\": \"Sticky Note5\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -880,\n        -200\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 640,\n        \"height\": 420,\n        \"content\": \"## 1. 锁定现有目标客户\\n与所有营销活动一样，针对特定客户群体开展行动有助于评估响应效果。此处可通过Hubspot等CRM系统进行精细筛选提取目标客户，但即便使用简单的联系人CSV文件同样可行。\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"Variables\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get All Customer's Correspondence\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Contact Ref\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Variables\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get Contacts\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"For Each Contact\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"For Each Contact\": {\n      \"main\": [\n        [],\n        [\n          {\n            \"node\": \"Contact Ref\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Generate Sales Email\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Create Draft Email For Review\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Google Gemini Chat Model\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"Analyse and Build Persona\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Analyse and Build Persona\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Generate Sales Email\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Google Gemini Chat Model1\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"Generate Sales Email\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Create Draft Email For Review\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"For Each Contact\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get All Customer's Correspondence\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Analyse and Build Persona\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When clicking ‘Test workflow’\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get Contacts\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}