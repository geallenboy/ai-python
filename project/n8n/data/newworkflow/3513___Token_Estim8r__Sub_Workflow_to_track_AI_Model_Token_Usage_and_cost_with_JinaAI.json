{
  "url": "https://n8n.io/workflows/3513-token-estim8r-sub-workflow-to-track-ai-model-token-usage-and-cost-with-jinaai/",
  "title": "ğŸ¥‡ Token Estim8r -Sub Workflow to track AI Model Token Usage and cost with JinaAI",
  "author": "RealSimple Solutions",
  "publish_date": "Last update a month ago",
  "publish_date_absolute": "",
  "categories": [
    {
      "name": "Building Blocks"
    },
    {
      "name": "AI"
    }
  ],
  "workflow_json": "{\"id\":\"L7ExYkeKvBYwWbc3\",\"meta\":{\"instanceId\":\"ba3fa76a571c35110ef5f67e5099c9a5c1768ef125c2f3b804ba20de75248c0b\",\"templateCredsSetupCompleted\":false},\"name\":\"Get Model Token Count and Tools\",\"tags\":[],\"nodes\":[{\"id\":\"c920594a-980b-4f41-997a-78768984df6f\",\"name\":\"When clicking â€˜Test workflowâ€™\",\"type\":\"n8n-nodes-base.manualTrigger\",\"position\":[-1100,580],\"parameters\":{},\"typeVersion\":1},{\"id\":\"a6f21ab6-219a-49fa-b7ee-f59db8a49da6\",\"name\":\"n8n Get Execution Data\",\"type\":\"n8n-nodes-base.n8n\",\"position\":[-800,340],\"parameters\":{},\"typeVersion\":1},{\"id\":\"2aad0913-9c3c-413b-8a99-61acb7833f1d\",\"name\":\"Get AI Usage Data\",\"type\":\"n8n-nodes-base.code\",\"position\":[-480,340],\"parameters\":{},\"typeVersion\":2},{\"id\":\"4983f61e-b7b6-4607-b255-6bea04d9fcda\",\"name\":\"Set Ai_Run_Data\",\"type\":\"n8n-nodes-base.set\",\"position\":[-200,340],\"parameters\":{},\"typeVersion\":3.4},{\"id\":\"3ea6794e-25d6-432b-905c-3207f87fb048\",\"name\":\"Get AI Pricing\",\"type\":\"n8n-nodes-base.httpRequest\",\"onError\":\"continueRegularOutput\",\"position\":[80,340],\"parameters\":{},\"retryOnFail\":true,\"typeVersion\":4.2},{\"id\":\"e384a724-1f4f-4677-b15e-ddba8e693ecc\",\"name\":\"Get Models Price and Add Summary\",\"type\":\"n8n-nodes-base.code\",\"position\":[360,340],\"parameters\":{},\"typeVersion\":2},{\"id\":\"6db7b4f5-b932-44d8-8311-2250aeee2502\",\"name\":\"Google Sheets\",\"type\":\"n8n-nodes-base.googleSheets\",\"position\":[660,340],\"parameters\":{},\"typeVersion\":4.5},{\"id\":\"7f2a88b7-16b5-4ce4-89a4-68c477a08fba\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-1860,140],\"parameters\":{\"content\":\"\"},\"typeVersion\":1},{\"id\":\"d0606f04-8d97-4aa7-a2db-bbb748c0e714\",\"name\":\"When Executed by Another Workflow\",\"type\":\"n8n-nodes-base.executeWorkflowTrigger\",\"position\":[-1100,160],\"parameters\":{},\"typeVersion\":1.1},{\"id\":\"d53e218d-5f2a-461b-9e22-e515362d05e8\",\"name\":\"Sticky Note6\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-500,560],\"parameters\":{\"content\":\"\"},\"typeVersion\":1},{\"id\":\"3c88feea-0dc4-480d-a3a5-236ee269b79b\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-1860,-240],\"parameters\":{\"content\":\"\"},\"typeVersion\":1}],\"active\":true,\"pinData\":{\"When clicking â€˜Test workflowâ€™\":[{\"json\":{\"executionId\":44762}}]},\"settings\":{\"executionOrder\":\"v1\"},\"versionId\":\"95e5afe5-706f-460b-bf58-f20c7ffe4151\",\"connections\":{\"Get AI Pricing\":{\"main\":[[{\"node\":\"Get Models Price and Add Summary\",\"type\":\"main\",\"index\":0}]]},\"Set Ai_Run_Data\":{\"main\":[[{\"node\":\"Get AI Pricing\",\"type\":\"main\",\"index\":0}]]},\"Get AI Usage Data\":{\"main\":[[{\"node\":\"Set Ai_Run_Data\",\"type\":\"main\",\"index\":0}]]},\"n8n Get Execution Data\":{\"main\":[[{\"node\":\"Get AI Usage Data\",\"type\":\"main\",\"index\":0}]]},\"Get Models Price and Add Summary\":{\"main\":[[{\"node\":\"Google Sheets\",\"type\":\"main\",\"index\":0}]]},\"When Executed by Another Workflow\":{\"main\":[[{\"node\":\"n8n Get Execution Data\",\"type\":\"main\",\"index\":0}]]},\"When clicking â€˜Test workflowâ€™\":{\"main\":[[{\"node\":\"n8n Get Execution Data\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "![ToeknsEstim8r](https://fillin8n.realsimple.dev/Evil-King-Browser-Devours-Tokens.jpg)\n\n#### _Save Your Tokens from Evil King Browser_\n\n> **Image Generated with[ideoGener8r](https://ideogener8r.com?utm_source=n8n&utm_medium=template&utm_campaign=tokenestim8r)**  \n>  _n8n workflow template_\n\n* * *\n\n## ğŸ” Estimate token usage and AI model cost from any workflow in n8n\n\n### ğŸ™‹â€â™‚ï¸ Who is this for?\n\nThis workflow is ideal for AI engineers, automation specialists, and business analysts who use OpenAI, Anthropic, or other token-based large language models (LLMs) in their n8n workflows and want to track their usage and accuratley estimate associated costs.\n\nWhether you're prototyping workflows or deploying in production, this tool gives you insight into how many tokens you're using and what that translates to in actual dollars.\n\n### ğŸ˜Œ What problem is this workflow solving?\n\nn8n users running AI-based workflows often struggle to track how many tokens were used per execution and how much those tokens cost. Without visibility into usage, itâ€™s easy to lose track of API spending.\n\nThis workflow solves that problem by:\n\n  * Logging token counts and costs to Google Sheets\n  * Supporting prompt and completion token counts\n  * Providing live pricing (optional, via Jina AI API)\n\n\n\n### âš™ï¸ What this workflow does\n\nThis template allows you to analyze the token usage and cost of **any** workflow in n8n. It uses an `Execute Workflow` node to call the `Token Estim8r` utility, which:\n\n  * Estimates prompt and completion tokens\n  * Retrieves model pricing (either statically or live via Jina API)\n  * Calculates the total cost\n  * Logs the data to a connected Google Sheet with timestamp and model info\n\n\n\n### ğŸ› ï¸ Setup Instructions\n\n  1. **Create Google Sheet** : Copy and paste the CSV template below into a `.csv` file and upload to Google Sheets:\n         \n         timestamp, Total Tokens, Prompt Tokens, Completion Tokens, Models Used, Tools Used, Total Cost, Json Array\n         \n\n  2. **Set up pricing (optional)** : In the `Get AI Pricing` node, add your Jina API Auth Header if you want live pricing.\n\n  3. **Select the correct Google Sheet** : Ensure your workflow is pointing to the imported sheet.\n\n  4. **Attach to your target workflow** : Add an `Execute Workflow` node to the end of your target workflow.\n\n  5. **Point to this Token Estim8r** : Choose this template as the executed workflow and send `{{ $execution.id }}` as the input.\n\n  6. **Run and view results** : Trigger the target workflow and see your token usage and cost data populate in the sheet.\n\n\n\n\n* * *\n\n### ğŸ”§ How to customize this workflow to your needs\n\n  * **Change the logging destination** : Instead of Google Sheets, connect to Airtable, Notion, or a database.\n  * **Support multiple models** : Extend the price-mapping logic to cover your own model providers.\n  * **Add Slack alerts** : Send a notification if a workflow exceeds a token or cost threshold.\n  * **Aggregate costs** : Create a weekly summary workflow that totals cost by workflow or model.\n\n\n\n* * *\n\n> This utility workflow works across all n8n deployment types and uses only built-in nodes.\n",
  "crawled_at": "2025-05-26T04:43:25.210329",
  "readme_zh": "![ToeknsEstim8r](https://fillin8n.realsimple.dev/Evil-King-Browser-Devours-Tokens.jpg)\n\n#### _ä»é‚ªæ¶æµè§ˆå™¨å›½ç‹æ‰‹ä¸­æ‹¯æ•‘ä½ çš„ä»¤ç‰Œ_\n\n> **å›¾ç‰‡ç”±[ideoGener8r](https://ideogener8r.com?utm_source=n8n&utm_medium=template&utm_campaign=tokenestim8r)ç”Ÿæˆ**  \n>  _n8nå·¥ä½œæµæ¨¡æ¿_\n\n* * *\n\n## ğŸ” ä¼°ç®—ä»»æ„n8nå·¥ä½œæµçš„ä»¤ç‰Œä½¿ç”¨é‡åŠAIæ¨¡å‹æˆæœ¬\n\n### ğŸ™‹â€â™‚ï¸ é€‚ç”¨äººç¾¤\n\næœ¬å·¥ä½œæµä¸“ä¸ºåœ¨n8nä¸­ä½¿ç”¨OpenAIã€Anthropicæˆ–å…¶ä»–åŸºäºä»¤ç‰Œçš„å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMsï¼‰çš„AIå·¥ç¨‹å¸ˆã€è‡ªåŠ¨åŒ–ä¸“å®¶å’Œä¸šåŠ¡åˆ†æå¸ˆè®¾è®¡ï¼Œå¸®åŠ©ä»–ä»¬è¿½è¸ªä½¿ç”¨æƒ…å†µå¹¶ç²¾å‡†ä¼°ç®—ç›¸å…³æˆæœ¬ã€‚\n\næ— è®ºæ‚¨æ˜¯åœ¨åŸå‹è®¾è®¡é˜¶æ®µè¿˜æ˜¯ç”Ÿäº§éƒ¨ç½²é˜¶æ®µï¼Œè¯¥å·¥å…·éƒ½èƒ½æ¸…æ™°å±•ç¤ºä»¤ç‰Œæ¶ˆè€—é‡åŠå…¶å¯¹åº”çš„å®é™…è´¹ç”¨ã€‚\n\n### ğŸ˜Œ è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ\n\nä½¿ç”¨AIå·¥ä½œæµçš„n8nç”¨æˆ·å¸¸é¢ä¸´ä¸¤å¤§éš¾é¢˜ï¼šéš¾ä»¥è¿½è¸ªæ¯æ¬¡æ‰§è¡Œçš„ä»¤ç‰Œç”¨é‡ï¼Œä»¥åŠè¿™äº›ä»¤ç‰Œäº§ç”Ÿçš„å®é™…æˆæœ¬ã€‚ç¼ºä¹ä½¿ç”¨å¯è§æ€§å¾ˆå®¹æ˜“å¯¼è‡´APIæ”¯å‡ºå¤±æ§ã€‚\n\næœ¬å·¥ä½œæµé€šè¿‡ä»¥ä¸‹æ–¹å¼è§£å†³é—®é¢˜ï¼š\n  * å°†ä»¤ç‰Œè®¡æ•°å’Œæˆæœ¬è®°å½•åˆ°Googleè¡¨æ ¼\n  * æ”¯æŒæç¤ºä»¤ç‰Œå’Œè¡¥å…¨ä»¤ç‰Œåˆ†åˆ«ç»Ÿè®¡\n  * æä¾›å®æ—¶å®šä»·ï¼ˆå¯é€‰ï¼Œé€šè¿‡Jina AI APIå®ç°ï¼‰\n\n### âš™ï¸ åŠŸèƒ½è¯´æ˜\n\nè¯¥æ¨¡æ¿å¯åˆ†æ**ä»»ä½•**n8nå·¥ä½œæµçš„ä»¤ç‰Œä½¿ç”¨æˆæœ¬ï¼Œé€šè¿‡`æ‰§è¡Œå·¥ä½œæµ`èŠ‚ç‚¹è°ƒç”¨`ä»¤ç‰Œä¼°ç®—å™¨`å·¥å…·å®ç°ï¼š\n  * ä¼°ç®—æç¤ºä»¤ç‰Œå’Œè¡¥å…¨ä»¤ç‰Œæ•°é‡\n  * è·å–æ¨¡å‹å®šä»·ï¼ˆé™æ€æ•°æ®æˆ–é€šè¿‡Jina APIå®æ—¶æŸ¥è¯¢ï¼‰\n  * è®¡ç®—æ€»æˆæœ¬\n  * å°†å¸¦æ—¶é—´æˆ³çš„æ¨¡å‹æ•°æ®è®°å½•åˆ°Googleè¡¨æ ¼\n\n### ğŸ› ï¸ é…ç½®æŒ‡å—\n\n1. **åˆ›å»ºGoogleè¡¨æ ¼**ï¼šå°†ä¸‹æ–¹CSVæ¨¡æ¿ç²˜è´´è‡³.csvæ–‡ä»¶å¹¶ä¸Šä¼ è‡³Googleè¡¨æ ¼ï¼š\n         \n         æ—¶é—´æˆ³,æ€»ä»¤ç‰Œæ•°,æç¤ºä»¤ç‰Œ,è¡¥å…¨ä»¤ç‰Œ,ä½¿ç”¨æ¨¡å‹,ä½¿ç”¨å·¥å…·,æ€»æˆæœ¬,JSONæ•°ç»„\n         \n2. **è®¾ç½®å®šä»·ï¼ˆå¯é€‰ï¼‰**ï¼šåœ¨`è·å–AIå®šä»·`èŠ‚ç‚¹ä¸­æ·»åŠ Jina APIè®¤è¯å¤´ä»¥å¯ç”¨å®æ—¶å®šä»·\n\n3. **é€‰æ‹©æ­£ç¡®è¡¨æ ¼**ï¼šç¡®ä¿å·¥ä½œæµæŒ‡å‘å·²å¯¼å…¥çš„è¡¨æ ¼\n\n4. **é™„åŠ åˆ°ç›®æ ‡å·¥ä½œæµ**ï¼šåœ¨ç›®æ ‡å·¥ä½œæµæœ«ç«¯æ·»åŠ `æ‰§è¡Œå·¥ä½œæµ`èŠ‚ç‚¹\n\n5. **å…³è”ä»¤ç‰Œä¼°ç®—å™¨**ï¼šé€‰æ‹©æœ¬æ¨¡æ¿ä½œä¸ºè¢«æ‰§è¡Œå·¥ä½œæµï¼Œè¾“å…¥`{{ $execution.id }}`\n\n6. **è¿è¡ŒæŸ¥çœ‹ç»“æœ**ï¼šè§¦å‘ç›®æ ‡å·¥ä½œæµåï¼Œè¡¨æ ¼å°†è‡ªåŠ¨å¡«å……ä»¤ç‰Œç”¨é‡å’Œæˆæœ¬æ•°æ®\n\n* * *\n\n### ğŸ”§ è‡ªå®šä¹‰æ‰©å±•æ–¹æ¡ˆ\n\n  * **æ›´æ”¹è®°å½•ç›®æ ‡**ï¼šæ›¿æ¢Googleè¡¨æ ¼ä¸ºAirtableã€Notionæˆ–æ•°æ®åº“\n  * **æ”¯æŒå¤šæ¨¡å‹**ï¼šæ‰©å±•ä»·æ ¼æ˜ å°„é€»è¾‘ä»¥è¦†ç›–å…¶ä»–æ¨¡å‹ä¾›åº”å•†\n  * **æ·»åŠ Slackè­¦æŠ¥**ï¼šå½“å·¥ä½œæµè¶…å‡ºä»¤ç‰Œ/æˆæœ¬é˜ˆå€¼æ—¶å‘é€é€šçŸ¥\n  * **æˆæœ¬æ±‡æ€»**ï¼šåˆ›å»ºæŒ‰å‘¨æ±‡æ€»å·¥ä½œæµï¼Œç»Ÿè®¡å„å·¥ä½œæµ/æ¨¡å‹çš„æ€»æˆæœ¬\n\n* * *\n\n> è¯¥å·¥å…·å·¥ä½œæµå…¼å®¹æ‰€æœ‰n8néƒ¨ç½²ç±»å‹ï¼Œä»…ä½¿ç”¨å†…ç½®èŠ‚ç‚¹å®ç°ã€‚",
  "title_zh": "ğŸ¥‡ Token Estim8r - å­å·¥ä½œæµï¼šä½¿ç”¨JinaAIè¿½è¸ªAIæ¨¡å‹ä»¤ç‰Œä½¿ç”¨é‡ä¸æˆæœ¬",
  "publish_date_zh": "ä¸Šæ¬¡æ›´æ–°äº18å¤©å‰",
  "workflow_json_zh": "{\"id\":\"L7ExYkeKvBYwWbc3\",\"meta\":{\"instanceId\":\"ba3fa76a571c35110ef5f67e5099c9a5c1768ef125c2f3b804ba20de75248c0b\",\"templateCredsSetupCompleted\":false},\"name\":\"Get Model Token Count and Tools\",\"tags\":[],\"nodes\":[{\"id\":\"c920594a-980b-4f41-997a-78768984df6f\",\"name\":\"When clicking â€˜Test workflowâ€™\",\"type\":\"n8n-nodes-base.manualTrigger\",\"position\":[-1100,580],\"parameters\":{},\"typeVersion\":1},{\"id\":\"a6f21ab6-219a-49fa-b7ee-f59db8a49da6\",\"name\":\"n8n Get Execution Data\",\"type\":\"n8n-nodes-base.n8n\",\"position\":[-800,340],\"parameters\":{},\"typeVersion\":1},{\"id\":\"2aad0913-9c3c-413b-8a99-61acb7833f1d\",\"name\":\"Get AI Usage Data\",\"type\":\"n8n-nodes-base.code\",\"position\":[-480,340],\"parameters\":{},\"typeVersion\":2},{\"id\":\"4983f61e-b7b6-4607-b255-6bea04d9fcda\",\"name\":\"Set Ai_Run_Data\",\"type\":\"n8n-nodes-base.set\",\"position\":[-200,340],\"parameters\":{},\"typeVersion\":3.4},{\"id\":\"3ea6794e-25d6-432b-905c-3207f87fb048\",\"name\":\"Get AI Pricing\",\"type\":\"n8n-nodes-base.httpRequest\",\"onError\":\"continueRegularOutput\",\"position\":[80,340],\"parameters\":{},\"retryOnFail\":true,\"typeVersion\":4.2},{\"id\":\"e384a724-1f4f-4677-b15e-ddba8e693ecc\",\"name\":\"Get Models Price and Add Summary\",\"type\":\"n8n-nodes-base.code\",\"position\":[360,340],\"parameters\":{},\"typeVersion\":2},{\"id\":\"6db7b4f5-b932-44d8-8311-2250aeee2502\",\"name\":\"Google Sheets\",\"type\":\"n8n-nodes-base.googleSheets\",\"position\":[660,340],\"parameters\":{},\"typeVersion\":4.5},{\"id\":\"7f2a88b7-16b5-4ce4-89a4-68c477a08fba\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-1860,140],\"parameters\":{\"content\":\"\"},\"typeVersion\":1},{\"id\":\"d0606f04-8d97-4aa7-a2db-bbb748c0e714\",\"name\":\"When Executed by Another Workflow\",\"type\":\"n8n-nodes-base.executeWorkflowTrigger\",\"position\":[-1100,160],\"parameters\":{},\"typeVersion\":1.1},{\"id\":\"d53e218d-5f2a-461b-9e22-e515362d05e8\",\"name\":\"Sticky Note6\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-500,560],\"parameters\":{\"content\":\"\"},\"typeVersion\":1},{\"id\":\"3c88feea-0dc4-480d-a3a5-236ee269b79b\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-1860,-240],\"parameters\":{\"content\":\"\"},\"typeVersion\":1}],\"active\":true,\"pinData\":{\"When clicking â€˜Test workflowâ€™\":[{\"json\":{\"executionId\":44762}}]},\"settings\":{\"executionOrder\":\"v1\"},\"versionId\":\"95e5afe5-706f-460b-bf58-f20c7ffe4151\",\"connections\":{\"Get AI Pricing\":{\"main\":[[{\"node\":\"Get Models Price and Add Summary\",\"type\":\"main\",\"index\":0}]]},\"Set Ai_Run_Data\":{\"main\":[[{\"node\":\"Get AI Pricing\",\"type\":\"main\",\"index\":0}]]},\"Get AI Usage Data\":{\"main\":[[{\"node\":\"Set Ai_Run_Data\",\"type\":\"main\",\"index\":0}]]},\"n8n Get Execution Data\":{\"main\":[[{\"node\":\"Get AI Usage Data\",\"type\":\"main\",\"index\":0}]]},\"Get Models Price and Add Summary\":{\"main\":[[{\"node\":\"Google Sheets\",\"type\":\"main\",\"index\":0}]]},\"When Executed by Another Workflow\":{\"main\":[[{\"node\":\"n8n Get Execution Data\",\"type\":\"main\",\"index\":0}]]},\"When clicking â€˜Test workflowâ€™\":{\"main\":[[{\"node\":\"n8n Get Execution Data\",\"type\":\"main\",\"index\":0}]]}}}"
}