{
  "url": "https://n8n.io/workflows/3005-advanced-ai-powered-document-parsing-and-text-extraction-with-llama-parse/",
  "title": "✨🔪 Advanced AI Powered Document Parsing & Text Extraction with Llama Parse",
  "author": "Joseph LePage",
  "publish_date": "Last update 3 months ago",
  "publish_date_absolute": "2025-02-26",
  "categories": [
    {
      "name": "Building Blocks"
    },
    {
      "name": "AI"
    }
  ],
  "workflow_json": "{\"id\":\"kjyWJWfDlyXkKL3m\",\"meta\":{\"instanceId\":\"31e69f7f4a77bf465b805824e303232f0227212ae922d12133a0f96ffeab4fef\",\"templateCredsSetupCompleted\":true},\"name\":\"✨🔪 Advanced AI Powered Document Parsing & Text Extraction with Llama Parse\",\"tags\":[],\"nodes\":[{\"id\":\"ea7670da-896e-4b9c-b0c2-b3a3dbb6f88f\",\"name\":\"Webhook\",\"type\":\"n8n-nodes-base.webhook\",\"position\":[-2320,80],\"webhookId\":\"a9668054-5bd3-427d-8f18-932436441e42\",\"parameters\":{\"path\":\"parse\",\"options\":{},\"httpMethod\":\"POST\"},\"typeVersion\":2},{\"id\":\"2c445d40-5d8b-469e-811e-7423f57ba054\",\"name\":\"Gmail\",\"type\":\"n8n-nodes-base.gmail\",\"position\":[-2040,-1260],\"webhookId\":\"344de9dc-4062-4552-ae29-1e9150322cdb\",\"parameters\":{\"limit\":28,\"filters\":{\"q\":\"has:attachment\",\"sender\":\" joe@example.com\"},\"operation\":\"getAll\"},\"credentials\":{\"gmailOAuth2\":{\"id\":\"1xpVDEQ1yx8gV022\",\"name\":\"Gmail account\"}},\"typeVersion\":2.1},{\"id\":\"f321e1d3-24ba-4623-bb31-93c7f6389aa9\",\"name\":\"Gmail Trigger\",\"type\":\"n8n-nodes-base.gmailTrigger\",\"position\":[-2360,-1260],\"parameters\":{\"filters\":{},\"pollTimes\":{\"item\":[{\"mode\":\"everyMinute\"},{}]}},\"credentials\":{\"gmailOAuth2\":{\"id\":\"1xpVDEQ1yx8gV022\",\"name\":\"Gmail account\"}},\"typeVersion\":1.2},{\"id\":\"ad2701f8-be77-465e-bd58-0e964ba412c0\",\"name\":\"Limit\",\"type\":\"n8n-nodes-base.limit\",\"position\":[-1840,-1260],\"parameters\":{\"keep\":\"lastItems\"},\"typeVersion\":1},{\"id\":\"c305dbce-714a-420e-8dd0-f5c6e80afa01\",\"name\":\"Get Message\",\"type\":\"n8n-nodes-base.gmail\",\"position\":[-1640,-1260],\"webhookId\":\"13036143-6e5b-47c1-84a4-a92cbc33b37f\",\"parameters\":{\"simple\":false,\"options\":{\"downloadAttachments\":true,\"dataPropertyAttachmentsPrefixName\":\"=file\"},\"messageId\":\"={{ $('Gmail').item.json.id }}\",\"operation\":\"get\"},\"credentials\":{\"gmailOAuth2\":{\"id\":\"1xpVDEQ1yx8gV022\",\"name\":\"Gmail account\"}},\"typeVersion\":2.1},{\"id\":\"0e67527b-c886-41a1-b66b-c965fd6b44f3\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-920,-1500],\"parameters\":{\"color\":6,\"width\":320,\"height\":340,\"content\":\"## Send to LlamaParse\\nhttps://docs.cloud.llamaindex.ai/API/upload-file-api-v-1-parsing-upload-post\"},\"typeVersion\":1},{\"id\":\"85e72267-7be0-49ac-b305-4c07356ce244\",\"name\":\"Parse Document with LlamaParse\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[-800,-1360],\"parameters\":{\"url\":\"https://api.cloud.llamaindex.ai/api/parsing/upload\",\"method\":\"POST\",\"options\":{\"response\":{\"response\":{\"responseFormat\":\"json\"}}},\"sendBody\":true,\"contentType\":\"multipart-form-data\",\"sendHeaders\":true,\"authentication\":\"genericCredentialType\",\"bodyParameters\":{\"parameters\":[{\"name\":\"=file\",\"parameterType\":\"formBinaryData\",\"inputDataFieldName\":\"file0\"},{\"name\":\"webhook_url\",\"value\":\"=https://[YOUR-N8N-URL]/webhook/parse\"},{\"name\":\"accurate_mode\",\"value\":\"true\"},{\"name\":\"premium_mode\",\"value\":\"false\"}]},\"genericAuthType\":\"httpHeaderAuth\",\"headerParameters\":{\"parameters\":[{\"name\":\"accept\",\"value\":\"application/json\"}]}},\"credentials\":{\"httpHeaderAuth\":{\"id\":\"9trkgqZBCEmSt6ng\",\"name\":\"GET Webhook\"}},\"executeOnce\":true,\"typeVersion\":4.2,\"alwaysOutputData\":true},{\"id\":\"2664705a-31d5-439b-b1e4-fc6b708a7baa\",\"name\":\"Summarize Email\",\"type\":\"@n8n/n8n-nodes-langchain.chainLlm\",\"position\":[-820,-680],\"parameters\":{\"text\":\"={{ $('Is there an Email Attachement').item.json.text }}\",\"messages\":{\"messageValues\":[{\"message\":\"You are an expert at summarizing email messages.  Provide a summary of the provided email.\"}]},\"promptType\":\"define\"},\"typeVersion\":1.5},{\"id\":\"1405f933-b281-469f-a5b7-0de2f820dd09\",\"name\":\"gpt-4o-mini\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\"position\":[-720,-540],\"parameters\":{\"model\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"gpt-4o-mini\"},\"options\":{}},\"credentials\":{\"openAiApi\":{\"id\":\"jEMSvKmtYfzAkhe6\",\"name\":\"OpenAi account\"}},\"typeVersion\":1.2},{\"id\":\"ea299469-7889-45c9-a8f1-679be09e5aaf\",\"name\":\"Save LlamaParse ID and Summary to Google Sheets\",\"type\":\"n8n-nodes-base.googleSheets\",\"position\":[-140,-1020],\"parameters\":{\"columns\":{\"value\":{\"jobid\":\"={{ $json.id }}\",\"summary\":\"={{ $json.text }}\",\"image_url\":\"={{ $json.webViewLink }}\"},\"schema\":[{\"id\":\"jobid\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"jobid\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"statement_date\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"statement_date\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"org_name\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"org_name\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"member_name\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"member_name\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"subtotal\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"subtotal\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"service_fees_total\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"service_fees_total\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"tips_total\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"tips_total\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"current_excl_gst\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"current_excl_gst\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"container_deposit_total\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"container_deposit_total\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"outstanding_gst\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"outstanding_gst\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"paid_gst\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"paid_gst\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"total_gst\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"total_gst\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"total_bc_pst\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"total_bc_pst\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"total_bc_pst_liquor\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"total_bc_pst_liquor\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"total_savings\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"total_savings\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"final_amount_due\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"final_amount_due\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"payment_reference\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"payment_reference\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"payment_amount\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"payment_amount\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"transaction_number\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"transaction_number\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"image_url\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"image_url\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"summary\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"summary\",\"defaultMatch\":false,\"canBeUsedToMatch\":true}],\"mappingMode\":\"defineBelow\",\"matchingColumns\":[\"jobid\"],\"attemptToConvertTypes\":false,\"convertFieldsToString\":false},\"options\":{},\"operation\":\"appendOrUpdate\",\"sheetName\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"gid=0\",\"cachedResultUrl\":\"https://docs.google.com/spreadsheets/d/1mUvDI9sGvRl64iNV6ODXUzro5Q3Oeuaks5662tfN7Oo/edit#gid=0\",\"cachedResultName\":\"Expenses\"},\"documentId\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"1mUvDI9sGvRl64iNV6ODXUzro5Q3Oeuaks5662tfN7Oo\",\"cachedResultUrl\":\"https://docs.google.com/spreadsheets/d/1mUvDI9sGvRl64iNV6ODXUzro5Q3Oeuaks5662tfN7Oo/edit?usp=drivesdk\",\"cachedResultName\":\"2024.Year.End.Expenses\"}},\"credentials\":{\"googleSheetsOAuth2Api\":{\"id\":\"SOLbth24hZWisXAv\",\"name\":\"Google Sheets account\"}},\"typeVersion\":4.5},{\"id\":\"d8454cf2-5bef-4bfa-9471-c358ff067765\",\"name\":\"Save Document to Google Drive\",\"type\":\"n8n-nodes-base.googleDrive\",\"position\":[-820,-1020],\"parameters\":{\"name\":\"={{ $('Is there an Email Attachement').item.json.id }}_{{ $('Is there an Email Attachement').item.binary.file0.fileName }}\",\"driveId\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"My Drive\"},\"options\":{},\"folderId\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"root\",\"cachedResultUrl\":\"https://drive.google.com/drive\",\"cachedResultName\":\"/ (Root folder)\"},\"inputDataFieldName\":\"=file0\"},\"credentials\":{\"googleDriveOAuth2Api\":{\"id\":\"UhdXGYLTAJbsa0xX\",\"name\":\"Google Drive account\"}},\"typeVersion\":3},{\"id\":\"03f46b72-9e18-44a4-85ef-0eea058c3c6d\",\"name\":\"Extract Invoice Details as JSON\",\"type\":\"@n8n/n8n-nodes-langchain.chainLlm\",\"onError\":\"continueErrorOutput\",\"position\":[-1180,500],\"parameters\":{\"text\":\"=Analyze this markdown content and convert it to JSON following this exact schema:\\n{\\n    \\\"invoice_details\\\": {\\n        \\\"statement_date\\\": \\\"\\\",\\n        \\\"organization\\\": {\\n            \\\"name\\\": \\\"\\\",\\n            \\\"address\\\": \\\"\\\",\\n            \\\"gst_number\\\": \\\"\\\"\\n        },\\n        \\\"member\\\": {\\n            \\\"name\\\": \\\"\\\",\\n            \\\"company\\\": \\\"\\\",\\n            \\\"address\\\": \\\"\\\",\\n            \\\"contact_number\\\": \\\"\\\",\\n            \\\"organization_number\\\": \\\"\\\"\\n        }\\n    },\\n    \\\"transactions\\\": [\\n        {\\n            \\\"date\\\": \\\"\\\",\\n            \\\"document_number\\\": \\\"\\\",\\n            \\\"description\\\": \\\"\\\",\\n            \\\"base_amount\\\": 0.00,\\n            \\\"gst\\\": 0.00,\\n            \\\"bc_pst\\\": 0.00,\\n            \\\"bc_pst_liquor\\\": 0.00,  # Added for liquor PST\\n            \\\"container_deposit\\\": 0.00,  # Added for bottle deposits\\n            \\\"service_fee\\\": 0.00,\\n            \\\"tip_amount\\\": 0.00,\\n            \\\"regular_price\\\": 0.00,  # Added for regular price tracking\\n            \\\"savings_amount\\\": 0.00,  # Added for savings tracking\\n            \\\"total_charge\\\": 0.00,\\n            \\\"transaction_type\\\": \\\"\\\"\\n        }\\n    ],\\n    \\\"payment_details\\\": {\\n        \\\"previous_balance\\\": 0.00,\\n        \\\"payment_amount\\\": 0.00,\\n        \\\"payment_reference\\\": \\\"\\\",\\n        \\\"payment_date\\\": \\\"\\\",\\n        \\\"payment_method\\\": \\\"\\\",\\n        \\\"payment_status\\\": \\\"\\\",\\n        \\\"card_number\\\": \\\"\\\",  # Added for card details\\n        \\\"auth_number\\\": \\\"\\\",  # Added for authorization\\n        \\\"transaction_number\\\": \\\"\\\"\\n    },\\n    \\\"invoice_summary\\\": {\\n        \\\"subtotal\\\": 0.00,\\n        \\\"service_fees_total\\\": 0.00,\\n        \\\"tips_total\\\": 0.00,\\n        \\\"current_excl_gst\\\": 0.00,\\n        \\\"container_deposit_total\\\": 0.00,  # Added for deposits\\n        \\\"outstanding_gst\\\": 0.00,\\n        \\\"paid_gst\\\": 0.00,\\n        \\\"total_gst\\\": 0.00,\\n        \\\"total_bc_pst\\\": 0.00,\\n        \\\"total_bc_pst_liquor\\\": 0.00,  # Added for liquor PST if shown in markdown content\\n        \\\"total_savings\\\": 0.00,  # Added for savings\\n        \\\"final_amount_due\\\": 0.00\\n    },\\n    \\\"payment_terms\\\": {\\n        \\\"due_date\\\": \\\"\\\",\\n        \\\"processing_date\\\": \\\"\\\",\\n        \\\"special_notices\\\": [],\\n        \\\"cancellation_policy\\\": \\\"\\\",\\n        \\\"refund_policy\\\": \\\"\\\",\\n        \\\"return_policy\\\": \\\"\\\"  # Added for return policy\\n    },\\n    \\\"additional_info\\\": {\\n        \\\"booking_number\\\": \\\"\\\",\\n        \\\"transaction_time\\\": \\\"\\\",  # Added for transaction time\\n        \\\"register_info\\\": \\\"\\\",     # Added for register details\\n        \\\"event_details\\\": {\\n            \\\"date\\\": \\\"\\\",\\n            \\\"time\\\": \\\"\\\",\\n            \\\"location\\\": \\\"\\\"\\n        },\\n        \\\"special_instructions\\\": []\\n    },\\n    \\\"summary\\\": \\\"\\\" # The natural language summary of the invoice\\n}\\n\\nMarkdown Content:\\n{{ $json.data }}\\n\\nImportant:\\n- Extract exact values from the markdown\\n- Return only valid JSON\\n- Include all fields even if empty\\n- Format numbers as floats with 2 decimal places\\n- Track container deposits separately\\n- Show liquor PST (10%) separately from regular PST if provided in markdown content\\n- Include regular prices and savings amounts\\n- Track transaction details including card info and authorization\\n- Parse return policy information\\n- Include register and transaction time details\\n- Ensure final_amount_due equals the sum of all applicable charges and taxes\\n- Summarize the markdown contents\\n- Only output valid JSON without any preamble or further explanation.  Remove any ```json and ``` from response.\",\"promptType\":\"define\"},\"typeVersion\":1.5,\"alwaysOutputData\":true},{\"id\":\"3c371677-76e8-45d7-8c05-a4ca1cc0b1fe\",\"name\":\"gpt-4o-mini1\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\"position\":[-1600,240],\"parameters\":{\"options\":{}},\"credentials\":{\"openAiApi\":{\"id\":\"jEMSvKmtYfzAkhe6\",\"name\":\"OpenAi account\"}},\"typeVersion\":1},{\"id\":\"9ff3f86f-9ffc-42fa-b428-a6bfabf2426a\",\"name\":\"gpt-4o-mini2\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\"position\":[-1080,640],\"parameters\":{\"model\":\"gpt-4o\",\"options\":{}},\"credentials\":{\"openAiApi\":{\"id\":\"jEMSvKmtYfzAkhe6\",\"name\":\"OpenAi account\"}},\"typeVersion\":1},{\"id\":\"69a0505f-1fe4-4581-ad2d-5bc7d68874e9\",\"name\":\"Update Google Sheet by LlamaParse ID\",\"type\":\"n8n-nodes-base.googleSheets\",\"position\":[-540,600],\"parameters\":{\"columns\":{\"value\":{\"jobid\":\"={{ $('Webhook').item.json.body.jobId }}\",\"summary\":\"={{ $json.output.summary }}\",\"org_name\":\"={{ $json.output.invoice_details.organization.name }}\",\"paid_gst\":\"={{ $json.output.invoice_summary.paid_gst }}\",\"subtotal\":\"={{ $json.output.invoice_summary.subtotal }}\",\"total_gst\":\"={{ $json.output.invoice_summary.total_gst }}\",\"tips_total\":\"={{ $json.output.invoice_summary.tips_total }}\",\"member_name\":\"={{ $json.output.invoice_details.member.name }}\",\"total_bc_pst\":\"={{ $json.output.invoice_summary.total_bc_pst }}\",\"total_savings\":\"={{ $json.output.invoice_summary.total_savings }}\",\"payment_amount\":\"={{ $json.output.payment_details.payment_amount }}\",\"statement_date\":\"={{ $json.output.invoice_details.statement_date }}\",\"outstanding_gst\":\"={{ $json.output.invoice_summary.outstanding_gst }}\",\"current_excl_gst\":\"={{ $json.output.invoice_summary.current_excl_gst }}\",\"final_amount_due\":\"={{ $json.output.invoice_summary.final_amount_due }}\",\"payment_reference\":\"={{ $json.output.payment_details.payment_reference }}\",\"service_fees_total\":\"={{ $json.output.invoice_summary.service_fees_total }}\",\"transaction_number\":\"={{ $json.output.payment_details.transaction_number }}\",\"total_bc_pst_liquor\":\"={{ $json.output.invoice_summary.total_bc_pst_liquor }}\",\"container_deposit_total\":\"={{ $json.output.invoice_summary.container_deposit_total }}\"},\"schema\":[{\"id\":\"jobid\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"jobid\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"statement_date\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"statement_date\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"org_name\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"org_name\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"member_name\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"member_name\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"subtotal\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"subtotal\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"service_fees_total\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"service_fees_total\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"tips_total\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"tips_total\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"current_excl_gst\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"current_excl_gst\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"container_deposit_total\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"container_deposit_total\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"outstanding_gst\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"outstanding_gst\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"paid_gst\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"paid_gst\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"total_gst\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"total_gst\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"total_bc_pst\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"total_bc_pst\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"total_bc_pst_liquor\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"total_bc_pst_liquor\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"total_savings\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"total_savings\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"final_amount_due\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"final_amount_due\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"payment_reference\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"payment_reference\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"payment_amount\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"payment_amount\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"transaction_number\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"transaction_number\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"summary\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"summary\",\"defaultMatch\":false,\"canBeUsedToMatch\":true}],\"mappingMode\":\"defineBelow\",\"matchingColumns\":[\"jobid\"]},\"options\":{},\"operation\":\"update\",\"sheetName\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"gid=0\",\"cachedResultUrl\":\"https://docs.google.com/spreadsheets/d/1mUvDI9sGvRl64iNV6ODXUzro5Q3Oeuaks5662tfN7Oo/edit#gid=0\",\"cachedResultName\":\"Expenses\"},\"documentId\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"1mUvDI9sGvRl64iNV6ODXUzro5Q3Oeuaks5662tfN7Oo\",\"cachedResultUrl\":\"https://docs.google.com/spreadsheets/d/1mUvDI9sGvRl64iNV6ODXUzro5Q3Oeuaks5662tfN7Oo/edit?usp=drivesdk\",\"cachedResultName\":\"2024.Year.End.Expenses\"}},\"credentials\":{\"googleSheetsOAuth2Api\":{\"id\":\"SOLbth24hZWisXAv\",\"name\":\"Google Sheets account\"}},\"typeVersion\":4.5},{\"id\":\"19907cba-4530-4f25-8a6f-435b1f8d23ad\",\"name\":\"Invoice Details\",\"type\":\"n8n-nodes-base.set\",\"position\":[-780,400],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"e145ed8c-cdea-4e5a-ba11-d8ce595dfb8d\",\"name\":\"output\",\"type\":\"object\",\"value\":\"={{ $json.text }}\"}]}},\"typeVersion\":3.4},{\"id\":\"af95c024-8e36-499b-af32-4c661da49a61\",\"name\":\"Prepare Message\",\"type\":\"n8n-nodes-base.set\",\"position\":[-540,400],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"3e566101-2ad9-444b-8459-451ba6a91575\",\"name\":\"invoice_details.statement_date\",\"type\":\"string\",\"value\":\"={{ $json.output.invoice_details.statement_date }}\"},{\"id\":\"57a466f6-d354-4864-98d3-ba4673afde98\",\"name\":\"invoice_details.organization\",\"type\":\"object\",\"value\":\"={{ $json.output.invoice_details.organization }}\"},{\"id\":\"e1b22978-8114-4956-a5fc-3efbc43335a3\",\"name\":\"invoice_details.member\",\"type\":\"object\",\"value\":\"={{ $json.output.invoice_details.member }}\"},{\"id\":\"e45a744c-0874-48b7-b59a-9d83aad27ff3\",\"name\":\"payment_details\",\"type\":\"object\",\"value\":\"={{ $json.output.payment_details }}\"},{\"id\":\"c0335dc7-1b5c-41fc-b60a-bf45248c9f7f\",\"name\":\"invoice_summary\",\"type\":\"object\",\"value\":\"={{ $json.output.invoice_summary }}\"},{\"id\":\"6c9ba3bf-37a6-4a8f-b97d-991f3ce6950f\",\"name\":\"summary\",\"type\":\"string\",\"value\":\"={{ $json.output.summary }}\"}]}},\"typeVersion\":3.4},{\"id\":\"333f42a7-2665-4613-89c9-c184d764af37\",\"name\":\"Send Invoice Details as Telegram Message\",\"type\":\"n8n-nodes-base.telegram\",\"position\":[-340,400],\"webhookId\":\"04464e72-2be3-4df9-8a08-18d23cb75d72\",\"parameters\":{\"text\":\"={{ $json.summary }}\\n--------\\n{{ $json.invoice_summary.toJsonString() }}\",\"chatId\":\"={{ $env.TELEGRAM_CHAT_ID }}\",\"additionalFields\":{\"parse_mode\":\"HTML\",\"appendAttribution\":false}},\"credentials\":{\"telegramApi\":{\"id\":\"pAIFhguJlkO3c7aQ\",\"name\":\"Telegram account\"}},\"typeVersion\":1.2},{\"id\":\"faa0768f-1d4c-42c4-902c-b2d0d40f0eb4\",\"name\":\"gpt-4o-mini3\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\"position\":[-1080,60],\"parameters\":{\"model\":\"gpt-4o\",\"options\":{}},\"credentials\":{\"openAiApi\":{\"id\":\"jEMSvKmtYfzAkhe6\",\"name\":\"OpenAi account\"}},\"typeVersion\":1},{\"id\":\"d1a54284-60d1-4fac-b81b-4ed1610ddf2e\",\"name\":\"Send Error Message 2\",\"type\":\"n8n-nodes-base.telegram\",\"position\":[-780,600],\"webhookId\":\"3ba1ee6d-1648-4421-823b-e68ae14d769b\",\"parameters\":{\"text\":\"=Error in workflow\",\"chatId\":\"={{ $env.TELEGRAM_CHAT_ID }}\",\"additionalFields\":{\"parse_mode\":\"HTML\",\"appendAttribution\":false}},\"credentials\":{\"telegramApi\":{\"id\":\"pAIFhguJlkO3c7aQ\",\"name\":\"Telegram account\"}},\"typeVersion\":1.2},{\"id\":\"b1b50042-8270-4e13-b7b1-6d017e9be8d9\",\"name\":\"Send Error Message 1\",\"type\":\"n8n-nodes-base.telegram\",\"position\":[-780,60],\"webhookId\":\"3ba1ee6d-1648-4421-823b-e68ae14d769b\",\"parameters\":{\"text\":\"=Error in workflow\",\"chatId\":\"={{ $env.TELEGRAM_CHAT_ID }}\",\"additionalFields\":{\"parse_mode\":\"HTML\",\"appendAttribution\":false}},\"credentials\":{\"telegramApi\":{\"id\":\"pAIFhguJlkO3c7aQ\",\"name\":\"Telegram account\"}},\"typeVersion\":1.2},{\"id\":\"a365c8a1-c0fb-43f7-84fa-b68a0e9c087e\",\"name\":\"Send Document Summary as Telegram Message\",\"type\":\"n8n-nodes-base.telegram\",\"position\":[-540,-200],\"webhookId\":\"04464e72-2be3-4df9-8a08-18d23cb75d72\",\"parameters\":{\"text\":\"={{ $json.text }}\",\"chatId\":\"={{ $env.TELEGRAM_CHAT_ID }}\",\"additionalFields\":{\"parse_mode\":\"HTML\",\"appendAttribution\":false}},\"credentials\":{\"telegramApi\":{\"id\":\"pAIFhguJlkO3c7aQ\",\"name\":\"Telegram account\"}},\"typeVersion\":1.2},{\"id\":\"6abd00a0-2971-49f9-812f-f65a0004136b\",\"name\":\"Summarize Document\",\"type\":\"@n8n/n8n-nodes-langchain.chainLlm\",\"onError\":\"continueErrorOutput\",\"position\":[-1180,-80],\"parameters\":{\"text\":\"=Please analyze this document and provide:\\n\\n## Document Analysis\\n- A concise executive summary (2-3 sentences)\\n- Key themes and main points\\n- Notable findings or insights\\n- Data highlights and important statistics (if applicable)\\n\\n## Recommendations\\n- Action items or next steps\\n- Areas requiring further investigation\\n- Potential implications\\n\\n## Format Requirements\\n- Structure the analysis using clear headers and sections\\n- Include relevant quotes to support key points\\n- Present any numerical data in tables or bullet points\\n- Highlight critical information using bold text\\n\\nPlease maintain the original document's context while making the content more accessible and actionable.\\n\\nHere is the document: {{ $json.data }}\\n\",\"promptType\":\"define\"},\"typeVersion\":1.5,\"alwaysOutputData\":true},{\"id\":\"e672bcf3-0d5f-4410-ac5b-660c3ba0c456\",\"name\":\"Classify Parsed Document\",\"type\":\"@n8n/n8n-nodes-langchain.textClassifier\",\"position\":[-1680,80],\"parameters\":{\"options\":{},\"inputText\":\"={{ $json.data }}\",\"categories\":{\"categories\":[{\"category\":\"not invoice\",\"description\":\"The document is not an invoice\"},{\"category\":\"invoice\",\"description\":\"The document is an invoice\"}]}},\"typeVersion\":1},{\"id\":\"cc522966-3e6a-4830-bde9-d4e251752ec0\",\"name\":\"Get Parsed Markdown\",\"type\":\"n8n-nodes-base.set\",\"position\":[-1980,80],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"55b5a755-eeaf-4ce7-b600-e6c864dc7e10\",\"name\":\"data\",\"type\":\"string\",\"value\":\"={{ $json.body.md }}\"}]}},\"typeVersion\":3.4},{\"id\":\"683fa521-dfd0-4b1c-905f-d5a4f56ab65a\",\"name\":\"Prepare Data\",\"type\":\"n8n-nodes-base.set\",\"position\":[-640,-1020],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"cee9e2d3-b311-4903-9867-e7d3d7ed2456\",\"name\":\"google_drive_fileid\",\"type\":\"string\",\"value\":\"={{ $json.id }}\"},{\"id\":\"5c6eddf6-5a5e-4c51-87ed-8e3aabc2f65d\",\"name\":\"webViewLink\",\"type\":\"string\",\"value\":\"={{ $json.webViewLink }}\"}]}},\"typeVersion\":3.4},{\"id\":\"b64a21ab-0e1f-4d6c-b718-a9aaaa27ae19\",\"name\":\"HTTP Request\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[-2040,-860],\"parameters\":{\"url\":\"https://api.cloud.llamaindex.ai/api/parsing/supported_file_extensions\",\"options\":{}},\"typeVersion\":4.2},{\"id\":\"cd0699cf-3a95-4dc8-806a-6a01339c598d\",\"name\":\"Is there an Email Attachement\",\"type\":\"n8n-nodes-base.if\",\"position\":[-1420,-1260],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"460b82e5-30f5-4cb3-a937-a275fd256fcc\",\"operator\":{\"type\":\"object\",\"operation\":\"exists\",\"singleValue\":true},\"leftValue\":\"={{ $input.item.binary }}\",\"rightValue\":\"\"}]}},\"typeVersion\":2.2},{\"id\":\"269ba37f-fa18-4333-be3c-eee6ef5c0f56\",\"name\":\"Aggregate\",\"type\":\"n8n-nodes-base.aggregate\",\"position\":[-1840,-860],\"parameters\":{\"options\":{},\"aggregate\":\"aggregateAllItemData\",\"destinationFieldName\":\"extensions\"},\"typeVersion\":1},{\"id\":\"dffd2e83-58ff-49a0-b547-3b6f4b92dfa9\",\"name\":\"Edit Fields\",\"type\":\"n8n-nodes-base.set\",\"position\":[-1620,-860],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"c9c59aae-b507-4493-a047-495bed344a5e\",\"name\":\"extension\",\"type\":\"string\",\"value\":\"=.{{ $('Is there an Email Attachement').item.binary.file0.fileExtension }}\"}]}},\"typeVersion\":3.4},{\"id\":\"02a121a4-edea-45c4-b325-2f61b3d0b02e\",\"name\":\"Merge Email Processing\",\"type\":\"n8n-nodes-base.merge\",\"position\":[-380,-1020],\"parameters\":{\"mode\":\"combine\",\"options\":{},\"combineBy\":\"combineByPosition\",\"numberInputs\":3},\"typeVersion\":3},{\"id\":\"c1310be3-6448-48d1-a954-caa3d4651075\",\"name\":\"Merge\",\"type\":\"n8n-nodes-base.merge\",\"position\":[-1120,-1020],\"parameters\":{\"mode\":\"combine\",\"options\":{},\"combineBy\":\"combineAll\"},\"typeVersion\":3},{\"id\":\"dbe3a235-0bae-4743-b53e-154b75911482\",\"name\":\"If Supported File Extensions\",\"type\":\"n8n-nodes-base.if\",\"position\":[-1420,-860],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"f76cc5a7-6882-4e1f-86d5-99d5d9e90a34\",\"operator\":{\"type\":\"boolean\",\"operation\":\"true\",\"singleValue\":true},\"leftValue\":\"={{ $('Aggregate').item.json.extensions.includes($json.extension)}}\",\"rightValue\":\"\"}]}},\"typeVersion\":2.2},{\"id\":\"1413f84b-d1a9-4b0c-ae43-7f303a54527e\",\"name\":\"No Operation, do nothing\",\"type\":\"n8n-nodes-base.noOp\",\"position\":[-1120,-1260],\"parameters\":{},\"typeVersion\":1},{\"id\":\"9f3ae287-cb8b-466c-8dbe-678be30c2c04\",\"name\":\"No Operation, do nothing1\",\"type\":\"n8n-nodes-base.noOp\",\"position\":[-1120,-780],\"parameters\":{},\"typeVersion\":1},{\"id\":\"6f9b5ae2-22e8-4dc8-ba0b-06fbc585f209\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-2140,-980],\"parameters\":{\"width\":920,\"height\":320,\"content\":\"## Check for Supported File Extension\\nhttps://docs.cloud.llamaindex.ai/API/get-supported-file-extensions-api-v-1-parsing-supported-file-extensions-get\"},\"typeVersion\":1},{\"id\":\"28c5c09a-9a15-4af9-8253-59ae36dfe390\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-2140,-1420],\"parameters\":{\"color\":3,\"width\":920,\"height\":400,\"content\":\"## Get Emails with Attachments\\n### ☀️Disclaimer\\nThis workflow only processes the the first attachment of the email.\\nAdjust search and limit settings to suit your use case.\"},\"typeVersion\":1},{\"id\":\"3174a934-3b64-47b2-b81b-bfe717a034e2\",\"name\":\"Sticky Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-920,-1120],\"parameters\":{\"color\":4,\"width\":460,\"height\":300,\"content\":\"## Save Document to Google Drive\"},\"typeVersion\":1},{\"id\":\"92f079d1-c5bd-45fe-9372-7ff521eda15b\",\"name\":\"Sticky Note4\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-920,-780],\"parameters\":{\"color\":5,\"width\":460,\"height\":380,\"content\":\"## Summarize the Email Message\"},\"typeVersion\":1},{\"id\":\"fd7d7e7a-005a-4a43-a3de-e9bb036bb615\",\"name\":\"Sticky Note5\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-220,-1120],\"parameters\":{\"color\":4,\"width\":300,\"height\":300,\"content\":\"## Save To Google Sheets\"},\"typeVersion\":1},{\"id\":\"c6469054-0345-4371-8928-21a04c21b131\",\"name\":\"Sticky Note9\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-3060,-1540],\"parameters\":{\"width\":540,\"height\":1340,\"content\":\"# Description\\n\\nThis workflow automates document processing using LlamaParse to extract and analyze text from various file formats. It intelligently processes documents, extracts structured data, and delivers actionable insights through multiple channels.\\n\\n## How It Works\\n\\n### Document Ingestion & Processing 📄\\n- Monitors Gmail for incoming attachments or accepts documents via webhook\\n- Validates file formats against supported LlamaParse extensions\\n- Uploads documents to LlamaParse for advanced text extraction\\n- Stores original documents in Google Drive for reference\\n\\n### Intelligent Document Analysis 🧠\\n- Automatically classifies document types (invoices, reports, etc.)\\n- Extracts structured data using customized AI prompts\\n- Generates comprehensive document summaries with key insights\\n- Converts unstructured text into organized JSON data\\n\\n### Invoice Processing Automation 💼\\n- Extracts critical invoice details (dates, amounts, line items)\\n- Organizes financial data into structured formats\\n- Calculates tax breakdowns, subtotals, and payment information\\n- Maintains detailed records for accounting purposes\\n\\n### Multi-Channel Delivery 📱\\n- Saves extracted data to Google Sheets for tracking and analysis\\n- Sends concise summaries via Telegram for immediate review\\n- Creates searchable document archives in Google Drive\\n- Updates spreadsheets with structured financial information\\n\\n## Setup Steps\\n\\n### Configure API Credentials 🔑\\n- Set up LlamaParse API connection\\n- Configure Gmail OAuth for email monitoring\\n- Set up Google Drive and Sheets integrations\\n- Add Telegram bot credentials for notifications\\n\\n### Customize AI Processing ⚙️\\n- Adjust document classification parameters\\n- Modify extraction templates for specific document types\\n- Fine-tune summary generation prompts\\n- Customize invoice data extraction schema\\n\\n### Test and Deploy 🚀\\n- Test with sample documents of various formats\\n- Verify data extraction accuracy\\n- Confirm notification delivery\\n- Monitor processing pipeline performance\\n\\n\\n\"},\"typeVersion\":1},{\"id\":\"b2024905-5c3b-49d5-89b9-ef41c4a4283c\",\"name\":\"Sticky Note8\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-2440,-1340],\"parameters\":{\"color\":4,\"width\":260,\"height\":280,\"content\":\"## 👍Try Me!\"},\"typeVersion\":1},{\"id\":\"22284854-4005-4678-94f8-d914e031e6fc\",\"name\":\"Sticky Note6\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-2480,-1540],\"parameters\":{\"color\":7,\"width\":2600,\"height\":1180,\"content\":\"# ✨🔪 Advanced AI Powered Document Parsing & Text Extraction with Llama Parse\\n\"},\"typeVersion\":1},{\"id\":\"4f0c910e-7ae6-40ac-a659-c14a6704aaba\",\"name\":\"Sticky Note7\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-1280,280],\"parameters\":{\"color\":6,\"width\":1160,\"height\":540,\"content\":\"## Example Invoice Processing\\n\"},\"typeVersion\":1},{\"id\":\"e63bbfe8-8be7-4e3f-a8f5-a85b2ee82959\",\"name\":\"Sticky Note10\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-1220,360],\"parameters\":{\"width\":360,\"height\":420,\"content\":\"## Extract Invoice as JSON\\n☀️Update User & System Prompt for Your Specific Use Case\"},\"typeVersion\":1},{\"id\":\"d321e139-0828-4932-b5a9-ef11f6ae9baa\",\"name\":\"Sticky Note11\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-1280,-280],\"parameters\":{\"color\":5,\"width\":980,\"height\":520,\"content\":\"## Example Document Summarizing\\n\"},\"typeVersion\":1},{\"id\":\"ab9081bd-c1c5-4db1-8dcd-ff243a7ab9be\",\"name\":\"Sticky Note12\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-1220,-200],\"parameters\":{\"width\":360,\"height\":400,\"content\":\"## Summarize Document\\n☀️Update User & System Prompt for Your Specific Use Case\"},\"typeVersion\":1},{\"id\":\"c08bbfa8-abe1-47e2-babe-b62581bcd011\",\"name\":\"Sticky Note13\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-1760,-40],\"parameters\":{\"color\":4,\"width\":440,\"height\":420,\"content\":\"## Classify Parsed Document\\nAdd More Classifications as Required\"},\"typeVersion\":1},{\"id\":\"5ffb907f-9701-401e-85e8-3b91a706ab10\",\"name\":\"Sticky Note14\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-2060,-40],\"parameters\":{\"color\":3,\"width\":260,\"height\":320,\"content\":\"## Parsed Markdown from LlamaParse\"},\"typeVersion\":1},{\"id\":\"a53034d2-34df-421a-aa14-d9d1bbc00fc5\",\"name\":\"Sticky Note15\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-2440,-40],\"parameters\":{\"width\":340,\"height\":320,\"content\":\"## Receive Parsed Document from LlamaParse\"},\"typeVersion\":1},{\"id\":\"933f03f2-c231-4dcd-8aeb-ce716b8cc00e\",\"name\":\"Sticky Note16\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-2480,-320],\"parameters\":{\"color\":7,\"width\":2400,\"height\":1180,\"content\":\"# 🪝Webhook to Receive LlamaParse Response\"},\"typeVersion\":1},{\"id\":\"505a51e4-dea1-4876-964e-f59af728c65b\",\"name\":\"Sticky Note17\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-1760,420],\"parameters\":{\"color\":5,\"width\":440,\"height\":400,\"content\":\"## Save Parsed Document to Google Drive\"},\"typeVersion\":1},{\"id\":\"33ca5eaf-30da-4360-a12b-a7dd8614743f\",\"name\":\"Save Summarized Document to Google Drive\",\"type\":\"n8n-nodes-base.googleDrive\",\"position\":[-540,0],\"parameters\":{\"name\":\"={{ $('Webhook').item.json.body.jobId }}-summary.md\",\"content\":\"={{ $json.text }}\",\"driveId\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"My Drive\"},\"options\":{},\"folderId\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"root\",\"cachedResultUrl\":\"https://drive.google.com/drive\",\"cachedResultName\":\"/ (Root folder)\"},\"operation\":\"createFromText\"},\"credentials\":{\"googleDriveOAuth2Api\":{\"id\":\"UhdXGYLTAJbsa0xX\",\"name\":\"Google Drive account\"}},\"typeVersion\":3},{\"id\":\"a1e8264f-fa99-49a5-a837-6aaf3a2dc39a\",\"name\":\"Save Parsed Document to Google Drive\",\"type\":\"n8n-nodes-base.googleDrive\",\"position\":[-1600,560],\"parameters\":{\"name\":\"={{ $('Webhook').item.json.body.jobId }}-parsed.md\",\"content\":\"={{ $json.data }}\",\"driveId\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"My Drive\"},\"options\":{},\"folderId\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"root\",\"cachedResultUrl\":\"https://drive.google.com/drive\",\"cachedResultName\":\"/ (Root folder)\"},\"operation\":\"createFromText\"},\"credentials\":{\"googleDriveOAuth2Api\":{\"id\":\"UhdXGYLTAJbsa0xX\",\"name\":\"Google Drive account\"}},\"typeVersion\":3}],\"active\":true,\"pinData\":{},\"settings\":{\"timezone\":\"America/Vancouver\",\"callerPolicy\":\"workflowsFromSameOwner\",\"executionOrder\":\"v1\"},\"versionId\":\"c11e3a8a-499b-4b1e-b919-ffbed36ba898\",\"connections\":{\"Gmail\":{\"main\":[[{\"node\":\"Limit\",\"type\":\"main\",\"index\":0}]]},\"Limit\":{\"main\":[[{\"node\":\"Get Message\",\"type\":\"main\",\"index\":0}]]},\"Merge\":{\"main\":[[{\"node\":\"Parse Document with LlamaParse\",\"type\":\"main\",\"index\":0},{\"node\":\"Save Document to Google Drive\",\"type\":\"main\",\"index\":0},{\"node\":\"Summarize Email\",\"type\":\"main\",\"index\":0}]]},\"Webhook\":{\"main\":[[{\"node\":\"Get Parsed Markdown\",\"type\":\"main\",\"index\":0}]]},\"Aggregate\":{\"main\":[[{\"node\":\"Edit Fields\",\"type\":\"main\",\"index\":0}]]},\"Edit Fields\":{\"main\":[[{\"node\":\"If Supported File Extensions\",\"type\":\"main\",\"index\":0}]]},\"Get Message\":{\"main\":[[{\"node\":\"Is there an Email Attachement\",\"type\":\"main\",\"index\":0}]]},\"gpt-4o-mini\":{\"ai_languageModel\":[[{\"node\":\"Summarize Email\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"HTTP Request\":{\"main\":[[{\"node\":\"Aggregate\",\"type\":\"main\",\"index\":0}]]},\"Prepare Data\":{\"main\":[[{\"node\":\"Merge Email Processing\",\"type\":\"main\",\"index\":1}]]},\"gpt-4o-mini1\":{\"ai_languageModel\":[[{\"node\":\"Classify Parsed Document\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"gpt-4o-mini2\":{\"ai_languageModel\":[[{\"node\":\"Extract Invoice Details as JSON\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"gpt-4o-mini3\":{\"ai_languageModel\":[[{\"node\":\"Summarize Document\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"Gmail Trigger\":{\"main\":[[{\"node\":\"Gmail\",\"type\":\"main\",\"index\":0}]]},\"Invoice Details\":{\"main\":[[{\"node\":\"Prepare Message\",\"type\":\"main\",\"index\":0},{\"node\":\"Update Google Sheet by LlamaParse ID\",\"type\":\"main\",\"index\":0}]]},\"Prepare Message\":{\"main\":[[{\"node\":\"Send Invoice Details as Telegram Message\",\"type\":\"main\",\"index\":0}]]},\"Summarize Email\":{\"main\":[[{\"node\":\"Merge Email Processing\",\"type\":\"main\",\"index\":2}]]},\"Summarize Document\":{\"main\":[[{\"node\":\"Send Document Summary as Telegram Message\",\"type\":\"main\",\"index\":0},{\"node\":\"Save Summarized Document to Google Drive\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Send Error Message 1\",\"type\":\"main\",\"index\":0}]]},\"Get Parsed Markdown\":{\"main\":[[{\"node\":\"Classify Parsed Document\",\"type\":\"main\",\"index\":0},{\"node\":\"Save Parsed Document to Google Drive\",\"type\":\"main\",\"index\":0}]]},\"Merge Email Processing\":{\"main\":[[{\"node\":\"Save LlamaParse ID and Summary to Google Sheets\",\"type\":\"main\",\"index\":0}]]},\"Classify Parsed Document\":{\"main\":[[{\"node\":\"Summarize Document\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Extract Invoice Details as JSON\",\"type\":\"main\",\"index\":0}]]},\"If Supported File Extensions\":{\"main\":[[{\"node\":\"Merge\",\"type\":\"main\",\"index\":1}],[{\"node\":\"No Operation, do nothing1\",\"type\":\"main\",\"index\":0}]]},\"Is there an Email Attachement\":{\"main\":[[{\"node\":\"HTTP Request\",\"type\":\"main\",\"index\":0},{\"node\":\"Merge\",\"type\":\"main\",\"index\":0}],[{\"node\":\"No Operation, do nothing\",\"type\":\"main\",\"index\":0}]]},\"Save Document to Google Drive\":{\"main\":[[{\"node\":\"Prepare Data\",\"type\":\"main\",\"index\":0}]]},\"Parse Document with LlamaParse\":{\"main\":[[{\"node\":\"Merge Email Processing\",\"type\":\"main\",\"index\":0}]]},\"Extract Invoice Details as JSON\":{\"main\":[[{\"node\":\"Invoice Details\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Send Error Message 2\",\"type\":\"main\",\"index\":0}]]},\"Save LlamaParse ID and Summary to Google Sheets\":{\"main\":[[]]}}}",
  "readme": "# Description\n\nThis workflow automates document processing using LlamaParse to extract and analyze text from various file formats. It intelligently processes documents, extracts structured data, and delivers actionable insights through multiple channels.\n\n## How It Works\n\n### Document Ingestion & Processing 📄\n\n  * Monitors Gmail for incoming attachments or accepts documents via webhook\n  * Validates file formats against supported LlamaParse extensions\n  * Uploads documents to LlamaParse for advanced text extraction\n  * Stores original documents in Google Drive for reference\n\n\n\n### Intelligent Document Analysis 🧠\n\n  * Automatically classifies document types (invoices, reports, etc.)\n  * Extracts structured data using customized AI prompts\n  * Generates comprehensive document summaries with key insights\n  * Converts unstructured text into organized JSON data\n\n\n\n### Invoice Processing Automation 💼\n\n  * Extracts critical invoice details (dates, amounts, line items)\n  * Organizes financial data into structured formats\n  * Calculates tax breakdowns, subtotals, and payment information\n  * Maintains detailed records for accounting purposes\n\n\n\n### Multi-Channel Delivery 📱\n\n  * Saves extracted data to Google Sheets for tracking and analysis\n  * Sends concise summaries via Telegram for immediate review\n  * Creates searchable document archives in Google Drive\n  * Updates spreadsheets with structured financial information\n\n\n\n## Setup Steps\n\n### Configure API Credentials 🔑\n\n  * Set up LlamaParse API connection\n  * Configure Gmail OAuth for email monitoring\n  * Set up Google Drive and Sheets integrations\n  * Add Telegram bot credentials for notifications\n\n\n\n### Customize AI Processing ⚙️\n\n  * Adjust document classification parameters\n  * Modify extraction templates for specific document types\n  * Fine-tune summary generation prompts\n  * Customize invoice data extraction schema\n\n\n\n### Test and Deploy 🚀\n\n  * Test with sample documents of various formats\n  * Verify data extraction accuracy\n  * Confirm notification delivery\n  * Monitor processing pipeline performance\n\n\n",
  "crawled_at": "2025-05-26T03:28:13.042889",
  "readme_zh": "# 功能描述\n\n本工作流采用LlamaParse技术实现文档自动化处理，可从多种文件格式中提取并分析文本内容。通过智能文档处理、结构化数据提取，最终生成可执行洞察并通过多渠道交付。\n\n## 运行原理\n\n### 文档接收与处理 📄\n\n* 监控Gmail收取附件或通过webhook接收文档\n* 校验文件格式是否适配LlamaParse解析要求\n* 将文档上传至LlamaParse进行高级文本提取\n* 原始文件备份存储至Google Drive\n\n### 智能文档分析 🧠\n\n* 自动识别文档类型（发票/报告等）\n* 通过定制化AI提示词提取结构化数据\n* 生成含关键信息的完整文档摘要\n* 将非结构化文本转换为标准JSON格式\n\n### 发票自动化处理 💼\n\n* 提取核心票据要素（日期/金额/明细项）\n* 将财务数据整理为结构化格式\n* 自动计算税款明细/小计/支付信息\n* 留存详细记录供财务稽核\n\n### 多渠道交付 📱\n\n* 将提取数据存入Google Sheets供追踪分析\n* 通过Telegram发送精简摘要供即时查阅\n* 在Google Drive建立可检索文档库\n* 电子表格自动更新结构化财务数据\n\n## 配置步骤\n\n### API凭证设置 🔑\n\n* 配置LlamaParse API连接\n* 设置Gmail OAuth邮件监控\n* 集成Google Drive及Sheets服务\n* 添加Telegram机器人通知凭证\n\n### AI处理定制 ⚙️\n\n* 调整文档分类参数\n* 修改特定文档类型的提取模板\n* 优化摘要生成提示词\n* 自定义发票数据提取架构\n\n### 测试与部署 🚀\n\n* 使用多格式样本文件测试\n* 验证数据提取准确性\n* 确认通知送达机制\n* 监控处理管道性能",
  "title_zh": "✨🔪 基于Llama Parse的先进AI文档解析与文本提取技术",
  "publish_date_zh": "最后更新于2个月前",
  "workflow_json_zh": "{\n  \"id\": \"kjyWJWfDlyXkKL3m\",\n  \"meta\": {\n    \"instanceId\": \"31e69f7f4a77bf465b805824e303232f0227212ae922d12133a0f96ffeab4fef\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"name\": \"✨🔪 Advanced AI Powered Document Parsing & Text Extraction with Llama Parse\",\n  \"tags\": [],\n  \"nodes\": [\n    {\n      \"id\": \"ea7670da-896e-4b9c-b0c2-b3a3dbb6f88f\",\n      \"name\": \"Webhook\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"position\": [\n        -2320,\n        80\n      ],\n      \"webhookId\": \"a9668054-5bd3-427d-8f18-932436441e42\",\n      \"parameters\": {\n        \"path\": \"parse\",\n        \"options\": {},\n        \"httpMethod\": \"POST\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"2c445d40-5d8b-469e-811e-7423f57ba054\",\n      \"name\": \"Gmail\",\n      \"type\": \"n8n-nodes-base.gmail\",\n      \"position\": [\n        -2040,\n        -1260\n      ],\n      \"webhookId\": \"344de9dc-4062-4552-ae29-1e9150322cdb\",\n      \"parameters\": {\n        \"limit\": 28,\n        \"filters\": {\n          \"q\": \"has:attachment\",\n          \"sender\": \" joe@example.com\"\n        },\n        \"operation\": \"getAll\"\n      },\n      \"credentials\": {\n        \"gmailOAuth2\": {\n          \"id\": \"1xpVDEQ1yx8gV022\",\n          \"name\": \"Gmail account\"\n        }\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"f321e1d3-24ba-4623-bb31-93c7f6389aa9\",\n      \"name\": \"Gmail Trigger\",\n      \"type\": \"n8n-nodes-base.gmailTrigger\",\n      \"position\": [\n        -2360,\n        -1260\n      ],\n      \"parameters\": {\n        \"filters\": {},\n        \"pollTimes\": {\n          \"item\": [\n            {\n              \"mode\": \"everyMinute\"\n            },\n            {}\n          ]\n        }\n      },\n      \"credentials\": {\n        \"gmailOAuth2\": {\n          \"id\": \"1xpVDEQ1yx8gV022\",\n          \"name\": \"Gmail account\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"ad2701f8-be77-465e-bd58-0e964ba412c0\",\n      \"name\": \"Limit\",\n      \"type\": \"n8n-nodes-base.limit\",\n      \"position\": [\n        -1840,\n        -1260\n      ],\n      \"parameters\": {\n        \"keep\": \"lastItems\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"c305dbce-714a-420e-8dd0-f5c6e80afa01\",\n      \"name\": \"Get Message\",\n      \"type\": \"n8n-nodes-base.gmail\",\n      \"position\": [\n        -1640,\n        -1260\n      ],\n      \"webhookId\": \"13036143-6e5b-47c1-84a4-a92cbc33b37f\",\n      \"parameters\": {\n        \"simple\": false,\n        \"options\": {\n          \"downloadAttachments\": true,\n          \"dataPropertyAttachmentsPrefixName\": \"=file\"\n        },\n        \"messageId\": \"={{ $('Gmail').item.json.id }}\",\n        \"operation\": \"get\"\n      },\n      \"credentials\": {\n        \"gmailOAuth2\": {\n          \"id\": \"1xpVDEQ1yx8gV022\",\n          \"name\": \"Gmail account\"\n        }\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"0e67527b-c886-41a1-b66b-c965fd6b44f3\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -920,\n        -1500\n      ],\n      \"parameters\": {\n        \"color\": 6,\n        \"width\": 320,\n        \"height\": 340,\n        \"content\": \"## 发送至LlamaParse\\nhttps://docs.cloud.llamaindex.ai/API/upload-file-api-v-1-parsing-upload-post\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"85e72267-7be0-49ac-b305-4c07356ce244\",\n      \"name\": \"Parse Document with LlamaParse\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        -800,\n        -1360\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.cloud.llamaindex.ai/api/parsing/upload\",\n        \"method\": \"POST\",\n        \"options\": {\n          \"response\": {\n            \"response\": {\n              \"responseFormat\": \"json\"\n            }\n          }\n        },\n        \"sendBody\": true,\n        \"contentType\": \"multipart-form-data\",\n        \"sendHeaders\": true,\n        \"authentication\": \"genericCredentialType\",\n        \"bodyParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"=file\",\n              \"parameterType\": \"formBinaryData\",\n              \"inputDataFieldName\": \"file0\"\n            },\n            {\n              \"name\": \"webhook_url\",\n              \"value\": \"=https://[YOUR-N8N-URL]/webhook/parse\"\n            },\n            {\n              \"name\": \"accurate_mode\",\n              \"value\": \"true\"\n            },\n            {\n              \"name\": \"premium_mode\",\n              \"value\": \"false\"\n            }\n          ]\n        },\n        \"genericAuthType\": \"httpHeaderAuth\",\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"accept\",\n              \"value\": \"application/json\"\n            }\n          ]\n        }\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": {\n          \"id\": \"9trkgqZBCEmSt6ng\",\n          \"name\": \"GET Webhook\"\n        }\n      },\n      \"executeOnce\": true,\n      \"typeVersion\": 4.2,\n      \"alwaysOutputData\": true\n    },\n    {\n      \"id\": \"2664705a-31d5-439b-b1e4-fc6b708a7baa\",\n      \"name\": \"Summarize Email\",\n      \"type\": \"@n8n/n8n-nodes-langchain.chainLlm\",\n      \"position\": [\n        -820,\n        -680\n      ],\n      \"parameters\": {\n        \"text\": \"={{ $('Is there an Email Attachement').item.json.text }}\",\n        \"messages\": {\n          \"messageValues\": [\n            {\n              \"message\": \"You are an expert at summarizing email messages.  Provide a summary of the provided email.\"\n            }\n          ]\n        },\n        \"promptType\": \"define\"\n      },\n      \"typeVersion\": 1.5\n    },\n    {\n      \"id\": \"1405f933-b281-469f-a5b7-0de2f820dd09\",\n      \"name\": \"gpt-4o-mini\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\n      \"position\": [\n        -720,\n        -540\n      ],\n      \"parameters\": {\n        \"model\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gpt-4o-mini\"\n        },\n        \"options\": {}\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"jEMSvKmtYfzAkhe6\",\n          \"name\": \"OpenAi account\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"ea299469-7889-45c9-a8f1-679be09e5aaf\",\n      \"name\": \"Save LlamaParse ID and Summary to Google Sheets\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"position\": [\n        -140,\n        -1020\n      ],\n      \"parameters\": {\n        \"columns\": {\n          \"value\": {\n            \"jobid\": \"={{ $json.id }}\",\n            \"summary\": \"={{ $json.text }}\",\n            \"image_url\": \"={{ $json.webViewLink }}\"\n          },\n          \"schema\": [\n            {\n              \"id\": \"jobid\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"jobid\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"statement_date\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"statement_date\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"org_name\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"org_name\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"member_name\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"member_name\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"subtotal\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"subtotal\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"service_fees_total\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"service_fees_total\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"tips_total\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"tips_total\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"current_excl_gst\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"current_excl_gst\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"container_deposit_total\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"container_deposit_total\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"outstanding_gst\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"outstanding_gst\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"paid_gst\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"paid_gst\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"total_gst\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"total_gst\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"total_bc_pst\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"total_bc_pst\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"total_bc_pst_liquor\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"total_bc_pst_liquor\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"total_savings\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"total_savings\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"final_amount_due\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"final_amount_due\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"payment_reference\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"payment_reference\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"payment_amount\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"payment_amount\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"transaction_number\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"transaction_number\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"image_url\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"image_url\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"summary\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"summary\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            }\n          ],\n          \"mappingMode\": \"defineBelow\",\n          \"matchingColumns\": [\n            \"jobid\"\n          ],\n          \"attemptToConvertTypes\": false,\n          \"convertFieldsToString\": false\n        },\n        \"options\": {},\n        \"operation\": \"appendOrUpdate\",\n        \"sheetName\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gid=0\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1mUvDI9sGvRl64iNV6ODXUzro5Q3Oeuaks5662tfN7Oo/edit#gid=0\",\n          \"cachedResultName\": \"Expenses\"\n        },\n        \"documentId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"1mUvDI9sGvRl64iNV6ODXUzro5Q3Oeuaks5662tfN7Oo\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1mUvDI9sGvRl64iNV6ODXUzro5Q3Oeuaks5662tfN7Oo/edit?usp=drivesdk\",\n          \"cachedResultName\": \"2024.Year.End.Expenses\"\n        }\n      },\n      \"credentials\": {\n        \"googleSheetsOAuth2Api\": {\n          \"id\": \"SOLbth24hZWisXAv\",\n          \"name\": \"Google Sheets account\"\n        }\n      },\n      \"typeVersion\": 4.5\n    },\n    {\n      \"id\": \"d8454cf2-5bef-4bfa-9471-c358ff067765\",\n      \"name\": \"Save Document to Google Drive\",\n      \"type\": \"n8n-nodes-base.googleDrive\",\n      \"position\": [\n        -820,\n        -1020\n      ],\n      \"parameters\": {\n        \"name\": \"={{ $('Is there an Email Attachement').item.json.id }}_{{ $('Is there an Email Attachement').item.binary.file0.fileName }}\",\n        \"driveId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"My Drive\"\n        },\n        \"options\": {},\n        \"folderId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"root\",\n          \"cachedResultUrl\": \"https://drive.google.com/drive\",\n          \"cachedResultName\": \"/ (Root folder)\"\n        },\n        \"inputDataFieldName\": \"=file0\"\n      },\n      \"credentials\": {\n        \"googleDriveOAuth2Api\": {\n          \"id\": \"UhdXGYLTAJbsa0xX\",\n          \"name\": \"Google Drive account\"\n        }\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"03f46b72-9e18-44a4-85ef-0eea058c3c6d\",\n      \"name\": \"Extract Invoice Details as JSON\",\n      \"type\": \"@n8n/n8n-nodes-langchain.chainLlm\",\n      \"onError\": \"continueErrorOutput\",\n      \"position\": [\n        -1180,\n        500\n      ],\n      \"parameters\": {\n        \"text\": \"=Analyze this markdown content and convert it to JSON following this exact schema:\\n{\\n    \\\"invoice_details\\\": {\\n        \\\"statement_date\\\": \\\"\\\",\\n        \\\"organization\\\": {\\n            \\\"name\\\": \\\"\\\",\\n            \\\"address\\\": \\\"\\\",\\n            \\\"gst_number\\\": \\\"\\\"\\n        },\\n        \\\"member\\\": {\\n            \\\"name\\\": \\\"\\\",\\n            \\\"company\\\": \\\"\\\",\\n            \\\"address\\\": \\\"\\\",\\n            \\\"contact_number\\\": \\\"\\\",\\n            \\\"organization_number\\\": \\\"\\\"\\n        }\\n    },\\n    \\\"transactions\\\": [\\n        {\\n            \\\"date\\\": \\\"\\\",\\n            \\\"document_number\\\": \\\"\\\",\\n            \\\"description\\\": \\\"\\\",\\n            \\\"base_amount\\\": 0.00,\\n            \\\"gst\\\": 0.00,\\n            \\\"bc_pst\\\": 0.00,\\n            \\\"bc_pst_liquor\\\": 0.00,  # Added for liquor PST\\n            \\\"container_deposit\\\": 0.00,  # Added for bottle deposits\\n            \\\"service_fee\\\": 0.00,\\n            \\\"tip_amount\\\": 0.00,\\n            \\\"regular_price\\\": 0.00,  # Added for regular price tracking\\n            \\\"savings_amount\\\": 0.00,  # Added for savings tracking\\n            \\\"total_charge\\\": 0.00,\\n            \\\"transaction_type\\\": \\\"\\\"\\n        }\\n    ],\\n    \\\"payment_details\\\": {\\n        \\\"previous_balance\\\": 0.00,\\n        \\\"payment_amount\\\": 0.00,\\n        \\\"payment_reference\\\": \\\"\\\",\\n        \\\"payment_date\\\": \\\"\\\",\\n        \\\"payment_method\\\": \\\"\\\",\\n        \\\"payment_status\\\": \\\"\\\",\\n        \\\"card_number\\\": \\\"\\\",  # Added for card details\\n        \\\"auth_number\\\": \\\"\\\",  # Added for authorization\\n        \\\"transaction_number\\\": \\\"\\\"\\n    },\\n    \\\"invoice_summary\\\": {\\n        \\\"subtotal\\\": 0.00,\\n        \\\"service_fees_total\\\": 0.00,\\n        \\\"tips_total\\\": 0.00,\\n        \\\"current_excl_gst\\\": 0.00,\\n        \\\"container_deposit_total\\\": 0.00,  # Added for deposits\\n        \\\"outstanding_gst\\\": 0.00,\\n        \\\"paid_gst\\\": 0.00,\\n        \\\"total_gst\\\": 0.00,\\n        \\\"total_bc_pst\\\": 0.00,\\n        \\\"total_bc_pst_liquor\\\": 0.00,  # Added for liquor PST if shown in markdown content\\n        \\\"total_savings\\\": 0.00,  # Added for savings\\n        \\\"final_amount_due\\\": 0.00\\n    },\\n    \\\"payment_terms\\\": {\\n        \\\"due_date\\\": \\\"\\\",\\n        \\\"processing_date\\\": \\\"\\\",\\n        \\\"special_notices\\\": [],\\n        \\\"cancellation_policy\\\": \\\"\\\",\\n        \\\"refund_policy\\\": \\\"\\\",\\n        \\\"return_policy\\\": \\\"\\\"  # Added for return policy\\n    },\\n    \\\"additional_info\\\": {\\n        \\\"booking_number\\\": \\\"\\\",\\n        \\\"transaction_time\\\": \\\"\\\",  # Added for transaction time\\n        \\\"register_info\\\": \\\"\\\",     # Added for register details\\n        \\\"event_details\\\": {\\n            \\\"date\\\": \\\"\\\",\\n            \\\"time\\\": \\\"\\\",\\n            \\\"location\\\": \\\"\\\"\\n        },\\n        \\\"special_instructions\\\": []\\n    },\\n    \\\"summary\\\": \\\"\\\" # The natural language summary of the invoice\\n}\\n\\nMarkdown Content:\\n{{ $json.data }}\\n\\nImportant:\\n- Extract exact values from the markdown\\n- Return only valid JSON\\n- Include all fields even if empty\\n- Format numbers as floats with 2 decimal places\\n- Track container deposits separately\\n- Show liquor PST (10%) separately from regular PST if provided in markdown content\\n- Include regular prices and savings amounts\\n- Track transaction details including card info and authorization\\n- Parse return policy information\\n- Include register and transaction time details\\n- Ensure final_amount_due equals the sum of all applicable charges and taxes\\n- Summarize the markdown contents\\n- Only output valid JSON without any preamble or further explanation.  Remove any ```json and ``` from response.\",\n        \"promptType\": \"define\"\n      },\n      \"typeVersion\": 1.5,\n      \"alwaysOutputData\": true\n    },\n    {\n      \"id\": \"3c371677-76e8-45d7-8c05-a4ca1cc0b1fe\",\n      \"name\": \"gpt-4o-mini1\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\n      \"position\": [\n        -1600,\n        240\n      ],\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"jEMSvKmtYfzAkhe6\",\n          \"name\": \"OpenAi account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"9ff3f86f-9ffc-42fa-b428-a6bfabf2426a\",\n      \"name\": \"gpt-4o-mini2\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\n      \"position\": [\n        -1080,\n        640\n      ],\n      \"parameters\": {\n        \"model\": \"gpt-4o\",\n        \"options\": {}\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"jEMSvKmtYfzAkhe6\",\n          \"name\": \"OpenAi account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"69a0505f-1fe4-4581-ad2d-5bc7d68874e9\",\n      \"name\": \"Update Google Sheet by LlamaParse ID\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"position\": [\n        -540,\n        600\n      ],\n      \"parameters\": {\n        \"columns\": {\n          \"value\": {\n            \"jobid\": \"={{ $('Webhook').item.json.body.jobId }}\",\n            \"summary\": \"={{ $json.output.summary }}\",\n            \"org_name\": \"={{ $json.output.invoice_details.organization.name }}\",\n            \"paid_gst\": \"={{ $json.output.invoice_summary.paid_gst }}\",\n            \"subtotal\": \"={{ $json.output.invoice_summary.subtotal }}\",\n            \"total_gst\": \"={{ $json.output.invoice_summary.total_gst }}\",\n            \"tips_total\": \"={{ $json.output.invoice_summary.tips_total }}\",\n            \"member_name\": \"={{ $json.output.invoice_details.member.name }}\",\n            \"total_bc_pst\": \"={{ $json.output.invoice_summary.total_bc_pst }}\",\n            \"total_savings\": \"={{ $json.output.invoice_summary.total_savings }}\",\n            \"payment_amount\": \"={{ $json.output.payment_details.payment_amount }}\",\n            \"statement_date\": \"={{ $json.output.invoice_details.statement_date }}\",\n            \"outstanding_gst\": \"={{ $json.output.invoice_summary.outstanding_gst }}\",\n            \"current_excl_gst\": \"={{ $json.output.invoice_summary.current_excl_gst }}\",\n            \"final_amount_due\": \"={{ $json.output.invoice_summary.final_amount_due }}\",\n            \"payment_reference\": \"={{ $json.output.payment_details.payment_reference }}\",\n            \"service_fees_total\": \"={{ $json.output.invoice_summary.service_fees_total }}\",\n            \"transaction_number\": \"={{ $json.output.payment_details.transaction_number }}\",\n            \"total_bc_pst_liquor\": \"={{ $json.output.invoice_summary.total_bc_pst_liquor }}\",\n            \"container_deposit_total\": \"={{ $json.output.invoice_summary.container_deposit_total }}\"\n          },\n          \"schema\": [\n            {\n              \"id\": \"jobid\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"jobid\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"statement_date\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"statement_date\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"org_name\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"org_name\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"member_name\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"member_name\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"subtotal\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"subtotal\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"service_fees_total\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"service_fees_total\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"tips_total\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"tips_total\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"current_excl_gst\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"current_excl_gst\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"container_deposit_total\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"container_deposit_total\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"outstanding_gst\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"outstanding_gst\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"paid_gst\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"paid_gst\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"total_gst\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"total_gst\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"total_bc_pst\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"total_bc_pst\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"total_bc_pst_liquor\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"total_bc_pst_liquor\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"total_savings\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"total_savings\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"final_amount_due\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"final_amount_due\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"payment_reference\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"payment_reference\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"payment_amount\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"payment_amount\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"transaction_number\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"transaction_number\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"summary\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"summary\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            }\n          ],\n          \"mappingMode\": \"defineBelow\",\n          \"matchingColumns\": [\n            \"jobid\"\n          ]\n        },\n        \"options\": {},\n        \"operation\": \"update\",\n        \"sheetName\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gid=0\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1mUvDI9sGvRl64iNV6ODXUzro5Q3Oeuaks5662tfN7Oo/edit#gid=0\",\n          \"cachedResultName\": \"Expenses\"\n        },\n        \"documentId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"1mUvDI9sGvRl64iNV6ODXUzro5Q3Oeuaks5662tfN7Oo\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1mUvDI9sGvRl64iNV6ODXUzro5Q3Oeuaks5662tfN7Oo/edit?usp=drivesdk\",\n          \"cachedResultName\": \"2024.Year.End.Expenses\"\n        }\n      },\n      \"credentials\": {\n        \"googleSheetsOAuth2Api\": {\n          \"id\": \"SOLbth24hZWisXAv\",\n          \"name\": \"Google Sheets account\"\n        }\n      },\n      \"typeVersion\": 4.5\n    },\n    {\n      \"id\": \"19907cba-4530-4f25-8a6f-435b1f8d23ad\",\n      \"name\": \"Invoice Details\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        -780,\n        400\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"e145ed8c-cdea-4e5a-ba11-d8ce595dfb8d\",\n              \"name\": \"output\",\n              \"type\": \"object\",\n              \"value\": \"={{ $json.text }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"af95c024-8e36-499b-af32-4c661da49a61\",\n      \"name\": \"Prepare Message\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        -540,\n        400\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"3e566101-2ad9-444b-8459-451ba6a91575\",\n              \"name\": \"invoice_details.statement_date\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.output.invoice_details.statement_date }}\"\n            },\n            {\n              \"id\": \"57a466f6-d354-4864-98d3-ba4673afde98\",\n              \"name\": \"invoice_details.organization\",\n              \"type\": \"object\",\n              \"value\": \"={{ $json.output.invoice_details.organization }}\"\n            },\n            {\n              \"id\": \"e1b22978-8114-4956-a5fc-3efbc43335a3\",\n              \"name\": \"invoice_details.member\",\n              \"type\": \"object\",\n              \"value\": \"={{ $json.output.invoice_details.member }}\"\n            },\n            {\n              \"id\": \"e45a744c-0874-48b7-b59a-9d83aad27ff3\",\n              \"name\": \"payment_details\",\n              \"type\": \"object\",\n              \"value\": \"={{ $json.output.payment_details }}\"\n            },\n            {\n              \"id\": \"c0335dc7-1b5c-41fc-b60a-bf45248c9f7f\",\n              \"name\": \"invoice_summary\",\n              \"type\": \"object\",\n              \"value\": \"={{ $json.output.invoice_summary }}\"\n            },\n            {\n              \"id\": \"6c9ba3bf-37a6-4a8f-b97d-991f3ce6950f\",\n              \"name\": \"summary\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.output.summary }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"333f42a7-2665-4613-89c9-c184d764af37\",\n      \"name\": \"Send Invoice Details as Telegram Message\",\n      \"type\": \"n8n-nodes-base.telegram\",\n      \"position\": [\n        -340,\n        400\n      ],\n      \"webhookId\": \"04464e72-2be3-4df9-8a08-18d23cb75d72\",\n      \"parameters\": {\n        \"text\": \"={{ $json.summary }}\\n--------\\n{{ $json.invoice_summary.toJsonString() }}\",\n        \"chatId\": \"={{ $env.TELEGRAM_CHAT_ID }}\",\n        \"additionalFields\": {\n          \"parse_mode\": \"HTML\",\n          \"appendAttribution\": false\n        }\n      },\n      \"credentials\": {\n        \"telegramApi\": {\n          \"id\": \"pAIFhguJlkO3c7aQ\",\n          \"name\": \"Telegram account\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"faa0768f-1d4c-42c4-902c-b2d0d40f0eb4\",\n      \"name\": \"gpt-4o-mini3\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\n      \"position\": [\n        -1080,\n        60\n      ],\n      \"parameters\": {\n        \"model\": \"gpt-4o\",\n        \"options\": {}\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"jEMSvKmtYfzAkhe6\",\n          \"name\": \"OpenAi account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"d1a54284-60d1-4fac-b81b-4ed1610ddf2e\",\n      \"name\": \"Send Error Message 2\",\n      \"type\": \"n8n-nodes-base.telegram\",\n      \"position\": [\n        -780,\n        600\n      ],\n      \"webhookId\": \"3ba1ee6d-1648-4421-823b-e68ae14d769b\",\n      \"parameters\": {\n        \"text\": \"=Error in workflow\",\n        \"chatId\": \"={{ $env.TELEGRAM_CHAT_ID }}\",\n        \"additionalFields\": {\n          \"parse_mode\": \"HTML\",\n          \"appendAttribution\": false\n        }\n      },\n      \"credentials\": {\n        \"telegramApi\": {\n          \"id\": \"pAIFhguJlkO3c7aQ\",\n          \"name\": \"Telegram account\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"b1b50042-8270-4e13-b7b1-6d017e9be8d9\",\n      \"name\": \"Send Error Message 1\",\n      \"type\": \"n8n-nodes-base.telegram\",\n      \"position\": [\n        -780,\n        60\n      ],\n      \"webhookId\": \"3ba1ee6d-1648-4421-823b-e68ae14d769b\",\n      \"parameters\": {\n        \"text\": \"=Error in workflow\",\n        \"chatId\": \"={{ $env.TELEGRAM_CHAT_ID }}\",\n        \"additionalFields\": {\n          \"parse_mode\": \"HTML\",\n          \"appendAttribution\": false\n        }\n      },\n      \"credentials\": {\n        \"telegramApi\": {\n          \"id\": \"pAIFhguJlkO3c7aQ\",\n          \"name\": \"Telegram account\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"a365c8a1-c0fb-43f7-84fa-b68a0e9c087e\",\n      \"name\": \"Send Document Summary as Telegram Message\",\n      \"type\": \"n8n-nodes-base.telegram\",\n      \"position\": [\n        -540,\n        -200\n      ],\n      \"webhookId\": \"04464e72-2be3-4df9-8a08-18d23cb75d72\",\n      \"parameters\": {\n        \"text\": \"={{ $json.text }}\",\n        \"chatId\": \"={{ $env.TELEGRAM_CHAT_ID }}\",\n        \"additionalFields\": {\n          \"parse_mode\": \"HTML\",\n          \"appendAttribution\": false\n        }\n      },\n      \"credentials\": {\n        \"telegramApi\": {\n          \"id\": \"pAIFhguJlkO3c7aQ\",\n          \"name\": \"Telegram account\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"6abd00a0-2971-49f9-812f-f65a0004136b\",\n      \"name\": \"Summarize Document\",\n      \"type\": \"@n8n/n8n-nodes-langchain.chainLlm\",\n      \"onError\": \"continueErrorOutput\",\n      \"position\": [\n        -1180,\n        -80\n      ],\n      \"parameters\": {\n        \"text\": \"=Please analyze this document and provide:\\n\\n## Document Analysis\\n- A concise executive summary (2-3 sentences)\\n- Key themes and main points\\n- Notable findings or insights\\n- Data highlights and important statistics (if applicable)\\n\\n## Recommendations\\n- Action items or next steps\\n- Areas requiring further investigation\\n- Potential implications\\n\\n## Format Requirements\\n- Structure the analysis using clear headers and sections\\n- Include relevant quotes to support key points\\n- Present any numerical data in tables or bullet points\\n- Highlight critical information using bold text\\n\\nPlease maintain the original document's context while making the content more accessible and actionable.\\n\\nHere is the document: {{ $json.data }}\\n\",\n        \"promptType\": \"define\"\n      },\n      \"typeVersion\": 1.5,\n      \"alwaysOutputData\": true\n    },\n    {\n      \"id\": \"e672bcf3-0d5f-4410-ac5b-660c3ba0c456\",\n      \"name\": \"Classify Parsed Document\",\n      \"type\": \"@n8n/n8n-nodes-langchain.textClassifier\",\n      \"position\": [\n        -1680,\n        80\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"inputText\": \"={{ $json.data }}\",\n        \"categories\": {\n          \"categories\": [\n            {\n              \"category\": \"not invoice\",\n              \"description\": \"The document is not an invoice\"\n            },\n            {\n              \"category\": \"invoice\",\n              \"description\": \"The document is an invoice\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"cc522966-3e6a-4830-bde9-d4e251752ec0\",\n      \"name\": \"Get Parsed Markdown\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        -1980,\n        80\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"55b5a755-eeaf-4ce7-b600-e6c864dc7e10\",\n              \"name\": \"data\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.body.md }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"683fa521-dfd0-4b1c-905f-d5a4f56ab65a\",\n      \"name\": \"Prepare Data\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        -640,\n        -1020\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"cee9e2d3-b311-4903-9867-e7d3d7ed2456\",\n              \"name\": \"google_drive_fileid\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.id }}\"\n            },\n            {\n              \"id\": \"5c6eddf6-5a5e-4c51-87ed-8e3aabc2f65d\",\n              \"name\": \"webViewLink\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.webViewLink }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"b64a21ab-0e1f-4d6c-b718-a9aaaa27ae19\",\n      \"name\": \"HTTP Request\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        -2040,\n        -860\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.cloud.llamaindex.ai/api/parsing/supported_file_extensions\",\n        \"options\": {}\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"cd0699cf-3a95-4dc8-806a-6a01339c598d\",\n      \"name\": \"Is there an Email Attachement\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        -1420,\n        -1260\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"460b82e5-30f5-4cb3-a937-a275fd256fcc\",\n              \"operator\": {\n                \"type\": \"object\",\n                \"operation\": \"exists\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $input.item.binary }}\",\n              \"rightValue\": \"\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"269ba37f-fa18-4333-be3c-eee6ef5c0f56\",\n      \"name\": \"Aggregate\",\n      \"type\": \"n8n-nodes-base.aggregate\",\n      \"position\": [\n        -1840,\n        -860\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"aggregate\": \"aggregateAllItemData\",\n        \"destinationFieldName\": \"extensions\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"dffd2e83-58ff-49a0-b547-3b6f4b92dfa9\",\n      \"name\": \"Edit Fields\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        -1620,\n        -860\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"c9c59aae-b507-4493-a047-495bed344a5e\",\n              \"name\": \"extension\",\n              \"type\": \"string\",\n              \"value\": \"=.{{ $('Is there an Email Attachement').item.binary.file0.fileExtension }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"02a121a4-edea-45c4-b325-2f61b3d0b02e\",\n      \"name\": \"Merge Email Processing\",\n      \"type\": \"n8n-nodes-base.merge\",\n      \"position\": [\n        -380,\n        -1020\n      ],\n      \"parameters\": {\n        \"mode\": \"combine\",\n        \"options\": {},\n        \"combineBy\": \"combineByPosition\",\n        \"numberInputs\": 3\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"c1310be3-6448-48d1-a954-caa3d4651075\",\n      \"name\": \"Merge\",\n      \"type\": \"n8n-nodes-base.merge\",\n      \"position\": [\n        -1120,\n        -1020\n      ],\n      \"parameters\": {\n        \"mode\": \"combine\",\n        \"options\": {},\n        \"combineBy\": \"combineAll\"\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"dbe3a235-0bae-4743-b53e-154b75911482\",\n      \"name\": \"If Supported File Extensions\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        -1420,\n        -860\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"f76cc5a7-6882-4e1f-86d5-99d5d9e90a34\",\n              \"operator\": {\n                \"type\": \"boolean\",\n                \"operation\": \"true\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $('Aggregate').item.json.extensions.includes($json.extension)}}\",\n              \"rightValue\": \"\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"1413f84b-d1a9-4b0c-ae43-7f303a54527e\",\n      \"name\": \"No Operation, do nothing\",\n      \"type\": \"n8n-nodes-base.noOp\",\n      \"position\": [\n        -1120,\n        -1260\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"9f3ae287-cb8b-466c-8dbe-678be30c2c04\",\n      \"name\": \"No Operation, do nothing1\",\n      \"type\": \"n8n-nodes-base.noOp\",\n      \"position\": [\n        -1120,\n        -780\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"6f9b5ae2-22e8-4dc8-ba0b-06fbc585f209\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -2140,\n        -980\n      ],\n      \"parameters\": {\n        \"width\": 920,\n        \"height\": 320,\n        \"content\": \"## 检查支持的文件扩展名\\nhttps://docs.cloud.llamaindex.ai/API/获取支持的文件扩展名-api-v-1-解析-支持的文件扩展名-获取\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"28c5c09a-9a15-4af9-8253-59ae36dfe390\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -2140,\n        -1420\n      ],\n      \"parameters\": {\n        \"color\": 3,\n        \"width\": 920,\n        \"height\": 400,\n        \"content\": \"## 获取带附件的邮件\\n### ☀️免责声明\\n本工作流仅处理邮件中的第一个附件。\\n请根据实际使用场景调整搜索范围和限制设置。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"3174a934-3b64-47b2-b81b-bfe717a034e2\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -920,\n        -1120\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 460,\n        \"height\": 300,\n        \"content\": \"## 保存文档至Google云端硬盘\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"92f079d1-c5bd-45fe-9372-7ff521eda15b\",\n      \"name\": \"Sticky Note4\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -920,\n        -780\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 460,\n        \"height\": 380,\n        \"content\": \"## 邮件内容摘要\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"fd7d7e7a-005a-4a43-a3de-e9bb036bb615\",\n      \"name\": \"Sticky Note5\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -220,\n        -1120\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 300,\n        \"height\": 300,\n        \"content\": \"保存到Google表格\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"c6469054-0345-4371-8928-21a04c21b131\",\n      \"name\": \"Sticky Note9\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -3060,\n        -1540\n      ],\n      \"parameters\": {\n        \"width\": 540,\n        \"height\": 1340,\n        \"content\": \"# 描述\\n\\n该工作流利用LlamaParse实现文档处理自动化，支持从多种文件格式中提取并分析文本内容。它能智能处理文档、提取结构化数据，并通过多渠道交付可操作的洞察结果。\\n\\n## 工作原理\\n\\n### 文档接收与处理 📄\\n- 监控Gmail收取的附件或通过webhook接收文档\\n- 校验文件格式是否符合LlamaParse支持的扩展名\\n- 将文档上传至LlamaParse进行高级文本提取\\n- 原始文档存储于Google Drive备查\\n\\n### 智能文档分析 🧠\\n- 自动分类文档类型（发票/报告等）\\n- 使用定制化AI提示提取结构化数据\\n- 生成包含关键信息的完整文档摘要\\n- 将非结构化文本转换为有序JSON数据\\n\\n### 发票处理自动化 💼\\n- 提取核心发票要素（日期/金额/明细项）\\n- 将财务数据整理为结构化格式\\n- 计算税款明细、小计及付款信息\\n- 保存详细记录用于会计稽核\\n\\n### 多渠道交付 📱\\n- 将提取数据存入Google表格供追踪分析\\n- 通过Telegram发送精简摘要供即时查阅\\n- 在Google Drive创建可搜索文档档案库\\n- 用结构化财务信息更新电子表格\\n\\n## 配置步骤\\n\\n### 设置API凭证 🔑\\n- 配置LlamaParse API连接\\n- 设置Gmail OAuth实现邮件监控\\n- 集成Google Drive和Sheets服务\\n- 添加Telegram机器人通知凭证\\n\\n### 定制AI处理 ⚙️\\n- 调整文档分类参数\\n- 修改特定文档类型的提取模板\\n- 优化摘要生成提示词\\n- 自定义发票数据提取架构\\n\\n### 测试与部署 🚀\\n- 使用多格式样本文档测试\\n- 验证数据提取准确性\\n- 确认通知送达情况\\n- 监控处理管道性能\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"b2024905-5c3b-49d5-89b9-ef41c4a4283c\",\n      \"name\": \"Sticky Note8\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -2440,\n        -1340\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 260,\n        \"height\": 280,\n        \"content\": \"## 👍试试我！\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"22284854-4005-4678-94f8-d914e031e6fc\",\n      \"name\": \"Sticky Note6\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -2480,\n        -1540\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 2600,\n        \"height\": 1180,\n        \"content\": \"# ✨🔪 基于Llama Parse的高级AI文档解析与文本提取\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"4f0c910e-7ae6-40ac-a659-c14a6704aaba\",\n      \"name\": \"Sticky Note7\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -1280,\n        280\n      ],\n      \"parameters\": {\n        \"color\": 6,\n        \"width\": 1160,\n        \"height\": 540,\n        \"content\": \"## 示例发票处理\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"e63bbfe8-8be7-4e3f-a8f5-a85b2ee82959\",\n      \"name\": \"Sticky Note10\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -1220,\n        360\n      ],\n      \"parameters\": {\n        \"width\": 360,\n        \"height\": 420,\n        \"content\": \"## 提取发票为JSON格式\\n☀️根据您的具体使用场景更新用户及系统提示\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"d321e139-0828-4932-b5a9-ef11f6ae9baa\",\n      \"name\": \"Sticky Note11\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -1280,\n        -280\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 980,\n        \"height\": 520,\n        \"content\": \"## 示例文档摘要\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"ab9081bd-c1c5-4db1-8dcd-ff243a7ab9be\",\n      \"name\": \"Sticky Note12\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -1220,\n        -200\n      ],\n      \"parameters\": {\n        \"width\": 360,\n        \"height\": 400,\n        \"content\": \"## 文档摘要\\n☀️根据您的具体使用场景更新用户与系统提示\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"c08bbfa8-abe1-47e2-babe-b62581bcd011\",\n      \"name\": \"Sticky Note13\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -1760,\n        -40\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 440,\n        \"height\": 420,\n        \"content\": \"## 分类解析文档\\n根据需要添加更多分类\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"5ffb907f-9701-401e-85e8-3b91a706ab10\",\n      \"name\": \"Sticky Note14\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -2060,\n        -40\n      ],\n      \"parameters\": {\n        \"color\": 3,\n        \"width\": 260,\n        \"height\": 320,\n        \"content\": \"## 从LlamaParse解析的Markdown\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"a53034d2-34df-421a-aa14-d9d1bbc00fc5\",\n      \"name\": \"Sticky Note15\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -2440,\n        -40\n      ],\n      \"parameters\": {\n        \"width\": 340,\n        \"height\": 320,\n        \"content\": \"## 从LlamaParse接收解析后的文档\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"933f03f2-c231-4dcd-8aeb-ce716b8cc00e\",\n      \"name\": \"Sticky Note16\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -2480,\n        -320\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 2400,\n        \"height\": 1180,\n        \"content\": \"# 🪝接收LlamaParse响应的Webhook\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"505a51e4-dea1-4876-964e-f59af728c65b\",\n      \"name\": \"Sticky Note17\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -1760,\n        420\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 440,\n        \"height\": 400,\n        \"content\": \"## 将解析后的文档保存到Google Drive\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"33ca5eaf-30da-4360-a12b-a7dd8614743f\",\n      \"name\": \"Save Summarized Document to Google Drive\",\n      \"type\": \"n8n-nodes-base.googleDrive\",\n      \"position\": [\n        -540,\n        0\n      ],\n      \"parameters\": {\n        \"name\": \"={{ $('Webhook').item.json.body.jobId }}-summary.md\",\n        \"content\": \"={{ $json.text }}\",\n        \"driveId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"My Drive\"\n        },\n        \"options\": {},\n        \"folderId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"root\",\n          \"cachedResultUrl\": \"https://drive.google.com/drive\",\n          \"cachedResultName\": \"/ (Root folder)\"\n        },\n        \"operation\": \"createFromText\"\n      },\n      \"credentials\": {\n        \"googleDriveOAuth2Api\": {\n          \"id\": \"UhdXGYLTAJbsa0xX\",\n          \"name\": \"Google Drive account\"\n        }\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"a1e8264f-fa99-49a5-a837-6aaf3a2dc39a\",\n      \"name\": \"Save Parsed Document to Google Drive\",\n      \"type\": \"n8n-nodes-base.googleDrive\",\n      \"position\": [\n        -1600,\n        560\n      ],\n      \"parameters\": {\n        \"name\": \"={{ $('Webhook').item.json.body.jobId }}-parsed.md\",\n        \"content\": \"={{ $json.data }}\",\n        \"driveId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"My Drive\"\n        },\n        \"options\": {},\n        \"folderId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"root\",\n          \"cachedResultUrl\": \"https://drive.google.com/drive\",\n          \"cachedResultName\": \"/ (Root folder)\"\n        },\n        \"operation\": \"createFromText\"\n      },\n      \"credentials\": {\n        \"googleDriveOAuth2Api\": {\n          \"id\": \"UhdXGYLTAJbsa0xX\",\n          \"name\": \"Google Drive account\"\n        }\n      },\n      \"typeVersion\": 3\n    }\n  ],\n  \"active\": true,\n  \"pinData\": {},\n  \"settings\": {\n    \"timezone\": \"America/Vancouver\",\n    \"callerPolicy\": \"workflowsFromSameOwner\",\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"c11e3a8a-499b-4b1e-b919-ffbed36ba898\",\n  \"connections\": {\n    \"Gmail\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Limit\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Limit\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get Message\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Merge\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Parse Document with LlamaParse\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Save Document to Google Drive\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Summarize Email\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Webhook\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get Parsed Markdown\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Aggregate\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Edit Fields\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Edit Fields\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"If Supported File Extensions\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get Message\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Is there an Email Attachement\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"gpt-4o-mini\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"Summarize Email\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"HTTP Request\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Aggregate\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Prepare Data\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge Email Processing\",\n            \"type\": \"main\",\n            \"index\": 1\n          }\n        ]\n      ]\n    },\n    \"gpt-4o-mini1\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"Classify Parsed Document\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"gpt-4o-mini2\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"Extract Invoice Details as JSON\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"gpt-4o-mini3\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"Summarize Document\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Gmail Trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Gmail\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Invoice Details\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Prepare Message\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Update Google Sheet by LlamaParse ID\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Prepare Message\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Send Invoice Details as Telegram Message\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Summarize Email\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge Email Processing\",\n            \"type\": \"main\",\n            \"index\": 2\n          }\n        ]\n      ]\n    },\n    \"Summarize Document\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Send Document Summary as Telegram Message\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Save Summarized Document to Google Drive\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Send Error Message 1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get Parsed Markdown\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Classify Parsed Document\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Save Parsed Document to Google Drive\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Merge Email Processing\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Save LlamaParse ID and Summary to Google Sheets\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Classify Parsed Document\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Summarize Document\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Extract Invoice Details as JSON\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"If Supported File Extensions\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge\",\n            \"type\": \"main\",\n            \"index\": 1\n          }\n        ],\n        [\n          {\n            \"node\": \"No Operation, do nothing1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Is there an Email Attachement\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"HTTP Request\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Merge\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"No Operation, do nothing\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Save Document to Google Drive\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Prepare Data\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Parse Document with LlamaParse\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge Email Processing\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Extract Invoice Details as JSON\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Invoice Details\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Send Error Message 2\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Save LlamaParse ID and Summary to Google Sheets\": {\n      \"main\": [\n        []\n      ]\n    }\n  }\n}"
}