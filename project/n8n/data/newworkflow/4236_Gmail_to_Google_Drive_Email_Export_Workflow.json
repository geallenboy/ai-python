{
  "url": "https://n8n.io/workflows/4236-gmail-to-google-drive-email-export-workflow/",
  "title": "Gmail to Google Drive Email Export Workflow",
  "author": "Akhil Varma Gadiraju",
  "publish_date": "Last update 6 days ago",
  "publish_date_absolute": "2025-05-20",
  "categories": [
    {
      "name": "IT Ops"
    }
  ],
  "workflow_json": "{\"meta\":{\"instanceId\":\"7d8066d2f56a07000fe7d753d3eeabf0ecdf68413466f30d10afe0906f058427\",\"templateCredsSetupCompleted\":true},\"nodes\":[{\"id\":\"00de0985-997a-4c97-9a4a-d28fae9a9641\",\"name\":\"Gmail\",\"type\":\"n8n-nodes-base.gmail\",\"position\":[380,0],\"webhookId\":\"75613b2e-370c-4ecf-bc04-8170d2f594d4\",\"parameters\":{\"simple\":false,\"filters\":{\"sender\":\"akhilgadiraju@gmail.com\"},\"options\":{},\"operation\":\"getAll\",\"returnAll\":true},\"credentials\":{\"gmailOAuth2\":{\"id\":\"wqFUFuFpF5eRAp4E\",\"name\":\"Gmail OAuth2 - Akhil\"}},\"typeVersion\":2.1},{\"id\":\"7b167ae9-5a1d-4bd3-b18e-c1cd8da06559\",\"name\":\"Google Drive\",\"type\":\"n8n-nodes-base.googleDrive\",\"position\":[1260,0],\"parameters\":{\"name\":\"={{ $now + \\\"_n8n_export.csv\\\" }}\",\"driveId\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"My Drive\"},\"options\":{},\"folderId\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"root\",\"cachedResultName\":\"/ (Root folder)\"}},\"credentials\":{\"googleDriveOAuth2Api\":{\"id\":\"LxzMJWxwgbnYKUly\",\"name\":\"Google Drive - Akhil\"}},\"typeVersion\":3},{\"id\":\"522a4ece-e0dc-4639-81d3-2f4a1b9f459e\",\"name\":\"Convert to File\",\"type\":\"n8n-nodes-base.convertToFile\",\"position\":[1040,0],\"parameters\":{\"options\":{}},\"typeVersion\":1.1},{\"id\":\"f2e29c64-91c7-48b4-8416-eaf98b014596\",\"name\":\"Parse Data\",\"type\":\"n8n-nodes-base.set\",\"position\":[600,0],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"2b446be8-1d0c-4a61-8896-f0a90f5100ea\",\"name\":\"id\",\"type\":\"string\",\"value\":\"={{ $json.id }}\"},{\"id\":\"8263ed23-ae85-4bdc-8c24-fe5fc3f12601\",\"name\":\"subject\",\"type\":\"string\",\"value\":\"={{ $json.subject }}\"},{\"id\":\"09ceff74-3064-4103-aa06-f56693d02765\",\"name\":\"message\",\"type\":\"string\",\"value\":\"={{ $json.text }}\"},{\"id\":\"6df559f5-d6b4-4fa4-8f7e-7e63a3c27994\",\"name\":\"time\",\"type\":\"string\",\"value\":\"={{ $json.date }}\"}]}},\"typeVersion\":3.4},{\"id\":\"399c6f2c-b59a-4e44-aba7-b0a65eb61423\",\"name\":\"Start Workflow\",\"type\":\"n8n-nodes-base.manualTrigger\",\"position\":[160,0],\"parameters\":{},\"typeVersion\":1},{\"id\":\"4d245499-f824-4887-85f0-5cd199c2e648\",\"name\":\"End Workflow\",\"type\":\"n8n-nodes-base.noOp\",\"position\":[1480,0],\"parameters\":{},\"typeVersion\":1},{\"id\":\"d76bc543-75d6-4c9c-ac84-4b05be377e06\",\"name\":\"Convert Time Field\",\"type\":\"n8n-nodes-base.code\",\"position\":[820,0],\"parameters\":{\"jsCode\":\"return $input.all().map(item => {\\n  const isoTime = item.json.time;\\n\\n  const date = new Date(isoTime).toLocaleString('en-US', {\\n    timeZone: 'Asia/Kolkata',  // 🔁 Change this to your UAT timezone\\n    year: 'numeric',\\n    month: 'long',\\n    day: 'numeric',\\n    hour: 'numeric',\\n    minute: '2-digit',\\n    hour12: true\\n  });\\n\\n  return {\\n    json: {\\n      ...item.json,\\n      time: date\\n    }\\n  };\\n});\\n\"},\"typeVersion\":2},{\"id\":\"93d5dfcf-c902-4471-9a04-6e7473417bd0\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[300,-120],\"parameters\":{\"width\":280,\"height\":100,\"content\":\"### Change Sender Email\\nUpdate the `sender` field in the Gmail node.\"},\"typeVersion\":1},{\"id\":\"97f660ed-281b-4ba9-9656-777b9aea2ef0\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[520,160],\"parameters\":{\"width\":280,\"height\":100,\"content\":\"### Add More Email Fields\\t\\nModify the Set node to include more fields.\"},\"typeVersion\":1},{\"id\":\"825055a9-8e4f-4e39-ae2f-729c103568d6\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[740,-100],\"parameters\":{\"height\":80,\"content\":\"### Change Time Zone\\nEdit timeZone in the Code node.\"},\"typeVersion\":1},{\"id\":\"3f78a5a8-5cd4-40a0-be5f-d984e952d975\",\"name\":\"Sticky Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[920,160],\"parameters\":{\"width\":300,\"height\":100,\"content\":\"### Change File Format\\nUse a different format in the Convert to File node.\"},\"typeVersion\":1},{\"id\":\"ffbf9a23-dc2c-4ebe-986e-2aff8a170b51\",\"name\":\"Sticky Note4\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1160,-220],\"parameters\":{\"width\":280,\"height\":200,\"content\":\"### Rename Output File \\nAdjust the name in the Google Drive nod\\n\\n### Change Upload Folder\\nSet a different folderId in the Google Drive node.\"},\"typeVersion\":1},{\"id\":\"93836b97-81d9-47d4-b8dc-3d856e78090a\",\"name\":\"Sticky Note5\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[100,-580],\"parameters\":{\"width\":580,\"height\":200,\"content\":\"## 🚀 Use Cases\\n\\n- **Personal Email Archiving**: Back up or export emails from a specific sender (e.g., invoices, reports).\\n- **Audit Logs**: Save conversations for compliance.\\n- **Team Reports**: Aggregate project emails into a central file store. \"},\"typeVersion\":1}],\"pinData\":{},\"connections\":{\"Gmail\":{\"main\":[[{\"node\":\"Parse Data\",\"type\":\"main\",\"index\":0}]]},\"Parse Data\":{\"main\":[[{\"node\":\"Convert Time Field\",\"type\":\"main\",\"index\":0}]]},\"Google Drive\":{\"main\":[[{\"node\":\"End Workflow\",\"type\":\"main\",\"index\":0}]]},\"Start Workflow\":{\"main\":[[{\"node\":\"Gmail\",\"type\":\"main\",\"index\":0}]]},\"Convert to File\":{\"main\":[[{\"node\":\"Google Drive\",\"type\":\"main\",\"index\":0}]]},\"Convert Time Field\":{\"main\":[[{\"node\":\"Convert to File\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "# 📬 Gmail to Google Drive Email Export Workflow (n8n)\n\n## 🧩 Overview\n\nThis n8n workflow automates the process of:\n\n  1. Retrieving all emails from a specific sender using Gmail.\n  2. Extracting essential fields like subject, message, and date.\n  3. Formatting the email date to the desired time zone (e.g., IST).\n  4. Exporting the parsed data as a CSV file.\n  5. Uploading the file to a specified folder in Google Drive.\n\n\n\n* * *\n\n## 🛠 Nodes Breakdown\n\n### 1\\. **Start Workflow** (`Manual Trigger`)\n\n  * **Type** : Manual Trigger\n  * **Purpose** : Initiates the workflow manually.\n\n\n\n* * *\n\n### 2\\. **Gmail Node** (`Get All Emails`)\n\n  * **Type** : Gmail\n  * **Operation** : `getAll`\n  * **Filters** : \n    * `sender`: `akhilgadiraju@gmail.com`\n  * **Returns** : All emails from the specified sender.\n  * **Credentials** : `Gmail OAuth2 - Akhil`\n\n\n\n* * *\n\n### 3\\. **Parse Data** (`Set Node`)\n\n  * **Purpose** : Extracts key fields from the email JSON.\n  * **Mapped Fields** : \n    * `id`: Email ID\n    * `subject`: Email subject\n    * `message`: Email text\n    * `time`: Email date\n\n\n\n* * *\n\n### 4\\. **Convert Time Field** (`Code Node`)\n\n  * **Purpose** : Converts the email time (`ISO 8601`) to a human-readable format.\n  * **Output Format** : \n    * Local time using **Asia/Kolkata** timezone.\n    * Format: `\"Month Day, Year, Hour:Minute AM/PM\"`\n  * **Customizable** : Change the timezone as needed:\n\n\n    \n    \n    timeZone: 'Asia/Kolkata'\n    \n\n* * *\n\n### 5\\. **Convert to File**\n\n  * **Type** : Convert to File Node\n  * **Purpose** : Converts JSON data to a downloadable `.csv` file.\n  * **Output File** : CSV containing `id`, `subject`, `message`, and `time`.\n\n\n\n* * *\n\n### 6\\. **Google Drive**\n\n  * **Type** : Google Drive\n  * **Purpose** : Uploads the generated CSV file to Google Drive.\n  * **Drive** : My Drive\n  * **Folder** : Root\n  * **File Name** : Current timestamp + `_n8n_export.csv`\n\n\n\n* * *\n\n### 7\\. **End Workflow** (`NoOp`)\n\n  * **Purpose** : Final node to explicitly end the workflow.\n\n\n\n* * *\n\n## ✅ Use Cases\n\n  * **Personal Email Archiving** : Back up or export emails from a specific sender (e.g., invoices, reports).\n  * **Audit Logs** : Save conversations for compliance.\n  * **Team Reports** : Aggregate project emails into a central file store.\n\n\n\n* * *\n\n## 🔧 Customization Guide\n\nCustomization | How to Do It  \n---|---  \nChange Sender Email | Update the `sender` field in the Gmail node.  \nFilter by Date/Subject | Add filters in the Gmail node settings.  \nChange Time Zone | Edit `timeZone` in the Code node.  \nAdd More Email Fields | Modify the `Set` node to include more fields.  \nChange File Format | Use a different format in the Convert to File node.  \nRename Output File | Adjust the `name` in the Google Drive node.  \nChange Upload Folder | Set a different `folderId` in the Google Drive node.  \n  \n* * *\n\n## 🚀 Deployment Tips\n\n  * **Schedule the Workflow** : Replace `Manual Trigger` with a `Cron` node.\n  * **Avoid Duplicates** : Store email IDs and skip duplicates using conditional logic.\n  * **Security** : Use environment variables for sensitive credentials.\n\n\n\n* * *\n\n## 🧪 Testing Steps\n\n  1. Manually trigger the workflow.\n  2. Verify email data is parsed and formatted.\n  3. Confirm CSV is generated correctly.\n  4. Ensure the file is uploaded to Google Drive.\n\n\n\n* * *\n\n## 🧰 Requirements\n\n  * Connected Gmail and Google Drive OAuth2 credentials.\n  * n8n instance (self-hosted or cloud).\n  * Required nodes available in the n8n environment.\n\n\n\n* * *\n\n> 💡 Need more features? You can add:\n> \n>   * Error handling\n>   * Slack/Email notifications\n>   * Conditional filters\n>   * Google Sheets integration instead of Drive\n> \n\n",
  "crawled_at": "2025-05-26T07:23:28.972282",
  "readme_zh": "# 📬 Gmail 邮件导出至 Google Drive 自动化流程 (n8n)\n\n## 🧩 流程概览\n\n该n8n工作流自动化实现以下功能：\n\n  1. 通过Gmail获取特定发件人的所有邮件\n  2. 提取主题、正文、日期等关键字段\n  3. 将邮件日期转换为目标时区格式（如IST）\n  4. 将解析数据导出为CSV文件\n  5. 上传文件至Google Drive指定文件夹",
  "title_zh": "Gmail 到 Google Drive 邮件导出工作流程",
  "publish_date_zh": "最后更新于6天前",
  "workflow_json_zh": "{\n  \"meta\": {\n    \"instanceId\": \"7d8066d2f56a07000fe7d753d3eeabf0ecdf68413466f30d10afe0906f058427\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"nodes\": [\n    {\n      \"id\": \"00de0985-997a-4c97-9a4a-d28fae9a9641\",\n      \"name\": \"Gmail\",\n      \"type\": \"n8n-nodes-base.gmail\",\n      \"position\": [\n        380,\n        0\n      ],\n      \"webhookId\": \"75613b2e-370c-4ecf-bc04-8170d2f594d4\",\n      \"parameters\": {\n        \"simple\": false,\n        \"filters\": {\n          \"sender\": \"akhilgadiraju@gmail.com\"\n        },\n        \"options\": {},\n        \"operation\": \"getAll\",\n        \"returnAll\": true\n      },\n      \"credentials\": {\n        \"gmailOAuth2\": {\n          \"id\": \"wqFUFuFpF5eRAp4E\",\n          \"name\": \"Gmail OAuth2 - Akhil\"\n        }\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"7b167ae9-5a1d-4bd3-b18e-c1cd8da06559\",\n      \"name\": \"Google Drive\",\n      \"type\": \"n8n-nodes-base.googleDrive\",\n      \"position\": [\n        1260,\n        0\n      ],\n      \"parameters\": {\n        \"name\": \"={{ $now + \\\"_n8n_export.csv\\\" }}\",\n        \"driveId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"My Drive\"\n        },\n        \"options\": {},\n        \"folderId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"root\",\n          \"cachedResultName\": \"/ (Root folder)\"\n        }\n      },\n      \"credentials\": {\n        \"googleDriveOAuth2Api\": {\n          \"id\": \"LxzMJWxwgbnYKUly\",\n          \"name\": \"Google Drive - Akhil\"\n        }\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"522a4ece-e0dc-4639-81d3-2f4a1b9f459e\",\n      \"name\": \"Convert to File\",\n      \"type\": \"n8n-nodes-base.convertToFile\",\n      \"position\": [\n        1040,\n        0\n      ],\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"f2e29c64-91c7-48b4-8416-eaf98b014596\",\n      \"name\": \"Parse Data\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        600,\n        0\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"2b446be8-1d0c-4a61-8896-f0a90f5100ea\",\n              \"name\": \"id\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.id }}\"\n            },\n            {\n              \"id\": \"8263ed23-ae85-4bdc-8c24-fe5fc3f12601\",\n              \"name\": \"subject\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.subject }}\"\n            },\n            {\n              \"id\": \"09ceff74-3064-4103-aa06-f56693d02765\",\n              \"name\": \"message\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.text }}\"\n            },\n            {\n              \"id\": \"6df559f5-d6b4-4fa4-8f7e-7e63a3c27994\",\n              \"name\": \"time\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.date }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"399c6f2c-b59a-4e44-aba7-b0a65eb61423\",\n      \"name\": \"Start Workflow\",\n      \"type\": \"n8n-nodes-base.manualTrigger\",\n      \"position\": [\n        160,\n        0\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"4d245499-f824-4887-85f0-5cd199c2e648\",\n      \"name\": \"End Workflow\",\n      \"type\": \"n8n-nodes-base.noOp\",\n      \"position\": [\n        1480,\n        0\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"d76bc543-75d6-4c9c-ac84-4b05be377e06\",\n      \"name\": \"Convert Time Field\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        820,\n        0\n      ],\n      \"parameters\": {\n        \"jsCode\": \"return $input.all().map(item => {\\n  const isoTime = item.json.time;\\n\\n  const date = new Date(isoTime).toLocaleString('en-US', {\\n    timeZone: 'Asia/Kolkata',  // 🔁 Change this to your UAT timezone\\n    year: 'numeric',\\n    month: 'long',\\n    day: 'numeric',\\n    hour: 'numeric',\\n    minute: '2-digit',\\n    hour12: true\\n  });\\n\\n  return {\\n    json: {\\n      ...item.json,\\n      time: date\\n    }\\n  };\\n});\\n\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"93d5dfcf-c902-4471-9a04-6e7473417bd0\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        300,\n        -120\n      ],\n      \"parameters\": {\n        \"width\": 280,\n        \"height\": 100,\n        \"content\": \"### 更改发件人邮箱\\n更新Gmail节点中的`sender`字段。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"97f660ed-281b-4ba9-9656-777b9aea2ef0\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        520,\n        160\n      ],\n      \"parameters\": {\n        \"width\": 280,\n        \"height\": 100,\n        \"content\": \"### 添加更多电子邮件字段\\t\\n修改设置节点以包含更多字段。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"825055a9-8e4f-4e39-ae2f-729c103568d6\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        740,\n        -100\n      ],\n      \"parameters\": {\n        \"height\": 80,\n        \"content\": \"### 更改时区\\n在代码节点中编辑timeZone。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"3f78a5a8-5cd4-40a0-be5f-d984e952d975\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        920,\n        160\n      ],\n      \"parameters\": {\n        \"width\": 300,\n        \"height\": 100,\n        \"content\": \"### 更改文件格式\\n在“转换为文件”节点中使用不同的格式。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"ffbf9a23-dc2c-4ebe-986e-2aff8a170b51\",\n      \"name\": \"Sticky Note4\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1160,\n        -220\n      ],\n      \"parameters\": {\n        \"width\": 280,\n        \"height\": 200,\n        \"content\": \"### 重命名输出文件\\n在Google Drive节点中调整名称\\n\\n### 更改上传文件夹\\n在Google Drive节点中设置不同的folderId\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"93836b97-81d9-47d4-b8dc-3d856e78090a\",\n      \"name\": \"Sticky Note5\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        100,\n        -580\n      ],\n      \"parameters\": {\n        \"width\": 580,\n        \"height\": 200,\n        \"content\": \"## 🚀 应用场景\\n\\n- **个人邮件归档**：备份或导出特定发件人的邮件（如发票、报告）。\\n- **审计日志**：保存对话记录以满足合规要求。\\n- **团队报告**：将项目相关邮件汇总至中央文件存储库。\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"Gmail\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Parse Data\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Parse Data\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Convert Time Field\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Google Drive\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"End Workflow\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Start Workflow\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Gmail\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Convert to File\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Google Drive\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Convert Time Field\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Convert to File\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}