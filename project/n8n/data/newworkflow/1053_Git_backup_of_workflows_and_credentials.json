{
  "url": "https://n8n.io/workflows/1053-git-backup-of-workflows-and-credentials/",
  "title": "Git backup of workflows and credentials",
  "author": "Allan Daemon",
  "publish_date": "Last update 10 months ago",
  "publish_date_absolute": "2024-07-25",
  "categories": [
    {
      "name": "Engineering"
    },
    {
      "name": "DevOps"
    }
  ],
  "workflow_json": "{\"id\":\"15\",\"name\":\"Tools / Backup Gitlab\",\"nodes\":[{\"name\":\"On clicking 'execute'\",\"type\":\"n8n-nodes-base.manualTrigger\",\"position\":[250,400],\"parameters\":{},\"typeVersion\":1},{\"name\":\"Export Workflows\",\"type\":\"n8n-nodes-base.executeCommand\",\"position\":[450,300],\"parameters\":{\"command\":\"npx n8n export:workflow --backup --output repo/workflows/\"},\"typeVersion\":1},{\"name\":\"Export Credentials\",\"type\":\"n8n-nodes-base.executeCommand\",\"position\":[600,300],\"parameters\":{\"command\":\"npx n8n export:credentials --backup --output repo/credentials/\"},\"typeVersion\":1},{\"name\":\"git add\",\"type\":\"n8n-nodes-base.executeCommand\",\"position\":[750,300],\"parameters\":{\"command\":\"git -C repo add .\"},\"typeVersion\":1},{\"name\":\"git commit\",\"type\":\"n8n-nodes-base.executeCommand\",\"position\":[900,300],\"parameters\":{\"command\":\"=git -C repo commit -m \\\"Auto backup ({{ new Date().toISOString() }})\\\"\"},\"typeVersion\":1},{\"name\":\"git push\",\"type\":\"n8n-nodes-base.executeCommand\",\"position\":[1050,300],\"parameters\":{\"command\":\"git -C repo push\"},\"typeVersion\":1},{\"name\":\"Cron\",\"type\":\"n8n-nodes-base.cron\",\"position\":[250,200],\"parameters\":{\"triggerTimes\":{\"item\":[{\"hour\":0},{\"hour\":12},{\"hour\":6},{\"hour\":18}]}},\"typeVersion\":1}],\"active\":true,\"settings\":{},\"connections\":{\"Cron\":{\"main\":[[{\"node\":\"Export Workflows\",\"type\":\"main\",\"index\":0}]]},\"git add\":{\"main\":[[{\"node\":\"git commit\",\"type\":\"main\",\"index\":0}]]},\"git commit\":{\"main\":[[{\"node\":\"git push\",\"type\":\"main\",\"index\":0}]]},\"Export Workflows\":{\"main\":[[{\"node\":\"Export Credentials\",\"type\":\"main\",\"index\":0}]]},\"Export Credentials\":{\"main\":[[{\"node\":\"git add\",\"type\":\"main\",\"index\":0}]]},\"On clicking 'execute'\":{\"main\":[[{\"node\":\"Export Workflows\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "This creates a git backup of the workflows and credentials.\n\nIt uses the n8n export command with git diff, so you can run as many times as you want, but only when there are changes they will create a commit.\n\n# Setup\n\n_You need some access to the server._\n\nCreate a repository in some remote place to host your project, like Github, Gitlab, or your favorite private repo.\n\nClone the repository in the server in a place that the n8n has access. In the example, it's the `.`, and the repository name is `repo`. Change it in the commands _and in the workflow commands_ (you can set it as a variable in the wokflow). Checkout to another branch if you won't use the master one.\n    \n    \n    cd .\n    git clone repository\n    \n\nOr you could `git init` and then add the remote (`git remote add origin YOUR_REPO_URL`), whatever pleases you more.\n\nAs the server, check if everything is ok for beeing able to commit. Very likely you'll need to setup the user email and name. Try to create a commit, and push it to upstream, and everything you need (like config a user to comit) will appear in way. I strong suggest testing with exporting the commands to garantee it will work too.\n    \n    \n    cd ./repo\n    \n    git commit -c \"Initial commmit\" --allow-empty\n    \n\n-u is the same as --set-upstream\n    \n    \n    git push -u origin master \n    \n\nTesting to push to upstream with the first exported data\n    \n    \n    npx n8n export:workflow --backup --output ./repo/workflows/\n    npx n8n export:credentials --backup --output repo/credentials/\n    \n    cd ./repo\n    git add .\n    git commit -c \"manual backup: first export\"\n    git push\n    \n\nAfter that, if everything is ok, the workflow should work just fine.\n\n## Adjustments\n\nAdjust the path in used in the workflow. See the the `git -C PATH` command is the same as `cd PATH; git ...`.\n\nAlso, adjust the cron to run as you need. As I said in the beginning, you can run it even for every minute, but it will create commits only when there are changes.\n\n### Credentials encryption\n\nThe default for exporting the credentials is to do them encrypted. You can add the flag `--decrypted` to the `n8n export:credentials` command if you need to save them in plain. But as general rule, it's better to save the encryption key, that you only need to do that once, and them export it safely encrypted.\n",
  "crawled_at": "2025-05-25T19:17:13.200401",
  "readme_zh": "这将创建一个包含工作流和凭据的git备份。\n\n它使用n8n导出命令结合git diff功能，因此你可以随意运行多次，但仅当内容发生变化时才会生成提交记录。\n\n# 设置步骤\n\n_你需要具备服务器访问权限。_\n\n首先在远程平台（如Github、Gitlab或你偏好的私有仓库）创建项目仓库。\n\n在服务器上克隆该仓库至n8n可访问的目录（示例中使用当前目录`.`，仓库名为`repo`）。注意需同步修改_工作流命令_中的路径（可设为工作流变量）。若需使用非master分支，请先切换分支。\n    \n    \n    cd .\n    git clone 仓库地址\n    \n\n也可选择`git init`初始化后添加远程仓库（`git remote add origin 你的仓库URL`），两种方式皆可。\n\n在服务器端验证提交能力：通常需配置用户邮箱和姓名。尝试创建空提交并推送到上游，系统会提示需完成的配置（如设置提交用户）。强烈建议先手动执行导出命令测试功能。\n    \n    \n    cd ./repo\n    \n    git commit -c \"初始提交\" --allow-empty\n    \n\n-u等同于--set-upstream参数\n    \n    \n    git push -u origin master \n    \n\n测试首次导出数据推送：\n    \n    \n    npx n8n export:workflow --backup --output ./repo/workflows/\n    npx n8n export:credentials --backup --output repo/credentials/\n    \n    cd ./repo\n    git add .\n    git commit -c \"手动备份：首次导出\"\n    git push\n    \n\n若以上步骤正常完成，工作流即可正常运行。\n\n## 调整事项\n\n请核对工作流中的路径设置。注意`git -C 路径`命令等效于`cd 路径; git ...`。\n\n定时任务频率可按需调整。如开头所述，即使每分钟运行也仅会在内容变更时生成提交。\n\n### 凭据加密说明\n\n默认情况下导出的凭据是加密状态。如需明文保存，可在`n8n export:credentials`命令添加`--decrypted`参数。但通常建议保存加密密钥（只需配置一次），以安全加密形式存储凭据。",
  "title_zh": "工作流与凭证的Git备份",
  "publish_date_zh": "最后更新于9个月前",
  "workflow_json_zh": "{\"id\":\"15\",\"name\":\"Tools / Backup Gitlab\",\"nodes\":[{\"name\":\"On clicking 'execute'\",\"type\":\"n8n-nodes-base.manualTrigger\",\"position\":[250,400],\"parameters\":{},\"typeVersion\":1},{\"name\":\"Export Workflows\",\"type\":\"n8n-nodes-base.executeCommand\",\"position\":[450,300],\"parameters\":{\"command\":\"npx n8n export:workflow --backup --output repo/workflows/\"},\"typeVersion\":1},{\"name\":\"Export Credentials\",\"type\":\"n8n-nodes-base.executeCommand\",\"position\":[600,300],\"parameters\":{\"command\":\"npx n8n export:credentials --backup --output repo/credentials/\"},\"typeVersion\":1},{\"name\":\"git add\",\"type\":\"n8n-nodes-base.executeCommand\",\"position\":[750,300],\"parameters\":{\"command\":\"git -C repo add .\"},\"typeVersion\":1},{\"name\":\"git commit\",\"type\":\"n8n-nodes-base.executeCommand\",\"position\":[900,300],\"parameters\":{\"command\":\"=git -C repo commit -m \\\"Auto backup ({{ new Date().toISOString() }})\\\"\"},\"typeVersion\":1},{\"name\":\"git push\",\"type\":\"n8n-nodes-base.executeCommand\",\"position\":[1050,300],\"parameters\":{\"command\":\"git -C repo push\"},\"typeVersion\":1},{\"name\":\"Cron\",\"type\":\"n8n-nodes-base.cron\",\"position\":[250,200],\"parameters\":{\"triggerTimes\":{\"item\":[{\"hour\":0},{\"hour\":12},{\"hour\":6},{\"hour\":18}]}},\"typeVersion\":1}],\"active\":true,\"settings\":{},\"connections\":{\"Cron\":{\"main\":[[{\"node\":\"Export Workflows\",\"type\":\"main\",\"index\":0}]]},\"git add\":{\"main\":[[{\"node\":\"git commit\",\"type\":\"main\",\"index\":0}]]},\"git commit\":{\"main\":[[{\"node\":\"git push\",\"type\":\"main\",\"index\":0}]]},\"Export Workflows\":{\"main\":[[{\"node\":\"Export Credentials\",\"type\":\"main\",\"index\":0}]]},\"Export Credentials\":{\"main\":[[{\"node\":\"git add\",\"type\":\"main\",\"index\":0}]]},\"On clicking 'execute'\":{\"main\":[[{\"node\":\"Export Workflows\",\"type\":\"main\",\"index\":0}]]}}}"
}