{
  "url": "https://n8n.io/workflows/4072-enrich-seller-data-with-email-and-domain-lookup-using-bright-data-and-google-search/",
  "title": "Enrich Seller Data with Email & Domain Lookup using Bright Data & Google Search",
  "author": "Cyril Nicko Gaspar",
  "publish_date": "Last update 9 days ago",
  "publish_date_absolute": "2025-05-17",
  "categories": [
    {
      "name": "Sales"
    },
    {
      "name": "AI"
    },
    {
      "name": "Marketing"
    }
  ],
  "workflow_json": "{\"meta\":{\"instanceId\":\"4e6be3a68285934388a854ac0ffdc5e5500688d5cdb88d0ec2d734e85f097355\",\"templateCredsSetupCompleted\":true},\"nodes\":[{\"id\":\"45b55e87-08a0-44e5-a220-5d9110ac364e\",\"name\":\"When clicking ‘Test workflow’\",\"type\":\"n8n-nodes-base.manualTrigger\",\"position\":[-1960,480],\"parameters\":{},\"typeVersion\":1},{\"id\":\"6daee671-8b07-4101-b57a-5dd7a9966c5e\",\"name\":\"Postgres1\",\"type\":\"n8n-nodes-base.postgres\",\"position\":[3000,480],\"parameters\":{\"table\":{\"__rl\":true,\"mode\":\"name\",\"value\":\"=seller_data\"},\"schema\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"public\"},\"columns\":{\"value\":{\"seller_id\":\"={{ $('Process by Batch').item.json.seller_id.toNumber() }}\",\"primary_email\":\"={{ $json.data[0].email }}\"},\"schema\":[{\"id\":\"seller_id\",\"type\":\"number\",\"display\":true,\"removed\":false,\"required\":true,\"displayName\":\"seller_id\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"seller_name\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"seller_name\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"primary_email\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"primary_email\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"company_info\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"company_info\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"trade_name\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"trade_name\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"business_address\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"business_address\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"coc_number\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"coc_number\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"vat_number\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"vat_number\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"commercial_register\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"commercial_register\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"secondary_email\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"secondary_email\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"domain\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"domain\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"seller_slug\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"seller_slug\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"source\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"source\",\"defaultMatch\":false,\"canBeUsedToMatch\":true}],\"mappingMode\":\"defineBelow\",\"matchingColumns\":[\"seller_id\"],\"attemptToConvertTypes\":false,\"convertFieldsToString\":false},\"options\":{},\"operation\":\"update\"},\"credentials\":{\"postgres\":{\"id\":\"m6FHVVkUrN3xlE35\",\"name\":\"Postgres account\"}},\"typeVersion\":2.5},{\"id\":\"b79a33a6-3d15-44cf-b043-3e33cdb09cbf\",\"name\":\"Wait\",\"type\":\"n8n-nodes-base.wait\",\"position\":[3620,1300],\"webhookId\":\"0cbffe1f-700c-4b66-967d-cc85398fc159\",\"parameters\":{},\"typeVersion\":1.1},{\"id\":\"b4e9b540-49f4-48d5-abf9-5008412a86bc\",\"name\":\"Schedule Trigger\",\"type\":\"n8n-nodes-base.scheduleTrigger\",\"position\":[-1960,720],\"parameters\":{\"rule\":{\"interval\":[{\"field\":\"minutes\"}]}},\"typeVersion\":1.2},{\"id\":\"4847e2e0-8abe-4d10-b04b-85b4ee318c83\",\"name\":\"Postgres2\",\"type\":\"n8n-nodes-base.postgres\",\"position\":[3020,1020],\"parameters\":{\"table\":{\"__rl\":true,\"mode\":\"name\",\"value\":\"seller_data\"},\"schema\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"public\"},\"columns\":{\"value\":{\"seller_id\":\"={{ $('Switch').item.json.seller_id.toNumber() }}\"},\"schema\":[{\"id\":\"seller_id\",\"type\":\"number\",\"display\":true,\"removed\":false,\"required\":true,\"displayName\":\"seller_id\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"seller_name\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"seller_name\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"primary_email\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"primary_email\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"company_info\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"company_info\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"trade_name\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"trade_name\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"business_address\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"business_address\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"coc_number\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"coc_number\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"vat_number\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"vat_number\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"commercial_register\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"commercial_register\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"secondary_email\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"secondary_email\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"domain\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"domain\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"seller_slug\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"seller_slug\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"source\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"source\",\"defaultMatch\":false,\"canBeUsedToMatch\":true}],\"mappingMode\":\"defineBelow\",\"matchingColumns\":[\"seller_id\"],\"attemptToConvertTypes\":false,\"convertFieldsToString\":false},\"options\":{},\"operation\":\"update\"},\"credentials\":{\"postgres\":{\"id\":\"m6FHVVkUrN3xlE35\",\"name\":\"Postgres account\"}},\"typeVersion\":2.5},{\"id\":\"e513e68c-9fe6-48e9-98c9-fd2787926619\",\"name\":\"Switch\",\"type\":\"n8n-nodes-base.switch\",\"position\":[-680,660],\"parameters\":{\"rules\":{\"values\":[{\"outputKey\":\"Domain exists\",\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"operator\":{\"type\":\"string\",\"operation\":\"exists\",\"singleValue\":true},\"leftValue\":\"={{ $json.domain }}\",\"rightValue\":\"\"}]},\"renameOutput\":true},{\"outputKey\":\"No domain but with business address and trade name\",\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"23e3cde8-3f9e-48d2-8353-b286df20d139\",\"operator\":{\"type\":\"boolean\",\"operation\":\"true\",\"singleValue\":true},\"leftValue\":\"={{ !$json.domain && $json.business_address && $json.trade_name ? true : false }}\",\"rightValue\":\"=no_domain\"}]},\"renameOutput\":true}]},\"options\":{\"fallbackOutput\":\"extra\"}},\"typeVersion\":3.2},{\"id\":\"5fa56857-8607-430d-ac9e-0105f377cfbe\",\"name\":\"Code\",\"type\":\"n8n-nodes-base.code\",\"position\":[2320,840],\"parameters\":{\"mode\":\"runOnceForEachItem\",\"jsCode\":\"function extractWebsiteName(url) {\\n  //const newUrl = url || \\\"\\\"\\n    const mainDomain = url.replace(/^(?:.*\\\\.)?([^\\\\.]+)\\\\.[^\\\\.]+$/, '$1');\\n    console.log(mainDomain);\\n    return mainDomain;\\n}\\n\\nfunction normalizeName(name) {\\n  if (!name) {\\n    return null\\n  }\\n    return name.toLowerCase().replace(/[\\\\s&,.™®]/g, '');\\n}\\n\\nfunction isWebsiteBelongsToCompany(url, sellerName, tradeName) {\\n    const websiteName = extractWebsiteName(url);\\n    console.log(\\\"websiteName: \\\" + websiteName);\\n    if (!websiteName) return false;\\n\\n    const normalizedWebsiteName = websiteName.toLowerCase();\\n    const normalizedSellerName = normalizeName(sellerName);\\n    const normalizedTradeName = normalizeName(tradeName);\\n\\n    return normalizedWebsiteName.includes(normalizedSellerName) || \\n           normalizedWebsiteName.includes(normalizedTradeName) ||\\n           normalizedSellerName.includes(normalizedWebsiteName) ||\\n           normalizedTradeName.includes(normalizedWebsiteName);\\n}\\n\\ntry {\\n\\nconst url1 = $json.first_url;\\nconst sellerName = $json.seller_name;\\nconst tradeName = $json.trade_name;\\n\\nconst belongsToCompany1 = isWebsiteBelongsToCompany(url1, sellerName, tradeName);\\nconsole.log(belongsToCompany1);\\n\\nconst url2 = $json.second_url;\\nconst belongsToCompany2 = isWebsiteBelongsToCompany(url2, sellerName, tradeName);\\nconsole.log(belongsToCompany2);\\n\\nfunction rootDomain(domain) {\\n    return domain.replace(/^(?:www\\\\.)?(?:[^.]+\\\\.)?([^\\\\.]+\\\\.[^\\\\.]+)$/, '$1');\\n}\\n\\nreturn {\\n    rootDomain: belongsToCompany1 ? rootDomain(url1) : belongsToCompany2 ? rootDomain(url2) : null,\\n    first_url: url1,\\n    second_url: url2,\\n    extracted_email: $json.extracted_email,\\n    seller_name: sellerName,\\n    trade_name: tradeName,\\n    seller_slug: $json.seller_slug\\n\\n}\\n\\n    \\n} catch (error) {\\n  return {\\n   rootDomain: null,\\n   first_url: $json.first_url,\\n   second_url: $json.second_url,\\n   extracted_email: $json.extracted_email,\\n   seller_name: $json.seller_name,\\n   trade_name: $json.trade_name,\\n   seller_slug: $json.seller_slug\\n  }\\n}\"},\"typeVersion\":2},{\"id\":\"426cf1bc-f5e5-4f59-b727-b8baa5b715bb\",\"name\":\"Postgres3\",\"type\":\"n8n-nodes-base.postgres\",\"position\":[3000,660],\"parameters\":{\"table\":{\"__rl\":true,\"mode\":\"name\",\"value\":\"=seller_data\"},\"schema\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"public\"},\"columns\":{\"value\":{\"domain\":\"={{ $json.rootDomain }}\",\"seller_id\":\"={{ $('Process by Batch').item.json.seller_id.toNumber() }}\",\"primary_email\":\"={{ $json.extracted_email }}\"},\"schema\":[{\"id\":\"seller_id\",\"type\":\"number\",\"display\":true,\"removed\":false,\"required\":true,\"displayName\":\"seller_id\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"seller_name\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"seller_name\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"primary_email\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"primary_email\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"company_info\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"company_info\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"trade_name\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"trade_name\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"business_address\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"business_address\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"coc_number\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"coc_number\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"vat_number\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"vat_number\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"commercial_register\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"commercial_register\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"secondary_email\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"secondary_email\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"domain\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"domain\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"seller_slug\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"seller_slug\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"source\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"source\",\"defaultMatch\":false,\"canBeUsedToMatch\":true}],\"mappingMode\":\"defineBelow\",\"matchingColumns\":[\"seller_id\"],\"attemptToConvertTypes\":false,\"convertFieldsToString\":false},\"options\":{},\"operation\":\"update\"},\"credentials\":{\"postgres\":{\"id\":\"m6FHVVkUrN3xlE35\",\"name\":\"Postgres account\"}},\"typeVersion\":2.5},{\"id\":\"e399a71c-46d2-4930-89a6-f976987ed3b3\",\"name\":\"Switch1\",\"type\":\"n8n-nodes-base.switch\",\"position\":[2580,840],\"parameters\":{\"rules\":{\"values\":[{\"outputKey\":\"extracted email matches the first two domains\",\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"operator\":{\"type\":\"boolean\",\"operation\":\"true\",\"singleValue\":true},\"leftValue\":\"={{ $json.extracted_email && $json.rootDomain && $json.extracted_email.includes($json.rootDomain) ? true : false }}\",\"rightValue\":\"\"}]},\"renameOutput\":true},{\"outputKey\":\"domain does not match with extracted email\",\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"08bd4bcb-44da-4a2b-9687-8216e24869cc\",\"operator\":{\"type\":\"boolean\",\"operation\":\"true\",\"singleValue\":true},\"leftValue\":\"={{ $json.extracted_email && $json.rootDomain && !$json.extracted_email.includes($json.rootDomain) ? true : false }}\",\"rightValue\":\"\"}]},\"renameOutput\":true},{\"outputKey\":\"no extracted email but with root domain\",\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"059ab924-f2e7-4d8f-99c6-c63eb3fd90c7\",\"operator\":{\"type\":\"boolean\",\"operation\":\"true\",\"singleValue\":true},\"leftValue\":\"={{ !$json.extracted_email && $json.rootDomain ? true : false }}\",\"rightValue\":\"\"}]},\"renameOutput\":true}]},\"options\":{\"fallbackOutput\":\"extra\"}},\"typeVersion\":3.2},{\"id\":\"00cfa54d-3776-4564-8a22-d15b27b8effe\",\"name\":\"Postgres4\",\"type\":\"n8n-nodes-base.postgres\",\"position\":[3000,840],\"parameters\":{\"table\":{\"__rl\":true,\"mode\":\"name\",\"value\":\"seller_data\"},\"schema\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"public\"},\"columns\":{\"value\":{\"domain\":\"={{ $json.rootDomain }}\",\"seller_id\":\"={{ $('Process by Batch').item.json.seller_id.toNumber() }}\"},\"schema\":[{\"id\":\"seller_id\",\"type\":\"number\",\"display\":true,\"removed\":false,\"required\":true,\"displayName\":\"seller_id\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"seller_name\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"seller_name\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"primary_email\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"primary_email\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"company_info\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"company_info\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"trade_name\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"trade_name\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"business_address\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"business_address\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"coc_number\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"coc_number\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"vat_number\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"vat_number\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"commercial_register\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"commercial_register\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"secondary_email\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"secondary_email\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"domain\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"domain\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"seller_slug\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"seller_slug\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"source\",\"type\":\"string\",\"display\":true,\"removed\":true,\"required\":false,\"displayName\":\"source\",\"defaultMatch\":false,\"canBeUsedToMatch\":true}],\"mappingMode\":\"defineBelow\",\"matchingColumns\":[\"seller_id\"],\"attemptToConvertTypes\":false,\"convertFieldsToString\":false},\"options\":{},\"operation\":\"update\"},\"credentials\":{\"postgres\":{\"id\":\"m6FHVVkUrN3xlE35\",\"name\":\"Postgres account\"}},\"typeVersion\":2.5},{\"id\":\"dbe77304-ba70-49d7-81ee-3afffcae7820\",\"name\":\"Wait1\",\"type\":\"n8n-nodes-base.wait\",\"position\":[420,560],\"webhookId\":\"20502d1a-b672-4e6d-ac2e-9c5f997ab1dc\",\"parameters\":{\"amount\":2},\"typeVersion\":1.1},{\"id\":\"34d5cbe7-2c3f-4bfd-888b-e0a4f81cd962\",\"name\":\"Edit Fields3\",\"type\":\"n8n-nodes-base.set\",\"position\":[1680,720],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"0ba46b0e-093f-480a-8ae7-20f826c643a9\",\"name\":\"first_url\",\"type\":\"string\",\"value\":\"={{ $('HTML1').item.json.element[0].match(/https?:\\\\/\\\\/[^\\\\s/$.?#].[^\\\\s]*/g).filter(item => !item.includes(\\\"google\\\"))[0] }}\"},{\"id\":\"9533866a-04b5-4ef2-82da-98017d6ace77\",\"name\":\"extracted_email\",\"type\":\"string\",\"value\":\"={{ $('HTML1').item.json.element.join().match(/[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\\\.[a-zA-Z]{2,}/)[0] }}\"},{\"id\":\"fd0f8699-772a-4525-8122-68a7ed27f2db\",\"name\":\"second_url\",\"type\":\"string\",\"value\":\"={{ $('HTML1').item.json.element[1].match(/https?:\\\\/\\\\/[^\\\\s/$.?#].[^\\\\s]*/g).filter(item => !item.includes(\\\"google\\\"))[0] }}\"},{\"id\":\"b3e2f080-1174-4f61-a258-86b7f5c468e1\",\"name\":\"seller_name\",\"type\":\"string\",\"value\":\"={{ $('Switch').item.json.seller_name }}\"},{\"id\":\"d990a86d-ecef-469b-b344-771956093011\",\"name\":\"trade_name\",\"type\":\"string\",\"value\":\"={{ $('Switch').item.json.trade_name }}\"},{\"id\":\"37c43cb0-cb53-4098-9074-ea228b71d820\",\"name\":\"seller_slug\",\"type\":\"string\",\"value\":\"={{ $('Switch').item.json.seller_slug }}\"},{\"id\":\"194e5535-399b-4cb1-8935-361eedf1f983\",\"name\":\"rootDomain\",\"type\":\"string\",\"value\":\"={{ $('HTML1').item.json.element[0].match(/https?:\\\\/\\\\/[^\\\\s/$.?#].[^\\\\s]*/g).filter(item => !item.includes(\\\"google\\\"))[0].extractDomain() }}\"}]}},\"typeVersion\":3.4},{\"id\":\"759cac41-3a78-499d-b529-8ae6f4bb51ea\",\"name\":\"Process by Batch\",\"type\":\"n8n-nodes-base.splitInBatches\",\"position\":[-960,640],\"parameters\":{\"options\":{},\"batchSize\":5},\"typeVersion\":3},{\"id\":\"2a432d7a-cbe8-4334-b8c2-febfe5696c83\",\"name\":\"BrightData\",\"type\":\"n8n-nodes-brightdata.brightData\",\"position\":[-120,240],\"parameters\":{\"url\":\"=https://www.google.com/search?q={{ $json.domain }}+email\",\"zone\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"web_unlocker1\",\"cachedResultName\":\"web_unlocker1\"},\"format\":\"json\",\"country\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"us\"},\"requestOptions\":{}},\"credentials\":{\"brightdataApi\":{\"id\":\"DQaiy0yJ0lNutzIl\",\"name\":\"BrightData account\"}},\"typeVersion\":1},{\"id\":\"db49e284-72b4-41b7-8ca1-96335c46e11f\",\"name\":\"BrightData1\",\"type\":\"n8n-nodes-brightdata.brightData\",\"position\":[800,720],\"parameters\":{\"url\":\"=https://www.google.com/search?q=email+{{ encodeURIComponent($('Switch').item.json.trade_name || $('Switch').item.json.seller_name) }}+{{ encodeURIComponent($('Switch').item.json.business_address) }}\",\"zone\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"web_unlocker1\",\"cachedResultName\":\"web_unlocker1\"},\"format\":\"json\",\"country\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"us\"},\"requestOptions\":{}},\"credentials\":{\"brightdataApi\":{\"id\":\"DQaiy0yJ0lNutzIl\",\"name\":\"BrightData account\"}},\"typeVersion\":1},{\"id\":\"312ff218-353d-4d2c-a7e4-6a2bc133f828\",\"name\":\"HTML\",\"type\":\"n8n-nodes-base.html\",\"position\":[40,240],\"parameters\":{\"options\":{},\"operation\":\"extractHtmlContent\",\"dataPropertyName\":\"body\",\"extractionValues\":{\"values\":[{\"key\":\"element\",\"cssSelector\":\"div[jscontroller] .N54PNb\",\"returnArray\":true,\"skipSelectors\":\"img\"}]}},\"typeVersion\":1.2},{\"id\":\"e1ec0679-fde7-4a62-b162-dc3a6be50b8e\",\"name\":\"HTML1\",\"type\":\"n8n-nodes-base.html\",\"position\":[980,720],\"parameters\":{\"options\":{},\"operation\":\"extractHtmlContent\",\"dataPropertyName\":\"body\",\"extractionValues\":{\"values\":[{\"key\":\"element\",\"cssSelector\":\"div[jscontroller] .N54PNb\",\"returnArray\":true,\"skipSelectors\":\"img\"}]}},\"typeVersion\":1.2},{\"id\":\"ea68bca8-7f10-49d3-a14d-e46cc4c793ba\",\"name\":\"Split Out\",\"type\":\"n8n-nodes-base.splitOut\",\"position\":[360,240],\"parameters\":{\"options\":{\"destinationFieldName\":\"email\"},\"fieldToSplitOut\":\"emails\"},\"typeVersion\":1},{\"id\":\"02b202cd-1a45-49a5-997a-35a692598f02\",\"name\":\"Filter\",\"type\":\"n8n-nodes-base.filter\",\"position\":[500,240],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"a07e75fc-522c-4861-a842-cf880c398a44\",\"operator\":{\"type\":\"string\",\"operation\":\"contains\"},\"leftValue\":\"={{ $json.email }}\",\"rightValue\":\"={{ $('Process by Batch').item.json.domain.replace(/^(?:www\\\\.)?(?:[^.]+\\\\.)?([^\\\\.]+\\\\.[^\\\\.]+)$/, '$1').toLowerCase() }}\"}]}},\"typeVersion\":2.2,\"alwaysOutputData\":true},{\"id\":\"f15a901a-5225-4450-949b-6fb5769c6564\",\"name\":\"Aggregate\",\"type\":\"n8n-nodes-base.aggregate\",\"position\":[660,240],\"parameters\":{\"options\":{},\"aggregate\":\"aggregateAllItemData\"},\"typeVersion\":1},{\"id\":\"a403ff04-ed4e-43f4-abd6-261173b7d63d\",\"name\":\"Code2\",\"type\":\"n8n-nodes-base.code\",\"position\":[1140,720],\"parameters\":{\"mode\":\"runOnceForEachItem\",\"jsCode\":\"function extractEmails(text) {\\n    // Regular expression to match most common email patterns\\n    const emailRegex = /[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\\\.[a-zA-Z]{2,}/g;\\n    // matchAll returns an iterator so we spread it into an array\\n    const matches = [...text.matchAll(emailRegex)];\\n    return matches.map(match => decodeURI(match[0]).trim());\\n}\\n\\n\\nconst sampleText = $json.element.join();\\nconst emails = extractEmails(sampleText);\\nconsole.log(emails);  // Expected: [ 'sales@example.com', 'support@example.org', 'info@example.co.uk' ]\\nreturn {emails}\\n\"},\"typeVersion\":2},{\"id\":\"4fd9ec2d-14e4-4765-bdad-1e33dd93d8c1\",\"name\":\"Split Out1\",\"type\":\"n8n-nodes-base.splitOut\",\"position\":[1280,720],\"parameters\":{\"options\":{\"destinationFieldName\":\"email\"},\"fieldToSplitOut\":\"emails\"},\"typeVersion\":1},{\"id\":\"69e9a05d-9b30-409e-a94b-888828aa5dc1\",\"name\":\"Filter1\",\"type\":\"n8n-nodes-base.filter\",\"position\":[1400,720],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"a07e75fc-522c-4861-a842-cf880c398a44\",\"operator\":{\"type\":\"string\",\"operation\":\"contains\"},\"leftValue\":\"={{ $json.email }}\",\"rightValue\":\"={{ $('Process by Batch').item.json.domain.replace(/^(?:www\\\\.)?(?:[^.]+\\\\.)?([^\\\\.]+\\\\.[^\\\\.]+)$/, '$1').toLowerCase() }}\"}]}},\"typeVersion\":2.2,\"alwaysOutputData\":true},{\"id\":\"a317567a-1d69-41b8-bab1-f656627381e4\",\"name\":\"If2\",\"type\":\"n8n-nodes-base.if\",\"position\":[1900,720],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"bcb1a1ee-0720-4cbd-ae3c-cb4ebca5acfa\",\"operator\":{\"type\":\"string\",\"operation\":\"exists\",\"singleValue\":true},\"leftValue\":\"={{ $json.data[0]?.email }}\",\"rightValue\":0}]}},\"typeVersion\":2.2},{\"id\":\"6ec5cc13-8e67-43a7-bec3-81b8ba8121b7\",\"name\":\"Aggregate1\",\"type\":\"n8n-nodes-base.aggregate\",\"position\":[1540,720],\"parameters\":{\"options\":{},\"aggregate\":\"aggregateAllItemData\"},\"typeVersion\":1},{\"id\":\"3f62b698-1948-45cf-bf70-467dd36e7c81\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-160,40],\"parameters\":{\"width\":1000,\"height\":460,\"content\":\"## Search Domain+Email in Google using Bright Data\\nIf the domain exist, use the search query \\\"{{$json.domain}}+email\\\".\"},\"typeVersion\":1},{\"id\":\"30aa345b-90d1-4012-a3ba-81194ad676a1\",\"name\":\"Check if email exists\",\"type\":\"n8n-nodes-base.if\",\"position\":[920,240],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"bcb1a1ee-0720-4cbd-ae3c-cb4ebca5acfa\",\"operator\":{\"type\":\"string\",\"operation\":\"exists\",\"singleValue\":true},\"leftValue\":\"={{ $json.data[0]?.email }}\",\"rightValue\":0}]}},\"typeVersion\":2.2},{\"id\":\"4da7a7a8-3eca-4f20-af2f-9fc0baf9b9b0\",\"name\":\"Extract Emails\",\"type\":\"n8n-nodes-base.code\",\"position\":[200,240],\"parameters\":{\"mode\":\"runOnceForEachItem\",\"jsCode\":\"function extractEmails(text) {\\n    // Regular expression to match most common email patterns\\n    const emailRegex = /[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\\\.[a-zA-Z]{2,}/g;\\n    // matchAll returns an iterator so we spread it into an array\\n    const matches = [...text.matchAll(emailRegex)];\\n    return matches.map(match => decodeURI(match[0]).trim());\\n}\\n\\n\\nconst sampleText = $json.element.join();\\nconst emails = extractEmails(sampleText);\\nconsole.log(emails);  // Expected: [ 'sales@example.com', 'support@example.org', 'info@example.co.uk' ]\\nreturn {emails}\\n\"},\"typeVersion\":2},{\"id\":\"43557ff1-642c-41b3-b6e9-cfc5de650428\",\"name\":\"Read the Database\",\"type\":\"n8n-nodes-base.postgres\",\"position\":[-1280,640],\"parameters\":{\"sort\":{\"values\":[{\"column\":\"seller_id\"}]},\"limit\":60,\"table\":{\"__rl\":true,\"mode\":\"name\",\"value\":\"seller_data\"},\"where\":{\"values\":[{\"column\":\"primary_email\",\"condition\":\"IS NULL\"}]},\"schema\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"public\"},\"options\":{},\"operation\":\"select\"},\"credentials\":{\"postgres\":{\"id\":\"m6FHVVkUrN3xlE35\",\"name\":\"Postgres account\"}},\"typeVersion\":2.5},{\"id\":\"5ae7d1e1-c626-4553-85c0-07c5f3ea96c6\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[720,560],\"parameters\":{\"width\":1140,\"height\":460,\"content\":\"## Search Seller Name+Address+Email in Google using Bright Data\\nIf the domain exist, use the search query \\\"{{$json.seller_name}}+{{ $json.seller_address }}+email\\\".\"},\"typeVersion\":1},{\"id\":\"7dfb9013-7c0e-43d0-ba44-afb02ed0834e\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[2240,340],\"parameters\":{\"width\":980,\"height\":960,\"content\":\"## Clean up the data and save it to Postgres database\"},\"typeVersion\":1},{\"id\":\"2034fa79-9c65-4cd8-9b74-f9f9301310f5\",\"name\":\"Sticky Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-1340,460],\"parameters\":{\"width\":960,\"height\":540,\"content\":\"## Read and iterate through the database\\n\"},\"typeVersion\":1}],\"pinData\":{},\"connections\":{\"If2\":{\"main\":[[{\"node\":\"Postgres1\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Code\",\"type\":\"main\",\"index\":0}]]},\"Code\":{\"main\":[[{\"node\":\"Switch1\",\"type\":\"main\",\"index\":0}]]},\"HTML\":{\"main\":[[{\"node\":\"Extract Emails\",\"type\":\"main\",\"index\":0}]]},\"Wait\":{\"main\":[[{\"node\":\"Process by Batch\",\"type\":\"main\",\"index\":0}]]},\"Code2\":{\"main\":[[{\"node\":\"Split Out1\",\"type\":\"main\",\"index\":0}]]},\"HTML1\":{\"main\":[[{\"node\":\"Code2\",\"type\":\"main\",\"index\":0}]]},\"Wait1\":{\"main\":[[{\"node\":\"BrightData1\",\"type\":\"main\",\"index\":0}]]},\"Filter\":{\"main\":[[{\"node\":\"Aggregate\",\"type\":\"main\",\"index\":0}]]},\"Switch\":{\"main\":[[{\"node\":\"BrightData\",\"type\":\"main\",\"index\":0}],[{\"node\":\"BrightData1\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Postgres2\",\"type\":\"main\",\"index\":0}]]},\"Filter1\":{\"main\":[[{\"node\":\"Aggregate1\",\"type\":\"main\",\"index\":0}]]},\"Switch1\":{\"main\":[[{\"node\":\"Postgres3\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Postgres4\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Postgres4\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Postgres2\",\"type\":\"main\",\"index\":0}]]},\"Aggregate\":{\"main\":[[{\"node\":\"Check if email exists\",\"type\":\"main\",\"index\":0}]]},\"Postgres1\":{\"main\":[[{\"node\":\"Wait\",\"type\":\"main\",\"index\":0}]]},\"Postgres2\":{\"main\":[[{\"node\":\"Wait\",\"type\":\"main\",\"index\":0}]]},\"Postgres3\":{\"main\":[[{\"node\":\"Wait\",\"type\":\"main\",\"index\":0}]]},\"Postgres4\":{\"main\":[[{\"node\":\"Wait\",\"type\":\"main\",\"index\":0}]]},\"Split Out\":{\"main\":[[{\"node\":\"Filter\",\"type\":\"main\",\"index\":0}]]},\"Aggregate1\":{\"main\":[[{\"node\":\"Edit Fields3\",\"type\":\"main\",\"index\":0}]]},\"BrightData\":{\"main\":[[{\"node\":\"HTML\",\"type\":\"main\",\"index\":0}]]},\"Split Out1\":{\"main\":[[{\"node\":\"Filter1\",\"type\":\"main\",\"index\":0}]]},\"BrightData1\":{\"main\":[[{\"node\":\"HTML1\",\"type\":\"main\",\"index\":0}]]},\"Edit Fields3\":{\"main\":[[{\"node\":\"If2\",\"type\":\"main\",\"index\":0}]]},\"Extract Emails\":{\"main\":[[{\"node\":\"Split Out\",\"type\":\"main\",\"index\":0}]]},\"Process by Batch\":{\"main\":[[],[{\"node\":\"Switch\",\"type\":\"main\",\"index\":0}]]},\"Schedule Trigger\":{\"main\":[[{\"node\":\"Read the Database\",\"type\":\"main\",\"index\":0}]]},\"Read the Database\":{\"main\":[[{\"node\":\"Process by Batch\",\"type\":\"main\",\"index\":0}]]},\"Check if email exists\":{\"main\":[[{\"node\":\"Postgres1\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Wait1\",\"type\":\"main\",\"index\":0}]]},\"When clicking ‘Test workflow’\":{\"main\":[[{\"node\":\"Read the Database\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "## 🔍 Email Lookup with Google Search from Postgres Database\n\nThis N8N workflow is designed to **enrich seller data** stored in a Postgres database by performing automated **Google search lookups**. It uses **Bright Data's Web Unlocker** to bypass search result restrictions and the **HTML Extract node** to parse and extract relevant information from webpages.\n\nThe main purpose of this workflow is to discover **missing contact details, company domains, and secondary emails** for businesses or sellers based on existing database entries.\n\n* * *\n\n### 🎯 Problem This Workflow Solves\n\nManually searching for missing seller or business details—like secondary emails, websites, or domain names—can be time-consuming and inefficient, especially for large datasets.  \nThis workflow automates the search and data enrichment process, significantly reducing manual effort while improving the quality and completeness of your seller database.\n\n* * *\n\n### ✅ Prerequisites\n\nBefore using this template, make sure the following requirements are met:\n\n  * ✔️ A Bright Data account with access to the **Web Unlocker** or **Amazon Scraper API**\n  * ✔️ A valid Bright Data API key\n  * ✔️ An active **PostgreSQL** database with seller data\n  * ✔️ **N8N self-hosted** instance (recommended for using community nodes like `n8n-nodes-brightdata`)\n  * ✔️ Installed `n8n-nodes-brightdata` package (custom node for Bright Data integration)\n\n\n\n* * *\n\n## ⚙️ Setup Instructions\n\n### Step 1: Prepare Your Postgres Table\n\nCreate a table in Postgres with the following structure (you can adjust field names if needed):\n    \n    \n    CREATE TABLE sellers (\n      seller_id SERIAL PRIMARY KEY,\n      seller_name TEXT,\n      primary_email TEXT,\n      company_info TEXT,\n      trade_name TEXT,\n      business_address TEXT,\n      coc_number TEXT,\n      vat_number TEXT,\n      commercial_register TEXT,\n      secondary_email TEXT,\n      domain TEXT,\n      seller_slug TEXT,\n      source TEXT\n    );\n    \n\n### Step 2: Setup Web Unlocker on Bright Data\n\n  1. Go to your Bright Data dashboard.\n  2. Navigate to **Proxies & Scraping → Web Unlocker**.\n  3. Create a new zone, selecting **Web Unlocker API** under **Scraping Solutions**.\n  4. Whitelist your server IP if required.\n\n\n\n### Step 3: Generate API Key\n\n  1. In the Bright Data dashboard, go to the **API** section.\n  2. Generate a new API key.\n  3. In N8N, create **HTTP Request Credentials** using Bearer Authentication with the API key.\n\n\n\n### Step 4: Install the Bright Data Node in N8N\n\n  1. In your N8N self-hosted instance, go to **Settings → Community Nodes**.\n  2. Search and install `n8n-nodes-brightdata`.\n\n\n\n* * *\n\n## 🔄 Workflow Functionality\n\n  * 🔁 **Trigger** : Can be set to run on a schedule (e.g., daily) or manually.\n  * 📥 **Read** : Fetches seller records from the Postgres table.\n  * 🌐 **Search** : Uses Bright Data to perform a Google search based on `seller_name`, `company_info`, or `trade_name`.\n  * 🧾 **Extract** : Parses the HTML content using the **HTML Extract node** to identify potential websites and email addresses.\n  * 📝 **Update** : Writes enriched data (like `domain` or `secondary_email`) back to the Postgres table.\n\n\n\n* * *\n\n## 💡 Use Cases\n\n  * Lead enrichment for e-commerce sellers\n  * Domain and contact info discovery for B2B databases\n  * Email and web domain verification for CRM systems\n  * Market research automation\n\n\n\n* * *\n\n## 🛠️ Customization Tips\n\n  * You can enhance the parsing logic in the **HTML Extract** node to look for phone numbers, LinkedIn profiles, or social media links.\n  * Modify the search query logic to include additional parameters like `location` or `industry` for more refined results.\n  * Integrate additional APIs (e.g., [Hunter.io](http://Hunter.io), Clearbit) for email validation or social profile enrichment.\n  * Add filtering to skip entries that already have `domain` or `secondary_email`.\n\n\n",
  "crawled_at": "2025-05-26T06:27:47.086406",
  "readme_zh": "## 🔍 基于Postgres数据库的谷歌搜索邮箱查找方案\n\n该N8N工作流专为**数据增强**设计，通过自动化**谷歌搜索查询**来完善Postgres数据库中存储的卖家信息。工作流采用**Bright Data网页解锁器**突破搜索结果限制，并运用**HTML解析节点**从网页中提取关键信息。\n\n核心功能是通过现有数据库条目，自动发现企业或卖家**缺失的联系方式、公司域名及备用邮箱**。\n\n* * *\n\n### 🎯 解决方案定位\n\n人工查找缺失的卖家或企业信息（如备用邮箱、官网、域名）耗时低效，尤其面对海量数据时。  \n本工作流将搜索与数据增强流程自动化，在显著减少人工操作的同时，提升卖家数据库的质量与完整性。\n\n* * *\n\n### ✅ 前置条件\n\n使用本模板前请确保满足以下要求：\n\n  * ✔️ 已开通Bright Data账号并拥有**网页解锁器**或**亚马逊爬虫API**权限\n  * ✔️ 有效的Bright Data API密钥\n  * ✔️ 存有卖家数据的活跃**PostgreSQL**数据库\n  * ✔️ **N8N自主托管**实例（推荐用于安装`n8n-nodes-brightdata`等社区节点）\n  * ✔️ 已安装`n8n-nodes-brightdata`扩展包（Bright Data集成专用节点）\n\n* * *\n\n## ⚙️ 配置指南\n\n### 步骤1：准备Postgres数据表\n\n创建包含以下结构的表（字段名可自定义）：\n    \n    \n    CREATE TABLE sellers (\n      seller_id SERIAL PRIMARY KEY,\n      seller_name TEXT,\n      primary_email TEXT,\n      company_info TEXT,\n      trade_name TEXT,\n      business_address TEXT,\n      coc_number TEXT,\n      vat_number TEXT,\n      commercial_register TEXT,\n      secondary_email TEXT,\n      domain TEXT,\n      seller_slug TEXT,\n      source TEXT\n    );\n\n### 步骤2：配置Bright Data网页解锁器\n\n  1. 登录Bright Data控制台\n  2. 进入**代理与爬虫 → 网页解锁器**\n  3. 创建新区域，在**爬虫解决方案**下选择**网页解锁器API**\n  4. 按需将服务器IP加入白名单\n\n### 步骤3：生成API密钥\n\n  1. 在Bright Data控制台进入**API**模块\n  2. 生成新API密钥\n  3. 在N8N中创建**HTTP请求凭证**，选择Bearer认证并填入API密钥\n\n### 步骤4：安装Bright Data节点\n\n  1. 在N8N自主托管实例中进入**设置 → 社区节点**\n  2. 搜索并安装`n8n-nodes-brightdata`\n\n* * *\n\n## 🔄 工作流机制\n\n  * 🔁 **触发**：支持定时触发（如每日）或手动执行\n  * 📥 **读取**：从Postgres表获取卖家记录\n  * 🌐 **搜索**：基于`seller_name`/`company_info`/`trade_name`通过Bright Data发起谷歌搜索\n  * 🧾 **提取**：使用**HTML解析节点**分析网页内容，识别潜在网站与邮箱\n  * 📝 **更新**：将增强数据（如`domain`或`secondary_email`）回写至Postgres表\n\n* * *\n\n## 💡 应用场景\n\n  * 电商卖家线索增强\n  * B2B数据库域名与联系信息挖掘\n  * CRM系统邮箱及域名验证\n  * 市场调研自动化\n\n* * *\n\n## 🛠️ 定制建议\n\n  * 可在**HTML解析节点**中增强逻辑，提取电话号码、领英资料或社交媒体链接\n  * 调整搜索查询逻辑，加入`地理位置`或`行业`等参数提升结果精准度\n  * 集成Hunter.io、Clearbit等API进行邮箱验证或社交资料增强\n  * 添加过滤规则跳过已含`domain`或`secondary_email`的条目",
  "title_zh": "利用Bright Data与谷歌搜索通过邮箱及域名查询丰富卖家数据",
  "publish_date_zh": "最后更新于2天前",
  "workflow_json_zh": "{\n  \"meta\": {\n    \"instanceId\": \"4e6be3a68285934388a854ac0ffdc5e5500688d5cdb88d0ec2d734e85f097355\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"nodes\": [\n    {\n      \"id\": \"45b55e87-08a0-44e5-a220-5d9110ac364e\",\n      \"name\": \"When clicking ‘Test workflow’\",\n      \"type\": \"n8n-nodes-base.manualTrigger\",\n      \"position\": [\n        -1960,\n        480\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"6daee671-8b07-4101-b57a-5dd7a9966c5e\",\n      \"name\": \"Postgres1\",\n      \"type\": \"n8n-nodes-base.postgres\",\n      \"position\": [\n        3000,\n        480\n      ],\n      \"parameters\": {\n        \"table\": {\n          \"__rl\": true,\n          \"mode\": \"name\",\n          \"value\": \"=seller_data\"\n        },\n        \"schema\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"public\"\n        },\n        \"columns\": {\n          \"value\": {\n            \"seller_id\": \"={{ $('Process by Batch').item.json.seller_id.toNumber() }}\",\n            \"primary_email\": \"={{ $json.data[0].email }}\"\n          },\n          \"schema\": [\n            {\n              \"id\": \"seller_id\",\n              \"type\": \"number\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": true,\n              \"displayName\": \"seller_id\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"seller_name\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"seller_name\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"primary_email\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"primary_email\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"company_info\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"company_info\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"trade_name\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"trade_name\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"business_address\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"business_address\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"coc_number\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"coc_number\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"vat_number\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"vat_number\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"commercial_register\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"commercial_register\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"secondary_email\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"secondary_email\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"domain\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"domain\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"seller_slug\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"seller_slug\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"source\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"source\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            }\n          ],\n          \"mappingMode\": \"defineBelow\",\n          \"matchingColumns\": [\n            \"seller_id\"\n          ],\n          \"attemptToConvertTypes\": false,\n          \"convertFieldsToString\": false\n        },\n        \"options\": {},\n        \"operation\": \"update\"\n      },\n      \"credentials\": {\n        \"postgres\": {\n          \"id\": \"m6FHVVkUrN3xlE35\",\n          \"name\": \"Postgres account\"\n        }\n      },\n      \"typeVersion\": 2.5\n    },\n    {\n      \"id\": \"b79a33a6-3d15-44cf-b043-3e33cdb09cbf\",\n      \"name\": \"Wait\",\n      \"type\": \"n8n-nodes-base.wait\",\n      \"position\": [\n        3620,\n        1300\n      ],\n      \"webhookId\": \"0cbffe1f-700c-4b66-967d-cc85398fc159\",\n      \"parameters\": {},\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"b4e9b540-49f4-48d5-abf9-5008412a86bc\",\n      \"name\": \"Schedule Trigger\",\n      \"type\": \"n8n-nodes-base.scheduleTrigger\",\n      \"position\": [\n        -1960,\n        720\n      ],\n      \"parameters\": {\n        \"rule\": {\n          \"interval\": [\n            {\n              \"field\": \"minutes\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"4847e2e0-8abe-4d10-b04b-85b4ee318c83\",\n      \"name\": \"Postgres2\",\n      \"type\": \"n8n-nodes-base.postgres\",\n      \"position\": [\n        3020,\n        1020\n      ],\n      \"parameters\": {\n        \"table\": {\n          \"__rl\": true,\n          \"mode\": \"name\",\n          \"value\": \"seller_data\"\n        },\n        \"schema\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"public\"\n        },\n        \"columns\": {\n          \"value\": {\n            \"seller_id\": \"={{ $('Switch').item.json.seller_id.toNumber() }}\"\n          },\n          \"schema\": [\n            {\n              \"id\": \"seller_id\",\n              \"type\": \"number\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": true,\n              \"displayName\": \"seller_id\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"seller_name\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"seller_name\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"primary_email\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"primary_email\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"company_info\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"company_info\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"trade_name\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"trade_name\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"business_address\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"business_address\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"coc_number\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"coc_number\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"vat_number\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"vat_number\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"commercial_register\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"commercial_register\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"secondary_email\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"secondary_email\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"domain\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"domain\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"seller_slug\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"seller_slug\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"source\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"source\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            }\n          ],\n          \"mappingMode\": \"defineBelow\",\n          \"matchingColumns\": [\n            \"seller_id\"\n          ],\n          \"attemptToConvertTypes\": false,\n          \"convertFieldsToString\": false\n        },\n        \"options\": {},\n        \"operation\": \"update\"\n      },\n      \"credentials\": {\n        \"postgres\": {\n          \"id\": \"m6FHVVkUrN3xlE35\",\n          \"name\": \"Postgres account\"\n        }\n      },\n      \"typeVersion\": 2.5\n    },\n    {\n      \"id\": \"e513e68c-9fe6-48e9-98c9-fd2787926619\",\n      \"name\": \"Switch\",\n      \"type\": \"n8n-nodes-base.switch\",\n      \"position\": [\n        -680,\n        660\n      ],\n      \"parameters\": {\n        \"rules\": {\n          \"values\": [\n            {\n              \"outputKey\": \"Domain exists\",\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 2,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"operator\": {\n                      \"type\": \"string\",\n                      \"operation\": \"exists\",\n                      \"singleValue\": true\n                    },\n                    \"leftValue\": \"={{ $json.domain }}\",\n                    \"rightValue\": \"\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            },\n            {\n              \"outputKey\": \"No domain but with business address and trade name\",\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 2,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"23e3cde8-3f9e-48d2-8353-b286df20d139\",\n                    \"operator\": {\n                      \"type\": \"boolean\",\n                      \"operation\": \"true\",\n                      \"singleValue\": true\n                    },\n                    \"leftValue\": \"={{ !$json.domain && $json.business_address && $json.trade_name ? true : false }}\",\n                    \"rightValue\": \"=no_domain\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            }\n          ]\n        },\n        \"options\": {\n          \"fallbackOutput\": \"extra\"\n        }\n      },\n      \"typeVersion\": 3.2\n    },\n    {\n      \"id\": \"5fa56857-8607-430d-ac9e-0105f377cfbe\",\n      \"name\": \"Code\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        2320,\n        840\n      ],\n      \"parameters\": {\n        \"mode\": \"runOnceForEachItem\",\n        \"jsCode\": \"function extractWebsiteName(url) {\\n  //const newUrl = url || \\\"\\\"\\n    const mainDomain = url.replace(/^(?:.*\\\\.)?([^\\\\.]+)\\\\.[^\\\\.]+$/, '$1');\\n    console.log(mainDomain);\\n    return mainDomain;\\n}\\n\\nfunction normalizeName(name) {\\n  if (!name) {\\n    return null\\n  }\\n    return name.toLowerCase().replace(/[\\\\s&,.™®]/g, '');\\n}\\n\\nfunction isWebsiteBelongsToCompany(url, sellerName, tradeName) {\\n    const websiteName = extractWebsiteName(url);\\n    console.log(\\\"websiteName: \\\" + websiteName);\\n    if (!websiteName) return false;\\n\\n    const normalizedWebsiteName = websiteName.toLowerCase();\\n    const normalizedSellerName = normalizeName(sellerName);\\n    const normalizedTradeName = normalizeName(tradeName);\\n\\n    return normalizedWebsiteName.includes(normalizedSellerName) || \\n           normalizedWebsiteName.includes(normalizedTradeName) ||\\n           normalizedSellerName.includes(normalizedWebsiteName) ||\\n           normalizedTradeName.includes(normalizedWebsiteName);\\n}\\n\\ntry {\\n\\nconst url1 = $json.first_url;\\nconst sellerName = $json.seller_name;\\nconst tradeName = $json.trade_name;\\n\\nconst belongsToCompany1 = isWebsiteBelongsToCompany(url1, sellerName, tradeName);\\nconsole.log(belongsToCompany1);\\n\\nconst url2 = $json.second_url;\\nconst belongsToCompany2 = isWebsiteBelongsToCompany(url2, sellerName, tradeName);\\nconsole.log(belongsToCompany2);\\n\\nfunction rootDomain(domain) {\\n    return domain.replace(/^(?:www\\\\.)?(?:[^.]+\\\\.)?([^\\\\.]+\\\\.[^\\\\.]+)$/, '$1');\\n}\\n\\nreturn {\\n    rootDomain: belongsToCompany1 ? rootDomain(url1) : belongsToCompany2 ? rootDomain(url2) : null,\\n    first_url: url1,\\n    second_url: url2,\\n    extracted_email: $json.extracted_email,\\n    seller_name: sellerName,\\n    trade_name: tradeName,\\n    seller_slug: $json.seller_slug\\n\\n}\\n\\n    \\n} catch (error) {\\n  return {\\n   rootDomain: null,\\n   first_url: $json.first_url,\\n   second_url: $json.second_url,\\n   extracted_email: $json.extracted_email,\\n   seller_name: $json.seller_name,\\n   trade_name: $json.trade_name,\\n   seller_slug: $json.seller_slug\\n  }\\n}\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"426cf1bc-f5e5-4f59-b727-b8baa5b715bb\",\n      \"name\": \"Postgres3\",\n      \"type\": \"n8n-nodes-base.postgres\",\n      \"position\": [\n        3000,\n        660\n      ],\n      \"parameters\": {\n        \"table\": {\n          \"__rl\": true,\n          \"mode\": \"name\",\n          \"value\": \"=seller_data\"\n        },\n        \"schema\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"public\"\n        },\n        \"columns\": {\n          \"value\": {\n            \"domain\": \"={{ $json.rootDomain }}\",\n            \"seller_id\": \"={{ $('Process by Batch').item.json.seller_id.toNumber() }}\",\n            \"primary_email\": \"={{ $json.extracted_email }}\"\n          },\n          \"schema\": [\n            {\n              \"id\": \"seller_id\",\n              \"type\": \"number\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": true,\n              \"displayName\": \"seller_id\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"seller_name\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"seller_name\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"primary_email\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"primary_email\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"company_info\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"company_info\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"trade_name\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"trade_name\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"business_address\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"business_address\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"coc_number\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"coc_number\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"vat_number\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"vat_number\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"commercial_register\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"commercial_register\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"secondary_email\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"secondary_email\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"domain\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"domain\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"seller_slug\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"seller_slug\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"source\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"source\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            }\n          ],\n          \"mappingMode\": \"defineBelow\",\n          \"matchingColumns\": [\n            \"seller_id\"\n          ],\n          \"attemptToConvertTypes\": false,\n          \"convertFieldsToString\": false\n        },\n        \"options\": {},\n        \"operation\": \"update\"\n      },\n      \"credentials\": {\n        \"postgres\": {\n          \"id\": \"m6FHVVkUrN3xlE35\",\n          \"name\": \"Postgres account\"\n        }\n      },\n      \"typeVersion\": 2.5\n    },\n    {\n      \"id\": \"e399a71c-46d2-4930-89a6-f976987ed3b3\",\n      \"name\": \"Switch1\",\n      \"type\": \"n8n-nodes-base.switch\",\n      \"position\": [\n        2580,\n        840\n      ],\n      \"parameters\": {\n        \"rules\": {\n          \"values\": [\n            {\n              \"outputKey\": \"extracted email matches the first two domains\",\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 2,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"operator\": {\n                      \"type\": \"boolean\",\n                      \"operation\": \"true\",\n                      \"singleValue\": true\n                    },\n                    \"leftValue\": \"={{ $json.extracted_email && $json.rootDomain && $json.extracted_email.includes($json.rootDomain) ? true : false }}\",\n                    \"rightValue\": \"\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            },\n            {\n              \"outputKey\": \"domain does not match with extracted email\",\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 2,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"08bd4bcb-44da-4a2b-9687-8216e24869cc\",\n                    \"operator\": {\n                      \"type\": \"boolean\",\n                      \"operation\": \"true\",\n                      \"singleValue\": true\n                    },\n                    \"leftValue\": \"={{ $json.extracted_email && $json.rootDomain && !$json.extracted_email.includes($json.rootDomain) ? true : false }}\",\n                    \"rightValue\": \"\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            },\n            {\n              \"outputKey\": \"no extracted email but with root domain\",\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 2,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"059ab924-f2e7-4d8f-99c6-c63eb3fd90c7\",\n                    \"operator\": {\n                      \"type\": \"boolean\",\n                      \"operation\": \"true\",\n                      \"singleValue\": true\n                    },\n                    \"leftValue\": \"={{ !$json.extracted_email && $json.rootDomain ? true : false }}\",\n                    \"rightValue\": \"\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            }\n          ]\n        },\n        \"options\": {\n          \"fallbackOutput\": \"extra\"\n        }\n      },\n      \"typeVersion\": 3.2\n    },\n    {\n      \"id\": \"00cfa54d-3776-4564-8a22-d15b27b8effe\",\n      \"name\": \"Postgres4\",\n      \"type\": \"n8n-nodes-base.postgres\",\n      \"position\": [\n        3000,\n        840\n      ],\n      \"parameters\": {\n        \"table\": {\n          \"__rl\": true,\n          \"mode\": \"name\",\n          \"value\": \"seller_data\"\n        },\n        \"schema\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"public\"\n        },\n        \"columns\": {\n          \"value\": {\n            \"domain\": \"={{ $json.rootDomain }}\",\n            \"seller_id\": \"={{ $('Process by Batch').item.json.seller_id.toNumber() }}\"\n          },\n          \"schema\": [\n            {\n              \"id\": \"seller_id\",\n              \"type\": \"number\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": true,\n              \"displayName\": \"seller_id\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"seller_name\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"seller_name\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"primary_email\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"primary_email\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"company_info\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"company_info\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"trade_name\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"trade_name\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"business_address\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"business_address\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"coc_number\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"coc_number\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"vat_number\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"vat_number\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"commercial_register\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"commercial_register\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"secondary_email\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"secondary_email\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"domain\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"domain\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"seller_slug\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"seller_slug\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"source\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"required\": false,\n              \"displayName\": \"source\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            }\n          ],\n          \"mappingMode\": \"defineBelow\",\n          \"matchingColumns\": [\n            \"seller_id\"\n          ],\n          \"attemptToConvertTypes\": false,\n          \"convertFieldsToString\": false\n        },\n        \"options\": {},\n        \"operation\": \"update\"\n      },\n      \"credentials\": {\n        \"postgres\": {\n          \"id\": \"m6FHVVkUrN3xlE35\",\n          \"name\": \"Postgres account\"\n        }\n      },\n      \"typeVersion\": 2.5\n    },\n    {\n      \"id\": \"dbe77304-ba70-49d7-81ee-3afffcae7820\",\n      \"name\": \"Wait1\",\n      \"type\": \"n8n-nodes-base.wait\",\n      \"position\": [\n        420,\n        560\n      ],\n      \"webhookId\": \"20502d1a-b672-4e6d-ac2e-9c5f997ab1dc\",\n      \"parameters\": {\n        \"amount\": 2\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"34d5cbe7-2c3f-4bfd-888b-e0a4f81cd962\",\n      \"name\": \"Edit Fields3\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        1680,\n        720\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"0ba46b0e-093f-480a-8ae7-20f826c643a9\",\n              \"name\": \"first_url\",\n              \"type\": \"string\",\n              \"value\": \"={{ $('HTML1').item.json.element[0].match(/https?:\\\\/\\\\/[^\\\\s/$.?#].[^\\\\s]*/g).filter(item => !item.includes(\\\"google\\\"))[0] }}\"\n            },\n            {\n              \"id\": \"9533866a-04b5-4ef2-82da-98017d6ace77\",\n              \"name\": \"extracted_email\",\n              \"type\": \"string\",\n              \"value\": \"={{ $('HTML1').item.json.element.join().match(/[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\\\.[a-zA-Z]{2,}/)[0] }}\"\n            },\n            {\n              \"id\": \"fd0f8699-772a-4525-8122-68a7ed27f2db\",\n              \"name\": \"second_url\",\n              \"type\": \"string\",\n              \"value\": \"={{ $('HTML1').item.json.element[1].match(/https?:\\\\/\\\\/[^\\\\s/$.?#].[^\\\\s]*/g).filter(item => !item.includes(\\\"google\\\"))[0] }}\"\n            },\n            {\n              \"id\": \"b3e2f080-1174-4f61-a258-86b7f5c468e1\",\n              \"name\": \"seller_name\",\n              \"type\": \"string\",\n              \"value\": \"={{ $('Switch').item.json.seller_name }}\"\n            },\n            {\n              \"id\": \"d990a86d-ecef-469b-b344-771956093011\",\n              \"name\": \"trade_name\",\n              \"type\": \"string\",\n              \"value\": \"={{ $('Switch').item.json.trade_name }}\"\n            },\n            {\n              \"id\": \"37c43cb0-cb53-4098-9074-ea228b71d820\",\n              \"name\": \"seller_slug\",\n              \"type\": \"string\",\n              \"value\": \"={{ $('Switch').item.json.seller_slug }}\"\n            },\n            {\n              \"id\": \"194e5535-399b-4cb1-8935-361eedf1f983\",\n              \"name\": \"rootDomain\",\n              \"type\": \"string\",\n              \"value\": \"={{ $('HTML1').item.json.element[0].match(/https?:\\\\/\\\\/[^\\\\s/$.?#].[^\\\\s]*/g).filter(item => !item.includes(\\\"google\\\"))[0].extractDomain() }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"759cac41-3a78-499d-b529-8ae6f4bb51ea\",\n      \"name\": \"Process by Batch\",\n      \"type\": \"n8n-nodes-base.splitInBatches\",\n      \"position\": [\n        -960,\n        640\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"batchSize\": 5\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"2a432d7a-cbe8-4334-b8c2-febfe5696c83\",\n      \"name\": \"BrightData\",\n      \"type\": \"n8n-nodes-brightdata.brightData\",\n      \"position\": [\n        -120,\n        240\n      ],\n      \"parameters\": {\n        \"url\": \"=https://www.google.com/search?q={{ $json.domain }}+email\",\n        \"zone\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"web_unlocker1\",\n          \"cachedResultName\": \"web_unlocker1\"\n        },\n        \"format\": \"json\",\n        \"country\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"us\"\n        },\n        \"requestOptions\": {}\n      },\n      \"credentials\": {\n        \"brightdataApi\": {\n          \"id\": \"DQaiy0yJ0lNutzIl\",\n          \"name\": \"BrightData account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"db49e284-72b4-41b7-8ca1-96335c46e11f\",\n      \"name\": \"BrightData1\",\n      \"type\": \"n8n-nodes-brightdata.brightData\",\n      \"position\": [\n        800,\n        720\n      ],\n      \"parameters\": {\n        \"url\": \"=https://www.google.com/search?q=email+{{ encodeURIComponent($('Switch').item.json.trade_name || $('Switch').item.json.seller_name) }}+{{ encodeURIComponent($('Switch').item.json.business_address) }}\",\n        \"zone\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"web_unlocker1\",\n          \"cachedResultName\": \"web_unlocker1\"\n        },\n        \"format\": \"json\",\n        \"country\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"us\"\n        },\n        \"requestOptions\": {}\n      },\n      \"credentials\": {\n        \"brightdataApi\": {\n          \"id\": \"DQaiy0yJ0lNutzIl\",\n          \"name\": \"BrightData account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"312ff218-353d-4d2c-a7e4-6a2bc133f828\",\n      \"name\": \"HTML\",\n      \"type\": \"n8n-nodes-base.html\",\n      \"position\": [\n        40,\n        240\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"operation\": \"extractHtmlContent\",\n        \"dataPropertyName\": \"body\",\n        \"extractionValues\": {\n          \"values\": [\n            {\n              \"key\": \"element\",\n              \"cssSelector\": \"div[jscontroller] .N54PNb\",\n              \"returnArray\": true,\n              \"skipSelectors\": \"img\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"e1ec0679-fde7-4a62-b162-dc3a6be50b8e\",\n      \"name\": \"HTML1\",\n      \"type\": \"n8n-nodes-base.html\",\n      \"position\": [\n        980,\n        720\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"operation\": \"extractHtmlContent\",\n        \"dataPropertyName\": \"body\",\n        \"extractionValues\": {\n          \"values\": [\n            {\n              \"key\": \"element\",\n              \"cssSelector\": \"div[jscontroller] .N54PNb\",\n              \"returnArray\": true,\n              \"skipSelectors\": \"img\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"ea68bca8-7f10-49d3-a14d-e46cc4c793ba\",\n      \"name\": \"Split Out\",\n      \"type\": \"n8n-nodes-base.splitOut\",\n      \"position\": [\n        360,\n        240\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"destinationFieldName\": \"email\"\n        },\n        \"fieldToSplitOut\": \"emails\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"02b202cd-1a45-49a5-997a-35a692598f02\",\n      \"name\": \"Filter\",\n      \"type\": \"n8n-nodes-base.filter\",\n      \"position\": [\n        500,\n        240\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"a07e75fc-522c-4861-a842-cf880c398a44\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"contains\"\n              },\n              \"leftValue\": \"={{ $json.email }}\",\n              \"rightValue\": \"={{ $('Process by Batch').item.json.domain.replace(/^(?:www\\\\.)?(?:[^.]+\\\\.)?([^\\\\.]+\\\\.[^\\\\.]+)$/, '$1').toLowerCase() }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2,\n      \"alwaysOutputData\": true\n    },\n    {\n      \"id\": \"f15a901a-5225-4450-949b-6fb5769c6564\",\n      \"name\": \"Aggregate\",\n      \"type\": \"n8n-nodes-base.aggregate\",\n      \"position\": [\n        660,\n        240\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"aggregate\": \"aggregateAllItemData\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"a403ff04-ed4e-43f4-abd6-261173b7d63d\",\n      \"name\": \"Code2\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        1140,\n        720\n      ],\n      \"parameters\": {\n        \"mode\": \"runOnceForEachItem\",\n        \"jsCode\": \"function extractEmails(text) {\\n    // Regular expression to match most common email patterns\\n    const emailRegex = /[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\\\.[a-zA-Z]{2,}/g;\\n    // matchAll returns an iterator so we spread it into an array\\n    const matches = [...text.matchAll(emailRegex)];\\n    return matches.map(match => decodeURI(match[0]).trim());\\n}\\n\\n\\nconst sampleText = $json.element.join();\\nconst emails = extractEmails(sampleText);\\nconsole.log(emails);  // Expected: [ 'sales@example.com', 'support@example.org', 'info@example.co.uk' ]\\nreturn {emails}\\n\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"4fd9ec2d-14e4-4765-bdad-1e33dd93d8c1\",\n      \"name\": \"Split Out1\",\n      \"type\": \"n8n-nodes-base.splitOut\",\n      \"position\": [\n        1280,\n        720\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"destinationFieldName\": \"email\"\n        },\n        \"fieldToSplitOut\": \"emails\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"69e9a05d-9b30-409e-a94b-888828aa5dc1\",\n      \"name\": \"Filter1\",\n      \"type\": \"n8n-nodes-base.filter\",\n      \"position\": [\n        1400,\n        720\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"a07e75fc-522c-4861-a842-cf880c398a44\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"contains\"\n              },\n              \"leftValue\": \"={{ $json.email }}\",\n              \"rightValue\": \"={{ $('Process by Batch').item.json.domain.replace(/^(?:www\\\\.)?(?:[^.]+\\\\.)?([^\\\\.]+\\\\.[^\\\\.]+)$/, '$1').toLowerCase() }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2,\n      \"alwaysOutputData\": true\n    },\n    {\n      \"id\": \"a317567a-1d69-41b8-bab1-f656627381e4\",\n      \"name\": \"If2\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        1900,\n        720\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"bcb1a1ee-0720-4cbd-ae3c-cb4ebca5acfa\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"exists\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $json.data[0]?.email }}\",\n              \"rightValue\": 0\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"6ec5cc13-8e67-43a7-bec3-81b8ba8121b7\",\n      \"name\": \"Aggregate1\",\n      \"type\": \"n8n-nodes-base.aggregate\",\n      \"position\": [\n        1540,\n        720\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"aggregate\": \"aggregateAllItemData\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"3f62b698-1948-45cf-bf70-467dd36e7c81\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -160,\n        40\n      ],\n      \"parameters\": {\n        \"width\": 1000,\n        \"height\": 460,\n        \"content\": \"## 使用Bright Data在Google中搜索域名+邮箱  \\n若域名存在，则使用搜索查询“{{$json.domain}}+email”。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"30aa345b-90d1-4012-a3ba-81194ad676a1\",\n      \"name\": \"Check if email exists\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        920,\n        240\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"bcb1a1ee-0720-4cbd-ae3c-cb4ebca5acfa\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"exists\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $json.data[0]?.email }}\",\n              \"rightValue\": 0\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"4da7a7a8-3eca-4f20-af2f-9fc0baf9b9b0\",\n      \"name\": \"Extract Emails\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        200,\n        240\n      ],\n      \"parameters\": {\n        \"mode\": \"runOnceForEachItem\",\n        \"jsCode\": \"function extractEmails(text) {\\n    // Regular expression to match most common email patterns\\n    const emailRegex = /[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\\\.[a-zA-Z]{2,}/g;\\n    // matchAll returns an iterator so we spread it into an array\\n    const matches = [...text.matchAll(emailRegex)];\\n    return matches.map(match => decodeURI(match[0]).trim());\\n}\\n\\n\\nconst sampleText = $json.element.join();\\nconst emails = extractEmails(sampleText);\\nconsole.log(emails);  // Expected: [ 'sales@example.com', 'support@example.org', 'info@example.co.uk' ]\\nreturn {emails}\\n\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"43557ff1-642c-41b3-b6e9-cfc5de650428\",\n      \"name\": \"Read the Database\",\n      \"type\": \"n8n-nodes-base.postgres\",\n      \"position\": [\n        -1280,\n        640\n      ],\n      \"parameters\": {\n        \"sort\": {\n          \"values\": [\n            {\n              \"column\": \"seller_id\"\n            }\n          ]\n        },\n        \"limit\": 60,\n        \"table\": {\n          \"__rl\": true,\n          \"mode\": \"name\",\n          \"value\": \"seller_data\"\n        },\n        \"where\": {\n          \"values\": [\n            {\n              \"column\": \"primary_email\",\n              \"condition\": \"IS NULL\"\n            }\n          ]\n        },\n        \"schema\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"public\"\n        },\n        \"options\": {},\n        \"operation\": \"select\"\n      },\n      \"credentials\": {\n        \"postgres\": {\n          \"id\": \"m6FHVVkUrN3xlE35\",\n          \"name\": \"Postgres account\"\n        }\n      },\n      \"typeVersion\": 2.5\n    },\n    {\n      \"id\": \"5ae7d1e1-c626-4553-85c0-07c5f3ea96c6\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        720,\n        560\n      ],\n      \"parameters\": {\n        \"width\": 1140,\n        \"height\": 460,\n        \"content\": \"## 使用Bright Data在Google中搜索卖家名称+地址+邮箱  \\n若域名存在，使用搜索查询“{{$json.seller_name}}+{{ $json.seller_address }}+email”。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"7dfb9013-7c0e-43d0-ba44-afb02ed0834e\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        2240,\n        340\n      ],\n      \"parameters\": {\n        \"width\": 980,\n        \"height\": 960,\n        \"content\": \"## 清理数据并保存到Postgres数据库\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"2034fa79-9c65-4cd8-9b74-f9f9301310f5\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -1340,\n        460\n      ],\n      \"parameters\": {\n        \"width\": 960,\n        \"height\": 540,\n        \"content\": \"## 读取并遍历数据库\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"If2\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Postgres1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Code\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Code\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Switch1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"HTML\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Extract Emails\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Wait\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Process by Batch\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Code2\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Split Out1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"HTML1\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Code2\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Wait1\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"BrightData1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Filter\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Aggregate\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Switch\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"BrightData\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"BrightData1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Postgres2\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Filter1\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Aggregate1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Switch1\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Postgres3\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Postgres4\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Postgres4\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Postgres2\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Aggregate\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Check if email exists\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Postgres1\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Wait\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Postgres2\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Wait\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Postgres3\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Wait\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Postgres4\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Wait\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Split Out\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Filter\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Aggregate1\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Edit Fields3\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"BrightData\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"HTML\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Split Out1\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Filter1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"BrightData1\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"HTML1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Edit Fields3\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"If2\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Extract Emails\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Split Out\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Process by Batch\": {\n      \"main\": [\n        [],\n        [\n          {\n            \"node\": \"Switch\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Schedule Trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Read the Database\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Read the Database\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Process by Batch\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Check if email exists\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Postgres1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Wait1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When clicking ‘Test workflow’\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Read the Database\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}