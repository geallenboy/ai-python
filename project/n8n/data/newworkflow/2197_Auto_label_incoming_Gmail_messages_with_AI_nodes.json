{
  "url": "https://n8n.io/workflows/2197-auto-label-incoming-gmail-messages-with-ai-nodes/",
  "title": "Auto-label incoming Gmail messages with AI nodes",
  "author": "Oskar",
  "publish_date": "Last update a month ago",
  "publish_date_absolute": "",
  "categories": [
    {
      "name": "AI"
    }
  ],
  "workflow_json": "{\"meta\":{\"instanceId\":\"d17dadc75de867b08b7744d7ba00e531e75580e2dec35d52f2d34e58481e1fb7\",\"templateCredsSetupCompleted\":true},\"nodes\":[{\"id\":\"814e3849-1ae1-4124-bdfc-b72017e9d7c2\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[0,0],\"parameters\":{\"color\":4,\"width\":420.4803040774015,\"height\":240.57943708322733,\"content\":\"## Add AI labels to Gmail messages\\nWith this workflow you can automatically set labels for your Gmail message according to its content. \\n\\nIn this workflow available are 3 labels: \\\"Partnership\\\", \\\"Inquiry\\\" and \\\"Notification\\\". Feel free to adjust labels according to your needs. \\n\\n**Please remember to set label names both in your Gmail account and workflow.**\"},\"typeVersion\":1},{\"id\":\"e83fa311-b5ba-427e-a98e-573394b882dd\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[0,260],\"parameters\":{\"width\":421.0932411886662,\"height\":257.42916378714597,\"content\":\"## ⚠️ Note\\n\\n1. Complete video guide for this workflow is available [on my YouTube](https://youtu.be/a8Dhj3Zh9vQ). \\n2. Remember to add your credentials and configure nodes (covered in the video guide).\\n3. If you like this workflow, please subscribe to [my YouTube channel](https://www.youtube.com/@workfloows) and/or [my newsletter](https://workfloows.com/).\\n\\n**Thank you for your support!**\"},\"typeVersion\":1},{\"id\":\"4c20d029-750f-476b-9348-6e250ea64d52\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[440,0],\"parameters\":{\"width\":238.4602598584674,\"height\":348.5873725349161,\"content\":\"### Gmail Trigger\\nReceive data from Gmail about new incoming message. \\n\\n⚠️ Set polling interval according to your needs.\"},\"typeVersion\":1},{\"id\":\"22923079-80ce-4495-b0f0-da7122195c56\",\"name\":\"Sticky Note4\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1160,380],\"parameters\":{\"width\":241.53974014153226,\"height\":319.3323098457962,\"content\":\"###\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n### JSON schema\\nEdit JSON schema and label names according to your needs.\\n\\n⚠️ **Label names in system prompt and JSON schema should be the same.**\"},\"typeVersion\":1},{\"id\":\"40735a58-daaa-43ac-9658-706c3cf0cbba\",\"name\":\"Sticky Note5\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1900,20],\"parameters\":{\"width\":226.14233872620645,\"height\":347.0476323933831,\"content\":\"### Merge labels\\nCombine labels retrieved from Gmail account and assigned by AI together.\"},\"typeVersion\":1},{\"id\":\"87e0f9e2-a2ff-46cf-896a-138b1bde2d0e\",\"name\":\"Sticky Note6\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[2160,20],\"parameters\":{\"width\":452.48413953150185,\"height\":347.0476323933831,\"content\":\"### Aggregarte labels and add to message\\nCreate array of label IDs and add to the desired email message in Gmail.\"},\"typeVersion\":1},{\"id\":\"1d533664-e5e8-4dc8-afac-bfc5996e4bf9\",\"name\":\"Sticky Note7\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[700,0],\"parameters\":{\"width\":238.4602598584674,\"height\":348.5873725349161,\"content\":\"### Get message content\\nBased on Gmail message ID retrieve body content of the email and pass it to AI chain.\"},\"typeVersion\":1},{\"id\":\"e613ca64-50ae-4d7c-b0fc-15812dadcd68\",\"name\":\"Sticky Note8\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[960,0],\"parameters\":{\"width\":378.57661273793565,\"height\":348.5873725349161,\"content\":\"### Assign labels\\nLet the AI decide which labels suit the best content of the message.\\n\\n⚠️ **Remember to edit system prompt** - modify label names and instructions according to your needs.\"},\"typeVersion\":1},{\"id\":\"a2005e70-6774-45ce-b9c6-742786f49964\",\"name\":\"Gmail trigger\",\"type\":\"n8n-nodes-base.gmailTrigger\",\"position\":[500,180],\"parameters\":{\"simple\":false,\"filters\":{},\"options\":{},\"pollTimes\":{\"item\":[{\"mode\":\"everyMinute\"}]}},\"credentials\":{\"gmailOAuth2\":{\"id\":\"SPECSn66s6QHmld9\",\"name\":\"Gmail account\"}},\"typeVersion\":1.2},{\"id\":\"4b6f7d21-6155-42b7-93ff-2f530df3692f\",\"name\":\"Get message content\",\"type\":\"n8n-nodes-base.gmail\",\"position\":[760,180],\"webhookId\":\"b773894c-18c6-454d-9271-6de10be1b7c4\",\"parameters\":{\"messageId\":\"={{ $json.id }}\",\"operation\":\"get\"},\"credentials\":{\"gmailOAuth2\":{\"id\":\"SPECSn66s6QHmld9\",\"name\":\"Gmail account\"}},\"typeVersion\":2.1},{\"id\":\"ad577660-d9f4-4031-ad16-7021a02bb18e\",\"name\":\"Assign labels for message\",\"type\":\"@n8n/n8n-nodes-langchain.chainLlm\",\"position\":[1020,180],\"parameters\":{\"text\":\"={{ $('Gmail trigger').item.json.text }}\",\"promptType\":\"define\",\"hasOutputParser\":true},\"typeVersion\":1.5},{\"id\":\"1e11d30f-4c73-4fd0-a365-aeb43bee4252\",\"name\":\"OpenAI Chat\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\"position\":[1000,400],\"parameters\":{\"model\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"gpt-4o-mini\"},\"options\":{}},\"credentials\":{\"openAiApi\":{\"id\":\"PrK67ozsBFqSIYG9\",\"name\":\"OpenAi account\"}},\"typeVersion\":1.2},{\"id\":\"4a504b64-fb28-44fb-a80a-6f5e5c5a1949\",\"name\":\"JSON Parser\",\"type\":\"@n8n/n8n-nodes-langchain.outputParserStructured\",\"position\":[1240,400],\"parameters\":{\"schemaType\":\"manual\",\"inputSchema\":\"{\\n  \\\"type\\\": \\\"object\\\",\\n  \\\"properties\\\": {\\n    \\\"labels\\\": {\\n      \\\"type\\\": \\\"array\\\",\\n      \\\"items\\\": {\\n        \\\"type\\\": \\\"string\\\",\\n        \\\"enum\\\": [\\\"Inquiry\\\", \\\"Partnership\\\", \\\"Notification\\\"]\\n      }\\n    }\\n  },\\n  \\\"required\\\": [\\\"labels\\\"]\\n}\"},\"typeVersion\":1.2},{\"id\":\"f5ac1b01-0980-4ee4-b4f5-5057258eab70\",\"name\":\"Set label values\",\"type\":\"n8n-nodes-base.set\",\"position\":[1400,180],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"72d11a72-6693-447c-b7ca-4ba1a3579075\",\"name\":\"labels\",\"type\":\"array\",\"value\":\"={{ $json.output.labels }}\"}]}},\"typeVersion\":3.4},{\"id\":\"e368e343-728e-4e2f-a37f-5e203000d090\",\"name\":\"Get all labels\",\"type\":\"n8n-nodes-base.gmail\",\"position\":[1680,60],\"webhookId\":\"dec6f574-f47c-4b5d-86b9-2b0f6c957145\",\"parameters\":{\"resource\":\"label\",\"returnAll\":true},\"credentials\":{\"gmailOAuth2\":{\"id\":\"SPECSn66s6QHmld9\",\"name\":\"Gmail account\"}},\"typeVersion\":2.1},{\"id\":\"48ce8351-5d04-4697-b68d-bb84286e0b2b\",\"name\":\"Split out assigned labels\",\"type\":\"n8n-nodes-base.splitOut\",\"position\":[1680,280],\"parameters\":{\"options\":{},\"fieldToSplitOut\":\"labels\"},\"typeVersion\":1},{\"id\":\"cc1aa3ac-7427-4761-aacd-caf16c64d7fb\",\"name\":\"Merge corresponding labels\",\"type\":\"n8n-nodes-base.merge\",\"position\":[1960,180],\"parameters\":{\"mode\":\"combine\",\"options\":{},\"advanced\":true,\"mergeByFields\":{\"values\":[{\"field1\":\"name\",\"field2\":\"labels\"}]}},\"typeVersion\":3.1},{\"id\":\"97fefda6-5936-42a7-a30a-8de4149aa445\",\"name\":\"Aggregate label IDs\",\"type\":\"n8n-nodes-base.aggregate\",\"position\":[2220,180],\"parameters\":{\"options\":{},\"fieldsToAggregate\":{\"fieldToAggregate\":[{\"fieldToAggregate\":\"id\"}]}},\"typeVersion\":1},{\"id\":\"7befd422-7243-43af-9b34-21c05a069013\",\"name\":\"Add labels to message\",\"type\":\"n8n-nodes-base.gmail\",\"position\":[2440,180],\"webhookId\":\"4f345fc9-2afd-478b-be3b-d3d28f0fbc82\",\"parameters\":{\"labelIds\":\"={{ $json.id }}\",\"messageId\":\"={{ $('Gmail trigger').item.json[\\\"id\\\"] }}\",\"operation\":\"addLabels\"},\"credentials\":{\"gmailOAuth2\":{\"id\":\"SPECSn66s6QHmld9\",\"name\":\"Gmail account\"}},\"typeVersion\":2.1}],\"pinData\":{\"Gmail trigger\":[{\"id\":\"1962eb5ee3119d76\",\"to\":{\"html\":\"<span class=\\\"mp_address_group\\\"><span class=\\\"mp_address_name\\\">Workfloows Tutorial</span> &lt;<a href=\\\"mailto:workfloowstutorial@gmail.com\\\" class=\\\"mp_address_email\\\">workfloowstutorial@gmail.com</a>&gt;</span>\",\"text\":\"\\\"Workfloows Tutorial\\\" <workfloowstutorial@gmail.com>\",\"value\":[{\"name\":\"Workfloows Tutorial\",\"address\":\"workfloowstutorial@gmail.com\"}]},\"date\":\"2025-04-13T10:33:05.000Z\",\"from\":{\"html\":\"<span class=\\\"mp_address_group\\\"><span class=\\\"mp_address_name\\\">Workfloows</span> &lt;<a href=\\\"mailto:workfloows@gmail.com\\\" class=\\\"mp_address_email\\\">workfloows@gmail.com</a>&gt;</span>\",\"text\":\"\\\"Workfloows\\\" <workfloows@gmail.com>\",\"value\":[{\"name\":\"Workfloows\",\"address\":\"workfloows@gmail.com\"}]},\"html\":\"<div dir=\\\"ltr\\\">Hey! <div><br></div><div>We&#39;d love to cooperate with you - could you please send us your offer? </div><div><br></div><div>Best,</div><div>Oskar</div></div>\\n\",\"text\":\"Hey!\\n\\nWe'd love to cooperate with you - could you please send us your offer?\\n\\nBest,\\nOskar\\n\",\"headers\":{\"to\":\"To: Workfloows Tutorial <workfloowstutorial@gmail.com>\",\"date\":\"Date: Sun, 13 Apr 2025 12:33:05 +0200\",\"from\":\"From: Workfloows <workfloows@gmail.com>\",\"subject\":\"Subject: Inquiry for cooperation\",\"x-gm-gg\":\"X-Gm-Gg: ASbGncsLoGTllITLV/hYh7p2Re1X0A4Fd5a1uQb58nQ1FCzXrvjCL9BY2H/6U4fN3wn\\r\\n\\tFkTSzNo0PUVLScNsBjkkOdwaqHhHLT+UzxaAtr8LpnucVTxhWbI08sl8lxjJUsHJwsJwIpSaAqX\\r\\n\\tkKKBKUewdQhcwJNh4P22vOalA=\",\"arc-seal\":\"ARC-Seal: i=1; a=rsa-sha256; t=1744540397; cv=none;\\r\\n        d=google.com; s=arc-20240605;\\r\\n        b=BWNyT3FtnssueCPH4di13k++uCiJsB73BRfuQ63N0/+fUQqAvkZRMdN4cZiSCXpLph\\r\\n         +ag3l4hgkp9yuE66MQjv18vWzMaUsmaj5obHWe+6x6YcPkMRW/y+gNitCD+mftpYsQpz\\r\\n         nQpkoyZaY3h9o9vmcUUmOPWCWrUysy8y8sOOhht7Tmekzs3tQj+aLyXJNv+j9SCwvsTE\\r\\n         yd5uisDlrWv1zfpdUZLwNKZuCP+Jtfr01w3QT/zhBCweOccIJaFzfO4s97q8JgUgRrmx\\r\\n         JkrsGpSWJZKWPDh44mkmHH+bw43omIJKXYTHN9nOO3vGyqBWdGYlE0T9ZhCetHHyBbpS\\r\\n         b+Mw==\",\"received\":\"Received: from mail-sor-f41.google.com (mail-sor-f41.google.com. [209.85.220.41])\\r\\n        by mx.google.com with SMTPS id 2adb3069b0e04-54c455e2176sor1769457e87.11.2025.04.13.03.33.17\\r\\n        for <workfloowstutorial@gmail.com>\\r\\n        (Google Transport Security);\\r\\n        Sun, 13 Apr 2025 03:33:17 -0700 (PDT)\",\"message-id\":\"Message-ID: <CA+sg_9eV=X+LusGnDSP8pDrrYZ8SLn2Maq4CYpLrg=uG=7T7DQ@mail.gmail.com>\",\"x-received\":\"X-Received: by 2002:a2e:bd88:0:b0:30d:629c:4333 with SMTP id\\r\\n 38308e7fff4ca-31049aacf9dmr29831171fa.34.1744540396464; Sun, 13 Apr 2025\\r\\n 03:33:16 -0700 (PDT)\",\"return-path\":\"Return-Path: <workfloows@gmail.com>\",\"content-type\":\"Content-Type: multipart/alternative; boundary=\\\"000000000000a0b4660632a67692\\\"\",\"delivered-to\":\"Delivered-To: workfloowstutorial@gmail.com\",\"mime-version\":\"MIME-Version: 1.0\",\"received-spf\":\"Received-SPF: pass (google.com: domain of workfloows@gmail.com designates 209.85.220.41 as permitted sender) client-ip=209.85.220.41;\",\"x-gm-features\":\"X-Gm-Features: ATxdqUEDRqHsd35x8e-h-zd4BcGaOVs83Rpm-BRaGlzjaiGxZMiGfgHEjxn3hNE\",\"dkim-signature\":\"DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;\\r\\n        d=gmail.com; s=20230601; t=1744540397; x=1745145197; dara=google.com;\\r\\n        h=to:subject:message-id:date:from:mime-version:from:to:cc:subject\\r\\n         :date:message-id:reply-to;\\r\\n        bh=yhyki7Kf5bQNf/8oq2uNTa/y/MoSnhI+j3ZqeBT892s=;\\r\\n        b=Njlov8RLGs/rZIz07rSJIfn8oQDEXgybU4mJ0ujD8T8m7J4NabveIhdobrrHraaZqN\\r\\n         iwOZHBn0TTWAbuccHjfU+BBB8FvJ4/jfCXKbWSwPIWHd53P1wuTxvXYgbkXX4A/W675L\\r\\n         zPSVraK4W1heQDTViCc2MmV5+tH6pbe/52xTOwvx8Xf0WTN1Ku3K/DY8EIsnd0OKdrEn\\r\\n         ml+/LHhVMmwR5lZtte7mTlYi/c5FG8XO95Nh/Ftl22RpuKl1QPFUdJcx+bEVeUh62uHM\\r\\n         Bd8pyi0y/LVKIqNtL/DIvpt2+bt9TLm7MB2P61KMUAP75qZCparl2MWLR62c8tW7cFqm\\r\\n         wPHA==\",\"x-gm-message-state\":\"X-Gm-Message-State: AOJu0YzGNl9So86XWoTm+y0PO71OilI6ljQ/cHqUDKwYpIrbLMy8ZiCe\\r\\n\\ty2NKHmx051OaBkuEbe2bQD3dl78xO6sJPWWrTXUn1mV9b52v6vaQsLXXkQWx5cKuaw9spNE1dpU\\r\\n\\tzsVB7chkTKdZ5HO31p29RiSug2SJ0AZXS\",\"x-google-smtp-source\":\"X-Google-Smtp-Source: AGHT+IF6PTdq6zPXbZy1CEUmKyNDSavbnDjbcWp5Y3hfiFlZruW8yABRwE9q5LKSffpes/dVbAryLGt6F27ROQMhWMg=\",\"arc-message-signature\":\"ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20240605;\\r\\n        h=to:subject:message-id:date:from:mime-version:dkim-signature;\\r\\n        bh=yhyki7Kf5bQNf/8oq2uNTa/y/MoSnhI+j3ZqeBT892s=;\\r\\n        fh=fBYbxd7sNeSi3dX3VeF2+nxOJZdPrQsXgdNq9LWGYGE=;\\r\\n        b=V70ViYZcIyYaZCIMeEXNv4R6X5fkIYJxel9I6iHuCI2RJLc824inbFBL3Enb/JD8yt\\r\\n         Sk1iK/RGh+PYMU1FAHeq/uUri2PG1Z9RZc7e7jjLil/nCWpYF91AhFEZE8B7kl5uWKZb\\r\\n         qA4ASGlYUTJwjoWMpJle0uvlOBksdXIb2Zb5K6kyHe4zlqhHeM6ySiJLEu7bj/eS5TYg\\r\\n         vnmoySAYAsLH5T/08gj6OwaBWcmqhfMVO8adMkIZe1VZQqC9nKVJJis0I3Hsl9UwhicB\\r\\n         VDSvEH/KsHrDDqPkSMDHykv1NzBK9cPgQ8cAG4QdgSd3zuEp5uJkxXNycF1NN1cZwRfZ\\r\\n         eC2A==;\\r\\n        dara=google.com\",\"authentication-results\":\"Authentication-Results: mx.google.com;\\r\\n       dkim=pass header.i=@gmail.com header.s=20230601 header.b=Njlov8RL;\\r\\n       spf=pass (google.com: domain of workfloows@gmail.com designates 209.85.220.41 as permitted sender) smtp.mailfrom=workfloows@gmail.com;\\r\\n       dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com;\\r\\n       dara=pass header.i=@gmail.com\",\"x-google-dkim-signature\":\"X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;\\r\\n        d=1e100.net; s=20230601; t=1744540397; x=1745145197;\\r\\n        h=to:subject:message-id:date:from:mime-version:x-gm-message-state\\r\\n         :from:to:cc:subject:date:message-id:reply-to;\\r\\n        bh=yhyki7Kf5bQNf/8oq2uNTa/y/MoSnhI+j3ZqeBT892s=;\\r\\n        b=o2krTN0ebufVGn92FP/xtW+t8OQ46Jc9sSrWVXrWihY1hBM7C9fEwuF9svkxx3SB8B\\r\\n         m8qZVS5TIDCv+JkZKK9jpHw3cD09s/YSr7aPP5bAWibx5UhB1/Ki7Kn0hdgt90LS2Kob\\r\\n         jr7CP8QrrWfftq7zutBxaVoCdBtTrod/TJKDxDr1b3vFaoN/XxGnUeqj8EoAbdTDf859\\r\\n         5hmRQUODpJaybi3MDmBzStjIh9rlUBLkt4csANAuUZWX1/b28+HAiT7AOdq9ksbROpgi\\r\\n         h5LedT5dMXPYU6yU0lQ6kk14R6eX6tHQN3AV5I1kCOaaeArC7NvUK5o8mUH2QDKZgWIe\\r\\n         DR5A==\",\"arc-authentication-results\":\"ARC-Authentication-Results: i=1; mx.google.com;\\r\\n       dkim=pass header.i=@gmail.com header.s=20230601 header.b=Njlov8RL;\\r\\n       spf=pass (google.com: domain of workfloows@gmail.com designates 209.85.220.41 as permitted sender) smtp.mailfrom=workfloows@gmail.com;\\r\\n       dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com;\\r\\n       dara=pass header.i=@gmail.com\"},\"subject\":\"Inquiry for cooperation\",\"labelIds\":[\"UNREAD\",\"IMPORTANT\",\"CATEGORY_PERSONAL\",\"INBOX\"],\"threadId\":\"1962eb5ee3119d76\",\"messageId\":\"<CA+sg_9eV=X+LusGnDSP8pDrrYZ8SLn2Maq4CYpLrg=uG=7T7DQ@mail.gmail.com>\",\"textAsHtml\":\"<p>Hey!</p><p>We&apos;d love to cooperate with you - could you please send us your offer?</p><p>Best,<br/>Oskar</p>\",\"sizeEstimate\":5849}]},\"connections\":{\"JSON Parser\":{\"ai_outputParser\":[[{\"node\":\"Assign labels for message\",\"type\":\"ai_outputParser\",\"index\":0}]]},\"OpenAI Chat\":{\"ai_languageModel\":[[{\"node\":\"Assign labels for message\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"Gmail trigger\":{\"main\":[[{\"node\":\"Get message content\",\"type\":\"main\",\"index\":0}]]},\"Get all labels\":{\"main\":[[{\"node\":\"Merge corresponding labels\",\"type\":\"main\",\"index\":0}]]},\"Set label values\":{\"main\":[[{\"node\":\"Get all labels\",\"type\":\"main\",\"index\":0},{\"node\":\"Split out assigned labels\",\"type\":\"main\",\"index\":0}]]},\"Aggregate label IDs\":{\"main\":[[{\"node\":\"Add labels to message\",\"type\":\"main\",\"index\":0}]]},\"Get message content\":{\"main\":[[{\"node\":\"Assign labels for message\",\"type\":\"main\",\"index\":0}]]},\"Assign labels for message\":{\"main\":[[{\"node\":\"Set label values\",\"type\":\"main\",\"index\":0}]]},\"Split out assigned labels\":{\"main\":[[{\"node\":\"Merge corresponding labels\",\"type\":\"main\",\"index\":1}]]},\"Merge corresponding labels\":{\"main\":[[{\"node\":\"Aggregate label IDs\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "This workflow uses AI to analyze the content of every new message in Gmail and then assigns specific labels, according to the context of the email.\n\nDefault configuration of the workflow includes 3 labels:\n\n  * „Partnership” - email about sponsored content or cooperation,\n  * „Inquiry” - email about products, services,\n  * „Notification” - email that doesn't require response.\n\n\n\nYou can add or edit labels and descriptions according to your use case.\n\n🎬 See this workflow in action [in my YouTube video](https://youtu.be/a8Dhj3Zh9vQ) about automating Gmail.\n\n## How it works?\n\nGmail trigger performs polling every minute for new messages (you can change the trigger interval according to your needs). The email content is then downloaded and forwarded to an AI chain.\n\n💡 The prompt in the AI chain node includes instructions for applying labels according to the email content - change label names and instructions to fit your use case.\n\nNext, the workflow retrieves all labels from the Gmail account and compares them with the label names returned from the AI chain. Label IDs are aggregated and applied to processed email messages.\n\n⚠️ Label names in the Gmail account and workflow (prompt, JSON schema) must be the same.\n\n## Set up steps\n\n  1. Set credentials for Gmail and OpenAI.\n  2. Add labels to your Gmail account (e.g. „Partnership”, „Inquiry” and „Notification”).\n  3. Change prompt in AI chain node (update list of label names and instructions).\n  4. Change list of available labels in JSON schema in parser node.\n  5. Optionally: change polling interval in Gmail trigger (by default interval is 1 minute).\n\n\n\nIf you like this workflow, please subscribe to [my YouTube channel](https://www.youtube.com/@workfloows/) and/or [my newsletter](https://workfloows.com/).\n",
  "crawled_at": "2025-05-26T07:45:22.747217",
  "readme_zh": "该工作流利用AI分析Gmail中每封新邮件的内容，并根据邮件上下文自动分配特定标签。\n\n工作流默认配置包含3种标签：\n  * 「合作」——涉及赞助内容或协作的邮件\n  * 「咨询」——关于产品或服务的邮件\n  * 「通知」——无需回复的邮件\n\n您可以根据实际需求添加或编辑标签及描述。\n\n🎬 观看[我的YouTube视频](https://youtu.be/a8Dhj3Zh9vQ)了解Gmail自动化实战演示\n\n## 运作原理\nGmail触发器每分钟轮询新邮件（可自定义轮询间隔），下载邮件内容后发送至AI处理链。\n\n💡 AI链节点中的提示词包含根据邮件内容打标签的指令——请修改标签名称和指令以适应您的需求。\n\n随后工作流会获取Gmail账户所有标签，与AI链返回的标签名进行比对，最终将聚合的标签ID应用到已处理的邮件上。\n\n⚠️ 请确保Gmail账户中的标签名称与工作流（提示词、JSON结构）完全一致。\n\n## 配置步骤\n1. 设置Gmail和OpenAI凭证\n2. 在Gmail账户中添加标签（如「合作」「咨询」「通知」）\n3. 修改AI链节点中的提示词（更新标签列表和指令）\n4. 在解析器节点中更新JSON结构内的可用标签列表\n5. 可选：调整Gmail触发器的轮询间隔（默认1分钟）\n\n若喜欢本工作流，欢迎订阅[我的YouTube频道](https://www.youtube.com/@workfloows/)及[邮件通讯](https://workfloows.com/)。",
  "title_zh": "使用AI节点自动标记收到的Gmail邮件",
  "publish_date_zh": "上次更新于16天前",
  "workflow_json_zh": "{\n  \"meta\": {\n    \"instanceId\": \"d17dadc75de867b08b7744d7ba00e531e75580e2dec35d52f2d34e58481e1fb7\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"nodes\": [\n    {\n      \"id\": \"814e3849-1ae1-4124-bdfc-b72017e9d7c2\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        0,\n        0\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 420.4803040774015,\n        \"height\": 240.57943708322733,\n        \"content\": \"## 为Gmail邮件添加AI标签\\n通过此工作流，您可以根据邮件内容自动为Gmail邮件设置标签。\\n\\n本工作流提供三种预设标签：\\\"合作请求\\\"、\\\"咨询询问\\\"和\\\"通知提醒\\\"。您可根据实际需求自由调整标签类别。\\n\\n**请确保在Gmail账户和工作流中同步设置完全相同的标签名称。**\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"e83fa311-b5ba-427e-a98e-573394b882dd\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        0,\n        260\n      ],\n      \"parameters\": {\n        \"width\": 421.0932411886662,\n        \"height\": 257.42916378714597,\n        \"content\": \"## ⚠️ 注意事项\\n\\n1. 本工作流的完整视频教程已发布在[我的YouTube频道](https://youtu.be/a8Dhj3Zh9vQ)。\\n2. 请记得添加您的凭证并配置节点（视频教程中已详细说明）。\\n3. 如果您喜欢这个工作流，欢迎订阅[我的YouTube频道](https://www.youtube.com/@workfloows)和/或[我的电子报](https://workfloows.com/)。\\n\\n**感谢您的支持！**\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"4c20d029-750f-476b-9348-6e250ea64d52\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        440,\n        0\n      ],\n      \"parameters\": {\n        \"width\": 238.4602598584674,\n        \"height\": 348.5873725349161,\n        \"content\": \"### Gmail触发器  \\n接收来自Gmail的新邮件数据。  \\n\\n⚠️ 请根据需求设置轮询间隔时间。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"22923079-80ce-4495-b0f0-da7122195c56\",\n      \"name\": \"Sticky Note4\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1160,\n        380\n      ],\n      \"parameters\": {\n        \"width\": 241.53974014153226,\n        \"height\": 319.3323098457962,\n        \"content\": \"### JSON 模式\\n根据您的需求编辑 JSON 模式和标签名称。\\n\\n⚠️ **系统提示中的标签名称与 JSON 模式应保持一致。**\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"40735a58-daaa-43ac-9658-706c3cf0cbba\",\n      \"name\": \"Sticky Note5\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1900,\n        20\n      ],\n      \"parameters\": {\n        \"width\": 226.14233872620645,\n        \"height\": 347.0476323933831,\n        \"content\": \"### 合并标签\\n将Gmail账户中获取的标签与AI分配的标签合并到一起。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"87e0f9e2-a2ff-46cf-896a-138b1bde2d0e\",\n      \"name\": \"Sticky Note6\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        2160,\n        20\n      ],\n      \"parameters\": {\n        \"width\": 452.48413953150185,\n        \"height\": 347.0476323933831,\n        \"content\": \"### 聚合标签并添加到邮件\\n创建标签ID数组并将其添加到Gmail中指定的邮件消息。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"1d533664-e5e8-4dc8-afac-bfc5996e4bf9\",\n      \"name\": \"Sticky Note7\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        700,\n        0\n      ],\n      \"parameters\": {\n        \"width\": 238.4602598584674,\n        \"height\": 348.5873725349161,\n        \"content\": \"### 获取邮件内容\\n根据Gmail邮件ID检索邮件的正文内容，并将其传递给AI处理链。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"e613ca64-50ae-4d7c-b0fc-15812dadcd68\",\n      \"name\": \"Sticky Note8\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        960,\n        0\n      ],\n      \"parameters\": {\n        \"width\": 378.57661273793565,\n        \"height\": 348.5873725349161,\n        \"content\": \"### 分配标签\\n让AI根据消息内容自动匹配最合适的标签。\\n\\n⚠️ **注意修改系统提示** - 请根据实际需求调整标签名称和操作说明。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"a2005e70-6774-45ce-b9c6-742786f49964\",\n      \"name\": \"Gmail trigger\",\n      \"type\": \"n8n-nodes-base.gmailTrigger\",\n      \"position\": [\n        500,\n        180\n      ],\n      \"parameters\": {\n        \"simple\": false,\n        \"filters\": {},\n        \"options\": {},\n        \"pollTimes\": {\n          \"item\": [\n            {\n              \"mode\": \"everyMinute\"\n            }\n          ]\n        }\n      },\n      \"credentials\": {\n        \"gmailOAuth2\": {\n          \"id\": \"SPECSn66s6QHmld9\",\n          \"name\": \"Gmail account\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"4b6f7d21-6155-42b7-93ff-2f530df3692f\",\n      \"name\": \"Get message content\",\n      \"type\": \"n8n-nodes-base.gmail\",\n      \"position\": [\n        760,\n        180\n      ],\n      \"webhookId\": \"b773894c-18c6-454d-9271-6de10be1b7c4\",\n      \"parameters\": {\n        \"messageId\": \"={{ $json.id }}\",\n        \"operation\": \"get\"\n      },\n      \"credentials\": {\n        \"gmailOAuth2\": {\n          \"id\": \"SPECSn66s6QHmld9\",\n          \"name\": \"Gmail account\"\n        }\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"ad577660-d9f4-4031-ad16-7021a02bb18e\",\n      \"name\": \"Assign labels for message\",\n      \"type\": \"@n8n/n8n-nodes-langchain.chainLlm\",\n      \"position\": [\n        1020,\n        180\n      ],\n      \"parameters\": {\n        \"text\": \"={{ $('Gmail trigger').item.json.text }}\",\n        \"promptType\": \"define\",\n        \"hasOutputParser\": true\n      },\n      \"typeVersion\": 1.5\n    },\n    {\n      \"id\": \"1e11d30f-4c73-4fd0-a365-aeb43bee4252\",\n      \"name\": \"OpenAI Chat\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\n      \"position\": [\n        1000,\n        400\n      ],\n      \"parameters\": {\n        \"model\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gpt-4o-mini\"\n        },\n        \"options\": {}\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"PrK67ozsBFqSIYG9\",\n          \"name\": \"OpenAi account\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"4a504b64-fb28-44fb-a80a-6f5e5c5a1949\",\n      \"name\": \"JSON Parser\",\n      \"type\": \"@n8n/n8n-nodes-langchain.outputParserStructured\",\n      \"position\": [\n        1240,\n        400\n      ],\n      \"parameters\": {\n        \"schemaType\": \"manual\",\n        \"inputSchema\": \"{\\n  \\\"type\\\": \\\"object\\\",\\n  \\\"properties\\\": {\\n    \\\"labels\\\": {\\n      \\\"type\\\": \\\"array\\\",\\n      \\\"items\\\": {\\n        \\\"type\\\": \\\"string\\\",\\n        \\\"enum\\\": [\\\"Inquiry\\\", \\\"Partnership\\\", \\\"Notification\\\"]\\n      }\\n    }\\n  },\\n  \\\"required\\\": [\\\"labels\\\"]\\n}\"\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"f5ac1b01-0980-4ee4-b4f5-5057258eab70\",\n      \"name\": \"Set label values\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        1400,\n        180\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"72d11a72-6693-447c-b7ca-4ba1a3579075\",\n              \"name\": \"labels\",\n              \"type\": \"array\",\n              \"value\": \"={{ $json.output.labels }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"e368e343-728e-4e2f-a37f-5e203000d090\",\n      \"name\": \"Get all labels\",\n      \"type\": \"n8n-nodes-base.gmail\",\n      \"position\": [\n        1680,\n        60\n      ],\n      \"webhookId\": \"dec6f574-f47c-4b5d-86b9-2b0f6c957145\",\n      \"parameters\": {\n        \"resource\": \"label\",\n        \"returnAll\": true\n      },\n      \"credentials\": {\n        \"gmailOAuth2\": {\n          \"id\": \"SPECSn66s6QHmld9\",\n          \"name\": \"Gmail account\"\n        }\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"48ce8351-5d04-4697-b68d-bb84286e0b2b\",\n      \"name\": \"Split out assigned labels\",\n      \"type\": \"n8n-nodes-base.splitOut\",\n      \"position\": [\n        1680,\n        280\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"fieldToSplitOut\": \"labels\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"cc1aa3ac-7427-4761-aacd-caf16c64d7fb\",\n      \"name\": \"Merge corresponding labels\",\n      \"type\": \"n8n-nodes-base.merge\",\n      \"position\": [\n        1960,\n        180\n      ],\n      \"parameters\": {\n        \"mode\": \"combine\",\n        \"options\": {},\n        \"advanced\": true,\n        \"mergeByFields\": {\n          \"values\": [\n            {\n              \"field1\": \"name\",\n              \"field2\": \"labels\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.1\n    },\n    {\n      \"id\": \"97fefda6-5936-42a7-a30a-8de4149aa445\",\n      \"name\": \"Aggregate label IDs\",\n      \"type\": \"n8n-nodes-base.aggregate\",\n      \"position\": [\n        2220,\n        180\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"fieldsToAggregate\": {\n          \"fieldToAggregate\": [\n            {\n              \"fieldToAggregate\": \"id\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"7befd422-7243-43af-9b34-21c05a069013\",\n      \"name\": \"Add labels to message\",\n      \"type\": \"n8n-nodes-base.gmail\",\n      \"position\": [\n        2440,\n        180\n      ],\n      \"webhookId\": \"4f345fc9-2afd-478b-be3b-d3d28f0fbc82\",\n      \"parameters\": {\n        \"labelIds\": \"={{ $json.id }}\",\n        \"messageId\": \"={{ $('Gmail trigger').item.json[\\\"id\\\"] }}\",\n        \"operation\": \"addLabels\"\n      },\n      \"credentials\": {\n        \"gmailOAuth2\": {\n          \"id\": \"SPECSn66s6QHmld9\",\n          \"name\": \"Gmail account\"\n        }\n      },\n      \"typeVersion\": 2.1\n    }\n  ],\n  \"pinData\": {\n    \"Gmail trigger\": [\n      {\n        \"id\": \"1962eb5ee3119d76\",\n        \"to\": {\n          \"html\": \"<span class=\\\"mp_address_group\\\"><span class=\\\"mp_address_name\\\">Workfloows Tutorial</span> &lt;<a href=\\\"mailto:workfloowstutorial@gmail.com\\\" class=\\\"mp_address_email\\\">workfloowstutorial@gmail.com</a>&gt;</span>\",\n          \"text\": \"\\\"Workfloows Tutorial\\\" <workfloowstutorial@gmail.com>\",\n          \"value\": [\n            {\n              \"name\": \"Workfloows Tutorial\",\n              \"address\": \"workfloowstutorial@gmail.com\"\n            }\n          ]\n        },\n        \"date\": \"2025-04-13T10:33:05.000Z\",\n        \"from\": {\n          \"html\": \"<span class=\\\"mp_address_group\\\"><span class=\\\"mp_address_name\\\">Workfloows</span> &lt;<a href=\\\"mailto:workfloows@gmail.com\\\" class=\\\"mp_address_email\\\">workfloows@gmail.com</a>&gt;</span>\",\n          \"text\": \"\\\"Workfloows\\\" <workfloows@gmail.com>\",\n          \"value\": [\n            {\n              \"name\": \"Workfloows\",\n              \"address\": \"workfloows@gmail.com\"\n            }\n          ]\n        },\n        \"html\": \"<div dir=\\\"ltr\\\">Hey! <div><br></div><div>We&#39;d love to cooperate with you - could you please send us your offer? </div><div><br></div><div>Best,</div><div>Oskar</div></div>\\n\",\n        \"text\": \"Hey!\\n\\nWe'd love to cooperate with you - could you please send us your offer?\\n\\nBest,\\nOskar\\n\",\n        \"headers\": {\n          \"to\": \"To: Workfloows Tutorial <workfloowstutorial@gmail.com>\",\n          \"date\": \"Date: Sun, 13 Apr 2025 12:33:05 +0200\",\n          \"from\": \"From: Workfloows <workfloows@gmail.com>\",\n          \"subject\": \"Subject: Inquiry for cooperation\",\n          \"x-gm-gg\": \"X-Gm-Gg: ASbGncsLoGTllITLV/hYh7p2Re1X0A4Fd5a1uQb58nQ1FCzXrvjCL9BY2H/6U4fN3wn\\r\\n\\tFkTSzNo0PUVLScNsBjkkOdwaqHhHLT+UzxaAtr8LpnucVTxhWbI08sl8lxjJUsHJwsJwIpSaAqX\\r\\n\\tkKKBKUewdQhcwJNh4P22vOalA=\",\n          \"arc-seal\": \"ARC-Seal: i=1; a=rsa-sha256; t=1744540397; cv=none;\\r\\n        d=google.com; s=arc-20240605;\\r\\n        b=BWNyT3FtnssueCPH4di13k++uCiJsB73BRfuQ63N0/+fUQqAvkZRMdN4cZiSCXpLph\\r\\n         +ag3l4hgkp9yuE66MQjv18vWzMaUsmaj5obHWe+6x6YcPkMRW/y+gNitCD+mftpYsQpz\\r\\n         nQpkoyZaY3h9o9vmcUUmOPWCWrUysy8y8sOOhht7Tmekzs3tQj+aLyXJNv+j9SCwvsTE\\r\\n         yd5uisDlrWv1zfpdUZLwNKZuCP+Jtfr01w3QT/zhBCweOccIJaFzfO4s97q8JgUgRrmx\\r\\n         JkrsGpSWJZKWPDh44mkmHH+bw43omIJKXYTHN9nOO3vGyqBWdGYlE0T9ZhCetHHyBbpS\\r\\n         b+Mw==\",\n          \"received\": \"Received: from mail-sor-f41.google.com (mail-sor-f41.google.com. [209.85.220.41])\\r\\n        by mx.google.com with SMTPS id 2adb3069b0e04-54c455e2176sor1769457e87.11.2025.04.13.03.33.17\\r\\n        for <workfloowstutorial@gmail.com>\\r\\n        (Google Transport Security);\\r\\n        Sun, 13 Apr 2025 03:33:17 -0700 (PDT)\",\n          \"message-id\": \"Message-ID: <CA+sg_9eV=X+LusGnDSP8pDrrYZ8SLn2Maq4CYpLrg=uG=7T7DQ@mail.gmail.com>\",\n          \"x-received\": \"X-Received: by 2002:a2e:bd88:0:b0:30d:629c:4333 with SMTP id\\r\\n 38308e7fff4ca-31049aacf9dmr29831171fa.34.1744540396464; Sun, 13 Apr 2025\\r\\n 03:33:16 -0700 (PDT)\",\n          \"return-path\": \"Return-Path: <workfloows@gmail.com>\",\n          \"content-type\": \"Content-Type: multipart/alternative; boundary=\\\"000000000000a0b4660632a67692\\\"\",\n          \"delivered-to\": \"Delivered-To: workfloowstutorial@gmail.com\",\n          \"mime-version\": \"MIME-Version: 1.0\",\n          \"received-spf\": \"Received-SPF: pass (google.com: domain of workfloows@gmail.com designates 209.85.220.41 as permitted sender) client-ip=209.85.220.41;\",\n          \"x-gm-features\": \"X-Gm-Features: ATxdqUEDRqHsd35x8e-h-zd4BcGaOVs83Rpm-BRaGlzjaiGxZMiGfgHEjxn3hNE\",\n          \"dkim-signature\": \"DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;\\r\\n        d=gmail.com; s=20230601; t=1744540397; x=1745145197; dara=google.com;\\r\\n        h=to:subject:message-id:date:from:mime-version:from:to:cc:subject\\r\\n         :date:message-id:reply-to;\\r\\n        bh=yhyki7Kf5bQNf/8oq2uNTa/y/MoSnhI+j3ZqeBT892s=;\\r\\n        b=Njlov8RLGs/rZIz07rSJIfn8oQDEXgybU4mJ0ujD8T8m7J4NabveIhdobrrHraaZqN\\r\\n         iwOZHBn0TTWAbuccHjfU+BBB8FvJ4/jfCXKbWSwPIWHd53P1wuTxvXYgbkXX4A/W675L\\r\\n         zPSVraK4W1heQDTViCc2MmV5+tH6pbe/52xTOwvx8Xf0WTN1Ku3K/DY8EIsnd0OKdrEn\\r\\n         ml+/LHhVMmwR5lZtte7mTlYi/c5FG8XO95Nh/Ftl22RpuKl1QPFUdJcx+bEVeUh62uHM\\r\\n         Bd8pyi0y/LVKIqNtL/DIvpt2+bt9TLm7MB2P61KMUAP75qZCparl2MWLR62c8tW7cFqm\\r\\n         wPHA==\",\n          \"x-gm-message-state\": \"X-Gm-Message-State: AOJu0YzGNl9So86XWoTm+y0PO71OilI6ljQ/cHqUDKwYpIrbLMy8ZiCe\\r\\n\\ty2NKHmx051OaBkuEbe2bQD3dl78xO6sJPWWrTXUn1mV9b52v6vaQsLXXkQWx5cKuaw9spNE1dpU\\r\\n\\tzsVB7chkTKdZ5HO31p29RiSug2SJ0AZXS\",\n          \"x-google-smtp-source\": \"X-Google-Smtp-Source: AGHT+IF6PTdq6zPXbZy1CEUmKyNDSavbnDjbcWp5Y3hfiFlZruW8yABRwE9q5LKSffpes/dVbAryLGt6F27ROQMhWMg=\",\n          \"arc-message-signature\": \"ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20240605;\\r\\n        h=to:subject:message-id:date:from:mime-version:dkim-signature;\\r\\n        bh=yhyki7Kf5bQNf/8oq2uNTa/y/MoSnhI+j3ZqeBT892s=;\\r\\n        fh=fBYbxd7sNeSi3dX3VeF2+nxOJZdPrQsXgdNq9LWGYGE=;\\r\\n        b=V70ViYZcIyYaZCIMeEXNv4R6X5fkIYJxel9I6iHuCI2RJLc824inbFBL3Enb/JD8yt\\r\\n         Sk1iK/RGh+PYMU1FAHeq/uUri2PG1Z9RZc7e7jjLil/nCWpYF91AhFEZE8B7kl5uWKZb\\r\\n         qA4ASGlYUTJwjoWMpJle0uvlOBksdXIb2Zb5K6kyHe4zlqhHeM6ySiJLEu7bj/eS5TYg\\r\\n         vnmoySAYAsLH5T/08gj6OwaBWcmqhfMVO8adMkIZe1VZQqC9nKVJJis0I3Hsl9UwhicB\\r\\n         VDSvEH/KsHrDDqPkSMDHykv1NzBK9cPgQ8cAG4QdgSd3zuEp5uJkxXNycF1NN1cZwRfZ\\r\\n         eC2A==;\\r\\n        dara=google.com\",\n          \"authentication-results\": \"Authentication-Results: mx.google.com;\\r\\n       dkim=pass header.i=@gmail.com header.s=20230601 header.b=Njlov8RL;\\r\\n       spf=pass (google.com: domain of workfloows@gmail.com designates 209.85.220.41 as permitted sender) smtp.mailfrom=workfloows@gmail.com;\\r\\n       dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com;\\r\\n       dara=pass header.i=@gmail.com\",\n          \"x-google-dkim-signature\": \"X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;\\r\\n        d=1e100.net; s=20230601; t=1744540397; x=1745145197;\\r\\n        h=to:subject:message-id:date:from:mime-version:x-gm-message-state\\r\\n         :from:to:cc:subject:date:message-id:reply-to;\\r\\n        bh=yhyki7Kf5bQNf/8oq2uNTa/y/MoSnhI+j3ZqeBT892s=;\\r\\n        b=o2krTN0ebufVGn92FP/xtW+t8OQ46Jc9sSrWVXrWihY1hBM7C9fEwuF9svkxx3SB8B\\r\\n         m8qZVS5TIDCv+JkZKK9jpHw3cD09s/YSr7aPP5bAWibx5UhB1/Ki7Kn0hdgt90LS2Kob\\r\\n         jr7CP8QrrWfftq7zutBxaVoCdBtTrod/TJKDxDr1b3vFaoN/XxGnUeqj8EoAbdTDf859\\r\\n         5hmRQUODpJaybi3MDmBzStjIh9rlUBLkt4csANAuUZWX1/b28+HAiT7AOdq9ksbROpgi\\r\\n         h5LedT5dMXPYU6yU0lQ6kk14R6eX6tHQN3AV5I1kCOaaeArC7NvUK5o8mUH2QDKZgWIe\\r\\n         DR5A==\",\n          \"arc-authentication-results\": \"ARC-Authentication-Results: i=1; mx.google.com;\\r\\n       dkim=pass header.i=@gmail.com header.s=20230601 header.b=Njlov8RL;\\r\\n       spf=pass (google.com: domain of workfloows@gmail.com designates 209.85.220.41 as permitted sender) smtp.mailfrom=workfloows@gmail.com;\\r\\n       dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com;\\r\\n       dara=pass header.i=@gmail.com\"\n        },\n        \"subject\": \"Inquiry for cooperation\",\n        \"labelIds\": [\n          \"UNREAD\",\n          \"IMPORTANT\",\n          \"CATEGORY_PERSONAL\",\n          \"INBOX\"\n        ],\n        \"threadId\": \"1962eb5ee3119d76\",\n        \"messageId\": \"<CA+sg_9eV=X+LusGnDSP8pDrrYZ8SLn2Maq4CYpLrg=uG=7T7DQ@mail.gmail.com>\",\n        \"textAsHtml\": \"<p>Hey!</p><p>We&apos;d love to cooperate with you - could you please send us your offer?</p><p>Best,<br/>Oskar</p>\",\n        \"sizeEstimate\": 5849\n      }\n    ]\n  },\n  \"connections\": {\n    \"JSON Parser\": {\n      \"ai_outputParser\": [\n        [\n          {\n            \"node\": \"Assign labels for message\",\n            \"type\": \"ai_outputParser\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"OpenAI Chat\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"Assign labels for message\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Gmail trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get message content\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get all labels\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge corresponding labels\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Set label values\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get all labels\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Split out assigned labels\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Aggregate label IDs\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Add labels to message\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get message content\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Assign labels for message\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Assign labels for message\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set label values\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Split out assigned labels\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge corresponding labels\",\n            \"type\": \"main\",\n            \"index\": 1\n          }\n        ]\n      ]\n    },\n    \"Merge corresponding labels\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Aggregate label IDs\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}