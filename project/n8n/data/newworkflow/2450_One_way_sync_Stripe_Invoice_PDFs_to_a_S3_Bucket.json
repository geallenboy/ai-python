{
  "url": "https://n8n.io/workflows/2450-one-way-sync-stripe-invoice-pdfs-to-a-s3-bucket/",
  "title": "One-way sync Stripe Invoice PDFs to a S3 Bucket",
  "author": "Marcel Claus-Ahrens",
  "publish_date": "Last update 7 months ago",
  "publish_date_absolute": "2024-10-25",
  "categories": [
    {
      "name": "Finance"
    }
  ],
  "workflow_json": "{\"meta\":{\"instanceId\":\"9e331a89ae45a204c6dee51c77131d32a8c962ec20ccf002135ea60bd285dba9\"},\"nodes\":[{\"id\":\"d72750fc-6415-4da6-977a-46d025a91ef9\",\"name\":\"When clicking â€˜Test workflowâ€™\",\"type\":\"n8n-nodes-base.manualTrigger\",\"position\":[-900,900],\"parameters\":{},\"typeVersion\":1},{\"id\":\"b00e7434-f83e-438e-a47b-12d4a2c4fe5b\",\"name\":\"List Invoices\",\"type\":\"n8n-nodes-base.splitOut\",\"position\":[180,900],\"parameters\":{\"options\":{},\"fieldToSplitOut\":\"data\"},\"typeVersion\":1},{\"id\":\"c142f60b-dbbd-444a-b39b-365e9eb1ff58\",\"name\":\"Inject s3 Subpath\",\"type\":\"n8n-nodes-base.set\",\"position\":[820,640],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"dca623a6-834c-440f-990a-25bfd9afa2b3\",\"name\":\"_s3_year\",\"type\":\"string\",\"value\":\"={{ DateTime.fromSeconds($json.created).format(\\\"yyyy\\\") }}\"},{\"id\":\"55ab18e0-b2ef-486d-898d-97f671d5049b\",\"name\":\"_s3_folder\",\"type\":\"string\",\"value\":\"={{ $(\\\"Clean and Escape ENV\\\").first().json.subFolder }}\"},{\"id\":\"7f998728-a70e-4495-8d34-3ba72a71986b\",\"name\":\"_s3_month\",\"type\":\"string\",\"value\":\"={{ DateTime.fromSeconds($json.created).format(\\\"MM\\\") }}\"}]},\"includeOtherFields\":true},\"typeVersion\":3.4},{\"id\":\"4cdd4338-7225-442b-8df6-44bebfe6d5e9\",\"name\":\"Set-Subpath\",\"type\":\"n8n-nodes-base.set\",\"position\":[1000,640],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"f2969361-8ed9-453b-8c71-e5b3c962af20\",\"name\":\"_s3_path\",\"type\":\"string\",\"value\":\"={{ ($json._s3_folder ? $json._s3_folder+\\\"/\\\" : \\\"\\\")+$json._s3_year+\\\"/\\\"+$json._s3_month+\\\"/\\\"+$binary.data.fileName  }}\"}]},\"includeOtherFields\":true},\"typeVersion\":3.4},{\"id\":\"4965110b-0516-4a5d-9b04-8ccbb337f9d5\",\"name\":\"We do only Invoice Objects\",\"type\":\"n8n-nodes-base.if\",\"position\":[360,900],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"2bdd8550-526c-4833-872e-b1028019a88a\",\"operator\":{\"name\":\"filter.operator.equals\",\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"={{ $json.object }}\",\"rightValue\":\"invoice\"}]}},\"typeVersion\":2},{\"id\":\"def30f79-593f-48b3-b46f-29c5329a59ae\",\"name\":\"It shouldn't be something else\",\"type\":\"n8n-nodes-base.stopAndError\",\"position\":[580,1042.3086136912689],\"parameters\":{\"errorMessage\":\"Unexpected or missing Invoice Obj\"},\"typeVersion\":1},{\"id\":\"927c4bbd-5a57-4929-aebb-b187690108ac\",\"name\":\"ENV*\",\"type\":\"n8n-nodes-base.set\",\"position\":[-500,900],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"b2927be9-2b00-4ab8-8938-56b1a0c2e134\",\"name\":\"year\",\"type\":\"number\",\"value\":\"={{ $now.minus(1,\\\"month\\\").format(\\\"yyyy\\\") }}\"},{\"id\":\"89e0c6ee-7b67-405a-b933-5a511cdea94b\",\"name\":\"month\",\"type\":\"number\",\"value\":\"={{ $now.minus(1,\\\"month\\\").format(\\\"MM\\\") }}\"},{\"id\":\"35a218d2-cd20-4388-8bc6-926752289df5\",\"name\":\"subFolder\",\"type\":\"string\",\"value\":\"invoices\"},{\"id\":\"7d18829a-018d-4814-987e-cdbee04896b3\",\"name\":\"bucketName\",\"type\":\"string\",\"value\":\"myBucket\"}]}},\"typeVersion\":3.4},{\"id\":\"dd75af83-6e0a-4685-a3bd-1622e2c800de\",\"name\":\"Download Invoice PDF from Stripe\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[580,640],\"parameters\":{\"url\":\"={{ $json.invoice_pdf }}\",\"options\":{}},\"typeVersion\":4.2},{\"id\":\"30c4090d-043c-4b3b-b86c-df1e10544b2e\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-600,802.3086136912689],\"parameters\":{\"color\":4,\"width\":305.7072653471566,\"height\":670.9306322684054,\"content\":\"## ğŸ‘‡  Configure here\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n`folderName` *(optional)* = Subfolder for your Invoices, otherwise it will create in root. e.g: \\\"invoices\\\"\\n\\n`bucketName` *(required)* = the S3 Bucket Name, where invoices will be synced in\\n\\n`year` (automatic or hardcore) = \\nthe expression makes sure it will be exporting \\\"last month\\\". Or define a custom year for manual export.\\n\\n`month` (automatic or hardcore) = \\nthe expression makes sure it will be exporting \\\"last month\\\". Or define a custom month for manual export.\\n\\n\\n**EVERYTHING** greater then the **provided date** will be exported. The Day will be always the first of month.\"},\"typeVersion\":1},{\"id\":\"4134f369-84de-4019-a014-1d823ec77668\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[780,480],\"parameters\":{\"color\":5,\"width\":362.3514596119466,\"height\":336.03175807685056,\"content\":\"## Build Pathes\\n\\n*yourFolder/invoiceYear/invoiceMonth/fileName*\\n\\ne.g.: invoices/2024/12/invoice-number-123.pdf\"},\"typeVersion\":1},{\"id\":\"c8ecef82-ef73-4920-b9fa-16220009f7d9\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1203.398651655887,482.2657677705912],\"parameters\":{\"width\":283.04958764124035,\"height\":329.9325827943702,\"content\":\"## Upload to Bucket\\n\\n**âš ï¸ You might want to check Storage Class, ACL, etc.**\"},\"typeVersion\":1},{\"id\":\"a0505cc0-8312-46f2-970d-bfabff881ced\",\"name\":\"Every Month the First Day of the Month\",\"type\":\"n8n-nodes-base.scheduleTrigger\",\"position\":[-900,1102.3086136912689],\"parameters\":{\"rule\":{\"interval\":[{\"field\":\"months\"}]}},\"typeVersion\":1.2},{\"id\":\"53ee7468-f478-4c10-8767-1aa7967b3225\",\"name\":\"Sticky Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-100,820],\"parameters\":{\"width\":232,\"height\":256,\"content\":\"### Use Stripe Predefined Credential\"},\"typeVersion\":1},{\"id\":\"6055b93d-0462-4d1a-974a-7d31143e6b79\",\"name\":\"Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-1360,780],\"parameters\":{\"width\":367.15098241985504,\"height\":485.66522445338995,\"content\":\"## Instructions\\n\\nThis automation syncs monthly your Invoice PDF from Stripe to a (AWS) S3 Bucket of your choice with the following subPaths (Key):\\n\\n*yourFolder/invoiceYear/invoiceMonth/fileName*\\n\\n\\nFill in your **Credentials and Settings** in the Nodes marked with _\\\"*\\\"_.\\n\\nYou can adjust this Workflow to your needs. You can also override the `year`and `month` in the ENV* Node for manual syncs.\\n\\n![Image](https://let-the-work-flow.com/logo-64.png)\\nEnjoy the Workflow! â¤ï¸ \\nhttps://let-the-work-flow.com\\nWorkflow Automation & Development\"},\"typeVersion\":1},{\"id\":\"c5e5946c-c74f-435f-9664-491bbbca00f2\",\"name\":\"Get all Invoices*\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[-40,900],\"parameters\":{\"url\":\"https://api.stripe.com/v1/invoices\",\"options\":{},\"sendQuery\":true,\"authentication\":\"predefinedCredentialType\",\"queryParameters\":{\"parameters\":[{\"name\":\"limit\",\"value\":\"100\"},{\"name\":\"created[gte]\",\"value\":\"={{ DateTime.fromISO($json.year+\\\"-\\\"+$json.month+\\\"-01T00:00:00\\\").toSeconds() }}\"}]},\"nodeCredentialType\":\"stripeApi\"},\"typeVersion\":4.2},{\"id\":\"5ed183d2-3001-40ef-9dc6-897c6789209a\",\"name\":\"Upload to S3 Bucket*\",\"type\":\"n8n-nodes-base.awsS3\",\"position\":[1280,640],\"parameters\":{\"fileName\":\"={{ $json._s3_path }}\",\"operation\":\"upload\",\"bucketName\":\"={{ $(\\\"Clean and Escape ENV\\\").first().json.bucketName }}\",\"additionalFields\":{\"storageClass\":\"intelligentTiering\"}},\"typeVersion\":2},{\"id\":\"04b57622-64b2-4c62-b84b-61d49c3171fb\",\"name\":\"Clean and Escape ENV\",\"type\":\"n8n-nodes-base.set\",\"position\":[-240,900],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"2d053eee-92a2-44ee-ad34-b1ad87728285\",\"name\":\"bucketName\",\"type\":\"string\",\"value\":\"={{ $json.bucketName.trim().replace(/\\\\\\\\/g, '')  }}\"},{\"id\":\"ccd36bf6-91f3-44af-8b57-3002041c9829\",\"name\":\"subFolder\",\"type\":\"string\",\"value\":\"={{ $json.subFolder.trim().replace(/\\\\\\\\/g, '')  }}\"},{\"id\":\"0fb9451f-afc1-4b70-9ec3-f3ac7187c2db\",\"name\":\"month\",\"type\":\"string\",\"value\":\"={{ $json.month.toString().padStart(2,\\\"0\\\") }}\"},{\"id\":\"eda1110d-329b-4d12-a089-253ac189aea4\",\"name\":\"year\",\"type\":\"number\",\"value\":\"={{ parseInt($json.year) }}\"}]},\"includeOtherFields\":true},\"typeVersion\":3.4}],\"pinData\":{},\"connections\":{\"ENV*\":{\"main\":[[{\"node\":\"Clean and Escape ENV\",\"type\":\"main\",\"index\":0}]]},\"Set-Subpath\":{\"main\":[[{\"node\":\"Upload to S3 Bucket*\",\"type\":\"main\",\"index\":0}]]},\"List Invoices\":{\"main\":[[{\"node\":\"We do only Invoice Objects\",\"type\":\"main\",\"index\":0}]]},\"Get all Invoices*\":{\"main\":[[{\"node\":\"List Invoices\",\"type\":\"main\",\"index\":0}]]},\"Inject s3 Subpath\":{\"main\":[[{\"node\":\"Set-Subpath\",\"type\":\"main\",\"index\":0}]]},\"Clean and Escape ENV\":{\"main\":[[{\"node\":\"Get all Invoices*\",\"type\":\"main\",\"index\":0}]]},\"We do only Invoice Objects\":{\"main\":[[{\"node\":\"Download Invoice PDF from Stripe\",\"type\":\"main\",\"index\":0}],[{\"node\":\"It shouldn't be something else\",\"type\":\"main\",\"index\":0}]]},\"Download Invoice PDF from Stripe\":{\"main\":[[{\"node\":\"Inject s3 Subpath\",\"type\":\"main\",\"index\":0}]]},\"When clicking â€˜Test workflowâ€™\":{\"main\":[[{\"node\":\"ENV*\",\"type\":\"main\",\"index\":0}]]},\"Every Month the First Day of the Month\":{\"main\":[[{\"node\":\"ENV*\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "This automation syncs your Invoice PDFs from Stripe to a (AWS) S3 Bucket each month, in a folder of your choice, with the following subPath:\n\n_yourFolder/invoiceYear/invoiceMonth/fileName_\n\nFill in your **Credentials and Settings** in the Nodes marked with _\"*\"_.\n\nYou can adjust this Workflow to your needs. You can also override the `year`and `month` in the ENV* Node for manual syncs. It will sync every Invoice PDF which `created`-date is _greater then_ the provided year and month. It will automatically set the day to the first day of the desired month.\n\n![Image](https://cloud.let-the-work-flow.com/logo-64.png)  \nEnjoy the Workflow! â¤ï¸  \n<https://let-the-work-flow.com>  \nWorkflow Automation & Development\n",
  "crawled_at": "2025-05-25T23:55:00.967520",
  "readme_zh": "æ­¤è‡ªåŠ¨åŒ–åŠŸèƒ½æ¯æœˆå°†æ‚¨çš„Stripeå‘ç¥¨PDFåŒæ­¥è‡³æŒ‡å®šï¼ˆAWSï¼‰S3å­˜å‚¨æ¡¶ï¼Œå¹¶æŒ‰ä»¥ä¸‹å­è·¯å¾„å­˜æ”¾ï¼š\n\n_æ‚¨çš„æ–‡ä»¶å¤¹/å‘ç¥¨å¹´ä»½/å‘ç¥¨æœˆä»½/æ–‡ä»¶å_\n\nè¯·åœ¨æ ‡æœ‰ _\"*\"_ çš„èŠ‚ç‚¹ä¸­å¡«å†™æ‚¨çš„**å‡­è¯ä¸è®¾ç½®**ã€‚\n\næ‚¨å¯æ ¹æ®éœ€æ±‚è°ƒæ•´æ­¤å·¥ä½œæµã€‚å¦‚éœ€æ‰‹åŠ¨åŒæ­¥ï¼Œå¯åœ¨ENV*èŠ‚ç‚¹ä¸­è¦†ç›–`year`å’Œ`month`å‚æ•°ã€‚ç³»ç»Ÿå°†åŒæ­¥æ‰€æœ‰`created`æ—¥æœŸ_æ™šäº_è®¾å®šå¹´ä»½æœˆä»½çš„å¼€ç¥¨PDFï¼Œå¹¶è‡ªåŠ¨å°†æ—¥æœŸè®¾ä¸ºè¯¥æœˆé¦–æ—¥ã€‚\n\n![å›¾ç‰‡](https://cloud.let-the-work-flow.com/logo-64.png)  \näº«å—å·¥ä½œæµä¹‹ç¾ï¼â¤ï¸  \n<https://let-the-work-flow.com>  \nå·¥ä½œæµè‡ªåŠ¨åŒ–ä¸å¼€å‘",
  "title_zh": "å•å‘åŒæ­¥Stripeå‘ç¥¨PDFè‡³S3å­˜å‚¨æ¡¶",
  "publish_date_zh": "æœ€åæ›´æ–°äº7ä¸ªæœˆå‰",
  "workflow_json_zh": "{\n  \"meta\": {\n    \"instanceId\": \"9e331a89ae45a204c6dee51c77131d32a8c962ec20ccf002135ea60bd285dba9\"\n  },\n  \"nodes\": [\n    {\n      \"id\": \"d72750fc-6415-4da6-977a-46d025a91ef9\",\n      \"name\": \"When clicking â€˜Test workflowâ€™\",\n      \"type\": \"n8n-nodes-base.manualTrigger\",\n      \"position\": [\n        -900,\n        900\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"b00e7434-f83e-438e-a47b-12d4a2c4fe5b\",\n      \"name\": \"List Invoices\",\n      \"type\": \"n8n-nodes-base.splitOut\",\n      \"position\": [\n        180,\n        900\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"fieldToSplitOut\": \"data\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"c142f60b-dbbd-444a-b39b-365e9eb1ff58\",\n      \"name\": \"Inject s3 Subpath\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        820,\n        640\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"dca623a6-834c-440f-990a-25bfd9afa2b3\",\n              \"name\": \"_s3_year\",\n              \"type\": \"string\",\n              \"value\": \"={{ DateTime.fromSeconds($json.created).format(\\\"yyyy\\\") }}\"\n            },\n            {\n              \"id\": \"55ab18e0-b2ef-486d-898d-97f671d5049b\",\n              \"name\": \"_s3_folder\",\n              \"type\": \"string\",\n              \"value\": \"={{ $(\\\"Clean and Escape ENV\\\").first().json.subFolder }}\"\n            },\n            {\n              \"id\": \"7f998728-a70e-4495-8d34-3ba72a71986b\",\n              \"name\": \"_s3_month\",\n              \"type\": \"string\",\n              \"value\": \"={{ DateTime.fromSeconds($json.created).format(\\\"MM\\\") }}\"\n            }\n          ]\n        },\n        \"includeOtherFields\": true\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"4cdd4338-7225-442b-8df6-44bebfe6d5e9\",\n      \"name\": \"Set-Subpath\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        1000,\n        640\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"f2969361-8ed9-453b-8c71-e5b3c962af20\",\n              \"name\": \"_s3_path\",\n              \"type\": \"string\",\n              \"value\": \"={{ ($json._s3_folder ? $json._s3_folder+\\\"/\\\" : \\\"\\\")+$json._s3_year+\\\"/\\\"+$json._s3_month+\\\"/\\\"+$binary.data.fileName  }}\"\n            }\n          ]\n        },\n        \"includeOtherFields\": true\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"4965110b-0516-4a5d-9b04-8ccbb337f9d5\",\n      \"name\": \"We do only Invoice Objects\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        360,\n        900\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"2bdd8550-526c-4833-872e-b1028019a88a\",\n              \"operator\": {\n                \"name\": \"filter.operator.equals\",\n                \"type\": \"string\",\n                \"operation\": \"equals\"\n              },\n              \"leftValue\": \"={{ $json.object }}\",\n              \"rightValue\": \"invoice\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"def30f79-593f-48b3-b46f-29c5329a59ae\",\n      \"name\": \"It shouldn't be something else\",\n      \"type\": \"n8n-nodes-base.stopAndError\",\n      \"position\": [\n        580,\n        1042.3086136912689\n      ],\n      \"parameters\": {\n        \"errorMessage\": \"Unexpected or missing Invoice Obj\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"927c4bbd-5a57-4929-aebb-b187690108ac\",\n      \"name\": \"ENV*\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        -500,\n        900\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"b2927be9-2b00-4ab8-8938-56b1a0c2e134\",\n              \"name\": \"year\",\n              \"type\": \"number\",\n              \"value\": \"={{ $now.minus(1,\\\"month\\\").format(\\\"yyyy\\\") }}\"\n            },\n            {\n              \"id\": \"89e0c6ee-7b67-405a-b933-5a511cdea94b\",\n              \"name\": \"month\",\n              \"type\": \"number\",\n              \"value\": \"={{ $now.minus(1,\\\"month\\\").format(\\\"MM\\\") }}\"\n            },\n            {\n              \"id\": \"35a218d2-cd20-4388-8bc6-926752289df5\",\n              \"name\": \"subFolder\",\n              \"type\": \"string\",\n              \"value\": \"invoices\"\n            },\n            {\n              \"id\": \"7d18829a-018d-4814-987e-cdbee04896b3\",\n              \"name\": \"bucketName\",\n              \"type\": \"string\",\n              \"value\": \"myBucket\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"dd75af83-6e0a-4685-a3bd-1622e2c800de\",\n      \"name\": \"Download Invoice PDF from Stripe\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        580,\n        640\n      ],\n      \"parameters\": {\n        \"url\": \"={{ $json.invoice_pdf }}\",\n        \"options\": {}\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"30c4090d-043c-4b3b-b86c-df1e10544b2e\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -600,\n        802.3086136912689\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 305.7072653471566,\n        \"height\": 670.9306322684054,\n        \"content\": \"## ğŸ‘‡  åœ¨æ­¤é…ç½®\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"4134f369-84de-4019-a014-1d823ec77668\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        780,\n        480\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 362.3514596119466,\n        \"height\": 336.03175807685056,\n        \"content\": \"## æ„å»ºè·¯å¾„\\n\\n*ä½ çš„æ–‡ä»¶å¤¹/å‘ç¥¨å¹´ä»½/å‘ç¥¨æœˆä»½/æ–‡ä»¶å*\\n\\nä¾‹å¦‚ï¼šå‘ç¥¨/2024/12/å‘ç¥¨ç¼–å·-123.pdf\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"c8ecef82-ef73-4920-b9fa-16220009f7d9\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1203.398651655887,\n        482.2657677705912\n      ],\n      \"parameters\": {\n        \"width\": 283.04958764124035,\n        \"height\": 329.9325827943702,\n        \"content\": \"## ä¸Šä¼ è‡³å­˜å‚¨æ¡¶\\n\\n**âš ï¸ å»ºè®®æ£€æŸ¥å­˜å‚¨ç±»åˆ«ã€è®¿é—®æ§åˆ¶åˆ—è¡¨ï¼ˆACLï¼‰ç­‰è®¾ç½®**\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"a0505cc0-8312-46f2-970d-bfabff881ced\",\n      \"name\": \"Every Month the First Day of the Month\",\n      \"type\": \"n8n-nodes-base.scheduleTrigger\",\n      \"position\": [\n        -900,\n        1102.3086136912689\n      ],\n      \"parameters\": {\n        \"rule\": {\n          \"interval\": [\n            {\n              \"field\": \"months\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"53ee7468-f478-4c10-8767-1aa7967b3225\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -100,\n        820\n      ],\n      \"parameters\": {\n        \"width\": 232,\n        \"height\": 256,\n        \"content\": \"### ä½¿ç”¨Stripeé¢„å®šä¹‰å‡­è¯\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"6055b93d-0462-4d1a-974a-7d31143e6b79\",\n      \"name\": \"Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -1360,\n        780\n      ],\n      \"parameters\": {\n        \"width\": 367.15098241985504,\n        \"height\": 485.66522445338995,\n        \"content\": \"## æ“ä½œè¯´æ˜\\n\\næœ¬è‡ªåŠ¨åŒ–æµç¨‹å°†æŒ‰æœˆä»StripeåŒæ­¥æ‚¨çš„å‘ç¥¨PDFæ–‡ä»¶è‡³æŒ‡å®šï¼ˆAWSï¼‰S3å­˜å‚¨æ¡¶ï¼Œå¹¶æŒ‰ä»¥ä¸‹å­è·¯å¾„ï¼ˆKeyï¼‰å­˜å‚¨ï¼š\\n\\n*æ‚¨çš„æ–‡ä»¶å¤¹/å‘ç¥¨å¹´ä»½/å‘ç¥¨æœˆä»½/æ–‡ä»¶å*\\n\\nè¯·åœ¨æ ‡æœ‰_\\\"*\\\"_çš„èŠ‚ç‚¹å¤„å¡«å†™æ‚¨çš„**å‡­è¯åŠè®¾ç½®**ã€‚\\n\\næ‚¨å¯æ ¹æ®éœ€æ±‚è°ƒæ•´æ­¤å·¥ä½œæµã€‚å¦‚éœ€æ‰‹åŠ¨åŒæ­¥ï¼Œä¹Ÿå¯åœ¨ENV*èŠ‚ç‚¹ä¸­è¦†ç›–`year`å’Œ`month`å‚æ•°ã€‚\\n\\n![å›¾ç‰‡](https://let-the-work-flow.com/logo-64.png)\\nç¥æ‚¨å·¥ä½œæµæ„‰å¿«ï¼ â¤ï¸\\nhttps://let-the-work-flow.com\\nå·¥ä½œæµè‡ªåŠ¨åŒ–ä¸å¼€å‘\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"c5e5946c-c74f-435f-9664-491bbbca00f2\",\n      \"name\": \"Get all Invoices*\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        -40,\n        900\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.stripe.com/v1/invoices\",\n        \"options\": {},\n        \"sendQuery\": true,\n        \"authentication\": \"predefinedCredentialType\",\n        \"queryParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"limit\",\n              \"value\": \"100\"\n            },\n            {\n              \"name\": \"created[gte]\",\n              \"value\": \"={{ DateTime.fromISO($json.year+\\\"-\\\"+$json.month+\\\"-01T00:00:00\\\").toSeconds() }}\"\n            }\n          ]\n        },\n        \"nodeCredentialType\": \"stripeApi\"\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"5ed183d2-3001-40ef-9dc6-897c6789209a\",\n      \"name\": \"Upload to S3 Bucket*\",\n      \"type\": \"n8n-nodes-base.awsS3\",\n      \"position\": [\n        1280,\n        640\n      ],\n      \"parameters\": {\n        \"fileName\": \"={{ $json._s3_path }}\",\n        \"operation\": \"upload\",\n        \"bucketName\": \"={{ $(\\\"Clean and Escape ENV\\\").first().json.bucketName }}\",\n        \"additionalFields\": {\n          \"storageClass\": \"intelligentTiering\"\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"04b57622-64b2-4c62-b84b-61d49c3171fb\",\n      \"name\": \"Clean and Escape ENV\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        -240,\n        900\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"2d053eee-92a2-44ee-ad34-b1ad87728285\",\n              \"name\": \"bucketName\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.bucketName.trim().replace(/\\\\\\\\/g, '')  }}\"\n            },\n            {\n              \"id\": \"ccd36bf6-91f3-44af-8b57-3002041c9829\",\n              \"name\": \"subFolder\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.subFolder.trim().replace(/\\\\\\\\/g, '')  }}\"\n            },\n            {\n              \"id\": \"0fb9451f-afc1-4b70-9ec3-f3ac7187c2db\",\n              \"name\": \"month\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.month.toString().padStart(2,\\\"0\\\") }}\"\n            },\n            {\n              \"id\": \"eda1110d-329b-4d12-a089-253ac189aea4\",\n              \"name\": \"year\",\n              \"type\": \"number\",\n              \"value\": \"={{ parseInt($json.year) }}\"\n            }\n          ]\n        },\n        \"includeOtherFields\": true\n      },\n      \"typeVersion\": 3.4\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"ENV*\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Clean and Escape ENV\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Set-Subpath\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Upload to S3 Bucket*\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"List Invoices\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"We do only Invoice Objects\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get all Invoices*\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"List Invoices\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Inject s3 Subpath\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set-Subpath\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Clean and Escape ENV\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get all Invoices*\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"We do only Invoice Objects\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Download Invoice PDF from Stripe\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"It shouldn't be something else\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Download Invoice PDF from Stripe\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Inject s3 Subpath\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When clicking â€˜Test workflowâ€™\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"ENV*\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Every Month the First Day of the Month\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"ENV*\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}