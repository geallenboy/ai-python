{
  "url": "https://n8n.io/workflows/2890-drive-to-store-lead-generation-with-coupon-with-google-sheets-and-suitecrm/",
  "title": "Drive-To-Store Lead Generation (with coupon) with Google Sheets & SuiteCRM",
  "author": "Davide",
  "publish_date": "Last update 3 months ago",
  "publish_date_absolute": "2025-02-26",
  "categories": [
    {
      "name": "Sales"
    }
  ],
  "workflow_json": "{\"meta\":{\"instanceId\":\"a4bfc93e975ca233ac45ed7c9227d84cf5a2329310525917adaf3312e10d5462\"},\"name\":\"Automate Drive-To-Store Lead Generation System (with coupon) on SuiteCRM\",\"tags\":[],\"nodes\":[{\"id\":\"53342c2a-f707-4ed0-9054-7928e6832745\",\"name\":\"Token SuiteCRM\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[1560,920],\"parameters\":{\"url\":\"=https://SUITECRMURL/Api/access_token\",\"options\":{},\"requestMethod\":\"POST\",\"bodyParametersUi\":{\"parameter\":[{\"name\":\"grant_type\",\"value\":\"client_credentials\"},{\"name\":\"client_id\",\"value\":\"CLIENTID\"},{\"name\":\"client_secret\",\"value\":\"CLIENTSECRET\"}]},\"allowUnauthorizedCerts\":true},\"notesInFlow\":true,\"typeVersion\":1},{\"id\":\"18d04094-1ced-4431-9ba2-b9b33d76c453\",\"name\":\"Create Lead SuiteCRM\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[1800,920],\"parameters\":{\"url\":\"https://SUITECRMURL/Api/V8/module\",\"method\":\"POST\",\"options\":{\"response\":{\"response\":{\"responseFormat\":\"json\"}}},\"jsonBody\":\"={\\\"data\\\": \\n  {\\n  \\\"type\\\": \\\"Leads\\\",\\n  \\\"attributes\\\": { \\n  \\\"first_name\\\": \\\"{{ $('Form Fields').item.json.Name }}\\\",\\n  \\\"last_name\\\": \\\"{{ $('Form Fields').item.json.Surname }}\\\",\\n  \\\"email1\\\": \\\"{{ $('Form Fields').item.json.Email }}\\\",\\n  \\\"phone_mobile\\\":\\\"{{ $('Form Fields').item.json.Phone }}\\\",\\n  \\\"coupon_c\\\": \\\"{{ $('Get Coupon').item.json.COUPON }}\\\"\\n  }\\n  }\\n}\",\"sendBody\":true,\"sendHeaders\":true,\"specifyBody\":\"json\",\"headerParameters\":{\"parameters\":[{\"name\":\"Authorization\",\"value\":\"=Bearer {{$node[\\\"Token SuiteCRM\\\"].json[\\\"access_token\\\"]}}\"},{\"name\":\"Content-Type\",\"value\":\"application/vnd.api+json\"}]}},\"notesInFlow\":true,\"typeVersion\":3},{\"id\":\"59b9c124-f6eb-457d-b3cb-2c831b66db85\",\"name\":\"Webhook\",\"type\":\"n8n-nodes-base.webhook\",\"position\":[440,1020],\"webhookId\":\"4b98315d-782e-47a5-8fea-7d16155c811d\",\"parameters\":{\"path\":\"4b98315d-782e-47a5-8fea-7d16155c811d\",\"options\":{},\"httpMethod\":\"POST\"},\"typeVersion\":2},{\"id\":\"75d6f561-754d-4153-8a85-12cb135a555c\",\"name\":\"On form submission\",\"type\":\"n8n-nodes-base.formTrigger\",\"position\":[440,820],\"webhookId\":\"63d1d84b-c41e-4d3d-961a-0aa2af830ceb\",\"parameters\":{\"options\":{},\"formTitle\":\"Landing\",\"formFields\":{\"values\":[{\"fieldLabel\":\"Name\",\"placeholder\":\"Name\",\"requiredField\":true},{\"fieldLabel\":\"Surname\",\"placeholder\":\"Surname\",\"requiredField\":true},{\"fieldType\":\"email\",\"fieldLabel\":\"Email\",\"placeholder\":\"Email\",\"requiredField\":true},{\"fieldLabel\":\"Phone\",\"placeholder\":\"Phone\",\"requiredField\":true}]}},\"typeVersion\":2.2},{\"id\":\"e9eac3a2-0351-4457-ae1d-44d42974ab20\",\"name\":\"Duplicate Lead?\",\"type\":\"n8n-nodes-base.googleSheets\",\"position\":[880,820],\"parameters\":{\"options\":{},\"filtersUI\":{\"values\":[{\"lookupValue\":\"={{ $json.Email }}\",\"lookupColumn\":\"EMAIL\"}]},\"sheetName\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"gid=0\",\"cachedResultUrl\":\"https://docs.google.com/spreadsheets/d/1lnRZodxZSOA0QSuzkAb7ZJcfFfNXpX7NcxMdckMTN90/edit#gid=0\",\"cachedResultName\":\"Foglio1\"},\"documentId\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"1lnRZodxZSOA0QSuzkAb7ZJcfFfNXpX7NcxMdckMTN90\",\"cachedResultUrl\":\"https://docs.google.com/spreadsheets/d/1lnRZodxZSOA0QSuzkAb7ZJcfFfNXpX7NcxMdckMTN90/edit?usp=drivesdk\",\"cachedResultName\":\"Coupon\"}},\"credentials\":{\"googleSheetsOAuth2Api\":{\"id\":\"JYR6a64Qecd6t8Hb\",\"name\":\"Google Sheets account\"}},\"typeVersion\":4.5,\"alwaysOutputData\":true},{\"id\":\"a5ae5f5a-7028-495b-ad27-192561ce88d5\",\"name\":\"Form Fields\",\"type\":\"n8n-nodes-base.set\",\"position\":[680,820],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"661d1475-f964-4a12-bfe7-88bf96851319\",\"name\":\"Name\",\"type\":\"string\",\"value\":\"={{ $json.Name }}\"},{\"id\":\"9991645d-c716-47db-80d6-850f3d64c782\",\"name\":\"Surname\",\"type\":\"string\",\"value\":\"={{ $json.Surname }}\"},{\"id\":\"c999afa6-2ec7-4f7f-bf3b-088a3597591c\",\"name\":\"Email\",\"type\":\"string\",\"value\":\"={{ $json.Email }}\"},{\"id\":\"f3faccdb-2412-4363-a0e3-f13b8f85b242\",\"name\":\"Phone\",\"type\":\"string\",\"value\":\"={{ $json.Phone }}\"}]}},\"typeVersion\":3.4},{\"id\":\"9edb0d07-b4fb-42f8-9555-1d3caf8998c7\",\"name\":\"Get Coupon\",\"type\":\"n8n-nodes-base.googleSheets\",\"position\":[1340,920],\"parameters\":{\"options\":{\"returnFirstMatch\":true},\"filtersUI\":{\"values\":[{\"lookupColumn\":\"ID LEAD\"}]},\"sheetName\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"gid=0\",\"cachedResultUrl\":\"https://docs.google.com/spreadsheets/d/1lnRZodxZSOA0QSuzkAb7ZJcfFfNXpX7NcxMdckMTN90/edit#gid=0\",\"cachedResultName\":\"Foglio1\"},\"documentId\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"1lnRZodxZSOA0QSuzkAb7ZJcfFfNXpX7NcxMdckMTN90\",\"cachedResultUrl\":\"https://docs.google.com/spreadsheets/d/1lnRZodxZSOA0QSuzkAb7ZJcfFfNXpX7NcxMdckMTN90/edit?usp=drivesdk\",\"cachedResultName\":\"Coupon\"}},\"credentials\":{\"googleSheetsOAuth2Api\":{\"id\":\"JYR6a64Qecd6t8Hb\",\"name\":\"Google Sheets account\"}},\"executeOnce\":false,\"typeVersion\":4.5},{\"id\":\"9469dd95-04ac-4c74-abb3-674fec277f6e\",\"name\":\"Respond OK\",\"type\":\"n8n-nodes-base.respondToWebhook\",\"position\":[2300,920],\"parameters\":{\"options\":{\"responseCode\":200},\"respondWith\":\"json\",\"responseBody\":\"{\\n  \\\"result\\\": \\\"OK\\\",\\n  \\\"reason\\\": \\\"lead created\\\"\\n}\"},\"typeVersion\":1.1},{\"id\":\"5b81c406-d70b-4a36-b4f4-8941373958b9\",\"name\":\"Respond KO\",\"type\":\"n8n-nodes-base.respondToWebhook\",\"position\":[1320,700],\"parameters\":{\"options\":{\"responseCode\":200},\"respondWith\":\"json\",\"responseBody\":\"{\\n  \\\"result\\\": \\\"KO\\\",\\n  \\\"reason\\\": \\\"duplicate lead\\\"\\n}\"},\"typeVersion\":1.1},{\"id\":\"5fdf0eca-d1f6-4c9e-8e77-84d8e71bdb0e\",\"name\":\"Is Duplicate?\",\"type\":\"n8n-nodes-base.if\",\"position\":[1080,820],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"9e3a8422-14f1-453e-bfed-4feecff34662\",\"operator\":{\"type\":\"string\",\"operation\":\"notEmpty\",\"singleValue\":true},\"leftValue\":\"={{ $json.EMAIL }}\",\"rightValue\":\"={{ $('Form Fields').item.json.email }}\"}]}},\"typeVersion\":2.2},{\"id\":\"e9cba682-bf5b-4efa-9d10-4fab5d02610a\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[420,20],\"parameters\":{\"color\":3,\"width\":540,\"height\":380,\"content\":\"## STEP 1\\n\\nCreate a Google Sheet like this (Fill only the column \\\"COUPON\\\")\\n\\n[![2mXGVwB.md.png](https://iili.io/2mXGVwB.md.png)]\\n\\nThis is the basic Google Sheet used in [this Workflow](https://docs.google.com/spreadsheets/d/1lnRZodxZSOA0QSuzkAb7ZJcfFfNXpX7NcxMdckMTN90/edit?usp=drive_link):\\n\\n\"},\"typeVersion\":1},{\"id\":\"1c304620-368d-42bf-b0d2-de3f9d552e51\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[420,440],\"parameters\":{\"color\":4,\"width\":540,\"height\":260,\"content\":\"## STEP 2 - MAIN FLOW\\n\\nThis workflow is ideal for businesses looking to automate lead generation and management, especially when integrating with CRM systems like SuiteCRM and using Google Sheets for data tracking.\\n\\nIf you use an external form, hook the webbook trigger and the two webhooks \\\"Respond KO\\\" and \\\"Respond OK\\\" to the workflow.\\n\\nIt works with SuiteCRM 7.14.x and 8.x version. Remeber to create a Lead custom fields called 'coupon' on SuiteCRM.\"},\"typeVersion\":1},{\"id\":\"6248c920-02f4-4407-881a-376d2a9dd904\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[660,740],\"parameters\":{\"width\":340,\"height\":240,\"content\":\"Check if the lead has already received the coupon\"},\"typeVersion\":1},{\"id\":\"0c07d1b7-b12f-4cf7-8d0c-1dd905365534\",\"name\":\"Sticky Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1300,860],\"parameters\":{\"width\":180,\"height\":220,\"content\":\"Find the first available unassigned coupon\"},\"typeVersion\":1},{\"id\":\"34167626-9041-4cce-baaf-e1ed2efe8378\",\"name\":\"Sticky Note4\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1540,700],\"parameters\":{\"width\":400,\"height\":380,\"content\":\"Enter the lead with the relative coupon on Suite CRM. Change SUITECRMURL, CLIENTSECRET and CLIENTID\\n\\nTo create the CLIENTSECRET and CLIEDID go to Admin -> Oauth2 Client and Token -> and click on \\\"New CLient Credentials Client\\\" \\n\\nFor the full tutorial step-by-step [here the official SuiteCRM Docs](https://docs.suitecrm.com/developer/api/developer-setup-guide/json-api/#_generate_private_and_public_key_for_oauth2)\"},\"typeVersion\":1},{\"id\":\"50f65f6b-8045-4cb1-9e3d-489f27cdb038\",\"name\":\"Update Lead\",\"type\":\"n8n-nodes-base.googleSheets\",\"position\":[2040,920],\"parameters\":{\"columns\":{\"value\":{\"DATE\":\"={{ $now.format('dd/LL/yyyy HH:mm:ss') }}\",\"NAME\":\"={{ $json.data.attributes.first_name }}\",\"EMAIL\":\"={{ $json.data.attributes.email1 }}\",\"PHONE\":\"={{ $json.data.attributes.phone_mobile }}\",\"COUPON\":\"={{ $('Get Coupon').item.json.COUPON }}\",\"ID LEAD\":\"={{ $json.data.id }}\",\"SURNAME\":\"={{ $json.data.attributes.last_name }}\"},\"schema\":[{\"id\":\"NAME\",\"type\":\"string\",\"display\":true,\"required\":false,\"displayName\":\"NAME\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"SURNAME\",\"type\":\"string\",\"display\":true,\"required\":false,\"displayName\":\"SURNAME\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"EMAIL\",\"type\":\"string\",\"display\":true,\"required\":false,\"displayName\":\"EMAIL\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"PHONE\",\"type\":\"string\",\"display\":true,\"required\":false,\"displayName\":\"PHONE\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"COUPON\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"COUPON\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"DATE\",\"type\":\"string\",\"display\":true,\"required\":false,\"displayName\":\"DATE\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"ID LEAD\",\"type\":\"string\",\"display\":true,\"required\":false,\"displayName\":\"ID LEAD\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"row_number\",\"type\":\"string\",\"display\":true,\"removed\":true,\"readOnly\":true,\"required\":false,\"displayName\":\"row_number\",\"defaultMatch\":false,\"canBeUsedToMatch\":true}],\"mappingMode\":\"defineBelow\",\"matchingColumns\":[\"COUPON\"],\"attemptToConvertTypes\":false,\"convertFieldsToString\":false},\"options\":{},\"operation\":\"update\",\"sheetName\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"gid=0\",\"cachedResultUrl\":\"https://docs.google.com/spreadsheets/d/1lnRZodxZSOA0QSuzkAb7ZJcfFfNXpX7NcxMdckMTN90/edit#gid=0\",\"cachedResultName\":\"Foglio1\"},\"documentId\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"1lnRZodxZSOA0QSuzkAb7ZJcfFfNXpX7NcxMdckMTN90\",\"cachedResultUrl\":\"https://docs.google.com/spreadsheets/d/1lnRZodxZSOA0QSuzkAb7ZJcfFfNXpX7NcxMdckMTN90/edit?usp=drivesdk\",\"cachedResultName\":\"Coupon\"}},\"credentials\":{\"googleSheetsOAuth2Api\":{\"id\":\"JYR6a64Qecd6t8Hb\",\"name\":\"Google Sheets account\"}},\"typeVersion\":4.5}],\"active\":false,\"pinData\":{},\"settings\":{\"executionOrder\":\"v1\"},\"versionId\":\"\",\"connections\":{\"Get Coupon\":{\"main\":[[{\"node\":\"Token SuiteCRM\",\"type\":\"main\",\"index\":0}]]},\"Form Fields\":{\"main\":[[{\"node\":\"Duplicate Lead?\",\"type\":\"main\",\"index\":0}]]},\"Is Duplicate?\":{\"main\":[[],[{\"node\":\"Get Coupon\",\"type\":\"main\",\"index\":0}]]},\"Token SuiteCRM\":{\"main\":[[{\"node\":\"Create Lead SuiteCRM\",\"type\":\"main\",\"index\":0}]]},\"Duplicate Lead?\":{\"main\":[[{\"node\":\"Is Duplicate?\",\"type\":\"main\",\"index\":0}]]},\"On form submission\":{\"main\":[[{\"node\":\"Form Fields\",\"type\":\"main\",\"index\":0}]]},\"Create Lead SuiteCRM\":{\"main\":[[{\"node\":\"Update Lead\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "Drive-to-Store is a multi-channel marketing strategy that includes both the web and the physical context, with the aim of increasing the number of customers and sales in physical stores. This strategy guides potential customers from the online world to the physical point of sale through the provision of a coupon that can be spent in the store or on an e-commerce site.\n\nThe basic idea is to have a landing page with a form and a series of unique coupons to assign to leads as a \"reward\" for filling out the form.\n\nThis workflow is ideal for businesses looking to automate lead generation and management, especially when integrating with CRM systems like SuiteCRM and using Google Sheets for data tracking.\n\n### **How It Works**\n\n  1. **Form Submission** :\n\n     * The workflow starts with the **On form submission** node, which triggers when a user submits a form on a landing page. The form collects the user's name, surname, email, and phone number.\n  2. **Form Data Processing** :\n\n     * The **Form Fields** node extracts and sets the form data (name, surname, email, and phone) for use in subsequent steps.\n  3. **Duplicate Lead Check** :\n\n     * The **Duplicate Lead?** node checks if the submitted email already exists in a Google Sheets document. If the email is found, the workflow responds with a \"duplicate lead\" message (**Respond KO** node) and stops further processing.\n  4. **Coupon Retrieval** :\n\n     * If the email is not a duplicate, the **Get Coupon** node retrieves a coupon code from the Google Sheets document based on the lead's email.\n  5. **Lead Creation in SuiteCRM** :\n\n     * The **Create Lead SuiteCRM** node creates a new lead in SuiteCRM using the form data and the retrieved coupon code. The lead includes: \n       * First name, last name, email, phone number, and coupon code.\n  6. **Google Sheets Update** :\n\n     * The **Update Sheet** node updates the Google Sheets document with the newly created lead's details, including: \n       * Name, surname, email, phone, coupon code, lead ID, and the current date and time.\n  7. **Response to Webhook** :\n\n     * The **Respond OK** node sends a success response back to the webhook, indicating that the lead was created successfully.\n\n\n\n* * *\n\n### **Set Up Steps**\n\n  1. **Configure Form Trigger** :\n\n     * Set up the **On form submission** node to collect user data (name, surname, email, and phone) via a web form.\n  2. **Set Up Google Sheets Integration** :\n\n     * Configure the **Duplicate Lead?** , **Get Coupon** , and **Update Sheet** nodes to interact with the Google Sheets document. Ensure the document contains columns for email, coupon, lead ID, and other relevant fields.\n  3. **Set Up SuiteCRM Authentication** :\n\n     * Configure the **Token SuiteCRM** node with the appropriate client credentials (client ID and client secret) to obtain an access token from SuiteCRM.\n  4. **Set Up Lead Creation in SuiteCRM** :\n\n     * Configure the **Create Lead SuiteCRM** node to send a POST request to SuiteCRM's API to create a new lead. Include the form data and coupon code in the request body.\n  5. **Set Up Webhook Responses** :\n\n     * Configure the **Respond OK** and **Respond KO** nodes to send appropriate JSON responses back to the webhook based on whether the lead was created or if it was a duplicate.\n  6. **Test the Workflow** :\n\n     * Submit a test form to ensure the workflow correctly checks for duplicates, retrieves a coupon, creates a lead in SuiteCRM, and updates the Google Sheets document.\n  7. **Activate the Workflow** :\n\n     * Once tested, activate the workflow to automate the process of handling form submissions and lead creation.\n\n\n\n* * *\n\n### **Key Features**\n\n  * **Duplicate Lead Check** : Prevents duplicate leads by checking if the email already exists in the Google Sheets document.\n  * **Coupon Assignment** : Retrieves a coupon code from Google Sheets and assigns it to the new lead.\n  * **SuiteCRM Integration** : Automatically creates a new lead in SuiteCRM with the form data and coupon code.\n  * **Data Logging** : Logs all lead details in a Google Sheets document for tracking and analysis.\n  * **Webhook Responses** : Provides immediate feedback on whether the lead was created successfully or if it was a duplicate.\n\n\n",
  "crawled_at": "2025-05-26T02:18:12.749855",
  "readme_zh": "**到店引流**是一种融合线上与线下场景的多渠道营销策略，旨在提升实体店铺的客流量与销售额。该策略通过向潜在顾客提供可在实体店或电商平台使用的优惠券，将其从线上引导至线下消费场景。\n\n核心机制是设置包含表单的落地页，用户填写表单后可获得系统分配的唯一优惠券作为\"奖励\"。这一工作流特别适合希望实现潜在客户自动化管理与CRM系统（如SuiteCRM）对接的企业，配合Google表格进行数据追踪效果更佳。\n\n### **运作流程**\n\n1. **表单提交**  \n   - 用户提交落地页表单（含姓名、邮箱、电话）触发**表单提交**节点\n   \n2. **数据处理**  \n   - **表单字段**节点提取用户数据供后续步骤使用\n\n3. **重复客户校验**  \n   - **重复客户？**节点核查Google表格中是否存在该邮箱：若存在则通过**响应失败**节点终止流程\n\n4. **优惠券匹配**  \n   - 新客户触发**获取优惠券**节点，从Google表格提取对应优惠码\n\n5. **CRM建档**  \n   - **创建SuiteCRM客户**节点将用户数据与优惠券同步至SuiteCRM，包含：  \n     ✓ 姓名 ✓ 联系方式 ✓ 优惠码\n\n6. **数据归档**  \n   - **更新表格**节点在Google表格记录：  \n     ✓ 客户信息 ✓ 优惠码 ✓ CRM编号 ✓ 建档时间\n\n7. **结果反馈**  \n   - **响应成功**节点向Webhook返回建档结果\n\n* * *\n\n### **配置步骤**\n\n1. **表单触发器设置**  \n   - 配置**表单提交**节点收集用户四要素信息\n\n2. **Google表格对接**  \n   - 设置三个表格交互节点，确保包含：  \n     ✓ 邮箱校验列 ✓ 优惠券池 ✓ 客户ID字段\n\n3. **CRM鉴权配置**  \n   - 在**SuiteCRM令牌**节点配置API凭证（客户端ID/密钥）\n\n4. **客户创建接口**  \n   - 配置**创建SuiteCRM客户**节点POST请求，报文需包含：  \n     ✓ 表单数据 ✓ 优惠券代码\n\n5. **响应机制设置**  \n   - 分别配置成功/失败响应节点的JSON返回值\n\n6. **流程测试**  \n   - 完整测试：重复校验→优惠券匹配→CRM建档→表格更新\n\n7. **上线运行**  \n   - 测试通过后激活自动化流程\n\n* * *\n\n### **核心功能**\n\n✓ **重复过滤**：通过表格校验避免客户数据重复  \n✓ **智能发券**：自动匹配并绑定专属优惠券  \n✓ **CRM同步**：实时创建带营销标签的客户档案  \n✓ **数据看板**：全量记录客户获取路径与转化节点  \n✓ **即时反馈**：实时返回业务处理状态",
  "title_zh": "利用Google表格与SuiteCRM实现带优惠券的到店引流线索生成",
  "publish_date_zh": "最后更新于3个月前",
  "workflow_json_zh": "{\n  \"meta\": {\n    \"instanceId\": \"a4bfc93e975ca233ac45ed7c9227d84cf5a2329310525917adaf3312e10d5462\"\n  },\n  \"name\": \"Automate Drive-To-Store Lead Generation System (with coupon) on SuiteCRM\",\n  \"tags\": [],\n  \"nodes\": [\n    {\n      \"id\": \"53342c2a-f707-4ed0-9054-7928e6832745\",\n      \"name\": \"Token SuiteCRM\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1560,\n        920\n      ],\n      \"parameters\": {\n        \"url\": \"=https://SUITECRMURL/Api/access_token\",\n        \"options\": {},\n        \"requestMethod\": \"POST\",\n        \"bodyParametersUi\": {\n          \"parameter\": [\n            {\n              \"name\": \"grant_type\",\n              \"value\": \"client_credentials\"\n            },\n            {\n              \"name\": \"client_id\",\n              \"value\": \"CLIENTID\"\n            },\n            {\n              \"name\": \"client_secret\",\n              \"value\": \"CLIENTSECRET\"\n            }\n          ]\n        },\n        \"allowUnauthorizedCerts\": true\n      },\n      \"notesInFlow\": true,\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"18d04094-1ced-4431-9ba2-b9b33d76c453\",\n      \"name\": \"Create Lead SuiteCRM\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1800,\n        920\n      ],\n      \"parameters\": {\n        \"url\": \"https://SUITECRMURL/Api/V8/module\",\n        \"method\": \"POST\",\n        \"options\": {\n          \"response\": {\n            \"response\": {\n              \"responseFormat\": \"json\"\n            }\n          }\n        },\n        \"jsonBody\": \"={\\\"data\\\": \\n  {\\n  \\\"type\\\": \\\"Leads\\\",\\n  \\\"attributes\\\": { \\n  \\\"first_name\\\": \\\"{{ $('Form Fields').item.json.Name }}\\\",\\n  \\\"last_name\\\": \\\"{{ $('Form Fields').item.json.Surname }}\\\",\\n  \\\"email1\\\": \\\"{{ $('Form Fields').item.json.Email }}\\\",\\n  \\\"phone_mobile\\\":\\\"{{ $('Form Fields').item.json.Phone }}\\\",\\n  \\\"coupon_c\\\": \\\"{{ $('Get Coupon').item.json.COUPON }}\\\"\\n  }\\n  }\\n}\",\n        \"sendBody\": true,\n        \"sendHeaders\": true,\n        \"specifyBody\": \"json\",\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"Authorization\",\n              \"value\": \"=Bearer {{$node[\\\"Token SuiteCRM\\\"].json[\\\"access_token\\\"]}}\"\n            },\n            {\n              \"name\": \"Content-Type\",\n              \"value\": \"application/vnd.api+json\"\n            }\n          ]\n        }\n      },\n      \"notesInFlow\": true,\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"59b9c124-f6eb-457d-b3cb-2c831b66db85\",\n      \"name\": \"Webhook\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"position\": [\n        440,\n        1020\n      ],\n      \"webhookId\": \"4b98315d-782e-47a5-8fea-7d16155c811d\",\n      \"parameters\": {\n        \"path\": \"4b98315d-782e-47a5-8fea-7d16155c811d\",\n        \"options\": {},\n        \"httpMethod\": \"POST\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"75d6f561-754d-4153-8a85-12cb135a555c\",\n      \"name\": \"On form submission\",\n      \"type\": \"n8n-nodes-base.formTrigger\",\n      \"position\": [\n        440,\n        820\n      ],\n      \"webhookId\": \"63d1d84b-c41e-4d3d-961a-0aa2af830ceb\",\n      \"parameters\": {\n        \"options\": {},\n        \"formTitle\": \"Landing\",\n        \"formFields\": {\n          \"values\": [\n            {\n              \"fieldLabel\": \"Name\",\n              \"placeholder\": \"Name\",\n              \"requiredField\": true\n            },\n            {\n              \"fieldLabel\": \"Surname\",\n              \"placeholder\": \"Surname\",\n              \"requiredField\": true\n            },\n            {\n              \"fieldType\": \"email\",\n              \"fieldLabel\": \"Email\",\n              \"placeholder\": \"Email\",\n              \"requiredField\": true\n            },\n            {\n              \"fieldLabel\": \"Phone\",\n              \"placeholder\": \"Phone\",\n              \"requiredField\": true\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"e9eac3a2-0351-4457-ae1d-44d42974ab20\",\n      \"name\": \"Duplicate Lead?\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"position\": [\n        880,\n        820\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"filtersUI\": {\n          \"values\": [\n            {\n              \"lookupValue\": \"={{ $json.Email }}\",\n              \"lookupColumn\": \"EMAIL\"\n            }\n          ]\n        },\n        \"sheetName\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gid=0\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1lnRZodxZSOA0QSuzkAb7ZJcfFfNXpX7NcxMdckMTN90/edit#gid=0\",\n          \"cachedResultName\": \"Foglio1\"\n        },\n        \"documentId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"1lnRZodxZSOA0QSuzkAb7ZJcfFfNXpX7NcxMdckMTN90\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1lnRZodxZSOA0QSuzkAb7ZJcfFfNXpX7NcxMdckMTN90/edit?usp=drivesdk\",\n          \"cachedResultName\": \"Coupon\"\n        }\n      },\n      \"credentials\": {\n        \"googleSheetsOAuth2Api\": {\n          \"id\": \"JYR6a64Qecd6t8Hb\",\n          \"name\": \"Google Sheets account\"\n        }\n      },\n      \"typeVersion\": 4.5,\n      \"alwaysOutputData\": true\n    },\n    {\n      \"id\": \"a5ae5f5a-7028-495b-ad27-192561ce88d5\",\n      \"name\": \"Form Fields\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        680,\n        820\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"661d1475-f964-4a12-bfe7-88bf96851319\",\n              \"name\": \"Name\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.Name }}\"\n            },\n            {\n              \"id\": \"9991645d-c716-47db-80d6-850f3d64c782\",\n              \"name\": \"Surname\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.Surname }}\"\n            },\n            {\n              \"id\": \"c999afa6-2ec7-4f7f-bf3b-088a3597591c\",\n              \"name\": \"Email\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.Email }}\"\n            },\n            {\n              \"id\": \"f3faccdb-2412-4363-a0e3-f13b8f85b242\",\n              \"name\": \"Phone\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.Phone }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"9edb0d07-b4fb-42f8-9555-1d3caf8998c7\",\n      \"name\": \"Get Coupon\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"position\": [\n        1340,\n        920\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"returnFirstMatch\": true\n        },\n        \"filtersUI\": {\n          \"values\": [\n            {\n              \"lookupColumn\": \"ID LEAD\"\n            }\n          ]\n        },\n        \"sheetName\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gid=0\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1lnRZodxZSOA0QSuzkAb7ZJcfFfNXpX7NcxMdckMTN90/edit#gid=0\",\n          \"cachedResultName\": \"Foglio1\"\n        },\n        \"documentId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"1lnRZodxZSOA0QSuzkAb7ZJcfFfNXpX7NcxMdckMTN90\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1lnRZodxZSOA0QSuzkAb7ZJcfFfNXpX7NcxMdckMTN90/edit?usp=drivesdk\",\n          \"cachedResultName\": \"Coupon\"\n        }\n      },\n      \"credentials\": {\n        \"googleSheetsOAuth2Api\": {\n          \"id\": \"JYR6a64Qecd6t8Hb\",\n          \"name\": \"Google Sheets account\"\n        }\n      },\n      \"executeOnce\": false,\n      \"typeVersion\": 4.5\n    },\n    {\n      \"id\": \"9469dd95-04ac-4c74-abb3-674fec277f6e\",\n      \"name\": \"Respond OK\",\n      \"type\": \"n8n-nodes-base.respondToWebhook\",\n      \"position\": [\n        2300,\n        920\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"responseCode\": 200\n        },\n        \"respondWith\": \"json\",\n        \"responseBody\": \"{\\n  \\\"result\\\": \\\"OK\\\",\\n  \\\"reason\\\": \\\"lead created\\\"\\n}\"\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"5b81c406-d70b-4a36-b4f4-8941373958b9\",\n      \"name\": \"Respond KO\",\n      \"type\": \"n8n-nodes-base.respondToWebhook\",\n      \"position\": [\n        1320,\n        700\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"responseCode\": 200\n        },\n        \"respondWith\": \"json\",\n        \"responseBody\": \"{\\n  \\\"result\\\": \\\"KO\\\",\\n  \\\"reason\\\": \\\"duplicate lead\\\"\\n}\"\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"5fdf0eca-d1f6-4c9e-8e77-84d8e71bdb0e\",\n      \"name\": \"Is Duplicate?\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        1080,\n        820\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"9e3a8422-14f1-453e-bfed-4feecff34662\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"notEmpty\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $json.EMAIL }}\",\n              \"rightValue\": \"={{ $('Form Fields').item.json.email }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"e9cba682-bf5b-4efa-9d10-4fab5d02610a\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        420,\n        20\n      ],\n      \"parameters\": {\n        \"color\": 3,\n        \"width\": 540,\n        \"height\": 380,\n        \"content\": \"## 第一步\\n\\n创建如下所示的谷歌表格（只需填写“优惠券”这一列）\\n\\n[![2mXGVwB.md.png](https://iili.io/2mXGVwB.md.png)]\\n\\n这是[此工作流程](https://docs.google.com/spreadsheets/d/1lnRZodxZSOA0QSuzkAb7ZJcfFfNXpX7NcxMdckMTN90/edit?usp=drive_link)中使用的基础谷歌表格：\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"1c304620-368d-42bf-b0d2-de3f9d552e51\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        420,\n        440\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 540,\n        \"height\": 260,\n        \"content\": \"## 第二步 - 主流程\\n\\n本工作流特别适合希望通过自动化实现潜在客户生成与管理的企业，尤其是当需要与SuiteCRM等客户关系管理系统集成，并使用Google表格进行数据追踪时。\\n\\n若使用外部表单，请将webhook触发器与\\\"响应失败\\\"及\\\"响应成功\\\"两个网络钩子接入工作流。\\n\\n该流程兼容SuiteCRM 7.14.x及8.x版本。请注意在SuiteCRM中创建名为'coupon'的潜在客户自定义字段。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"6248c920-02f4-4407-881a-376d2a9dd904\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        660,\n        740\n      ],\n      \"parameters\": {\n        \"width\": 340,\n        \"height\": 240,\n        \"content\": \"确认该潜在客户是否已收到优惠券\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"0c07d1b7-b12f-4cf7-8d0c-1dd905365534\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1300,\n        860\n      ],\n      \"parameters\": {\n        \"width\": 180,\n        \"height\": 220,\n        \"content\": \"找到第一个可用的未分配优惠券\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"34167626-9041-4cce-baaf-e1ed2efe8378\",\n      \"name\": \"Sticky Note4\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1540,\n        700\n      ],\n      \"parameters\": {\n        \"width\": 400,\n        \"height\": 380,\n        \"content\": \"在Suite CRM中使用相关优惠券进入线索。替换SUITECRMURL、CLIENTSECRET和CLIENTID\\n\\n要创建CLIENTSECRET和CLIENTID，请前往管理员 -> Oauth2客户端与令牌 -> 点击\\\"新建客户端凭证客户端\\\"\\n\\n完整分步教程请参阅[SuiteCRM官方文档](https://docs.suitecrm.com/developer/api/developer-setup-guide/json-api/#_generate_private_and_public_key_for_oauth2)\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"50f65f6b-8045-4cb1-9e3d-489f27cdb038\",\n      \"name\": \"Update Lead\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"position\": [\n        2040,\n        920\n      ],\n      \"parameters\": {\n        \"columns\": {\n          \"value\": {\n            \"DATE\": \"={{ $now.format('dd/LL/yyyy HH:mm:ss') }}\",\n            \"NAME\": \"={{ $json.data.attributes.first_name }}\",\n            \"EMAIL\": \"={{ $json.data.attributes.email1 }}\",\n            \"PHONE\": \"={{ $json.data.attributes.phone_mobile }}\",\n            \"COUPON\": \"={{ $('Get Coupon').item.json.COUPON }}\",\n            \"ID LEAD\": \"={{ $json.data.id }}\",\n            \"SURNAME\": \"={{ $json.data.attributes.last_name }}\"\n          },\n          \"schema\": [\n            {\n              \"id\": \"NAME\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"NAME\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"SURNAME\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"SURNAME\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"EMAIL\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"EMAIL\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"PHONE\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"PHONE\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"COUPON\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"COUPON\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"DATE\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"DATE\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"ID LEAD\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"ID LEAD\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"row_number\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": true,\n              \"readOnly\": true,\n              \"required\": false,\n              \"displayName\": \"row_number\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            }\n          ],\n          \"mappingMode\": \"defineBelow\",\n          \"matchingColumns\": [\n            \"COUPON\"\n          ],\n          \"attemptToConvertTypes\": false,\n          \"convertFieldsToString\": false\n        },\n        \"options\": {},\n        \"operation\": \"update\",\n        \"sheetName\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gid=0\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1lnRZodxZSOA0QSuzkAb7ZJcfFfNXpX7NcxMdckMTN90/edit#gid=0\",\n          \"cachedResultName\": \"Foglio1\"\n        },\n        \"documentId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"1lnRZodxZSOA0QSuzkAb7ZJcfFfNXpX7NcxMdckMTN90\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1lnRZodxZSOA0QSuzkAb7ZJcfFfNXpX7NcxMdckMTN90/edit?usp=drivesdk\",\n          \"cachedResultName\": \"Coupon\"\n        }\n      },\n      \"credentials\": {\n        \"googleSheetsOAuth2Api\": {\n          \"id\": \"JYR6a64Qecd6t8Hb\",\n          \"name\": \"Google Sheets account\"\n        }\n      },\n      \"typeVersion\": 4.5\n    }\n  ],\n  \"active\": false,\n  \"pinData\": {},\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"\",\n  \"connections\": {\n    \"Get Coupon\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Token SuiteCRM\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Form Fields\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Duplicate Lead?\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Is Duplicate?\": {\n      \"main\": [\n        [],\n        [\n          {\n            \"node\": \"Get Coupon\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Token SuiteCRM\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Create Lead SuiteCRM\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Duplicate Lead?\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Is Duplicate?\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"On form submission\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Form Fields\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Create Lead SuiteCRM\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Update Lead\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}