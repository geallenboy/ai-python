{
  "url": "https://n8n.io/workflows/2135-enrich-new-leads-in-pipedrive-and-send-an-alert-to-slack-for-high-quality-ones/",
  "title": "Enrich new leads in Pipedrive and send an alert to Slack for high-quality ones",
  "author": "Niklas Hatje",
  "publish_date": "Last update a year ago",
  "publish_date_absolute": "",
  "categories": [
    {
      "name": "Sales"
    },
    {
      "name": "Marketing"
    }
  ],
  "workflow_json": "",
  "readme": "## Use Case\n\nThis workflow is beneficial when you're automatically adding new leads to your Pipedrive CRM. Usually, you'd have to manually review each lead to determine if they're a good fit. This process is time-consuming and increases the chances of missing important leads. This workflow ensures every new lead is promptly evaluated upon addition.\n\n## What this workflow does\n\nThe workflow runs every 5 minutes. On every run, it checks your new Pipedrive leads and enriches them with Clearbit. It then marks items as enriched and checks if the company of the new lead matches certain criteria (in this case if they are B2B and have more than 100 employees) and sends a Slack alert to a channel for every match.\n\n## Pre Conditions\n\nYou must have Pipedrive, Clearbit, and Slack accounts. You also need to set up the custom fields `Domain` and `Enriched at` in Pipedrive.\n\n## Setup\n\n  1. Go to Company Settings -> Data fields -> Organization and add `Domain` as a custom field\n  2. Go to Company Settings -> Data fields -> Leads and add `Enriched at` as a custom date field\n  3. Add your `Pipedrive`, `Clearbit` and `Slack` credentials.\n  4. Fill the `setup` node below. To get the ID of your custom domain fields, simply run the `Show only custom organization fields` and `Show only custom lead fields` nodes below and copy the keys of your `domain`, and `enriched at` fields.\n\n\n\n## How to adjust this workflow to your needs\n\n  * Modify the criteria to suit your definition of an interesting lead.\n  * If you only want to focus on interesting leads in Pipedrive, add a node that archives all others.\n\n\n\nThis workflow was built using n8n version 1.29.1\n",
  "crawled_at": "2025-05-25T21:21:02.547833",
  "readme_zh": "## 使用场景\n\n当您需要将新线索自动添加至Pipedrive CRM系统时，此工作流尤为实用。通常情况下，您需手动审核每条线索以判断其匹配度。这一过程不仅耗时，还容易遗漏重要线索。本工作流确保每条新增线索都能在录入时即刻获得评估。\n\n## 工作流功能\n\n该工作流每5分钟自动运行一次。每次执行时会检查Pipedrive中的新增线索，并通过Clearbit进行数据增强。随后标记已增强条目，并验证新线索所属企业是否符合预设标准（本例中设定为B2B类型且员工数超过100人），所有匹配项都会触发Slack频道通知。\n\n## 前置条件\n\n需已注册Pipedrive、Clearbit和Slack账户。同时需在Pipedrive中设置`Domain`（域名）和`Enriched at`（增强时间）两个自定义字段。\n\n## 配置步骤\n\n1. 进入公司设置 -> 数据字段 -> 组织模块，添加`Domain`自定义字段  \n2. 进入公司设置 -> 数据字段 -> 线索模块，添加`Enriched at`自定义日期字段  \n3. 配置`Pipedrive`、`Clearbit`和`Slack`的访问凭证  \n4. 填写下方`setup`节点。获取自定义字段ID：运行下方`仅显示组织自定义字段`和`仅显示线索自定义字段`节点，复制`domain`和`enriched at`字段的键值  \n\n## 自定义调整建议\n\n* 根据您对优质线索的定义修改筛选标准  \n* 若只需关注Pipedrive中的优质线索，可添加节点归档其余条目  \n\n本工作流基于n8n 1.29.1版本构建",
  "title_zh": "在Pipedrive中丰富新线索，并为高质量线索向Slack发送提醒",
  "publish_date_zh": "上次更新于一年前",
  "workflow_json_zh": "{\"meta\":{\"instanceId\":\"257476b1ef58bf3cb6a46e65fac7ee34a53a5e1a8492d5c6e4da5f87c9b82833\",\"templateId\":\"2131\"},\"nodes\":[{\"id\":\"2b12fb75-ec81-4d2c-a8bb-12ff2bb7e935\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[680,2.662790697674268],\"parameters\":{\"color\":5,\"width\":410.6749642132356,\"height\":428.2515771212859,\"content\":\"## 设置步骤\\n1. 前往公司设置 -> 数据字段 -> 组织，添加\\\"域名\\\"作为自定义字段\\n2. 前往公司设置 -> 数据字段 -> 线索，添加\\\"数据获取时间\\\"作为自定义日期字段\\n3. 添加您的`Pipedrive`、`Clearbit`和`Slack`账号凭证\\n4. 填写下方的`setup`节点。要获取自定义域名字段的ID，只需运行下方`仅显示自定义组织字段`和`仅显示自定义线索字段`节点，然后复制您的域名字段和\\\"数据获取时间\\\"字段对应的键值\"},\"typeVersion\":1},{\"id\":\"123ad2e5-f4f2-4411-bf03-5668124b8757\",\"name\":\"Sticky Note5\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1800,160],\"parameters\":{\"color\":7,\"width\":223.7628185364029,\"height\":276.3308728978709,\"content\":\"根据您设定的条件调整筛选潜在客户的标准，例如：收入、员工人数等。\"},\"typeVersion\":1},{\"id\":\"7725dc9e-5c93-475d-9522-f99b4fd1c81f\",\"name\":\"Enrich company\",\"type\":\"n8n-nodes-base.clearbit\",\"position\":[1460,140],\"parameters\":{\"domain\":\"={{ $json[$('Setup').first().json.domainCustomFieldId2]}}\",\"additionalFields\":{}},\"credentials\":{\"clearbitApi\":{\"id\":\"cKDImrinp9tg0ZHW\",\"name\":\"Clearbit account\"}},\"typeVersion\":1},{\"id\":\"f65855c3-d3d2-415b-bda2-e452d4d7e154\",\"name\":\"Get all leads\",\"type\":\"n8n-nodes-base.pipedrive\",\"position\":[1120,280],\"parameters\":{\"filters\":{\"archived_status\":\"not_archived\"},\"resource\":\"lead\",\"operation\":\"getAll\"},\"credentials\":{\"pipedriveApi\":{\"id\":\"M3l7gIG8DdOex6wX\",\"name\":\"Pipedrive account\"}},\"typeVersion\":1},{\"id\":\"39767a37-bd6d-422e-bc38-bfdfcbbf05af\",\"name\":\"Add Organization ID to data\",\"type\":\"n8n-nodes-base.set\",\"position\":[1640,140],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"71b4c743-fd69-4f5d-8c29-66b3672f7a2a\",\"name\":\"organization_id\",\"type\":\"number\",\"value\":\"={{ $('Get organization details').item.json.id }}\"}]},\"includeOtherFields\":true},\"typeVersion\":3.3},{\"id\":\"4263cd25-dcf3-4521-b716-0ce48d3b2c26\",\"name\":\"Keep leads that match the criteria\",\"type\":\"n8n-nodes-base.filter\",\"position\":[2320,260],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"1b31b826-e87d-425f-a65d-370b4b20f7e1\",\"operator\":{\"type\":\"boolean\",\"operation\":\"true\",\"singleValue\":true},\"leftValue\":\"={{ $json.tags.includes(\\\"B2B\\\") }}\",\"rightValue\":5000000},{\"id\":\"90ef79a7-807a-4894-ae8c-92f9d46e7177\",\"operator\":{\"type\":\"number\",\"operation\":\"gt\"},\"leftValue\":\"={{ $json.metrics.employees }}\",\"rightValue\":100}]}},\"typeVersion\":2},{\"id\":\"98578544-b03d-44aa-a64f-285f8a7cc371\",\"name\":\"Trigger every 5 minutes\",\"type\":\"n8n-nodes-base.scheduleTrigger\",\"position\":[540,280],\"parameters\":{\"rule\":{\"interval\":[{\"field\":\"minutes\"}]}},\"typeVersion\":1.1},{\"id\":\"69ace950-7f1e-469b-bfca-6c0c81f356b9\",\"name\":\"Setup\",\"type\":\"n8n-nodes-base.set\",\"position\":[820,280],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"dba31775-dce0-4f4c-ad61-790359197bb3\",\"name\":\"slackChannel\",\"type\":\"string\",\"value\":\"#yourChannel\"},{\"id\":\"f8206758-7a4f-414d-921c-6cfecd936335\",\"name\":\"domainCustomFieldId\",\"type\":\"string\",\"value\":\"<Run \\\"Show only custom organization fields\\\" and copy the key>\"},{\"id\":\"59c71724-f774-4d41-80e7-5fc76dd27c7d\",\"name\":\"enrichedAtCustomFieldId\",\"type\":\"string\",\"value\":\"<Run \\\"Show only custom lead fields\\\" and copy the key>\"},{\"id\":\"da4ec51e-cc5c-4512-b675-0888d6a0213e\",\"name\":\"enrichedAtCustomFieldId2\",\"type\":\"string\",\"value\":\"68a15ecb2e1255250617c1fd1c06385893334e3c\"},{\"id\":\"43544b80-88d3-44ad-9e36-634e9eeaf013\",\"name\":\"domainCustomFieldId2\",\"type\":\"string\",\"value\":\"ab26f671c92146268edacd244181e76579286e71\"}]}},\"typeVersion\":3.3},{\"id\":\"63db576a-6bb7-4215-88f3-98e304081b3e\",\"name\":\"Send alert to Slack\",\"type\":\"n8n-nodes-base.slack\",\"position\":[2520,260],\"parameters\":{\"text\":\"=New high-quality lead 🤑\\n*Company Name*: {{ $json.name }} \\n*Website*: {{ \\\"https://\\\" + $json.domain }}\\n*Revenue*: {{ $json.metrics.estimatedAnnualRevenue}}\\n*Number of employees*: {{ $json.metrics.employees }}\",\"select\":\"channel\",\"channelId\":{\"__rl\":true,\"mode\":\"name\",\"value\":\"={{ $('Setup').item.json.slackChannel }}\"},\"otherOptions\":{}},\"credentials\":{\"slackApi\":{\"id\":\"6\",\"name\":\"Idea Bot\"}},\"typeVersion\":2.1},{\"id\":\"9bef53b4-3732-4ce5-a72c-81c65a533196\",\"name\":\"Merge data\",\"type\":\"n8n-nodes-base.merge\",\"position\":[1880,260],\"parameters\":{\"mode\":\"combine\",\"options\":{\"clashHandling\":{\"values\":{\"resolveClash\":\"preferInput2\"}}},\"joinMode\":\"enrichInput2\",\"mergeByFields\":{\"values\":[{\"field1\":\"organization_id\",\"field2\":\"organization_id\"}]}},\"typeVersion\":2.1},{\"id\":\"9c8d106a-ffc6-4295-bc22-8ceddeb0061f\",\"name\":\"Get organization details\",\"type\":\"n8n-nodes-base.pipedrive\",\"position\":[1280,140],\"parameters\":{\"resource\":\"organization\",\"operation\":\"get\",\"organizationId\":\"={{ $json.organization_id }}\"},\"credentials\":{\"pipedriveApi\":{\"id\":\"M3l7gIG8DdOex6wX\",\"name\":\"Pipedrive account\"}},\"typeVersion\":1},{\"id\":\"632477f4-77d1-4c87-a819-2f7022fa6f23\",\"name\":\"Get all organization keys\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[680,620],\"parameters\":{\"url\":\"https://api.pipedrive.com/v1/organizationFields\",\"options\":{},\"sendQuery\":true,\"authentication\":\"predefinedCredentialType\",\"queryParameters\":{\"parameters\":[{}]},\"nodeCredentialType\":\"pipedriveApi\"},\"credentials\":{\"pipedriveApi\":{\"id\":\"M3l7gIG8DdOex6wX\",\"name\":\"Pipedrive account\"}},\"typeVersion\":4.1},{\"id\":\"f12c4e56-895d-4f34-8924-c99f5e5fefec\",\"name\":\"Sticky Note6\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[997,520],\"parameters\":{\"width\":187.68142318756514,\"height\":276.3308728978709,\"content\":\"运行我来查找您的自定义域字段的Id\"},\"typeVersion\":1},{\"id\":\"229db444-ac48-4557-b393-4dcdc69130fd\",\"name\":\"Sticky Note7\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1597,520],\"parameters\":{\"width\":187.68142318756514,\"height\":276.3308728978709,\"content\":\"运行我来查找您富集在域字段中的Id\"},\"typeVersion\":1},{\"id\":\"ea4b0c82-e52b-4a45-9d3f-7b28b8959574\",\"name\":\"Get all lead keys\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[1260,620],\"parameters\":{\"url\":\"https://api.pipedrive.com/v1/leadFields\",\"options\":{},\"sendQuery\":true,\"authentication\":\"predefinedCredentialType\",\"queryParameters\":{\"parameters\":[{}]},\"nodeCredentialType\":\"pipedriveApi\"},\"credentials\":{\"pipedriveApi\":{\"id\":\"M3l7gIG8DdOex6wX\",\"name\":\"Pipedrive account\"}},\"typeVersion\":4.1},{\"id\":\"a74a2122-ddd5-4239-baa3-ebbc3de15e03\",\"name\":\"Split out lead field data\",\"type\":\"n8n-nodes-base.splitOut\",\"position\":[1440,620],\"parameters\":{\"options\":{},\"fieldToSplitOut\":\"data\"},\"typeVersion\":1},{\"id\":\"84fded6b-bdeb-4863-b54c-01faf6cb64cc\",\"name\":\"Split out organization field\",\"type\":\"n8n-nodes-base.splitOut\",\"position\":[860,620],\"parameters\":{\"options\":{},\"fieldToSplitOut\":\"data\"},\"typeVersion\":1},{\"id\":\"9d9c502e-ccf2-40f9-ae91-7008532e5528\",\"name\":\"Show only custom lead fields\",\"type\":\"n8n-nodes-base.filter\",\"position\":[1640,620],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"b21201d0-7f9c-417c-ab02-fbaea23a8d24\",\"operator\":{\"type\":\"boolean\",\"operation\":\"true\",\"singleValue\":true},\"leftValue\":\"={{ $json.edit_flag }}\",\"rightValue\":\"\"}]}},\"typeVersion\":2},{\"id\":\"a53f58ee-9649-42bc-bee4-b70eea6a0c63\",\"name\":\"Show only custom organization fields\",\"type\":\"n8n-nodes-base.filter\",\"position\":[1040,620],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"b21201d0-7f9c-417c-ab02-fbaea23a8d24\",\"operator\":{\"type\":\"boolean\",\"operation\":\"true\",\"singleValue\":true},\"leftValue\":\"={{ $json.edit_flag }}\",\"rightValue\":\"\"}]}},\"typeVersion\":2},{\"id\":\"f9fa198a-860c-460f-ae82-172c71b5a838\",\"name\":\"Mark lead as enriched in Pipedrive\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[2100,260],\"parameters\":{\"url\":\"=https://api.pipedrive.com/v1/leads/{{ $json.id }}\",\"method\":\"PATCH\",\"options\":{},\"sendBody\":true,\"authentication\":\"predefinedCredentialType\",\"bodyParameters\":{\"parameters\":[{\"name\":\"={{ $('Setup').first().json.enrichedAtCustomFieldId2 }}\",\"value\":\"={{ $now.format('yyyy-MM-dd') }}\"}]},\"nodeCredentialType\":\"pipedriveApi\"},\"credentials\":{\"pipedriveApi\":{\"id\":\"M3l7gIG8DdOex6wX\",\"name\":\"Pipedrive account\"}},\"typeVersion\":4.1}],\"pinData\":{},\"connections\":{\"Setup\":{\"main\":[[{\"node\":\"Get all leads\",\"type\":\"main\",\"index\":0}]]},\"Merge data\":{\"main\":[[{\"node\":\"Mark lead as enriched in Pipedrive\",\"type\":\"main\",\"index\":0}]]},\"Get all leads\":{\"main\":[[{\"node\":\"Get organization details\",\"type\":\"main\",\"index\":0},{\"node\":\"Merge data\",\"type\":\"main\",\"index\":1}]]},\"Enrich company\":{\"main\":[[{\"node\":\"Add Organization ID to data\",\"type\":\"main\",\"index\":0}]]},\"Get all lead keys\":{\"main\":[[{\"node\":\"Split out lead field data\",\"type\":\"main\",\"index\":0}]]},\"Trigger every 5 minutes\":{\"main\":[[{\"node\":\"Setup\",\"type\":\"main\",\"index\":0}]]},\"Get organization details\":{\"main\":[[{\"node\":\"Enrich company\",\"type\":\"main\",\"index\":0}]]},\"Get all organization keys\":{\"main\":[[{\"node\":\"Split out organization field\",\"type\":\"main\",\"index\":0}]]},\"Split out lead field data\":{\"main\":[[{\"node\":\"Show only custom lead fields\",\"type\":\"main\",\"index\":0}]]},\"Add Organization ID to data\":{\"main\":[[{\"node\":\"Merge data\",\"type\":\"main\",\"index\":0}]]},\"Split out organization field\":{\"main\":[[{\"node\":\"Show only custom organization fields\",\"type\":\"main\",\"index\":0}]]},\"Keep leads that match the criteria\":{\"main\":[[{\"node\":\"Send alert to Slack\",\"type\":\"main\",\"index\":0}]]},\"Mark lead as enriched in Pipedrive\":{\"main\":[[{\"node\":\"Keep leads that match the criteria\",\"type\":\"main\",\"index\":0}]]}}}"
}