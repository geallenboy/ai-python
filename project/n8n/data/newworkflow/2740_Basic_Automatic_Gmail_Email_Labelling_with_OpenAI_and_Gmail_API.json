{
  "url": "https://n8n.io/workflows/2740-basic-automatic-gmail-email-labelling-with-openai-and-gmail-api/",
  "title": "Basic Automatic Gmail Email Labelling with OpenAI and Gmail API",
  "author": "Martijn Kerver",
  "publish_date": "Last update 4 months ago",
  "publish_date_absolute": "2025-01-26",
  "categories": [
    {
      "name": "AI"
    }
  ],
  "workflow_json": "{\"nodes\":[{\"id\":\"2a41e2da-19f7-4c31-ab93-3a534db3179e\",\"name\":\"Gmail Trigger\",\"type\":\"n8n-nodes-base.gmailTrigger\",\"position\":[-360,-260],\"parameters\":{\"filters\":{},\"pollTimes\":{\"item\":[{\"mode\":\"everyX\",\"unit\":\"minutes\",\"value\":5}]}},\"credentials\":{\"gmailOAuth2\":{\"id\":\"10LJ3tXKoUfexiKU\",\"name\":\"Gmail account\"}},\"typeVersion\":1.2},{\"id\":\"a25e0e42-8eab-49c5-a553-797da40eb623\",\"name\":\"OpenAI Chat Model1\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\"position\":[-220,-60],\"parameters\":{\"options\":{\"maxTokens\":4096}},\"credentials\":{\"openAiApi\":{\"id\":\"qR44iMsUYcLrhdR0\",\"name\":\"OpenAi account\"}},\"notesInFlow\":false,\"typeVersion\":1},{\"id\":\"cf437748-a0df-42a2-b1ca-f93162d85bfe\",\"name\":\"Gmail - read labels\",\"type\":\"n8n-nodes-base.gmailTool\",\"position\":[80,-40],\"webhookId\":\"d8ec9401-a9ff-4fe2-9c1e-5a8036cd96c9\",\"parameters\":{\"resource\":\"label\",\"returnAll\":true,\"descriptionType\":\"manual\",\"toolDescription\":\"Tool to read all existing gmail labels\"},\"credentials\":{\"gmailOAuth2\":{\"id\":\"10LJ3tXKoUfexiKU\",\"name\":\"Gmail account\"}},\"typeVersion\":2.1},{\"id\":\"152f1970-7a1f-4977-9c21-64b69242d3a9\",\"name\":\"Gmail - get message\",\"type\":\"n8n-nodes-base.gmailTool\",\"position\":[260,-40],\"webhookId\":\"d8ec9401-a9ff-4fe2-9c1e-5a8036cd96c9\",\"parameters\":{\"messageId\":\"={{ $fromAI('gmail_message_id', 'id of the gmail message, like 1944fdc33f544369', 'string') }}\",\"operation\":\"get\",\"descriptionType\":\"manual\",\"toolDescription\":\"Tool to read a specific message based on the message ID\"},\"credentials\":{\"gmailOAuth2\":{\"id\":\"10LJ3tXKoUfexiKU\",\"name\":\"Gmail account\"}},\"typeVersion\":2.1},{\"id\":\"ae09cedc-9675-4080-bcdc-3d6c4e4bc490\",\"name\":\"Gmail - add label to message\",\"type\":\"n8n-nodes-base.gmailTool\",\"position\":[460,-40],\"webhookId\":\"7a87b026-1c6e-40e1-a062-aefdd1af1585\",\"parameters\":{\"labelIds\":\"={{ $fromAI('gmail_categories', 'array of label ids') }}\",\"messageId\":\"={{ $fromAI('gmail_message_id') }}\",\"operation\":\"addLabels\",\"descriptionType\":\"manual\",\"toolDescription\":\"Tool to add label to message\"},\"credentials\":{\"gmailOAuth2\":{\"id\":\"10LJ3tXKoUfexiKU\",\"name\":\"Gmail account\"}},\"typeVersion\":2.1},{\"id\":\"be4a92ab-d3ab-451b-8655-172851f68628\",\"name\":\"Gmail - create label\",\"type\":\"n8n-nodes-base.gmailTool\",\"position\":[640,-40],\"webhookId\":\"d8ec9401-a9ff-4fe2-9c1e-5a8036cd96c9\",\"parameters\":{\"name\":\"={{ $fromAI('new_label_name', 'new label name', 'string' ) }} \",\"options\":{},\"resource\":\"label\",\"operation\":\"create\",\"descriptionType\":\"manual\",\"toolDescription\":\"Tool to create a new label, only use if label does not already exist\"},\"credentials\":{\"gmailOAuth2\":{\"id\":\"10LJ3tXKoUfexiKU\",\"name\":\"Gmail account\"}},\"typeVersion\":2.1},{\"id\":\"a40466d2-2fe3-4a97-98fe-b14cc38cc141\",\"name\":\"Gmail labelling agent\",\"type\":\"@n8n/n8n-nodes-langchain.agent\",\"notes\":\"Objective:\\nAutomatically categorize incoming emails based on existing Gmail labels or create a new label if none match.\\n\\nTools:\\n- Get message\\n- Read all labels\\n- Create label\\n- Assign label to message\\n\\nInstructions:\\n\\nLabel Matching:\\n\\nAnalyze the email's subject, sender, recipient, keywords, and content.\\nCompare with existing Gmail labels to find the most relevant match.\\nLabel Assignment:\\n\\nAssign the email to the most appropriate existing label.`\\nRemove the inbox label if the email is of less importance (like ads, promotions, aka \\\"Reclame\\\"), keep normal and important emails in the inbox.\\nIf no suitable label exists, create a new label based on the existing labels. Try reusing existing labels as much as possible. Always create a label as a sublabel, if no label applies, if the main label already exists, create the new label under the existing label, if no main label exists, create the label AI and create the new label under this label.\\nLabel Creation:\\n\\nEnsure new labels align with the structure of existing ones, including capitalization, delimiters, and prefixes.\\nExamples:\\n\\nIf the email subject is \\\"Project Alpha Update,\\\" assign to [Project Alpha] if it exists.\\nFor \\\"New Vendor Inquiry,\\\" create \\\"Vendor Inquiry\\\" if no relevant label exists.\\nOutcome:\\nEmails are consistently categorized under the appropriate or newly created labels, maintaining Gmail's organizational structure.\",\"onError\":\"continueErrorOutput\",\"position\":[-60,-260],\"parameters\":{\"text\":\"=Label the email based on the details below:\\n{{ JSON.stringify($json) }}\",\"options\":{\"maxIterations\":5,\"systemMessage\":\"Objective:\\nAutomatically categorize incoming emails based on existing Gmail labels or create a new label if none match.\\n\\nTools:\\n- Get message\\n- Read all labels\\n- Create label\\n- Assign label to message\\n\\nInstructions:\\n\\nLabel Matching:\\n\\nAnalyze the email's subject, sender, recipient, keywords, and content.\\nCompare with existing Gmail labels to find the most relevant match.\\nLabel Assignment:\\n\\nAssign the email to the most appropriate existing label.`\\nRemove the inbox label if the email is of less importance (like ads, promotions, aka \\\"Reclame\\\"), keep normal and important emails in the inbox.\\nIf no suitable label exists, create a new label based on the existing labels. Try reusing existing labels as much as possible. Always create a label as a sublabel, if no label applies, if the main label already exists, create the new label under the existing label, if no main label exists, create the label AI and create the new label under this label.\\nLabel Creation:\\n\\nEnsure new labels align with the structure of existing ones, including capitalization, delimiters, and prefixes.\\nExamples:\\n\\nIf the email subject is \\\"Project Alpha Update,\\\" assign to [Project Alpha] if it exists.\\nFor \\\"New Vendor Inquiry,\\\" create \\\"Vendor Inquiry\\\" if no relevant label exists.\\nOutcome:\\nEmails are consistently categorized under the appropriate or newly created labels, maintaining Gmail's organizational structure.\"},\"promptType\":\"define\"},\"notesInFlow\":true,\"retryOnFail\":false,\"typeVersion\":1.7},{\"id\":\"6b514df4-761c-4072-abf8-d572ee4b8030\",\"name\":\"Window Buffer Memory\",\"type\":\"@n8n/n8n-nodes-langchain.memoryBufferWindow\",\"position\":[-60,-40],\"parameters\":{\"sessionKey\":\"={{ $json.id }}\",\"sessionIdType\":\"customKey\"},\"typeVersion\":1.3},{\"id\":\"f06717ed-00d7-4a99-a78c-53217a0067e7\",\"name\":\"Wait\",\"type\":\"n8n-nodes-base.wait\",\"position\":[-220,-260],\"webhookId\":\"2066b863-4526-40cf-90aa-82229895a73c\",\"parameters\":{\"amount\":1},\"typeVersion\":1.1},{\"id\":\"f6084fc3-2b6b-488f-b212-f179435e1a63\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-640,-300],\"parameters\":{\"content\":\"## Gmail trigger\\nPoll Gmail every x minutes, trigger when a new email is received.\\n\\n- Gmail API\"},\"typeVersion\":1},{\"id\":\"5ede55a4-52ae-48c0-969e-afa45d19f2f0\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[380,-960],\"parameters\":{\"width\":780,\"height\":840,\"content\":\"## Gmail labelling agent\\n- Read the message\\n- Read existing labels\\n- Create a new label if needed\\n- Assign label to message\\n\\n----\\n\\nObjective:\\nAutomatically categorize incoming emails based on existing Gmail labels or create a new label if none match.\\n\\nTools:\\n- Get message\\n- Read all labels\\n- Create label\\n- Assign label to message\\n\\nInstructions:\\n\\nLabel Matching:\\n\\nAnalyze the email's subject, sender, recipient, keywords, and content.\\nCompare with existing Gmail labels to find the most relevant match.\\nLabel Assignment:\\n\\nAssign the email to the most appropriate existing label.`\\nRemove the inbox label if the email is of less importance (like ads, promotions, aka \\\"Reclame\\\"), keep normal and important emails in the inbox.\\nIf no suitable label exists, create a new label based on the existing labels. Try reusing existing labels as much as possible. Always create a label as a sublabel, if no label applies, if the main label already exists, create the new label under the existing label, if no main label exists, create the label AI and create the new label under this label.\\nLabel Creation:\\n\\nEnsure new labels align with the structure of existing ones, including capitalization, delimiters, and prefixes.\\nExamples:\\n\\nIf the email subject is \\\"Project Alpha Update,\\\" assign to [Project Alpha] if it exists.\\nFor \\\"New Vendor Inquiry,\\\" create \\\"Vendor Inquiry\\\" if no relevant label exists.\\nOutcome:\\nEmails are consistently categorized under the appropriate or newly created labels, maintaining Gmail's organizational structure.\"},\"typeVersion\":1},{\"id\":\"7c8bb6de-b729-4c8e-90c2-641d173ed3dd\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[160,160],\"parameters\":{\"width\":440,\"content\":\"## Gmail API\\n- Add credentials \"},\"typeVersion\":1},{\"id\":\"e9d05013-9546-426f-bdc7-45199dbfc72a\",\"name\":\"Sticky Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-580,80],\"parameters\":{\"width\":440,\"content\":\"## OpenAI\\n- Add credentials \"},\"typeVersion\":1}],\"pinData\":{},\"connections\":{\"Wait\":{\"main\":[[{\"node\":\"Gmail labelling agent\",\"type\":\"main\",\"index\":0}]]},\"Gmail Trigger\":{\"main\":[[{\"node\":\"Wait\",\"type\":\"main\",\"index\":0}]]},\"OpenAI Chat Model1\":{\"ai_languageModel\":[[{\"node\":\"Gmail labelling agent\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"Gmail - get message\":{\"ai_tool\":[[{\"node\":\"Gmail labelling agent\",\"type\":\"ai_tool\",\"index\":0}]]},\"Gmail - read labels\":{\"ai_tool\":[[{\"node\":\"Gmail labelling agent\",\"type\":\"ai_tool\",\"index\":0}]]},\"Gmail - create label\":{\"ai_tool\":[[{\"node\":\"Gmail labelling agent\",\"type\":\"ai_tool\",\"index\":0}]]},\"Window Buffer Memory\":{\"ai_memory\":[[{\"node\":\"Gmail labelling agent\",\"type\":\"ai_memory\",\"index\":0}]]},\"Gmail - add label to message\":{\"ai_tool\":[[{\"node\":\"Gmail labelling agent\",\"type\":\"ai_tool\",\"index\":0}]]}}}",
  "readme": "## Description\n\nThis workflow automates email categorization in Gmail using the Gmail API and OpenAI's language model. It periodically checks for new emails, reads their content, and categorizes them based on existing Gmail labels. If no matching label is found, the workflow creates a new label and assigns it to the email.\n\n## Key Features\n\n  * **Polling for Emails** : The workflow triggers every 5 minutes to check for new emails using the Gmail Trigger node.\n  * **Reading Labels** : Existing Gmail labels are fetched to determine the most relevant match for email categorization.\n  * **Dynamic Labeling** : If no existing label matches, a new label is created dynamically based on the email's content.\n  * **OpenAI Integration** : The workflow uses OpenAI's Chat model to analyze email content and suggest or create appropriate labels.\n  * **Email Categorization** : Labels are applied to emails, ensuring they are organized in Gmail's structure. The workflow also removes less relevant emails (e.g., ads) from the inbox.\n\n\n\n## Nodes in Use\n\n  1. **Gmail Trigger** : Polls Gmail every 5 minutes for new emails.\n  2. **Gmail - Read Labels** : Fetches all existing Gmail labels.\n  3. **Gmail - Get Message** : Retrieves the full content of a specific email.\n  4. **Gmail - Add Label to Message** : Assigns a chosen label to the email.\n  5. **Gmail - Create Label** : Creates a new label if necessary.\n  6. **OpenAI Chat Model** : Analyzes email content for categorization.\n  7. **Memory Buffer** : Retains context for email analysis across multiple iterations.\n  8. **Wait Node** : Adds a buffer period to manage email processing.\n\n\n\n## Prerequisites\n\n  * **Gmail API Setup** : Ensure Gmail OAuth2 credentials are configured in n8n.\n  * **OpenAI API Key** : Configure OpenAI credentials for email analysis.\n  * **Labeling Standards** : Maintain a consistent Gmail label structure for better organization.\n\n\n\n## Instructions\n\n  1. Add your Gmail API credentials to the Gmail nodes.\n  2. Add your OpenAI API credentials to the OpenAI Chat Model node.\n  3. Activate the workflow. It will start polling for new emails every 5 minutes.\n  4. Monitor and refine the categorization logic if necessary to ensure alignment with Gmail's organizational needs.\n\n\n\n## Use Case\n\nIdeal for individuals or teams handling high email volumes who want to maintain an organized inbox and automate repetitive categorization tasks.\n\nNote: You can improve the prompt to get better results from the agent by giving it more personal rules on how to categorize.\n",
  "crawled_at": "2025-05-26T01:51:50.694589",
  "readme_zh": "## 功能描述\n\n本工作流通过Gmail API与OpenAI语言模型实现邮件自动分类。系统会定期检查新邮件内容，并基于现有Gmail标签进行分类。若未找到匹配标签，工作流将自动创建新标签并关联邮件。\n\n## 核心功能\n\n* **邮件轮询机制**：每5分钟通过Gmail触发器节点自动扫描新邮件\n* **标签读取功能**：获取现有Gmail标签库以确定最佳匹配分类\n* **动态标签管理**：根据邮件内容智能创建新分类标签\n* **OpenAI智能分析**：调用OpenAI聊天模型解析邮件内容并生成标签建议\n* **智能归类系统**：自动为邮件打标归档，同时过滤广告类等低优先级邮件\n\n## 使用节点\n\n1. **Gmail触发器**：每5分钟轮询收件箱\n2. **标签读取器**：获取现有标签体系\n3. **邮件解析器**：提取完整邮件内容\n4. **标签标注器**：为邮件添加分类标签  \n5. **标签创建器**：动态生成新标签\n6. **OpenAI智能模型**：执行邮件内容分析\n7. **记忆缓冲池**：保持跨流程的上下文关联\n8. **延时控制器**：管理邮件处理间隔\n\n## 环境准备\n\n* **Gmail API配置**：需在n8n平台完成OAuth2认证\n* **OpenAI密钥**：配置智能分析所需的API密钥\n* **标签规范**：建议预先建立统一的标签分类体系\n\n## 操作指南\n\n1. 在Gmail节点配置API接入凭证\n2. 为OpenAI节点添加API密钥\n3. 启用工作流后，系统将每5分钟自动处理新邮件\n4. 可根据实际需求优化分类逻辑\n\n## 适用场景\n\n特别适合邮件处理量大的个人或团队，可有效实现收件箱自动化管理，减少重复分类操作。\n\n注：通过提供更详细的分类规则指引，可进一步提升AI代理的标签生成准确率。",
  "title_zh": "使用OpenAI和Gmail API实现基础自动邮件标签分类",
  "publish_date_zh": "最后更新于3个月前",
  "workflow_json_zh": "{\"nodes\":[{\"id\":\"2a41e2da-19f7-4c31-ab93-3a534db3179e\",\"name\":\"Gmail Trigger\",\"type\":\"n8n-nodes-base.gmailTrigger\",\"position\":[-360,-260],\"parameters\":{\"filters\":{},\"pollTimes\":{\"item\":[{\"mode\":\"everyX\",\"unit\":\"minutes\",\"value\":5}]}},\"credentials\":{\"gmailOAuth2\":{\"id\":\"10LJ3tXKoUfexiKU\",\"name\":\"Gmail account\"}},\"typeVersion\":1.2},{\"id\":\"a25e0e42-8eab-49c5-a553-797da40eb623\",\"name\":\"OpenAI Chat Model1\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\"position\":[-220,-60],\"parameters\":{\"options\":{\"maxTokens\":4096}},\"credentials\":{\"openAiApi\":{\"id\":\"qR44iMsUYcLrhdR0\",\"name\":\"OpenAi account\"}},\"notesInFlow\":false,\"typeVersion\":1},{\"id\":\"cf437748-a0df-42a2-b1ca-f93162d85bfe\",\"name\":\"Gmail - read labels\",\"type\":\"n8n-nodes-base.gmailTool\",\"position\":[80,-40],\"webhookId\":\"d8ec9401-a9ff-4fe2-9c1e-5a8036cd96c9\",\"parameters\":{\"resource\":\"label\",\"returnAll\":true,\"descriptionType\":\"manual\",\"toolDescription\":\"Tool to read all existing gmail labels\"},\"credentials\":{\"gmailOAuth2\":{\"id\":\"10LJ3tXKoUfexiKU\",\"name\":\"Gmail account\"}},\"typeVersion\":2.1},{\"id\":\"152f1970-7a1f-4977-9c21-64b69242d3a9\",\"name\":\"Gmail - get message\",\"type\":\"n8n-nodes-base.gmailTool\",\"position\":[260,-40],\"webhookId\":\"d8ec9401-a9ff-4fe2-9c1e-5a8036cd96c9\",\"parameters\":{\"messageId\":\"={{ $fromAI('gmail_message_id', 'id of the gmail message, like 1944fdc33f544369', 'string') }}\",\"operation\":\"get\",\"descriptionType\":\"manual\",\"toolDescription\":\"Tool to read a specific message based on the message ID\"},\"credentials\":{\"gmailOAuth2\":{\"id\":\"10LJ3tXKoUfexiKU\",\"name\":\"Gmail account\"}},\"typeVersion\":2.1},{\"id\":\"ae09cedc-9675-4080-bcdc-3d6c4e4bc490\",\"name\":\"Gmail - add label to message\",\"type\":\"n8n-nodes-base.gmailTool\",\"position\":[460,-40],\"webhookId\":\"7a87b026-1c6e-40e1-a062-aefdd1af1585\",\"parameters\":{\"labelIds\":\"={{ $fromAI('gmail_categories', 'array of label ids') }}\",\"messageId\":\"={{ $fromAI('gmail_message_id') }}\",\"operation\":\"addLabels\",\"descriptionType\":\"manual\",\"toolDescription\":\"Tool to add label to message\"},\"credentials\":{\"gmailOAuth2\":{\"id\":\"10LJ3tXKoUfexiKU\",\"name\":\"Gmail account\"}},\"typeVersion\":2.1},{\"id\":\"be4a92ab-d3ab-451b-8655-172851f68628\",\"name\":\"Gmail - create label\",\"type\":\"n8n-nodes-base.gmailTool\",\"position\":[640,-40],\"webhookId\":\"d8ec9401-a9ff-4fe2-9c1e-5a8036cd96c9\",\"parameters\":{\"name\":\"={{ $fromAI('new_label_name', 'new label name', 'string' ) }} \",\"options\":{},\"resource\":\"label\",\"operation\":\"create\",\"descriptionType\":\"manual\",\"toolDescription\":\"Tool to create a new label, only use if label does not already exist\"},\"credentials\":{\"gmailOAuth2\":{\"id\":\"10LJ3tXKoUfexiKU\",\"name\":\"Gmail account\"}},\"typeVersion\":2.1},{\"id\":\"a40466d2-2fe3-4a97-98fe-b14cc38cc141\",\"name\":\"Gmail labelling agent\",\"type\":\"@n8n/n8n-nodes-langchain.agent\",\"notes\":\"Objective:\\nAutomatically categorize incoming emails based on existing Gmail labels or create a new label if none match.\\n\\nTools:\\n- Get message\\n- Read all labels\\n- Create label\\n- Assign label to message\\n\\nInstructions:\\n\\nLabel Matching:\\n\\nAnalyze the email's subject, sender, recipient, keywords, and content.\\nCompare with existing Gmail labels to find the most relevant match.\\nLabel Assignment:\\n\\nAssign the email to the most appropriate existing label.`\\nRemove the inbox label if the email is of less importance (like ads, promotions, aka \\\"Reclame\\\"), keep normal and important emails in the inbox.\\nIf no suitable label exists, create a new label based on the existing labels. Try reusing existing labels as much as possible. Always create a label as a sublabel, if no label applies, if the main label already exists, create the new label under the existing label, if no main label exists, create the label AI and create the new label under this label.\\nLabel Creation:\\n\\nEnsure new labels align with the structure of existing ones, including capitalization, delimiters, and prefixes.\\nExamples:\\n\\nIf the email subject is \\\"Project Alpha Update,\\\" assign to [Project Alpha] if it exists.\\nFor \\\"New Vendor Inquiry,\\\" create \\\"Vendor Inquiry\\\" if no relevant label exists.\\nOutcome:\\nEmails are consistently categorized under the appropriate or newly created labels, maintaining Gmail's organizational structure.\",\"onError\":\"continueErrorOutput\",\"position\":[-60,-260],\"parameters\":{\"text\":\"=Label the email based on the details below:\\n{{ JSON.stringify($json) }}\",\"options\":{\"maxIterations\":5,\"systemMessage\":\"Objective:\\nAutomatically categorize incoming emails based on existing Gmail labels or create a new label if none match.\\n\\nTools:\\n- Get message\\n- Read all labels\\n- Create label\\n- Assign label to message\\n\\nInstructions:\\n\\nLabel Matching:\\n\\nAnalyze the email's subject, sender, recipient, keywords, and content.\\nCompare with existing Gmail labels to find the most relevant match.\\nLabel Assignment:\\n\\nAssign the email to the most appropriate existing label.`\\nRemove the inbox label if the email is of less importance (like ads, promotions, aka \\\"Reclame\\\"), keep normal and important emails in the inbox.\\nIf no suitable label exists, create a new label based on the existing labels. Try reusing existing labels as much as possible. Always create a label as a sublabel, if no label applies, if the main label already exists, create the new label under the existing label, if no main label exists, create the label AI and create the new label under this label.\\nLabel Creation:\\n\\nEnsure new labels align with the structure of existing ones, including capitalization, delimiters, and prefixes.\\nExamples:\\n\\nIf the email subject is \\\"Project Alpha Update,\\\" assign to [Project Alpha] if it exists.\\nFor \\\"New Vendor Inquiry,\\\" create \\\"Vendor Inquiry\\\" if no relevant label exists.\\nOutcome:\\nEmails are consistently categorized under the appropriate or newly created labels, maintaining Gmail's organizational structure.\"},\"promptType\":\"define\"},\"notesInFlow\":true,\"retryOnFail\":false,\"typeVersion\":1.7},{\"id\":\"6b514df4-761c-4072-abf8-d572ee4b8030\",\"name\":\"Window Buffer Memory\",\"type\":\"@n8n/n8n-nodes-langchain.memoryBufferWindow\",\"position\":[-60,-40],\"parameters\":{\"sessionKey\":\"={{ $json.id }}\",\"sessionIdType\":\"customKey\"},\"typeVersion\":1.3},{\"id\":\"f06717ed-00d7-4a99-a78c-53217a0067e7\",\"name\":\"Wait\",\"type\":\"n8n-nodes-base.wait\",\"position\":[-220,-260],\"webhookId\":\"2066b863-4526-40cf-90aa-82229895a73c\",\"parameters\":{\"amount\":1},\"typeVersion\":1.1},{\"id\":\"f6084fc3-2b6b-488f-b212-f179435e1a63\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-640,-300],\"parameters\":{\"content\":\"## Gmail触发器\\n每隔x分钟轮询Gmail，当收到新邮件时触发。\\n\\n- Gmail API\"},\"typeVersion\":1},{\"id\":\"5ede55a4-52ae-48c0-969e-afa45d19f2f0\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[380,-960],\"parameters\":{\"width\":780,\"height\":840,\"content\":\"## Gmail标签管理助手\\n- 阅读邮件内容\\n- 查看现有标签\\n- 按需创建新标签\\n- 为邮件分配标签\\n\\n----\\n\\n目标：\\n根据现有Gmail标签自动分类 incoming邮件，若无匹配标签则创建新标签。\\n\\n工具：\\n- 获取邮件\\n- 读取所有标签\\n- 创建标签\\n- 为邮件分配标签\\n\\n操作流程：\\n\\n标签匹配：\\n分析邮件的主题、发件人、收件人、关键词及正文内容\\n与现有Gmail标签对比寻找最相关匹配项\\n\\n标签分配：\\n将邮件归类至最匹配的现有标签\\n若邮件重要性较低（如广告/促销类邮件），移除收件箱标签；重要邮件保留在收件箱\\n若无合适标签，则基于现有标签体系创建新标签。尽可能复用现有标签结构，新标签始终作为子标签创建：若主标签已存在则在其下创建，若无主标签则在\\\"AI\\\"主标签下创建\\n\\n标签创建：\\n确保新标签与现有体系保持结构一致（包括大小写、分隔符和前缀规范）\\n\\n示例：\\n若邮件主题为\\\"Project Alpha更新\\\"，且存在[Project Alpha]标签则直接归类\\n\\\"新供应商咨询\\\"邮件若无匹配标签，则创建\\\"Vendor Inquiry\\\"新标签\\n\\n执行效果：\\n所有邮件均能准确归类至相应标签（包括新建标签），保持Gmail标签体系的组织结构完整性\"},\"typeVersion\":1},{\"id\":\"7c8bb6de-b729-4c8e-90c2-641d173ed3dd\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[160,160],\"parameters\":{\"width\":440,\"content\":\"## Gmail API\\n- 添加凭据\"},\"typeVersion\":1},{\"id\":\"e9d05013-9546-426f-bdc7-45199dbfc72a\",\"name\":\"Sticky Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-580,80],\"parameters\":{\"width\":440,\"content\":\"## OpenAI\\n- 添加凭证\"},\"typeVersion\":1}],\"pinData\":{},\"connections\":{\"Wait\":{\"main\":[[{\"node\":\"Gmail labelling agent\",\"type\":\"main\",\"index\":0}]]},\"Gmail Trigger\":{\"main\":[[{\"node\":\"Wait\",\"type\":\"main\",\"index\":0}]]},\"OpenAI Chat Model1\":{\"ai_languageModel\":[[{\"node\":\"Gmail labelling agent\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"Gmail - get message\":{\"ai_tool\":[[{\"node\":\"Gmail labelling agent\",\"type\":\"ai_tool\",\"index\":0}]]},\"Gmail - read labels\":{\"ai_tool\":[[{\"node\":\"Gmail labelling agent\",\"type\":\"ai_tool\",\"index\":0}]]},\"Gmail - create label\":{\"ai_tool\":[[{\"node\":\"Gmail labelling agent\",\"type\":\"ai_tool\",\"index\":0}]]},\"Window Buffer Memory\":{\"ai_memory\":[[{\"node\":\"Gmail labelling agent\",\"type\":\"ai_memory\",\"index\":0}]]},\"Gmail - add label to message\":{\"ai_tool\":[[{\"node\":\"Gmail labelling agent\",\"type\":\"ai_tool\",\"index\":0}]]}}}"
}