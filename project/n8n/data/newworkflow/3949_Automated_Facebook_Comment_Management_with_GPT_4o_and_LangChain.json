{
  "url": "https://n8n.io/workflows/3949-automated-facebook-comment-management-with-gpt-4o-and-langchain/",
  "title": "Automated Facebook Comment Management with GPT-4o and LangChain",
  "author": "Amanda Benks",
  "publish_date": "Last update 16 days ago",
  "publish_date_absolute": "2025-05-10",
  "categories": [
    {
      "name": "AI"
    },
    {
      "name": "Marketing"
    }
  ],
  "workflow_json": "{\"id\":\"RzYuqoepxixCfKzi\",\"meta\":{\"instanceId\":\"b79da95dcb1b69eebc3470f6fd833d7e53e389c229c716386bdb8e7c291ad2b9\",\"templateCredsSetupCompleted\":true},\"name\":\"🤖 Facebook MCP AI Agent – Read, Reply & Manage Comments with GPT-4o\",\"tags\":[{\"id\":\"gopnerJXNBoZBzMX\",\"name\":\"Fluxo a Venda\",\"createdAt\":\"2025-05-06T11:24:14.834Z\",\"updatedAt\":\"2025-05-06T11:24:14.834Z\"}],\"nodes\":[{\"id\":\"7b135530-930b-4934-b51b-ba122a4a96de\",\"name\":\"When chat message received\",\"type\":\"@n8n/n8n-nodes-langchain.chatTrigger\",\"position\":[-160,360],\"webhookId\":\"02e0ef01-c4c3-4907-a0cd-02dd35fd3767\",\"parameters\":{},\"typeVersion\":1.1},{\"id\":\"92670dfa-9ee0-439c-ba0c-6e0654d09221\",\"name\":\"AI Agent\",\"type\":\"@n8n/n8n-nodes-langchain.agent\",\"position\":[340,260],\"parameters\":{},\"typeVersion\":1.9},{\"id\":\"c9d4143f-9999-4508-aaf1-1bfc73d2e151\",\"name\":\"Simple Memory\",\"type\":\"@n8n/n8n-nodes-langchain.memoryBufferWindow\",\"position\":[400,420],\"parameters\":{},\"typeVersion\":1.3},{\"id\":\"4bc247c3-158e-4ac5-87a0-788b7e4c409b\",\"name\":\"🗂️ MCP Facebook\",\"type\":\"@n8n/n8n-nodes-langchain.mcpTrigger\",\"position\":[1120,140],\"webhookId\":\"6310da96-934d-4702-addc-b8964c1ed925\",\"parameters\":{},\"typeVersion\":1},{\"id\":\"09472a7f-1837-4a2c-afff-fad1af5be1d3\",\"name\":\"MCP Facebook\",\"type\":\"@n8n/n8n-nodes-langchain.mcpClientTool\",\"position\":[740,420],\"parameters\":{},\"typeVersion\":1},{\"id\":\"12e55d12-b4bb-40e1-81be-b81d054b734e\",\"name\":\"Search Media\",\"type\":\"@n8n/n8n-nodes-langchain.toolHttpRequest\",\"position\":[960,380],\"parameters\":{},\"typeVersion\":1.1},{\"id\":\"847411aa-36f2-4b45-99d7-434f1c31e0c2\",\"name\":\"Facebook Mapping\",\"type\":\"n8n-nodes-base.set\",\"position\":[60,360],\"parameters\":{},\"typeVersion\":3.4},{\"id\":\"cc4b97bf-0d87-487a-8fa6-b3de88df03cb\",\"name\":\"Media Details\",\"type\":\"@n8n/n8n-nodes-langchain.toolHttpRequest\",\"position\":[1100,380],\"parameters\":{},\"typeVersion\":1.1},{\"id\":\"c69f529d-cc97-436a-b4fa-08538cfcf306\",\"name\":\"Search Comment\",\"type\":\"@n8n/n8n-nodes-langchain.toolHttpRequest\",\"position\":[1240,380],\"parameters\":{},\"typeVersion\":1.1},{\"id\":\"40990183-0945-42d2-8239-e938105c90b5\",\"name\":\"Reply Comment\",\"type\":\"@n8n/n8n-nodes-langchain.toolHttpRequest\",\"position\":[1380,380],\"parameters\":{},\"typeVersion\":1.1},{\"id\":\"1c7f4401-b266-4b15-bc6c-05f6f12f1681\",\"name\":\"Send Direct Message\",\"type\":\"@n8n/n8n-nodes-langchain.toolHttpRequest\",\"position\":[1520,380],\"parameters\":{},\"typeVersion\":1.1},{\"id\":\"55ddf8c6-d183-4207-8606-b1c22fea492f\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[0,140],\"parameters\":{\"content\":\"\"},\"typeVersion\":1},{\"id\":\"17dbdf19-f4c1-4c7d-a99e-949a864fc45e\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[700,140],\"parameters\":{\"content\":\"\"},\"typeVersion\":1},{\"id\":\"0b823254-01c2-4a7f-8193-086dc68aefba\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[240,140],\"parameters\":{\"content\":\"\"},\"typeVersion\":1},{\"id\":\"4d07313d-220c-4e4d-ba55-aacbb561353b\",\"name\":\"Chat Model\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\"position\":[280,420],\"parameters\":{},\"typeVersion\":1.2},{\"id\":\"0faba95f-b99e-4adb-8397-8f9f7f2194a9\",\"name\":\"Sticky Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[900,0],\"parameters\":{\"content\":\"\"},\"typeVersion\":1},{\"id\":\"16a71afb-7d4f-4eec-a784-31f5bb8ba2c9\",\"name\":\"Sticky Note4\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[0,0],\"parameters\":{\"content\":\"\"},\"typeVersion\":1}],\"active\":false,\"pinData\":{},\"settings\":{\"executionOrder\":\"v1\"},\"versionId\":\"2be54b97-2a5e-4fe5-ade2-4f9541b6ea24\",\"connections\":{\"Chat Model\":{\"ai_languageModel\":[[{\"node\":\"AI Agent\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"MCP Facebook\":{\"ai_tool\":[[{\"node\":\"AI Agent\",\"type\":\"ai_tool\",\"index\":0}]]},\"Search Media\":{\"ai_tool\":[[{\"node\":\"🗂️ MCP Facebook\",\"type\":\"ai_tool\",\"index\":0}]]},\"Media Details\":{\"ai_tool\":[[{\"node\":\"🗂️ MCP Facebook\",\"type\":\"ai_tool\",\"index\":0}]]},\"Reply Comment\":{\"ai_tool\":[[{\"node\":\"🗂️ MCP Facebook\",\"type\":\"ai_tool\",\"index\":0}]]},\"Simple Memory\":{\"ai_memory\":[[{\"node\":\"AI Agent\",\"type\":\"ai_memory\",\"index\":0}]]},\"Search Comment\":{\"ai_tool\":[[{\"node\":\"🗂️ MCP Facebook\",\"type\":\"ai_tool\",\"index\":0}]]},\"Facebook Mapping\":{\"main\":[[{\"node\":\"AI Agent\",\"type\":\"main\",\"index\":0}]]},\"Send Direct Message\":{\"ai_tool\":[[{\"node\":\"🗂️ MCP Facebook\",\"type\":\"ai_tool\",\"index\":0}]]},\"When chat message received\":{\"main\":[[{\"node\":\"Facebook Mapping\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "### 🤖 Facebook AI Agent with MCP Server – Built for Smart Engagement and Automation\n\n#### Hi! I’m Amanda 🥰😘 — I build intelligent automations with n8n and Make.\n\nThis powerful workflow was designed to help teams automatically handle Facebook page interactions with AI. Using **Meta Graph API** , **LangChain** , **MCP Server** , and **GPT-4o** , it allows your AI agent to **search for posts, read captions, fetch comments** , and even **reply or message followers** , all through structured tools.\n\n* * *\n\n### 🔧 What the workflow does\n\n  * Searches for recent media using Facebook Page ID and access token\n  * Reads and extracts captions or media URLs\n  * Fetches comments and specific replies from each post\n  * Replies to comments automatically with GPT-generated responses\n  * Sends direct messages to followers who commented\n  * Maps user input and session to keep memory context via LangChain\n  * Communicates via Server-Sent Events (SSE) using your MCP Server URL\n\n\n\n* * *\n\n### 🧰 Nodes & Tech Used\n\n  * `LangChain Agent` \\+ `Chat Model` with GPT-4o\n  * `Memory Buffer` for session memory\n  * `toolHttpRequest` to search media, comments, and send replies\n  * `MCP Trigger` and `MCP Tool` (custom SSE connection)\n  * `Set` node for input and variable assignment\n  * `Webhook` and JSON for Facebook API structure\n\n\n\n* * *\n\n### ⚙️ Setup Instructions\n\n  1. Create your Facebook App in Meta Developer Portal\n  2. Add your **Facebook Page ID** and **Access Token** in the `Set` node\n  3. Update the **MCP Server Tool URL** in the `MCP Facebook` node \n     * Use your n8n server URL (e.g. `https://yourdomain.com/mcp/server/facebook/sse`)\n  4. Trigger the workflow using the included `LangChain Chat Trigger`\n  5. Interact via text to ask the agent to: \n     * “Get latest posts”\n     * “Reply to comment X with this message”\n     * “Send DM to this user about...”\n\n\n\n* * *\n\n### 👥 Who this is for\n\n  * Social media teams managing multiple Facebook pages\n  * Brands automating engagement with followers\n  * Agencies creating smart, autonomous digital assistants\n  * Developers building conversational bots for Facebook\n\n\n\n* * *\n\n### ✅ Requirements\n\n  * Meta Graph API access\n  * Facebook Page (with permissions)\n  * n8n instance (Cloud or Self-hosted)\n  * MCP Server configured (SSE Endpoint enabled)\n  * OpenAI API Key (for GPT-4o + LangChain)\n\n\n\n* * *\n\n### 🌐 Want to use this workflow?\n\n❤️ Buy workflows: <https://iloveflows.com>  \n☁️ Try n8n Cloud: <https://n8n.partnerlinks.io/amanda>\n",
  "crawled_at": "2025-05-26T06:05:20.271677",
  "readme_zh": "### 🤖 Facebook AI智能代理与MCP服务器——专为智能互动与自动化打造\n\n#### 你好！我是Amanda 🥰😘——专注用n8n和Make构建智能自动化方案\n\n这套强大工作流能帮助团队通过AI自动处理Facebook主页互动。结合**Meta Graph API**、**LangChain**、**MCP服务器**和**GPT-4o**，您的AI代理可通过结构化工具实现：**搜索帖子/读取文案/获取评论**，甚至**自动回复或私信粉丝**。\n\n* * *\n\n### 🔧 核心功能\n\n  * 通过Facebook主页ID和访问令牌搜索近期媒体内容  \n  * 解析并提取贴文文案/媒体链接  \n  * 抓取每条帖子的评论及特定回复  \n  * 用GPT生成内容自动回复评论  \n  * 向留言粉丝发送私信  \n  * 通过LangChain映射用户输入与会话记忆  \n  * 基于MCP服务器URL实现Server-Sent Events (SSE)通信  \n\n* * *\n\n### 🧰 技术组件\n\n  * `LangChain代理` + `GPT-4o`聊天模型  \n  * `记忆缓冲器`管理会话记忆  \n  * `HTTP请求工具`实现媒体搜索/评论获取/自动回复  \n  * `MCP触发器`与`MCP工具`（自定义SSE连接）  \n  * `变量设置`节点处理输入赋值  \n  * `Webhook`与JSON构建Facebook API交互  \n\n* * *\n\n### ⚙️ 配置指南\n\n  1. 在Meta开发者平台创建应用  \n  2. 在`变量设置`节点配置**主页ID**和**访问令牌**  \n  3. 更新`MCP Facebook`节点的**服务器工具URL**  \n    * 格式示例：`https://您的域名/mcp/server/facebook/sse`  \n  4. 通过`LangChain聊天触发器`启动工作流  \n  5. 发送文本指令如：  \n    * \"获取最新帖子\"  \n    * \"用以下内容回复第X条评论\"  \n    * \"向该用户发送关于...的私信\"  \n\n* * *\n\n### 👥 适用场景\n\n  * 管理多Facebook主页的社媒团队  \n  * 需要自动化粉丝互动的品牌  \n  * 开发智能数字助理的营销机构  \n  * 构建Facebook对话机器人的开发者  \n\n* * *\n\n### ✅ 环境要求\n\n  * Meta Graph API访问权限  \n  * Facebook主页（具备管理权限）  \n  * n8n实例（云服务或自托管）  \n  * 已配置MCP服务器（启用SSE端点）  \n  * OpenAI API密钥（GPT-4o + LangChain）  \n\n* * *\n\n### 🌐 获取工作流\n\n❤️ 工作流商店：<https://iloveflows.com>  \n☁️ n8n云服务：<https://n8n.partnerlinks.io/amanda>",
  "title_zh": "利用GPT-4o与LangChain实现Facebook评论自动化管理",
  "publish_date_zh": "上次更新于5天前",
  "workflow_json_zh": "{\"id\":\"RzYuqoepxixCfKzi\",\"meta\":{\"instanceId\":\"b79da95dcb1b69eebc3470f6fd833d7e53e389c229c716386bdb8e7c291ad2b9\",\"templateCredsSetupCompleted\":true},\"name\":\"🤖 Facebook MCP AI Agent – Read, Reply & Manage Comments with GPT-4o\",\"tags\":[{\"id\":\"gopnerJXNBoZBzMX\",\"name\":\"Fluxo a Venda\",\"createdAt\":\"2025-05-06T11:24:14.834Z\",\"updatedAt\":\"2025-05-06T11:24:14.834Z\"}],\"nodes\":[{\"id\":\"7b135530-930b-4934-b51b-ba122a4a96de\",\"name\":\"When chat message received\",\"type\":\"@n8n/n8n-nodes-langchain.chatTrigger\",\"position\":[-160,360],\"webhookId\":\"02e0ef01-c4c3-4907-a0cd-02dd35fd3767\",\"parameters\":{},\"typeVersion\":1.1},{\"id\":\"92670dfa-9ee0-439c-ba0c-6e0654d09221\",\"name\":\"AI Agent\",\"type\":\"@n8n/n8n-nodes-langchain.agent\",\"position\":[340,260],\"parameters\":{},\"typeVersion\":1.9},{\"id\":\"c9d4143f-9999-4508-aaf1-1bfc73d2e151\",\"name\":\"Simple Memory\",\"type\":\"@n8n/n8n-nodes-langchain.memoryBufferWindow\",\"position\":[400,420],\"parameters\":{},\"typeVersion\":1.3},{\"id\":\"4bc247c3-158e-4ac5-87a0-788b7e4c409b\",\"name\":\"🗂️ MCP Facebook\",\"type\":\"@n8n/n8n-nodes-langchain.mcpTrigger\",\"position\":[1120,140],\"webhookId\":\"6310da96-934d-4702-addc-b8964c1ed925\",\"parameters\":{},\"typeVersion\":1},{\"id\":\"09472a7f-1837-4a2c-afff-fad1af5be1d3\",\"name\":\"MCP Facebook\",\"type\":\"@n8n/n8n-nodes-langchain.mcpClientTool\",\"position\":[740,420],\"parameters\":{},\"typeVersion\":1},{\"id\":\"12e55d12-b4bb-40e1-81be-b81d054b734e\",\"name\":\"Search Media\",\"type\":\"@n8n/n8n-nodes-langchain.toolHttpRequest\",\"position\":[960,380],\"parameters\":{},\"typeVersion\":1.1},{\"id\":\"847411aa-36f2-4b45-99d7-434f1c31e0c2\",\"name\":\"Facebook Mapping\",\"type\":\"n8n-nodes-base.set\",\"position\":[60,360],\"parameters\":{},\"typeVersion\":3.4},{\"id\":\"cc4b97bf-0d87-487a-8fa6-b3de88df03cb\",\"name\":\"Media Details\",\"type\":\"@n8n/n8n-nodes-langchain.toolHttpRequest\",\"position\":[1100,380],\"parameters\":{},\"typeVersion\":1.1},{\"id\":\"c69f529d-cc97-436a-b4fa-08538cfcf306\",\"name\":\"Search Comment\",\"type\":\"@n8n/n8n-nodes-langchain.toolHttpRequest\",\"position\":[1240,380],\"parameters\":{},\"typeVersion\":1.1},{\"id\":\"40990183-0945-42d2-8239-e938105c90b5\",\"name\":\"Reply Comment\",\"type\":\"@n8n/n8n-nodes-langchain.toolHttpRequest\",\"position\":[1380,380],\"parameters\":{},\"typeVersion\":1.1},{\"id\":\"1c7f4401-b266-4b15-bc6c-05f6f12f1681\",\"name\":\"Send Direct Message\",\"type\":\"@n8n/n8n-nodes-langchain.toolHttpRequest\",\"position\":[1520,380],\"parameters\":{},\"typeVersion\":1.1},{\"id\":\"55ddf8c6-d183-4207-8606-b1c22fea492f\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[0,140],\"parameters\":{\"content\":\"\"},\"typeVersion\":1},{\"id\":\"17dbdf19-f4c1-4c7d-a99e-949a864fc45e\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[700,140],\"parameters\":{\"content\":\"\"},\"typeVersion\":1},{\"id\":\"0b823254-01c2-4a7f-8193-086dc68aefba\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[240,140],\"parameters\":{\"content\":\"\"},\"typeVersion\":1},{\"id\":\"4d07313d-220c-4e4d-ba55-aacbb561353b\",\"name\":\"Chat Model\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\"position\":[280,420],\"parameters\":{},\"typeVersion\":1.2},{\"id\":\"0faba95f-b99e-4adb-8397-8f9f7f2194a9\",\"name\":\"Sticky Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[900,0],\"parameters\":{\"content\":\"\"},\"typeVersion\":1},{\"id\":\"16a71afb-7d4f-4eec-a784-31f5bb8ba2c9\",\"name\":\"Sticky Note4\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[0,0],\"parameters\":{\"content\":\"\"},\"typeVersion\":1}],\"active\":false,\"pinData\":{},\"settings\":{\"executionOrder\":\"v1\"},\"versionId\":\"2be54b97-2a5e-4fe5-ade2-4f9541b6ea24\",\"connections\":{\"Chat Model\":{\"ai_languageModel\":[[{\"node\":\"AI Agent\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"MCP Facebook\":{\"ai_tool\":[[{\"node\":\"AI Agent\",\"type\":\"ai_tool\",\"index\":0}]]},\"Search Media\":{\"ai_tool\":[[{\"node\":\"🗂️ MCP Facebook\",\"type\":\"ai_tool\",\"index\":0}]]},\"Media Details\":{\"ai_tool\":[[{\"node\":\"🗂️ MCP Facebook\",\"type\":\"ai_tool\",\"index\":0}]]},\"Reply Comment\":{\"ai_tool\":[[{\"node\":\"🗂️ MCP Facebook\",\"type\":\"ai_tool\",\"index\":0}]]},\"Simple Memory\":{\"ai_memory\":[[{\"node\":\"AI Agent\",\"type\":\"ai_memory\",\"index\":0}]]},\"Search Comment\":{\"ai_tool\":[[{\"node\":\"🗂️ MCP Facebook\",\"type\":\"ai_tool\",\"index\":0}]]},\"Facebook Mapping\":{\"main\":[[{\"node\":\"AI Agent\",\"type\":\"main\",\"index\":0}]]},\"Send Direct Message\":{\"ai_tool\":[[{\"node\":\"🗂️ MCP Facebook\",\"type\":\"ai_tool\",\"index\":0}]]},\"When chat message received\":{\"main\":[[{\"node\":\"Facebook Mapping\",\"type\":\"main\",\"index\":0}]]}}}"
}