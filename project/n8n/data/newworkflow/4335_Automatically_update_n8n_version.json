{
  "url": "https://n8n.io/workflows/4335-automatically-update-n8n-version/",
  "title": "Automatically update n8n version",
  "author": "Weilun",
  "publish_date": "Last update 14 hours ago",
  "publish_date_absolute": "",
  "categories": [
    {
      "name": "DevOps"
    }
  ],
  "workflow_json": "{\"id\":\"6XYqPkPDbHsRoX62\",\"meta\":{\"instanceId\":\"5c3b5db3715a57f4ed79fed05ac755845d719ba3ec8ccb7d9438a3d85e556c1f\",\"templateCredsSetupCompleted\":true},\"name\":\"update n8n version\",\"tags\":[],\"nodes\":[{\"id\":\"47829c66-4f79-43f1-a89f-a2137c86bb30\",\"name\":\"Get Local n8n version\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[-180,-260],\"parameters\":{\"url\":\"http://192.168.100.18:5678/rest/settings\",\"options\":{},\"authentication\":\"genericCredentialType\",\"genericAuthType\":\"httpBearerAuth\"},\"credentials\":{\"httpBearerAuth\":{\"id\":\"zKdAGEO6406TJEtE\",\"name\":\"Bearer Auth account\"}},\"typeVersion\":4.2},{\"id\":\"ee7a6dea-7b56-432c-9b8f-6ebd806e1359\",\"name\":\"Schedule Trigger\",\"type\":\"n8n-nodes-base.scheduleTrigger\",\"position\":[-620,-260],\"parameters\":{\"rule\":{\"interval\":[{\"triggerAtHour\":5}]}},\"typeVersion\":1.2},{\"id\":\"5e64e00f-0403-4669-b9a1-c1fc93a28d47\",\"name\":\"SSH1\",\"type\":\"n8n-nodes-base.ssh\",\"position\":[340,-260],\"parameters\":{\"cwd\":\"n8n/\",\"command\":\"=echo \\\"{{ $('If').params.conditions ? 'true' : 'false' }}\\\" > check_update.txt\"},\"credentials\":{\"sshPassword\":{\"id\":\"m5UXwMUbELaUlNwF\",\"name\":\"SSH Password account\"}},\"typeVersion\":1},{\"id\":\"a40311c9-17b1-41e8-87d5-d86cce2439d7\",\"name\":\"Get the latest n8n version\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[-400,-260],\"parameters\":{\"url\":\"https://registry.npmjs.org/n8n/latest\",\"options\":{\"fullResponse\":false}},\"typeVersion\":2},{\"id\":\"50d7a87c-4e1c-469b-b5ae-2d7347f7ca58\",\"name\":\"If\",\"type\":\"n8n-nodes-base.if\",\"position\":[40,-260],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"a2d169a3-7aa2-46f5-bdb2-f0d53a011b5c\",\"operator\":{\"type\":\"string\",\"operation\":\"notEquals\"},\"leftValue\":\"={{ $('Get the latest n8n version').item.json.version }}\",\"rightValue\":\"={{ $json.data.versionCli }}\"}]}},\"typeVersion\":2.2,\"alwaysOutputData\":false}],\"active\":true,\"pinData\":{},\"settings\":{\"executionOrder\":\"v1\"},\"versionId\":\"779ab14e-b430-4454-8651-3686324f052b\",\"connections\":{\"If\":{\"main\":[[{\"node\":\"SSH1\",\"type\":\"main\",\"index\":0}],[{\"node\":\"SSH1\",\"type\":\"main\",\"index\":0}]]},\"Schedule Trigger\":{\"main\":[[{\"node\":\"Get the latest n8n version\",\"type\":\"main\",\"index\":0}]]},\"Get Local n8n version\":{\"main\":[[{\"node\":\"If\",\"type\":\"main\",\"index\":0}]]},\"Get the latest n8n version\":{\"main\":[[{\"node\":\"Get Local n8n version\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "# 🔄 n8n Workflow: Check and Update n8n Version\n\nThis workflow automatically **checks if the local n8n version is outdated** and, if so, **creates a file to signal an update is needed**.\n\n* * *\n\n## 🖥️ Working Environment\n\n  * **Operating System:** Ubuntu 24.04\n  * **n8n Installation:** Docker container\n\n\n\n* * *\n\n## 📁 Project Directory Structure\n\nn8n/  \n├── check_update.txt  \n├── [check-update.sh](http://check-update.sh)  \n├── compose.yml  \n├── update_n8n.cron\n\n* * *\n\n## 🧾 File Descriptions\n\n### `check_update.txt`\n\nContains a single word:\n\n  * `true`: Update is needed\n  * `false`: No update required\n\n\n\n* * *\n\n### `check-update.sh`\n    \n    \n    #!/bin/bash\n    PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\n    \n    if grep -q \"true\" /home/sysadmin/n8n/check_update.txt; then\n        # Place your update logic here\n        echo \"Update needed - please insert update logic\"\n        echo true &gt; /home/sysadmin/n8n/check_update.txt\n    fi\n    \n\n**Purpose:**\n\n  * Checks the contents of `check_update.txt`\n  * If it contains `true`, executes update logic (currently a placeholder)\n  * Resets `check_update.txt` to `true`\n\n\n\n* * *\n\n### `update_n8n.cron`\n    \n    \n    SHELL=/bin/sh\n    10 5 * * * /bin/sh /home/sysadmin/n8n/check-update.sh\n    \n\n**Purpose:**\n\n  * Runs the `check-update.sh` script daily at 5:10 AM\n  * Uses `/bin/sh` as the shell environment\n\n\n\n## 🧩 n8n Workflow Breakdown\n\n### 1\\. Schedule Trigger 🕓\n\n  * **Purpose:** Triggers the workflow every day at 5:00 AM\n  * **Node Type:** Schedule Trigger\n\n\n\n* * *\n\n### 2\\. Get the latest n8n version 🌐\n\n  * **Purpose:** Fetches the latest version of n8n from npm\n  * **Endpoint:** `https://registry.npmjs.org/n8n/latest`\n  * **Node Type:** HTTP Request\n\n\n\n* * *\n\n### 3\\. Get Local n8n version 🖥️\n\n  * **Purpose:** Retrieves the currently running n8n version\n  * **Endpoint:** `http://192.168.100.18:5678/rest/settings`\n  * **Node Type:** HTTP Request\n\n\n\n* * *\n\n### 4\\. If 🔍\n\n  * **Purpose:** Compares the local and latest versions\n  * **Condition:** If not equal → update is needed\n\n\n\n* * *\n\n### 5\\. SSH1 🧾\n\n  * **Purpose:** Writes the result to a file on the host via SSH\n  * **Logic:**\n\n\n    \n    \n    echo \"{{ $('If').params.conditions ? 'false' : 'true' }}\" &gt; check_update.txt\n    \n\n**Effect** : Updates `check_update.txt` with `\"true\"` if an update is needed, `\"false\"` otherwise.\n\n## 🛠️ Setting up Crontab on Ubuntu\n\n### 1\\. Register the cron job with:\n    \n    \n    crontab update_n8n.cron\n    \n\n### 2\\. Verify that your cron job is registered:\n    \n    \n    crontab -l\n    \n\n## ✅ Result\n\n  * **5:00 AM** – n8n workflow checks versions and writes result to `check_update.txt`\n  * **5:10 AM** – Cron runs `check-update.sh` to respond to update flag\n\n\n",
  "crawled_at": "2025-05-27T23:08:03.151899",
  "readme_zh": "# 🔄 n8n工作流：检查并更新n8n版本\n\n该工作流可自动**检测本地n8n版本是否过时**，并在需要时**创建文件触发更新信号**。\n\n* * *\n\n## 🖥️ 工作环境\n\n  * **操作系统：** Ubuntu 24.04\n  * **n8n安装方式：** Docker容器",
  "title_zh": "自动更新n8n版本",
  "publish_date_zh": "最后更新于14小时前",
  "workflow_json_zh": "{\"id\":\"6XYqPkPDbHsRoX62\",\"meta\":{\"instanceId\":\"5c3b5db3715a57f4ed79fed05ac755845d719ba3ec8ccb7d9438a3d85e556c1f\",\"templateCredsSetupCompleted\":true},\"name\":\"update n8n version\",\"tags\":[],\"nodes\":[{\"id\":\"47829c66-4f79-43f1-a89f-a2137c86bb30\",\"name\":\"Get Local n8n version\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[-180,-260],\"parameters\":{\"url\":\"http://192.168.100.18:5678/rest/settings\",\"options\":{},\"authentication\":\"genericCredentialType\",\"genericAuthType\":\"httpBearerAuth\"},\"credentials\":{\"httpBearerAuth\":{\"id\":\"zKdAGEO6406TJEtE\",\"name\":\"Bearer Auth account\"}},\"typeVersion\":4.2},{\"id\":\"ee7a6dea-7b56-432c-9b8f-6ebd806e1359\",\"name\":\"Schedule Trigger\",\"type\":\"n8n-nodes-base.scheduleTrigger\",\"position\":[-620,-260],\"parameters\":{\"rule\":{\"interval\":[{\"triggerAtHour\":5}]}},\"typeVersion\":1.2},{\"id\":\"5e64e00f-0403-4669-b9a1-c1fc93a28d47\",\"name\":\"SSH1\",\"type\":\"n8n-nodes-base.ssh\",\"position\":[340,-260],\"parameters\":{\"cwd\":\"n8n/\",\"command\":\"=echo \\\"{{ $('If').params.conditions ? 'true' : 'false' }}\\\" > check_update.txt\"},\"credentials\":{\"sshPassword\":{\"id\":\"m5UXwMUbELaUlNwF\",\"name\":\"SSH Password account\"}},\"typeVersion\":1},{\"id\":\"a40311c9-17b1-41e8-87d5-d86cce2439d7\",\"name\":\"Get the latest n8n version\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[-400,-260],\"parameters\":{\"url\":\"https://registry.npmjs.org/n8n/latest\",\"options\":{\"fullResponse\":false}},\"typeVersion\":2},{\"id\":\"50d7a87c-4e1c-469b-b5ae-2d7347f7ca58\",\"name\":\"If\",\"type\":\"n8n-nodes-base.if\",\"position\":[40,-260],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"a2d169a3-7aa2-46f5-bdb2-f0d53a011b5c\",\"operator\":{\"type\":\"string\",\"operation\":\"notEquals\"},\"leftValue\":\"={{ $('Get the latest n8n version').item.json.version }}\",\"rightValue\":\"={{ $json.data.versionCli }}\"}]}},\"typeVersion\":2.2,\"alwaysOutputData\":false}],\"active\":true,\"pinData\":{},\"settings\":{\"executionOrder\":\"v1\"},\"versionId\":\"779ab14e-b430-4454-8651-3686324f052b\",\"connections\":{\"If\":{\"main\":[[{\"node\":\"SSH1\",\"type\":\"main\",\"index\":0}],[{\"node\":\"SSH1\",\"type\":\"main\",\"index\":0}]]},\"Schedule Trigger\":{\"main\":[[{\"node\":\"Get the latest n8n version\",\"type\":\"main\",\"index\":0}]]},\"Get Local n8n version\":{\"main\":[[{\"node\":\"If\",\"type\":\"main\",\"index\":0}]]},\"Get the latest n8n version\":{\"main\":[[{\"node\":\"Get Local n8n version\",\"type\":\"main\",\"index\":0}]]}}}"
}