{
  "url": "https://n8n.io/workflows/2931-ai-agent-with-ollama-for-current-weather-and-wiki/",
  "title": "AI Agent with Ollama for current weather and wiki",
  "author": "Thomas Chan",
  "publish_date": "Last update 3 months ago",
  "publish_date_absolute": "2025-02-26",
  "categories": [
    {
      "name": "Building Blocks"
    },
    {
      "name": "AI"
    }
  ],
  "workflow_json": "{\"meta\":{\"instanceId\":\"558d88703fb65b2d0e44613bc35916258b0f0bf983c5d4730c00c424b77ca36a\",\"templateId\":\"2931\",\"templateCredsSetupCompleted\":true},\"nodes\":[{\"id\":\"100f23d3-cbe9-458a-9ef1-7cc5fcba8f3c\",\"name\":\"Sticky Note4\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[640,540],\"parameters\":{\"width\":300,\"height\":205,\"content\":\"### The conversation history(last 20 messages) is stored in a buffer memory\"},\"typeVersion\":1},{\"id\":\"b48f989f-deb9-479c-b163-03f098d00c9c\",\"name\":\"On new manual Chat Message\",\"type\":\"@n8n/n8n-nodes-langchain.manualChatTrigger\",\"position\":[380,240],\"parameters\":{},\"typeVersion\":1},{\"id\":\"add8e8df-6b2a-4cbd-84e7-3b006733ef7d\",\"name\":\"Wikipedia\",\"type\":\"@n8n/n8n-nodes-langchain.toolWikipedia\",\"position\":[1180,640],\"parameters\":{},\"typeVersion\":1},{\"id\":\"a97454a8-001d-4986-9cb5-83176229ea70\",\"name\":\"Sticky Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[980,540],\"parameters\":{\"width\":300,\"height\":205,\"content\":\"### Tools which agent can use to accomplish the task\"},\"typeVersion\":1},{\"id\":\"52b57e72-8cc9-4865-9a00-d03b2e7f1b92\",\"name\":\"Sticky Note6\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[600,160],\"parameters\":{\"width\":422,\"height\":211,\"content\":\"### Conversational agent will utilise available tools to answer the prompt. \"},\"typeVersion\":1},{\"id\":\"8f0653ab-376b-40b9-b876-e608defdeb89\",\"name\":\"Window Buffer Memory\",\"type\":\"@n8n/n8n-nodes-langchain.memoryBufferWindow\",\"position\":[740,600],\"parameters\":{\"contextWindowLength\":20},\"typeVersion\":1},{\"id\":\"13237945-e143-4f65-b034-785f5ebde5bb\",\"name\":\"AI Agent\",\"type\":\"@n8n/n8n-nodes-langchain.agent\",\"position\":[680,240],\"parameters\":{\"text\":\"={{ $json.input }}\",\"options\":{\"systemMessage\":\"=You are a helpful assistant, with weather tool and wiki tool. find out the latitude and longitude information of a location then use the weather tool for current weather and weather forecast. For general info, use the wiki tool.\"},\"promptType\":\"define\"},\"typeVersion\":1.6},{\"id\":\"ee06c0f4-b2de-4257-9735-3ec228f2b794\",\"name\":\"Weather HTTP Request\",\"type\":\"@n8n/n8n-nodes-langchain.toolHttpRequest\",\"position\":[1020,620],\"parameters\":{\"url\":\"https://api.open-meteo.com/v1/forecast\",\"sendQuery\":true,\"parametersQuery\":{\"values\":[{\"name\":\"latitude\"},{\"name\":\"longitude\"},{\"name\":\"forecast_days\",\"value\":\"1\",\"valueProvider\":\"fieldValue\"},{\"name\":\"hourly\",\"value\":\"temperature_2m\",\"valueProvider\":\"fieldValue\"}]},\"toolDescription\":\"Fetch current temperature for given coordinates.\"},\"notesInFlow\":true,\"typeVersion\":1.1},{\"id\":\"3e5608c8-281d-47e0-af9d-77707530fd6b\",\"name\":\"Ollama Chat Model\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatOllama\",\"position\":[520,620],\"parameters\":{\"model\":\"llama3.2:latest\",\"options\":{}},\"credentials\":{\"ollamaApi\":{\"id\":\"xHuYe0MDGOs9IpBW\",\"name\":\"Local Ollama service\"}},\"typeVersion\":1},{\"id\":\"b3d794f4-37b5-46c8-9d7d-ad1087006ce5\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1040,140],\"parameters\":{\"color\":4,\"height\":240,\"content\":\"### In System Message, add the following.\\n\\n\\\"You are a helpful assistant, with weather tool and wiki tool. find out the latitude and longitude information of a location then use the weather tool for current weather and weather forecast. For general info, use the wiki tool.\\\"\"},\"typeVersion\":1}],\"pinData\":{},\"connections\":{\"Wikipedia\":{\"ai_tool\":[[{\"node\":\"AI Agent\",\"type\":\"ai_tool\",\"index\":0}]]},\"Ollama Chat Model\":{\"ai_languageModel\":[[{\"node\":\"AI Agent\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"Weather HTTP Request\":{\"ai_tool\":[[{\"node\":\"AI Agent\",\"type\":\"ai_tool\",\"index\":0}]]},\"Window Buffer Memory\":{\"ai_memory\":[[{\"node\":\"AI Agent\",\"type\":\"ai_memory\",\"index\":0}]]},\"On new manual Chat Message\":{\"main\":[[{\"node\":\"AI Agent\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "This workflow template demonstrates how to create an AI-powered agent that provides users with current weather information and Wikipedia summaries. By integrating n8n with Ollama's local Large Language Models (LLMs), this template offers a seamless and privacy-conscious solution for real-time data retrieval and summarization.\n\n### Who is this for?\n\n**Developers and Enthusiasts:** Individuals interested in building AI-driven workflows without relying on external APIs.  \n**Privacy-Conscious Users** : Those who prefer processing data locally to maintain control over their information.  \n**Educators and Students:** Learners seeking hands-on experience with AI integrations and workflow automation.\n\n### What problem does this workflow solve?\n\nAccessing up-to-date weather information and concise Wikipedia summaries typically requires multiple API calls to external services, which can raise privacy concerns and incur costs. This workflow addresses these issues by utilizing Ollama's self-hosted LLMs within n8n, enabling users to retrieve and process information locally.\n\n### What this workflow does:\n\n**User Input Capture** : Begins with a chat interface where users can input queries.  \nAI Processing: The input is sent to an AI Agent node configured with Ollama's LLMs, which interprets the query and determines the required actions.  \n**Weather Retrieval:** For weather-related queries, the workflow fetches current weather data from a specified source.  \n**Wikipedia Summarization:** For queries seeking information, it retrieves relevant Wikipedia content and generates concise summaries.\n\n### Setup:\n\n**Install Required Tools:**  \nOllama: Install and run Ollama to manage local LLMs.  \n**Configure n8n Workflow:**  \nImport the provided workflow template into your n8n instance.  \nSet up the AI Agent node to connect with Ollama's API.  \nEnsure nodes responsible for fetching weather data and Wikipedia content are correctly configured.  \n**Run the Workflow:**  \nStart the workflow and interact with the chat interface to test various queries.\n\n### How to customize this workflow to your needs:\n\n**Automate Triggers:** Set up scheduled triggers to provide users with regular updates, such as daily weather forecasts or featured Wikipedia articles.\n",
  "crawled_at": "2025-05-26T02:25:26.001858",
  "readme_zh": "该工作流模板展示了如何创建一个AI驱动的智能体，为用户提供实时天气信息和维基百科摘要。通过将n8n与Ollama本地大语言模型（LLMs）集成，本模板提供了一种兼顾流畅体验与隐私保护的实时数据检索与摘要解决方案。\n\n### 适用人群\n\n**开发者与技术爱好者**：希望不依赖外部API构建AI驱动工作流的群体  \n**注重隐私的用户**：倾向在本地处理数据以掌控信息安全的用户  \n**教育工作者与学生**：寻求AI集成与工作流自动化实践机会的学习者\n\n### 解决痛点\n\n传统获取实时天气和维基百科摘要需调用多个外部API接口，既存在隐私隐患又产生使用成本。本工作流通过n8n内置Ollama自托管大语言模型，实现本地化信息检索与处理。\n\n### 核心功能\n\n**用户输入捕获**：通过聊天界面接收查询请求  \n**AI智能处理**：由配置Ollama LLMs的AI代理节点解析查询意图  \n**天气数据获取**：针对天气类查询从指定数据源抓取实时信息  \n**百科摘要生成**：对知识类查询自动获取维基百科内容并输出精简摘要\n\n### 配置指南\n\n**环境准备**  \nOllama：安装并运行本地LLM管理工具  \n**工作流部署**  \n将模板导入n8n实例  \n配置AI代理节点连接Ollama API  \n校验天气数据与百科内容获取节点的参数设置  \n**运行测试**  \n启动工作流并通过聊天界面测试多样化查询\n\n### 定制建议\n\n**自动化触发**：设置定时触发器推送每日天气预报或维基百科特色条目等定期更新",
  "title_zh": "使用Ollama的AI代理查询实时天气和维基百科",
  "publish_date_zh": "最后更新于2个月前",
  "workflow_json_zh": "{\"meta\":{\"instanceId\":\"558d88703fb65b2d0e44613bc35916258b0f0bf983c5d4730c00c424b77ca36a\",\"templateId\":\"2931\",\"templateCredsSetupCompleted\":true},\"nodes\":[{\"id\":\"100f23d3-cbe9-458a-9ef1-7cc5fcba8f3c\",\"name\":\"Sticky Note4\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[640,540],\"parameters\":{\"width\":300,\"height\":205,\"content\":\"### 对话历史（最近20条消息）存储在缓冲存储器中\"},\"typeVersion\":1},{\"id\":\"b48f989f-deb9-479c-b163-03f098d00c9c\",\"name\":\"On new manual Chat Message\",\"type\":\"@n8n/n8n-nodes-langchain.manualChatTrigger\",\"position\":[380,240],\"parameters\":{},\"typeVersion\":1},{\"id\":\"add8e8df-6b2a-4cbd-84e7-3b006733ef7d\",\"name\":\"Wikipedia\",\"type\":\"@n8n/n8n-nodes-langchain.toolWikipedia\",\"position\":[1180,640],\"parameters\":{},\"typeVersion\":1},{\"id\":\"a97454a8-001d-4986-9cb5-83176229ea70\",\"name\":\"Sticky Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[980,540],\"parameters\":{\"width\":300,\"height\":205,\"content\":\"### 代理可用于完成任务的各种工具\"},\"typeVersion\":1},{\"id\":\"52b57e72-8cc9-4865-9a00-d03b2e7f1b92\",\"name\":\"Sticky Note6\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[600,160],\"parameters\":{\"width\":422,\"height\":211,\"content\":\"对话代理将利用可用工具来回答提示。\"},\"typeVersion\":1},{\"id\":\"8f0653ab-376b-40b9-b876-e608defdeb89\",\"name\":\"Window Buffer Memory\",\"type\":\"@n8n/n8n-nodes-langchain.memoryBufferWindow\",\"position\":[740,600],\"parameters\":{\"contextWindowLength\":20},\"typeVersion\":1},{\"id\":\"13237945-e143-4f65-b034-785f5ebde5bb\",\"name\":\"AI Agent\",\"type\":\"@n8n/n8n-nodes-langchain.agent\",\"position\":[680,240],\"parameters\":{\"text\":\"={{ $json.input }}\",\"options\":{\"systemMessage\":\"=You are a helpful assistant, with weather tool and wiki tool. find out the latitude and longitude information of a location then use the weather tool for current weather and weather forecast. For general info, use the wiki tool.\"},\"promptType\":\"define\"},\"typeVersion\":1.6},{\"id\":\"ee06c0f4-b2de-4257-9735-3ec228f2b794\",\"name\":\"Weather HTTP Request\",\"type\":\"@n8n/n8n-nodes-langchain.toolHttpRequest\",\"position\":[1020,620],\"parameters\":{\"url\":\"https://api.open-meteo.com/v1/forecast\",\"sendQuery\":true,\"parametersQuery\":{\"values\":[{\"name\":\"latitude\"},{\"name\":\"longitude\"},{\"name\":\"forecast_days\",\"value\":\"1\",\"valueProvider\":\"fieldValue\"},{\"name\":\"hourly\",\"value\":\"temperature_2m\",\"valueProvider\":\"fieldValue\"}]},\"toolDescription\":\"Fetch current temperature for given coordinates.\"},\"notesInFlow\":true,\"typeVersion\":1.1},{\"id\":\"3e5608c8-281d-47e0-af9d-77707530fd6b\",\"name\":\"Ollama Chat Model\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatOllama\",\"position\":[520,620],\"parameters\":{\"model\":\"llama3.2:latest\",\"options\":{}},\"credentials\":{\"ollamaApi\":{\"id\":\"xHuYe0MDGOs9IpBW\",\"name\":\"Local Ollama service\"}},\"typeVersion\":1},{\"id\":\"b3d794f4-37b5-46c8-9d7d-ad1087006ce5\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1040,140],\"parameters\":{\"color\":4,\"height\":240,\"content\":\"### 在系统消息中，添加以下内容。\\n\\n“你是一个有用的助手，拥有天气工具和维基工具。查找某个地点的经纬度信息，然后使用天气工具获取当前天气和天气预报。对于一般信息，请使用维基工具。”\"},\"typeVersion\":1}],\"pinData\":{},\"connections\":{\"Wikipedia\":{\"ai_tool\":[[{\"node\":\"AI Agent\",\"type\":\"ai_tool\",\"index\":0}]]},\"Ollama Chat Model\":{\"ai_languageModel\":[[{\"node\":\"AI Agent\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"Weather HTTP Request\":{\"ai_tool\":[[{\"node\":\"AI Agent\",\"type\":\"ai_tool\",\"index\":0}]]},\"Window Buffer Memory\":{\"ai_memory\":[[{\"node\":\"AI Agent\",\"type\":\"ai_memory\",\"index\":0}]]},\"On new manual Chat Message\":{\"main\":[[{\"node\":\"AI Agent\",\"type\":\"main\",\"index\":0}]]}}}"
}