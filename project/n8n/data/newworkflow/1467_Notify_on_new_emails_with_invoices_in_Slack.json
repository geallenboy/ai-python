{
  "url": "https://n8n.io/workflows/1467-notify-on-new-emails-with-invoices-in-slack/",
  "title": "Notify on new emails with invoices in Slack",
  "author": "Jonathan",
  "publish_date": "Last update 10 months ago",
  "publish_date_absolute": "2024-07-25",
  "categories": [
    {
      "name": "Sales"
    },
    {
      "name": "Finance"
    },
    {
      "name": "Building Blocks"
    }
  ],
  "workflow_json": "{\"id\":91,\"name\":\"New invoice email notification\",\"nodes\":[{\"name\":\"Check for new emails\",\"type\":\"n8n-nodes-base.emailReadImap\",\"position\":[500,300],\"parameters\":{\"format\":\"resolved\",\"mailbox\":\"Inbox\",\"options\":{\"allowUnauthorizedCerts\":true}},\"credentials\":{\"imap\":{\"id\":\"24\",\"name\":\"GMAIL\"}},\"typeVersion\":1},{\"name\":\"If email body contains invoice\",\"type\":\"n8n-nodes-base.if\",\"position\":[700,300],\"parameters\":{\"conditions\":{\"string\":[{\"value1\":\"={{$json[\\\"text\\\"].toLowerCase()}}\",\"value2\":\"invoice\",\"operation\":\"contains\"}]},\"combineOperation\":\"any\"},\"typeVersion\":1},{\"name\":\"Extract the total amount\",\"type\":\"n8n-nodes-base.mindee\",\"position\":[900,280],\"parameters\":{\"rawData\":true,\"resource\":\"invoice\",\"binaryPropertyName\":\"attachment_0\"},\"credentials\":{\"mindeeInvoiceApi\":{\"id\":\"62\",\"name\":\"Mindee Invoice account\"}},\"typeVersion\":1},{\"name\":\"Send new invoice notification\",\"type\":\"n8n-nodes-base.slack\",\"position\":[1580,300],\"parameters\":{\"text\":\":new: There is a new invoice to pay :new:\",\"channel\":\"team-accounts\",\"blocksUi\":{\"blocksValues\":[]},\"attachments\":[{\"color\":\"#FFBF00\",\"fields\":{\"item\":[{\"short\":true,\"title\":\"Amount\",\"value\":\"={{$node[\\\"If Amount > 1000\\\"].json[\\\"predictions\\\"][0][\\\"total_incl\\\"][\\\"amount\\\"]}}\"},{\"short\":false,\"title\":\"From\",\"value\":\"={{$node[\\\"Check for new emails\\\"].json[\\\"from\\\"][\\\"value\\\"][0][\\\"address\\\"]}}\"},{\"short\":true,\"title\":\"Subject\",\"value\":\"={{$node[\\\"Check for new emails\\\"].json[\\\"subject\\\"]}}\"}]},\"footer\":\"=*Date:* {{$node[\\\"Check for new emails\\\"].json[\\\"date\\\"]}}\"}],\"otherOptions\":{}},\"credentials\":{\"slackApi\":{\"id\":\"53\",\"name\":\"Slack Access Token\"}},\"typeVersion\":1},{\"name\":\"Send email to finance manager\",\"type\":\"n8n-nodes-base.emailSend\",\"position\":[1340,120],\"parameters\":{\"text\":\"Hi,\\n\\nThere is a new high value invoice to be paid that you may need to approve.\\n\\n~ n8n workflow\",\"options\":{},\"subject\":\"New high value invoice\",\"toEmail\":\"finance-manager@company.tld\",\"fromEmail\":\"n8n@noreply.tld\",\"attachments\":\"attachment_0\"},\"credentials\":{\"smtp\":{\"id\":\"26\",\"name\":\"mailtrap\"}},\"typeVersion\":1},{\"name\":\"If Amount > 1000\",\"type\":\"n8n-nodes-base.if\",\"position\":[1080,280],\"parameters\":{\"conditions\":{\"number\":[{\"value1\":\"={{$json[\\\"predictions\\\"][0][\\\"total_incl\\\"][\\\"amount\\\"]}}\",\"value2\":1000,\"operation\":\"larger\"}]}},\"typeVersion\":1}],\"active\":false,\"settings\":{},\"connections\":{\"If Amount > 1000\":{\"main\":[[{\"node\":\"Send email to finance manager\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Send new invoice notification\",\"type\":\"main\",\"index\":0}]]},\"Check for new emails\":{\"main\":[[{\"node\":\"If email body contains invoice\",\"type\":\"main\",\"index\":0}]]},\"Extract the total amount\":{\"main\":[[{\"node\":\"If Amount > 1000\",\"type\":\"main\",\"index\":0}]]},\"Send email to finance manager\":{\"main\":[[{\"node\":\"Send new invoice notification\",\"type\":\"main\",\"index\":0}]]},\"If email body contains invoice\":{\"main\":[[{\"node\":\"Extract the total amount\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "This workflow checks for new emails in a mailbox and if the email body contains the word \"invoice\" it will send the attachment to Mindee. It then posts a message to Slack to let the team know a payment needs to be made, If the value of the invoice is over 1000 it will also email the finance manager.\n\nTo use this workflow you will need to configure the IMAP node to select the correct mailbox to use then configure the Mindee node to use your credentials.\n\nOnce that is done the Send Email node will need to be configured to use the correct mail server and to send to the correct people, The last thing to configure is the Slack node this will need your Slack credentials and the channel you want to post the message to.\n",
  "crawled_at": "2025-05-25T19:45:00.247266",
  "readme_zh": "该工作流程会检查邮箱中的新邮件，若邮件正文含有\"invoice\"字样，则将附件发送至Mindee处理。随后会在Slack发布通知告知团队需完成付款，若发票金额超过1000元还将抄送财务经理。\n\n使用本流程前需完成以下配置：\n1. 配置IMAP节点选择目标邮箱\n2. 配置Mindee节点填写认证信息\n3. 设置Send Email节点选择正确的邮件服务器及收件人\n4. 最后配置Slack节点，需提供Slack账户凭证及指定消息推送频道",
  "title_zh": "在Slack中通知新邮件附带发票",
  "publish_date_zh": "最后更新于10个月前",
  "workflow_json_zh": "{\"id\":91,\"name\":\"New invoice email notification\",\"nodes\":[{\"name\":\"Check for new emails\",\"type\":\"n8n-nodes-base.emailReadImap\",\"position\":[500,300],\"parameters\":{\"format\":\"resolved\",\"mailbox\":\"Inbox\",\"options\":{\"allowUnauthorizedCerts\":true}},\"credentials\":{\"imap\":{\"id\":\"24\",\"name\":\"GMAIL\"}},\"typeVersion\":1},{\"name\":\"If email body contains invoice\",\"type\":\"n8n-nodes-base.if\",\"position\":[700,300],\"parameters\":{\"conditions\":{\"string\":[{\"value1\":\"={{$json[\\\"text\\\"].toLowerCase()}}\",\"value2\":\"invoice\",\"operation\":\"contains\"}]},\"combineOperation\":\"any\"},\"typeVersion\":1},{\"name\":\"Extract the total amount\",\"type\":\"n8n-nodes-base.mindee\",\"position\":[900,280],\"parameters\":{\"rawData\":true,\"resource\":\"invoice\",\"binaryPropertyName\":\"attachment_0\"},\"credentials\":{\"mindeeInvoiceApi\":{\"id\":\"62\",\"name\":\"Mindee Invoice account\"}},\"typeVersion\":1},{\"name\":\"Send new invoice notification\",\"type\":\"n8n-nodes-base.slack\",\"position\":[1580,300],\"parameters\":{\"text\":\":new: There is a new invoice to pay :new:\",\"channel\":\"team-accounts\",\"blocksUi\":{\"blocksValues\":[]},\"attachments\":[{\"color\":\"#FFBF00\",\"fields\":{\"item\":[{\"short\":true,\"title\":\"Amount\",\"value\":\"={{$node[\\\"If Amount > 1000\\\"].json[\\\"predictions\\\"][0][\\\"total_incl\\\"][\\\"amount\\\"]}}\"},{\"short\":false,\"title\":\"From\",\"value\":\"={{$node[\\\"Check for new emails\\\"].json[\\\"from\\\"][\\\"value\\\"][0][\\\"address\\\"]}}\"},{\"short\":true,\"title\":\"Subject\",\"value\":\"={{$node[\\\"Check for new emails\\\"].json[\\\"subject\\\"]}}\"}]},\"footer\":\"=*Date:* {{$node[\\\"Check for new emails\\\"].json[\\\"date\\\"]}}\"}],\"otherOptions\":{}},\"credentials\":{\"slackApi\":{\"id\":\"53\",\"name\":\"Slack Access Token\"}},\"typeVersion\":1},{\"name\":\"Send email to finance manager\",\"type\":\"n8n-nodes-base.emailSend\",\"position\":[1340,120],\"parameters\":{\"text\":\"Hi,\\n\\nThere is a new high value invoice to be paid that you may need to approve.\\n\\n~ n8n workflow\",\"options\":{},\"subject\":\"New high value invoice\",\"toEmail\":\"finance-manager@company.tld\",\"fromEmail\":\"n8n@noreply.tld\",\"attachments\":\"attachment_0\"},\"credentials\":{\"smtp\":{\"id\":\"26\",\"name\":\"mailtrap\"}},\"typeVersion\":1},{\"name\":\"If Amount > 1000\",\"type\":\"n8n-nodes-base.if\",\"position\":[1080,280],\"parameters\":{\"conditions\":{\"number\":[{\"value1\":\"={{$json[\\\"predictions\\\"][0][\\\"total_incl\\\"][\\\"amount\\\"]}}\",\"value2\":1000,\"operation\":\"larger\"}]}},\"typeVersion\":1}],\"active\":false,\"settings\":{},\"connections\":{\"If Amount > 1000\":{\"main\":[[{\"node\":\"Send email to finance manager\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Send new invoice notification\",\"type\":\"main\",\"index\":0}]]},\"Check for new emails\":{\"main\":[[{\"node\":\"If email body contains invoice\",\"type\":\"main\",\"index\":0}]]},\"Extract the total amount\":{\"main\":[[{\"node\":\"If Amount > 1000\",\"type\":\"main\",\"index\":0}]]},\"Send email to finance manager\":{\"main\":[[{\"node\":\"Send new invoice notification\",\"type\":\"main\",\"index\":0}]]},\"If email body contains invoice\":{\"main\":[[{\"node\":\"Extract the total amount\",\"type\":\"main\",\"index\":0}]]}}}"
}