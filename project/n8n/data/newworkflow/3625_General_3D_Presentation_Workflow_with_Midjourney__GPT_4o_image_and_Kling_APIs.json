{
  "url": "https://n8n.io/workflows/3625-general-3d-presentation-workflow-with-midjourney-gpt-4o-image-and-kling-apis/",
  "title": "General 3D Presentation Workflow with Midjourney, GPT-4o-image and Kling APIs",
  "author": "PiAPI",
  "publish_date": "Last update 11 days ago",
  "publish_date_absolute": "2025-05-15",
  "categories": [],
  "workflow_json": "{\"id\":\"vpZ1wpsniCvKYjCF\",\"meta\":{\"instanceId\":\"1e003a7ea4715b6b35e9947791386a7d07edf3b5bf8d4c9b7ee4fdcbec0447d7\"},\"name\":\"General 3D Presentation\",\"tags\":[],\"nodes\":[{\"id\":\"629ef84e-ffb7-4143-b0af-764bcb86a7fa\",\"name\":\"When clicking â€˜Test workflowâ€™\",\"type\":\"n8n-nodes-base.manualTrigger\",\"position\":[360,40],\"parameters\":{},\"typeVersion\":1},{\"id\":\"d2751dcb-fd03-4a87-a501-43f701d2704a\",\"name\":\"Prompt\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[580,40],\"parameters\":{\"url\":\"https://api.piapi.ai/api/v1/task\",\"method\":\"POST\",\"options\":{},\"jsonBody\":\"{\\n  \\\"model\\\": \\\"midjourney\\\",\\n  \\\"task_type\\\": \\\"imagine\\\",\\n  \\\"input\\\": {\\n    \\\"prompt\\\": \\\"A blind box character design, in the chibi style, a super cute little girl wearing a white long-sleeved dress and pearl earrings with her head bowed in a prayer pose, facing upwards, wearing an oversized off-white dress with large round pearls on the shoulders, minimalist simple dress with Ruffles, against a beige background, a full-body shot in a three-quarter profile view, with a black, blue, and gray color scheme, soft lighting, 3D rendering, clay material, high detail, in the Pixar style. Clean white skin, brown renaissance braided bun. --ar 1:1 --niji 6\\\",\\n    \\\"aspect_ratio\\\": \\\"2:3\\\",\\n    \\\"process_mode\\\": \\\"turbo\\\",\\n    \\\"skip_prompt_check\\\": false\\n  }\\n}\",\"sendBody\":true,\"sendHeaders\":true,\"specifyBody\":\"json\",\"headerParameters\":{\"parameters\":[{\"name\":\"x-api-key\"}]}},\"typeVersion\":4.2},{\"id\":\"f3f4b801-4b2b-49bf-a9be-1f38e62720ac\",\"name\":\"Midjourney Generator\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[400,280],\"parameters\":{\"url\":\"=https://api.piapi.ai/api/v1/task/{{ $json.data.task_id }}\",\"options\":{},\"sendHeaders\":true,\"headerParameters\":{\"parameters\":[{\"name\":\"x-api-key\"}]}},\"typeVersion\":4.2},{\"id\":\"a7ecf5f5-73fd-4d5b-b851-568dde2e797a\",\"name\":\"GPT-4o Image Generator\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[1060,80],\"parameters\":{\"url\":\"https://api.piapi.ai/v1/chat/completions\",\"method\":\"POST\",\"options\":{},\"jsonBody\":\"={\\n    \\\"model\\\": \\\"gpt-4o-image-preview\\\",\\n    \\\"messages\\\": [\\n        {\\n            \\\"role\\\": \\\"user\\\",\\n            \\\"content\\\": [\\n                {\\n                    \\\"type\\\": \\\"image_url\\\",\\n                    \\\"image_url\\\": {\\n                        \\\"url\\\": \\\"{{ $json.random_temp_url }}\\\"\\n                    }\\n                },\\n                {\\n                    \\\"type\\\": \\\"text\\\",\\n                    \\\"text\\\": \\\"Convert this image into a 3D figurine image, with front view, with full details, profile. \\\"\\n                }\\n            ]\\n        }\\n    ],\\n    \\\"stream\\\": true\\n}\",\"sendBody\":true,\"sendHeaders\":true,\"specifyBody\":\"json\",\"authentication\":\"genericCredentialType\",\"genericAuthType\":\"httpHeaderAuth\",\"headerParameters\":{\"parameters\":[{\"name\":\"Authorization\"}]}},\"credentials\":{\"httpHeaderAuth\":{\"id\":\"fsJeCNd9BkJ1CIrt\",\"name\":\"Header Auth account 2\"}},\"typeVersion\":4.2},{\"id\":\"25de6846-9a45-4cb8-8328-b5cb4e36889d\",\"name\":\"Generate Kling Video\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[1600,200],\"parameters\":{\"url\":\"https://api.piapi.ai/api/v1/task\",\"method\":\"POST\",\"options\":{},\"jsonBody\":\"={\\n    \\\"model\\\": \\\"kling\\\",\\n    \\\"task_type\\\": \\\"video_generation\\\",\\n    \\\"input\\\": {\\n        \\\"version\\\": \\\"1.6\\\",\\n        \\\"aspect_ratio\\\": \\\"9:16\\\",\\n        \\\"image_url\\\":\\\"{{ $json.image_url }}\\\",\\n\\n        \\\"prompt\\\": \\\"An anime character anchored mid-frame, gradually rotating to showcase 3D details\\\"\\n       \\n    }\\n} \",\"sendBody\":true,\"sendHeaders\":true,\"specifyBody\":\"json\",\"headerParameters\":{\"parameters\":[{\"name\":\"x-api-key\"}]}},\"typeVersion\":4.2},{\"id\":\"410c252e-4901-4159-b8c2-d9a2fe04371d\",\"name\":\"Get Video URL\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[1820,200],\"parameters\":{\"url\":\"=https://api.piapi.ai/api/v1/task/{{ $json.data.task_id }}\",\"options\":{},\"sendHeaders\":true,\"headerParameters\":{\"parameters\":[{\"name\":\"x-api-key\",\"value\":\"72858adea87ad16865d5b0a24c3d9b9f58a6e7b1a8a8a8a0d6b81a9f3a9812f3\"}]}},\"typeVersion\":4.2},{\"id\":\"9a2188d8-8520-485e-99e4-0ff07e4b86e7\",\"name\":\"Wait for Image Generation\",\"type\":\"n8n-nodes-base.wait\",\"position\":[620,520],\"webhookId\":\"f3bcf634-8c4b-4bf9-a7f2-d4ee369f5349\",\"parameters\":{},\"typeVersion\":1.1},{\"id\":\"7f64087a-1567-4c62-a36d-d3b69d933d48\",\"name\":\"Check Generation Status\",\"type\":\"n8n-nodes-base.if\",\"position\":[600,280],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"a0f8758e-d6fd-44f8-bd79-bc3c4dceddcf\",\"operator\":{\"name\":\"filter.operator.equals\",\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"={{ $json.data.status }}\",\"rightValue\":\"completed\"}]}},\"typeVersion\":2.2},{\"id\":\"838999b7-99f5-4f14-bfe2-4886bd565464\",\"name\":\"Get Image URL of Midjourney\",\"type\":\"n8n-nodes-base.code\",\"position\":[840,80],\"parameters\":{\"jsCode\":\"// JavaScript Code for Function Node\\nreturn {\\n  random_temp_url: $input.all()[0].json.data.output.temporary_image_urls[\\n    Math.floor(Math.random() * $input.all()[0].json.data.output.temporary_image_urls.length)\\n  ]\\n};\"},\"typeVersion\":2},{\"id\":\"09824819-7a6c-4416-ba40-811e9d785678\",\"name\":\"Get Image URL of GPT-4o-image\",\"type\":\"n8n-nodes-base.code\",\"position\":[1280,80],\"parameters\":{\"jsCode\":\"const chunks = $input.first().json.data.split('\\\\n\\\\n');\\n\\nlet imageUrl = null;\\n\\nfor (let i = chunks.length - 1; i >= 0; i--) {\\n    const chunk = chunks[i];\\n    \\n    if (!chunk.startsWith('data: ')) continue;\\n    \\n    try {\\n        const jsonStr = chunk.substring(6); \\n        if (jsonStr.trim() === '[DONE]') continue;\\n        \\n        const data = JSON.parse(jsonStr);\\n        \\n    \\n        if (data.choices && data.choices[0].delta.content) {\\n            const content = data.choices[0].delta.content;\\n            const urlMatch = content.match(/!\\\\[.*?\\\\]\\\\((https?:\\\\/\\\\/[^\\\\s]+)\\\\)/);\\n            \\n            if (urlMatch && urlMatch[1]) {\\n                imageUrl = urlMatch[1];\\n                break;\\n            }\\n        }\\n    } catch (e) {\\n        continue;\\n    }\\n}\\n\\nreturn {\\n    image_url: imageUrl,\\n    finish_reason: imageUrl ? \\\"success\\\" : \\\"not_found\\\"\\n};\"},\"typeVersion\":2},{\"id\":\"22c8f566-6a27-4773-b4ab-45be2fbad8de\",\"name\":\"Check Generation Status of GPT-4o\",\"type\":\"n8n-nodes-base.if\",\"position\":[1260,320],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"08a2ebe6-dc95-4b8a-ada1-1173645cc3f4\",\"operator\":{\"name\":\"filter.operator.equals\",\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"={{ $json.finish_reason }}\",\"rightValue\":\"not_found\"}]}},\"typeVersion\":2.2},{\"id\":\"00ce5488-e96c-4ff1-8727-ed2d787ae0f5\",\"name\":\"Check Video Generation Status\",\"type\":\"n8n-nodes-base.if\",\"position\":[2000,200],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"f36fa981-22e0-46db-af8c-c2ac55242c27\",\"operator\":{\"name\":\"filter.operator.equals\",\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"={{ $json.data.status }}\",\"rightValue\":\"completed\"},{\"id\":\"637ea756-1ad9-434c-b6b2-b100ee4c3cad\",\"operator\":{\"name\":\"filter.operator.equals\",\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"\",\"rightValue\":\"\"}]}},\"typeVersion\":2.2},{\"id\":\"6d53cac4-b35b-41b1-b60a-6faba78b4439\",\"name\":\"Wait for Video Generation\",\"type\":\"n8n-nodes-base.wait\",\"position\":[1960,420],\"webhookId\":\"c7b2590d-96a3-4c7c-8821-3023fead254b\",\"parameters\":{\"amount\":20},\"typeVersion\":1.1},{\"id\":\"4cd00e7b-bfbd-45bc-b775-401055921b45\",\"name\":\"Fetch Final Video URL\",\"type\":\"n8n-nodes-base.code\",\"position\":[2300,300],\"parameters\":{\"jsCode\":\"// Process the entire response\\nreturn {\\n  video_url: $input.all()[0].json.data.output.video_url,\\n  watermark_free_url: $input.all()[0].json.data.output.works[0].video.resource_without_watermark\\n};\"},\"typeVersion\":2},{\"id\":\"617d6647-4c49-4e7f-91f3-5fd6d5e95fe7\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[340,-220],\"parameters\":{\"width\":460,\"height\":220,\"content\":\"## General 3D Presentation\\nThis workflow creates 360Â° or 180Â° spinning videos of high-quality 3D models with [PiAPI](https://piapi.ai) API. ğŸ™‹\\n### Required Instruction: \\n1. Fill in params of Prompt node.\\n2. Fill in x-api-key in Mijdourney Generator node and Generate Kling Video node, fill in Header Parameters of GPT-4o Image Generator (e.g., Bearer + your X-API-Key)\"},\"typeVersion\":1}],\"active\":false,\"pinData\":{},\"settings\":{\"executionOrder\":\"v1\"},\"versionId\":\"c6a9b53c-8d6c-4ffa-b95c-e7cf88734cc9\",\"connections\":{\"Prompt\":{\"main\":[[{\"node\":\"Midjourney Generator\",\"type\":\"main\",\"index\":0}]]},\"Get Video URL\":{\"main\":[[{\"node\":\"Check Video Generation Status\",\"type\":\"main\",\"index\":0}]]},\"Generate Kling Video\":{\"main\":[[{\"node\":\"Get Video URL\",\"type\":\"main\",\"index\":0}]]},\"Midjourney Generator\":{\"main\":[[{\"node\":\"Check Generation Status\",\"type\":\"main\",\"index\":0}]]},\"GPT-4o Image Generator\":{\"main\":[[{\"node\":\"Get Image URL of GPT-4o-image\",\"type\":\"main\",\"index\":0}]]},\"Check Generation Status\":{\"main\":[[{\"node\":\"Get Image URL of Midjourney\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Wait for Image Generation\",\"type\":\"main\",\"index\":0}]]},\"Wait for Image Generation\":{\"main\":[[{\"node\":\"Midjourney Generator\",\"type\":\"main\",\"index\":0}]]},\"Wait for Video Generation\":{\"main\":[[{\"node\":\"Get Video URL\",\"type\":\"main\",\"index\":0}]]},\"Get Image URL of Midjourney\":{\"main\":[[{\"node\":\"GPT-4o Image Generator\",\"type\":\"main\",\"index\":0}]]},\"Check Video Generation Status\":{\"main\":[[{\"node\":\"Fetch Final Video URL\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Wait for Video Generation\",\"type\":\"main\",\"index\":0}]]},\"Get Image URL of GPT-4o-image\":{\"main\":[[{\"node\":\"Check Generation Status of GPT-4o\",\"type\":\"main\",\"index\":0}]]},\"Check Generation Status of GPT-4o\":{\"main\":[[{\"node\":\"GPT-4o Image Generator\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Generate Kling Video\",\"type\":\"main\",\"index\":0}]]},\"When clicking â€˜Test workflowâ€™\":{\"main\":[[{\"node\":\"Prompt\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "### Who is this template for?\n\nThis workflow creates 360Â° or 180Â° spinning videos of high-quality 3D models with [PiAPI](https://piapi.ai) API.\n\n**Good for:**\n\n  * **Designers** : Generate inspiration into 3D designs and make them spin to gain concrete details in a efficient way.\n  * **Online shoppers** : Show protential products from all angles in videos and preview overall texture of models.\n  * **Content Creators** (including toy bloggers): Make fun videos of collectible models.\n  * **3D beginners:** Get simple spinning animations easily and make fun with them in a convenient way.\n\n\n\n### How to customize this workflow to your needï¼Ÿ\n\nTo use this workflow, usually we need four steps:\n\n  1. Fill in x-api-key in Mijdourney Generator node and Generate Kling Video node, fill in Header Parameters of GPT-4o Image Generator (e.g., Bearer + your X-API-Key)\n  2. Enter your model prompt based on your inspiration.\n  3. Click Test Workflow.\n  4. Get the video URL in the last node.\n\n\n\n### Use Case\n\nThe prompt node concludes the main features of creations. An example for users' reference is listed as follow:\n\n#### Input Prompt\n\nA blind box character design, in the chibi style, a super cute little girl wearing a white long-sleeved dress and pearl earrings with her head bowed in a prayer pose, facing upwards, wearing an oversized off-white dress with large round pearls on the shoulders, minimalist simple dress with Ruffles, against a beige background, a full-body shot in a three-quarter profile view, with a black, blue, and gray color scheme, soft lighting, 3D rendering, clay material, high detail, in the Pixar style. Clean white skin, brown renaissance braided bun. --ar 1:1 --niji 6\n\n### Output Video\n\nAn Example for your reference.  \n<video src=\"<https://static.piapi.ai/n8n-instruction/general-3d-presentation/example1.mp4>\" controls />\n\n### More Example Results for Reference\n\n<video src=\"<https://static.piapi.ai/n8n-instruction/general-3d-presentation/example3.mp4>\" controls />\n",
  "crawled_at": "2025-05-26T05:04:27.868804",
  "readme_zh": "### è¯¥æ¨¡æ¿é€‚ç”¨äºè°ï¼Ÿ\n\næœ¬å·¥ä½œæµé€šè¿‡[PiAPI](https://piapi.ai)æ¥å£ç”Ÿæˆé«˜è´¨é‡3Dæ¨¡å‹çš„360Â°æˆ–180Â°æ—‹è½¬è§†é¢‘ã€‚\n\n**é€‚åˆäººç¾¤ï¼š**\n\n  * **è®¾è®¡å¸ˆ**ï¼šå°†çµæ„Ÿè½¬åŒ–ä¸º3Dè®¾è®¡ï¼Œé€šè¿‡æ—‹è½¬å±•ç¤ºå¿«é€Ÿè·å–ç»†èŠ‚\n  * **ç”µå•†å–å®¶**ï¼šå¤šè§’åº¦å±•ç¤ºå•†å“è§†é¢‘ï¼Œé¢„è§ˆæ¨¡å‹æ•´ä½“è´¨æ„Ÿ\n  * **å†…å®¹åˆ›ä½œè€…**ï¼ˆåŒ…æ‹¬ç©å…·åšä¸»ï¼‰ï¼šåˆ¶ä½œæ”¶è—çº§æ¨¡å‹çš„è¶£å‘³è§†é¢‘\n  * **3Dæ–°æ‰‹**ï¼šè½»æ¾è·å¾—ç®€æ˜“æ—‹è½¬åŠ¨ç”»ï¼Œä¾¿æ·å®ç°åˆ›æ„ç©æ³•\n\n### å¦‚ä½•è‡ªå®šä¹‰å·¥ä½œæµï¼Ÿ\n\nä½¿ç”¨æœ¬å·¥ä½œæµé€šå¸¸éœ€è¦å››ä¸ªæ­¥éª¤ï¼š\n\n  1. åœ¨Mijdourneyç”Ÿæˆå™¨å’Œç”Ÿæˆæ—‹è½¬è§†é¢‘èŠ‚ç‚¹å¡«å†™x-api-keyï¼Œé…ç½®GPT-4oå›¾åƒç”Ÿæˆå™¨çš„Headerå‚æ•°ï¼ˆå¦‚Bearer + ä½ çš„X-API-Keyï¼‰\n  2. æ ¹æ®çµæ„Ÿè¾“å…¥æ¨¡å‹æè¿°è¯\n  3. ç‚¹å‡»æµ‹è¯•å·¥ä½œæµ\n  4. åœ¨æœ«ç«¯èŠ‚ç‚¹è·å–è§†é¢‘é“¾æ¥\n\n### ä½¿ç”¨æ¡ˆä¾‹\n\næç¤ºè¯èŠ‚ç‚¹åŒ…å«åˆ›ä½œçš„æ ¸å¿ƒç‰¹å¾ï¼Œä»¥ä¸‹ä¸ºç”¨æˆ·å‚è€ƒç¤ºä¾‹ï¼š\n\n#### è¾“å…¥æç¤ºè¯\nç›²ç›’è§’è‰²è®¾è®¡ï¼ŒQç‰ˆé£æ ¼ï¼Œè¶…å¯çˆ±å°‘å¥³ä½å¤´ç¥ˆç¥·å§¿åŠ¿ï¼Œèº«ç€ç™½è‰²é•¿è¢–è¿è¡£è£™é…çç è€³ç¯ï¼Œä»°æœ›æ—¶ç©¿ç€ç±³ç™½è‰²oversizeè¿è¡£è£™ï¼Œè‚©éƒ¨è£…é¥°å¤§åœ†çç ï¼Œæç®€è¤¶çš±è®¾è®¡ï¼Œç±³è‰²èƒŒæ™¯ï¼Œå››åˆ†ä¹‹ä¸‰ä¾§èº«å…¨èº«åƒï¼Œé»‘è“ç°é…è‰²ï¼ŒæŸ”å’Œå…‰çº¿ï¼Œ3Dæ¸²æŸ“ï¼Œé»åœŸæè´¨ï¼Œé«˜ç²¾åº¦ï¼Œçš®å…‹æ–¯é£æ ¼ã€‚ç™½çš™è‚Œè‚¤ï¼Œæ£•è‰²æ–‡è‰ºå¤å…´é£ç¼–ç»‡å‘é«»ã€‚--ar 1:1 --niji 6\n\n### è¾“å‡ºè§†é¢‘\nå‚è€ƒç¤ºä¾‹  \n<video src=\"<https://static.piapi.ai/n8n-instruction/general-3d-presentation/example1.mp4>\" controls />\n\n### æ›´å¤šå‚è€ƒæ•ˆæœ\n\n<video src=\"<https://static.piapi.ai/n8n-instruction/general-3d-presentation/example3.mp4>\" controls />",
  "title_zh": "ä½¿ç”¨Midjourneyã€GPT-4o-imageå’ŒKling APIçš„é€šç”¨3Dæ¼”ç¤ºå·¥ä½œæµç¨‹",
  "publish_date_zh": "ä¸Šæ¬¡æ›´æ–°äº11å¤©å‰",
  "workflow_json_zh": "{\n  \"id\": \"vpZ1wpsniCvKYjCF\",\n  \"meta\": {\n    \"instanceId\": \"1e003a7ea4715b6b35e9947791386a7d07edf3b5bf8d4c9b7ee4fdcbec0447d7\"\n  },\n  \"name\": \"General 3D Presentation\",\n  \"tags\": [],\n  \"nodes\": [\n    {\n      \"id\": \"629ef84e-ffb7-4143-b0af-764bcb86a7fa\",\n      \"name\": \"When clicking â€˜Test workflowâ€™\",\n      \"type\": \"n8n-nodes-base.manualTrigger\",\n      \"position\": [\n        360,\n        40\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"d2751dcb-fd03-4a87-a501-43f701d2704a\",\n      \"name\": \"Prompt\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        580,\n        40\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.piapi.ai/api/v1/task\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"jsonBody\": \"{\\n  \\\"model\\\": \\\"midjourney\\\",\\n  \\\"task_type\\\": \\\"imagine\\\",\\n  \\\"input\\\": {\\n    \\\"prompt\\\": \\\"A blind box character design, in the chibi style, a super cute little girl wearing a white long-sleeved dress and pearl earrings with her head bowed in a prayer pose, facing upwards, wearing an oversized off-white dress with large round pearls on the shoulders, minimalist simple dress with Ruffles, against a beige background, a full-body shot in a three-quarter profile view, with a black, blue, and gray color scheme, soft lighting, 3D rendering, clay material, high detail, in the Pixar style. Clean white skin, brown renaissance braided bun. --ar 1:1 --niji 6\\\",\\n    \\\"aspect_ratio\\\": \\\"2:3\\\",\\n    \\\"process_mode\\\": \\\"turbo\\\",\\n    \\\"skip_prompt_check\\\": false\\n  }\\n}\",\n        \"sendBody\": true,\n        \"sendHeaders\": true,\n        \"specifyBody\": \"json\",\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"x-api-key\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"f3f4b801-4b2b-49bf-a9be-1f38e62720ac\",\n      \"name\": \"Midjourney Generator\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        400,\n        280\n      ],\n      \"parameters\": {\n        \"url\": \"=https://api.piapi.ai/api/v1/task/{{ $json.data.task_id }}\",\n        \"options\": {},\n        \"sendHeaders\": true,\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"x-api-key\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"a7ecf5f5-73fd-4d5b-b851-568dde2e797a\",\n      \"name\": \"GPT-4o Image Generator\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1060,\n        80\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.piapi.ai/v1/chat/completions\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"jsonBody\": \"={\\n    \\\"model\\\": \\\"gpt-4o-image-preview\\\",\\n    \\\"messages\\\": [\\n        {\\n            \\\"role\\\": \\\"user\\\",\\n            \\\"content\\\": [\\n                {\\n                    \\\"type\\\": \\\"image_url\\\",\\n                    \\\"image_url\\\": {\\n                        \\\"url\\\": \\\"{{ $json.random_temp_url }}\\\"\\n                    }\\n                },\\n                {\\n                    \\\"type\\\": \\\"text\\\",\\n                    \\\"text\\\": \\\"Convert this image into a 3D figurine image, with front view, with full details, profile. \\\"\\n                }\\n            ]\\n        }\\n    ],\\n    \\\"stream\\\": true\\n}\",\n        \"sendBody\": true,\n        \"sendHeaders\": true,\n        \"specifyBody\": \"json\",\n        \"authentication\": \"genericCredentialType\",\n        \"genericAuthType\": \"httpHeaderAuth\",\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"Authorization\"\n            }\n          ]\n        }\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": {\n          \"id\": \"fsJeCNd9BkJ1CIrt\",\n          \"name\": \"Header Auth account 2\"\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"25de6846-9a45-4cb8-8328-b5cb4e36889d\",\n      \"name\": \"Generate Kling Video\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1600,\n        200\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.piapi.ai/api/v1/task\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"jsonBody\": \"={\\n    \\\"model\\\": \\\"kling\\\",\\n    \\\"task_type\\\": \\\"video_generation\\\",\\n    \\\"input\\\": {\\n        \\\"version\\\": \\\"1.6\\\",\\n        \\\"aspect_ratio\\\": \\\"9:16\\\",\\n        \\\"image_url\\\":\\\"{{ $json.image_url }}\\\",\\n\\n        \\\"prompt\\\": \\\"An anime character anchored mid-frame, gradually rotating to showcase 3D details\\\"\\n       \\n    }\\n} \",\n        \"sendBody\": true,\n        \"sendHeaders\": true,\n        \"specifyBody\": \"json\",\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"x-api-key\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"410c252e-4901-4159-b8c2-d9a2fe04371d\",\n      \"name\": \"Get Video URL\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1820,\n        200\n      ],\n      \"parameters\": {\n        \"url\": \"=https://api.piapi.ai/api/v1/task/{{ $json.data.task_id }}\",\n        \"options\": {},\n        \"sendHeaders\": true,\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"x-api-key\",\n              \"value\": \"72858adea87ad16865d5b0a24c3d9b9f58a6e7b1a8a8a8a0d6b81a9f3a9812f3\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"9a2188d8-8520-485e-99e4-0ff07e4b86e7\",\n      \"name\": \"Wait for Image Generation\",\n      \"type\": \"n8n-nodes-base.wait\",\n      \"position\": [\n        620,\n        520\n      ],\n      \"webhookId\": \"f3bcf634-8c4b-4bf9-a7f2-d4ee369f5349\",\n      \"parameters\": {},\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"7f64087a-1567-4c62-a36d-d3b69d933d48\",\n      \"name\": \"Check Generation Status\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        600,\n        280\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"a0f8758e-d6fd-44f8-bd79-bc3c4dceddcf\",\n              \"operator\": {\n                \"name\": \"filter.operator.equals\",\n                \"type\": \"string\",\n                \"operation\": \"equals\"\n              },\n              \"leftValue\": \"={{ $json.data.status }}\",\n              \"rightValue\": \"completed\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"838999b7-99f5-4f14-bfe2-4886bd565464\",\n      \"name\": \"Get Image URL of Midjourney\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        840,\n        80\n      ],\n      \"parameters\": {\n        \"jsCode\": \"// JavaScript Code for Function Node\\nreturn {\\n  random_temp_url: $input.all()[0].json.data.output.temporary_image_urls[\\n    Math.floor(Math.random() * $input.all()[0].json.data.output.temporary_image_urls.length)\\n  ]\\n};\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"09824819-7a6c-4416-ba40-811e9d785678\",\n      \"name\": \"Get Image URL of GPT-4o-image\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        1280,\n        80\n      ],\n      \"parameters\": {\n        \"jsCode\": \"const chunks = $input.first().json.data.split('\\\\n\\\\n');\\n\\nlet imageUrl = null;\\n\\nfor (let i = chunks.length - 1; i >= 0; i--) {\\n    const chunk = chunks[i];\\n    \\n    if (!chunk.startsWith('data: ')) continue;\\n    \\n    try {\\n        const jsonStr = chunk.substring(6); \\n        if (jsonStr.trim() === '[DONE]') continue;\\n        \\n        const data = JSON.parse(jsonStr);\\n        \\n    \\n        if (data.choices && data.choices[0].delta.content) {\\n            const content = data.choices[0].delta.content;\\n            const urlMatch = content.match(/!\\\\[.*?\\\\]\\\\((https?:\\\\/\\\\/[^\\\\s]+)\\\\)/);\\n            \\n            if (urlMatch && urlMatch[1]) {\\n                imageUrl = urlMatch[1];\\n                break;\\n            }\\n        }\\n    } catch (e) {\\n        continue;\\n    }\\n}\\n\\nreturn {\\n    image_url: imageUrl,\\n    finish_reason: imageUrl ? \\\"success\\\" : \\\"not_found\\\"\\n};\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"22c8f566-6a27-4773-b4ab-45be2fbad8de\",\n      \"name\": \"Check Generation Status of GPT-4o\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        1260,\n        320\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"08a2ebe6-dc95-4b8a-ada1-1173645cc3f4\",\n              \"operator\": {\n                \"name\": \"filter.operator.equals\",\n                \"type\": \"string\",\n                \"operation\": \"equals\"\n              },\n              \"leftValue\": \"={{ $json.finish_reason }}\",\n              \"rightValue\": \"not_found\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"00ce5488-e96c-4ff1-8727-ed2d787ae0f5\",\n      \"name\": \"Check Video Generation Status\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        2000,\n        200\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"f36fa981-22e0-46db-af8c-c2ac55242c27\",\n              \"operator\": {\n                \"name\": \"filter.operator.equals\",\n                \"type\": \"string\",\n                \"operation\": \"equals\"\n              },\n              \"leftValue\": \"={{ $json.data.status }}\",\n              \"rightValue\": \"completed\"\n            },\n            {\n              \"id\": \"637ea756-1ad9-434c-b6b2-b100ee4c3cad\",\n              \"operator\": {\n                \"name\": \"filter.operator.equals\",\n                \"type\": \"string\",\n                \"operation\": \"equals\"\n              },\n              \"leftValue\": \"\",\n              \"rightValue\": \"\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"6d53cac4-b35b-41b1-b60a-6faba78b4439\",\n      \"name\": \"Wait for Video Generation\",\n      \"type\": \"n8n-nodes-base.wait\",\n      \"position\": [\n        1960,\n        420\n      ],\n      \"webhookId\": \"c7b2590d-96a3-4c7c-8821-3023fead254b\",\n      \"parameters\": {\n        \"amount\": 20\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"4cd00e7b-bfbd-45bc-b775-401055921b45\",\n      \"name\": \"Fetch Final Video URL\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        2300,\n        300\n      ],\n      \"parameters\": {\n        \"jsCode\": \"// Process the entire response\\nreturn {\\n  video_url: $input.all()[0].json.data.output.video_url,\\n  watermark_free_url: $input.all()[0].json.data.output.works[0].video.resource_without_watermark\\n};\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"617d6647-4c49-4e7f-91f3-5fd6d5e95fe7\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        340,\n        -220\n      ],\n      \"parameters\": {\n        \"width\": 460,\n        \"height\": 220,\n        \"content\": \"## é€šç”¨3Då±•ç¤º\\næœ¬å·¥ä½œæµé€šè¿‡[PiAPI](https://piapi.ai)æ¥å£åˆ›å»ºé«˜è´¨é‡3Dæ¨¡å‹çš„360Â°æˆ–180Â°æ—‹è½¬è§†é¢‘ã€‚ğŸ™‹\\n### å¿…è¦æ“ä½œè¯´æ˜ï¼š\\n1. å¡«å†™PromptèŠ‚ç‚¹çš„å‚æ•°\\n2. åœ¨Mijdourney GeneratorèŠ‚ç‚¹å’ŒGenerate Kling VideoèŠ‚ç‚¹ä¸­å¡«å†™x-api-keyï¼Œå¹¶åœ¨GPT-4o Image Generatorçš„Header Parametersä¸­å¡«å†™è®¤è¯ä¿¡æ¯ï¼ˆä¾‹å¦‚Bearer + æ‚¨çš„X-APIå¯†é’¥ï¼‰\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"active\": false,\n  \"pinData\": {},\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"c6a9b53c-8d6c-4ffa-b95c-e7cf88734cc9\",\n  \"connections\": {\n    \"Prompt\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Midjourney Generator\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get Video URL\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Check Video Generation Status\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Generate Kling Video\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get Video URL\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Midjourney Generator\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Check Generation Status\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"GPT-4o Image Generator\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get Image URL of GPT-4o-image\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Check Generation Status\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get Image URL of Midjourney\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Wait for Image Generation\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Wait for Image Generation\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Midjourney Generator\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Wait for Video Generation\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get Video URL\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get Image URL of Midjourney\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"GPT-4o Image Generator\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Check Video Generation Status\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Fetch Final Video URL\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Wait for Video Generation\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get Image URL of GPT-4o-image\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Check Generation Status of GPT-4o\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Check Generation Status of GPT-4o\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"GPT-4o Image Generator\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Generate Kling Video\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When clicking â€˜Test workflowâ€™\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Prompt\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}