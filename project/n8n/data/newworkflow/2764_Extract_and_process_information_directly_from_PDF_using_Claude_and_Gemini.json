{
  "url": "https://n8n.io/workflows/2764-extract-and-process-information-directly-from-pdf-using-claude-and-gemini/",
  "title": "Extract and process information directly from PDF using Claude and Gemini",
  "author": "Agent Studio",
  "publish_date": "Last update 4 months ago",
  "publish_date_absolute": "2025-01-26",
  "categories": [
    {
      "name": "AI"
    }
  ],
  "workflow_json": "{\"meta\":{\"instanceId\":\"f4f5d195bb2162a0972f737368404b18be694648d365d6c6771d7b4909d28167\"},\"nodes\":[{\"id\":\"b6cd232e-e82e-457b-9f03-c010b3eba148\",\"name\":\"When clicking 'Test workflow'\",\"type\":\"n8n-nodes-base.manualTrigger\",\"position\":[-40,0],\"parameters\":{},\"typeVersion\":1},{\"id\":\"2b734806-e3c0-4552-a491-54ca846ed3ac\",\"name\":\"Extract from File\",\"type\":\"n8n-nodes-base.extractFromFile\",\"position\":[620,0],\"parameters\":{\"options\":{},\"operation\":\"binaryToPropery\"},\"typeVersion\":1},{\"id\":\"2c199499-cc4f-405c-8560-765500b7acba\",\"name\":\"Google Drive\",\"type\":\"n8n-nodes-base.googleDrive\",\"position\":[420,0],\"parameters\":{\"fileId\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"18Ac2xorxirIBm9FNFDDB5aVUSPBCCg1U\",\"cachedResultUrl\":\"https://drive.google.com/file/d/18Ac2xorxirIBm9FNFDDB5aVUSPBCCg1U/view?usp=drivesdk\",\"cachedResultName\":\"Invoice-798FE2FA-0004.pdf\"},\"options\":{},\"operation\":\"download\"},\"credentials\":{\"googleDriveOAuth2Api\":{\"id\":\"AUEpxwlqBJghNMtb\",\"name\":\"Google Drive account\"}},\"typeVersion\":3},{\"id\":\"e3031c0c-f059-4f30-9684-10014a277d55\",\"name\":\"Call Gemini 2.0 Flash with PDF Capabilities\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[880,220],\"parameters\":{\"url\":\"https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent\",\"method\":\"POST\",\"options\":{},\"jsonBody\":\"={\\n  \\\"contents\\\": [\\n    {\\n      \\\"parts\\\": [\\n        {\\n          \\\"inline_data\\\": {\\n            \\\"mime_type\\\": \\\"application/pdf\\\",\\n            \\\"data\\\": \\\"{{ $json.data }}\\\"\\n          }\\n        },\\n        {\\n          \\\"text\\\": \\\"{{ $('Define Prompt').item.json.prompt }}\\\"\\n        }\\n      ]\\n    }\\n  ]\\n}\",\"sendBody\":true,\"specifyBody\":\"json\",\"authentication\":\"predefinedCredentialType\",\"nodeCredentialType\":\"googlePalmApi\"},\"credentials\":{\"anthropicApi\":{\"id\":\"eOt6Ois0jSizRFMJ\",\"name\":\"Anthropic Mira Account\"},\"googlePalmApi\":{\"id\":\"IQrjvfoUd5LUft3b\",\"name\":\"Google Gemini(PaLM) Api account\"}},\"typeVersion\":4.2},{\"id\":\"135df716-32a1-47e8-9ed8-30c830b803d6\",\"name\":\"Call Claude 3.5 Sonnet with PDF Capabilities\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[880,-140],\"parameters\":{\"url\":\"https://api.anthropic.com/v1/messages\",\"method\":\"POST\",\"options\":{},\"jsonBody\":\"={\\n  \\\"model\\\": \\\"claude-3-5-sonnet-20241022\\\",\\n    \\\"max_tokens\\\": 1024,\\n    \\\"messages\\\": [{\\n        \\\"role\\\": \\\"user\\\",\\n        \\\"content\\\": [{\\n            \\\"type\\\": \\\"document\\\",\\n            \\\"source\\\": {\\n                \\\"type\\\": \\\"base64\\\",\\n                \\\"media_type\\\": \\\"application/pdf\\\",\\n                \\\"data\\\": \\\"{{$json.data}}\\\"\\n            }\\n        },\\n        {\\n            \\\"type\\\": \\\"text\\\",\\n            \\\"text\\\": \\\"{{ $('Define Prompt').item.json.prompt }}\\\"\\n        }]\\n    }]\\n}\",\"sendBody\":true,\"sendHeaders\":true,\"specifyBody\":\"json\",\"authentication\":\"predefinedCredentialType\",\"headerParameters\":{\"parameters\":[{\"name\":\"anthropic-version\",\"value\":\"2023-06-01\"},{\"name\":\"content-type\",\"value\":\"application/json\"}]},\"nodeCredentialType\":\"anthropicApi\"},\"credentials\":{\"anthropicApi\":{\"id\":\"eOt6Ois0jSizRFMJ\",\"name\":\"Anthropic Mira Account\"}},\"typeVersion\":4.2},{\"id\":\"5b8994d1-4bfd-4776-84ac-b3141aca6378\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-700,-280],\"parameters\":{\"color\":7,\"width\":601,\"height\":585,\"content\":\"## Workflow: Extract data from PDF with Claude 3.5 Sonnet or Gemini 2.0 Flash\\n\\n**Overview**\\n- This workflow helps you compare Claude 3.5 Sonnet and Gemini 2.0 Flash when extracting data from a PDF\\n- This workflow extracts and processes the data within a PDF in **one single step**, **instead of calling an OCR and then an LLM”**\\n\\n\\n**How it works**\\n- The initial 2 steps download the PDF and convert it to base64.\\n- This base64 string is then sent to both Claude 3.5 Sonnet and Gemini 2.0 Flash to extract information.\\n- This workflow is made to let you compare results, latency, and cost (in their dedicated dashboard).\\n\\n\\n**How to use it**\\n- Set up your Google Drive if not already done\\n- Select a document on your Google Drive\\n- Modify the prompt in \\\"Define Prompt\\\" to extract the information you need and transform it as wanted.\\n- Get a [Claude API key](https://console.anthropic.com/settings/keys) and/or [Gemini API key](https://aistudio.google.com/app/apikey)\\n- Note that you can deactivate one of the 2 API calls if you don't want to try both\\n- Test the Workflow\\n\"},\"typeVersion\":1},{\"id\":\"616241a9-6199-406b-88dc-0afc7d974250\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[820,60],\"parameters\":{\"color\":5,\"width\":320,\"height\":360,\"content\":\"You can output the result as JSON by adding the following:\\n```\\n\\\"generationConfig\\\": {\\n    \\\"responseMimeType\\\": \\\"application/json\\\"\\n```\\nor even use a structured output.\\n[Check the documentation](https://ai.google.dev/gemini-api/docs/structured-output?lang=rest)\"},\"typeVersion\":1},{\"id\":\"bbac8d3d-d68f-4aa2-a41a-b06f7de2317b\",\"name\":\"Define Prompt\",\"type\":\"n8n-nodes-base.set\",\"position\":[180,0],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"dba23ef5-95df-496a-8e24-c7c1544533d2\",\"name\":\"prompt\",\"type\":\"string\",\"value\":\"Extract the VAT numbers for each country\"}]}},\"typeVersion\":3.4},{\"id\":\"3c2e7265-76e5-4911-a950-7e6b0c89ec5a\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[820,-200],\"parameters\":{\"color\":5,\"width\":320,\"height\":240,\"content\":\"You can force Claude to output JSON with [Prefill response format](https://docs.anthropic.com/en/docs/test-and-evaluate/strengthen-guardrails/increase-consistency#prefill-claudes-response)\"},\"typeVersion\":1},{\"id\":\"f2b46305-5200-486e-ad4d-ecc0d2a14314\",\"name\":\"Sticky Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[380,-120],\"parameters\":{\"color\":5,\"width\":380,\"height\":280,\"content\":\"These 2 steps first download the PDF file, and then convert it to base64.\\nThis is required by both APIs to process the file.\"},\"typeVersion\":1},{\"id\":\"e5dff70f-b55a-4c23-9025-765a7cf19c4a\",\"name\":\"Sticky Note4\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[120,-120],\"parameters\":{\"color\":5,\"width\":220,\"height\":280,\"content\":\"This prompt is used in both Gemini’s and Claude’s calls to define what information should be extracted and processed.\"},\"typeVersion\":1}],\"pinData\":{},\"connections\":{\"Google Drive\":{\"main\":[[{\"node\":\"Extract from File\",\"type\":\"main\",\"index\":0}]]},\"Define Prompt\":{\"main\":[[{\"node\":\"Google Drive\",\"type\":\"main\",\"index\":0}]]},\"Extract from File\":{\"main\":[[{\"node\":\"Call Claude 3.5 Sonnet with PDF Capabilities\",\"type\":\"main\",\"index\":0},{\"node\":\"Call Gemini 2.0 Flash with PDF Capabilities\",\"type\":\"main\",\"index\":0}]]},\"When clicking 'Test workflow'\":{\"main\":[[{\"node\":\"Define Prompt\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "## Overview\n\n  * This workflow helps you compare Claude 3.5 Sonnet and Gemini 2.0 Flash when extracting data from a PDF\n  * This workflow extracts and processes the data within a PDF in **one single step** , **instead of calling an OCR and then an LLM”**\n\n\n\n## How it works\n\n  * The initial 2 steps download the PDF and convert it to base64.\n  * This base64 string is then sent to both Claude 3.5 Sonnet and Gemini 2.0 Flash to extract information.\n  * This workflow is made to let you compare results, latency, and cost (in their dedicated dashboard).\n\n\n\n## How to use it\n\n  * Set up your Google Drive if not already done\n  * Select a document on your Google Drive\n  * Modify the prompt in \"Define Prompt\" to extract the information you need and transform it as wanted.\n  * Get a [Claude API key](https://console.anthropic.com/settings/keys) and/or [Gemini API key](https://aistudio.google.com/app/apikey)\n  * Note that you can deactivate one of the 2 API calls if you don't want to try both\n  * Test the Workflow\n\n\n",
  "crawled_at": "2025-05-26T01:55:07.365630",
  "readme_zh": "## 概述\n\n  * 本工作流帮助您对比Claude 3.5 Sonnet和Gemini 2.0 Flash从PDF提取数据的效果\n  * 该工作流**仅需一步操作**即可完成PDF数据提取与处理，**无需先调用OCR再调用大语言模型**\n\n## 工作原理\n\n  * 前两个步骤会下载PDF文件并将其转换为base64编码\n  * 该base64字符串将同时发送给Claude 3.5 Sonnet和Gemini 2.0 Flash进行信息提取\n  * 本工作流专为对比两者的结果、延迟时间和成本（可在专属仪表板查看）而设计\n\n## 使用方法\n\n  * 如未配置请先设置Google Drive\n  * 从Google Drive选择目标文档\n  * 在\"定义提示词\"步骤修改提示词以提取所需信息并按需转换格式\n  * 获取[Claude API密钥](https://console.anthropic.com/settings/keys)和/或[Gemini API密钥](https://aistudio.google.com/app/apikey)\n  * 注意：若不需要同时测试两个模型，可停用其中一个API调用\n  * 测试工作流",
  "title_zh": "直接使用Claude和Gemini从PDF中提取并处理信息",
  "publish_date_zh": "最后更新于3个月前",
  "workflow_json_zh": "{\n  \"meta\": {\n    \"instanceId\": \"f4f5d195bb2162a0972f737368404b18be694648d365d6c6771d7b4909d28167\"\n  },\n  \"nodes\": [\n    {\n      \"id\": \"b6cd232e-e82e-457b-9f03-c010b3eba148\",\n      \"name\": \"When clicking 'Test workflow'\",\n      \"type\": \"n8n-nodes-base.manualTrigger\",\n      \"position\": [\n        -40,\n        0\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"2b734806-e3c0-4552-a491-54ca846ed3ac\",\n      \"name\": \"Extract from File\",\n      \"type\": \"n8n-nodes-base.extractFromFile\",\n      \"position\": [\n        620,\n        0\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"operation\": \"binaryToPropery\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"2c199499-cc4f-405c-8560-765500b7acba\",\n      \"name\": \"Google Drive\",\n      \"type\": \"n8n-nodes-base.googleDrive\",\n      \"position\": [\n        420,\n        0\n      ],\n      \"parameters\": {\n        \"fileId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"18Ac2xorxirIBm9FNFDDB5aVUSPBCCg1U\",\n          \"cachedResultUrl\": \"https://drive.google.com/file/d/18Ac2xorxirIBm9FNFDDB5aVUSPBCCg1U/view?usp=drivesdk\",\n          \"cachedResultName\": \"Invoice-798FE2FA-0004.pdf\"\n        },\n        \"options\": {},\n        \"operation\": \"download\"\n      },\n      \"credentials\": {\n        \"googleDriveOAuth2Api\": {\n          \"id\": \"AUEpxwlqBJghNMtb\",\n          \"name\": \"Google Drive account\"\n        }\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"e3031c0c-f059-4f30-9684-10014a277d55\",\n      \"name\": \"Call Gemini 2.0 Flash with PDF Capabilities\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        880,\n        220\n      ],\n      \"parameters\": {\n        \"url\": \"https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"jsonBody\": \"={\\n  \\\"contents\\\": [\\n    {\\n      \\\"parts\\\": [\\n        {\\n          \\\"inline_data\\\": {\\n            \\\"mime_type\\\": \\\"application/pdf\\\",\\n            \\\"data\\\": \\\"{{ $json.data }}\\\"\\n          }\\n        },\\n        {\\n          \\\"text\\\": \\\"{{ $('Define Prompt').item.json.prompt }}\\\"\\n        }\\n      ]\\n    }\\n  ]\\n}\",\n        \"sendBody\": true,\n        \"specifyBody\": \"json\",\n        \"authentication\": \"predefinedCredentialType\",\n        \"nodeCredentialType\": \"googlePalmApi\"\n      },\n      \"credentials\": {\n        \"anthropicApi\": {\n          \"id\": \"eOt6Ois0jSizRFMJ\",\n          \"name\": \"Anthropic Mira Account\"\n        },\n        \"googlePalmApi\": {\n          \"id\": \"IQrjvfoUd5LUft3b\",\n          \"name\": \"Google Gemini(PaLM) Api account\"\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"135df716-32a1-47e8-9ed8-30c830b803d6\",\n      \"name\": \"Call Claude 3.5 Sonnet with PDF Capabilities\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        880,\n        -140\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.anthropic.com/v1/messages\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"jsonBody\": \"={\\n  \\\"model\\\": \\\"claude-3-5-sonnet-20241022\\\",\\n    \\\"max_tokens\\\": 1024,\\n    \\\"messages\\\": [{\\n        \\\"role\\\": \\\"user\\\",\\n        \\\"content\\\": [{\\n            \\\"type\\\": \\\"document\\\",\\n            \\\"source\\\": {\\n                \\\"type\\\": \\\"base64\\\",\\n                \\\"media_type\\\": \\\"application/pdf\\\",\\n                \\\"data\\\": \\\"{{$json.data}}\\\"\\n            }\\n        },\\n        {\\n            \\\"type\\\": \\\"text\\\",\\n            \\\"text\\\": \\\"{{ $('Define Prompt').item.json.prompt }}\\\"\\n        }]\\n    }]\\n}\",\n        \"sendBody\": true,\n        \"sendHeaders\": true,\n        \"specifyBody\": \"json\",\n        \"authentication\": \"predefinedCredentialType\",\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"anthropic-version\",\n              \"value\": \"2023-06-01\"\n            },\n            {\n              \"name\": \"content-type\",\n              \"value\": \"application/json\"\n            }\n          ]\n        },\n        \"nodeCredentialType\": \"anthropicApi\"\n      },\n      \"credentials\": {\n        \"anthropicApi\": {\n          \"id\": \"eOt6Ois0jSizRFMJ\",\n          \"name\": \"Anthropic Mira Account\"\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"5b8994d1-4bfd-4776-84ac-b3141aca6378\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -700,\n        -280\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 601,\n        \"height\": 585,\n        \"content\": \"## 工作流：使用Claude 3.5 Sonnet或Gemini 2.0 Flash从PDF提取数据\\n\\n**概述**\\n- 本工作流帮助您对比Claude 3.5 Sonnet和Gemini 2.0 Flash在PDF数据提取中的表现\\n- 该流程通过**单一步骤**完成PDF数据提取与处理，**无需先调用OCR再调用大语言模型**\\n\\n**运作原理**\\n- 前两个步骤将下载PDF并转换为base64编码\\n- 该base64字符串会同时发送给Claude 3.5 Sonnet和Gemini 2.0 Flash进行信息提取\\n- 本工作流专为对比两种模型的返回结果、响应延迟和成本（可在专属仪表板查看）而设计\\n\\n**使用方法**\\n- 如未完成，请先设置Google Drive\\n- 在Google Drive中选择目标文档\\n- 修改\\\"定义提示语\\\"中的指令，以提取所需信息并按需转换格式\\n- 获取[Claude API密钥](https://console.anthropic.com/settings/keys)和/或[Gemini API密钥](https://aistudio.google.com/app/apikey)\\n- 注意：若不需要同时测试两种模型，可停用其中一个API调用\\n- 测试工作流\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"616241a9-6199-406b-88dc-0afc7d974250\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        820,\n        60\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 320,\n        \"height\": 360,\n        \"content\": \"你可以通过添加以下内容将结果输出为JSON格式：\\n```\\n\\\"generationConfig\\\": {\\n    \\\"responseMimeType\\\": \\\"application/json\\\"\\n```\\n或者甚至使用结构化输出。\\n[查看文档](https://ai.google.dev/gemini-api/docs/structured-output?lang=rest)\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"bbac8d3d-d68f-4aa2-a41a-b06f7de2317b\",\n      \"name\": \"Define Prompt\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        180,\n        0\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"dba23ef5-95df-496a-8e24-c7c1544533d2\",\n              \"name\": \"prompt\",\n              \"type\": \"string\",\n              \"value\": \"Extract the VAT numbers for each country\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"3c2e7265-76e5-4911-a950-7e6b0c89ec5a\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        820,\n        -200\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 320,\n        \"height\": 240,\n        \"content\": \"你可以通过[预填响应格式](https://docs.anthropic.com/en/docs/test-and-evaluate/strengthen-guardrails/increase-consistency#prefill-claudes-response)强制Claude输出JSON格式\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"f2b46305-5200-486e-ad4d-ecc0d2a14314\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        380,\n        -120\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 380,\n        \"height\": 280,\n        \"content\": \"这两个步骤首先下载PDF文件，然后将其转换为base64格式。  \\n这是两个API处理文件时都需要的操作。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"e5dff70f-b55a-4c23-9025-765a7cf19c4a\",\n      \"name\": \"Sticky Note4\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        120,\n        -120\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 220,\n        \"height\": 280,\n        \"content\": \"该提示词在Gemini和Claude的调用中均被使用，用于定义应提取和处理的信息内容。\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"Google Drive\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Extract from File\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Define Prompt\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Google Drive\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Extract from File\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Call Claude 3.5 Sonnet with PDF Capabilities\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Call Gemini 2.0 Flash with PDF Capabilities\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When clicking 'Test workflow'\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Define Prompt\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}