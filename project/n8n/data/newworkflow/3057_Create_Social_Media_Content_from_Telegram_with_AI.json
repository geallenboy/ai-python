{
  "url": "https://n8n.io/workflows/3057-create-social-media-content-from-telegram-with-ai/",
  "title": "Create Social Media Content from Telegram with AI",
  "author": "Onur",
  "publish_date": "Last update 3 months ago",
  "publish_date_absolute": "2025-02-26",
  "categories": [
    {
      "name": "Other"
    },
    {
      "name": "AI"
    }
  ],
  "workflow_json": "{\"meta\":{\"instanceId\":\"b41148c809c7896d124743d940fc0964703e540af66564ef95e25a4ceea61c77\",\"templateCredsSetupCompleted\":true},\"nodes\":[{\"id\":\"070fd7b4-58ca-4372-a347-6f60f590e20b\",\"name\":\"Receive Telegram Messages\",\"type\":\"n8n-nodes-base.telegramTrigger\",\"position\":[40,140],\"webhookId\":\"4e2cd560-ae4e-4ed7-a8ea-984518404e51\",\"parameters\":{\"updates\":[\"message\"],\"additionalFields\":{}},\"credentials\":{\"telegramApi\":{\"id\":\"lff3pLERRdQmkmeV\",\"name\":\"Telegram account\"}},\"typeVersion\":1.1},{\"id\":\"0e0f3a32-fbde-42a9-aa7f-70fda7b05357\",\"name\":\"Voice or Text?\",\"type\":\"n8n-nodes-base.switch\",\"position\":[400,220],\"parameters\":{\"rules\":{\"values\":[{\"outputKey\":\"Audio\",\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"af30c479-4542-405f-b315-37c50c4e2bef\",\"operator\":{\"type\":\"string\",\"operation\":\"exists\",\"singleValue\":true},\"leftValue\":\"={{ $json.message.voice.file_id }}\",\"rightValue\":\"\"}]},\"renameOutput\":true},{\"outputKey\":\"Text\",\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"a3ca8cd4-fbb2-40b5-829a-24724f2fbc85\",\"operator\":{\"type\":\"string\",\"operation\":\"exists\",\"singleValue\":true},\"leftValue\":\"={{ $json.message.text || \\\"\\\" }}\",\"rightValue\":\"\"}]},\"renameOutput\":true},{\"outputKey\":\"Error\",\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"9bcfdee0-2f09-4037-a7b9-689ef392371d\",\"operator\":{\"type\":\"string\",\"operation\":\"exists\",\"singleValue\":true},\"leftValue\":\"error\",\"rightValue\":\"\"}]},\"renameOutput\":true}]},\"options\":{}},\"typeVersion\":3.2},{\"id\":\"b01dde88-bede-4500-974f-b2dc203ff841\",\"name\":\"Fetch Voice Message\",\"type\":\"n8n-nodes-base.telegram\",\"position\":[760,120],\"webhookId\":\"23645237-4943-4c32-b18c-97c410cc3409\",\"parameters\":{\"fileId\":\"={{ $json.message.voice.file_id }}\",\"resource\":\"file\"},\"credentials\":{\"telegramApi\":{\"id\":\"lff3pLERRdQmkmeV\",\"name\":\"Telegram account\"}},\"typeVersion\":1.2},{\"id\":\"fe91414e-3b10-482e-b8dd-d55266828dd7\",\"name\":\"Transcribe Voice to Text\",\"type\":\"@n8n/n8n-nodes-langchain.openAi\",\"position\":[980,120],\"parameters\":{\"options\":{},\"resource\":\"audio\",\"operation\":\"translate\"},\"credentials\":{\"openAiApi\":{\"id\":\"uFPD9I4pWJ4xUVf7\",\"name\":\"OpenAi account\"}},\"typeVersion\":1.8},{\"id\":\"74549458-fd4d-4824-a561-944f2f536b9b\",\"name\":\"Prepare for LLM\",\"type\":\"n8n-nodes-base.set\",\"position\":[880,340],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"b324a329-3c49-4f7f-b683-74331b7fe7f8\",\"name\":\"=text\",\"type\":\"string\",\"value\":\"={{$json.message.text}}\"}]}},\"typeVersion\":3.4},{\"id\":\"886246ad-7127-462a-a2b2-b4281f369d8b\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-40,0],\"parameters\":{\"width\":260,\"height\":320,\"content\":\" \\n**This workflow listens for incoming voice or text messages from Telegram users.** \"},\"typeVersion\":1},{\"id\":\"d052bd49-dc23-4ec5-b153-a9eb305f0641\",\"name\":\"Sticky Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[700,20],\"parameters\":{\"width\":460,\"height\":260,\"content\":\" **Voice messages are fetched from Telegram and transcribed into text using OpenAI's Whisper API.**  \"},\"typeVersion\":1},{\"id\":\"156580f1-adf5-43ba-b54d-89b84ca87818\",\"name\":\"AI Agent\",\"type\":\"@n8n/n8n-nodes-langchain.agent\",\"position\":[1460,320],\"parameters\":{\"text\":\"={{$json.text}}\",\"options\":{\"systemMessage\":\" \\n**1. AI Agent Goal Prompt (Overall Task)**\\n\\n*   **Purpose:** To define the agent's overall objective, removing the image creation step.\\n\\n```\\nYou are an AI social media content creator. Your task is to research a given topic using SerpAPI, create engaging and SEO-optimized social media content (800-1000 characters), and generate a detailed image prompt. The content must be factually accurate and engaging. Prioritize factual accuracy and engaging storytelling in your content. The generated image prompt should be detailed and specific enough to be used with an image generation tool like DALL-E or Stable Diffusion.\\n```\\n\\n**2. SerpAPI Tool Prompt (Research Phase)**\\n\\n*   **Purpose:** To instruct the agent on how to use SerpAPI to effectively gather information. (No change from previous version)\\n\\n```\\nUse the SerpAPI tool to research the following topic: [TOPIC]. Focus on identifying key facts, trends, and interesting angles relevant for social media. Extract information from the top search results. Return a summary of the information you found focusing on key data and facts.\\n```\\n\\n*   **Explanation:**\\n    *   `[TOPIC]` is a variable that will be replaced with the specific topic.\\n    *   Focuses the agent on extracting key facts and trends rather than just providing a list of results.\\n    *   Limits the scope to the top search results to maintain efficiency.\\n\\n**3. Social Media Content Creation Prompt**\\n\\n*   **Purpose:** To guide the agent in creating engaging and SEO-friendly content based on the research. (No change from previous version)\\n\\n```\\nBased on the following research summary: [RESEARCH_SUMMARY], create a social media post that is:\\n\\n*   Engaging and attention-grabbing\\n*   Factually accurate\\n*   Optimized for SEO (include relevant keywords naturally)\\n*   Within 800-1000 characters\\n*   Clearly and concisely written.\\n*   Avoid jargon and technical terms.\\n*    Include a call to action.\\n\\nThe tone should be informative but also enthusiastic and easily understandable.\\n```\\n\\n*   **Explanation:**\\n    *   `[RESEARCH_SUMMARY]` will be replaced with the output from the SerpAPI tool.\\n    *   Specific instructions on tone, length, and SEO optimization.\\n    *   Explicitly asks for clear and concise writing, avoiding jargon.\\n    *   Added \\\"Include a call to action\\\" to make the content more actionable\\n\\n**4. Image Generation Prompt (for hypothetical image generation tool)**\\n\\n*   **Purpose:** To create a prompt that generates a detailed and descriptive image prompt for an image generation tool.  This prompt should now be the *final output* related to the image.\\n\\n```\\nBased on the following topic: [TOPIC] and social media content: [SOCIAL_MEDIA_CONTENT], generate a detailed image prompt for a photorealistic image that visually represents the topic and complements the content. The image should be:\\n\\n*   Photorealistic and high-quality.\\n*   Visually appealing and attention-grabbing.\\n*   Relevant to the topic and content.\\n*   Appropriate for social media.\\n\\nThe prompt should be exceptionally detailed and specific, providing precise instructions for an image generation tool like DALL-E or Stable Diffusion. Include details about the subject, setting, style, lighting, camera angles, and any other relevant visual elements.  Aim for a prompt that leaves no room for misinterpretation by the image generation AI.  Mention specific artists or photographic styles to emulate if appropriate.\\n```\\n\\n*   **Explanation:**\\n    *   `[TOPIC]` and `[SOCIAL_MEDIA_CONTENT]` are variables that will be replaced with the topic and the created social media content, respectively.\\n    *   Focuses on *photorealism*, relevance, and visual appeal.\\n    *   Emphasizes the need for an *exceptionally detailed and specific* prompt for the image generation tool.\\n    *  Explicitly mentions DALL-E and Stable Diffusion as target tools.\\n    *   Advises the inclusion of artist styles or photographic techniques to guide the image generation.\\n\\n**5. JSON Output Instruction**\\n\\n*   **Purpose:** To ensure the AI agent provides the output in the correct format.  The `image_url` field is replaced with `image_prompt`.\\n\\n```\\nAfter generating the social media content and the image prompt, output the results in the following JSON format:\\n\\n```json\\n{\\n\\\"content\\\": \\\"[SOCIAL_MEDIA_CONTENT]\\\",\\n\\\"image_prompt\\\": \\\"[IMAGE_PROMPT]\\\"\\n}\\n```\\n\\n`[SOCIAL_MEDIA_CONTENT]` is the social media content you created.\\n`[IMAGE_PROMPT]` is the detailed image prompt you generated.\\n```\\n\\n**Example Usage:**\\n\\nLet's say the topic is still \\\"The Benefits of Regular Exercise.\\\"\\n\\n1.  **SerpAPI Tool:** The agent uses SerpAPI to find information about the benefits of exercise.\\n2.  **Social Media Content:** The agent generates content like: \\\"Boost your mood & health! 💪 Regular exercise reduces stress, improves sleep, and lowers disease risk. Get moving today! #exercise #healthylifestyle #fitness\\\"\\n3.  **Image Prompt:** The agent generates an image prompt like: \\\"A photorealistic image of a diverse group of people happily participating in various forms of exercise in a vibrant outdoor setting. Some are jogging in a park with lush green trees, others are doing yoga poses on a grassy field, and a few are cycling on a paved path. The lighting is warm and golden, as if it's early morning or late afternoon. The style should be reminiscent of a National Geographic photograph, emphasizing the natural beauty of the scene and the healthy glow of the people. Use a shallow depth of field to blur the background slightly, drawing focus to the subjects. Camera angle: slightly low, capturing the energy and movement of the scene. Consider influences from the photographic style of Steve McCurry.\\\"\\n4.  **JSON Output:**\\n\\n```json\\n{\\n\\\"content\\\": \\\"Boost your mood & health! 💪 Regular exercise reduces stress, improves sleep, and lowers disease risk. Get moving today! #exercise #healthylifestyle #fitness\\\",\\n\\\"image_prompt\\\": \\\"A photorealistic image of a diverse group of people happily participating in various forms of exercise in a vibrant outdoor setting. Some are jogging in a park with lush green trees, others are doing yoga poses on a grassy field, and a few are cycling on a paved path. The lighting is warm and golden, as if it's early morning or late afternoon. The style should be reminiscent of a National Geographic photograph, emphasizing the natural beauty of the scene and the healthy glow of the people. Use a shallow depth of field to blur the background slightly, drawing focus to the subjects. Camera angle: slightly low, capturing the energy and movement of the scene. Consider influences from the photographic style of Steve McCurry.\\\"\\n}\\n```\\n\\n**Key Improvements and Techniques Used (Beyond the Previous Version):**\\n\\n*   **Focus on Photorealism:**  The image prompt now explicitly aims for photorealistic results.\\n*   **Detailed Image Prompting:** The prompt emphasizes extreme detail and specificity in the image prompt.\\n*   **Tool Agnostic:** The prompt mentions DALL-E and Stable Diffusion as example tools, but is designed to be usable with other image generation AIs.\\n*   **Artist Style Guidance:** The prompt encourages the inclusion of artist or photographic style references.\\n\\n \\n\"},\"promptType\":\"define\",\"hasOutputParser\":true},\"typeVersion\":1.7},{\"id\":\"74f99543-d7e6-4d9b-8af1-9d86e0566ddc\",\"name\":\"OpenAI Chat Model\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\"position\":[1460,560],\"parameters\":{\"model\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"gpt-4o-mini\"},\"options\":{}},\"credentials\":{\"openAiApi\":{\"id\":\"uFPD9I4pWJ4xUVf7\",\"name\":\"OpenAi account\"}},\"typeVersion\":1.2},{\"id\":\"62b9bb5f-0c87-4df4-ac1c-70b96a0a5cc4\",\"name\":\"SerpAPI\",\"type\":\"@n8n/n8n-nodes-langchain.toolSerpApi\",\"position\":[1580,560],\"parameters\":{\"options\":{}},\"credentials\":{\"serpApi\":{\"id\":\"AuYW6wcagKBXR214\",\"name\":\"SerpAPI account\"}},\"typeVersion\":1},{\"id\":\"3782a100-3210-4c87-9e6a-5808cd488601\",\"name\":\"Structured Output Parser\",\"type\":\"@n8n/n8n-nodes-langchain.outputParserStructured\",\"position\":[1700,560],\"parameters\":{\"jsonSchemaExample\":\"{\\n\\\"content\\\": \\\"[SOCIAL_MEDIA_CONTENT]\\\",\\n\\\"image_prompt\\\": \\\"[IMAGE_PROMPT]\\\"\\n}\"},\"typeVersion\":1.2},{\"id\":\"87bf4b00-4f75-4098-993b-b4bd168339c2\",\"name\":\"Extract from File\",\"type\":\"n8n-nodes-base.extractFromFile\",\"position\":[2380,320],\"parameters\":{\"options\":{},\"operation\":\"binaryToPropery\"},\"typeVersion\":1},{\"id\":\"9a273f0b-bcb0-4ed8-93f5-6161d192e3ef\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1460,160],\"parameters\":{\"width\":280,\"height\":140,\"content\":\" **The AI agent uses the OpenAI Chat Model and SerpAPI tool to conduct research and generate social media content and an image prompt based on the user request.**\"},\"typeVersion\":1},{\"id\":\"c907aa15-1ccf-475e-94da-3a81e54b3746\",\"name\":\"Prepare Final Output\",\"type\":\"n8n-nodes-base.set\",\"position\":[2740,320],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"df5eb034-ef40-44a3-a620-48981efd1a69\",\"name\":\"content\",\"type\":\"string\",\"value\":\"={{ $('AI Agent').item.json.output.content }}\"},{\"id\":\"9ed8afc9-a957-4aea-8554-8c67017ef0e6\",\"name\":\"image\",\"type\":\"string\",\"value\":\"={{ $json.data }}\"}]}},\"typeVersion\":3.4},{\"id\":\"0893eac1-e72b-4a95-8c3c-4803aaaed9b9\",\"name\":\"Generate Image\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[2020,320],\"parameters\":{\"url\":\"https://router.huggingface.co/hf-inference/models/stabilityai/stable-diffusion-3.5-large\",\"method\":\"POST\",\"options\":{},\"sendBody\":true,\"authentication\":\"predefinedCredentialType\",\"bodyParameters\":{\"parameters\":[{\"name\":\"inputs\",\"value\":\"={{ $json.output.image_prompt }}\"}]},\"nodeCredentialType\":\"huggingFaceApi\"},\"credentials\":{\"httpHeaderAuth\":{\"id\":\"ERi7DgDYlifAQg7i\",\"name\":\"Header Auth account\"},\"huggingFaceApi\":{\"id\":\"2koOz09ZdzCYUNif\",\"name\":\"HuggingFaceApi account\"}},\"typeVersion\":4.2},{\"id\":\"b99a090f-73de-4703-b569-8992df36132f\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1960,240],\"parameters\":{\"width\":220,\"height\":240,\"content\":\" **An image is generated using the image prompt**  \"},\"typeVersion\":1}],\"pinData\":{},\"connections\":{\"SerpAPI\":{\"ai_tool\":[[{\"node\":\"AI Agent\",\"type\":\"ai_tool\",\"index\":0}]]},\"AI Agent\":{\"main\":[[{\"node\":\"Generate Image\",\"type\":\"main\",\"index\":0}]]},\"Generate Image\":{\"main\":[[{\"node\":\"Extract from File\",\"type\":\"main\",\"index\":0}]]},\"Voice or Text?\":{\"main\":[[{\"node\":\"Fetch Voice Message\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Prepare for LLM\",\"type\":\"main\",\"index\":0}]]},\"Prepare for LLM\":{\"main\":[[{\"node\":\"AI Agent\",\"type\":\"main\",\"index\":0}]]},\"Extract from File\":{\"main\":[[{\"node\":\"Prepare Final Output\",\"type\":\"main\",\"index\":0}]]},\"OpenAI Chat Model\":{\"ai_languageModel\":[[{\"node\":\"AI Agent\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"Fetch Voice Message\":{\"main\":[[{\"node\":\"Transcribe Voice to Text\",\"type\":\"main\",\"index\":0}]]},\"Prepare Final Output\":{\"main\":[[]]},\"Structured Output Parser\":{\"ai_outputParser\":[[{\"node\":\"AI Agent\",\"type\":\"ai_outputParser\",\"index\":0}]]},\"Transcribe Voice to Text\":{\"main\":[[{\"node\":\"AI Agent\",\"type\":\"main\",\"index\":0}]]},\"Receive Telegram Messages\":{\"main\":[[{\"node\":\"Voice or Text?\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "**Description:**\n\n## Create Social Media Content from Telegram with AI\n\nThis n8n workflow empowers you to effortlessly generate social media content and captivating image prompts, all powered by AI. Simply send a topic request through Telegram (as a voice or text message), and watch as the workflow conducts research, crafts engaging social media posts, and creates detailed image prompts ready for use with your preferred AI art generation tool.\n\n### What does this workflow do?\n\nThis workflow streamlines the content creation process by automating research, social media content generation, and image prompt creation, triggered by a simple Telegram message.\n\n### Who is this for?\n\n  * **Social Media Managers:** Quickly generate engaging content and image ideas for various platforms.\n  * **Content Creators:** Overcome writer's block and discover fresh content ideas with AI assistance.\n  * **Marketing Teams:** Boost productivity by automating social media content research and drafting.\n  * **Anyone** looking to leverage AI for efficient and creative social media content creation.\n\n\n\n### Benefits\n\n  * **Effortless Content and Image Prompt Generation:** Automate the creation of social media posts and detailed image prompts.\n  * **AI-Powered Creativity:** Leverage the power of LLMs to generate original content ideas and captivating image prompts.\n  * **Increased Efficiency:** Save time and resources by automating the research and content creation process.\n  * **Voice-to-Content:** Use voice messages to request content, making content creation even more accessible.\n  * **Enhanced Engagement:** Create high-quality, attention-grabbing content that resonates with your audience.\n\n\n\n### How it Works\n\n  1. **Receive Request:** The workflow listens for incoming voice or text messages on Telegram containing your content request.\n  2. **Process Voice (if necessary):** If the message is a voice message, it's transcribed into text using OpenAI's Whisper API.\n  3. **AI Takes Over:** The AI agent, powered by an OpenAI Chat Model and SerpAPI, conducts online research based on your request.\n  4. **Content and Image Prompt Generation:** The AI agent generates engaging social media content and a detailed image prompt based on the research.\n  5. **Image Generation (Optional):** You can use the generated image prompt with your preferred AI art generation tool (e.g., DALL-E, Stable Diffusion) to create a visual.\n  6. **Output:** The workflow provides you with the social media content and the detailed image prompt, ready for you to use or refine.\n\n\n\n### n8n Nodes Used\n\n  * Telegram Trigger\n  * Switch\n  * Telegram (for fetching voice messages)\n  * OpenAI (Whisper API for voice-to-text)\n  * Set (for preparing variables)\n  * AI Agent (with OpenAI Chat Model and SerpAPI tool)\n  * HTTP Request (for optional image generation)\n  * Extract from File (for optional image processing)\n  * Set (for final output)\n\n\n\n### Prerequisites\n\n  * Active n8n instance\n  * Telegram account with a bot\n  * OpenAI API key\n  * SerpAPI account\n  * Hugging Face API key (if you want to generate images within the workflow)\n\n\n\n### Setup\n\n  1. Import the workflow JSON into your n8n instance.\n  2. Configure the Telegram Trigger node with your Telegram bot token.\n  3. Set up the OpenAI and SerpAPI credentials in the respective nodes.\n  4. If you want to generate images directly within the workflow, configure the HTTP Request node with your Hugging Face API key.\n  5. Test the workflow by sending a voice or text message to your Telegram bot with a topic request.\n\n\n\nThis workflow combines the convenience of Telegram with the power of AI to provide a seamless content creation experience. Start generating engaging social media content today!\n",
  "crawled_at": "2025-05-26T03:37:00.484035",
  "readme_zh": "**描述：**\n\n## 用AI从Telegram生成社交媒体内容\n\n这个n8n工作流让你能轻松借助AI生成社交媒体内容和吸引人的图片提示。只需通过Telegram发送一个主题请求（语音或文字消息），工作流就会自动进行研究、创作引人入胜的社交媒体帖子，并生成详细的图片提示，可直接用于你喜欢的AI艺术生成工具。\n\n### 这个工作流有什么功能？\n\n通过简单的Telegram消息触发，该工作流自动化完成研究、社交媒体内容生成和图片提示创作，从而简化内容创作流程。\n\n### 适合谁使用？\n\n  * **社交媒体经理**：快速为不同平台生成吸引人的内容和图片创意。\n  * **内容创作者**：借助AI克服创作瓶颈，发现新的内容灵感。\n  * **营销团队**：通过自动化社交媒体内容研究和草拟提升效率。\n  * **任何希望**利用AI高效且创意地生成社交媒体内容的人。\n\n### 优势\n\n  * **轻松生成内容与图片提示**：自动化创建社交媒体帖子和详细的图片提示。\n  * **AI驱动的创意**：利用大语言模型（LLM）生成原创内容创意和引人入胜的图片提示。\n  * **提升效率**：通过自动化研究和内容创作流程节省时间和资源。\n  * **语音转内容**：使用语音消息请求内容，让内容创作更加便捷。\n  * **增强互动**：创作高质量、吸引眼球的内容，与受众产生共鸣。\n\n### 工作原理\n\n  1. **接收请求**：工作流监听Telegram上包含内容请求的语音或文字消息。\n  2. **处理语音（如需要）**：如果是语音消息，使用OpenAI的Whisper API将其转录为文字。\n  3. **AI接管**：由OpenAI聊天模型和SerpAPI驱动的AI代理根据请求进行在线研究。\n  4. **内容与图片提示生成**：AI代理基于研究生成吸引人的社交媒体内容和详细的图片提示。\n  5. **图片生成（可选）**：可将生成的图片提示用于你喜欢的AI艺术生成工具（如DALL-E、Stable Diffusion）来创作视觉内容。\n  6. **输出**：工作流提供社交媒体内容和详细的图片提示，供你直接使用或进一步优化。\n\n### 使用的n8n节点\n\n  * Telegram触发器\n  * 条件分支（Switch）\n  * Telegram（用于获取语音消息）\n  * OpenAI（Whisper API用于语音转文字）\n  * 变量设置（Set）\n  * AI代理（使用OpenAI聊天模型和SerpAPI工具）\n  * HTTP请求（用于可选图片生成）\n  * 文件提取（用于可选图片处理）\n  * 变量设置（用于最终输出）\n\n### 前提条件\n\n  * 运行中的n8n实例\n  * 拥有机器人的Telegram账户\n  * OpenAI API密钥\n  * SerpAPI账户\n  * Hugging Face API密钥（如需在工作流中生成图片）\n\n### 设置步骤\n\n  1. 将工作流JSON导入你的n8n实例。\n  2. 在Telegram触发器节点中配置你的Telegram机器人令牌。\n  3. 在相应节点中设置OpenAI和SerpAPI的凭据。\n  4. 如需在工作流中直接生成图片，在HTTP请求节点中配置Hugging Face API密钥。\n  5. 向你的Telegram机器人发送语音或文字消息测试工作流。\n\n这个工作流结合了Telegram的便捷性和AI的强大功能，提供无缝的内容创作体验。立即开始生成吸引人的社交媒体内容吧！",
  "title_zh": "用AI从Telegram生成社交媒体内容",
  "publish_date_zh": "最后更新于2个月前",
  "workflow_json_zh": "{\n  \"meta\": {\n    \"instanceId\": \"b41148c809c7896d124743d940fc0964703e540af66564ef95e25a4ceea61c77\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"nodes\": [\n    {\n      \"id\": \"070fd7b4-58ca-4372-a347-6f60f590e20b\",\n      \"name\": \"Receive Telegram Messages\",\n      \"type\": \"n8n-nodes-base.telegramTrigger\",\n      \"position\": [\n        40,\n        140\n      ],\n      \"webhookId\": \"4e2cd560-ae4e-4ed7-a8ea-984518404e51\",\n      \"parameters\": {\n        \"updates\": [\n          \"message\"\n        ],\n        \"additionalFields\": {}\n      },\n      \"credentials\": {\n        \"telegramApi\": {\n          \"id\": \"lff3pLERRdQmkmeV\",\n          \"name\": \"Telegram account\"\n        }\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"0e0f3a32-fbde-42a9-aa7f-70fda7b05357\",\n      \"name\": \"Voice or Text?\",\n      \"type\": \"n8n-nodes-base.switch\",\n      \"position\": [\n        400,\n        220\n      ],\n      \"parameters\": {\n        \"rules\": {\n          \"values\": [\n            {\n              \"outputKey\": \"Audio\",\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 2,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"af30c479-4542-405f-b315-37c50c4e2bef\",\n                    \"operator\": {\n                      \"type\": \"string\",\n                      \"operation\": \"exists\",\n                      \"singleValue\": true\n                    },\n                    \"leftValue\": \"={{ $json.message.voice.file_id }}\",\n                    \"rightValue\": \"\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            },\n            {\n              \"outputKey\": \"Text\",\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 2,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"a3ca8cd4-fbb2-40b5-829a-24724f2fbc85\",\n                    \"operator\": {\n                      \"type\": \"string\",\n                      \"operation\": \"exists\",\n                      \"singleValue\": true\n                    },\n                    \"leftValue\": \"={{ $json.message.text || \\\"\\\" }}\",\n                    \"rightValue\": \"\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            },\n            {\n              \"outputKey\": \"Error\",\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 2,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"9bcfdee0-2f09-4037-a7b9-689ef392371d\",\n                    \"operator\": {\n                      \"type\": \"string\",\n                      \"operation\": \"exists\",\n                      \"singleValue\": true\n                    },\n                    \"leftValue\": \"error\",\n                    \"rightValue\": \"\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            }\n          ]\n        },\n        \"options\": {}\n      },\n      \"typeVersion\": 3.2\n    },\n    {\n      \"id\": \"b01dde88-bede-4500-974f-b2dc203ff841\",\n      \"name\": \"Fetch Voice Message\",\n      \"type\": \"n8n-nodes-base.telegram\",\n      \"position\": [\n        760,\n        120\n      ],\n      \"webhookId\": \"23645237-4943-4c32-b18c-97c410cc3409\",\n      \"parameters\": {\n        \"fileId\": \"={{ $json.message.voice.file_id }}\",\n        \"resource\": \"file\"\n      },\n      \"credentials\": {\n        \"telegramApi\": {\n          \"id\": \"lff3pLERRdQmkmeV\",\n          \"name\": \"Telegram account\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"fe91414e-3b10-482e-b8dd-d55266828dd7\",\n      \"name\": \"Transcribe Voice to Text\",\n      \"type\": \"@n8n/n8n-nodes-langchain.openAi\",\n      \"position\": [\n        980,\n        120\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"resource\": \"audio\",\n        \"operation\": \"translate\"\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"uFPD9I4pWJ4xUVf7\",\n          \"name\": \"OpenAi account\"\n        }\n      },\n      \"typeVersion\": 1.8\n    },\n    {\n      \"id\": \"74549458-fd4d-4824-a561-944f2f536b9b\",\n      \"name\": \"Prepare for LLM\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        880,\n        340\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"b324a329-3c49-4f7f-b683-74331b7fe7f8\",\n              \"name\": \"=text\",\n              \"type\": \"string\",\n              \"value\": \"={{$json.message.text}}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"886246ad-7127-462a-a2b2-b4281f369d8b\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -40,\n        0\n      ],\n      \"parameters\": {\n        \"width\": 260,\n        \"height\": 320,\n        \"content\": \"**该工作流程监听来自Telegram用户的语音或文字消息。**\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"d052bd49-dc23-4ec5-b153-a9eb305f0641\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        700,\n        20\n      ],\n      \"parameters\": {\n        \"width\": 460,\n        \"height\": 260,\n        \"content\": \"**语音消息从Telegram获取，并通过OpenAI的Whisper API转录为文本。**\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"156580f1-adf5-43ba-b54d-89b84ca87818\",\n      \"name\": \"AI Agent\",\n      \"type\": \"@n8n/n8n-nodes-langchain.agent\",\n      \"position\": [\n        1460,\n        320\n      ],\n      \"parameters\": {\n        \"text\": \"={{$json.text}}\",\n        \"options\": {\n          \"systemMessage\": \" \\n**1. AI Agent Goal Prompt (Overall Task)**\\n\\n*   **Purpose:** To define the agent's overall objective, removing the image creation step.\\n\\n```\\nYou are an AI social media content creator. Your task is to research a given topic using SerpAPI, create engaging and SEO-optimized social media content (800-1000 characters), and generate a detailed image prompt. The content must be factually accurate and engaging. Prioritize factual accuracy and engaging storytelling in your content. The generated image prompt should be detailed and specific enough to be used with an image generation tool like DALL-E or Stable Diffusion.\\n```\\n\\n**2. SerpAPI Tool Prompt (Research Phase)**\\n\\n*   **Purpose:** To instruct the agent on how to use SerpAPI to effectively gather information. (No change from previous version)\\n\\n```\\nUse the SerpAPI tool to research the following topic: [TOPIC]. Focus on identifying key facts, trends, and interesting angles relevant for social media. Extract information from the top search results. Return a summary of the information you found focusing on key data and facts.\\n```\\n\\n*   **Explanation:**\\n    *   `[TOPIC]` is a variable that will be replaced with the specific topic.\\n    *   Focuses the agent on extracting key facts and trends rather than just providing a list of results.\\n    *   Limits the scope to the top search results to maintain efficiency.\\n\\n**3. Social Media Content Creation Prompt**\\n\\n*   **Purpose:** To guide the agent in creating engaging and SEO-friendly content based on the research. (No change from previous version)\\n\\n```\\nBased on the following research summary: [RESEARCH_SUMMARY], create a social media post that is:\\n\\n*   Engaging and attention-grabbing\\n*   Factually accurate\\n*   Optimized for SEO (include relevant keywords naturally)\\n*   Within 800-1000 characters\\n*   Clearly and concisely written.\\n*   Avoid jargon and technical terms.\\n*    Include a call to action.\\n\\nThe tone should be informative but also enthusiastic and easily understandable.\\n```\\n\\n*   **Explanation:**\\n    *   `[RESEARCH_SUMMARY]` will be replaced with the output from the SerpAPI tool.\\n    *   Specific instructions on tone, length, and SEO optimization.\\n    *   Explicitly asks for clear and concise writing, avoiding jargon.\\n    *   Added \\\"Include a call to action\\\" to make the content more actionable\\n\\n**4. Image Generation Prompt (for hypothetical image generation tool)**\\n\\n*   **Purpose:** To create a prompt that generates a detailed and descriptive image prompt for an image generation tool.  This prompt should now be the *final output* related to the image.\\n\\n```\\nBased on the following topic: [TOPIC] and social media content: [SOCIAL_MEDIA_CONTENT], generate a detailed image prompt for a photorealistic image that visually represents the topic and complements the content. The image should be:\\n\\n*   Photorealistic and high-quality.\\n*   Visually appealing and attention-grabbing.\\n*   Relevant to the topic and content.\\n*   Appropriate for social media.\\n\\nThe prompt should be exceptionally detailed and specific, providing precise instructions for an image generation tool like DALL-E or Stable Diffusion. Include details about the subject, setting, style, lighting, camera angles, and any other relevant visual elements.  Aim for a prompt that leaves no room for misinterpretation by the image generation AI.  Mention specific artists or photographic styles to emulate if appropriate.\\n```\\n\\n*   **Explanation:**\\n    *   `[TOPIC]` and `[SOCIAL_MEDIA_CONTENT]` are variables that will be replaced with the topic and the created social media content, respectively.\\n    *   Focuses on *photorealism*, relevance, and visual appeal.\\n    *   Emphasizes the need for an *exceptionally detailed and specific* prompt for the image generation tool.\\n    *  Explicitly mentions DALL-E and Stable Diffusion as target tools.\\n    *   Advises the inclusion of artist styles or photographic techniques to guide the image generation.\\n\\n**5. JSON Output Instruction**\\n\\n*   **Purpose:** To ensure the AI agent provides the output in the correct format.  The `image_url` field is replaced with `image_prompt`.\\n\\n```\\nAfter generating the social media content and the image prompt, output the results in the following JSON format:\\n\\n```json\\n{\\n\\\"content\\\": \\\"[SOCIAL_MEDIA_CONTENT]\\\",\\n\\\"image_prompt\\\": \\\"[IMAGE_PROMPT]\\\"\\n}\\n```\\n\\n`[SOCIAL_MEDIA_CONTENT]` is the social media content you created.\\n`[IMAGE_PROMPT]` is the detailed image prompt you generated.\\n```\\n\\n**Example Usage:**\\n\\nLet's say the topic is still \\\"The Benefits of Regular Exercise.\\\"\\n\\n1.  **SerpAPI Tool:** The agent uses SerpAPI to find information about the benefits of exercise.\\n2.  **Social Media Content:** The agent generates content like: \\\"Boost your mood & health! 💪 Regular exercise reduces stress, improves sleep, and lowers disease risk. Get moving today! #exercise #healthylifestyle #fitness\\\"\\n3.  **Image Prompt:** The agent generates an image prompt like: \\\"A photorealistic image of a diverse group of people happily participating in various forms of exercise in a vibrant outdoor setting. Some are jogging in a park with lush green trees, others are doing yoga poses on a grassy field, and a few are cycling on a paved path. The lighting is warm and golden, as if it's early morning or late afternoon. The style should be reminiscent of a National Geographic photograph, emphasizing the natural beauty of the scene and the healthy glow of the people. Use a shallow depth of field to blur the background slightly, drawing focus to the subjects. Camera angle: slightly low, capturing the energy and movement of the scene. Consider influences from the photographic style of Steve McCurry.\\\"\\n4.  **JSON Output:**\\n\\n```json\\n{\\n\\\"content\\\": \\\"Boost your mood & health! 💪 Regular exercise reduces stress, improves sleep, and lowers disease risk. Get moving today! #exercise #healthylifestyle #fitness\\\",\\n\\\"image_prompt\\\": \\\"A photorealistic image of a diverse group of people happily participating in various forms of exercise in a vibrant outdoor setting. Some are jogging in a park with lush green trees, others are doing yoga poses on a grassy field, and a few are cycling on a paved path. The lighting is warm and golden, as if it's early morning or late afternoon. The style should be reminiscent of a National Geographic photograph, emphasizing the natural beauty of the scene and the healthy glow of the people. Use a shallow depth of field to blur the background slightly, drawing focus to the subjects. Camera angle: slightly low, capturing the energy and movement of the scene. Consider influences from the photographic style of Steve McCurry.\\\"\\n}\\n```\\n\\n**Key Improvements and Techniques Used (Beyond the Previous Version):**\\n\\n*   **Focus on Photorealism:**  The image prompt now explicitly aims for photorealistic results.\\n*   **Detailed Image Prompting:** The prompt emphasizes extreme detail and specificity in the image prompt.\\n*   **Tool Agnostic:** The prompt mentions DALL-E and Stable Diffusion as example tools, but is designed to be usable with other image generation AIs.\\n*   **Artist Style Guidance:** The prompt encourages the inclusion of artist or photographic style references.\\n\\n \\n\"\n        },\n        \"promptType\": \"define\",\n        \"hasOutputParser\": true\n      },\n      \"typeVersion\": 1.7\n    },\n    {\n      \"id\": \"74f99543-d7e6-4d9b-8af1-9d86e0566ddc\",\n      \"name\": \"OpenAI Chat Model\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\n      \"position\": [\n        1460,\n        560\n      ],\n      \"parameters\": {\n        \"model\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gpt-4o-mini\"\n        },\n        \"options\": {}\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"uFPD9I4pWJ4xUVf7\",\n          \"name\": \"OpenAi account\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"62b9bb5f-0c87-4df4-ac1c-70b96a0a5cc4\",\n      \"name\": \"SerpAPI\",\n      \"type\": \"@n8n/n8n-nodes-langchain.toolSerpApi\",\n      \"position\": [\n        1580,\n        560\n      ],\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"credentials\": {\n        \"serpApi\": {\n          \"id\": \"AuYW6wcagKBXR214\",\n          \"name\": \"SerpAPI account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"3782a100-3210-4c87-9e6a-5808cd488601\",\n      \"name\": \"Structured Output Parser\",\n      \"type\": \"@n8n/n8n-nodes-langchain.outputParserStructured\",\n      \"position\": [\n        1700,\n        560\n      ],\n      \"parameters\": {\n        \"jsonSchemaExample\": \"{\\n\\\"content\\\": \\\"[SOCIAL_MEDIA_CONTENT]\\\",\\n\\\"image_prompt\\\": \\\"[IMAGE_PROMPT]\\\"\\n}\"\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"87bf4b00-4f75-4098-993b-b4bd168339c2\",\n      \"name\": \"Extract from File\",\n      \"type\": \"n8n-nodes-base.extractFromFile\",\n      \"position\": [\n        2380,\n        320\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"operation\": \"binaryToPropery\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"9a273f0b-bcb0-4ed8-93f5-6161d192e3ef\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1460,\n        160\n      ],\n      \"parameters\": {\n        \"width\": 280,\n        \"height\": 140,\n        \"content\": \"**该AI代理利用OpenAI聊天模型和SerpAPI工具进行研究，并根据用户请求生成社交媒体内容及图片提示。**\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"c907aa15-1ccf-475e-94da-3a81e54b3746\",\n      \"name\": \"Prepare Final Output\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        2740,\n        320\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"df5eb034-ef40-44a3-a620-48981efd1a69\",\n              \"name\": \"content\",\n              \"type\": \"string\",\n              \"value\": \"={{ $('AI Agent').item.json.output.content }}\"\n            },\n            {\n              \"id\": \"9ed8afc9-a957-4aea-8554-8c67017ef0e6\",\n              \"name\": \"image\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.data }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"0893eac1-e72b-4a95-8c3c-4803aaaed9b9\",\n      \"name\": \"Generate Image\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        2020,\n        320\n      ],\n      \"parameters\": {\n        \"url\": \"https://router.huggingface.co/hf-inference/models/stabilityai/stable-diffusion-3.5-large\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"sendBody\": true,\n        \"authentication\": \"predefinedCredentialType\",\n        \"bodyParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"inputs\",\n              \"value\": \"={{ $json.output.image_prompt }}\"\n            }\n          ]\n        },\n        \"nodeCredentialType\": \"huggingFaceApi\"\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": {\n          \"id\": \"ERi7DgDYlifAQg7i\",\n          \"name\": \"Header Auth account\"\n        },\n        \"huggingFaceApi\": {\n          \"id\": \"2koOz09ZdzCYUNif\",\n          \"name\": \"HuggingFaceApi account\"\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"b99a090f-73de-4703-b569-8992df36132f\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1960,\n        240\n      ],\n      \"parameters\": {\n        \"width\": 220,\n        \"height\": 240,\n        \"content\": \"**根据图像提示生成了一张图片**\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"SerpAPI\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"AI Agent\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Generate Image\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Generate Image\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Extract from File\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Voice or Text?\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Fetch Voice Message\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Prepare for LLM\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Prepare for LLM\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Extract from File\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Prepare Final Output\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"OpenAI Chat Model\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Fetch Voice Message\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Transcribe Voice to Text\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Prepare Final Output\": {\n      \"main\": [\n        []\n      ]\n    },\n    \"Structured Output Parser\": {\n      \"ai_outputParser\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"ai_outputParser\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Transcribe Voice to Text\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Receive Telegram Messages\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Voice or Text?\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}