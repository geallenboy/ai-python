{
  "url": "https://n8n.io/workflows/2597-update-all-zammad-roles-to-default-values/",
  "title": "Update all Zammad Roles to default values",
  "author": "Sirhexalot",
  "publish_date": "Last update 6 months ago",
  "publish_date_absolute": "2024-11-26",
  "categories": [
    {
      "name": "Support"
    }
  ],
  "workflow_json": "{\"id\":\"cDmsWx8ASzIxE3zw\",\"meta\":{\"instanceId\":\"494d0146a0f47676ad70a44a32086b466621f62da855e3eaf0ee51dee1f76753\",\"templateCredsSetupCompleted\":true},\"name\":\"Update all Zammad Roles to default values\",\"tags\":[],\"nodes\":[{\"id\":\"32904945-fd7b-413f-898c-62b04406dfb0\",\"name\":\"When clicking ‘Test workflow’\",\"type\":\"n8n-nodes-base.manualTrigger\",\"position\":[-920,160],\"parameters\":{},\"typeVersion\":1},{\"id\":\"cbb0abd2-e153-477a-9346-00eaa1628c78\",\"name\":\"Zammad Univeral User Object\",\"type\":\"n8n-nodes-base.set\",\"position\":[100,220],\"parameters\":{\"values\":{\"number\":[{\"name\":\"user_id\",\"value\":\"={{ $json.id }}\"},{\"name\":\"organization_id\",\"value\":\"={{ $json.organization_id }}\"}],\"string\":[{\"name\":\"email\",\"value\":\"={{ $json.email }}\"},{\"name\":\"firstname\",\"value\":\"={{ $json.firstname }}\"},{\"name\":\"lastname\",\"value\":\"={{ $json.lastname }}\"},{\"name\":\"role_ids\",\"value\":\"={{ $json.role_ids.join() }}\\n\"},{\"name\":\"groups\",\"value\":\"={{ $json.group_ids }}\"},{\"name\":\"active\",\"value\":\"={{ $json.active }}\"}]},\"options\":{},\"keepOnlySet\":true},\"typeVersion\":1},{\"id\":\"bbf82b69-07b5-4dff-afec-ee65eeedd037\",\"name\":\"Get all Users\",\"type\":\"n8n-nodes-base.zammad\",\"position\":[-220,220],\"parameters\":{\"filters\":{},\"operation\":\"getAll\",\"returnAll\":true},\"credentials\":{\"zammadTokenAuthApi\":{\"id\":\"fj5GuzcJuNLQeMxz\",\"name\":\"Zammad Token Auth account\"}},\"typeVersion\":1},{\"id\":\"0c122c6b-22a7-41f5-8ea1-c9a32cd12ed6\",\"name\":\"If\",\"type\":\"n8n-nodes-base.if\",\"position\":[400,220],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"0be03c44-5017-4db6-87cd-91838b953d09\",\"operator\":{\"type\":\"array\",\"operation\":\"notContains\",\"rightType\":\"any\"},\"leftValue\":\"={{ $('Basic Variables').item.json.exclude_zammad_users_by_id }}\",\"rightValue\":\"={{ $json.user_id }}\"},{\"id\":\"6a730e91-fa40-4e8a-b6cb-894f2cb367c5\",\"operator\":{\"type\":\"boolean\",\"operation\":\"true\",\"singleValue\":true},\"leftValue\":\"={{ $json.active }}\",\"rightValue\":\"\"},{\"id\":\"b3d13440-f3fc-4172-b16d-e191f050a2bf\",\"operator\":{\"name\":\"filter.operator.equals\",\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"\",\"rightValue\":\"\"}]}},\"typeVersion\":2.2},{\"id\":\"63f98607-1f56-4f83-93be-aa3b271da11b\",\"name\":\"Get all Roles\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[-220,-20],\"parameters\":{\"url\":\"={{ $json.zammad_base_url }}/api/v1/roles\",\"options\":{},\"sendHeaders\":true,\"headerParameters\":{\"parameters\":[{\"name\":\"Authorization\",\"value\":\"=Bearer {{ $json.zammad_api_key }}\"}]}},\"typeVersion\":4.2},{\"id\":\"961bf663-30be-45b4-87f0-d7ec94c3435b\",\"name\":\"Basic Variables\",\"type\":\"n8n-nodes-base.set\",\"position\":[-620,160],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"68b32087-5e23-4590-8042-0061234ce479\",\"name\":\"zammad_base_url\",\"type\":\"string\",\"value\":\"-put-your-zammad-base-url-\"},{\"id\":\"7db7572e-2524-4f2a-a1d6-b44330662c30\",\"name\":\"zammad_api_key\",\"type\":\"string\",\"value\":\"-put-your-api-key-\"},{\"id\":\"7cd0a1d2-8898-47c7-a1c6-195ff6162bb9\",\"name\":\"default_roles\",\"type\":\"array\",\"value\":\"={{ [-put-in-the-default-roles-ids-separated-by-comma-] }}\"},{\"id\":\"4628705c-4875-4d42-90d1-692b9b44fc24\",\"name\":\"exclude_zammad_users_by_id\",\"type\":\"array\",\"value\":\"={{ [-put-in-the-user-ids-separated-by-comma-] }}\"}]}},\"typeVersion\":3.4},{\"id\":\"a86577aa-1eb2-48e6-b941-bdfb37b58073\",\"name\":\"Zammad Univeral Role Object\",\"type\":\"n8n-nodes-base.set\",\"position\":[100,-20],\"parameters\":{\"values\":{\"number\":[{\"name\":\"role_id\",\"value\":\"={{ $json.id }}\"},{\"name\":\"name\",\"value\":\"={{ $json.name }}\"}]},\"options\":{},\"keepOnlySet\":true},\"typeVersion\":1},{\"id\":\"ecc387b3-092d-43c9-9187-784f07c4df77\",\"name\":\"Convert to Excel Roles\",\"type\":\"n8n-nodes-base.convertToFile\",\"position\":[760,-40],\"parameters\":{\"options\":{\"fileName\":\"Zammad_Roles.xlsx\"},\"operation\":\"xlsx\"},\"typeVersion\":1.1},{\"id\":\"e8055ae6-78d8-4736-adee-4b8c883b4000\",\"name\":\"Filter Roles if needed\",\"type\":\"n8n-nodes-base.if\",\"position\":[400,-20],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"0ca9d3a3-b726-4396-8cec-4a74c8e3949b\",\"operator\":{\"type\":\"object\",\"operation\":\"exists\",\"singleValue\":true},\"leftValue\":\"={{ $json }}\",\"rightValue\":1781}]}},\"typeVersion\":2.2},{\"id\":\"45b01919-ba58-4c7a-a97f-d169cb361855\",\"name\":\"Update Users to default Role(s)\",\"type\":\"n8n-nodes-base.httpRequest\",\"onError\":\"continueErrorOutput\",\"position\":[760,200],\"parameters\":{\"url\":\"={{ $('Basic Variables').item.json.zammad_base_url }}/api/v1/users/{{ $json.user_id }}\",\"method\":\"PUT\",\"options\":{},\"jsonBody\":\"={\\n  \\\"role_ids\\\": [\\n    {{ $('Basic Variables').item.json.default_roles }}\\n  ]\\n} \",\"sendBody\":true,\"sendHeaders\":true,\"specifyBody\":\"json\",\"headerParameters\":{\"parameters\":[{\"name\":\"Authorization\",\"value\":\"=Bearer {{ $('Basic Variables').item.json.zammad_api_key }}\"}]}},\"typeVersion\":4.2}],\"active\":false,\"pinData\":{},\"settings\":{\"executionOrder\":\"v1\"},\"versionId\":\"4fa55089-104d-477e-8a93-c8cb0caf7bed\",\"connections\":{\"If\":{\"main\":[[{\"node\":\"Update Users to default Role(s)\",\"type\":\"main\",\"index\":0}]]},\"Get all Roles\":{\"main\":[[{\"node\":\"Zammad Univeral Role Object\",\"type\":\"main\",\"index\":0}]]},\"Get all Users\":{\"main\":[[{\"node\":\"Zammad Univeral User Object\",\"type\":\"main\",\"index\":0}]]},\"Basic Variables\":{\"main\":[[{\"node\":\"Get all Roles\",\"type\":\"main\",\"index\":0},{\"node\":\"Get all Users\",\"type\":\"main\",\"index\":0}]]},\"Filter Roles if needed\":{\"main\":[[{\"node\":\"Convert to Excel Roles\",\"type\":\"main\",\"index\":0}]]},\"Zammad Univeral Role Object\":{\"main\":[[{\"node\":\"Filter Roles if needed\",\"type\":\"main\",\"index\":0}]]},\"Zammad Univeral User Object\":{\"main\":[[{\"node\":\"If\",\"type\":\"main\",\"index\":0}]]},\"Update Users to default Role(s)\":{\"main\":[[],[]]},\"When clicking ‘Test workflow’\":{\"main\":[[{\"node\":\"Basic Variables\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "This n8n workflow allows you to reset all user roles in Zammad to specified default roles. It ensures consistency in role management across your Zammad instance.\n\n## Features\n\n  * Retrieve all active users from Zammad.\n  * Update each user's roles to predefined default role IDs.\n  * Exclude specific users by their IDs from the update process.\n  * Simple configuration for default roles and excluded users.\n\n\n\n## Usage\n\n  1. **Import the Workflow** : Upload the provided `.json` file into your n8n instance.\n  2. **Configure Variables** : \n     * `zammad_base_url`: Your Zammad instance URL.\n     * `zammad_api_key`: Your Zammad API key.\n     * `default_roles`: List of default role IDs to apply to all users.\n     * `exclude_zammad_users_by_id`: List of user IDs to exclude from the update.\n  3. **Run the Workflow** : Execute the workflow to update roles automatically.\n\n\n\n## Issues and Suggestions\n\nFor issues or suggestions, visit the [GitHub Repository](https://github.com/Sirhexalot/n8n-Update-all-Zammad-Roles-to-default-values).\n",
  "crawled_at": "2025-05-26T00:26:28.982322",
  "readme_zh": "此n8n工作流可帮助您将Zammad中所有用户角色重置为指定的默认角色，确保整个Zammad实例的角色管理一致性。\n\n## 功能特点\n\n  * 从Zammad获取所有活跃用户\n  * 将每个用户的角色更新为预设的默认角色ID\n  * 通过用户ID排除特定用户不参与更新\n  * 支持简单配置默认角色和排除用户",
  "title_zh": "将所有Zammad角色更新为默认值",
  "publish_date_zh": "最后更新于5个月前",
  "workflow_json_zh": "{\n  \"id\": \"cDmsWx8ASzIxE3zw\",\n  \"meta\": {\n    \"instanceId\": \"494d0146a0f47676ad70a44a32086b466621f62da855e3eaf0ee51dee1f76753\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"name\": \"Update all Zammad Roles to default values\",\n  \"tags\": [],\n  \"nodes\": [\n    {\n      \"id\": \"32904945-fd7b-413f-898c-62b04406dfb0\",\n      \"name\": \"When clicking ‘Test workflow’\",\n      \"type\": \"n8n-nodes-base.manualTrigger\",\n      \"position\": [\n        -920,\n        160\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"cbb0abd2-e153-477a-9346-00eaa1628c78\",\n      \"name\": \"Zammad Univeral User Object\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        100,\n        220\n      ],\n      \"parameters\": {\n        \"values\": {\n          \"number\": [\n            {\n              \"name\": \"user_id\",\n              \"value\": \"={{ $json.id }}\"\n            },\n            {\n              \"name\": \"organization_id\",\n              \"value\": \"={{ $json.organization_id }}\"\n            }\n          ],\n          \"string\": [\n            {\n              \"name\": \"email\",\n              \"value\": \"={{ $json.email }}\"\n            },\n            {\n              \"name\": \"firstname\",\n              \"value\": \"={{ $json.firstname }}\"\n            },\n            {\n              \"name\": \"lastname\",\n              \"value\": \"={{ $json.lastname }}\"\n            },\n            {\n              \"name\": \"role_ids\",\n              \"value\": \"={{ $json.role_ids.join() }}\\n\"\n            },\n            {\n              \"name\": \"groups\",\n              \"value\": \"={{ $json.group_ids }}\"\n            },\n            {\n              \"name\": \"active\",\n              \"value\": \"={{ $json.active }}\"\n            }\n          ]\n        },\n        \"options\": {},\n        \"keepOnlySet\": true\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"bbf82b69-07b5-4dff-afec-ee65eeedd037\",\n      \"name\": \"Get all Users\",\n      \"type\": \"n8n-nodes-base.zammad\",\n      \"position\": [\n        -220,\n        220\n      ],\n      \"parameters\": {\n        \"filters\": {},\n        \"operation\": \"getAll\",\n        \"returnAll\": true\n      },\n      \"credentials\": {\n        \"zammadTokenAuthApi\": {\n          \"id\": \"fj5GuzcJuNLQeMxz\",\n          \"name\": \"Zammad Token Auth account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"0c122c6b-22a7-41f5-8ea1-c9a32cd12ed6\",\n      \"name\": \"If\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        400,\n        220\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"0be03c44-5017-4db6-87cd-91838b953d09\",\n              \"operator\": {\n                \"type\": \"array\",\n                \"operation\": \"notContains\",\n                \"rightType\": \"any\"\n              },\n              \"leftValue\": \"={{ $('Basic Variables').item.json.exclude_zammad_users_by_id }}\",\n              \"rightValue\": \"={{ $json.user_id }}\"\n            },\n            {\n              \"id\": \"6a730e91-fa40-4e8a-b6cb-894f2cb367c5\",\n              \"operator\": {\n                \"type\": \"boolean\",\n                \"operation\": \"true\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $json.active }}\",\n              \"rightValue\": \"\"\n            },\n            {\n              \"id\": \"b3d13440-f3fc-4172-b16d-e191f050a2bf\",\n              \"operator\": {\n                \"name\": \"filter.operator.equals\",\n                \"type\": \"string\",\n                \"operation\": \"equals\"\n              },\n              \"leftValue\": \"\",\n              \"rightValue\": \"\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"63f98607-1f56-4f83-93be-aa3b271da11b\",\n      \"name\": \"Get all Roles\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        -220,\n        -20\n      ],\n      \"parameters\": {\n        \"url\": \"={{ $json.zammad_base_url }}/api/v1/roles\",\n        \"options\": {},\n        \"sendHeaders\": true,\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"Authorization\",\n              \"value\": \"=Bearer {{ $json.zammad_api_key }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"961bf663-30be-45b4-87f0-d7ec94c3435b\",\n      \"name\": \"Basic Variables\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        -620,\n        160\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"68b32087-5e23-4590-8042-0061234ce479\",\n              \"name\": \"zammad_base_url\",\n              \"type\": \"string\",\n              \"value\": \"-put-your-zammad-base-url-\"\n            },\n            {\n              \"id\": \"7db7572e-2524-4f2a-a1d6-b44330662c30\",\n              \"name\": \"zammad_api_key\",\n              \"type\": \"string\",\n              \"value\": \"-put-your-api-key-\"\n            },\n            {\n              \"id\": \"7cd0a1d2-8898-47c7-a1c6-195ff6162bb9\",\n              \"name\": \"default_roles\",\n              \"type\": \"array\",\n              \"value\": \"={{ [-put-in-the-default-roles-ids-separated-by-comma-] }}\"\n            },\n            {\n              \"id\": \"4628705c-4875-4d42-90d1-692b9b44fc24\",\n              \"name\": \"exclude_zammad_users_by_id\",\n              \"type\": \"array\",\n              \"value\": \"={{ [-put-in-the-user-ids-separated-by-comma-] }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"a86577aa-1eb2-48e6-b941-bdfb37b58073\",\n      \"name\": \"Zammad Univeral Role Object\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        100,\n        -20\n      ],\n      \"parameters\": {\n        \"values\": {\n          \"number\": [\n            {\n              \"name\": \"role_id\",\n              \"value\": \"={{ $json.id }}\"\n            },\n            {\n              \"name\": \"name\",\n              \"value\": \"={{ $json.name }}\"\n            }\n          ]\n        },\n        \"options\": {},\n        \"keepOnlySet\": true\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"ecc387b3-092d-43c9-9187-784f07c4df77\",\n      \"name\": \"Convert to Excel Roles\",\n      \"type\": \"n8n-nodes-base.convertToFile\",\n      \"position\": [\n        760,\n        -40\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"fileName\": \"Zammad_Roles.xlsx\"\n        },\n        \"operation\": \"xlsx\"\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"e8055ae6-78d8-4736-adee-4b8c883b4000\",\n      \"name\": \"Filter Roles if needed\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        400,\n        -20\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"0ca9d3a3-b726-4396-8cec-4a74c8e3949b\",\n              \"operator\": {\n                \"type\": \"object\",\n                \"operation\": \"exists\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $json }}\",\n              \"rightValue\": 1781\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"45b01919-ba58-4c7a-a97f-d169cb361855\",\n      \"name\": \"Update Users to default Role(s)\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"onError\": \"continueErrorOutput\",\n      \"position\": [\n        760,\n        200\n      ],\n      \"parameters\": {\n        \"url\": \"={{ $('Basic Variables').item.json.zammad_base_url }}/api/v1/users/{{ $json.user_id }}\",\n        \"method\": \"PUT\",\n        \"options\": {},\n        \"jsonBody\": \"={\\n  \\\"role_ids\\\": [\\n    {{ $('Basic Variables').item.json.default_roles }}\\n  ]\\n} \",\n        \"sendBody\": true,\n        \"sendHeaders\": true,\n        \"specifyBody\": \"json\",\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"Authorization\",\n              \"value\": \"=Bearer {{ $('Basic Variables').item.json.zammad_api_key }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 4.2\n    }\n  ],\n  \"active\": false,\n  \"pinData\": {},\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"4fa55089-104d-477e-8a93-c8cb0caf7bed\",\n  \"connections\": {\n    \"If\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Update Users to default Role(s)\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get all Roles\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Zammad Univeral Role Object\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get all Users\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Zammad Univeral User Object\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Basic Variables\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get all Roles\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Get all Users\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Filter Roles if needed\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Convert to Excel Roles\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Zammad Univeral Role Object\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Filter Roles if needed\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Zammad Univeral User Object\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"If\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Update Users to default Role(s)\": {\n      \"main\": [\n        [],\n        []\n      ]\n    },\n    \"When clicking ‘Test workflow’\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Basic Variables\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}