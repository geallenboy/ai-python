{
  "url": "https://n8n.io/workflows/2947-national-weather-service-7-day-forecast-in-slack/",
  "title": "National Weather Service 7-Day Forecast in Slack",
  "author": "Alex Kim",
  "publish_date": "Last update 3 months ago",
  "publish_date_absolute": "2025-02-26",
  "categories": [
    {
      "name": "Other"
    }
  ],
  "workflow_json": "{\"id\":\"B6UHILmjPWa7ViQ4\",\"meta\":{\"instanceId\":\"ecc960f484e18b0e09045fd93acf0d47f4cfff25cc212ea348a08ac3aae81850\",\"templateCredsSetupCompleted\":true},\"name\":\"Weather via Slack\",\"tags\":[{\"id\":\"2KlkHxhULPP42BS6\",\"name\":\"App 72\",\"createdAt\":\"2025-02-19T21:15:27.390Z\",\"updatedAt\":\"2025-02-19T21:15:27.390Z\"},{\"id\":\"aw8suPYTKfXDtMZl\",\"name\":\"Utility\",\"createdAt\":\"2025-02-10T14:41:49.045Z\",\"updatedAt\":\"2025-02-10T14:41:49.045Z\"}],\"nodes\":[{\"id\":\"9aea370b-7eb9-4742-9663-6628513e4de3\",\"name\":\"Webhook\",\"type\":\"n8n-nodes-base.webhook\",\"position\":[-340,-300],\"webhookId\":\"41a60a4f-66d0-433b-aa43-b225dffa6761\",\"parameters\":{\"path\":\"slack1\",\"options\":{},\"httpMethod\":\"POST\"},\"typeVersion\":2},{\"id\":\"c982487f-076a-48e8-9a35-78e8fbfb8936\",\"name\":\"Slack\",\"type\":\"n8n-nodes-base.slack\",\"position\":[560,-300],\"webhookId\":\"4840f197-e116-4ef5-9372-0abd063e4aad\",\"parameters\":{\"text\":\"={{\\n  JSON.parse($node[\\\"NWS1\\\"].json.data).properties.periods\\n  .map(period => \\n    `*${period.name}*\\\\n` +\\n    `Temp: ${period.temperature}°${period.temperatureUnit}\\\\n` +\\n    `Wind: ${period.windSpeed} ${period.windDirection}\\\\n` +\\n    `Forecast: ${period.shortForecast}`\\n  )\\n  .join(\\\"\\\\n\\\\n\\\")\\n}}\\n\",\"select\":\"channel\",\"channelId\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"C0889718P8S\",\"cachedResultName\":\"n8n\"},\"otherOptions\":{},\"authentication\":\"oAuth2\"},\"credentials\":{\"slackOAuth2Api\":{\"id\":\"GSiEiuKBz8GR5qiD\",\"name\":\"AlexK Slack account\"}},\"typeVersion\":2.3},{\"id\":\"7d42112a-0590-4a09-ba0e-dbdf1eddccf2\",\"name\":\"OpenStreetMap\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[-100,-300],\"parameters\":{\"url\":\"https://nominatim.openstreetmap.org/search\",\"options\":{\"response\":{\"response\":{\"fullResponse\":true}}},\"sendQuery\":true,\"sendHeaders\":true,\"queryParameters\":{\"parameters\":[{\"name\":\"q\",\"value\":\"={{ $('Webhook').item.json.body.text }}\"},{\"name\":\"format\",\"value\":\"json\"}]},\"headerParameters\":{\"parameters\":[{\"name\":\"User-Agent\",\"value\":\"alexk1919 (alex@alexk1919.com)\"}]}},\"typeVersion\":4.2},{\"id\":\"565a0123-9059-4e6e-be97-96e0875c1b84\",\"name\":\"NWS\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[120,-300],\"parameters\":{\"url\":\"=https://api.weather.gov/points/{{ $json.body[0].lat }},{{ $json.body[0].lon }}\",\"options\":{\"response\":{\"response\":{\"fullResponse\":true}}},\"sendHeaders\":true,\"headerParameters\":{\"parameters\":[{\"name\":\"User-Agent\",\"value\":\"alexk1919 (alex@alexk1919.com)\"}]}},\"typeVersion\":4.2},{\"id\":\"3505e6c2-6e66-4abd-a1bb-75a1d8fc9a08\",\"name\":\"NWS1\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[340,-300],\"parameters\":{\"url\":\"=https://api.weather.gov/gridpoints/{{$json[\\\"data\\\"] ? JSON.parse($json[\\\"data\\\"]).properties.gridId : \\\"\\\"}}\\n/{{$json[\\\"data\\\"] ? JSON.parse($json[\\\"data\\\"]).properties.gridX : \\\"\\\"}}\\n,{{$json[\\\"data\\\"] ? JSON.parse($json[\\\"data\\\"]).properties.gridY : \\\"\\\"}}\\n/forecast\",\"options\":{\"response\":{\"response\":{\"fullResponse\":true}}},\"sendHeaders\":true,\"headerParameters\":{\"parameters\":[{\"name\":\"User-Agent\",\"value\":\"alexk1919 (alex@alexk1919.com)\"}]}},\"typeVersion\":4.2}],\"active\":true,\"pinData\":{},\"settings\":{\"executionOrder\":\"v1\"},\"versionId\":\"4244c90f-02e9-42fc-9873-3f8074f6ecf4\",\"connections\":{\"NWS\":{\"main\":[[{\"node\":\"NWS1\",\"type\":\"main\",\"index\":0}]]},\"NWS1\":{\"main\":[[{\"node\":\"Slack\",\"type\":\"main\",\"index\":0}]]},\"Slack\":{\"main\":[[]]},\"Webhook\":{\"main\":[[{\"node\":\"OpenStreetMap\",\"type\":\"main\",\"index\":0}]]},\"OpenStreetMap\":{\"main\":[[{\"node\":\"NWS\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "# Weather via Slack 🌦️💬\n\n## Overview\n\nThis workflow provides real-time weather updates via Slack using a **custom Slack command** :  \n`/weather [cityname]`\n\nUsers can type this command in Slack (e.g., `/weather New York`), and the workflow will fetch and post the latest forecast, including temperature, wind conditions, and a short weather summary.\n\nWhile this workflow is designed for Slack, users can modify it to send weather updates via **email, Discord, Microsoft Teams, or any other communication platform**.\n\n## How It Works\n\n  1. **Webhook Trigger** – The workflow is triggered when a user runs `/weather [cityname]` in Slack.\n  2. **Geocoding with OpenStreetMap** – The city name is converted into latitude and longitude coordinates.\n  3. **Weather Data from NOAA** – The coordinates are used to retrieve detailed weather data from the **National Weather Service (NWS)** API.\n  4. **Formatted Weather Report** – The workflow extracts relevant weather details, such as: \n     * Temperature (°F/°C)\n     * Wind speed and direction\n     * Short forecast summary\n  5. **Slack Notification** – The weather forecast is posted back to the Slack channel in a structured format.\n\n\n\n## Requirements\n\n  * A **custom Slack app** with: \n    * The ability to create a **Slash Command (`/weather`)**\n    * OAuth permissions to post messages in Slack\n  * An **n8n instance** to host and execute the workflow\n\n\n\n## Customization\n\n  * Replace Slack messaging with **email, Discord, Microsoft Teams, Telegram, or another service**.\n  * Modify the weather data format for different output preferences.\n  * Set up scheduled weather updates for specific locations.\n\n\n\n## Use Cases\n\n  * Instantly check the weather for any location directly in Slack.\n  * Automate weather reports for team members or projects.\n  * Useful for remote teams, outdoor event planning, or general weather tracking.\n\n\n\n## Setup Instructions\n\n  1. **Create a custom Slack app** : \n     * Go to [api.slack.com/apps](https://api.slack.com/apps) and create a new app.\n     * Add a **Slash Command** (`/weather`) with the webhook URL from n8n.\n     * Enable OAuth scopes for sending messages.\n  2. **Deploy the webhook** – Ensure it can receive and process Slack commands.\n  3. **Run the workflow** – Type `/weather [cityname]` in Slack and receive instant weather updates.\n\n\n",
  "crawled_at": "2025-05-26T02:28:44.610989",
  "readme_zh": "# 通过Slack获取天气 🌦️💬  \n\n## 概述  \n\n本工作流通过**自定义Slack指令**`/weather [城市名]`提供实时天气更新。  \n\n用户在Slack输入该指令（如`/weather 纽约`），工作流将获取并发布最新天气预报，包括温度、风力状况和简要天气摘要。  \n\n虽然该工作流专为Slack设计，但用户可将其修改为通过**电子邮件、Discord、Microsoft Teams或其他通讯平台**发送天气更新。  \n\n## 工作原理  \n\n1. **Webhook触发** – 当用户在Slack执行`/weather [城市名]`时触发工作流  \n2. **OpenStreetMap地理编码** – 将城市名转换为经纬度坐标  \n3. **NOAA天气数据** – 通过**美国国家气象局(NWS)** API获取详细天气数据  \n4. **格式化天气报告** – 提取关键天气信息：  \n   * 温度（华氏度/摄氏度）  \n   * 风速与风向  \n   * 简短天气预报摘要  \n5. **Slack通知** – 以结构化格式将天气预报回传至Slack频道  \n\n## 需求  \n\n* 需配置**自定义Slack应用**：  \n  * 支持创建**斜杠指令(`/weather`)**  \n  * 具备在Slack发送消息的OAuth权限  \n* 需**n8n实例**托管并执行工作流  \n\n## 自定义选项  \n\n* 将Slack消息替换为**电子邮件、Discord、Microsoft Teams、Telegram等其他服务**  \n* 调整天气数据格式以满足不同输出需求  \n* 为特定位置设置定时天气更新  \n\n## 应用场景  \n\n* 在Slack即时查询任意地点天气  \n* 为团队成员或项目自动推送天气报告  \n* 适用于远程团队、户外活动策划或日常天气追踪  \n\n## 设置指南  \n\n1. **创建自定义Slack应用**：  \n   * 访问[api.slack.com/apps](https://api.slack.com/apps)创建新应用  \n   * 添加**斜杠指令(`/weather`)**并配置n8n提供的webhook URL  \n   * 启用发送消息的OAuth权限  \n2. **部署webhook** – 确保可接收并处理Slack指令  \n3. **运行工作流** – 在Slack输入`/weather [城市名]`即可获取实时天气更新",
  "title_zh": "国家气象局7天天气预报（发布于Slack）",
  "publish_date_zh": "最后更新于2个月前",
  "workflow_json_zh": "{\n  \"id\": \"B6UHILmjPWa7ViQ4\",\n  \"meta\": {\n    \"instanceId\": \"ecc960f484e18b0e09045fd93acf0d47f4cfff25cc212ea348a08ac3aae81850\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"name\": \"Weather via Slack\",\n  \"tags\": [\n    {\n      \"id\": \"2KlkHxhULPP42BS6\",\n      \"name\": \"App 72\",\n      \"createdAt\": \"2025-02-19T21:15:27.390Z\",\n      \"updatedAt\": \"2025-02-19T21:15:27.390Z\"\n    },\n    {\n      \"id\": \"aw8suPYTKfXDtMZl\",\n      \"name\": \"Utility\",\n      \"createdAt\": \"2025-02-10T14:41:49.045Z\",\n      \"updatedAt\": \"2025-02-10T14:41:49.045Z\"\n    }\n  ],\n  \"nodes\": [\n    {\n      \"id\": \"9aea370b-7eb9-4742-9663-6628513e4de3\",\n      \"name\": \"Webhook\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"position\": [\n        -340,\n        -300\n      ],\n      \"webhookId\": \"41a60a4f-66d0-433b-aa43-b225dffa6761\",\n      \"parameters\": {\n        \"path\": \"slack1\",\n        \"options\": {},\n        \"httpMethod\": \"POST\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"c982487f-076a-48e8-9a35-78e8fbfb8936\",\n      \"name\": \"Slack\",\n      \"type\": \"n8n-nodes-base.slack\",\n      \"position\": [\n        560,\n        -300\n      ],\n      \"webhookId\": \"4840f197-e116-4ef5-9372-0abd063e4aad\",\n      \"parameters\": {\n        \"text\": \"={{\\n  JSON.parse($node[\\\"NWS1\\\"].json.data).properties.periods\\n  .map(period => \\n    `*${period.name}*\\\\n` +\\n    `Temp: ${period.temperature}°${period.temperatureUnit}\\\\n` +\\n    `Wind: ${period.windSpeed} ${period.windDirection}\\\\n` +\\n    `Forecast: ${period.shortForecast}`\\n  )\\n  .join(\\\"\\\\n\\\\n\\\")\\n}}\\n\",\n        \"select\": \"channel\",\n        \"channelId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"C0889718P8S\",\n          \"cachedResultName\": \"n8n\"\n        },\n        \"otherOptions\": {},\n        \"authentication\": \"oAuth2\"\n      },\n      \"credentials\": {\n        \"slackOAuth2Api\": {\n          \"id\": \"GSiEiuKBz8GR5qiD\",\n          \"name\": \"AlexK Slack account\"\n        }\n      },\n      \"typeVersion\": 2.3\n    },\n    {\n      \"id\": \"7d42112a-0590-4a09-ba0e-dbdf1eddccf2\",\n      \"name\": \"OpenStreetMap\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        -100,\n        -300\n      ],\n      \"parameters\": {\n        \"url\": \"https://nominatim.openstreetmap.org/search\",\n        \"options\": {\n          \"response\": {\n            \"response\": {\n              \"fullResponse\": true\n            }\n          }\n        },\n        \"sendQuery\": true,\n        \"sendHeaders\": true,\n        \"queryParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"q\",\n              \"value\": \"={{ $('Webhook').item.json.body.text }}\"\n            },\n            {\n              \"name\": \"format\",\n              \"value\": \"json\"\n            }\n          ]\n        },\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"User-Agent\",\n              \"value\": \"alexk1919 (alex@alexk1919.com)\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"565a0123-9059-4e6e-be97-96e0875c1b84\",\n      \"name\": \"NWS\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        120,\n        -300\n      ],\n      \"parameters\": {\n        \"url\": \"=https://api.weather.gov/points/{{ $json.body[0].lat }},{{ $json.body[0].lon }}\",\n        \"options\": {\n          \"response\": {\n            \"response\": {\n              \"fullResponse\": true\n            }\n          }\n        },\n        \"sendHeaders\": true,\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"User-Agent\",\n              \"value\": \"alexk1919 (alex@alexk1919.com)\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"3505e6c2-6e66-4abd-a1bb-75a1d8fc9a08\",\n      \"name\": \"NWS1\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        340,\n        -300\n      ],\n      \"parameters\": {\n        \"url\": \"=https://api.weather.gov/gridpoints/{{$json[\\\"data\\\"] ? JSON.parse($json[\\\"data\\\"]).properties.gridId : \\\"\\\"}}\\n/{{$json[\\\"data\\\"] ? JSON.parse($json[\\\"data\\\"]).properties.gridX : \\\"\\\"}}\\n,{{$json[\\\"data\\\"] ? JSON.parse($json[\\\"data\\\"]).properties.gridY : \\\"\\\"}}\\n/forecast\",\n        \"options\": {\n          \"response\": {\n            \"response\": {\n              \"fullResponse\": true\n            }\n          }\n        },\n        \"sendHeaders\": true,\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"User-Agent\",\n              \"value\": \"alexk1919 (alex@alexk1919.com)\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 4.2\n    }\n  ],\n  \"active\": true,\n  \"pinData\": {},\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"4244c90f-02e9-42fc-9873-3f8074f6ecf4\",\n  \"connections\": {\n    \"NWS\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"NWS1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"NWS1\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Slack\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Slack\": {\n      \"main\": [\n        []\n      ]\n    },\n    \"Webhook\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"OpenStreetMap\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"OpenStreetMap\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"NWS\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}