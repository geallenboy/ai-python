{
  "url": "https://n8n.io/workflows/3062-avoid-asking-redundant-questions-with-dynamically-generated-forms-using-openai/",
  "title": "Avoid Asking Redundant Questions with Dynamically Generated Forms using OpenAI",
  "author": "Chris Carr",
  "publish_date": "Last update 3 months ago",
  "publish_date_absolute": "2025-02-26",
  "categories": [
    {
      "name": "Sales"
    },
    {
      "name": "AI"
    },
    {
      "name": "Marketing"
    }
  ],
  "workflow_json": "{\"id\":\"ZkIH2ygj2BNSfMOh\",\"meta\":{\"instanceId\":\"ac63467607103d9c95dd644384984672b90b1cb03e07edbaf18fe72b2a6c45bb\",\"templateCredsSetupCompleted\":true},\"name\":\"Dynamic Form with AI\",\"tags\":[],\"nodes\":[{\"id\":\"5893c244-22b0-4699-a286-0ce121ccc427\",\"name\":\"OpenAI Chat Model\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\"position\":[-340,240],\"parameters\":{\"model\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"gpt-4o-mini\"},\"options\":{}},\"credentials\":{\"openAiApi\":{\"id\":\"1OMpAMAKR9l3eUDI\",\"name\":\"OpenAi account\"}},\"typeVersion\":1.2},{\"id\":\"e7e333d4-42e5-4e6a-b78b-a3a45c31f37c\",\"name\":\"Clarification Questions\",\"type\":\"n8n-nodes-base.form\",\"position\":[1100,-60],\"webhookId\":\"61936e5d-a2d3-447f-bf2f-722be2e1eb17\",\"parameters\":{\"options\":{},\"defineForm\":\"json\",\"jsonOutput\":\"={{ $json.data }}\"},\"typeVersion\":1},{\"id\":\"4b2bbc17-0e74-499d-ac6f-6c94ce3eb5ee\",\"name\":\"Get Basic Information\",\"type\":\"n8n-nodes-base.formTrigger\",\"position\":[-880,-60],\"webhookId\":\"5256b332-3d3c-486a-8449-85fa44961bb8\",\"parameters\":{\"options\":{},\"formTitle\":\"Get in Touch\",\"formFields\":{\"values\":[{\"fieldLabel\":\"Name\",\"placeholder\":\"John Smith\",\"requiredField\":true},{\"fieldLabel\":\"Company Name\",\"placeholder\":\"Company Limited\",\"requiredField\":true},{\"fieldLabel\":\"Job Title\",\"placeholder\":\"CEO\",\"requiredField\":true},{\"fieldType\":\"email\",\"fieldLabel\":\"Email\",\"placeholder\":\"john.smith@company.com\",\"requiredField\":true}]}},\"typeVersion\":2.2},{\"id\":\"b2eb9da9-571d-44ee-9944-a787f8d6cd50\",\"name\":\"Get Business Overview\",\"type\":\"n8n-nodes-base.form\",\"position\":[-640,-60],\"webhookId\":\"16216db0-6150-4ac7-b1f7-7fd6c2eb74c5\",\"parameters\":{\"options\":{},\"formFields\":{\"values\":[{\"fieldType\":\"textarea\",\"fieldLabel\":\"Please describe your current situation and why you are interested in automating with AI\",\"requiredField\":true}]}},\"typeVersion\":1},{\"id\":\"93c96c45-9512-46c2-9fe0-c4558b93e9d6\",\"name\":\"End Form\",\"type\":\"n8n-nodes-base.form\",\"position\":[1320,-60],\"webhookId\":\"eb756213-2fae-4b29-85b3-727d3cf53b90\",\"parameters\":{\"options\":{},\"operation\":\"completion\",\"completionTitle\":\"Form Completed\",\"completionMessage\":\"Thank you for answering these questions. We'll be in touch soon!\"},\"typeVersion\":1},{\"id\":\"123b688b-adae-4fe2-85cf-fc066175d96f\",\"name\":\"Structured Output Parser\",\"type\":\"@n8n/n8n-nodes-langchain.outputParserStructured\",\"position\":[-120,240],\"parameters\":{\"jsonSchemaExample\":\"{\\n  \\\"response\\\": [\\n    {\\n      \\\"question\\\": \\\"What is the biggest challenge facing their business at present?\\\",\\n      \\\"has_been_answered\\\": false,\\n      \\\"reasoning\\\": \\\"put your reason here\\\"\\n    },\\n    {\\n      \\\"question\\\": \\\"Does the company have any existing automation workflows already in place?\\\",\\n      \\\"has_been_answered\\\": true,\\n      \\\"reasoning\\\": \\\"put your reason here\\\"\\n    },\\n    {\\n      \\\"question\\\": \\\"Is the respondent a decision-maker in the business? (This can be inferred from their job title if it indicates a leadership position such as CEO, Founder, Director, etc.)\\\",\\n      \\\"has_been_answered\\\": false,\\n      \\\"reasoning\\\": \\\"put your reason here\\\"\\n    },\\n    {\\n      \\\"question\\\": \\\"Which specific business functions or departments are they looking to automate? (Examples: Sales, Marketing, HR, Finance, Customer Service, Supply Chain, etc.)\\\",\\n      \\\"has_been_answered\\\": true,\\n      \\\"reasoning\\\": \\\"put your reason here\\\"\\n    },\\n    {\\n      \\\"question\\\": \\\"What does their current IT infrastructure look like?\\\",\\n      \\\"has_been_answered\\\": false,\\n      \\\"reasoning\\\": \\\"put your reason here\\\"\\n    }\\n  ]\\n}\\n\"},\"typeVersion\":1.2},{\"id\":\"3a2d86a3-62ed-4003-a012-bfdabc9eafc8\",\"name\":\"Remove Already Answered Questions\",\"type\":\"n8n-nodes-base.filter\",\"position\":[340,-60],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"40bc4f8b-7fd3-4149-af5d-aca71eb9b034\",\"operator\":{\"type\":\"boolean\",\"operation\":\"false\",\"singleValue\":true},\"leftValue\":\"={{ $json.has_been_answered }}\",\"rightValue\":\"\"}]}},\"typeVersion\":2.2},{\"id\":\"a97d53ae-1649-4809-8793-5e4a815016cb\",\"name\":\"Analyse Response\",\"type\":\"@n8n/n8n-nodes-langchain.chainLlm\",\"position\":[-280,-60],\"parameters\":{\"text\":\"=## Analysis Task\\n\\nAnalyze the following customer response to the question \\\"Please describe your current situation and why you are interested in automating with AI.\\\" \\n\\nCustomer Information:\\n- Job Title: {{ $('Get Basic Information').item.json['Job Title'] }}\\n- Response: {{ $json['Please describe your current situation and why you are interested in automating with AI'] }}\\n\\n## Required Information\\nIdentify whether the customer's response clearly addresses each of these critical questions:\\n\\n1. What specific goals are you looking to achieve with automation?\\n2. Does the company have any existing automation workflows already in place?\\n3. Is the respondent a decision-maker in the business? (This can be inferred from their job title if it indicates a leadership position such as CEO, Founder, Director, etc.)\\n4. Which specific business functions or departments are you looking to automate? (Examples: Sales, Marketing, HR, Finance, Customer Service, Supply Chain, etc.)\\n5. What does your current IT infrastructure look like?\\n\\n## Output Format\\nAnalyse each question with whether you believe that the question has already been answered. Go step by step and use reasoning. \",\"promptType\":\"define\",\"hasOutputParser\":true},\"typeVersion\":1.5},{\"id\":\"12b8cc80-ff5e-4ebd-a72d-2629f743355e\",\"name\":\"Split Out Analysis\",\"type\":\"n8n-nodes-base.splitOut\",\"position\":[120,-60],\"parameters\":{\"options\":{},\"fieldToSplitOut\":\"output.response\"},\"notesInFlow\":false,\"typeVersion\":1},{\"id\":\"c28929cf-7590-4e32-be20-f9065920ed80\",\"name\":\"Prepare For Form Generation\",\"type\":\"n8n-nodes-base.set\",\"position\":[580,-60],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"ae1dbc1e-6005-4b5e-acbe-c3fda6d4413f\",\"name\":\"fieldLabel\",\"type\":\"string\",\"value\":\"={{ $json.question }}\"},{\"id\":\"c46276bc-018e-4edb-82e0-f6a4dc9d4953\",\"name\":\"requiredField\",\"type\":\"boolean\",\"value\":true},{\"id\":\"b060ed04-a99c-475b-a5b6-6cb5d57ea2ff\",\"name\":\"fieldType\",\"type\":\"string\",\"value\":\"textarea\"}]}},\"typeVersion\":3.4},{\"id\":\"33d55396-e716-41c5-bf25-d0bfcfadf167\",\"name\":\"Aggregate For Form Generation\",\"type\":\"n8n-nodes-base.aggregate\",\"position\":[840,-60],\"parameters\":{\"options\":{},\"aggregate\":\"aggregateAllItemData\"},\"typeVersion\":1},{\"id\":\"15b39119-08d6-45bf-9323-09fa5b59a64e\",\"name\":\"Sticky Note4\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-1660,-300],\"parameters\":{\"width\":700,\"height\":780,\"content\":\"# Avoid Asking Redundant Questions with Dynamically Generated Forms using OpenAI \\n## Target Audience\\nThis workflow has been built for those who require a form to capture as much data as possible as well as the answers to predefined questions, whilst optimising the user experience by avoiding asking redundant questions.\\n## Use Case\\nWhen creating a form to capture information, it can be useful to give the user an opportunity to input a long answer to a large, open-ended question. We then want to drill down to answer specific questions that we require the answer to. When doing this, we don't want to ask duplicate questions. This particular scenario imagines an AI consultancy capturing leads.\\n## What it Does\\nThis workflow requires users to input basic information and then answer an open ended question. The specific questions on the next page will only be those that weren't answered in the open-ended question.\\n## How it Works\\n1. The open-ended question (and relevant basic information) is analysed by an LLM to determine which specific questions have not been answered. Chain-of-thought reasoning is utilised and the output structure is specified with the **Structured Output Parser**.\\n2. Those questions that have already been answered are filtered out nodes. The remaining items are then used to generate the last page of the form.\\n3. Once the user has filled in the final page of the form, they are shown a form completion page.\\n## Next Steps\\n- Add additional nodes to send an email to the form owner\\n- Add a subsequent LLM call to analyse the form response - those that are qualified should be given the opportunity to book an appointment\"},\"typeVersion\":1},{\"id\":\"e9270776-97f0-4aa4-8797-92a235f7760e\",\"name\":\"Sticky Note5\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-940,-300],\"parameters\":{\"width\":480,\"height\":140,\"content\":\"## Setup\\n1. Add your **OpenAI** credentials\\n2. Go to the **Get Basic Information** node and click **Test Step**\\n3. Complete the form to test the generic use case\\n4. Modify the prompt in **Analyse Response** to fit your use case\"},\"typeVersion\":1},{\"id\":\"6db4d121-f08a-4509-82fd-5d91d1dcbc82\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-940,-140],\"parameters\":{\"color\":7,\"width\":480,\"height\":240,\"content\":\"## 1. Initial Form Pages\\n\\n\"},\"typeVersion\":1},{\"id\":\"3ecaaf11-8bc7-415e-8eb3-245f7bcedda7\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-440,-220],\"parameters\":{\"color\":7,\"width\":480,\"height\":620,\"content\":\"## 2. Analyse Response\\n\\n\"},\"typeVersion\":1},{\"id\":\"1e2e100e-ac64-45b1-aa3b-318996783a79\",\"name\":\"Sticky Note8\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-420,140],\"parameters\":{\"color\":5,\"width\":220,\"height\":240,\"content\":\"### Modification\\nReplace this sub-node \\nto use a different language model\"},\"typeVersion\":1},{\"id\":\"e6f92fbb-7f41-4e02-9316-06e7480c0306\",\"name\":\"Sticky Note6\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-300,-160],\"parameters\":{\"color\":5,\"width\":300,\"height\":240,\"content\":\"### Modification\\nModify the prompt to suit your use case\"},\"typeVersion\":1},{\"id\":\"1bcca0c9-a4b3-493f-a188-7ecc00fec36e\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[60,-140],\"parameters\":{\"color\":7,\"width\":920,\"height\":260,\"content\":\"## 3. Clean Up Analysis\\n\\n\"},\"typeVersion\":1},{\"id\":\"ffcee0f4-364b-46a5-9deb-cbd005a3b6fc\",\"name\":\"Sticky Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1000,-140],\"parameters\":{\"color\":7,\"width\":520,\"height\":260,\"content\":\"## 4. Generate Final Form Page & End Form\\n\\n\\n\"},\"typeVersion\":1}],\"active\":true,\"pinData\":{},\"settings\":{\"executionOrder\":\"v1\"},\"versionId\":\"336f5d17-d556-4e9f-8785-9c55c0b5d918\",\"connections\":{\"End Form\":{\"main\":[[]]},\"Analyse Response\":{\"main\":[[{\"node\":\"Split Out Analysis\",\"type\":\"main\",\"index\":0}]]},\"OpenAI Chat Model\":{\"ai_languageModel\":[[{\"node\":\"Analyse Response\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"Split Out Analysis\":{\"main\":[[{\"node\":\"Remove Already Answered Questions\",\"type\":\"main\",\"index\":0}]]},\"Get Basic Information\":{\"main\":[[{\"node\":\"Get Business Overview\",\"type\":\"main\",\"index\":0}]]},\"Get Business Overview\":{\"main\":[[{\"node\":\"Analyse Response\",\"type\":\"main\",\"index\":0}]]},\"Clarification Questions\":{\"main\":[[{\"node\":\"End Form\",\"type\":\"main\",\"index\":0}]]},\"Structured Output Parser\":{\"ai_outputParser\":[[{\"node\":\"Analyse Response\",\"type\":\"ai_outputParser\",\"index\":0}]]},\"Prepare For Form Generation\":{\"main\":[[{\"node\":\"Aggregate For Form Generation\",\"type\":\"main\",\"index\":0}]]},\"Aggregate For Form Generation\":{\"main\":[[{\"node\":\"Clarification Questions\",\"type\":\"main\",\"index\":0}]]},\"Remove Already Answered Questions\":{\"main\":[[{\"node\":\"Prepare For Form Generation\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "# Avoid Asking Redundant Questions with Dynamically Generated Forms using OpenAI\n\n## Target Audience\n\nThis workflow has been built for those who require a form to capture as much data as possible as well as the answers to predefined questions, whilst optimising the user experience by avoiding asking redundant questions.\n\n## Use Case\n\nWhen creating a form to capture information, it can be useful to give the user an opportunity to input a long answer to a large, open-ended question. We then want to drill down to answer specific questions that we require the answer to. When doing this, we don't want to ask duplicate questions. This particular scenario imagines an AI consultancy capturing leads.\n\n## What it Does\n\nThis workflow requires users to input basic information and then answer an open ended question. The specific questions on the next page will only be those that weren't answered in the open-ended question.\n\n## How it Works\n\n  1. The open-ended question (and relevant basic information) is analysed by an LLM to determine which specific questions have not been answered. Chain-of-thought reasoning is utilised and the output structure is specified with the **Structured Output Parser**.\n  2. Those questions that have already been answered are filtered out nodes. The remaining items are then used to generate the last page of the form.\n  3. Once the user has filled in the final page of the form, they are shown a form completion page.\n\n\n\n## Setup\n\n  1. Add your **OpenAI** credentials\n  2. Go to the **Get Basic Information** node and click **Test Step**\n  3. Complete the form to test the generic use case\n  4. Modify the prompt in **Analyse Response** to fit your use case\n\n\n\n## Next Steps\n\n  * Add additional nodes to send an email to the form owner\n  * Add a subsequent LLM call to analyse the form response - those that are qualified should be given the opportunity to book an appointment\n\n\n",
  "crawled_at": "2025-05-26T03:37:30.787893",
  "readme_zh": "# 利用OpenAI动态生成表单避免重复提问\n\n## 目标用户\n\n本工作流专为需要收集大量数据及预设问题答案的用户设计，通过避免重复提问优化用户体验。\n\n## 应用场景\n\n创建信息收集表单时，可设置开放式问题让用户自由作答。随后需要针对未涵盖的具体问题进行补充提问，同时避免问题重复。本案例以AI咨询公司获取销售线索为例。\n\n## 功能说明\n\n工作流要求用户先填写基本信息并回答开放式问题，系统将自动识别开放式回答中未涵盖的具体问题，仅在后续页面展示这些待补充问题。\n\n## 运作原理\n\n1. 通过LLM分析开放式回答（及相关基础信息），运用思维链推理技术，配合**结构化输出解析器**确定未回答的具体问题\n2. 过滤已获解答的问题节点，剩余问题将生成表单最终页面\n3. 用户完成最终表单后，系统显示提交完成页面\n\n## 配置指南\n\n1. 添加您的**OpenAI**凭证\n2. 进入**获取基础信息**节点点击**测试步骤**\n3. 填写表单测试通用场景\n4. 根据需求修改**分析回答**节点中的提示词\n\n## 后续扩展\n\n* 添加节点实现表单提交自动邮件通知\n* 增加LLM调用分析表单响应 - 对符合要求的用户提供预约功能",
  "title_zh": "利用OpenAI动态生成表单避免提出冗余问题",
  "publish_date_zh": "最后更新于2个月前",
  "workflow_json_zh": "{\n  \"id\": \"ZkIH2ygj2BNSfMOh\",\n  \"meta\": {\n    \"instanceId\": \"ac63467607103d9c95dd644384984672b90b1cb03e07edbaf18fe72b2a6c45bb\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"name\": \"Dynamic Form with AI\",\n  \"tags\": [],\n  \"nodes\": [\n    {\n      \"id\": \"5893c244-22b0-4699-a286-0ce121ccc427\",\n      \"name\": \"OpenAI Chat Model\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\n      \"position\": [\n        -340,\n        240\n      ],\n      \"parameters\": {\n        \"model\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gpt-4o-mini\"\n        },\n        \"options\": {}\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"1OMpAMAKR9l3eUDI\",\n          \"name\": \"OpenAi account\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"e7e333d4-42e5-4e6a-b78b-a3a45c31f37c\",\n      \"name\": \"Clarification Questions\",\n      \"type\": \"n8n-nodes-base.form\",\n      \"position\": [\n        1100,\n        -60\n      ],\n      \"webhookId\": \"61936e5d-a2d3-447f-bf2f-722be2e1eb17\",\n      \"parameters\": {\n        \"options\": {},\n        \"defineForm\": \"json\",\n        \"jsonOutput\": \"={{ $json.data }}\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"4b2bbc17-0e74-499d-ac6f-6c94ce3eb5ee\",\n      \"name\": \"Get Basic Information\",\n      \"type\": \"n8n-nodes-base.formTrigger\",\n      \"position\": [\n        -880,\n        -60\n      ],\n      \"webhookId\": \"5256b332-3d3c-486a-8449-85fa44961bb8\",\n      \"parameters\": {\n        \"options\": {},\n        \"formTitle\": \"Get in Touch\",\n        \"formFields\": {\n          \"values\": [\n            {\n              \"fieldLabel\": \"Name\",\n              \"placeholder\": \"John Smith\",\n              \"requiredField\": true\n            },\n            {\n              \"fieldLabel\": \"Company Name\",\n              \"placeholder\": \"Company Limited\",\n              \"requiredField\": true\n            },\n            {\n              \"fieldLabel\": \"Job Title\",\n              \"placeholder\": \"CEO\",\n              \"requiredField\": true\n            },\n            {\n              \"fieldType\": \"email\",\n              \"fieldLabel\": \"Email\",\n              \"placeholder\": \"john.smith@company.com\",\n              \"requiredField\": true\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"b2eb9da9-571d-44ee-9944-a787f8d6cd50\",\n      \"name\": \"Get Business Overview\",\n      \"type\": \"n8n-nodes-base.form\",\n      \"position\": [\n        -640,\n        -60\n      ],\n      \"webhookId\": \"16216db0-6150-4ac7-b1f7-7fd6c2eb74c5\",\n      \"parameters\": {\n        \"options\": {},\n        \"formFields\": {\n          \"values\": [\n            {\n              \"fieldType\": \"textarea\",\n              \"fieldLabel\": \"Please describe your current situation and why you are interested in automating with AI\",\n              \"requiredField\": true\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"93c96c45-9512-46c2-9fe0-c4558b93e9d6\",\n      \"name\": \"End Form\",\n      \"type\": \"n8n-nodes-base.form\",\n      \"position\": [\n        1320,\n        -60\n      ],\n      \"webhookId\": \"eb756213-2fae-4b29-85b3-727d3cf53b90\",\n      \"parameters\": {\n        \"options\": {},\n        \"operation\": \"completion\",\n        \"completionTitle\": \"Form Completed\",\n        \"completionMessage\": \"Thank you for answering these questions. We'll be in touch soon!\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"123b688b-adae-4fe2-85cf-fc066175d96f\",\n      \"name\": \"Structured Output Parser\",\n      \"type\": \"@n8n/n8n-nodes-langchain.outputParserStructured\",\n      \"position\": [\n        -120,\n        240\n      ],\n      \"parameters\": {\n        \"jsonSchemaExample\": \"{\\n  \\\"response\\\": [\\n    {\\n      \\\"question\\\": \\\"What is the biggest challenge facing their business at present?\\\",\\n      \\\"has_been_answered\\\": false,\\n      \\\"reasoning\\\": \\\"put your reason here\\\"\\n    },\\n    {\\n      \\\"question\\\": \\\"Does the company have any existing automation workflows already in place?\\\",\\n      \\\"has_been_answered\\\": true,\\n      \\\"reasoning\\\": \\\"put your reason here\\\"\\n    },\\n    {\\n      \\\"question\\\": \\\"Is the respondent a decision-maker in the business? (This can be inferred from their job title if it indicates a leadership position such as CEO, Founder, Director, etc.)\\\",\\n      \\\"has_been_answered\\\": false,\\n      \\\"reasoning\\\": \\\"put your reason here\\\"\\n    },\\n    {\\n      \\\"question\\\": \\\"Which specific business functions or departments are they looking to automate? (Examples: Sales, Marketing, HR, Finance, Customer Service, Supply Chain, etc.)\\\",\\n      \\\"has_been_answered\\\": true,\\n      \\\"reasoning\\\": \\\"put your reason here\\\"\\n    },\\n    {\\n      \\\"question\\\": \\\"What does their current IT infrastructure look like?\\\",\\n      \\\"has_been_answered\\\": false,\\n      \\\"reasoning\\\": \\\"put your reason here\\\"\\n    }\\n  ]\\n}\\n\"\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"3a2d86a3-62ed-4003-a012-bfdabc9eafc8\",\n      \"name\": \"Remove Already Answered Questions\",\n      \"type\": \"n8n-nodes-base.filter\",\n      \"position\": [\n        340,\n        -60\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"40bc4f8b-7fd3-4149-af5d-aca71eb9b034\",\n              \"operator\": {\n                \"type\": \"boolean\",\n                \"operation\": \"false\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $json.has_been_answered }}\",\n              \"rightValue\": \"\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"a97d53ae-1649-4809-8793-5e4a815016cb\",\n      \"name\": \"Analyse Response\",\n      \"type\": \"@n8n/n8n-nodes-langchain.chainLlm\",\n      \"position\": [\n        -280,\n        -60\n      ],\n      \"parameters\": {\n        \"text\": \"=## Analysis Task\\n\\nAnalyze the following customer response to the question \\\"Please describe your current situation and why you are interested in automating with AI.\\\" \\n\\nCustomer Information:\\n- Job Title: {{ $('Get Basic Information').item.json['Job Title'] }}\\n- Response: {{ $json['Please describe your current situation and why you are interested in automating with AI'] }}\\n\\n## Required Information\\nIdentify whether the customer's response clearly addresses each of these critical questions:\\n\\n1. What specific goals are you looking to achieve with automation?\\n2. Does the company have any existing automation workflows already in place?\\n3. Is the respondent a decision-maker in the business? (This can be inferred from their job title if it indicates a leadership position such as CEO, Founder, Director, etc.)\\n4. Which specific business functions or departments are you looking to automate? (Examples: Sales, Marketing, HR, Finance, Customer Service, Supply Chain, etc.)\\n5. What does your current IT infrastructure look like?\\n\\n## Output Format\\nAnalyse each question with whether you believe that the question has already been answered. Go step by step and use reasoning. \",\n        \"promptType\": \"define\",\n        \"hasOutputParser\": true\n      },\n      \"typeVersion\": 1.5\n    },\n    {\n      \"id\": \"12b8cc80-ff5e-4ebd-a72d-2629f743355e\",\n      \"name\": \"Split Out Analysis\",\n      \"type\": \"n8n-nodes-base.splitOut\",\n      \"position\": [\n        120,\n        -60\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"fieldToSplitOut\": \"output.response\"\n      },\n      \"notesInFlow\": false,\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"c28929cf-7590-4e32-be20-f9065920ed80\",\n      \"name\": \"Prepare For Form Generation\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        580,\n        -60\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"ae1dbc1e-6005-4b5e-acbe-c3fda6d4413f\",\n              \"name\": \"fieldLabel\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.question }}\"\n            },\n            {\n              \"id\": \"c46276bc-018e-4edb-82e0-f6a4dc9d4953\",\n              \"name\": \"requiredField\",\n              \"type\": \"boolean\",\n              \"value\": true\n            },\n            {\n              \"id\": \"b060ed04-a99c-475b-a5b6-6cb5d57ea2ff\",\n              \"name\": \"fieldType\",\n              \"type\": \"string\",\n              \"value\": \"textarea\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"33d55396-e716-41c5-bf25-d0bfcfadf167\",\n      \"name\": \"Aggregate For Form Generation\",\n      \"type\": \"n8n-nodes-base.aggregate\",\n      \"position\": [\n        840,\n        -60\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"aggregate\": \"aggregateAllItemData\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"15b39119-08d6-45bf-9323-09fa5b59a64e\",\n      \"name\": \"Sticky Note4\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -1660,\n        -300\n      ],\n      \"parameters\": {\n        \"width\": 700,\n        \"height\": 780,\n        \"content\": \"# 利用OpenAI动态生成表单避免重复提问\\n## 目标用户\\n本工作流专为需要收集大量数据及预设问题答案的用户设计，通过智能规避冗余问题优化用户体验。\\n## 应用场景\\n当创建信息收集表单时，允许用户对开放式问题进行详细回答后，系统将智能识别未解答的具体问题。本案例以AI咨询公司获取销售线索为例，避免对已回答内容进行重复提问。\\n## 功能说明\\n该工作流要求用户先填写基础信息并回答开放式问题，后续页面仅展示开放式回答中未涵盖的具体问题。\\n## 实现原理\\n1. 通过LLM分析开放式问题答案（及相关基础信息），运用思维链推理技术，配合**结构化输出解析器**确定未解答的具体问题\\n2. 自动过滤已获解答的问题节点，剩余问题将生成最终表单页面\\n3. 用户完成最终表单填写后，系统显示提交完成页面\\n## 后续优化\\n- 新增邮件通知功能自动发送表单结果给负责人\\n- 添加LLM分析模块筛选优质线索，为合格用户提供预约通道\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"e9270776-97f0-4aa4-8797-92a235f7760e\",\n      \"name\": \"Sticky Note5\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -940,\n        -300\n      ],\n      \"parameters\": {\n        \"width\": 480,\n        \"height\": 140,\n        \"content\": \"## 设置步骤\\n1. 添加您的**OpenAI**凭证\\n2. 进入**获取基础信息**节点并点击**测试步骤**\\n3. 填写表单以测试通用用例\\n4. 修改**分析响应**中的提示语以适应您的具体用例\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"6db4d121-f08a-4509-82fd-5d91d1dcbc82\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -940,\n        -140\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 480,\n        \"height\": 240,\n        \"content\": \"## 1. 初始表单页面\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"3ecaaf11-8bc7-415e-8eb3-245f7bcedda7\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -440,\n        -220\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 480,\n        \"height\": 620,\n        \"content\": \"## 2. 分析响应\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"1e2e100e-ac64-45b1-aa3b-318996783a79\",\n      \"name\": \"Sticky Note8\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -420,\n        140\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 220,\n        \"height\": 240,\n        \"content\": \"### 修改\\n将此子节点替换为使用不同的语言模型\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"e6f92fbb-7f41-4e02-9316-06e7480c0306\",\n      \"name\": \"Sticky Note6\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -300,\n        -160\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 300,\n        \"height\": 240,\n        \"content\": \"### 修改\\n根据您的使用场景调整提示词\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"1bcca0c9-a4b3-493f-a188-7ecc00fec36e\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        60,\n        -140\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 920,\n        \"height\": 260,\n        \"content\": \"## 3. 清理分析\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"ffcee0f4-364b-46a5-9deb-cbd005a3b6fc\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1000,\n        -140\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 520,\n        \"height\": 260,\n        \"content\": \"## 4. 生成最终表单页面并结束表单\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"active\": true,\n  \"pinData\": {},\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"336f5d17-d556-4e9f-8785-9c55c0b5d918\",\n  \"connections\": {\n    \"End Form\": {\n      \"main\": [\n        []\n      ]\n    },\n    \"Analyse Response\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Split Out Analysis\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"OpenAI Chat Model\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"Analyse Response\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Split Out Analysis\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Remove Already Answered Questions\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get Basic Information\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get Business Overview\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get Business Overview\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Analyse Response\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Clarification Questions\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"End Form\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Structured Output Parser\": {\n      \"ai_outputParser\": [\n        [\n          {\n            \"node\": \"Analyse Response\",\n            \"type\": \"ai_outputParser\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Prepare For Form Generation\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Aggregate For Form Generation\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Aggregate For Form Generation\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Clarification Questions\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Remove Already Answered Questions\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Prepare For Form Generation\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}