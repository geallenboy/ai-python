{
  "url": "https://n8n.io/workflows/3053-technical-stock-analysis-with-telegram-airtable-and-a-gpt-powered-ai-agent/",
  "title": "Technical stock analysis with Telegram, Airtable and a GPT-powered AI Agent",
  "author": "Mark Shcherbakov",
  "publish_date": "Last update 3 months ago",
  "publish_date_absolute": "2025-02-26",
  "categories": [
    {
      "name": "Finance"
    },
    {
      "name": "AI"
    }
  ],
  "workflow_json": "{\"meta\":{\"instanceId\":\"6a2a7715680b8313f7cb4676321c5baa46680adfb913072f089f2766f42e43bd\"},\"nodes\":[{\"id\":\"1340d672-61c8-403e-89a7-f28e3afbc0e7\",\"name\":\"Window Buffer Memory\",\"type\":\"@n8n/n8n-nodes-langchain.memoryBufferWindow\",\"position\":[1760,540],\"parameters\":{\"sessionKey\":\"=335458847\",\"sessionIdType\":\"customKey\"},\"typeVersion\":1.3},{\"id\":\"3c770b79-d6c5-4512-94fa-7719af6d0620\",\"name\":\"Get Chart\",\"type\":\"@n8n/n8n-nodes-langchain.toolWorkflow\",\"position\":[1900,560],\"parameters\":{\"name\":\"getChart\",\"workflowId\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"LCT4zHJr8LcjM6a7\",\"cachedResultName\":\"Trading Agent\"},\"description\":\"Call this tool to get an analysis of a requested stock. The URL that is output from this tool must be returned in markdown format. For example, ![](url)\\n\\nIt'll be obligatory to pass ticker and chart style. Both can be specified by user. If chart style is not specified by user, use \\\"candle\\\" as default. Possible options for style: [bar, candle, line, area, heikinAshi, hollowCandle, baseline, hiLo, column]\",\"workflowInputs\":{\"value\":{\"ticker\":\"={{ $fromAI(\\\"ticker\\\") }}\",\"chart_style\":\"={{ $fromAI(\\\"chart_style\\\") }}\"},\"schema\":[{\"id\":\"ticker\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"ticker\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"chart_style\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"chart_style\",\"defaultMatch\":false,\"canBeUsedToMatch\":true}],\"mappingMode\":\"defineBelow\",\"matchingColumns\":[],\"attemptToConvertTypes\":false,\"convertFieldsToString\":false}},\"typeVersion\":2},{\"id\":\"a44b48ac-9bfc-4988-81d7-177357971558\",\"name\":\"AI Agent\",\"type\":\"@n8n/n8n-nodes-langchain.agent\",\"position\":[1660,320],\"parameters\":{\"text\":\"={{ $json.text }}\",\"options\":{\"systemMessage\":\"=# Overview  \\n\\nYou are an AI agent specializing in  analyzing stocks. You can perform technical analysis using the **GetChart** tool to generate stock graphs.  \\n\\n\\n# Instructions \\n\\n1. Begin by offering a warm and professional greeting.\\n2. Maintain a conversational style when discussing finance and stock markets.\\n3. If a user requests technical analysis of a stock, supplying its ticker:\\n- Send only the stock ticker to the GetChart tool.\\n- Present the chart's analysis and insights in a conversational format.\\n4. When addressing financial subjects, provide thorough, easy-to-understand explanations suitable for the user's knowledge.\\n5. Refrain from giving direct financial recommendations(buy or sell) or making predictions.\\n\\n\\n## Tools  \\n\\n- **GetChart**: Used for generating stock graphs based on provided tickers.  \\n\\n## Standard Operating Procedure\\n\\n1. Interact with the user: Maintain a professional and approachable demeanor.\\n2. Conduct stock analysis:\\n- Upon request for technical analysis, send the stock's ticker symbol to the GetChart tool.\\n- Present the chart's findings in an easy-to-understand, conversational manner.\\n3. Clarify financial topics: Simplify intricate terms into accessible explanations suitable for the user's knowledge level.\\n4. Refrain from offering financial recommendations: Deliver information and analysis without suggesting specific actions.\\n5. Verify user understanding: Ask clarifying questions to ensure all needs are met.\"},\"promptType\":\"define\"},\"typeVersion\":1.7},{\"id\":\"a6d405f0-52c5-4937-85cd-7ef6e4a596b6\",\"name\":\"Telegram Trigger\",\"type\":\"n8n-nodes-base.telegramTrigger\",\"position\":[760,320],\"webhookId\":\"dbf7f0b7-5cdd-45a3-8c91-39f0665aba76\",\"parameters\":{\"updates\":[\"message\"],\"additionalFields\":{}},\"credentials\":{\"telegramApi\":{\"id\":\"UajcuBAYm5PEbptW\",\"name\":\"Telegram Philipp\"}},\"typeVersion\":1.1},{\"id\":\"22bd61a2-45cb-4074-a027-28a9a0d327f5\",\"name\":\"Send Analysis\",\"type\":\"n8n-nodes-base.telegram\",\"position\":[2040,320],\"webhookId\":\"949b8c67-29b9-4714-8a42-b0e59e91ae10\",\"parameters\":{\"text\":\"={{ $json.output }}\",\"chatId\":\"=335458847\",\"additionalFields\":{\"appendAttribution\":false}},\"credentials\":{\"telegramApi\":{\"id\":\"UajcuBAYm5PEbptW\",\"name\":\"Telegram Philipp\"}},\"typeVersion\":1.2},{\"id\":\"6f18a794-c302-47c3-8516-d14597408ae7\",\"name\":\"Workflow Input Trigger\",\"type\":\"n8n-nodes-base.executeWorkflowTrigger\",\"position\":[780,960],\"parameters\":{\"workflowInputs\":{\"values\":[{\"name\":\"ticker\"},{\"name\":\"chart_style\"}]}},\"typeVersion\":1.1},{\"id\":\"102a021b-c0bb-4bdb-bca1-a4f0f7a84687\",\"name\":\"response\",\"type\":\"n8n-nodes-base.set\",\"position\":[2040,960],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"fdf7e016-7082-4146-9038-454139023990\",\"name\":\"response\",\"type\":\"string\",\"value\":\"={{ $('Technical Analysis').item.json.choices[0].message.content }}\"}]}},\"typeVersion\":3.4},{\"id\":\"ba96d38a-5a12-44a0-927f-5893cd91ac9b\",\"name\":\"Download Chart\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[1440,960],\"parameters\":{\"url\":\"={{ $json.url }}\",\"options\":{}},\"typeVersion\":4.2},{\"id\":\"7deaf5b4-0280-46d2-b9f8-4d14a67f60b6\",\"name\":\"Get Chart URL\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[1220,960],\"parameters\":{\"url\":\"https://api.chart-img.com/v2/tradingview/advanced-chart/storage\",\"method\":\"POST\",\"options\":{\"response\":{\"response\":{\"responseFormat\":\"json\"}}},\"jsonBody\":\"={\\n  \\\"style\\\": \\\"{{ $json.chart_style }}\\\",\\n  \\\"theme\\\": \\\"light\\\",\\n  \\\"interval\\\": \\\"1W\\\",\\n  \\\"symbol\\\": \\\"NASDAQ:{{ $json.ticker }}\\\",\\n  \\\"override\\\": {\\n    \\\"showStudyLastValue\\\": false\\n  },\\n  \\\"studies\\\": [\\n    {\\n      \\\"name\\\": \\\"Volume\\\",\\n      \\\"forceOverlay\\\": true\\n    },\\n{\\n      \\\"name\\\": \\\"Relative Strength Index\\\"\\n    },\\n{\\n      \\\"name\\\": \\\"Stochastic RSI\\\"\\n}\\n  ]\\n}\",\"sendBody\":true,\"sendHeaders\":true,\"specifyBody\":\"json\",\"authentication\":\"genericCredentialType\",\"genericAuthType\":\"httpHeaderAuth\",\"headerParameters\":{\"parameters\":[{\"name\":\"Content-Type\",\"value\":\"application/json\"}]}},\"credentials\":{\"httpHeaderAuth\":{\"id\":\"Go406nynVPn88QIS\",\"name\":\"Header Auth account 3\"}},\"typeVersion\":4.2},{\"id\":\"46ebe865-b13b-4d7d-8acf-a10d78ba4b5b\",\"name\":\"Send Chart\",\"type\":\"n8n-nodes-base.telegram\",\"position\":[1840,960],\"webhookId\":\"a42b988a-cd3a-4cf0-8975-7a38c8b510ba\",\"parameters\":{\"file\":\"={{ $('Get Chart URL').item.json.url }}\",\"chatId\":\"335458847\",\"operation\":\"sendPhoto\",\"additionalFields\":{}},\"credentials\":{\"telegramApi\":{\"id\":\"UajcuBAYm5PEbptW\",\"name\":\"Telegram Philipp\"}},\"typeVersion\":1.2},{\"id\":\"e5a62237-af1e-42dd-befd-51aa0e0a0c08\",\"name\":\"OpenAI Chat Model\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\"position\":[1600,540],\"parameters\":{\"model\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"gpt-4o\",\"cachedResultName\":\"gpt-4o\"},\"options\":{}},\"credentials\":{\"openAiApi\":{\"id\":\"9RivS2BmSh1DDBFm\",\"name\":\"OpenAI Philipp\"}},\"typeVersion\":1.2},{\"id\":\"c3d63b6f-5908-4e64-9063-1910024b0ed4\",\"name\":\"Switch\",\"type\":\"n8n-nodes-base.switch\",\"position\":[940,320],\"parameters\":{\"rules\":{\"values\":[{\"outputKey\":\"Voice\",\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"operator\":{\"type\":\"string\",\"operation\":\"exists\",\"singleValue\":true},\"leftValue\":\"={{ $json.message.voice.file_id }}\",\"rightValue\":\"\"}]},\"renameOutput\":true},{\"outputKey\":\"Text\",\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"8c844924-b2ed-48b0-935c-c66a8fd0c778\",\"operator\":{\"type\":\"string\",\"operation\":\"exists\",\"singleValue\":true},\"leftValue\":\"={{ $json.message.text }}\",\"rightValue\":\"\"}]},\"renameOutput\":true}]},\"options\":{}},\"typeVersion\":3.2},{\"id\":\"1d27102b-47c9-4aa7-a93c-71699326960d\",\"name\":\"Transcribe\",\"type\":\"@n8n/n8n-nodes-langchain.openAi\",\"position\":[1460,240],\"parameters\":{\"options\":{},\"resource\":\"audio\",\"operation\":\"transcribe\"},\"credentials\":{\"openAiApi\":{\"id\":\"9RivS2BmSh1DDBFm\",\"name\":\"OpenAI Philipp\"}},\"typeVersion\":1.6},{\"id\":\"1252b926-9965-4499-a539-3c7e2a7eb151\",\"name\":\"Download File\",\"type\":\"n8n-nodes-base.telegram\",\"position\":[1300,240],\"webhookId\":\"83bb7385-33f6-4105-8294-1a91c0ebbee5\",\"parameters\":{\"fileId\":\"={{ $json.message.voice.file_id }}\",\"resource\":\"file\"},\"credentials\":{\"telegramApi\":{\"id\":\"UajcuBAYm5PEbptW\",\"name\":\"Telegram Philipp\"}},\"typeVersion\":1.2},{\"id\":\"3777f861-d933-4a95-af74-2e787beda709\",\"name\":\"Set Text\",\"type\":\"n8n-nodes-base.set\",\"position\":[1360,440],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"fe7ecc99-e1e8-4a5e-bdd6-6fce9757b234\",\"name\":\"text\",\"type\":\"string\",\"value\":\"={{ $json.message.text }}\"}]}},\"typeVersion\":3.4},{\"id\":\"5630eed3-7b99-400f-ad54-bf72c7e52570\",\"name\":\"Set Values\",\"type\":\"n8n-nodes-base.set\",\"position\":[1000,960],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"cf5f7210-5b54-4f4a-abf7-87873be82df4\",\"name\":\"ticker\",\"type\":\"string\",\"value\":\"={{ $json.ticker }}\"},{\"id\":\"12a27443-a009-4bd5-b33f-bcec74aa74c7\",\"name\":\"chart_style\",\"type\":\"string\",\"value\":\"={{ $json.chart_style }}\"}]}},\"typeVersion\":3.4},{\"id\":\"534cad9e-b3b8-4435-9db4-d7d22adfa305\",\"name\":\"Technical Analysis\",\"type\":\"@n8n/n8n-nodes-langchain.openAi\",\"position\":[1640,960],\"parameters\":{\"text\":\"=# Professional Role\\n\\nYou are a financial analyst, specializing in the interpretive analysis of stock charts. Your primary responsibility is to scrutinize provided financial charts and deliver comprehensive assessments of their technical dimensions. This includes examining candlestick formations, Moving Average Convergence Divergence (MACD) metrics, trading volume patterns, **Relative Strength Index (RSI), Stochastic RSI**, and prevailing market sentiment. Your analysis should be a thorough dissection of the chart, pinpointing critical areas and offering practical insights.\\n\\nWhen evaluating a stock chart, ensure the inclusion of the following:\\n\\n1. **Candlestick Pattern Interpretation**:\\n    - Recognize and articulate the significance of any notable candlestick formations (e.g., bullish engulfing, doji, hammer).\\n    - Provide commentary on the prevailing market direction (upward, downward, or lateral).\\n    - Identify potential zones for price surges or retracements.\\n\\n2. **Relative Strength Index (RSI) Examination**:\\n    - **Extract the numerical RSI value from the chart.**\\n    - Describe the current RSI value and its market positioning (e.g., overbought, oversold, neutral) **based on the extracted value.**\\n    - Explain how the extracted RSI value and its trend either support or oppose the ongoing price trend.\\n    - Identify any divergences between RSI values and price movement **that can be discerned from the chart.**\\n\\n3. **Stochastic RSI Scrutiny(Stoch RSI)**:\\n    - **Extract the numerical values of the Stochastic RSI's K and D lines from the chart.**\\n    - Detail the present values of the K and D lines **based on the extracted numerical data.**\\n    - Analyze any crossovers or divergences observed between the K and D lines **based on the extracted values and their visual representation.**\\n    - Explain how the extracted Stochastic RSI readings and their relationship either support or oppose the prevailing market momentum.\\n\\n\\nDeliver your analysis with clarity, precision, and an emphasis on data. Your objective is to furnish traders and investors with actionable information that facilitates well-informed decision-making. Always justify your conclusions with clear reasoning derived from the chart.\",\"modelId\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"gpt-4o\",\"cachedResultName\":\"GPT-4O\"},\"options\":{\"detail\":\"auto\"},\"resource\":\"image\",\"simplify\":false,\"inputType\":\"base64\",\"operation\":\"analyze\"},\"credentials\":{\"openAiApi\":{\"id\":\"9RivS2BmSh1DDBFm\",\"name\":\"OpenAI Philipp\"}},\"typeVersion\":1.8},{\"id\":\"92b4c7c2-8f0e-48a1-8ecf-01f74e612657\",\"name\":\"Webhook\",\"type\":\"n8n-nodes-base.webhook\",\"position\":[1300,60],\"webhookId\":\"12a80fbc-ac59-48f3-b6fd-683d7c420995\",\"parameters\":{\"path\":\"12a80fbc-ac59-48f3-b6fd-683d7c420995\",\"options\":{},\"httpMethod\":\"POST\",\"responseMode\":\"lastNode\"},\"typeVersion\":2},{\"id\":\"e1d42095-3bcf-4841-b18c-6f8165576bc7\",\"name\":\"Set Text1\",\"type\":\"n8n-nodes-base.set\",\"position\":[1460,60],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"fe7ecc99-e1e8-4a5e-bdd6-6fce9757b234\",\"name\":\"text\",\"type\":\"string\",\"value\":\"={{ $json.body.text }}\"}]}},\"typeVersion\":3.4},{\"id\":\"5f0649d2-3f7d-42b8-a630-5dfb03035052\",\"name\":\"Save Ticker\",\"type\":\"n8n-nodes-base.airtableTool\",\"position\":[2020,540],\"parameters\":{\"base\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"appXcdIeEEGCEUIti\",\"cachedResultUrl\":\"https://airtable.com/appXcdIeEEGCEUIti\",\"cachedResultName\":\"Trading\"},\"table\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"tblD0HsMed7uPgPsZ\",\"cachedResultUrl\":\"https://airtable.com/appXcdIeEEGCEUIti/tblD0HsMed7uPgPsZ\",\"cachedResultName\":\"Tickers\"},\"columns\":{\"value\":{\"Name\":\"={{ $fromAI(\\\"ticker\\\") }}\"},\"schema\":[{\"id\":\"Name\",\"type\":\"string\",\"display\":true,\"removed\":false,\"readOnly\":false,\"required\":false,\"displayName\":\"Name\",\"defaultMatch\":false,\"canBeUsedToMatch\":true}],\"mappingMode\":\"defineBelow\",\"matchingColumns\":[\"Name\"],\"attemptToConvertTypes\":false,\"convertFieldsToString\":false},\"options\":{},\"operation\":\"create\",\"descriptionType\":\"manual\",\"toolDescription\":\"Use the tool when user asks to save ticker for future reports\"},\"credentials\":{\"airtableTokenApi\":{\"id\":\"XT7hvl1w201jtBhx\",\"name\":\"Philipp Key 2\"}},\"typeVersion\":2.1},{\"id\":\"b4bf95da-8be0-447c-9b83-b1a60ab95d41\",\"name\":\"Loop Over Items\",\"type\":\"n8n-nodes-base.splitInBatches\",\"position\":[1200,1340],\"parameters\":{\"options\":{}},\"typeVersion\":3},{\"id\":\"e7061b7f-8058-430d-bc3c-92efdfa84131\",\"name\":\"Schedule Trigger\",\"type\":\"n8n-nodes-base.scheduleTrigger\",\"position\":[800,1340],\"parameters\":{\"rule\":{\"interval\":[{}]}},\"typeVersion\":1.2},{\"id\":\"4adbd0b3-8246-43a2-b1fb-114add46f35d\",\"name\":\"Run Agent\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[1380,1420],\"parameters\":{\"url\":\"http://localhost:5678/webhook/12a80fbc-ac59-48f3-b6fd-683d7c420995\",\"method\":\"POST\",\"options\":{},\"sendBody\":true,\"sendHeaders\":true,\"bodyParameters\":{\"parameters\":[{\"name\":\"=text\",\"value\":\"=Please analyze {{ $json.Name }} stocks\"}]},\"headerParameters\":{\"parameters\":[{\"name\":\"content-type\",\"value\":\"application/json\"}]}},\"typeVersion\":4.2},{\"id\":\"59c87621-13bb-46fe-94ab-c631654ba0e0\",\"name\":\"Get tokens\",\"type\":\"n8n-nodes-base.airtable\",\"position\":[1000,1340],\"parameters\":{\"base\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"appXcdIeEEGCEUIti\",\"cachedResultUrl\":\"https://airtable.com/appXcdIeEEGCEUIti\",\"cachedResultName\":\"Trading\"},\"table\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"tblD0HsMed7uPgPsZ\",\"cachedResultUrl\":\"https://airtable.com/appXcdIeEEGCEUIti/tblD0HsMed7uPgPsZ\",\"cachedResultName\":\"Tickers\"},\"options\":{},\"operation\":\"search\"},\"credentials\":{\"airtableTokenApi\":{\"id\":\"XT7hvl1w201jtBhx\",\"name\":\"Philipp Key 2\"}},\"typeVersion\":2.1},{\"id\":\"4d44a382-8dd6-4a83-8a02-6e060feb24a8\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[720,20],\"parameters\":{\"color\":4,\"width\":1540,\"height\":780,\"content\":\"## Scenario 1 - AI Agent\"},\"typeVersion\":1},{\"id\":\"60e58a9c-07d1-497a-b65b-8346e7d3f0ca\",\"name\":\"Sticky Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[720,1220],\"parameters\":{\"width\":1540,\"height\":420,\"content\":\"## Scenario 2 - Scheduled analyses\"},\"typeVersion\":1},{\"id\":\"330b32f3-a965-497d-ac1f-807416cfb297\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[720,840],\"parameters\":{\"width\":1540,\"height\":320,\"content\":\"## Scenario 1 - Get Chart \"},\"typeVersion\":1},{\"id\":\"91e34e31-7a13-43b5-934d-af714b238ac7\",\"name\":\"Sticky Note4\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[760,500],\"parameters\":{\"height\":80,\"content\":\"### Replace Telegram connection\"},\"typeVersion\":1},{\"id\":\"fdca89e7-3e31-49f2-b0ed-d703fed3803e\",\"name\":\"Sticky Note5\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1700,700],\"parameters\":{\"height\":80,\"content\":\"### Replace Chat ID\"},\"typeVersion\":1},{\"id\":\"01c9ecc5-6326-45b9-9f2a-863e4518893f\",\"name\":\"Sticky Note6\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1160,860],\"parameters\":{\"color\":3,\"width\":220,\"height\":80,\"content\":\"### Replace API key (header = x-api-key) and  chart settings\"},\"typeVersion\":1},{\"id\":\"322d6cc7-4793-455f-a112-e5e0f1df21d5\",\"name\":\"Sticky Note7\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1780,860],\"parameters\":{\"color\":3,\"width\":220,\"height\":80,\"content\":\"### Replace Chat ID\"},\"typeVersion\":1},{\"id\":\"b33faeeb-d109-4984-927c-fa32878a6384\",\"name\":\"Sticky Note8\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1980,220],\"parameters\":{\"color\":3,\"width\":220,\"height\":80,\"content\":\"### Replace Chat ID\"},\"typeVersion\":1},{\"id\":\"6c11f9e9-f83e-42d3-9c31-3d9c4007b23a\",\"name\":\"Sticky Note11\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[260,620],\"parameters\":{\"color\":7,\"width\":330.5152611046425,\"height\":239.5888196628349,\"content\":\"### ... or watch set up video [11 min]\\n[![Youtube Thumbnail](https://res.cloudinary.com/de9jgixzm/image/upload/v1740845597/Youtube%20Thumbs/Video%2022%20-%20Philipp%20Trading%20Blur.png)](https://youtu.be/94vh6hSiP9s)\\n\"},\"typeVersion\":1},{\"id\":\"09704bed-c71b-4dd1-a843-eb5c2fdb568d\",\"name\":\"Sticky Note9\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-40,620],\"parameters\":{\"color\":7,\"width\":280,\"height\":586,\"content\":\"### Setup\\n\\n1. **Prepare Airtable**:\\n    - Create simple table to store tickers.\\n\\n2. **Prepare Telegram Bot**:\\n    - Ensure your Telegram bot is set up correctly and listening for new messages.\\n\\n3. **Replace Credentials**:\\n    - Update all nodes with the correct credentials and API keys for services involved.\\n\\n4. **Configure API Endpoints**:\\n    - Ensure chart service URLs are correctly set to interact with the corresponding APIs properly.\\n\\n5. **Start Interaction**:\\n    - Message your bot to initiate analysis; specify ticker symbols and desired chart styles as required.\"},\"typeVersion\":1},{\"id\":\"85425ad0-4def-42bb-93e6-107102b86de6\",\"name\":\"Sticky Note12\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-40,20],\"parameters\":{\"color\":7,\"width\":636,\"height\":577,\"content\":\"![5min Logo](https://res.cloudinary.com/de9jgixzm/image/upload/v1739773200/Skool%20Assets/ejm3hqnvhgwpnu2fv92s.png)\\n## How to build AI Agent for Technical Analysis with N8N\\n**Made by [Mark Shcherbakov](https://www.linkedin.com/in/marklowcoding/) from community [5minAI](https://www.skool.com/5minai)**\\n\\nMany traders desire real-time analysis of stock data but lack the technical expertise or tools to perform in-depth analysis. This workflow allows users to easily interact with an AI trading agent through Telegram for seamless stock analysis, chart generation, and technical evaluation, all while eliminating the need for manual interventions.\\n\\nThis workflow utilizes n8n to construct an end-to-end automation process for stock analysis through Telegram communication. The setup involves:\\n- Receiving messages via a Telegram bot.\\n- Processing audio or text messages for trading queries.\\n- Transcribing audio using OpenAI API for interpretation.\\n- Gathering and displaying charts based on user-specified parameters.\\n- Performing technical analysis on generated charts.\\n- Sending back the analyzed results through Telegram.\\n\\n\"},\"typeVersion\":1}],\"pinData\":{},\"connections\":{\"Switch\":{\"main\":[[{\"node\":\"Download File\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Set Text\",\"type\":\"main\",\"index\":0}]]},\"Webhook\":{\"main\":[[{\"node\":\"Set Text1\",\"type\":\"main\",\"index\":0}]]},\"AI Agent\":{\"main\":[[{\"node\":\"Send Analysis\",\"type\":\"main\",\"index\":0}]]},\"Set Text\":{\"main\":[[{\"node\":\"AI Agent\",\"type\":\"main\",\"index\":0}]]},\"Get Chart\":{\"ai_tool\":[[{\"node\":\"AI Agent\",\"type\":\"ai_tool\",\"index\":0}]]},\"Run Agent\":{\"main\":[[{\"node\":\"Loop Over Items\",\"type\":\"main\",\"index\":0}]]},\"Set Text1\":{\"main\":[[{\"node\":\"AI Agent\",\"type\":\"main\",\"index\":0}]]},\"Get tokens\":{\"main\":[[{\"node\":\"Loop Over Items\",\"type\":\"main\",\"index\":0}]]},\"Send Chart\":{\"main\":[[{\"node\":\"response\",\"type\":\"main\",\"index\":0}]]},\"Set Values\":{\"main\":[[{\"node\":\"Get Chart URL\",\"type\":\"main\",\"index\":0}]]},\"Transcribe\":{\"main\":[[{\"node\":\"AI Agent\",\"type\":\"main\",\"index\":0}]]},\"Save Ticker\":{\"ai_tool\":[[{\"node\":\"AI Agent\",\"type\":\"ai_tool\",\"index\":0}]]},\"Download File\":{\"main\":[[{\"node\":\"Transcribe\",\"type\":\"main\",\"index\":0}]]},\"Get Chart URL\":{\"main\":[[{\"node\":\"Download Chart\",\"type\":\"main\",\"index\":0}]]},\"Download Chart\":{\"main\":[[{\"node\":\"Technical Analysis\",\"type\":\"main\",\"index\":0}]]},\"Loop Over Items\":{\"main\":[[],[{\"node\":\"Run Agent\",\"type\":\"main\",\"index\":0}]]},\"Schedule Trigger\":{\"main\":[[{\"node\":\"Get tokens\",\"type\":\"main\",\"index\":0}]]},\"Telegram Trigger\":{\"main\":[[{\"node\":\"Switch\",\"type\":\"main\",\"index\":0}]]},\"OpenAI Chat Model\":{\"ai_languageModel\":[[{\"node\":\"AI Agent\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"Technical Analysis\":{\"main\":[[{\"node\":\"Send Chart\",\"type\":\"main\",\"index\":0}]]},\"Window Buffer Memory\":{\"ai_memory\":[[{\"node\":\"AI Agent\",\"type\":\"ai_memory\",\"index\":0}]]},\"Workflow Input Trigger\":{\"main\":[[{\"node\":\"Set Values\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "### Video Guide\n\nI prepared a detailed guide that demonstrates the complete process of building a trading agent automation using n8n and Telegram, seamlessly integrating various functions for stock analysis.\n\n[![Youtube Thumbnail](https://res.cloudinary.com/de9jgixzm/image/upload/v1740845597/Youtube%20Thumbs/Video%2022%20-%20Philipp%20Trading%20Blur.png)](https://youtu.be/94vh6hSiP9s)\n\n[Youtube Link](https://youtu.be/94vh6hSiP9s)\n\n### Who is this for?\n\nThis workflow is perfect for traders, financial analysts, and developers looking to automate stock analysis interactions via Telegram. It’s especially valuable for those who want to leverage AI tools for technical analysis without needing to write complex code.\n\n### What problem does this workflow solve?\n\nMany traders desire real-time analysis of stock data but lack the technical expertise or tools to perform in-depth analysis. This workflow allows users to easily interact with an AI trading agent through Telegram for seamless stock analysis, chart generation, and technical evaluation, all while eliminating the need for manual interventions.\n\n### What this workflow does\n\nThis workflow utilizes n8n to construct an end-to-end automation process for stock analysis through Telegram communication. The setup involves:\n\n  * Receiving messages via a Telegram bot.\n  * Processing audio or text messages for trading queries.\n  * Transcribing audio using OpenAI API for interpretation.\n  * Gathering and displaying charts based on user-specified parameters.\n  * Performing technical analysis on generated charts.\n  * Sending back the analyzed results through Telegram.\n\n\n\n### Setup\n\n  1. **Prepare Airtable** :\n\n     * Create simple table to store tickers.\n  2. **Prepare Telegram Bot** :\n\n     * Ensure your Telegram bot is set up correctly and listening for new messages.\n  3. **Replace Credentials** :\n\n     * Update all nodes with the correct credentials and API keys for services involved.\n  4. **Configure API Endpoints** :\n\n     * Ensure chart service URLs are correctly set to interact with the corresponding APIs properly.\n  5. **Start Interaction** :\n\n     * Message your bot to initiate analysis; specify ticker symbols and desired chart styles as required.\n\n\n",
  "crawled_at": "2025-05-26T03:36:19.195420",
  "readme_zh": "### 视频指南\n\n我制作了一份详细教程，完整演示如何利用n8n与Telegram构建交易机器人自动化流程，无缝整合股票分析的各项功能。\n\n[![YouTube缩略图](https://res.cloudinary.com/de9jgixzm/image/upload/v1740845597/Youtube%20Thumbs/Video%2022%20-%20Philipp%20Trading%20Blur.png)](https://youtu.be/94vh6hSiP9s)\n\n[YouTube视频链接](https://youtu.be/94vh6hSiP9s)\n\n### 适用人群\n\n本工作流特别适合希望通过Telegram自动化股票分析的交易员、金融分析师和开发者。对于想运用AI工具进行技术分析却不愿编写复杂代码的用户尤其有价值。\n\n### 解决痛点\n\n许多交易者需要实时股票分析，但缺乏专业技术或分析工具。本方案让用户能通过Telegram与AI交易助手交互，轻松完成股票分析、图表生成和技术评估，全程无需人工干预。\n\n### 核心功能\n\n该工作流运用n8n构建了完整的Telegram股票分析自动化流程，包含：\n  * 通过Telegram机器人接收消息\n  * 解析语音/文字交易指令\n  * 调用OpenAI API转换语音为可分析文本\n  * 根据参数生成可视化图表\n  * 对图表进行技术指标分析\n  * 通过Telegram反馈分析结果\n\n### 配置步骤\n\n1. **准备Airtable**：\n   * 创建简易数据表存储股票代码\n   \n2. **配置Telegram机器人**：\n   * 确保机器人已正确设置并开启消息监听\n\n3. **更新凭证信息**：\n   * 替换所有节点中的API密钥和服务凭证\n\n4. **设置API接口**：\n   * 正确配置图表服务的API调用地址\n\n5. **开始交互**：\n   * 向机器人发送包含股票代码和图表类型要求的指令即可启动分析",
  "title_zh": "利用Telegram、Airtable和GPT驱动的AI代理进行技术性股票分析",
  "publish_date_zh": "最后更新于2个月前",
  "workflow_json_zh": "{\n  \"meta\": {\n    \"instanceId\": \"6a2a7715680b8313f7cb4676321c5baa46680adfb913072f089f2766f42e43bd\"\n  },\n  \"nodes\": [\n    {\n      \"id\": \"1340d672-61c8-403e-89a7-f28e3afbc0e7\",\n      \"name\": \"Window Buffer Memory\",\n      \"type\": \"@n8n/n8n-nodes-langchain.memoryBufferWindow\",\n      \"position\": [\n        1760,\n        540\n      ],\n      \"parameters\": {\n        \"sessionKey\": \"=335458847\",\n        \"sessionIdType\": \"customKey\"\n      },\n      \"typeVersion\": 1.3\n    },\n    {\n      \"id\": \"3c770b79-d6c5-4512-94fa-7719af6d0620\",\n      \"name\": \"Get Chart\",\n      \"type\": \"@n8n/n8n-nodes-langchain.toolWorkflow\",\n      \"position\": [\n        1900,\n        560\n      ],\n      \"parameters\": {\n        \"name\": \"getChart\",\n        \"workflowId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"LCT4zHJr8LcjM6a7\",\n          \"cachedResultName\": \"Trading Agent\"\n        },\n        \"description\": \"Call this tool to get an analysis of a requested stock. The URL that is output from this tool must be returned in markdown format. For example, ![](url)\\n\\nIt'll be obligatory to pass ticker and chart style. Both can be specified by user. If chart style is not specified by user, use \\\"candle\\\" as default. Possible options for style: [bar, candle, line, area, heikinAshi, hollowCandle, baseline, hiLo, column]\",\n        \"workflowInputs\": {\n          \"value\": {\n            \"ticker\": \"={{ $fromAI(\\\"ticker\\\") }}\",\n            \"chart_style\": \"={{ $fromAI(\\\"chart_style\\\") }}\"\n          },\n          \"schema\": [\n            {\n              \"id\": \"ticker\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"ticker\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"chart_style\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"chart_style\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            }\n          ],\n          \"mappingMode\": \"defineBelow\",\n          \"matchingColumns\": [],\n          \"attemptToConvertTypes\": false,\n          \"convertFieldsToString\": false\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"a44b48ac-9bfc-4988-81d7-177357971558\",\n      \"name\": \"AI Agent\",\n      \"type\": \"@n8n/n8n-nodes-langchain.agent\",\n      \"position\": [\n        1660,\n        320\n      ],\n      \"parameters\": {\n        \"text\": \"={{ $json.text }}\",\n        \"options\": {\n          \"systemMessage\": \"=# Overview  \\n\\nYou are an AI agent specializing in  analyzing stocks. You can perform technical analysis using the **GetChart** tool to generate stock graphs.  \\n\\n\\n# Instructions \\n\\n1. Begin by offering a warm and professional greeting.\\n2. Maintain a conversational style when discussing finance and stock markets.\\n3. If a user requests technical analysis of a stock, supplying its ticker:\\n- Send only the stock ticker to the GetChart tool.\\n- Present the chart's analysis and insights in a conversational format.\\n4. When addressing financial subjects, provide thorough, easy-to-understand explanations suitable for the user's knowledge.\\n5. Refrain from giving direct financial recommendations(buy or sell) or making predictions.\\n\\n\\n## Tools  \\n\\n- **GetChart**: Used for generating stock graphs based on provided tickers.  \\n\\n## Standard Operating Procedure\\n\\n1. Interact with the user: Maintain a professional and approachable demeanor.\\n2. Conduct stock analysis:\\n- Upon request for technical analysis, send the stock's ticker symbol to the GetChart tool.\\n- Present the chart's findings in an easy-to-understand, conversational manner.\\n3. Clarify financial topics: Simplify intricate terms into accessible explanations suitable for the user's knowledge level.\\n4. Refrain from offering financial recommendations: Deliver information and analysis without suggesting specific actions.\\n5. Verify user understanding: Ask clarifying questions to ensure all needs are met.\"\n        },\n        \"promptType\": \"define\"\n      },\n      \"typeVersion\": 1.7\n    },\n    {\n      \"id\": \"a6d405f0-52c5-4937-85cd-7ef6e4a596b6\",\n      \"name\": \"Telegram Trigger\",\n      \"type\": \"n8n-nodes-base.telegramTrigger\",\n      \"position\": [\n        760,\n        320\n      ],\n      \"webhookId\": \"dbf7f0b7-5cdd-45a3-8c91-39f0665aba76\",\n      \"parameters\": {\n        \"updates\": [\n          \"message\"\n        ],\n        \"additionalFields\": {}\n      },\n      \"credentials\": {\n        \"telegramApi\": {\n          \"id\": \"UajcuBAYm5PEbptW\",\n          \"name\": \"Telegram Philipp\"\n        }\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"22bd61a2-45cb-4074-a027-28a9a0d327f5\",\n      \"name\": \"Send Analysis\",\n      \"type\": \"n8n-nodes-base.telegram\",\n      \"position\": [\n        2040,\n        320\n      ],\n      \"webhookId\": \"949b8c67-29b9-4714-8a42-b0e59e91ae10\",\n      \"parameters\": {\n        \"text\": \"={{ $json.output }}\",\n        \"chatId\": \"=335458847\",\n        \"additionalFields\": {\n          \"appendAttribution\": false\n        }\n      },\n      \"credentials\": {\n        \"telegramApi\": {\n          \"id\": \"UajcuBAYm5PEbptW\",\n          \"name\": \"Telegram Philipp\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"6f18a794-c302-47c3-8516-d14597408ae7\",\n      \"name\": \"Workflow Input Trigger\",\n      \"type\": \"n8n-nodes-base.executeWorkflowTrigger\",\n      \"position\": [\n        780,\n        960\n      ],\n      \"parameters\": {\n        \"workflowInputs\": {\n          \"values\": [\n            {\n              \"name\": \"ticker\"\n            },\n            {\n              \"name\": \"chart_style\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"102a021b-c0bb-4bdb-bca1-a4f0f7a84687\",\n      \"name\": \"response\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        2040,\n        960\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"fdf7e016-7082-4146-9038-454139023990\",\n              \"name\": \"response\",\n              \"type\": \"string\",\n              \"value\": \"={{ $('Technical Analysis').item.json.choices[0].message.content }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"ba96d38a-5a12-44a0-927f-5893cd91ac9b\",\n      \"name\": \"Download Chart\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1440,\n        960\n      ],\n      \"parameters\": {\n        \"url\": \"={{ $json.url }}\",\n        \"options\": {}\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"7deaf5b4-0280-46d2-b9f8-4d14a67f60b6\",\n      \"name\": \"Get Chart URL\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1220,\n        960\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.chart-img.com/v2/tradingview/advanced-chart/storage\",\n        \"method\": \"POST\",\n        \"options\": {\n          \"response\": {\n            \"response\": {\n              \"responseFormat\": \"json\"\n            }\n          }\n        },\n        \"jsonBody\": \"={\\n  \\\"style\\\": \\\"{{ $json.chart_style }}\\\",\\n  \\\"theme\\\": \\\"light\\\",\\n  \\\"interval\\\": \\\"1W\\\",\\n  \\\"symbol\\\": \\\"NASDAQ:{{ $json.ticker }}\\\",\\n  \\\"override\\\": {\\n    \\\"showStudyLastValue\\\": false\\n  },\\n  \\\"studies\\\": [\\n    {\\n      \\\"name\\\": \\\"Volume\\\",\\n      \\\"forceOverlay\\\": true\\n    },\\n{\\n      \\\"name\\\": \\\"Relative Strength Index\\\"\\n    },\\n{\\n      \\\"name\\\": \\\"Stochastic RSI\\\"\\n}\\n  ]\\n}\",\n        \"sendBody\": true,\n        \"sendHeaders\": true,\n        \"specifyBody\": \"json\",\n        \"authentication\": \"genericCredentialType\",\n        \"genericAuthType\": \"httpHeaderAuth\",\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"Content-Type\",\n              \"value\": \"application/json\"\n            }\n          ]\n        }\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": {\n          \"id\": \"Go406nynVPn88QIS\",\n          \"name\": \"Header Auth account 3\"\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"46ebe865-b13b-4d7d-8acf-a10d78ba4b5b\",\n      \"name\": \"Send Chart\",\n      \"type\": \"n8n-nodes-base.telegram\",\n      \"position\": [\n        1840,\n        960\n      ],\n      \"webhookId\": \"a42b988a-cd3a-4cf0-8975-7a38c8b510ba\",\n      \"parameters\": {\n        \"file\": \"={{ $('Get Chart URL').item.json.url }}\",\n        \"chatId\": \"335458847\",\n        \"operation\": \"sendPhoto\",\n        \"additionalFields\": {}\n      },\n      \"credentials\": {\n        \"telegramApi\": {\n          \"id\": \"UajcuBAYm5PEbptW\",\n          \"name\": \"Telegram Philipp\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"e5a62237-af1e-42dd-befd-51aa0e0a0c08\",\n      \"name\": \"OpenAI Chat Model\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\n      \"position\": [\n        1600,\n        540\n      ],\n      \"parameters\": {\n        \"model\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gpt-4o\",\n          \"cachedResultName\": \"gpt-4o\"\n        },\n        \"options\": {}\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"9RivS2BmSh1DDBFm\",\n          \"name\": \"OpenAI Philipp\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"c3d63b6f-5908-4e64-9063-1910024b0ed4\",\n      \"name\": \"Switch\",\n      \"type\": \"n8n-nodes-base.switch\",\n      \"position\": [\n        940,\n        320\n      ],\n      \"parameters\": {\n        \"rules\": {\n          \"values\": [\n            {\n              \"outputKey\": \"Voice\",\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 2,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"operator\": {\n                      \"type\": \"string\",\n                      \"operation\": \"exists\",\n                      \"singleValue\": true\n                    },\n                    \"leftValue\": \"={{ $json.message.voice.file_id }}\",\n                    \"rightValue\": \"\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            },\n            {\n              \"outputKey\": \"Text\",\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 2,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"8c844924-b2ed-48b0-935c-c66a8fd0c778\",\n                    \"operator\": {\n                      \"type\": \"string\",\n                      \"operation\": \"exists\",\n                      \"singleValue\": true\n                    },\n                    \"leftValue\": \"={{ $json.message.text }}\",\n                    \"rightValue\": \"\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            }\n          ]\n        },\n        \"options\": {}\n      },\n      \"typeVersion\": 3.2\n    },\n    {\n      \"id\": \"1d27102b-47c9-4aa7-a93c-71699326960d\",\n      \"name\": \"Transcribe\",\n      \"type\": \"@n8n/n8n-nodes-langchain.openAi\",\n      \"position\": [\n        1460,\n        240\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"resource\": \"audio\",\n        \"operation\": \"transcribe\"\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"9RivS2BmSh1DDBFm\",\n          \"name\": \"OpenAI Philipp\"\n        }\n      },\n      \"typeVersion\": 1.6\n    },\n    {\n      \"id\": \"1252b926-9965-4499-a539-3c7e2a7eb151\",\n      \"name\": \"Download File\",\n      \"type\": \"n8n-nodes-base.telegram\",\n      \"position\": [\n        1300,\n        240\n      ],\n      \"webhookId\": \"83bb7385-33f6-4105-8294-1a91c0ebbee5\",\n      \"parameters\": {\n        \"fileId\": \"={{ $json.message.voice.file_id }}\",\n        \"resource\": \"file\"\n      },\n      \"credentials\": {\n        \"telegramApi\": {\n          \"id\": \"UajcuBAYm5PEbptW\",\n          \"name\": \"Telegram Philipp\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"3777f861-d933-4a95-af74-2e787beda709\",\n      \"name\": \"Set Text\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        1360,\n        440\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"fe7ecc99-e1e8-4a5e-bdd6-6fce9757b234\",\n              \"name\": \"text\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.message.text }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"5630eed3-7b99-400f-ad54-bf72c7e52570\",\n      \"name\": \"Set Values\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        1000,\n        960\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"cf5f7210-5b54-4f4a-abf7-87873be82df4\",\n              \"name\": \"ticker\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.ticker }}\"\n            },\n            {\n              \"id\": \"12a27443-a009-4bd5-b33f-bcec74aa74c7\",\n              \"name\": \"chart_style\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.chart_style }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"534cad9e-b3b8-4435-9db4-d7d22adfa305\",\n      \"name\": \"Technical Analysis\",\n      \"type\": \"@n8n/n8n-nodes-langchain.openAi\",\n      \"position\": [\n        1640,\n        960\n      ],\n      \"parameters\": {\n        \"text\": \"=# Professional Role\\n\\nYou are a financial analyst, specializing in the interpretive analysis of stock charts. Your primary responsibility is to scrutinize provided financial charts and deliver comprehensive assessments of their technical dimensions. This includes examining candlestick formations, Moving Average Convergence Divergence (MACD) metrics, trading volume patterns, **Relative Strength Index (RSI), Stochastic RSI**, and prevailing market sentiment. Your analysis should be a thorough dissection of the chart, pinpointing critical areas and offering practical insights.\\n\\nWhen evaluating a stock chart, ensure the inclusion of the following:\\n\\n1. **Candlestick Pattern Interpretation**:\\n    - Recognize and articulate the significance of any notable candlestick formations (e.g., bullish engulfing, doji, hammer).\\n    - Provide commentary on the prevailing market direction (upward, downward, or lateral).\\n    - Identify potential zones for price surges or retracements.\\n\\n2. **Relative Strength Index (RSI) Examination**:\\n    - **Extract the numerical RSI value from the chart.**\\n    - Describe the current RSI value and its market positioning (e.g., overbought, oversold, neutral) **based on the extracted value.**\\n    - Explain how the extracted RSI value and its trend either support or oppose the ongoing price trend.\\n    - Identify any divergences between RSI values and price movement **that can be discerned from the chart.**\\n\\n3. **Stochastic RSI Scrutiny(Stoch RSI)**:\\n    - **Extract the numerical values of the Stochastic RSI's K and D lines from the chart.**\\n    - Detail the present values of the K and D lines **based on the extracted numerical data.**\\n    - Analyze any crossovers or divergences observed between the K and D lines **based on the extracted values and their visual representation.**\\n    - Explain how the extracted Stochastic RSI readings and their relationship either support or oppose the prevailing market momentum.\\n\\n\\nDeliver your analysis with clarity, precision, and an emphasis on data. Your objective is to furnish traders and investors with actionable information that facilitates well-informed decision-making. Always justify your conclusions with clear reasoning derived from the chart.\",\n        \"modelId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gpt-4o\",\n          \"cachedResultName\": \"GPT-4O\"\n        },\n        \"options\": {\n          \"detail\": \"auto\"\n        },\n        \"resource\": \"image\",\n        \"simplify\": false,\n        \"inputType\": \"base64\",\n        \"operation\": \"analyze\"\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"9RivS2BmSh1DDBFm\",\n          \"name\": \"OpenAI Philipp\"\n        }\n      },\n      \"typeVersion\": 1.8\n    },\n    {\n      \"id\": \"92b4c7c2-8f0e-48a1-8ecf-01f74e612657\",\n      \"name\": \"Webhook\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"position\": [\n        1300,\n        60\n      ],\n      \"webhookId\": \"12a80fbc-ac59-48f3-b6fd-683d7c420995\",\n      \"parameters\": {\n        \"path\": \"12a80fbc-ac59-48f3-b6fd-683d7c420995\",\n        \"options\": {},\n        \"httpMethod\": \"POST\",\n        \"responseMode\": \"lastNode\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"e1d42095-3bcf-4841-b18c-6f8165576bc7\",\n      \"name\": \"Set Text1\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        1460,\n        60\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"fe7ecc99-e1e8-4a5e-bdd6-6fce9757b234\",\n              \"name\": \"text\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.body.text }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"5f0649d2-3f7d-42b8-a630-5dfb03035052\",\n      \"name\": \"Save Ticker\",\n      \"type\": \"n8n-nodes-base.airtableTool\",\n      \"position\": [\n        2020,\n        540\n      ],\n      \"parameters\": {\n        \"base\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"appXcdIeEEGCEUIti\",\n          \"cachedResultUrl\": \"https://airtable.com/appXcdIeEEGCEUIti\",\n          \"cachedResultName\": \"Trading\"\n        },\n        \"table\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"tblD0HsMed7uPgPsZ\",\n          \"cachedResultUrl\": \"https://airtable.com/appXcdIeEEGCEUIti/tblD0HsMed7uPgPsZ\",\n          \"cachedResultName\": \"Tickers\"\n        },\n        \"columns\": {\n          \"value\": {\n            \"Name\": \"={{ $fromAI(\\\"ticker\\\") }}\"\n          },\n          \"schema\": [\n            {\n              \"id\": \"Name\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"readOnly\": false,\n              \"required\": false,\n              \"displayName\": \"Name\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            }\n          ],\n          \"mappingMode\": \"defineBelow\",\n          \"matchingColumns\": [\n            \"Name\"\n          ],\n          \"attemptToConvertTypes\": false,\n          \"convertFieldsToString\": false\n        },\n        \"options\": {},\n        \"operation\": \"create\",\n        \"descriptionType\": \"manual\",\n        \"toolDescription\": \"Use the tool when user asks to save ticker for future reports\"\n      },\n      \"credentials\": {\n        \"airtableTokenApi\": {\n          \"id\": \"XT7hvl1w201jtBhx\",\n          \"name\": \"Philipp Key 2\"\n        }\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"b4bf95da-8be0-447c-9b83-b1a60ab95d41\",\n      \"name\": \"Loop Over Items\",\n      \"type\": \"n8n-nodes-base.splitInBatches\",\n      \"position\": [\n        1200,\n        1340\n      ],\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"e7061b7f-8058-430d-bc3c-92efdfa84131\",\n      \"name\": \"Schedule Trigger\",\n      \"type\": \"n8n-nodes-base.scheduleTrigger\",\n      \"position\": [\n        800,\n        1340\n      ],\n      \"parameters\": {\n        \"rule\": {\n          \"interval\": [\n            {}\n          ]\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"4adbd0b3-8246-43a2-b1fb-114add46f35d\",\n      \"name\": \"Run Agent\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1380,\n        1420\n      ],\n      \"parameters\": {\n        \"url\": \"http://localhost:5678/webhook/12a80fbc-ac59-48f3-b6fd-683d7c420995\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"sendBody\": true,\n        \"sendHeaders\": true,\n        \"bodyParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"=text\",\n              \"value\": \"=Please analyze {{ $json.Name }} stocks\"\n            }\n          ]\n        },\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"content-type\",\n              \"value\": \"application/json\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"59c87621-13bb-46fe-94ab-c631654ba0e0\",\n      \"name\": \"Get tokens\",\n      \"type\": \"n8n-nodes-base.airtable\",\n      \"position\": [\n        1000,\n        1340\n      ],\n      \"parameters\": {\n        \"base\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"appXcdIeEEGCEUIti\",\n          \"cachedResultUrl\": \"https://airtable.com/appXcdIeEEGCEUIti\",\n          \"cachedResultName\": \"Trading\"\n        },\n        \"table\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"tblD0HsMed7uPgPsZ\",\n          \"cachedResultUrl\": \"https://airtable.com/appXcdIeEEGCEUIti/tblD0HsMed7uPgPsZ\",\n          \"cachedResultName\": \"Tickers\"\n        },\n        \"options\": {},\n        \"operation\": \"search\"\n      },\n      \"credentials\": {\n        \"airtableTokenApi\": {\n          \"id\": \"XT7hvl1w201jtBhx\",\n          \"name\": \"Philipp Key 2\"\n        }\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"4d44a382-8dd6-4a83-8a02-6e060feb24a8\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        720,\n        20\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 1540,\n        \"height\": 780,\n        \"content\": \"## 场景一 - AI智能体\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"60e58a9c-07d1-497a-b65b-8346e7d3f0ca\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        720,\n        1220\n      ],\n      \"parameters\": {\n        \"width\": 1540,\n        \"height\": 420,\n        \"content\": \"## 场景二 - 定期分析\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"330b32f3-a965-497d-ac1f-807416cfb297\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        720,\n        840\n      ],\n      \"parameters\": {\n        \"width\": 1540,\n        \"height\": 320,\n        \"content\": \"## 场景一 - 获取图表\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"91e34e31-7a13-43b5-934d-af714b238ac7\",\n      \"name\": \"Sticky Note4\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        760,\n        500\n      ],\n      \"parameters\": {\n        \"height\": 80,\n        \"content\": \"### 更换Telegram连接方式\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"fdca89e7-3e31-49f2-b0ed-d703fed3803e\",\n      \"name\": \"Sticky Note5\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1700,\n        700\n      ],\n      \"parameters\": {\n        \"height\": 80,\n        \"content\": \"### 替换聊天ID\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"01c9ecc5-6326-45b9-9f2a-863e4518893f\",\n      \"name\": \"Sticky Note6\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1160,\n        860\n      ],\n      \"parameters\": {\n        \"color\": 3,\n        \"width\": 220,\n        \"height\": 80,\n        \"content\": \"### 替换API密钥（请求头为x-api-key）和图表设置\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"322d6cc7-4793-455f-a112-e5e0f1df21d5\",\n      \"name\": \"Sticky Note7\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1780,\n        860\n      ],\n      \"parameters\": {\n        \"color\": 3,\n        \"width\": 220,\n        \"height\": 80,\n        \"content\": \"### 替换聊天ID\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"b33faeeb-d109-4984-927c-fa32878a6384\",\n      \"name\": \"Sticky Note8\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1980,\n        220\n      ],\n      \"parameters\": {\n        \"color\": 3,\n        \"width\": 220,\n        \"height\": 80,\n        \"content\": \"### 替换聊天ID\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"6c11f9e9-f83e-42d3-9c31-3d9c4007b23a\",\n      \"name\": \"Sticky Note11\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        260,\n        620\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 330.5152611046425,\n        \"height\": 239.5888196628349,\n        \"content\": \"### ...或观看安装视频 [11分钟]\\n[![YouTube缩略图](https://res.cloudinary.com/de9jgixzm/image/upload/v1740845597/Youtube%20Thumbs/Video%2022%20-%20Philipp%20Trading%20Blur.png)](https://youtu.be/94vh6hSiP9s)\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"09704bed-c71b-4dd1-a843-eb5c2fdb568d\",\n      \"name\": \"Sticky Note9\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -40,\n        620\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 280,\n        \"height\": 586,\n        \"content\": \"### 设置步骤\\n\\n1. **准备Airtable**：\\n    - 创建简易数据表用于存储股票代码。\\n\\n2. **配置Telegram机器人**：\\n    - 确保机器人已正确设置并能监听新消息。\\n\\n3. **更新凭证信息**：\\n    - 替换所有节点中涉及服务的有效凭证和API密钥。\\n\\n4. **配置API接口**：\\n    - 确保图表服务URL正确设置，以正常对接相应API。\\n\\n5. **开始交互**：\\n    - 向机器人发送消息启动分析功能；按要求指定股票代码和所需图表样式。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"85425ad0-4def-42bb-93e6-107102b86de6\",\n      \"name\": \"Sticky Note12\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -40,\n        20\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 636,\n        \"height\": 577,\n        \"content\": \"![5分钟Logo](https://res.cloudinary.com/de9jgixzm/image/upload/v1739773200/Skool%20Assets/ejm3hqnvhgwpnu2fv92s.png)\\n## 如何用N8N构建技术分析AI智能体\\n**由[5minAI社区](https://www.skool.com/5minai)的[Mark Shcherbakov](https://www.linkedin.com/in/marklowcoding/)制作**\\n\\n许多交易者渴望实时分析股票数据，但缺乏专业技术知识或工具进行深度分析。本工作流让用户能通过Telegram轻松与AI交易助手互动，实现无缝的股票分析、图表生成和技术评估，全程无需人工干预。\\n\\n该方案运用n8n构建了通过Telegram通信的端到端股票分析自动化流程，具体包含：\\n- 通过Telegram机器人接收消息\\n- 解析语音或文字形式的交易查询\\n- 调用OpenAI API转录并解读语音指令\\n- 根据用户参数获取并展示股票图表\\n- 对生成图表执行技术指标分析\\n- 通过Telegram反馈分析结果\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"Switch\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Download File\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Set Text\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Webhook\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set Text1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"AI Agent\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Send Analysis\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Set Text\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get Chart\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Run Agent\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Loop Over Items\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Set Text1\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get tokens\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Loop Over Items\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Send Chart\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"response\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Set Values\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get Chart URL\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Transcribe\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Save Ticker\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Download File\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Transcribe\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get Chart URL\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Download Chart\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Download Chart\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Technical Analysis\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Loop Over Items\": {\n      \"main\": [\n        [],\n        [\n          {\n            \"node\": \"Run Agent\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Schedule Trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get tokens\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Telegram Trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Switch\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"OpenAI Chat Model\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Technical Analysis\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Send Chart\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Window Buffer Memory\": {\n      \"ai_memory\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"ai_memory\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Workflow Input Trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set Values\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}