{
  "url": "https://n8n.io/workflows/3636-build-your-own-qdrant-vector-store-mcp-server/",
  "title": "Build your own Qdrant Vector Store MCP server",
  "author": "Jimleuk",
  "publish_date": "Last update a month ago",
  "publish_date_absolute": "",
  "categories": [
    {
      "name": "Building Blocks"
    },
    {
      "name": "AI"
    }
  ],
  "workflow_json": "{\"meta\":{\"instanceId\":\"408f9fb9940c3cb18ffdef0e0150fe342d6e655c3a9fac21f0f644e8bedabcd9\",\"templateCredsSetupCompleted\":true},\"nodes\":[{\"id\":\"49620d3a-d4ec-4017-ade1-ff2ef5473c11\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-220,-80],\"parameters\":{\"color\":7,\"width\":680,\"height\":660,\"content\":\"## 1. Set up an MCP Server Trigger\\n[Read more about the MCP Server Trigger](https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-langchain.mcptrigger)\"},\"typeVersion\":1},{\"id\":\"f0646a81-d328-4f07-a744-60f576b5a51e\",\"name\":\"Insert\",\"type\":\"@n8n/n8n-nodes-langchain.toolWorkflow\",\"position\":[-40,380],\"parameters\":{\"name\":\"insert_review\",\"workflowId\":{\"__rl\":true,\"mode\":\"id\",\"value\":\"={{ $workflow.id }}\"},\"description\":\"=Call this tool to insert a customer's review into our review database.\",\"workflowInputs\":{\"value\":{\"text\":\"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('text', `The contents of the review`, 'string') }}\",\"text2\":\"null\",\"operation\":\"insert\",\"companyIds\":\"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('companyIds', `The company ID is their url address.`, 'string') }}\"},\"schema\":[{\"id\":\"operation\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"operation\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"text\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"text\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"text2\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"text2\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"companyIds\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"companyIds\",\"defaultMatch\":false,\"canBeUsedToMatch\":true}],\"mappingMode\":\"defineBelow\",\"matchingColumns\":[],\"attemptToConvertTypes\":false,\"convertFieldsToString\":false}},\"typeVersion\":2.1},{\"id\":\"21e8beac-dbd5-44d7-8472-4edff3f63308\",\"name\":\"Search\",\"type\":\"@n8n/n8n-nodes-langchain.toolWorkflow\",\"position\":[80,440],\"parameters\":{\"name\":\"search_reviews\",\"workflowId\":{\"__rl\":true,\"mode\":\"id\",\"value\":\"={{ $workflow.id }}\",\"cachedResultName\":\"={{ $workflow.id }}\"},\"description\":\"Call this tool to search our reviews database.\",\"workflowInputs\":{\"value\":{\"text\":\"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('text', `the query or search terms to use`, 'string') }}\",\"text2\":\"null\",\"operation\":\"search\",\"companyIds\":\"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('companyIds', `Optional, leave blank to search over all companies otherwise one or more company IDs comma-delimited. The company ID is their url address.`, 'string') }}\"},\"schema\":[{\"id\":\"operation\",\"type\":\"string\",\"display\":true,\"required\":false,\"displayName\":\"operation\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"text\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"text\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"text2\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"text2\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"companyIds\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"companyIds\",\"defaultMatch\":false,\"canBeUsedToMatch\":true}],\"mappingMode\":\"defineBelow\",\"matchingColumns\":[],\"attemptToConvertTypes\":false,\"convertFieldsToString\":false}},\"typeVersion\":2.1},{\"id\":\"ffb100a4-9108-4ccd-a897-e5cd9e752232\",\"name\":\"Recommend\",\"type\":\"@n8n/n8n-nodes-langchain.toolWorkflow\",\"position\":[280,240],\"parameters\":{\"name\":\"recommend_reviews\",\"workflowId\":{\"__rl\":true,\"mode\":\"id\",\"value\":\"={{ $workflow.id }}\"},\"description\":\"Call this tool to generate a recommendation for a review based on positive and/or negative preferences.\",\"workflowInputs\":{\"value\":{\"text\":\"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('text', `preferences to include.`, 'string') }}\",\"text2\":\"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('text2', `preference to avoid.`, 'string') }}\",\"operation\":\"recommend\",\"companyIds\":\"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('companyIds', `Optional, leave blank to search across all reviews otherwise one or more company IDs, comma-delimited. The company ID is their url address.`, 'string') }}\"},\"schema\":[{\"id\":\"operation\",\"type\":\"string\",\"display\":true,\"required\":false,\"displayName\":\"operation\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"text\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"text\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"text2\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"text2\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"companyIds\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"companyIds\",\"defaultMatch\":false,\"canBeUsedToMatch\":true}],\"mappingMode\":\"defineBelow\",\"matchingColumns\":[],\"attemptToConvertTypes\":false,\"convertFieldsToString\":false}},\"typeVersion\":2.1},{\"id\":\"d1d53cbc-0a22-409d-9336-d8c98eeaa170\",\"name\":\"Qdrant MCP Server\",\"type\":\"@n8n/n8n-nodes-langchain.mcpTrigger\",\"position\":[-40,60],\"webhookId\":\"a1aff1b5-e5c7-4ca2-91eb-017c1fe32dab\",\"parameters\":{\"path\":\"a1aff1b5-e5c7-4ca2-91eb-017c1fe32dab\"},\"typeVersion\":1},{\"id\":\"82d747a5-ff5f-44ff-9f68-cc1aa01ba1de\",\"name\":\"When Executed by Another Workflow\",\"type\":\"n8n-nodes-base.executeWorkflowTrigger\",\"position\":[540,280],\"parameters\":{\"workflowInputs\":{\"values\":[{\"name\":\"operation\"},{\"name\":\"text\"},{\"name\":\"text2\"},{\"name\":\"companyIds\"}]}},\"typeVersion\":1.1},{\"id\":\"c7a2e948-5cd5-4545-a633-c1157e63edec\",\"name\":\"Operation\",\"type\":\"n8n-nodes-base.switch\",\"position\":[760,240],\"parameters\":{\"rules\":{\"values\":[{\"outputKey\":\"listCompanies\",\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"fe782b0f-f501-4985-a9d2-f63f4019177f\",\"operator\":{\"name\":\"filter.operator.equals\",\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"={{ $json.operation }}\",\"rightValue\":\"listCompanies\"}]},\"renameOutput\":true},{\"outputKey\":\"insert\",\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"81b134bc-d671-4493-b3ad-8df9be3f49a6\",\"operator\":{\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"={{ $json.operation }}\",\"rightValue\":\"insert\"}]},\"renameOutput\":true},{\"outputKey\":\"search\",\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"8d57914f-6587-4fb3-88e0-aa1de6ba56c1\",\"operator\":{\"name\":\"filter.operator.equals\",\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"={{ $json.operation }}\",\"rightValue\":\"search\"}]},\"renameOutput\":true},{\"outputKey\":\"compare\",\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"7c38f238-213a-46ec-aefe-22e0bcb8dffc\",\"operator\":{\"name\":\"filter.operator.equals\",\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"={{ $json.operation }}\",\"rightValue\":\"compare\"}]},\"renameOutput\":true},{\"outputKey\":\"recommend\",\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"2c691501-786a-433f-a185-3a6e0d08d336\",\"operator\":{\"name\":\"filter.operator.equals\",\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"={{ $json.operation }}\",\"rightValue\":\"recommend\"}]},\"renameOutput\":true}]},\"options\":{}},\"typeVersion\":3.2},{\"id\":\"18d805db-376c-4583-963a-db1e5d09aa50\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[480,-140],\"parameters\":{\"color\":7,\"width\":580,\"height\":320,\"content\":\"## 2. Expand Functionality Beyond Vendor Implementation\\n[Read more about the Qdrant Node](https://docs.n8n.io/integrations/builtin/cluster-nodes/root-nodes/n8n-nodes-langchain.vectorstoreqdrant)\\n\\nOfficially supported MCP servers are cool but may not always have the features you want. N8N MCP servers give you the freedom to expand and customise to fit your business or product needs and requirements.\\n\\nFor our Qdrant MCP server, we've added 2 additional capabilities from the Qdrant API; The Group Search and Recommendation API. With these, we can explore many more use-cases for our users.\\n\"},\"typeVersion\":1},{\"id\":\"ab8aeea3-0564-4c96-a67c-ff319df3297b\",\"name\":\"Compare\",\"type\":\"@n8n/n8n-nodes-langchain.toolWorkflow\",\"position\":[220,380],\"parameters\":{\"name\":\"compare_reviews\",\"workflowId\":{\"__rl\":true,\"mode\":\"id\",\"value\":\"={{ $workflow.id }}\",\"cachedResultName\":\"={{ $workflow.id }}\"},\"description\":\"Call this tool to compare search results across 2 or more companies.\",\"workflowInputs\":{\"value\":{\"text\":\"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('text', `the query or search terms to use`, 'string') }}\",\"text2\":\"null\",\"operation\":\"compare\",\"companyIds\":\"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('companyIds', `Two or more company IDs, comma-delimited. The company ID is their url address.`, 'string') }}\"},\"schema\":[{\"id\":\"operation\",\"type\":\"string\",\"display\":true,\"required\":false,\"displayName\":\"operation\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"text\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"text\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"text2\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"text2\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"companyIds\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"companyIds\",\"defaultMatch\":false,\"canBeUsedToMatch\":true}],\"mappingMode\":\"defineBelow\",\"matchingColumns\":[],\"attemptToConvertTypes\":false,\"convertFieldsToString\":false}},\"typeVersion\":2.1},{\"id\":\"4f0876cb-dc07-486e-937b-334fa2cb754f\",\"name\":\"Sticky Note8\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1920,860],\"parameters\":{\"width\":213.30551928619226,\"height\":332.38559808882246,\"content\":\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n### 🚨Configure Your Qdrant Connection\\n* Be sure to enter your endpoint address\"},\"typeVersion\":1},{\"id\":\"02031bac-016f-4715-8413-6255cf73e103\",\"name\":\"Recommend API\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[1980,900],\"parameters\":{\"url\":\"=http://qdrant:6333/collections/trustpilot_reviews/points/recommend\",\"method\":\"POST\",\"options\":{},\"sendBody\":true,\"authentication\":\"predefinedCredentialType\",\"bodyParameters\":{\"parameters\":[{\"name\":\"strategy\",\"value\":\"average_vector\"},{\"name\":\"limit\",\"value\":\"={{ 3 }}\"},{\"name\":\"positive\",\"value\":\"={{ [$json.embeddings[0]] }}\"},{\"name\":\"negative\",\"value\":\"={{ [$json.embeddings[1]] }}\"},{\"name\":\"filter\",\"value\":\"={{\\n$('Operation').first().json.companyIds\\n  ? {\\n    \\\"must\\\": {\\n      \\\"key\\\": \\\"metadata.company_id\\\",\\n      \\\"match\\\": {\\n        \\\"any\\\": $('Operation').first().json.companyIds.split(',')\\n      }\\n    }\\n  }\\n  : {}\\n}}\"},{\"name\":\"with_payload\",\"value\":\"={{ true }}\"}]},\"nodeCredentialType\":\"qdrantApi\"},\"credentials\":{\"qdrantApi\":{\"id\":\"NyinAS3Pgfik66w5\",\"name\":\"QdrantApi account\"}},\"typeVersion\":4.2},{\"id\":\"9d058dae-2f24-4e34-bdb6-ba5649a3b431\",\"name\":\"Get Embeddings\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[1580,900],\"parameters\":{\"url\":\"https://api.openai.com/v1/embeddings\",\"method\":\"POST\",\"options\":{},\"sendBody\":true,\"authentication\":\"predefinedCredentialType\",\"bodyParameters\":{\"parameters\":[{\"name\":\"input\",\"value\":\"={{ $json.text }}\"},{\"name\":\"model\",\"value\":\"text-embedding-3-small\"}]},\"nodeCredentialType\":\"openAiApi\"},\"credentials\":{\"openAiApi\":{\"id\":\"8gccIjcuf3gvaoEr\",\"name\":\"OpenAi account\"}},\"typeVersion\":4.2},{\"id\":\"dfbb9a02-91dd-4dc4-8738-0aff41db2156\",\"name\":\"Preferences to Items\",\"type\":\"n8n-nodes-base.code\",\"position\":[1380,900],\"parameters\":{\"jsCode\":\"return [\\n  { text: $input.first().json.text },\\n  { text: $input.first().json.text2 }\\n]\"},\"typeVersion\":2},{\"id\":\"7d6bda64-4f98-43d1-b181-343238f678bb\",\"name\":\"Aggregate Embeddings\",\"type\":\"n8n-nodes-base.aggregate\",\"position\":[1780,900],\"parameters\":{\"options\":{},\"fieldsToAggregate\":{\"fieldToAggregate\":[{\"renameField\":true,\"outputFieldName\":\"embeddings\",\"fieldToAggregate\":\"data[0].embedding\"}]}},\"typeVersion\":1},{\"id\":\"8eacac44-9cfd-4aa0-be7d-534ae630a2d4\",\"name\":\"Get Embeddings1\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[1380,560],\"parameters\":{\"url\":\"https://api.openai.com/v1/embeddings\",\"method\":\"POST\",\"options\":{},\"sendBody\":true,\"authentication\":\"predefinedCredentialType\",\"bodyParameters\":{\"parameters\":[{\"name\":\"input\",\"value\":\"={{ $json.text }}\"},{\"name\":\"model\",\"value\":\"text-embedding-3-small\"}]},\"nodeCredentialType\":\"openAiApi\"},\"credentials\":{\"openAiApi\":{\"id\":\"8gccIjcuf3gvaoEr\",\"name\":\"OpenAi account\"}},\"typeVersion\":4.2},{\"id\":\"5b23221c-aeb8-4a4f-b33b-75d46ba7a4fd\",\"name\":\"Aggregate Embeddings1\",\"type\":\"n8n-nodes-base.aggregate\",\"position\":[1580,560],\"parameters\":{\"options\":{},\"fieldsToAggregate\":{\"fieldToAggregate\":[{\"renameField\":true,\"outputFieldName\":\"embeddings\",\"fieldToAggregate\":\"data[0].embedding\"}]}},\"typeVersion\":1},{\"id\":\"bbbfaf2f-8294-401f-9f01-efeb58e99f15\",\"name\":\"Group Search API\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[1780,560],\"parameters\":{\"url\":\"http://qdrant:6333/collections/trustpilot_reviews/points/search/groups\",\"method\":\"POST\",\"options\":{},\"jsonBody\":\"={{\\n{\\n  \\\"vector\\\": $json.embeddings[0],\\n  \\\"group_by\\\": \\\"metadata.company_id\\\",\\n  \\\"limit\\\": 10,\\n  \\\"group_size\\\": 3,\\n  \\\"with_payload\\\": true\\n}\\n}}\",\"sendBody\":true,\"specifyBody\":\"json\",\"authentication\":\"predefinedCredentialType\",\"nodeCredentialType\":\"qdrantApi\"},\"credentials\":{\"qdrantApi\":{\"id\":\"NyinAS3Pgfik66w5\",\"name\":\"QdrantApi account\"}},\"typeVersion\":4.2},{\"id\":\"bbed1c97-eebb-47f1-9486-73bade35d290\",\"name\":\"Has Results?\",\"type\":\"n8n-nodes-base.if\",\"position\":[2600,560],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"a83c0c10-74a7-4a52-b6c4-26dc8313023b\",\"operator\":{\"type\":\"object\",\"operation\":\"notEmpty\",\"singleValue\":true},\"leftValue\":\"={{ $json }}\",\"rightValue\":\"\"}]}},\"typeVersion\":2.2},{\"id\":\"e995b27a-f331-434c-a828-bc02f978b43c\",\"name\":\"Simplify Group Results\",\"type\":\"n8n-nodes-base.set\",\"position\":[2180,560],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"caf5bf23-087a-496f-8d20-56ab70e303a8\",\"name\":\"category\",\"type\":\"string\",\"value\":\"={{ $json.id }}\"},{\"id\":\"db3c2c92-b951-4365-9c19-d5d0f8654a42\",\"name\":\"results\",\"type\":\"array\",\"value\":\"={{\\n$json.hits?.map(hit => ({\\n  content: hit.payload.content,\\n  metadata: hit.payload.metadata\\n}))\\n}}\"}]}},\"typeVersion\":3.4},{\"id\":\"e0c327a5-ab2e-46ad-9d4b-0fe8cdd1605c\",\"name\":\"Empty Compare Response\",\"type\":\"n8n-nodes-base.set\",\"position\":[2820,660],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"24ab771e-0e19-4bfe-bfee-2fed3a34f7fe\",\"name\":\"response\",\"type\":\"string\",\"value\":\"no results.\"}]}},\"typeVersion\":3.4},{\"id\":\"52890718-81b4-4880-9a12-b8456e96ad98\",\"name\":\"Aggregate Compare Response\",\"type\":\"n8n-nodes-base.aggregate\",\"position\":[2820,440],\"parameters\":{\"options\":{},\"aggregate\":\"aggregateAllItemData\",\"destinationFieldName\":\"response\"},\"typeVersion\":1},{\"id\":\"bb87afe4-6910-4c79-9371-d49e77134ac3\",\"name\":\"Embeddings OpenAI\",\"type\":\"@n8n/n8n-nodes-langchain.embeddingsOpenAi\",\"position\":[1340,-40],\"parameters\":{\"options\":{}},\"credentials\":{\"openAiApi\":{\"id\":\"8gccIjcuf3gvaoEr\",\"name\":\"OpenAi account\"}},\"typeVersion\":1.2},{\"id\":\"ba6e426b-9629-445f-b96c-b8b51fcafe3d\",\"name\":\"Default Data Loader\",\"type\":\"@n8n/n8n-nodes-langchain.documentDefaultDataLoader\",\"position\":[1460,-40],\"parameters\":{\"options\":{\"metadata\":{\"metadataValues\":[{\"name\":\"company_id\",\"value\":\"={{ $json.companyIds ?? 'unspecified' }}\"}]}},\"jsonData\":\"={{ $json.text }}\",\"jsonMode\":\"expressionData\"},\"typeVersion\":1},{\"id\":\"de9e7ffa-49e8-40de-acef-fd92216ec10c\",\"name\":\"Recursive Character Text Splitter\",\"type\":\"@n8n/n8n-nodes-langchain.textSplitterRecursiveCharacterTextSplitter\",\"position\":[1560,80],\"parameters\":{\"options\":{},\"chunkSize\":3000},\"typeVersion\":1},{\"id\":\"9d639f7f-5c3e-478f-ba6f-70b2e06394de\",\"name\":\"Simplify Recommend Response\",\"type\":\"n8n-nodes-base.set\",\"position\":[2180,900],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"56f12f89-75dc-4143-ae32-45f1561da19d\",\"name\":\"content\",\"type\":\"string\",\"value\":\"={{ $json.result[0].payload.content }}\"},{\"id\":\"57afc394-3793-4605-a751-8c0d446857e7\",\"name\":\"metadata\",\"type\":\"object\",\"value\":\"={{ $json.result[0].payload.metadata }}\"}]}},\"typeVersion\":3.4,\"alwaysOutputData\":true},{\"id\":\"736d02f1-8658-4d84-bdc6-3f43ad712a76\",\"name\":\"Get Insert Response\",\"type\":\"n8n-nodes-base.set\",\"position\":[1780,-200],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"cb612470-0d50-4179-a9af-144e592369a8\",\"name\":\"response\",\"type\":\"string\",\"value\":\"ok\"}]}},\"executeOnce\":true,\"typeVersion\":3.4},{\"id\":\"2a557659-8668-4dba-b3a7-2bc18981ca10\",\"name\":\"Get Search Response\",\"type\":\"n8n-nodes-base.aggregate\",\"position\":[1780,240],\"parameters\":{\"options\":{},\"aggregate\":\"aggregateAllItemData\",\"destinationFieldName\":\"response\"},\"typeVersion\":1},{\"id\":\"017f0628-f08f-4d7c-b3da-83ada24bcfad\",\"name\":\"Sticky Note9\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1720,500],\"parameters\":{\"width\":213.30551928619226,\"height\":332.38559808882246,\"content\":\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n### 🚨Configure Your Qdrant Connection\\n* Be sure to enter your endpoint address\"},\"typeVersion\":1},{\"id\":\"cbbc7999-e2c4-4d84-9c21-7ce47a70ef2d\",\"name\":\"Insert Reviews\",\"type\":\"@n8n/n8n-nodes-langchain.vectorStoreQdrant\",\"position\":[1380,-200],\"parameters\":{\"mode\":\"insert\",\"options\":{},\"qdrantCollection\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"trustpilot_reviews\",\"cachedResultName\":\"trustpilot_reviews\"}},\"credentials\":{\"qdrantApi\":{\"id\":\"NyinAS3Pgfik66w5\",\"name\":\"QdrantApi account\"}},\"typeVersion\":1.1},{\"id\":\"268dd3b8-631e-498c-8c50-33e61244ef7a\",\"name\":\"Search Reviews\",\"type\":\"@n8n/n8n-nodes-langchain.vectorStoreQdrant\",\"position\":[1380,240],\"parameters\":{\"mode\":\"load\",\"topK\":10,\"prompt\":\"={{ $json.text }}\",\"options\":{\"searchFilterJson\":\"={{\\n$json.companyIds\\n  ? {\\n    \\\"must\\\": [\\n      {\\n        \\\"key\\\": \\\"metadata.company_id\\\",\\n        \\\"match\\\": {\\n          \\\"any\\\": $json.companyIds.split(',')\\n        }\\n      }\\n    ]\\n  }\\n  : {}\\n}}\"},\"qdrantCollection\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"trustpilot_reviews\",\"cachedResultName\":\"trustpilot_reviews\"}},\"credentials\":{\"qdrantApi\":{\"id\":\"NyinAS3Pgfik66w5\",\"name\":\"QdrantApi account\"}},\"typeVersion\":1.1},{\"id\":\"45ff74b6-0e9e-4698-98b9-e778f1605df2\",\"name\":\"Split Out Companies\",\"type\":\"n8n-nodes-base.splitOut\",\"position\":[1980,560],\"parameters\":{\"options\":{},\"fieldToSplitOut\":\"result.groups\"},\"typeVersion\":1,\"alwaysOutputData\":true},{\"id\":\"1856fa8e-f184-4cef-b66f-6254e3f323ac\",\"name\":\"Filter By CompanyId\",\"type\":\"n8n-nodes-base.filter\",\"position\":[2380,560],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"6b6fac92-c001-4070-b8ed-0c63ef54d293\",\"operator\":{\"type\":\"boolean\",\"operation\":\"true\",\"singleValue\":true},\"leftValue\":\"={{\\n$('Operation').item.json.companyIds\\n  ? $('Operation').item.json.companyIds.split(',').includes($json.id)\\n  : true\\n}}\",\"rightValue\":\"={{ $json.id }}\"}]}},\"typeVersion\":2.2,\"alwaysOutputData\":true},{\"id\":\"3c468d41-9462-4ee0-b9c8-97e8213c0f32\",\"name\":\"Aggregate Recommend Response\",\"type\":\"n8n-nodes-base.aggregate\",\"position\":[2600,780],\"parameters\":{\"options\":{},\"aggregate\":\"aggregateAllItemData\",\"destinationFieldName\":\"response\"},\"typeVersion\":1},{\"id\":\"825ee679-b0bd-4b7a-8684-4a1f7959926e\",\"name\":\"Has Results?1\",\"type\":\"n8n-nodes-base.if\",\"position\":[2380,900],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"a83c0c10-74a7-4a52-b6c4-26dc8313023b\",\"operator\":{\"type\":\"object\",\"operation\":\"notEmpty\",\"singleValue\":true},\"leftValue\":\"={{ $json }}\",\"rightValue\":\"\"}]}},\"typeVersion\":2.2},{\"id\":\"bfa17c34-7f84-40e2-8c9b-f92c0475fa05\",\"name\":\"Empty Compare Response1\",\"type\":\"n8n-nodes-base.set\",\"position\":[2600,1000],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"24ab771e-0e19-4bfe-bfee-2fed3a34f7fe\",\"name\":\"response\",\"type\":\"string\",\"value\":\"no results.\"}]}},\"typeVersion\":3.4},{\"id\":\"93860126-eb7a-40b1-8a4e-1824d0aebe01\",\"name\":\"Embeddings OpenAI1\",\"type\":\"@n8n/n8n-nodes-langchain.embeddingsOpenAi\",\"position\":[1480,400],\"parameters\":{\"options\":{}},\"credentials\":{\"openAiApi\":{\"id\":\"8gccIjcuf3gvaoEr\",\"name\":\"OpenAi account\"}},\"typeVersion\":1.2},{\"id\":\"c3d89756-9073-4640-88ba-eb2c5cf370a1\",\"name\":\"ListCompanies\",\"type\":\"@n8n/n8n-nodes-langchain.toolWorkflow\",\"position\":[-120,240],\"parameters\":{\"name\":\"listAvailableCompanies\",\"workflowId\":{\"__rl\":true,\"mode\":\"id\",\"value\":\"={{ $workflow.id }}\"},\"description\":\"Call this tool to list all available companies in the reviews database.\",\"workflowInputs\":{\"value\":{\"text\":\"null\",\"text2\":\"null\",\"operation\":\"listCompanies\",\"companyIds\":\"null\"},\"schema\":[{\"id\":\"operation\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"operation\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"text\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"text\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"text2\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"text2\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"companyIds\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"companyIds\",\"defaultMatch\":false,\"canBeUsedToMatch\":true}],\"mappingMode\":\"defineBelow\",\"matchingColumns\":[],\"attemptToConvertTypes\":false,\"convertFieldsToString\":false}},\"typeVersion\":2.1},{\"id\":\"d9a02360-f9aa-4aea-b26f-f3482f55fc18\",\"name\":\"List by Facet API\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[1380,-440],\"parameters\":{\"url\":\"http://qdrant:6333/collections/trustpilot_reviews/facet\",\"method\":\"POST\",\"options\":{},\"jsonBody\":\"{\\n  \\\"key\\\": \\\"metadata.company_id\\\"\\n}\",\"sendBody\":true,\"specifyBody\":\"json\",\"authentication\":\"predefinedCredentialType\",\"nodeCredentialType\":\"qdrantApi\"},\"credentials\":{\"qdrantApi\":{\"id\":\"NyinAS3Pgfik66w5\",\"name\":\"QdrantApi account\"}},\"typeVersion\":4.2},{\"id\":\"6822aee2-7dfe-43ea-8238-ea0a3c8f0188\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-720,-740],\"parameters\":{\"width\":440,\"height\":1320,\"content\":\"## Try It Out!\\n### This n8n demonstrates how to build your own Qdrant MCP server to extend its functionality beyond that of the official implementation.\\n\\nThis n8n implementation exposes other cool API features from Qdrant such as facet search, grouped search and recommendations APIs. With this, we can build an easily customisable and maintainable Qdrant MCP server for business intelligence.\\n\\nThis MCP example is based off an official MCP reference implementation which can be found here -https://github.com/qdrant/mcp-server-qdrant/\\n\\n### How it works\\n* A MCP server trigger is used and connected to 5 custom workflow tools. We're using custom workflow tools as there is quite a few nodes required for each task.\\n* We use a mix of n8n supported Qdrant nodes for simple operations such as insert documents and similarity search, and HTTP node to hit the Qdrant API directly for Facet search, group search and recommendations.\\n* We use \\\"Edit Field\\\" and \\\"Aggregate\\\" nodes to return suitable responses to the MCP client.\\n\\n### How to use\\n* This Qdrant MCP server allows any compatible MCP client to manage a Qdrant Collection by supporting select and create operations. You will need to have a collection available before you can use this server. Use the Prerequisite manual steps to get started!\\n* Connect your MCP client by following the n8n guidelines here - https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-langchain.mcptrigger/#integrating-with-claude-desktop\\n* Try the following queries in your MCP client:\\n  * \\\"Can you help me list the available companies in the collection?\\\"\\n  * \\\"What do customers say about product deliveries from company X?\\\"\\n  * \\\"What do customers of company X and company Y say about product ease of use?\\\"\\n\\n### Requirements\\n* Qdrant for vector store. This can be an a cloud-hosted instance or one you can self-host internally.\\n* MCP Client or Agent for usage such as Claude Desktop - https://claude.ai/download\\n\\n### Customising this workflow\\n* Depending on what queries you'll receive, adjust the tool inputs to make it easier for the agent to set the right parameters.\\n* Not interested in Reviews? The techniques shared in this template can be used for other types of collections.\\n* Remember to set the MCP server to require credentials before going to production and sharing this MCP server with others!\"},\"typeVersion\":1},{\"id\":\"f0b1f04f-b3bd-4ad0-b128-17a96cf52b81\",\"name\":\"Create Facet Index\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[260,-580],\"parameters\":{\"url\":\"http://qdrant:6333/collections/trustpilot_reviews/index\",\"method\":\"PUT\",\"options\":{},\"jsonBody\":\"{\\n  \\\"field_name\\\": \\\"metadata.company_id\\\",\\n  \\\"field_schema\\\": \\\"keyword\\\"\\n}\",\"sendBody\":true,\"specifyBody\":\"json\"},\"typeVersion\":4.2},{\"id\":\"481c298b-c9e7-412e-aaa0-2e1565fabda8\",\"name\":\"Create Collection\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[60,-580],\"parameters\":{\"url\":\"http://qdrant:6333/collections/trustpilot_reviews\",\"method\":\"PUT\",\"options\":{},\"jsonBody\":\"{\\n  \\\"vectors\\\": {\\n    \\\"distance\\\": \\\"Cosine\\\",\\n    \\\"size\\\": 1536\\n  }\\n}\",\"sendBody\":true,\"specifyBody\":\"json\"},\"typeVersion\":4.2},{\"id\":\"07e1f0f3-6f24-4a67-9b07-75667f496a9a\",\"name\":\"Sticky Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-220,-740],\"parameters\":{\"color\":4,\"width\":700,\"height\":360,\"content\":\"## Prerequisite: Setup Qdrant Collection\\nIf you don't have an existing Qdrant Collection, you can use this manual flow to get started.\\n1. Creates a collection called \\\"trustpilot_reviews\\\"\\n2. Creates an index to allow for facet search ie. list of values of a the \\\"company_id\\\" metadata key.\"},\"typeVersion\":1},{\"id\":\"df0dacdb-4238-475b-9d98-ae7ce9e3142d\",\"name\":\"When clicking ‘Test workflow’\",\"type\":\"n8n-nodes-base.manualTrigger\",\"position\":[-140,-580],\"parameters\":{},\"typeVersion\":1},{\"id\":\"8c0f0e65-82d2-427e-8c6d-2f89bd225f46\",\"name\":\"Sticky Note4\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-220,-200],\"parameters\":{\"color\":5,\"width\":380,\"height\":100,\"content\":\"### Always Authenticate Your Server!\\nBefore going to production, it's always advised to enable authentication on your MCP server trigger.\"},\"typeVersion\":1}],\"pinData\":{},\"connections\":{\"Insert\":{\"ai_tool\":[[{\"node\":\"Qdrant MCP Server\",\"type\":\"ai_tool\",\"index\":0}]]},\"Search\":{\"ai_tool\":[[{\"node\":\"Qdrant MCP Server\",\"type\":\"ai_tool\",\"index\":0}]]},\"Compare\":{\"ai_tool\":[[{\"node\":\"Qdrant MCP Server\",\"type\":\"ai_tool\",\"index\":0}]]},\"Operation\":{\"main\":[[{\"node\":\"List by Facet API\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Insert Reviews\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Search Reviews\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Get Embeddings1\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Preferences to Items\",\"type\":\"main\",\"index\":0}]]},\"Recommend\":{\"ai_tool\":[[{\"node\":\"Qdrant MCP Server\",\"type\":\"ai_tool\",\"index\":0}]]},\"Has Results?\":{\"main\":[[{\"node\":\"Aggregate Compare Response\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Empty Compare Response\",\"type\":\"main\",\"index\":0}]]},\"Has Results?1\":{\"main\":[[{\"node\":\"Aggregate Recommend Response\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Empty Compare Response1\",\"type\":\"main\",\"index\":0}]]},\"ListCompanies\":{\"ai_tool\":[[{\"node\":\"Qdrant MCP Server\",\"type\":\"ai_tool\",\"index\":0}]]},\"Recommend API\":{\"main\":[[{\"node\":\"Simplify Recommend Response\",\"type\":\"main\",\"index\":0}]]},\"Get Embeddings\":{\"main\":[[{\"node\":\"Aggregate Embeddings\",\"type\":\"main\",\"index\":0}]]},\"Insert Reviews\":{\"main\":[[{\"node\":\"Get Insert Response\",\"type\":\"main\",\"index\":0}]]},\"Search Reviews\":{\"main\":[[{\"node\":\"Get Search Response\",\"type\":\"main\",\"index\":0}]]},\"Get Embeddings1\":{\"main\":[[{\"node\":\"Aggregate Embeddings1\",\"type\":\"main\",\"index\":0}]]},\"Group Search API\":{\"main\":[[{\"node\":\"Split Out Companies\",\"type\":\"main\",\"index\":0}]]},\"Create Collection\":{\"main\":[[{\"node\":\"Create Facet Index\",\"type\":\"main\",\"index\":0}]]},\"Embeddings OpenAI\":{\"ai_embedding\":[[{\"node\":\"Insert Reviews\",\"type\":\"ai_embedding\",\"index\":0}]]},\"Embeddings OpenAI1\":{\"ai_embedding\":[[{\"node\":\"Search Reviews\",\"type\":\"ai_embedding\",\"index\":0}]]},\"Default Data Loader\":{\"ai_document\":[[{\"node\":\"Insert Reviews\",\"type\":\"ai_document\",\"index\":0}]]},\"Filter By CompanyId\":{\"main\":[[{\"node\":\"Has Results?\",\"type\":\"main\",\"index\":0}]]},\"Split Out Companies\":{\"main\":[[{\"node\":\"Simplify Group Results\",\"type\":\"main\",\"index\":0}]]},\"Aggregate Embeddings\":{\"main\":[[{\"node\":\"Recommend API\",\"type\":\"main\",\"index\":0}]]},\"Preferences to Items\":{\"main\":[[{\"node\":\"Get Embeddings\",\"type\":\"main\",\"index\":0}]]},\"Aggregate Embeddings1\":{\"main\":[[{\"node\":\"Group Search API\",\"type\":\"main\",\"index\":0}]]},\"Simplify Group Results\":{\"main\":[[{\"node\":\"Filter By CompanyId\",\"type\":\"main\",\"index\":0}]]},\"Simplify Recommend Response\":{\"main\":[[{\"node\":\"Has Results?1\",\"type\":\"main\",\"index\":0}]]},\"Recursive Character Text Splitter\":{\"ai_textSplitter\":[[{\"node\":\"Default Data Loader\",\"type\":\"ai_textSplitter\",\"index\":0}]]},\"When Executed by Another Workflow\":{\"main\":[[{\"node\":\"Operation\",\"type\":\"main\",\"index\":0}]]},\"When clicking ‘Test workflow’\":{\"main\":[[{\"node\":\"Create Collection\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "### This n8n demonstrates how to build your own Qdrant MCP server to extend its functionality beyond that of the official implementation.\n\nThis n8n implementation exposes other cool API features from Qdrant such as facet search, grouped search and recommendations APIs. With this, we can build an easily customisable and maintainable Qdrant MCP server for business intelligence.\n\nThis MCP example is based off an official MCP reference implementation which can be found here - [https://github.com/qdrant/mcp-server-qdrant](https://github.com/qdrant/mcp-server-qdrant/)\n\n### How it works\n\n  * A MCP server trigger is used and connected to 5 custom workflow tools. We're using custom workflow tools as there is quite a few nodes required for each task.\n  * We use a mix of n8n supported Qdrant nodes for simple operations such as insert documents and similarity search, and HTTP node to hit the Qdrant API directly for Facet search, group search and recommendations.\n  * We use \"Edit Field\" and \"Aggregate\" nodes to return suitable responses to the MCP client.\n\n\n\n### How to use\n\n  * This Qdrant MCP server allows any compatible MCP client to manage a Qdrant Collection by supporting select and create operations. You will need to have a collection available before you can use this server. Use the Prerequisite manual steps to get started!\n  * Connect your MCP client by following the n8n guidelines here - <https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-langchain.mcptrigger/#integrating-with-claude-desktop>\n  * Try the following queries in your MCP client: \n    * \"Can you help me list the available companies in the collection?\"\n    * \"What do customers say about product deliveries from company X?\"\n    * \"What do customers of company X and company Y say about product ease of use?\"\n\n\n\n### Requirements\n\n  * Qdrant for vector store. This can be an a cloud-hosted instance or one you can self-host internally.\n  * MCP Client or Agent for usage such as Claude Desktop - <https://claude.ai/download>\n\n\n\n### Customising this workflow\n\n  * Depending on what queries you'll receive, adjust the tool inputs to make it easier for the agent to set the right parameters.\n  * Not interested in Reviews? The techniques shared in this template can be used for other types of collections.\n  * Remember to set the MCP server to require credentials before going to production and sharing this MCP server with others!\n\n\n",
  "crawled_at": "2025-05-26T05:07:16.153190",
  "readme_zh": "### 本n8n示例演示如何构建专属Qdrant MCP服务器，以扩展官方实现的功能边界\n\n该n8n方案将Qdrant的诸多高阶API能力——如分面搜索、分组搜索和推荐接口——封装为可调用服务。通过此方案，企业可快速搭建高度定制化、便于维护的智能分析型Qdrant MCP服务器。\n\n本MCP示例基于官方参考实现开发，原始项目参见：[https://github.com/qdrant/mcp-server-qdrant](https://github.com/qdrant/mcp-server-qdrant/)\n\n### 实现原理\n\n* 采用MCP服务器触发器连接5个自定义工作流工具（因每个任务需组合多个节点，故选用自定义工具方案）\n* 混合使用n8n原生Qdrant节点（处理文档插入/相似性搜索等基础操作）与HTTP节点（直连Qdrant API实现分面搜索/分组搜索/推荐功能）\n* 通过\"字段编辑\"与\"聚合\"节点将处理结果适配为MCP客户端标准响应格式\n\n### 使用指南\n\n* 本Qdrant MCP服务器支持兼容MCP客户端通过选择/创建操作管理Qdrant集合（使用前需预先创建集合，请按准备步骤操作）\n* 参照n8n官方文档连接MCP客户端：<https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-langchain.mcptrigger/#integrating-with-claude-desktop>\n* 可尝试向客户端发送如下查询：\n  * \"请列出集合中所有企业名称\"\n  * \"客户如何评价X公司的产品配送服务？\"\n  * \"X公司和Y公司的客户对产品易用性有何评价？\"\n\n### 环境要求\n\n* 向量数据库：Qdrant（支持云托管或本地部署）\n* MCP客户端：如Claude Desktop - <https://claude.ai/download>\n\n### 定制建议\n\n* 根据实际查询场景调整工具输入参数，优化智能体参数设置\n* 非评论分析场景？本模板技术方案可迁移至其他集合类型\n* 生产环境部署前，请务必启用MCP服务器身份验证机制",
  "title_zh": "构建您自己的Qdrant向量存储MCP服务器",
  "publish_date_zh": "最后更新于4天前",
  "workflow_json_zh": "{\n  \"meta\": {\n    \"instanceId\": \"408f9fb9940c3cb18ffdef0e0150fe342d6e655c3a9fac21f0f644e8bedabcd9\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"nodes\": [\n    {\n      \"id\": \"49620d3a-d4ec-4017-ade1-ff2ef5473c11\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -220,\n        -80\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 680,\n        \"height\": 660,\n        \"content\": \"## 1. 设置MCP服务器触发器\\n[了解更多关于MCP服务器触发器的信息](https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-langchain.mcptrigger)\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"f0646a81-d328-4f07-a744-60f576b5a51e\",\n      \"name\": \"Insert\",\n      \"type\": \"@n8n/n8n-nodes-langchain.toolWorkflow\",\n      \"position\": [\n        -40,\n        380\n      ],\n      \"parameters\": {\n        \"name\": \"insert_review\",\n        \"workflowId\": {\n          \"__rl\": true,\n          \"mode\": \"id\",\n          \"value\": \"={{ $workflow.id }}\"\n        },\n        \"description\": \"=Call this tool to insert a customer's review into our review database.\",\n        \"workflowInputs\": {\n          \"value\": {\n            \"text\": \"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('text', `The contents of the review`, 'string') }}\",\n            \"text2\": \"null\",\n            \"operation\": \"insert\",\n            \"companyIds\": \"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('companyIds', `The company ID is their url address.`, 'string') }}\"\n          },\n          \"schema\": [\n            {\n              \"id\": \"operation\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"operation\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"text\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"text\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"text2\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"text2\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"companyIds\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"companyIds\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            }\n          ],\n          \"mappingMode\": \"defineBelow\",\n          \"matchingColumns\": [],\n          \"attemptToConvertTypes\": false,\n          \"convertFieldsToString\": false\n        }\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"21e8beac-dbd5-44d7-8472-4edff3f63308\",\n      \"name\": \"Search\",\n      \"type\": \"@n8n/n8n-nodes-langchain.toolWorkflow\",\n      \"position\": [\n        80,\n        440\n      ],\n      \"parameters\": {\n        \"name\": \"search_reviews\",\n        \"workflowId\": {\n          \"__rl\": true,\n          \"mode\": \"id\",\n          \"value\": \"={{ $workflow.id }}\",\n          \"cachedResultName\": \"={{ $workflow.id }}\"\n        },\n        \"description\": \"Call this tool to search our reviews database.\",\n        \"workflowInputs\": {\n          \"value\": {\n            \"text\": \"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('text', `the query or search terms to use`, 'string') }}\",\n            \"text2\": \"null\",\n            \"operation\": \"search\",\n            \"companyIds\": \"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('companyIds', `Optional, leave blank to search over all companies otherwise one or more company IDs comma-delimited. The company ID is their url address.`, 'string') }}\"\n          },\n          \"schema\": [\n            {\n              \"id\": \"operation\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"operation\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"text\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"text\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"text2\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"text2\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"companyIds\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"companyIds\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            }\n          ],\n          \"mappingMode\": \"defineBelow\",\n          \"matchingColumns\": [],\n          \"attemptToConvertTypes\": false,\n          \"convertFieldsToString\": false\n        }\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"ffb100a4-9108-4ccd-a897-e5cd9e752232\",\n      \"name\": \"Recommend\",\n      \"type\": \"@n8n/n8n-nodes-langchain.toolWorkflow\",\n      \"position\": [\n        280,\n        240\n      ],\n      \"parameters\": {\n        \"name\": \"recommend_reviews\",\n        \"workflowId\": {\n          \"__rl\": true,\n          \"mode\": \"id\",\n          \"value\": \"={{ $workflow.id }}\"\n        },\n        \"description\": \"Call this tool to generate a recommendation for a review based on positive and/or negative preferences.\",\n        \"workflowInputs\": {\n          \"value\": {\n            \"text\": \"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('text', `preferences to include.`, 'string') }}\",\n            \"text2\": \"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('text2', `preference to avoid.`, 'string') }}\",\n            \"operation\": \"recommend\",\n            \"companyIds\": \"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('companyIds', `Optional, leave blank to search across all reviews otherwise one or more company IDs, comma-delimited. The company ID is their url address.`, 'string') }}\"\n          },\n          \"schema\": [\n            {\n              \"id\": \"operation\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"operation\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"text\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"text\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"text2\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"text2\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"companyIds\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"companyIds\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            }\n          ],\n          \"mappingMode\": \"defineBelow\",\n          \"matchingColumns\": [],\n          \"attemptToConvertTypes\": false,\n          \"convertFieldsToString\": false\n        }\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"d1d53cbc-0a22-409d-9336-d8c98eeaa170\",\n      \"name\": \"Qdrant MCP Server\",\n      \"type\": \"@n8n/n8n-nodes-langchain.mcpTrigger\",\n      \"position\": [\n        -40,\n        60\n      ],\n      \"webhookId\": \"a1aff1b5-e5c7-4ca2-91eb-017c1fe32dab\",\n      \"parameters\": {\n        \"path\": \"a1aff1b5-e5c7-4ca2-91eb-017c1fe32dab\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"82d747a5-ff5f-44ff-9f68-cc1aa01ba1de\",\n      \"name\": \"When Executed by Another Workflow\",\n      \"type\": \"n8n-nodes-base.executeWorkflowTrigger\",\n      \"position\": [\n        540,\n        280\n      ],\n      \"parameters\": {\n        \"workflowInputs\": {\n          \"values\": [\n            {\n              \"name\": \"operation\"\n            },\n            {\n              \"name\": \"text\"\n            },\n            {\n              \"name\": \"text2\"\n            },\n            {\n              \"name\": \"companyIds\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"c7a2e948-5cd5-4545-a633-c1157e63edec\",\n      \"name\": \"Operation\",\n      \"type\": \"n8n-nodes-base.switch\",\n      \"position\": [\n        760,\n        240\n      ],\n      \"parameters\": {\n        \"rules\": {\n          \"values\": [\n            {\n              \"outputKey\": \"listCompanies\",\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 2,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"fe782b0f-f501-4985-a9d2-f63f4019177f\",\n                    \"operator\": {\n                      \"name\": \"filter.operator.equals\",\n                      \"type\": \"string\",\n                      \"operation\": \"equals\"\n                    },\n                    \"leftValue\": \"={{ $json.operation }}\",\n                    \"rightValue\": \"listCompanies\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            },\n            {\n              \"outputKey\": \"insert\",\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 2,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"81b134bc-d671-4493-b3ad-8df9be3f49a6\",\n                    \"operator\": {\n                      \"type\": \"string\",\n                      \"operation\": \"equals\"\n                    },\n                    \"leftValue\": \"={{ $json.operation }}\",\n                    \"rightValue\": \"insert\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            },\n            {\n              \"outputKey\": \"search\",\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 2,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"8d57914f-6587-4fb3-88e0-aa1de6ba56c1\",\n                    \"operator\": {\n                      \"name\": \"filter.operator.equals\",\n                      \"type\": \"string\",\n                      \"operation\": \"equals\"\n                    },\n                    \"leftValue\": \"={{ $json.operation }}\",\n                    \"rightValue\": \"search\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            },\n            {\n              \"outputKey\": \"compare\",\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 2,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"7c38f238-213a-46ec-aefe-22e0bcb8dffc\",\n                    \"operator\": {\n                      \"name\": \"filter.operator.equals\",\n                      \"type\": \"string\",\n                      \"operation\": \"equals\"\n                    },\n                    \"leftValue\": \"={{ $json.operation }}\",\n                    \"rightValue\": \"compare\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            },\n            {\n              \"outputKey\": \"recommend\",\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 2,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"2c691501-786a-433f-a185-3a6e0d08d336\",\n                    \"operator\": {\n                      \"name\": \"filter.operator.equals\",\n                      \"type\": \"string\",\n                      \"operation\": \"equals\"\n                    },\n                    \"leftValue\": \"={{ $json.operation }}\",\n                    \"rightValue\": \"recommend\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            }\n          ]\n        },\n        \"options\": {}\n      },\n      \"typeVersion\": 3.2\n    },\n    {\n      \"id\": \"18d805db-376c-4583-963a-db1e5d09aa50\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        480,\n        -80\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 580,\n        \"height\": 320,\n        \"content\": \"## 2. 超越供应商实现的功能扩展\\n[详细了解Qdrant节点](https://docs.n8n.io/integrations/builtin/cluster-nodes/root-nodes/n8n-nodes-langchain.vectorstoreqdrant)\\n\\n虽然直接让代理提供完整的原始SQL语句可能更为简便，但这可能使您或您的组织面临严重的安全风险，最坏情况下可能导致数据在不知情的情况下泄露或删除。\\n\\n强制代理仅提供查询参数，意味着我们可以在一定程度上防范此类风险，同时也符合使用查询参数作为防止SQL注入攻击的最佳实践。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"ab8aeea3-0564-4c96-a67c-ff319df3297b\",\n      \"name\": \"Compare\",\n      \"type\": \"@n8n/n8n-nodes-langchain.toolWorkflow\",\n      \"position\": [\n        220,\n        380\n      ],\n      \"parameters\": {\n        \"name\": \"compare_reviews\",\n        \"workflowId\": {\n          \"__rl\": true,\n          \"mode\": \"id\",\n          \"value\": \"={{ $workflow.id }}\",\n          \"cachedResultName\": \"={{ $workflow.id }}\"\n        },\n        \"description\": \"Call this tool to compare search results across 2 or more companies.\",\n        \"workflowInputs\": {\n          \"value\": {\n            \"text\": \"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('text', `the query or search terms to use`, 'string') }}\",\n            \"text2\": \"null\",\n            \"operation\": \"compare\",\n            \"companyIds\": \"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('companyIds', `Two or more company IDs, comma-delimited. The company ID is their url address.`, 'string') }}\"\n          },\n          \"schema\": [\n            {\n              \"id\": \"operation\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"operation\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"text\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"text\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"text2\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"text2\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"companyIds\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"companyIds\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            }\n          ],\n          \"mappingMode\": \"defineBelow\",\n          \"matchingColumns\": [],\n          \"attemptToConvertTypes\": false,\n          \"convertFieldsToString\": false\n        }\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"4f0876cb-dc07-486e-937b-334fa2cb754f\",\n      \"name\": \"Sticky Note8\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1920,\n        860\n      ],\n      \"parameters\": {\n        \"width\": 213.30551928619226,\n        \"height\": 332.38559808882246,\n        \"content\": \"### 🚨配置您的 Qdrant 连接\\n* 请务必输入您的终端地址\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"02031bac-016f-4715-8413-6255cf73e103\",\n      \"name\": \"Recommend API\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1980,\n        900\n      ],\n      \"parameters\": {\n        \"url\": \"=http://qdrant:6333/collections/trustpilot_reviews/points/recommend\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"sendBody\": true,\n        \"authentication\": \"predefinedCredentialType\",\n        \"bodyParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"strategy\",\n              \"value\": \"average_vector\"\n            },\n            {\n              \"name\": \"limit\",\n              \"value\": \"={{ 3 }}\"\n            },\n            {\n              \"name\": \"positive\",\n              \"value\": \"={{ [$json.embeddings[0]] }}\"\n            },\n            {\n              \"name\": \"negative\",\n              \"value\": \"={{ [$json.embeddings[1]] }}\"\n            },\n            {\n              \"name\": \"filter\",\n              \"value\": \"={{\\n$('Operation').first().json.companyIds\\n  ? {\\n    \\\"must\\\": {\\n      \\\"key\\\": \\\"metadata.company_id\\\",\\n      \\\"match\\\": {\\n        \\\"any\\\": $('Operation').first().json.companyIds.split(',')\\n      }\\n    }\\n  }\\n  : {}\\n}}\"\n            },\n            {\n              \"name\": \"with_payload\",\n              \"value\": \"={{ true }}\"\n            }\n          ]\n        },\n        \"nodeCredentialType\": \"qdrantApi\"\n      },\n      \"credentials\": {\n        \"qdrantApi\": {\n          \"id\": \"NyinAS3Pgfik66w5\",\n          \"name\": \"QdrantApi account\"\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"9d058dae-2f24-4e34-bdb6-ba5649a3b431\",\n      \"name\": \"Get Embeddings\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1580,\n        900\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.openai.com/v1/embeddings\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"sendBody\": true,\n        \"authentication\": \"predefinedCredentialType\",\n        \"bodyParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"input\",\n              \"value\": \"={{ $json.text }}\"\n            },\n            {\n              \"name\": \"model\",\n              \"value\": \"text-embedding-3-small\"\n            }\n          ]\n        },\n        \"nodeCredentialType\": \"openAiApi\"\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"8gccIjcuf3gvaoEr\",\n          \"name\": \"OpenAi account\"\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"dfbb9a02-91dd-4dc4-8738-0aff41db2156\",\n      \"name\": \"Preferences to Items\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        1380,\n        900\n      ],\n      \"parameters\": {\n        \"jsCode\": \"return [\\n  { text: $input.first().json.text },\\n  { text: $input.first().json.text2 }\\n]\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"7d6bda64-4f98-43d1-b181-343238f678bb\",\n      \"name\": \"Aggregate Embeddings\",\n      \"type\": \"n8n-nodes-base.aggregate\",\n      \"position\": [\n        1780,\n        900\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"fieldsToAggregate\": {\n          \"fieldToAggregate\": [\n            {\n              \"renameField\": true,\n              \"outputFieldName\": \"embeddings\",\n              \"fieldToAggregate\": \"data[0].embedding\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"8eacac44-9cfd-4aa0-be7d-534ae630a2d4\",\n      \"name\": \"Get Embeddings1\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1380,\n        560\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.openai.com/v1/embeddings\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"sendBody\": true,\n        \"authentication\": \"predefinedCredentialType\",\n        \"bodyParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"input\",\n              \"value\": \"={{ $json.text }}\"\n            },\n            {\n              \"name\": \"model\",\n              \"value\": \"text-embedding-3-small\"\n            }\n          ]\n        },\n        \"nodeCredentialType\": \"openAiApi\"\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"8gccIjcuf3gvaoEr\",\n          \"name\": \"OpenAi account\"\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"5b23221c-aeb8-4a4f-b33b-75d46ba7a4fd\",\n      \"name\": \"Aggregate Embeddings1\",\n      \"type\": \"n8n-nodes-base.aggregate\",\n      \"position\": [\n        1580,\n        560\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"fieldsToAggregate\": {\n          \"fieldToAggregate\": [\n            {\n              \"renameField\": true,\n              \"outputFieldName\": \"embeddings\",\n              \"fieldToAggregate\": \"data[0].embedding\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"bbbfaf2f-8294-401f-9f01-efeb58e99f15\",\n      \"name\": \"Group Search API\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1780,\n        560\n      ],\n      \"parameters\": {\n        \"url\": \"http://qdrant:6333/collections/trustpilot_reviews/points/search/groups\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"jsonBody\": \"={{\\n{\\n  \\\"vector\\\": $json.embeddings[0],\\n  \\\"group_by\\\": \\\"metadata.company_id\\\",\\n  \\\"limit\\\": 10,\\n  \\\"group_size\\\": 3,\\n  \\\"with_payload\\\": true\\n}\\n}}\",\n        \"sendBody\": true,\n        \"specifyBody\": \"json\",\n        \"authentication\": \"predefinedCredentialType\",\n        \"nodeCredentialType\": \"qdrantApi\"\n      },\n      \"credentials\": {\n        \"qdrantApi\": {\n          \"id\": \"NyinAS3Pgfik66w5\",\n          \"name\": \"QdrantApi account\"\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"bbed1c97-eebb-47f1-9486-73bade35d290\",\n      \"name\": \"Has Results?\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        2600,\n        560\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"a83c0c10-74a7-4a52-b6c4-26dc8313023b\",\n              \"operator\": {\n                \"type\": \"object\",\n                \"operation\": \"notEmpty\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $json }}\",\n              \"rightValue\": \"\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"e995b27a-f331-434c-a828-bc02f978b43c\",\n      \"name\": \"Simplify Group Results\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        2180,\n        560\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"caf5bf23-087a-496f-8d20-56ab70e303a8\",\n              \"name\": \"category\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.id }}\"\n            },\n            {\n              \"id\": \"db3c2c92-b951-4365-9c19-d5d0f8654a42\",\n              \"name\": \"results\",\n              \"type\": \"array\",\n              \"value\": \"={{\\n$json.hits?.map(hit => ({\\n  content: hit.payload.content,\\n  metadata: hit.payload.metadata\\n}))\\n}}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"e0c327a5-ab2e-46ad-9d4b-0fe8cdd1605c\",\n      \"name\": \"Empty Compare Response\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        2820,\n        660\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"24ab771e-0e19-4bfe-bfee-2fed3a34f7fe\",\n              \"name\": \"response\",\n              \"type\": \"string\",\n              \"value\": \"no results.\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"52890718-81b4-4880-9a12-b8456e96ad98\",\n      \"name\": \"Aggregate Compare Response\",\n      \"type\": \"n8n-nodes-base.aggregate\",\n      \"position\": [\n        2820,\n        440\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"aggregate\": \"aggregateAllItemData\",\n        \"destinationFieldName\": \"response\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"bb87afe4-6910-4c79-9371-d49e77134ac3\",\n      \"name\": \"Embeddings OpenAI\",\n      \"type\": \"@n8n/n8n-nodes-langchain.embeddingsOpenAi\",\n      \"position\": [\n        1340,\n        -40\n      ],\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"8gccIjcuf3gvaoEr\",\n          \"name\": \"OpenAi account\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"ba6e426b-9629-445f-b96c-b8b51fcafe3d\",\n      \"name\": \"Default Data Loader\",\n      \"type\": \"@n8n/n8n-nodes-langchain.documentDefaultDataLoader\",\n      \"position\": [\n        1460,\n        -40\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"metadata\": {\n            \"metadataValues\": [\n              {\n                \"name\": \"company_id\",\n                \"value\": \"={{ $json.companyIds ?? 'unspecified' }}\"\n              }\n            ]\n          }\n        },\n        \"jsonData\": \"={{ $json.text }}\",\n        \"jsonMode\": \"expressionData\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"de9e7ffa-49e8-40de-acef-fd92216ec10c\",\n      \"name\": \"Recursive Character Text Splitter\",\n      \"type\": \"@n8n/n8n-nodes-langchain.textSplitterRecursiveCharacterTextSplitter\",\n      \"position\": [\n        1560,\n        80\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"chunkSize\": 3000\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"9d639f7f-5c3e-478f-ba6f-70b2e06394de\",\n      \"name\": \"Simplify Recommend Response\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        2180,\n        900\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"56f12f89-75dc-4143-ae32-45f1561da19d\",\n              \"name\": \"content\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.result[0].payload.content }}\"\n            },\n            {\n              \"id\": \"57afc394-3793-4605-a751-8c0d446857e7\",\n              \"name\": \"metadata\",\n              \"type\": \"object\",\n              \"value\": \"={{ $json.result[0].payload.metadata }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4,\n      \"alwaysOutputData\": true\n    },\n    {\n      \"id\": \"736d02f1-8658-4d84-bdc6-3f43ad712a76\",\n      \"name\": \"Get Insert Response\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        1780,\n        -200\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"cb612470-0d50-4179-a9af-144e592369a8\",\n              \"name\": \"response\",\n              \"type\": \"string\",\n              \"value\": \"ok\"\n            }\n          ]\n        }\n      },\n      \"executeOnce\": true,\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"2a557659-8668-4dba-b3a7-2bc18981ca10\",\n      \"name\": \"Get Search Response\",\n      \"type\": \"n8n-nodes-base.aggregate\",\n      \"position\": [\n        1780,\n        240\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"aggregate\": \"aggregateAllItemData\",\n        \"destinationFieldName\": \"response\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"017f0628-f08f-4d7c-b3da-83ada24bcfad\",\n      \"name\": \"Sticky Note9\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1720,\n        500\n      ],\n      \"parameters\": {\n        \"width\": 213.30551928619226,\n        \"height\": 332.38559808882246,\n        \"content\": \"### 🚨配置您的 Qdrant 连接\\n* 请务必输入您的终端地址\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"cbbc7999-e2c4-4d84-9c21-7ce47a70ef2d\",\n      \"name\": \"Insert Reviews\",\n      \"type\": \"@n8n/n8n-nodes-langchain.vectorStoreQdrant\",\n      \"position\": [\n        1380,\n        -200\n      ],\n      \"parameters\": {\n        \"mode\": \"insert\",\n        \"options\": {},\n        \"qdrantCollection\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"trustpilot_reviews\",\n          \"cachedResultName\": \"trustpilot_reviews\"\n        }\n      },\n      \"credentials\": {\n        \"qdrantApi\": {\n          \"id\": \"NyinAS3Pgfik66w5\",\n          \"name\": \"QdrantApi account\"\n        }\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"268dd3b8-631e-498c-8c50-33e61244ef7a\",\n      \"name\": \"Search Reviews\",\n      \"type\": \"@n8n/n8n-nodes-langchain.vectorStoreQdrant\",\n      \"position\": [\n        1380,\n        240\n      ],\n      \"parameters\": {\n        \"mode\": \"load\",\n        \"topK\": 10,\n        \"prompt\": \"={{ $json.text }}\",\n        \"options\": {\n          \"searchFilterJson\": \"={{\\n$json.companyIds\\n  ? {\\n    \\\"must\\\": [\\n      {\\n        \\\"key\\\": \\\"metadata.company_id\\\",\\n        \\\"match\\\": {\\n          \\\"any\\\": $json.companyIds.split(',')\\n        }\\n      }\\n    ]\\n  }\\n  : {}\\n}}\"\n        },\n        \"qdrantCollection\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"trustpilot_reviews\",\n          \"cachedResultName\": \"trustpilot_reviews\"\n        }\n      },\n      \"credentials\": {\n        \"qdrantApi\": {\n          \"id\": \"NyinAS3Pgfik66w5\",\n          \"name\": \"QdrantApi account\"\n        }\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"45ff74b6-0e9e-4698-98b9-e778f1605df2\",\n      \"name\": \"Split Out Companies\",\n      \"type\": \"n8n-nodes-base.splitOut\",\n      \"position\": [\n        1980,\n        560\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"fieldToSplitOut\": \"result.groups\"\n      },\n      \"typeVersion\": 1,\n      \"alwaysOutputData\": true\n    },\n    {\n      \"id\": \"1856fa8e-f184-4cef-b66f-6254e3f323ac\",\n      \"name\": \"Filter By CompanyId\",\n      \"type\": \"n8n-nodes-base.filter\",\n      \"position\": [\n        2380,\n        560\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"6b6fac92-c001-4070-b8ed-0c63ef54d293\",\n              \"operator\": {\n                \"type\": \"boolean\",\n                \"operation\": \"true\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{\\n$('Operation').item.json.companyIds\\n  ? $('Operation').item.json.companyIds.split(',').includes($json.id)\\n  : true\\n}}\",\n              \"rightValue\": \"={{ $json.id }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2,\n      \"alwaysOutputData\": true\n    },\n    {\n      \"id\": \"3c468d41-9462-4ee0-b9c8-97e8213c0f32\",\n      \"name\": \"Aggregate Recommend Response\",\n      \"type\": \"n8n-nodes-base.aggregate\",\n      \"position\": [\n        2600,\n        780\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"aggregate\": \"aggregateAllItemData\",\n        \"destinationFieldName\": \"response\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"825ee679-b0bd-4b7a-8684-4a1f7959926e\",\n      \"name\": \"Has Results?1\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        2380,\n        900\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"a83c0c10-74a7-4a52-b6c4-26dc8313023b\",\n              \"operator\": {\n                \"type\": \"object\",\n                \"operation\": \"notEmpty\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $json }}\",\n              \"rightValue\": \"\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"bfa17c34-7f84-40e2-8c9b-f92c0475fa05\",\n      \"name\": \"Empty Compare Response1\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        2600,\n        1000\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"24ab771e-0e19-4bfe-bfee-2fed3a34f7fe\",\n              \"name\": \"response\",\n              \"type\": \"string\",\n              \"value\": \"no results.\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"93860126-eb7a-40b1-8a4e-1824d0aebe01\",\n      \"name\": \"Embeddings OpenAI1\",\n      \"type\": \"@n8n/n8n-nodes-langchain.embeddingsOpenAi\",\n      \"position\": [\n        1480,\n        400\n      ],\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"8gccIjcuf3gvaoEr\",\n          \"name\": \"OpenAi account\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"c3d89756-9073-4640-88ba-eb2c5cf370a1\",\n      \"name\": \"ListCompanies\",\n      \"type\": \"@n8n/n8n-nodes-langchain.toolWorkflow\",\n      \"position\": [\n        -120,\n        240\n      ],\n      \"parameters\": {\n        \"name\": \"listAvailableCompanies\",\n        \"workflowId\": {\n          \"__rl\": true,\n          \"mode\": \"id\",\n          \"value\": \"={{ $workflow.id }}\"\n        },\n        \"description\": \"Call this tool to list all available companies in the reviews database.\",\n        \"workflowInputs\": {\n          \"value\": {\n            \"text\": \"null\",\n            \"text2\": \"null\",\n            \"operation\": \"listCompanies\",\n            \"companyIds\": \"null\"\n          },\n          \"schema\": [\n            {\n              \"id\": \"operation\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"operation\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"text\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"text\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"text2\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"text2\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"companyIds\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"companyIds\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            }\n          ],\n          \"mappingMode\": \"defineBelow\",\n          \"matchingColumns\": [],\n          \"attemptToConvertTypes\": false,\n          \"convertFieldsToString\": false\n        }\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"d9a02360-f9aa-4aea-b26f-f3482f55fc18\",\n      \"name\": \"List by Facet API\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1380,\n        -440\n      ],\n      \"parameters\": {\n        \"url\": \"http://qdrant:6333/collections/trustpilot_reviews/facet\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"jsonBody\": \"{\\n  \\\"key\\\": \\\"metadata.company_id\\\"\\n}\",\n        \"sendBody\": true,\n        \"specifyBody\": \"json\",\n        \"authentication\": \"predefinedCredentialType\",\n        \"nodeCredentialType\": \"qdrantApi\"\n      },\n      \"credentials\": {\n        \"qdrantApi\": {\n          \"id\": \"NyinAS3Pgfik66w5\",\n          \"name\": \"QdrantApi account\"\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"6822aee2-7dfe-43ea-8238-ea0a3c8f0188\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -720,\n        -740\n      ],\n      \"parameters\": {\n        \"width\": 440,\n        \"height\": 1320,\n        \"content\": \"## 试试看吧！\\n### 本n8n工作流演示如何构建专属Qdrant MCP服务器，突破官方实现的功能限制\\n\\n这个n8n实现方案开放了Qdrant更多炫酷API特性，包括分面搜索、分组搜索和推荐API。借此我们可以构建高度可定制、易维护的Qdrant MCP服务器，赋能商业智能分析。\\n\\n本MCP示例基于官方参考实现开发（代码库见：https://github.com/qdrant/mcp-server-qdrant/）\\n\\n### 实现原理\\n* 采用MCP服务器触发器连接5个自定义工作流工具。由于每个任务需多个节点协同，故使用自定义工作流工具封装\\n* 混合运用n8n原生Qdrant节点（如文档插入/相似性搜索等简单操作）与HTTP节点（直接调用Qdrant API实现分面搜索/分组搜索/推荐）\\n* 通过\\\"字段编辑\\\"和\\\"聚合\\\"节点向MCP客户端返回标准化响应\\n\\n### 使用指南\\n* 该Qdrant MCP服务器支持选择与创建操作，兼容所有标准MCP客户端管理Qdrant集合。使用前需预先创建集合，请按准备步骤操作！\\n* 参照n8n官方文档连接MCP客户端：https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-langchain.mcptrigger/#integrating-with-claude-desktop\\n* 在MCP客户端尝试以下查询：\\n  * \\\"能列出集合中现有的公司吗？\\\"\\n  * \\\"客户如何评价X公司的产品配送服务？\\\"\\n  * \\\"X公司和Y公司的客户对产品易用性有何评价？\\\"\\n\\n### 环境要求\\n* 向量数据库Qdrant（云托管或自建实例均可）\\n* MCP客户端工具（如Claude Desktop：https://claude.ai/download）\\n\\n### 自定义调整\\n* 根据预期查询类型调整工具输入参数，优化智能体参数设置\\n* 不需要评论分析？本模板技术方案适用于任意类型集合\\n* 正式上线前请务必启用MCP服务器身份验证，保障服务安全\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"f0b1f04f-b3bd-4ad0-b128-17a96cf52b81\",\n      \"name\": \"Create Facet Index\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        260,\n        -580\n      ],\n      \"parameters\": {\n        \"url\": \"http://qdrant:6333/collections/trustpilot_reviews/index\",\n        \"method\": \"PUT\",\n        \"options\": {},\n        \"jsonBody\": \"{\\n  \\\"field_name\\\": \\\"metadata.company_id\\\",\\n  \\\"field_schema\\\": \\\"keyword\\\"\\n}\",\n        \"sendBody\": true,\n        \"specifyBody\": \"json\"\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"481c298b-c9e7-412e-aaa0-2e1565fabda8\",\n      \"name\": \"Create Collection\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        60,\n        -580\n      ],\n      \"parameters\": {\n        \"url\": \"http://qdrant:6333/collections/trustpilot_reviews\",\n        \"method\": \"PUT\",\n        \"options\": {},\n        \"jsonBody\": \"{\\n  \\\"vectors\\\": {\\n    \\\"distance\\\": \\\"Cosine\\\",\\n    \\\"size\\\": 1536\\n  }\\n}\",\n        \"sendBody\": true,\n        \"specifyBody\": \"json\"\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"07e1f0f3-6f24-4a67-9b07-75667f496a9a\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -220,\n        -740\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 700,\n        \"height\": 360,\n        \"content\": \"## Prerequisite: Setup Qdrant Collection\\nIf you don't have an existing Qdrant Collection, you can use this manual flow to get started.\\n1. Creates a collection called \\\"trustpilot_reviews\\\"\\n2. Creates an index to allow for facet search ie. list of values of a the \\\"company_id\\\" metadata key.\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"df0dacdb-4238-475b-9d98-ae7ce9e3142d\",\n      \"name\": \"When clicking ‘Test workflow’\",\n      \"type\": \"n8n-nodes-base.manualTrigger\",\n      \"position\": [\n        -140,\n        -580\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"8c0f0e65-82d2-427e-8c6d-2f89bd225f46\",\n      \"name\": \"Sticky Note4\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -220,\n        -200\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 380,\n        \"height\": 100,\n        \"content\": \"### 始终验证您的服务器身份！\\n在投入生产环境前，强烈建议您为MCP服务器触发器启用身份验证功能。\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"Insert\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"Qdrant MCP Server\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Search\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"Qdrant MCP Server\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Compare\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"Qdrant MCP Server\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Operation\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"List by Facet API\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Insert Reviews\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Search Reviews\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Get Embeddings1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Preferences to Items\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Recommend\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"Qdrant MCP Server\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Has Results?\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Aggregate Compare Response\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Empty Compare Response\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Has Results?1\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Aggregate Recommend Response\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Empty Compare Response1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"ListCompanies\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"Qdrant MCP Server\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Recommend API\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Simplify Recommend Response\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get Embeddings\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Aggregate Embeddings\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Insert Reviews\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get Insert Response\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Search Reviews\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get Search Response\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get Embeddings1\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Aggregate Embeddings1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Group Search API\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Split Out Companies\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Create Collection\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Create Facet Index\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Embeddings OpenAI\": {\n      \"ai_embedding\": [\n        [\n          {\n            \"node\": \"Insert Reviews\",\n            \"type\": \"ai_embedding\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Embeddings OpenAI1\": {\n      \"ai_embedding\": [\n        [\n          {\n            \"node\": \"Search Reviews\",\n            \"type\": \"ai_embedding\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Default Data Loader\": {\n      \"ai_document\": [\n        [\n          {\n            \"node\": \"Insert Reviews\",\n            \"type\": \"ai_document\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Filter By CompanyId\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Has Results?\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Split Out Companies\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Simplify Group Results\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Aggregate Embeddings\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Recommend API\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Preferences to Items\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get Embeddings\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Aggregate Embeddings1\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Group Search API\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Simplify Group Results\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Filter By CompanyId\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Simplify Recommend Response\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Has Results?1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Recursive Character Text Splitter\": {\n      \"ai_textSplitter\": [\n        [\n          {\n            \"node\": \"Default Data Loader\",\n            \"type\": \"ai_textSplitter\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When Executed by Another Workflow\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Operation\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When clicking ‘Test workflow’\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Create Collection\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}