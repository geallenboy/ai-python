{
  "url": "https://n8n.io/workflows/1807-sync-zendesk-tickets-to-pipedrive-contact-owners/",
  "title": "Sync Zendesk tickets to Pipedrive contact owners",
  "author": "n8n Team",
  "publish_date": "Last update 10 months ago",
  "publish_date_absolute": "2024-07-25",
  "categories": [
    {
      "name": "Sales"
    },
    {
      "name": "Support"
    }
  ],
  "workflow_json": "",
  "readme": "This workflow syncs Zendesk tickets to Pipedrive contact owners.\n\nThis workflow is triggered every day at 09:00 with Zendesk collecting all the tickets updated after the last execution timestamp and updating them according to Pipedrive contacts. It also adds Zendesk comments to the tickets as notes in Pipedrive.\n\n## Prerequisites\n\n  * Pipedrive account and [Pipedrive credentials](https://docs.n8n.io/integrations/builtin/credentials/pipedrive/)\n  * Zendesk account and [Zendesk credentials](https://docs.n8n.io/integrations/builtin/credentials/zendesk/)\n\n\n\n_Note: The Pipedrive and the Zendesk accounts need to be created by the same person / with the same email._\n\n## How it works\n\n  1. Cron node triggers the workflow every day at 09:00.\n  2. Zendesk node collects all the tickets updated after the last execution timestamp.\n  3. If node checks if the channel in the ticket is an email, and if so, it continues the workflow.\n  4. The Item Lists node removes duplicates to make search efficient.\n  5. Pipedrive node searches persons by email.\n  6. Set node renames and keeps only needed fields (email & person id)\n  7. Merge by key node adds the Pipedrive contact id to Zendesk tickets.\n  8. The HTTP Request node gets Zendesk comments for tickets and the Merge node adds them to tickets.\n  9. Split node adds nodes in batches with each iteration.\n  10. Item list node splits comments into separate items.\n  11. Pipedrive node adds comment as notes.\n  12. If node checks if the data processing is done and if not, goes back to the Split node.  \nThe Function Item node sets the new last execution timestamp.\n\n\n",
  "crawled_at": "2025-05-25T20:08:00.526322",
  "readme_zh": "该工作流将Zendesk工单同步至Pipedrive联系人所有者。\n\n本工作流每日09:00自动触发，Zendesk会收集上次执行时间戳之后更新的所有工单，并根据Pipedrive联系人进行更新。同时会将Zendesk工单中的评论作为备注添加至Pipedrive。\n\n## 前提条件\n\n* Pipedrive账户及[Pipedrive凭证](https://docs.n8n.io/integrations/builtin/credentials/pipedrive/)\n* Zendesk账户及[Zendesk凭证](https://docs.n8n.io/integrations/builtin/credentials/zendesk/)\n\n_注：Pipedrive和Zendesk账户需由同一人/使用同一邮箱创建_\n\n## 运行机制\n\n1. Cron节点每日09:00触发工作流  \n2. Zendesk节点收集上次执行时间戳后更新的所有工单  \n3. If节点检查工单渠道是否为邮件，若是则继续流程  \n4. Item Lists节点去重以提高搜索效率  \n5. Pipedrive节点通过邮箱搜索联系人  \n6. Set节点重命名并仅保留必要字段（邮箱和联系人ID）  \n7. Merge by key节点将Pipedrive联系人ID添加至Zendesk工单  \n8. HTTP Request节点获取Zendesk工单评论，Merge节点将其添加至工单  \n9. Split节点分批处理节点迭代  \n10. Item list节点将评论拆分为独立条目  \n11. Pipedrive节点将评论添加为备注  \n12. If节点检查数据处理是否完成，若未完成则返回Split节点  \n函数节点设置新的最后执行时间戳",
  "title_zh": "将Zendesk工单同步至Pipedrive联系人所有者",
  "publish_date_zh": "最后更新于9个月前",
  "workflow_json_zh": "{\n  \"meta\": {\n    \"instanceId\": \"237600ca44303ce91fa31ee72babcdc8493f55ee2c0e8aa2b78b3b4ce6f70bd9\"\n  },\n  \"nodes\": [\n    {\n      \"id\": \"a4280167-97e0-4d12-bdfc-735dd9c69f03\",\n      \"name\": \"NoOp\",\n      \"type\": \"n8n-nodes-base.noOp\",\n      \"position\": [\n        1160,\n        540\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"a3ad4e3b-0841-4a6e-993b-5239d9e56eaf\",\n      \"name\": \"Get last execution timestamp\",\n      \"type\": \"n8n-nodes-base.functionItem\",\n      \"position\": [\n        420,\n        300\n      ],\n      \"parameters\": {\n        \"functionCode\": \"// Code here will run once per input item.\\n// More info and help: https://docs.n8n.io/nodes/n8n-nodes-base.functionItem\\n// Tip: You can use luxon for dates and $jmespath for querying JSON structures\\n\\n// Add a new field called 'myNewField' to the JSON of the item\\nconst staticData = getWorkflowStaticData('global');\\n\\nif(!staticData.lastExecution){\\n  staticData.lastExecution = new Date().toISOString();\\n}\\n\\nitem.executionTimeStamp = new Date().toISOString();\\nitem.lastExecution = staticData.lastExecution;\\n\\n\\nreturn item;\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"f917bc42-8b9f-4b60-860c-360eeb86b88c\",\n      \"name\": \"Set new last execution timestamp\",\n      \"type\": \"n8n-nodes-base.functionItem\",\n      \"position\": [\n        4440,\n        140\n      ],\n      \"parameters\": {\n        \"functionCode\": \"// Code here will run once per input item.\\n// More info and help: https://docs.n8n.io/nodes/n8n-nodes-base.functionItem\\n// Tip: You can use luxon for dates and $jmespath for querying JSON structures\\n\\n// Add a new field called 'myNewField' to the JSON of the item\\nconst staticData = getWorkflowStaticData('global');\\n\\nstaticData.lastExecution = $item(0).$node[\\\"Get last execution timestamp\\\"].executionTimeStamp;\\n\\nreturn item;\"\n      },\n      \"executeOnce\": true,\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"ff141018-5307-4754-a48a-2311fcd15f85\",\n      \"name\": \"Pipedrive person Id found\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        2280,\n        300\n      ],\n      \"parameters\": {\n        \"conditions\": {\n          \"string\": [\n            {\n              \"value1\": \"={{ $json[\\\"PipeDrivePersonId\\\"] }}\",\n              \"operation\": \"isNotEmpty\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"d06b1dae-77cb-4c0b-98dc-0e7184f95095\",\n      \"name\": \"NoOp1\",\n      \"type\": \"n8n-nodes-base.noOp\",\n      \"position\": [\n        2620,\n        480\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"e8a01cec-06d1-4fe6-8920-55fdd143f626\",\n      \"name\": \"Get Zendesk comments for tickets\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        2620,\n        280\n      ],\n      \"parameters\": {\n        \"url\": \"=https://n8n.zendesk.com/api/v2/tickets/{{$json[\\\"id\\\"]}}/comments\",\n        \"options\": {},\n        \"authentication\": \"predefinedCredentialType\",\n        \"nodeCredentialType\": \"zendeskApi\"\n      },\n      \"credentials\": {\n        \"zendeskApi\": {\n          \"id\": \"5\",\n          \"name\": \"Zendesk account\"\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"7f7addcb-4858-4fd0-b1c2-29800365241b\",\n      \"name\": \"Add comments to tickets\",\n      \"type\": \"n8n-nodes-base.merge\",\n      \"position\": [\n        2860,\n        160\n      ],\n      \"parameters\": {\n        \"join\": \"inner\",\n        \"mode\": \"mergeByIndex\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"4ab3e897-b3d1-47f8-8c81-640e2ca6b3de\",\n      \"name\": \"Add Pipedrive person Id to Zendesk tickets\",\n      \"type\": \"n8n-nodes-base.merge\",\n      \"position\": [\n        2060,\n        300\n      ],\n      \"parameters\": {\n        \"mode\": \"mergeByKey\",\n        \"propertyName1\": \"via.source.from.address\",\n        \"propertyName2\": \"primary_email\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"1b25adda-15eb-4e23-bfb2-0a034656d8e2\",\n      \"name\": \"Get tickets updated after last execution\",\n      \"type\": \"n8n-nodes-base.zendesk\",\n      \"position\": [\n        640,\n        300\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"query\": \"=updated>{{ $json[\\\"lastExecution\\\"] }}\",\n          \"sortBy\": \"updated_at\",\n          \"sortOrder\": \"desc\"\n        },\n        \"operation\": \"getAll\"\n      },\n      \"credentials\": {\n        \"zendeskApi\": {\n          \"id\": \"5\",\n          \"name\": \"Zendesk account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"4884b8f5-d3f1-404d-87b3-1a802553cbee\",\n      \"name\": \"Channel is email\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        860,\n        300\n      ],\n      \"parameters\": {\n        \"conditions\": {\n          \"string\": [\n            {\n              \"value1\": \"={{ $json[\\\"via\\\"].channel }}\",\n              \"value2\": \"email\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"48541dcf-8ea6-47b8-ad52-1b3045df6832\",\n      \"name\": \"Rename fields and keep only needed fields\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        1820,\n        360\n      ],\n      \"parameters\": {\n        \"values\": {\n          \"number\": [\n            {\n              \"name\": \"PipeDrivePersonId\",\n              \"value\": \"={{ $json[\\\"id\\\"] }}\"\n            }\n          ],\n          \"string\": [\n            {\n              \"name\": \"primary_email\",\n              \"value\": \"={{ $json[\\\"primary_email\\\"] }}\"\n            }\n          ]\n        },\n        \"options\": {},\n        \"keepOnlySet\": true\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"e66d6b04-6a4e-4ab4-98a4-efba4bc5ec12\",\n      \"name\": \"Search persons by email\",\n      \"type\": \"n8n-nodes-base.pipedrive\",\n      \"position\": [\n        1600,\n        360\n      ],\n      \"parameters\": {\n        \"term\": \"={{ $json[\\\"SearchEmail\\\"] }}\",\n        \"resource\": \"person\",\n        \"operation\": \"search\",\n        \"additionalFields\": {\n          \"fields\": \"email\"\n        }\n      },\n      \"credentials\": {\n        \"pipedriveApi\": {\n          \"id\": \"1\",\n          \"name\": \"Pipedrive account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"01e008cf-6867-48b3-9a0d-b1b264bb5c08\",\n      \"name\": \"Remove duplicates to make search efficient\",\n      \"type\": \"n8n-nodes-base.itemLists\",\n      \"position\": [\n        1360,\n        360\n      ],\n      \"parameters\": {\n        \"compare\": \"selectedFields\",\n        \"options\": {},\n        \"operation\": \"removeDuplicates\",\n        \"fieldsToCompare\": {\n          \"fields\": [\n            {\n              \"fieldName\": \"SearchEmail\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"bc3ac74d-ac87-46b8-bd59-6cafe0e0e59c\",\n      \"name\": \"Set search email\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        1160,\n        360\n      ],\n      \"parameters\": {\n        \"values\": {\n          \"string\": [\n            {\n              \"name\": \"SearchEmail\",\n              \"value\": \"={{ $json[\\\"via\\\"].source.from.address }}\"\n            }\n          ]\n        },\n        \"options\": {},\n        \"keepOnlySet\": true\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"e0cf4204-7640-41c7-9adc-39d2d86b6144\",\n      \"name\": \"Process commenst per ticket\",\n      \"type\": \"n8n-nodes-base.splitInBatches\",\n      \"position\": [\n        3080,\n        160\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"batchSize\": 1\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"056646c3-7e1f-4195-92bd-1c3c1c9e8d25\",\n      \"name\": \"New comment\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        3540,\n        160\n      ],\n      \"parameters\": {\n        \"conditions\": {\n          \"dateTime\": [\n            {\n              \"value1\": \"={{ $json[\\\"created_at\\\"] }}\",\n              \"value2\": \"={{$item(0).$node[\\\"Get last execution timestamp\\\"].json[\\\"lastExecution\\\"]}}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1,\n      \"alwaysOutputData\": true\n    },\n    {\n      \"id\": \"77ef979c-313e-4904-bf3e-8716f1e5c86f\",\n      \"name\": \"Split comments to seperate items\",\n      \"type\": \"n8n-nodes-base.itemLists\",\n      \"position\": [\n        3320,\n        160\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"fieldToSplitOut\": \"comments\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"01fbc85c-0c85-48d1-b2b2-cdf8d6310578\",\n      \"name\": \"Add comment as a note in Pipedrive\",\n      \"type\": \"n8n-nodes-base.pipedrive\",\n      \"position\": [\n        3820,\n        0\n      ],\n      \"parameters\": {\n        \"content\": \"=Message imported from Zendesk\\n------------------------------------------------\\nFrom {{$json[\\\"via\\\"][\\\"source\\\"][\\\"from\\\"][\\\"name\\\"] ?? 'Zendesk user'}}\\n------------------------------------------------\\n{{$json[\\\"body\\\"]}}\",\n        \"resource\": \"note\",\n        \"additionalFields\": {\n          \"person_id\": \"={{$item(0).$node[\\\"Process commenst per ticket\\\"].json[\\\"PipeDrivePersonId\\\"]}}\"\n        }\n      },\n      \"credentials\": {\n        \"pipedriveApi\": {\n          \"id\": \"1\",\n          \"name\": \"Pipedrive account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"12296cee-7786-489d-9a33-7d0d1d7d755b\",\n      \"name\": \"NoOp2\",\n      \"type\": \"n8n-nodes-base.noOp\",\n      \"position\": [\n        3820,\n        180\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"0c21dbce-0820-4300-8da4-6e795288aa0b\",\n      \"name\": \"Every day at 09:00\",\n      \"type\": \"n8n-nodes-base.cron\",\n      \"position\": [\n        220,\n        300\n      ],\n      \"parameters\": {\n        \"triggerTimes\": {\n          \"item\": [\n            {\n              \"hour\": 9\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"e6990744-45e2-4c08-b611-7f5bbac7ad9a\",\n      \"name\": \"Done processing\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        4160,\n        160\n      ],\n      \"parameters\": {\n        \"conditions\": {\n          \"boolean\": [\n            {\n              \"value1\": \"={{$node[\\\"Process commenst per ticket\\\"].context[\\\"noItemsLeft\\\"]}}\",\n              \"value2\": true\n            }\n          ]\n        },\n        \"combineOperation\": \"any\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"connections\": {\n    \"New comment\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Add comment as a note in Pipedrive\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"NoOp2\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Done processing\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set new last execution timestamp\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Process commenst per ticket\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Channel is email\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set search email\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Add Pipedrive person Id to Zendesk tickets\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"NoOp\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Set search email\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Remove duplicates to make search efficient\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Every day at 09:00\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get last execution timestamp\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Add comments to tickets\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Process commenst per ticket\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Search persons by email\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Rename fields and keep only needed fields\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Pipedrive person Id found\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get Zendesk comments for tickets\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Add comments to tickets\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"NoOp1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Process commenst per ticket\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Split comments to seperate items\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get last execution timestamp\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get tickets updated after last execution\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get Zendesk comments for tickets\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Add comments to tickets\",\n            \"type\": \"main\",\n            \"index\": 1\n          }\n        ]\n      ]\n    },\n    \"Split comments to seperate items\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"New comment\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Add comment as a note in Pipedrive\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Done processing\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get tickets updated after last execution\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Channel is email\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Rename fields and keep only needed fields\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Add Pipedrive person Id to Zendesk tickets\",\n            \"type\": \"main\",\n            \"index\": 1\n          }\n        ]\n      ]\n    },\n    \"Add Pipedrive person Id to Zendesk tickets\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Pipedrive person Id found\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Remove duplicates to make search efficient\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Search persons by email\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}