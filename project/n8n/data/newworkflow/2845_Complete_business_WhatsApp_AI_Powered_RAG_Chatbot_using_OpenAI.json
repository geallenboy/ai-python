{
  "url": "https://n8n.io/workflows/2845-complete-business-whatsapp-ai-powered-rag-chatbot-using-openai/",
  "title": "Complete business WhatsApp AI-Powered RAG Chatbot using OpenAI",
  "author": "Davide",
  "publish_date": "Last update 2 months ago",
  "publish_date_absolute": "2025-03-26",
  "categories": [
    {
      "name": "AI"
    }
  ],
  "workflow_json": "{\"id\":\"NLOITjwt4iZK16Qq\",\"meta\":{\"instanceId\":\"a4bfc93e975ca233ac45ed7c9227d84cf5a2329310525917adaf3312e10d5462\",\"templateCredsSetupCompleted\":true},\"name\":\"Business WhatsApp AI RAG Chatbot\",\"tags\":[],\"nodes\":[{\"id\":\"5be03c5c-e02d-4770-b0db-795dff0bf84f\",\"name\":\"Respond to Webhook\",\"type\":\"n8n-nodes-base.respondToWebhook\",\"position\":[-60,1140],\"parameters\":{\"options\":{},\"respondWith\":\"text\",\"responseBody\":\"={{ $json.query['hub.challenge'] }}\"},\"typeVersion\":1.1},{\"id\":\"8e24d1bc-8e65-4562-8cc4-4ce9c917841b\",\"name\":\"AI Agent\",\"type\":\"@n8n/n8n-nodes-langchain.agent\",\"position\":[480,1480],\"parameters\":{\"text\":\"={{ $('Respond').item.json.body.entry[0].changes[0].value.messages[0].text.body }}\",\"agent\":\"conversationalAgent\",\"options\":{\"systemMessage\":\"You are an AI-powered assistant for an electronics store. Your primary goal is to assist customers by providing accurate and helpful information about products, troubleshooting tips, and general support. Use the provided knowledge base (retrieved documents) to answer questions with precision and professionalism.\\n\\n**Guidelines**:\\n1. **Product Information**:\\n   - Provide detailed descriptions of products, including specifications, features, and compatibility.\\n   - Highlight key selling points and differences between similar products.\\n   - Mention availability, pricing, and promotions if applicable.\\n\\n2. **Technical Support**:\\n   - Offer step-by-step troubleshooting guides for common issues.\\n   - Suggest solutions for setup, installation, or configuration problems.\\n   - If the issue is complex, recommend contacting the store’s support team for further assistance.\\n\\n3. **Customer Service**:\\n   - Respond politely and professionally to all inquiries.\\n   - If a question is unclear, ask for clarification to provide the best possible answer.\\n   - For order-related questions (e.g., status, returns, or cancellations), guide customers on how to proceed using the store’s systems.\\n\\n4. **Knowledge Base Usage**:\\n   - Always reference the provided knowledge base (retrieved documents) to ensure accuracy.\\n   - If the knowledge base does not contain relevant information, inform the customer and suggest alternative resources or actions.\\n\\n5. **Tone and Style**:\\n   - Use a friendly, approachable, and professional tone.\\n   - Avoid technical jargon unless the customer demonstrates familiarity with the topic.\\n   - Keep responses concise but informative.\\n\\n**Example Interactions**:\\n1. **Product Inquiry**:\\n   - Customer: \\\"What’s the difference between the XYZ Smartwatch and the ABC Smartwatch?\\\"\\n   - AI: \\\"The XYZ Smartwatch features a longer battery life (up to 7 days) and built-in GPS, while the ABC Smartwatch has a brighter AMOLED display and supports wireless charging. Both are compatible with iOS and Android devices. Would you like more details on either product?\\\"\\n\\n2. **Technical Support**:\\n   - Customer: \\\"My wireless router isn’t connecting to the internet.\\\"\\n   - AI: \\\"Please try the following steps: 1) Restart your router and modem. 2) Ensure all cables are securely connected. 3) Check if the router’s LED indicators show a stable connection. If the issue persists, you may need to reset the router to factory settings. Would you like a detailed guide for resetting your router?\\\"\\n\\n3. **Customer Service**:\\n   - Customer: \\\"How do I return a defective product?\\\"\\n   - AI: \\\"To return a defective product, please visit our Returns Portal on our website and enter your order number. You’ll receive a return label and instructions. If you need further assistance, our support team is available at support@electronicsstore.com.\\\"\\n\\n**Limitations**:\\n- If the question is outside the scope of the knowledge base or requires human intervention, inform the customer and provide contact details for the appropriate department.\\n- Do not provide speculative or unverified information. Always rely on the knowledge base or direct the customer to official resources.\"},\"promptType\":\"define\"},\"typeVersion\":1.7},{\"id\":\"22fe09e5-053c-4f80-9e44-71f533492e31\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-340,1360],\"parameters\":{\"width\":459,\"height\":485,\"content\":\"# STEP 4\\n\\n## RAG System\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n* *Respond* webhook receives various POST Requests from Meta regarding WhatsApp messages (user messages + status notifications)\\n* Check if the incoming JSON contains user message\\n* Echo back the text message to the user. This is a custom message, not a WhatsApp Business template message\\n\"},\"typeVersion\":1},{\"id\":\"cfed3c49-be8a-4d1a-aa3a-5e60a19c00ac\",\"name\":\"OpenAI Chat Model\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\"position\":[480,1680],\"parameters\":{\"model\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"gpt-4o-mini\"},\"options\":{}},\"credentials\":{\"openAiApi\":{\"id\":\"CDX6QM4gLYanh0P4\",\"name\":\"OpenAi account\"}},\"typeVersion\":1.2},{\"id\":\"55970db5-284d-40b9-ad6f-f43b513aac45\",\"name\":\"When clicking ‘Test workflow’\",\"type\":\"n8n-nodes-base.manualTrigger\",\"position\":[-620,200],\"parameters\":{},\"typeVersion\":1},{\"id\":\"99de11b0-ab4a-49fe-977b-b3102c9ff1cf\",\"name\":\"Qdrant Vector Store\",\"type\":\"@n8n/n8n-nodes-langchain.vectorStoreQdrant\",\"position\":[360,320],\"parameters\":{\"mode\":\"insert\",\"options\":{},\"qdrantCollection\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"\"}},\"credentials\":{\"qdrantApi\":{\"id\":\"iyQ6MQiVaF3VMBmt\",\"name\":\"QdrantApi account\"}},\"typeVersion\":1},{\"id\":\"619d2d2f-7a1e-49ba-a3ae-24bf24287dd2\",\"name\":\"Create collection\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[-320,60],\"parameters\":{\"url\":\"https://QDRANTURL/collections/COLLECTION\",\"method\":\"POST\",\"options\":{},\"jsonBody\":\"{\\n  \\\"filter\\\": {}\\n}\",\"sendBody\":true,\"sendHeaders\":true,\"specifyBody\":\"json\",\"authentication\":\"genericCredentialType\",\"genericAuthType\":\"httpHeaderAuth\",\"headerParameters\":{\"parameters\":[{\"name\":\"Content-Type\",\"value\":\"application/json\"}]}},\"credentials\":{\"httpHeaderAuth\":{\"id\":\"qhny6r5ql9wwotpn\",\"name\":\"Qdrant API (Hetzner)\"}},\"typeVersion\":4.2},{\"id\":\"b61d5d74-14d2-4488-a0d6-3f7df9745329\",\"name\":\"Refresh collection\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[-320,320],\"parameters\":{\"url\":\"https://QDRANTURL/collections/COLLECTION/points/delete\",\"method\":\"POST\",\"options\":{},\"jsonBody\":\"{\\n  \\\"filter\\\": {}\\n}\",\"sendBody\":true,\"sendHeaders\":true,\"specifyBody\":\"json\",\"authentication\":\"genericCredentialType\",\"genericAuthType\":\"httpHeaderAuth\",\"headerParameters\":{\"parameters\":[{\"name\":\"Content-Type\",\"value\":\"application/json\"}]}},\"credentials\":{\"httpHeaderAuth\":{\"id\":\"qhny6r5ql9wwotpn\",\"name\":\"Qdrant API (Hetzner)\"}},\"typeVersion\":4.2},{\"id\":\"71c8817f-f5be-4900-aecc-14d483993c4c\",\"name\":\"Get folder\",\"type\":\"n8n-nodes-base.googleDrive\",\"position\":[-100,320],\"parameters\":{\"filter\":{\"driveId\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"My Drive\",\"cachedResultUrl\":\"https://drive.google.com/drive/my-drive\",\"cachedResultName\":\"My Drive\"},\"folderId\":{\"__rl\":true,\"mode\":\"id\",\"value\":\"=test-whatsapp\"}},\"options\":{},\"resource\":\"fileFolder\"},\"credentials\":{\"googleDriveOAuth2Api\":{\"id\":\"HEy5EuZkgPZVEa9w\",\"name\":\"Google Drive account (n3w.it)\"}},\"typeVersion\":3},{\"id\":\"c14e570d-527d-4cc2-b0c0-2406b814ffc6\",\"name\":\"Download Files\",\"type\":\"n8n-nodes-base.googleDrive\",\"position\":[120,320],\"parameters\":{\"fileId\":{\"__rl\":true,\"mode\":\"id\",\"value\":\"={{ $json.id }}\"},\"options\":{\"googleFileConversion\":{\"conversion\":{\"docsToFormat\":\"text/plain\"}}},\"operation\":\"download\"},\"credentials\":{\"googleDriveOAuth2Api\":{\"id\":\"HEy5EuZkgPZVEa9w\",\"name\":\"Google Drive account (n3w.it)\"}},\"typeVersion\":3},{\"id\":\"7f1ffbd5-7aa0-49d3-aa11-9568ac704d6e\",\"name\":\"Embeddings OpenAI\",\"type\":\"@n8n/n8n-nodes-langchain.embeddingsOpenAi\",\"position\":[340,520],\"parameters\":{\"options\":{}},\"credentials\":{\"openAiApi\":{\"id\":\"CDX6QM4gLYanh0P4\",\"name\":\"OpenAi account\"}},\"typeVersion\":1.1},{\"id\":\"bdc58292-5880-41b9-bc55-d6437f037629\",\"name\":\"Default Data Loader\",\"type\":\"@n8n/n8n-nodes-langchain.documentDefaultDataLoader\",\"position\":[520,520],\"parameters\":{\"options\":{},\"dataType\":\"binary\"},\"typeVersion\":1},{\"id\":\"7df52ba0-011e-44a5-b25d-a4610f903ed9\",\"name\":\"Token Splitter\",\"type\":\"@n8n/n8n-nodes-langchain.textSplitterTokenSplitter\",\"position\":[480,680],\"parameters\":{\"chunkSize\":300,\"chunkOverlap\":30},\"typeVersion\":1},{\"id\":\"b3306890-d527-44d9-bd42-2decd61b35a2\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-880,1240],\"parameters\":{\"color\":3,\"width\":405,\"height\":177,\"content\":\"## Important!\\n### Configure the webhook nodes this way:\\n* Make sure that both *Verify* and *Respond* have the same URL\\n* *Verify* should have GET HTTP Method\\n* *Respond* should have POST HTTP Method\"},\"typeVersion\":1},{\"id\":\"2da39c54-1596-4674-99c5-8fdac7873ea3\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-340,900],\"parameters\":{\"color\":5,\"width\":618,\"height\":392,\"content\":\"# STEP 3\\n\\n## Create Webhook\\n* Go to your [Meta for Developers App page](https://developers.facebook.com/apps/), navigate to the App settings\\n* Add a **production webhook URL** as a new Callback URL\\n* *Verify* webhook receives a GET Request and sends back a verification code\\n* After that you can delete this\\n\"},\"typeVersion\":1},{\"id\":\"9c8a18df-d2a9-4d91-a799-a8ee6c5160ba\",\"name\":\"Verify\",\"type\":\"n8n-nodes-base.webhook\",\"position\":[-300,1140],\"webhookId\":\"f0d2e6f6-8fda-424d-b377-0bd191343c20\",\"parameters\":{\"path\":\"f0d2e6f6-8fda-424d-b377-0bd191343c20\",\"options\":{},\"responseMode\":\"responseNode\"},\"typeVersion\":2},{\"id\":\"1ca39545-9ec1-489d-bcaf-f6289163d3e0\",\"name\":\"Respond\",\"type\":\"n8n-nodes-base.webhook\",\"position\":[-320,1520],\"webhookId\":\"f0d2e6f6-8fda-424d-b377-0bd191343c20\",\"parameters\":{\"path\":\"f0d2e6f6-8fda-424d-b377-0bd191343c20\",\"options\":{},\"httpMethod\":\"POST\"},\"typeVersion\":2},{\"id\":\"02ae9009-b34b-49a5-86f2-50e681125d77\",\"name\":\"is Message?\",\"type\":\"n8n-nodes-base.if\",\"position\":[-100,1520],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"loose\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"959fbffc-876a-4235-87be-2dedba4926cd\",\"operator\":{\"type\":\"object\",\"operation\":\"exists\",\"singleValue\":true},\"leftValue\":\"={{ $json.body.entry[0].changes[0].value.messages[0] }}\",\"rightValue\":\"\"}]},\"looseTypeValidation\":true},\"typeVersion\":2.2},{\"id\":\"9f866e16-cedb-4c43-ab38-e0e53703402a\",\"name\":\"Only message\",\"type\":\"n8n-nodes-base.whatsApp\",\"position\":[200,1620],\"parameters\":{\"textBody\":\"=You can only send text messages\",\"operation\":\"send\",\"phoneNumberId\":\"470271332838881\",\"requestOptions\":{},\"additionalFields\":{},\"recipientPhoneNumber\":\"={{ $('Respond').item.json.body.entry[0].changes[0].value.contacts[0].wa_id }}\"},\"credentials\":{\"whatsAppApi\":{\"id\":\"HDUOWQXeRXMVjo0Z\",\"name\":\"WhatsApp account\"}},\"typeVersion\":1},{\"id\":\"3867b8c8-db5f-40f6-b3ae-edf1ab732395\",\"name\":\"Send\",\"type\":\"n8n-nodes-base.whatsApp\",\"position\":[900,1480],\"parameters\":{\"textBody\":\"={{ $json.output }}\",\"operation\":\"send\",\"phoneNumberId\":\"470271332838881\",\"requestOptions\":{},\"additionalFields\":{},\"recipientPhoneNumber\":\"={{ $('Respond').item.json.body.entry[0].changes[0].value.contacts[0].wa_id }}\"},\"credentials\":{\"whatsAppApi\":{\"id\":\"HDUOWQXeRXMVjo0Z\",\"name\":\"WhatsApp account\"}},\"typeVersion\":1},{\"id\":\"401a8204-4cea-4bd0-9ae7-8c5c6797c586\",\"name\":\"Window Buffer Memory\",\"type\":\"@n8n/n8n-nodes-langchain.memoryBufferWindow\",\"position\":[640,1720],\"parameters\":{},\"typeVersion\":1.3},{\"id\":\"ff1ebe0d-b572-4b77-ad67-351c0ec17927\",\"name\":\"Sticky Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-120,0],\"parameters\":{\"color\":6,\"width\":880,\"height\":220,\"content\":\"# STEP 1\\n\\n## Create Qdrant Collection\\nChange:\\n- QDRANTURL\\n- COLLECTION\"},\"typeVersion\":1},{\"id\":\"df7bc44c-fb7d-4bc4-bc79-245f53e17eca\",\"name\":\"Sticky Note4\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-340,260],\"parameters\":{\"color\":4,\"width\":620,\"height\":400,\"content\":\"# STEP 2\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n## Documents vectorization with Qdrant and Google Drive\\nChange:\\n- QDRANTURL\\n- COLLECTION\"},\"typeVersion\":1},{\"id\":\"df4f90ab-1cbb-4335-893a-0f3e2a62be04\",\"name\":\"Sticky Note5\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[440,1360],\"parameters\":{\"width\":380,\"height\":260,\"content\":\"## Configure AI Agent\\nSet System prompt and chat model. If you want you can set any tools\"},\"typeVersion\":1},{\"id\":\"b0928ee4-2c6a-4bc0-a013-15504f157379\",\"name\":\"OpenAI Chat Model1\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\"position\":[980,1920],\"parameters\":{\"model\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"gpt-4o-mini\"},\"options\":{}},\"credentials\":{\"openAiApi\":{\"id\":\"CDX6QM4gLYanh0P4\",\"name\":\"OpenAi account\"}},\"typeVersion\":1.2},{\"id\":\"16ca729c-9492-4af1-a02f-9b3e5b4ebc43\",\"name\":\"Retrive Qdrant Vector Store\",\"type\":\"@n8n/n8n-nodes-langchain.vectorStoreQdrant\",\"position\":[620,1940],\"parameters\":{\"options\":{},\"qdrantCollection\":{\"__rl\":true,\"mode\":\"id\",\"value\":\"COLLECTION\"}},\"credentials\":{\"qdrantApi\":{\"id\":\"iyQ6MQiVaF3VMBmt\",\"name\":\"QdrantApi account\"}},\"typeVersion\":1},{\"id\":\"c950482d-23e3-4318-a878-f80f8cfee556\",\"name\":\"Embeddings OpenAI2\",\"type\":\"@n8n/n8n-nodes-langchain.embeddingsOpenAi\",\"position\":[500,2140],\"parameters\":{\"options\":{}},\"credentials\":{\"openAiApi\":{\"id\":\"CDX6QM4gLYanh0P4\",\"name\":\"OpenAi account\"}},\"typeVersion\":1.2},{\"id\":\"46347cfc-b4e7-4627-a991-3f30c12d7f42\",\"name\":\"RAG\",\"type\":\"@n8n/n8n-nodes-langchain.toolVectorStore\",\"position\":[840,1700],\"parameters\":{\"name\":\"company_data\",\"description\":\"Retrive data about company knowledge from vector store\"},\"typeVersion\":1}],\"active\":false,\"pinData\":{},\"settings\":{\"executionOrder\":\"v1\"},\"versionId\":\"b760b44b-24d8-41c6-8251-c7e6ddac82c1\",\"connections\":{\"RAG\":{\"ai_tool\":[[{\"node\":\"AI Agent\",\"type\":\"ai_tool\",\"index\":0}]]},\"Verify\":{\"main\":[[{\"node\":\"Respond to Webhook\",\"type\":\"main\",\"index\":0}]]},\"Respond\":{\"main\":[[{\"node\":\"is Message?\",\"type\":\"main\",\"index\":0}]]},\"AI Agent\":{\"main\":[[{\"node\":\"Send\",\"type\":\"main\",\"index\":0}]]},\"Get folder\":{\"main\":[[{\"node\":\"Download Files\",\"type\":\"main\",\"index\":0}]]},\"is Message?\":{\"main\":[[{\"node\":\"AI Agent\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Only message\",\"type\":\"main\",\"index\":0}]]},\"Download Files\":{\"main\":[[{\"node\":\"Qdrant Vector Store\",\"type\":\"main\",\"index\":0}]]},\"Token Splitter\":{\"ai_textSplitter\":[[{\"node\":\"Default Data Loader\",\"type\":\"ai_textSplitter\",\"index\":0}]]},\"Embeddings OpenAI\":{\"ai_embedding\":[[{\"node\":\"Qdrant Vector Store\",\"type\":\"ai_embedding\",\"index\":0}]]},\"OpenAI Chat Model\":{\"ai_languageModel\":[[{\"node\":\"AI Agent\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"Embeddings OpenAI2\":{\"ai_embedding\":[[{\"node\":\"Retrive Qdrant Vector Store\",\"type\":\"ai_embedding\",\"index\":0}]]},\"OpenAI Chat Model1\":{\"ai_languageModel\":[[{\"node\":\"RAG\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"Refresh collection\":{\"main\":[[{\"node\":\"Get folder\",\"type\":\"main\",\"index\":0}]]},\"Default Data Loader\":{\"ai_document\":[[{\"node\":\"Qdrant Vector Store\",\"type\":\"ai_document\",\"index\":0}]]},\"Window Buffer Memory\":{\"ai_memory\":[[{\"node\":\"AI Agent\",\"type\":\"ai_memory\",\"index\":0}]]},\"Retrive Qdrant Vector Store\":{\"ai_vectorStore\":[[{\"node\":\"RAG\",\"type\":\"ai_vectorStore\",\"index\":0}]]},\"When clicking ‘Test workflow’\":{\"main\":[[{\"node\":\"Create collection\",\"type\":\"main\",\"index\":0},{\"node\":\"Refresh collection\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "The provided workflow in n8n is designed to create a Business WhatsApp AI RAG (Retrieval-Augmented Generation) Chatbot.\n\n* * *\n\n### How it works:\n\n  1. **Webhook Setup** : The workflow begins by setting up webhooks for verification and response. The _Verify_ webhook receives GET requests and sends back a verification code, while the _Respond_ webhook handles incoming POST requests from Meta regarding WhatsApp messages.\n  2. **Message Handling** : Once a message is received, the workflow checks if the incoming JSON contains a user message. If it does, the message is processed further; otherwise, a generic response is sent.\n  3. **AI Agent Interaction** : The user's message is passed to the AI Agent node, which uses a conversational agent with a predefined system message tailored for an electronics store. This ensures that the AI provides accurate and professional responses based on the knowledge base.\n  4. **Knowledge Base Utilization** : The AI Agent references a knowledge base stored in Qdrant, a vector database. Documents from Google Drive are downloaded, vectorized using OpenAI embeddings, and stored in Qdrant for retrieval during conversations.\n  5. **Response Generation** : The AI Agent generates a response using the OpenAI chat model (gpt-4o-mini) and sends it back to the user via WhatsApp.\n\n\n\n* * *\n\n### Set up steps:\n\n  1. **Create Qdrant Collection** :\n\n     * Update the `QDRANTURL` and `COLLECTION` variables in the workflow.\n     * Use the _Create collection_ HTTP request node to initialize the collection in Qdrant.\n  2. **Vectorize Documents** :\n\n     * Configure the _Get folder_ and _Download Files_ nodes to fetch documents from a specified Google Drive folder.\n     * Use the _Embeddings OpenAI_ node to generate embeddings for the downloaded files.\n     * Store the vectorized documents in Qdrant using the _Qdrant Vector Store_ node.\n  3. **Configure Webhooks** :\n\n     * Ensure both _Verify_ and _Respond_ webhooks have the same URL.\n     * Set the _Verify_ webhook to use the GET HTTP method and the _Respond_ webhook to use the POST HTTP method.\n  4. **Set Up AI Agent** :\n\n     * Define the system prompt for the AI Agent, specifying guidelines for product information, technical support, customer service, and knowledge base usage.\n     * Link the AI Agent to the OpenAI chat model and configure any additional tools as needed.\n  5. **Test Workflow** :\n\n     * Trigger the workflow manually using the _When clicking ‘Test workflow’_ node to ensure all components are functioning correctly.\n     * Monitor the flow of data through the nodes and verify that responses are being generated and sent accurately.\n\n\n\nBy following these steps, the workflow will be fully operational, enabling a robust AI-powered chatbot capable of handling customer inquiries via WhatsApp.\n\n* * *\n\n### **Need help customizing?**\n\n[Contact me](mailto:info@n3w.it) for consulting and support or add me on [Linkedin](https://www.linkedin.com/in/davideboizza/).\n",
  "crawled_at": "2025-05-26T02:10:24.943576",
  "readme_zh": "提供的n8n工作流旨在创建一个商务版WhatsApp AI RAG（检索增强生成）聊天机器人。\n\n* * *\n\n### 运作原理：\n\n1. **Webhook设置**：工作流首先配置验证与响应的Webhook。验证Webhook接收GET请求并返回验证码，响应Webhook则处理Meta平台关于WhatsApp消息的POST请求。  \n2. **消息处理**：收到消息后，系统会检查传入JSON是否包含用户消息。若存在则继续处理，否则发送通用回复。  \n3. **AI代理交互**：用户消息传递至AI代理节点，该节点使用专为电子产品商店定制的预设系统消息对话代理，确保基于知识库提供精准专业的回复。  \n4. **知识库调用**：AI代理引用存储在Qdrant向量数据库中的知识库。从Google Drive下载文档后，通过OpenAI嵌入向量化处理并存入Qdrant，供对话时检索使用。  \n5. **回复生成**：AI代理利用OpenAI聊天模型（gpt-4o-mini）生成回复，并通过WhatsApp返回给用户。\n\n* * *\n\n### 配置步骤：\n\n1. **创建Qdrant集合**：\n   - 更新工作流中的`QDRANTURL`和`COLLECTION`变量  \n   - 使用\"创建集合\"HTTP请求节点在Qdrant中初始化集合  \n\n2. **文档向量化**：\n   - 配置\"获取文件夹\"和\"下载文件\"节点从指定Google Drive文件夹获取文档  \n   - 使用\"OpenAI嵌入\"节点为下载文件生成向量  \n   - 通过\"Qdrant向量存储\"节点将向量化文档存入Qdrant  \n\n3. **配置Webhook**：\n   - 确保验证与响应Webhook使用相同URL  \n   - 设置验证Webhook使用GET方法，响应Webhook使用POST方法  \n\n4. **设置AI代理**：\n   - 定义AI代理的系统提示，明确产品信息、技术支持、客户服务和知识库使用规范  \n   - 将AI代理连接至OpenAI聊天模型，按需配置其他工具  \n\n5. **测试工作流**：\n   - 通过\"点击测试工作流\"节点手动触发流程，确保各组件正常运行  \n   - 监控节点间数据流，验证回复生成与发送的准确性  \n\n完成上述步骤后，工作流即可全面运行，打造出能通过WhatsApp处理客户咨询的AI驱动聊天机器人。\n\n* * *\n\n### **需要定制帮助？**\n\n[联系我](mailto:info@n3w.it)获取咨询支持，或通过[Linkedin](https://www.linkedin.com/in/davideboizza/)添加好友。",
  "title_zh": "使用OpenAI构建完整的商业WhatsApp AI驱动RAG聊天机器人",
  "publish_date_zh": "上次更新于一个月前",
  "workflow_json_zh": "{\n  \"id\": \"NLOITjwt4iZK16Qq\",\n  \"meta\": {\n    \"instanceId\": \"a4bfc93e975ca233ac45ed7c9227d84cf5a2329310525917adaf3312e10d5462\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"name\": \"Business WhatsApp AI RAG Chatbot\",\n  \"tags\": [],\n  \"nodes\": [\n    {\n      \"id\": \"5be03c5c-e02d-4770-b0db-795dff0bf84f\",\n      \"name\": \"Respond to Webhook\",\n      \"type\": \"n8n-nodes-base.respondToWebhook\",\n      \"position\": [\n        -60,\n        1140\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"respondWith\": \"text\",\n        \"responseBody\": \"={{ $json.query['hub.challenge'] }}\"\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"8e24d1bc-8e65-4562-8cc4-4ce9c917841b\",\n      \"name\": \"AI Agent\",\n      \"type\": \"@n8n/n8n-nodes-langchain.agent\",\n      \"position\": [\n        480,\n        1480\n      ],\n      \"parameters\": {\n        \"text\": \"={{ $('Respond').item.json.body.entry[0].changes[0].value.messages[0].text.body }}\",\n        \"agent\": \"conversationalAgent\",\n        \"options\": {\n          \"systemMessage\": \"You are an AI-powered assistant for an electronics store. Your primary goal is to assist customers by providing accurate and helpful information about products, troubleshooting tips, and general support. Use the provided knowledge base (retrieved documents) to answer questions with precision and professionalism.\\n\\n**Guidelines**:\\n1. **Product Information**:\\n   - Provide detailed descriptions of products, including specifications, features, and compatibility.\\n   - Highlight key selling points and differences between similar products.\\n   - Mention availability, pricing, and promotions if applicable.\\n\\n2. **Technical Support**:\\n   - Offer step-by-step troubleshooting guides for common issues.\\n   - Suggest solutions for setup, installation, or configuration problems.\\n   - If the issue is complex, recommend contacting the store’s support team for further assistance.\\n\\n3. **Customer Service**:\\n   - Respond politely and professionally to all inquiries.\\n   - If a question is unclear, ask for clarification to provide the best possible answer.\\n   - For order-related questions (e.g., status, returns, or cancellations), guide customers on how to proceed using the store’s systems.\\n\\n4. **Knowledge Base Usage**:\\n   - Always reference the provided knowledge base (retrieved documents) to ensure accuracy.\\n   - If the knowledge base does not contain relevant information, inform the customer and suggest alternative resources or actions.\\n\\n5. **Tone and Style**:\\n   - Use a friendly, approachable, and professional tone.\\n   - Avoid technical jargon unless the customer demonstrates familiarity with the topic.\\n   - Keep responses concise but informative.\\n\\n**Example Interactions**:\\n1. **Product Inquiry**:\\n   - Customer: \\\"What’s the difference between the XYZ Smartwatch and the ABC Smartwatch?\\\"\\n   - AI: \\\"The XYZ Smartwatch features a longer battery life (up to 7 days) and built-in GPS, while the ABC Smartwatch has a brighter AMOLED display and supports wireless charging. Both are compatible with iOS and Android devices. Would you like more details on either product?\\\"\\n\\n2. **Technical Support**:\\n   - Customer: \\\"My wireless router isn’t connecting to the internet.\\\"\\n   - AI: \\\"Please try the following steps: 1) Restart your router and modem. 2) Ensure all cables are securely connected. 3) Check if the router’s LED indicators show a stable connection. If the issue persists, you may need to reset the router to factory settings. Would you like a detailed guide for resetting your router?\\\"\\n\\n3. **Customer Service**:\\n   - Customer: \\\"How do I return a defective product?\\\"\\n   - AI: \\\"To return a defective product, please visit our Returns Portal on our website and enter your order number. You’ll receive a return label and instructions. If you need further assistance, our support team is available at support@electronicsstore.com.\\\"\\n\\n**Limitations**:\\n- If the question is outside the scope of the knowledge base or requires human intervention, inform the customer and provide contact details for the appropriate department.\\n- Do not provide speculative or unverified information. Always rely on the knowledge base or direct the customer to official resources.\"\n        },\n        \"promptType\": \"define\"\n      },\n      \"typeVersion\": 1.7\n    },\n    {\n      \"id\": \"22fe09e5-053c-4f80-9e44-71f533492e31\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -340,\n        1360\n      ],\n      \"parameters\": {\n        \"width\": 459,\n        \"height\": 485,\n        \"content\": \"# 第四步\\n\\n## RAG系统\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"cfed3c49-be8a-4d1a-aa3a-5e60a19c00ac\",\n      \"name\": \"OpenAI Chat Model\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\n      \"position\": [\n        480,\n        1680\n      ],\n      \"parameters\": {\n        \"model\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gpt-4o-mini\"\n        },\n        \"options\": {}\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"CDX6QM4gLYanh0P4\",\n          \"name\": \"OpenAi account\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"55970db5-284d-40b9-ad6f-f43b513aac45\",\n      \"name\": \"When clicking ‘Test workflow’\",\n      \"type\": \"n8n-nodes-base.manualTrigger\",\n      \"position\": [\n        -620,\n        200\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"99de11b0-ab4a-49fe-977b-b3102c9ff1cf\",\n      \"name\": \"Qdrant Vector Store\",\n      \"type\": \"@n8n/n8n-nodes-langchain.vectorStoreQdrant\",\n      \"position\": [\n        360,\n        320\n      ],\n      \"parameters\": {\n        \"mode\": \"insert\",\n        \"options\": {},\n        \"qdrantCollection\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"\"\n        }\n      },\n      \"credentials\": {\n        \"qdrantApi\": {\n          \"id\": \"iyQ6MQiVaF3VMBmt\",\n          \"name\": \"QdrantApi account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"619d2d2f-7a1e-49ba-a3ae-24bf24287dd2\",\n      \"name\": \"Create collection\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        -320,\n        60\n      ],\n      \"parameters\": {\n        \"url\": \"https://QDRANTURL/collections/COLLECTION\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"jsonBody\": \"{\\n  \\\"filter\\\": {}\\n}\",\n        \"sendBody\": true,\n        \"sendHeaders\": true,\n        \"specifyBody\": \"json\",\n        \"authentication\": \"genericCredentialType\",\n        \"genericAuthType\": \"httpHeaderAuth\",\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"Content-Type\",\n              \"value\": \"application/json\"\n            }\n          ]\n        }\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": {\n          \"id\": \"qhny6r5ql9wwotpn\",\n          \"name\": \"Qdrant API (Hetzner)\"\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"b61d5d74-14d2-4488-a0d6-3f7df9745329\",\n      \"name\": \"Refresh collection\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        -320,\n        320\n      ],\n      \"parameters\": {\n        \"url\": \"https://QDRANTURL/collections/COLLECTION/points/delete\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"jsonBody\": \"{\\n  \\\"filter\\\": {}\\n}\",\n        \"sendBody\": true,\n        \"sendHeaders\": true,\n        \"specifyBody\": \"json\",\n        \"authentication\": \"genericCredentialType\",\n        \"genericAuthType\": \"httpHeaderAuth\",\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"Content-Type\",\n              \"value\": \"application/json\"\n            }\n          ]\n        }\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": {\n          \"id\": \"qhny6r5ql9wwotpn\",\n          \"name\": \"Qdrant API (Hetzner)\"\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"71c8817f-f5be-4900-aecc-14d483993c4c\",\n      \"name\": \"Get folder\",\n      \"type\": \"n8n-nodes-base.googleDrive\",\n      \"position\": [\n        -100,\n        320\n      ],\n      \"parameters\": {\n        \"filter\": {\n          \"driveId\": {\n            \"__rl\": true,\n            \"mode\": \"list\",\n            \"value\": \"My Drive\",\n            \"cachedResultUrl\": \"https://drive.google.com/drive/my-drive\",\n            \"cachedResultName\": \"My Drive\"\n          },\n          \"folderId\": {\n            \"__rl\": true,\n            \"mode\": \"id\",\n            \"value\": \"=test-whatsapp\"\n          }\n        },\n        \"options\": {},\n        \"resource\": \"fileFolder\"\n      },\n      \"credentials\": {\n        \"googleDriveOAuth2Api\": {\n          \"id\": \"HEy5EuZkgPZVEa9w\",\n          \"name\": \"Google Drive account (n3w.it)\"\n        }\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"c14e570d-527d-4cc2-b0c0-2406b814ffc6\",\n      \"name\": \"Download Files\",\n      \"type\": \"n8n-nodes-base.googleDrive\",\n      \"position\": [\n        120,\n        320\n      ],\n      \"parameters\": {\n        \"fileId\": {\n          \"__rl\": true,\n          \"mode\": \"id\",\n          \"value\": \"={{ $json.id }}\"\n        },\n        \"options\": {\n          \"googleFileConversion\": {\n            \"conversion\": {\n              \"docsToFormat\": \"text/plain\"\n            }\n          }\n        },\n        \"operation\": \"download\"\n      },\n      \"credentials\": {\n        \"googleDriveOAuth2Api\": {\n          \"id\": \"HEy5EuZkgPZVEa9w\",\n          \"name\": \"Google Drive account (n3w.it)\"\n        }\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"7f1ffbd5-7aa0-49d3-aa11-9568ac704d6e\",\n      \"name\": \"Embeddings OpenAI\",\n      \"type\": \"@n8n/n8n-nodes-langchain.embeddingsOpenAi\",\n      \"position\": [\n        340,\n        520\n      ],\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"CDX6QM4gLYanh0P4\",\n          \"name\": \"OpenAi account\"\n        }\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"bdc58292-5880-41b9-bc55-d6437f037629\",\n      \"name\": \"Default Data Loader\",\n      \"type\": \"@n8n/n8n-nodes-langchain.documentDefaultDataLoader\",\n      \"position\": [\n        520,\n        520\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"dataType\": \"binary\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"7df52ba0-011e-44a5-b25d-a4610f903ed9\",\n      \"name\": \"Token Splitter\",\n      \"type\": \"@n8n/n8n-nodes-langchain.textSplitterTokenSplitter\",\n      \"position\": [\n        480,\n        680\n      ],\n      \"parameters\": {\n        \"chunkSize\": 300,\n        \"chunkOverlap\": 30\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"b3306890-d527-44d9-bd42-2decd61b35a2\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -880,\n        1240\n      ],\n      \"parameters\": {\n        \"color\": 3,\n        \"width\": 405,\n        \"height\": 177,\n        \"content\": \"## 重要提示！\\n### 请按以下方式配置Webhook节点：\\n* 确保*验证*和*响应*使用相同的URL\\n* *验证*应设置为GET请求方式\\n* *响应*应设置为POST请求方式\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"2da39c54-1596-4674-99c5-8fdac7873ea3\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -340,\n        900\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 618,\n        \"height\": 392,\n        \"content\": \"# 步骤三\\n\\n## 创建Webhook\\n* 访问您的[Meta开发者应用页面](https://developers.facebook.com/apps/)，进入应用设置\\n* 添加一个**生产环境webhook URL**作为新的回调地址\\n* *验证*webhook是否收到GET请求并返回验证码\\n* 验证完成后可删除此设置\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"9c8a18df-d2a9-4d91-a799-a8ee6c5160ba\",\n      \"name\": \"Verify\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"position\": [\n        -300,\n        1140\n      ],\n      \"webhookId\": \"f0d2e6f6-8fda-424d-b377-0bd191343c20\",\n      \"parameters\": {\n        \"path\": \"f0d2e6f6-8fda-424d-b377-0bd191343c20\",\n        \"options\": {},\n        \"responseMode\": \"responseNode\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"1ca39545-9ec1-489d-bcaf-f6289163d3e0\",\n      \"name\": \"Respond\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"position\": [\n        -320,\n        1520\n      ],\n      \"webhookId\": \"f0d2e6f6-8fda-424d-b377-0bd191343c20\",\n      \"parameters\": {\n        \"path\": \"f0d2e6f6-8fda-424d-b377-0bd191343c20\",\n        \"options\": {},\n        \"httpMethod\": \"POST\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"02ae9009-b34b-49a5-86f2-50e681125d77\",\n      \"name\": \"is Message?\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        -100,\n        1520\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"loose\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"959fbffc-876a-4235-87be-2dedba4926cd\",\n              \"operator\": {\n                \"type\": \"object\",\n                \"operation\": \"exists\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $json.body.entry[0].changes[0].value.messages[0] }}\",\n              \"rightValue\": \"\"\n            }\n          ]\n        },\n        \"looseTypeValidation\": true\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"9f866e16-cedb-4c43-ab38-e0e53703402a\",\n      \"name\": \"Only message\",\n      \"type\": \"n8n-nodes-base.whatsApp\",\n      \"position\": [\n        200,\n        1620\n      ],\n      \"parameters\": {\n        \"textBody\": \"=You can only send text messages\",\n        \"operation\": \"send\",\n        \"phoneNumberId\": \"470271332838881\",\n        \"requestOptions\": {},\n        \"additionalFields\": {},\n        \"recipientPhoneNumber\": \"={{ $('Respond').item.json.body.entry[0].changes[0].value.contacts[0].wa_id }}\"\n      },\n      \"credentials\": {\n        \"whatsAppApi\": {\n          \"id\": \"HDUOWQXeRXMVjo0Z\",\n          \"name\": \"WhatsApp account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"3867b8c8-db5f-40f6-b3ae-edf1ab732395\",\n      \"name\": \"Send\",\n      \"type\": \"n8n-nodes-base.whatsApp\",\n      \"position\": [\n        900,\n        1480\n      ],\n      \"parameters\": {\n        \"textBody\": \"={{ $json.output }}\",\n        \"operation\": \"send\",\n        \"phoneNumberId\": \"470271332838881\",\n        \"requestOptions\": {},\n        \"additionalFields\": {},\n        \"recipientPhoneNumber\": \"={{ $('Respond').item.json.body.entry[0].changes[0].value.contacts[0].wa_id }}\"\n      },\n      \"credentials\": {\n        \"whatsAppApi\": {\n          \"id\": \"HDUOWQXeRXMVjo0Z\",\n          \"name\": \"WhatsApp account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"401a8204-4cea-4bd0-9ae7-8c5c6797c586\",\n      \"name\": \"Window Buffer Memory\",\n      \"type\": \"@n8n/n8n-nodes-langchain.memoryBufferWindow\",\n      \"position\": [\n        640,\n        1720\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1.3\n    },\n    {\n      \"id\": \"ff1ebe0d-b572-4b77-ad67-351c0ec17927\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -120,\n        0\n      ],\n      \"parameters\": {\n        \"color\": 6,\n        \"width\": 880,\n        \"height\": 220,\n        \"content\": \"# 第一步\\n\\n## 创建Qdrant集合\\n需要修改：\\n- QDRANTURL（Qdrant服务地址）\\n- COLLECTION（集合名称）\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"df7bc44c-fb7d-4bc4-bc79-245f53e17eca\",\n      \"name\": \"Sticky Note4\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -340,\n        260\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 620,\n        \"height\": 400,\n        \"content\": \"# 第二步\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"df4f90ab-1cbb-4335-893a-0f3e2a62be04\",\n      \"name\": \"Sticky Note5\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        440,\n        1360\n      ],\n      \"parameters\": {\n        \"width\": 380,\n        \"height\": 260,\n        \"content\": \"## 配置AI代理\\n设置系统提示和聊天模型。如有需要，您还可以配置任意工具\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"b0928ee4-2c6a-4bc0-a013-15504f157379\",\n      \"name\": \"OpenAI Chat Model1\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\n      \"position\": [\n        980,\n        1920\n      ],\n      \"parameters\": {\n        \"model\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gpt-4o-mini\"\n        },\n        \"options\": {}\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"CDX6QM4gLYanh0P4\",\n          \"name\": \"OpenAi account\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"16ca729c-9492-4af1-a02f-9b3e5b4ebc43\",\n      \"name\": \"Retrive Qdrant Vector Store\",\n      \"type\": \"@n8n/n8n-nodes-langchain.vectorStoreQdrant\",\n      \"position\": [\n        620,\n        1940\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"qdrantCollection\": {\n          \"__rl\": true,\n          \"mode\": \"id\",\n          \"value\": \"COLLECTION\"\n        }\n      },\n      \"credentials\": {\n        \"qdrantApi\": {\n          \"id\": \"iyQ6MQiVaF3VMBmt\",\n          \"name\": \"QdrantApi account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"c950482d-23e3-4318-a878-f80f8cfee556\",\n      \"name\": \"Embeddings OpenAI2\",\n      \"type\": \"@n8n/n8n-nodes-langchain.embeddingsOpenAi\",\n      \"position\": [\n        500,\n        2140\n      ],\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"CDX6QM4gLYanh0P4\",\n          \"name\": \"OpenAi account\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"46347cfc-b4e7-4627-a991-3f30c12d7f42\",\n      \"name\": \"RAG\",\n      \"type\": \"@n8n/n8n-nodes-langchain.toolVectorStore\",\n      \"position\": [\n        840,\n        1700\n      ],\n      \"parameters\": {\n        \"name\": \"company_data\",\n        \"description\": \"Retrive data about company knowledge from vector store\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"active\": false,\n  \"pinData\": {},\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"b760b44b-24d8-41c6-8251-c7e6ddac82c1\",\n  \"connections\": {\n    \"RAG\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Verify\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Respond to Webhook\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Respond\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"is Message?\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"AI Agent\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Send\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get folder\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Download Files\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"is Message?\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Only message\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Download Files\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Qdrant Vector Store\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Token Splitter\": {\n      \"ai_textSplitter\": [\n        [\n          {\n            \"node\": \"Default Data Loader\",\n            \"type\": \"ai_textSplitter\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Embeddings OpenAI\": {\n      \"ai_embedding\": [\n        [\n          {\n            \"node\": \"Qdrant Vector Store\",\n            \"type\": \"ai_embedding\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"OpenAI Chat Model\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Embeddings OpenAI2\": {\n      \"ai_embedding\": [\n        [\n          {\n            \"node\": \"Retrive Qdrant Vector Store\",\n            \"type\": \"ai_embedding\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"OpenAI Chat Model1\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"RAG\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Refresh collection\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get folder\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Default Data Loader\": {\n      \"ai_document\": [\n        [\n          {\n            \"node\": \"Qdrant Vector Store\",\n            \"type\": \"ai_document\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Window Buffer Memory\": {\n      \"ai_memory\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"ai_memory\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Retrive Qdrant Vector Store\": {\n      \"ai_vectorStore\": [\n        [\n          {\n            \"node\": \"RAG\",\n            \"type\": \"ai_vectorStore\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When clicking ‘Test workflow’\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Create collection\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Refresh collection\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}