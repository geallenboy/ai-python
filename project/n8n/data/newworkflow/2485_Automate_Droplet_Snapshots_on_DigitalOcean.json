{
  "url": "https://n8n.io/workflows/2485-automate-droplet-snapshots-on-digitalocean/",
  "title": "Automate Droplet Snapshots on DigitalOcean",
  "author": "Darryn",
  "publish_date": "Last update 7 months ago",
  "publish_date_absolute": "2024-10-26",
  "categories": [
    {
      "name": "Engineering"
    },
    {
      "name": "DevOps"
    },
    {
      "name": "IT Ops"
    }
  ],
  "workflow_json": "{\"meta\":{\"instanceId\":\"38d37c49298b42c645e6a7693766d7c3522b24e54454034f955422b5d7af611c\"},\"nodes\":[{\"id\":\"b6582c37-00c3-467c-95cb-fc6eb7ccd27d\",\"name\":\"Filter\",\"type\":\"n8n-nodes-base.filter\",\"position\":[1080,420],\"parameters\":{\"conditions\":{\"number\":[{\"value1\":\"={{ $json.meta.total }}\",\"value2\":4,\"operation\":\"largerEqual\"}]}},\"typeVersion\":1},{\"id\":\"54b0f895-7e56-40eb-bc6c-f657457d004a\",\"name\":\"List Snapshots for a Droplet\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[840,420],\"parameters\":{\"url\":\"=https://api.digitalocean.com/v2/droplets/{{ $json.droplets[0].id }}/snapshots \",\"options\":{},\"authentication\":\"headerAuth\"},\"credentials\":{\"httpHeaderAuth\":{\"id\":\"1kwUrzy4cJXZx48R\",\"name\":\"Digital Ocean Account (darryn@optimus01.co.za)\"}},\"typeVersion\":1,\"alwaysOutputData\":false},{\"id\":\"7c47438f-db04-41f7-aed6-a460d0a6889b\",\"name\":\"List All Droplets\",\"type\":\"n8n-nodes-base.httpRequest\",\"notes\":\"f3bc462f9219860aafe79747ee369e2f79ccd7f9b096dfe66b55d946871e8942\",\"position\":[600,420],\"parameters\":{\"url\":\"https://api.digitalocean.com/v2/droplets\",\"options\":{},\"authentication\":\"headerAuth\"},\"credentials\":{\"httpHeaderAuth\":{\"id\":\"1kwUrzy4cJXZx48R\",\"name\":\"Digital Ocean Account (darryn@optimus01.co.za)\"}},\"typeVersion\":1},{\"id\":\"e751f6a4-0fdc-4be5-84f0-fecba100da09\",\"name\":\"Delete a Snapshot\",\"type\":\"n8n-nodes-base.httpRequest\",\"notes\":\"f3bc462f9219860aafe79747ee369e2f79ccd7f9b096dfe66b55d946871e8942\",\"position\":[1320,420],\"parameters\":{\"url\":\"=https://api.digitalocean.com/v2/snapshots/{{ $json.snapshots[0].id }}\",\"options\":{},\"requestMethod\":\"DELETE\",\"authentication\":\"headerAuth\"},\"credentials\":{\"httpHeaderAuth\":{\"id\":\"1kwUrzy4cJXZx48R\",\"name\":\"Digital Ocean Account (darryn@optimus01.co.za)\"}},\"typeVersion\":1},{\"id\":\"d4cc4a72-f909-4c10-bada-e5c731e46c5e\",\"name\":\"Droplet Actions snapshot (n8n.optimus01.co.za)\",\"type\":\"n8n-nodes-base.httpRequest\",\"notes\":\"f3bc462f9219860aafe79747ee369e2f79ccd7f9b096dfe66b55d946871e8942\",\"position\":[1560,420],\"parameters\":{\"url\":\"=https://api.digitalocean.com/v2/droplets/{{ $('List All Droplets').item.json.droplets[0].id }}/actions \",\"options\":{},\"requestMethod\":\"POST\",\"authentication\":\"headerAuth\",\"bodyParametersUi\":{\"parameter\":[{\"name\":\"type\",\"value\":\"snapshot\"}]}},\"credentials\":{\"httpHeaderAuth\":{\"id\":\"1kwUrzy4cJXZx48R\",\"name\":\"Digital Ocean Account (darryn@optimus01.co.za)\"}},\"typeVersion\":1},{\"id\":\"4f3be74a-add7-4a2c-99df-d5d47f17efee\",\"name\":\"Runs every 48hrs\",\"type\":\"n8n-nodes-base.cron\",\"position\":[360,420],\"parameters\":{\"triggerTimes\":{\"item\":[{\"mode\":\"everyX\",\"value\":48}]}},\"typeVersion\":1},{\"id\":\"518a7b8c-adf6-448e-9f4a-5acc0f31523d\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[300,180],\"parameters\":{\"color\":7,\"width\":232.0445295774649,\"height\":411.1655661971828,\"content\":\"## Trigger workflow every 48 hours\\n\\nThis node triggers the workflow to run every 48 hours. You can adjust the frequency if needed to suit your snapshot management requirements.\"},\"typeVersion\":1},{\"id\":\"70fe9177-e770-4f19-8fbc-3782167dda55\",\"name\":\"Sticky Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[540,180],\"parameters\":{\"color\":5,\"width\":232.0445295774649,\"height\":411.1655661971829,\"content\":\"## Get all droplets from DigitalOcean\\nFetches a list of all the droplets in your DigitalOcean account. This is the first step in managing snapshots for each droplet.\\n\"},\"typeVersion\":1},{\"id\":\"04d74698-0198-45c8-8a79-183fd5f19820\",\"name\":\"Sticky Note4\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[780,180],\"parameters\":{\"color\":5,\"width\":232.0445295774649,\"height\":412.3020619718309,\"content\":\"## Retrieve snapshots for a droplet\\nRetrieves all the snapshots associated with a specific droplet. This ensures that we know how many snapshots currently exist for each droplet.\\n\"},\"typeVersion\":1},{\"id\":\"4a971e9a-dfdf-4932-8280-3991a83c2a72\",\"name\":\"Sticky Note5\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1020,180],\"parameters\":{\"color\":7,\"width\":232.0445295774649,\"height\":411.1655661971828,\"content\":\"## Check if there are more than 4 snapshots\\nChecks if the number of snapshots for a droplet is equal to or greater than 4. If true, it proceeds to delete the oldest snapshot.\\n\"},\"typeVersion\":1},{\"id\":\"bb9a553a-a8fc-4b72-b0e0-704ebaf8b806\",\"name\":\"Sticky Note6\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1260,180],\"parameters\":{\"color\":5,\"width\":232.0445295774649,\"height\":411.1655661971829,\"content\":\"## Delete the oldest snapshot\\nDeletes the oldest snapshot from the droplet if the number of snapshots exceeds the limit (4 in this case), based on the filter's condition.\\n\"},\"typeVersion\":1},{\"id\":\"1811812f-db56-494a-8ffa-d64cc6f5037c\",\"name\":\"Sticky Note7\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1500,180],\"parameters\":{\"color\":5,\"width\":232.0445295774649,\"height\":411.1655661971829,\"content\":\"## Create a new snapshot\\nCreates a new snapshot for the droplet after cleaning up the old snapshots. Ensures that backups are always up to date.\"},\"typeVersion\":1},{\"id\":\"cb2bd85e-578b-4888-9625-ffed7249082c\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-545,200],\"parameters\":{\"color\":7,\"width\":366.75796434038665,\"height\":381.1643518785302,\"content\":\"### What this workflow does\\n1. **`Runs every 48 hours`**: The workflow is triggered by a cron node that runs every 48 hours, ensuring timely snapshot management.\\n2. **`List all droplets`**: The workflow retrieves all droplets in the DigitalOcean account.\\n3. **`Retrieve snapshots`**: For each droplet, the workflow retrieves a list of existing snapshots.\\n4. **`Filter snapshots`**: If the number of snapshots exceeds 4, the workflow filters for snapshots that need to be deleted.\\n5. **`Delete snapshots`**: Excess snapshots are automatically deleted based on the filter criteria.\\n6. **`Create new snapshot`**: After cleaning up, the workflow creates a new snapshot for each droplet, ensuring that backups are always up-to-date.\"},\"typeVersion\":1},{\"id\":\"7fbb406b-9343-4d3c-9876-80cb3b7bd51e\",\"name\":\"Sticky Note11\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-165,240],\"parameters\":{\"color\":6,\"width\":396.6384066163515,\"height\":282.5799404564392,\"content\":\"### Get More Templates Like This 👇\\n[![Video Thumbnail](https://onlinethinking.io/wp-content/uploads/2024/10/Lets-Automate-It-Community.png)](http://onlinethinking.io/community)\\n\"},\"typeVersion\":1},{\"id\":\"8afb93b2-e547-4f3b-be25-5ab85a3f477d\",\"name\":\"Sticky Note14\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-545,600],\"parameters\":{\"width\":777.0408639013781,\"height\":201.45195676871373,\"content\":\"## Setup\\n1. **`DigitalOcean API Key`**: You’ll need to configure the HTTP Request nodes with your DigitalOcean API key. This key is required for authenticating requests to list droplets, retrieve snapshots, delete snapshots, and create new ones.\\n2. **`Snapshot Threshold`**: By default, the workflow is set to keep no more than 4 snapshots per droplet. This can be adjusted by modifying the filter node conditions.\\n3. **`Set Execution Frequency`**: The cron node is set to run every 48 hours, but you can adjust the timing to suit your needs.\"},\"typeVersion\":1},{\"id\":\"325a4b9c-9bd4-4f29-8595-98f0579d15c1\",\"name\":\"Sticky Note9\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-560,60],\"parameters\":{\"color\":7,\"width\":809.515353297114,\"height\":944.3745310796205,\"content\":\"## Automate Droplet Snapshot Management on DigitalOcean\\nBuilt for the [Let's Automate It Community](http://onlinethinking.io/community) by [Optimus Agency](https://optimus01.co.za/)\\n\\nThis workflow automates the management of DigitalOcean Droplet snapshots by keeping the number of snapshots under a defined limit, deleting the oldest ones, and ensuring new snapshots are created at regular intervals.\"},\"typeVersion\":1},{\"id\":\"9540cfa4-4b72-40c2-b1d1-5bf3f9bd7884\",\"name\":\"Sticky Note15\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-545,820],\"parameters\":{\"color\":7,\"width\":777.0408639013781,\"height\":168.5111194243667,\"content\":\"## How to customize this workflow\\n- **`Adjust Snapshot Limit`**: Change the value in the filter node if you want to keep more or fewer snapshots.\\n- **`Modify Run Frequency`**: The workflow runs every 48 hours by default. You can change the frequency in the cron node to run more or less often.\\n- **`Enhance with Notifications`**: You can add a notification node (e.g., Slack or email) to alert you when snapshots are deleted or created.\"},\"typeVersion\":1}],\"pinData\":{},\"connections\":{\"Filter\":{\"main\":[[{\"node\":\"Delete a Snapshot\",\"type\":\"main\",\"index\":0}]]},\"Runs every 48hrs\":{\"main\":[[{\"node\":\"List All Droplets\",\"type\":\"main\",\"index\":0}]]},\"Delete a Snapshot\":{\"main\":[[{\"node\":\"Droplet Actions snapshot (n8n.optimus01.co.za)\",\"type\":\"main\",\"index\":0}]]},\"List All Droplets\":{\"main\":[[{\"node\":\"List Snapshots for a Droplet\",\"type\":\"main\",\"index\":0}]]},\"List Snapshots for a Droplet\":{\"main\":[[{\"node\":\"Filter\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "This workflow automates the management of DigitalOcean Droplet snapshots by listing all droplets, filtering based on the number of snapshots, and deleting excess snapshots before creating new ones. It ensures your droplet snapshots stay organized and within a manageable limit, preventing unnecessary storage costs due to an excess of snapshots.\n\n### Who is this for?\n\nThis workflow is perfect for users managing DigitalOcean Droplets and looking to automate the process of snapshot creation and cleanup to save on storage costs and maintain efficient resource management. It’s useful for DevOps teams, cloud administrators, or any developer leveraging DigitalOcean for their infrastructure.\n\n### What problem is this workflow solving?\n\nWhen managing multiple DigitalOcean Droplets, snapshots can quickly accumulate, taking up space and increasing storage costs. Manually deleting and creating snapshots can be time-consuming and inefficient. This automation solves this problem by automating the snapshot management process, ensuring that no more than a defined number of snapshots are kept per droplet.\n\n### What this workflow does\n\n  1. **Runs every 48 hours** : The workflow is triggered by a cron node that runs every 48 hours, ensuring timely snapshot management.\n  2. **List all droplets** : The workflow retrieves all droplets in the DigitalOcean account.\n  3. **Retrieve snapshots** : For each droplet, the workflow retrieves a list of existing snapshots.\n  4. **Filter snapshots** : If the number of snapshots exceeds 4, the workflow filters for snapshots that need to be deleted.\n  5. **Delete snapshots** : Excess snapshots are automatically deleted based on the filter criteria.\n  6. **Create new snapshot** : After cleaning up, the workflow creates a new snapshot for each droplet, ensuring that backups are always up-to-date.\n\n\n\n### Setup\n\n  1. **DigitalOcean API Key** : You’ll need to configure the HTTP Request nodes with your DigitalOcean API key. This key is required for authenticating requests to list droplets, retrieve snapshots, delete snapshots, and create new ones.\n  2. **Snapshot Threshold** : By default, the workflow is set to keep no more than 4 snapshots per droplet. This can be adjusted by modifying the filter node conditions.\n  3. **Set Execution Frequency** : The cron node is set to run every 48 hours, but you can adjust the timing to suit your needs.\n\n\n\n### How to customize this workflow\n\n  * **Adjust Snapshot Limit** : Change the value in the filter node if you want to keep more or fewer snapshots.\n  * **Modify Run Frequency** : The workflow runs every 48 hours by default. You can change the frequency in the cron node to run more or less often.\n  * **Enhance with Notifications** : You can add a notification node (e.g., Slack or email) to alert you when snapshots are deleted or created.\n\n\n\n### Workflow Summary\n\nThis workflow automates the management of DigitalOcean Droplet snapshots by keeping the number of snapshots under a defined limit, deleting the oldest ones, and ensuring new snapshots are created at regular intervals.\n",
  "crawled_at": "2025-05-26T00:01:48.165297",
  "readme_zh": "该工作流通过自动列出所有Droplet、根据快照数量进行筛选、在创建新快照前删除多余快照，实现DigitalOcean Droplet快照的自动化管理。它能确保您的Droplet快照保持有序且数量可控，避免因快照过多产生不必要的存储费用。\n\n### 适用人群\n本工作流非常适合需要管理DigitalOcean Droplet并希望通过自动化快照创建与清理来节省存储成本、维持高效资源管理的用户。对于DevOps团队、云管理员或任何使用DigitalOcean基础设施的开发者都极具价值。\n\n### 解决痛点\n当管理多个DigitalOcean Droplet时，快照会迅速累积，占用存储空间并增加成本。手动删除和创建快照既耗时又低效。该自动化方案通过规范快照管理流程，确保每个Droplet保留的快照不超过设定数量。\n\n### 工作流功能\n1. **每48小时运行**：通过定时触发器(cron节点)实现每两天自动执行一次快照管理\n2. **列出所有Droplet**：获取DigitalOcean账户中的所有Droplet列表\n3. **检索快照**：为每个Droplet获取现有快照清单\n4. **筛选快照**：当快照数量超过4个时，自动筛选需要删除的快照\n5. **删除快照**：根据筛选条件自动删除多余快照\n6. **创建新快照**：清理完成后为每个Droplet创建新快照，确保备份时效性\n\n### 配置说明\n1. **DigitalOcean API密钥**：需在HTTP请求节点配置API密钥用于验证请求\n2. **快照阈值**：默认每个Droplet保留不超过4个快照，可通过修改过滤节点条件调整\n3. **执行频率**：默认48小时运行一次，可通过cron节点自定义时间间隔\n\n### 自定义选项\n- **调整快照数量限制**：修改过滤节点数值可增减保留的快照数量\n- **更改运行频率**：通过cron节点调整自动执行的间隔时间\n- **添加通知功能**：可集成Slack或邮件通知节点，在快照删除/创建时接收提醒\n\n### 核心价值\n本工作流通过设定快照数量上限、定期清理旧快照并创建新快照，实现DigitalOcean Droplet快照的智能化管理。",
  "title_zh": "在DigitalOcean上自动执行Droplet快照",
  "publish_date_zh": "最后更新于6个月前",
  "workflow_json_zh": "{\"meta\":{\"instanceId\":\"38d37c49298b42c645e6a7693766d7c3522b24e54454034f955422b5d7af611c\"},\"nodes\":[{\"id\":\"b6582c37-00c3-467c-95cb-fc6eb7ccd27d\",\"name\":\"Filter\",\"type\":\"n8n-nodes-base.filter\",\"position\":[1080,420],\"parameters\":{\"conditions\":{\"number\":[{\"value1\":\"={{ $json.meta.total }}\",\"value2\":4,\"operation\":\"largerEqual\"}]}},\"typeVersion\":1},{\"id\":\"54b0f895-7e56-40eb-bc6c-f657457d004a\",\"name\":\"List Snapshots for a Droplet\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[840,420],\"parameters\":{\"url\":\"=https://api.digitalocean.com/v2/droplets/{{ $json.droplets[0].id }}/snapshots \",\"options\":{},\"authentication\":\"headerAuth\"},\"credentials\":{\"httpHeaderAuth\":{\"id\":\"1kwUrzy4cJXZx48R\",\"name\":\"Digital Ocean Account (darryn@optimus01.co.za)\"}},\"typeVersion\":1,\"alwaysOutputData\":false},{\"id\":\"7c47438f-db04-41f7-aed6-a460d0a6889b\",\"name\":\"List All Droplets\",\"type\":\"n8n-nodes-base.httpRequest\",\"notes\":\"f3bc462f9219860aafe79747ee369e2f79ccd7f9b096dfe66b55d946871e8942\",\"position\":[600,420],\"parameters\":{\"url\":\"https://api.digitalocean.com/v2/droplets\",\"options\":{},\"authentication\":\"headerAuth\"},\"credentials\":{\"httpHeaderAuth\":{\"id\":\"1kwUrzy4cJXZx48R\",\"name\":\"Digital Ocean Account (darryn@optimus01.co.za)\"}},\"typeVersion\":1},{\"id\":\"e751f6a4-0fdc-4be5-84f0-fecba100da09\",\"name\":\"Delete a Snapshot\",\"type\":\"n8n-nodes-base.httpRequest\",\"notes\":\"f3bc462f9219860aafe79747ee369e2f79ccd7f9b096dfe66b55d946871e8942\",\"position\":[1320,420],\"parameters\":{\"url\":\"=https://api.digitalocean.com/v2/snapshots/{{ $json.snapshots[0].id }}\",\"options\":{},\"requestMethod\":\"DELETE\",\"authentication\":\"headerAuth\"},\"credentials\":{\"httpHeaderAuth\":{\"id\":\"1kwUrzy4cJXZx48R\",\"name\":\"Digital Ocean Account (darryn@optimus01.co.za)\"}},\"typeVersion\":1},{\"id\":\"d4cc4a72-f909-4c10-bada-e5c731e46c5e\",\"name\":\"Droplet Actions snapshot (n8n.optimus01.co.za)\",\"type\":\"n8n-nodes-base.httpRequest\",\"notes\":\"f3bc462f9219860aafe79747ee369e2f79ccd7f9b096dfe66b55d946871e8942\",\"position\":[1560,420],\"parameters\":{\"url\":\"=https://api.digitalocean.com/v2/droplets/{{ $('List All Droplets').item.json.droplets[0].id }}/actions \",\"options\":{},\"requestMethod\":\"POST\",\"authentication\":\"headerAuth\",\"bodyParametersUi\":{\"parameter\":[{\"name\":\"type\",\"value\":\"snapshot\"}]}},\"credentials\":{\"httpHeaderAuth\":{\"id\":\"1kwUrzy4cJXZx48R\",\"name\":\"Digital Ocean Account (darryn@optimus01.co.za)\"}},\"typeVersion\":1},{\"id\":\"4f3be74a-add7-4a2c-99df-d5d47f17efee\",\"name\":\"Runs every 48hrs\",\"type\":\"n8n-nodes-base.cron\",\"position\":[360,420],\"parameters\":{\"triggerTimes\":{\"item\":[{\"mode\":\"everyX\",\"value\":48}]}},\"typeVersion\":1},{\"id\":\"518a7b8c-adf6-448e-9f4a-5acc0f31523d\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[300,180],\"parameters\":{\"color\":7,\"width\":232.0445295774649,\"height\":411.1655661971828,\"content\":\"## 每48小时触发工作流\\n\\n此节点将每48小时触发工作流运行。您可以根据快照管理需求调整触发频率。\"},\"typeVersion\":1},{\"id\":\"70fe9177-e770-4f19-8fbc-3782167dda55\",\"name\":\"Sticky Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[540,180],\"parameters\":{\"color\":5,\"width\":232.0445295774649,\"height\":411.1655661971829,\"content\":\"## 从DigitalOcean获取所有Droplet\\n获取您DigitalOcean账户中所有Droplet的列表。这是为每个Droplet管理快照的第一步。\"},\"typeVersion\":1},{\"id\":\"04d74698-0198-45c8-8a79-183fd5f19820\",\"name\":\"Sticky Note4\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[780,180],\"parameters\":{\"color\":5,\"width\":232.0445295774649,\"height\":412.3020619718309,\"content\":\"## 获取某个Droplet的快照列表\\n此操作可检索与指定Droplet关联的所有快照。通过该功能，我们能够掌握每个Droplet当前存在的快照数量。\"},\"typeVersion\":1},{\"id\":\"4a971e9a-dfdf-4932-8280-3991a83c2a72\",\"name\":\"Sticky Note5\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1020,180],\"parameters\":{\"color\":7,\"width\":232.0445295774649,\"height\":411.1655661971828,\"content\":\"## 检查是否存在超过4个快照\\n当某个云主机的快照数量达到或超过4个时，系统将自动删除最早创建的快照。\"},\"typeVersion\":1},{\"id\":\"bb9a553a-a8fc-4b72-b0e0-704ebaf8b806\",\"name\":\"Sticky Note6\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1260,180],\"parameters\":{\"color\":5,\"width\":232.0445295774649,\"height\":411.1655661971829,\"content\":\"## 删除最旧的快照\\n根据筛选条件，若快照数量超过限制（本例中为4个），则从该Droplet中删除创建时间最早的快照。\"},\"typeVersion\":1},{\"id\":\"1811812f-db56-494a-8ffa-d64cc6f5037c\",\"name\":\"Sticky Note7\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1500,180],\"parameters\":{\"color\":5,\"width\":232.0445295774649,\"height\":411.1655661971829,\"content\":\"## 创建新快照\\n为云服务器创建新快照前会先清理旧快照，确保备份数据始终处于最新状态。\"},\"typeVersion\":1},{\"id\":\"cb2bd85e-578b-4888-9625-ffed7249082c\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-545,200],\"parameters\":{\"color\":7,\"width\":366.75796434038665,\"height\":381.1643518785302,\"content\":\"### 工作流程说明\\n1. **每48小时自动运行**：通过定时任务节点每48小时触发一次，确保及时管理快照。\\n2. **列出所有云服务器**：获取DigitalOcean账户中所有云服务器实例。\\n3. **检索现有快照**：为每台云服务器获取其现有的快照列表。\\n4. **筛选待删快照**：若快照数量超过4个，则自动筛选出需要删除的旧快照。\\n5. **清理多余快照**：根据筛选条件自动删除超额的旧快照。\\n6. **创建新快照**：清理完成后，为每台云服务器生成新快照，确保备份数据始终最新。\"},\"typeVersion\":1},{\"id\":\"7fbb406b-9343-4d3c-9876-80cb3b7bd51e\",\"name\":\"Sticky Note11\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-165,240],\"parameters\":{\"color\":6,\"width\":396.6384066163515,\"height\":282.5799404564392,\"content\":\"### 获取更多类似模板 👇\\n[![视频缩略图](https://onlinethinking.io/wp-content/uploads/2024/10/Lets-Automate-It-Community.png)](http://onlinethinking.io/community)\"},\"typeVersion\":1},{\"id\":\"8afb93b2-e547-4f3b-be25-5ab85a3f477d\",\"name\":\"Sticky Note14\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-545,600],\"parameters\":{\"width\":777.0408639013781,\"height\":201.45195676871373,\"content\":\"## 设置步骤\\n1. **`DigitalOcean API密钥`**：需在HTTP请求节点中配置您的DigitalOcean API密钥，该密钥用于验证列取云服务器、获取快照、删除快照及创建新快照等操作请求。\\n2. **`快照保留阈值`**：默认设置每个云服务器最多保留4个快照，您可通过修改过滤节点条件调整此数值。\\n3. **`执行频率设置`**：定时任务节点默认每48小时运行一次，您可根据实际需求调整执行间隔时间。\"},\"typeVersion\":1},{\"id\":\"325a4b9c-9bd4-4f29-8595-98f0579d15c1\",\"name\":\"Sticky Note9\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-560,60],\"parameters\":{\"color\":7,\"width\":809.515353297114,\"height\":944.3745310796205,\"content\":\"## 在DigitalOcean上实现Droplet快照管理自动化\\n由[Optimus Agency](https://optimus01.co.za/)为[Let's Automate It社区](http://onlinethinking.io/community)打造\\n\\n该工作流通过以下方式实现DigitalOcean Droplet快照的自动化管理：将快照数量控制在设定上限内，自动删除最旧的快照，并确保定期创建新快照。\"},\"typeVersion\":1},{\"id\":\"9540cfa4-4b72-40c2-b1d1-5bf3f9bd7884\",\"name\":\"Sticky Note15\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-545,820],\"parameters\":{\"color\":7,\"width\":777.0408639013781,\"height\":168.5111194243667,\"content\":\"## 如何自定义此工作流\\n- **`调整快照保留数量`**：如需保留更多或更少快照，只需修改过滤节点中的数值即可。\\n- **`修改运行频率`**：默认每48小时运行一次工作流。可通过调整cron节点设置来更改运行间隔。\\n- **`增强通知功能`**：可添加通知节点（如Slack或邮件），在快照被删除或创建时接收提醒。\"},\"typeVersion\":1}],\"pinData\":{},\"connections\":{\"Filter\":{\"main\":[[{\"node\":\"Delete a Snapshot\",\"type\":\"main\",\"index\":0}]]},\"Runs every 48hrs\":{\"main\":[[{\"node\":\"List All Droplets\",\"type\":\"main\",\"index\":0}]]},\"Delete a Snapshot\":{\"main\":[[{\"node\":\"Droplet Actions snapshot (n8n.optimus01.co.za)\",\"type\":\"main\",\"index\":0}]]},\"List All Droplets\":{\"main\":[[{\"node\":\"List Snapshots for a Droplet\",\"type\":\"main\",\"index\":0}]]},\"List Snapshots for a Droplet\":{\"main\":[[{\"node\":\"Filter\",\"type\":\"main\",\"index\":0}]]}}}"
}