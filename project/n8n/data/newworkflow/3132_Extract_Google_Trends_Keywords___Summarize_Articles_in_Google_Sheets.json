{
  "url": "https://n8n.io/workflows/3132-extract-google-trends-keywords-and-summarize-articles-in-google-sheets/",
  "title": "Extract Google Trends Keywords & Summarize Articles in Google Sheets",
  "author": "Miko",
  "publish_date": "Last update 2 months ago",
  "publish_date_absolute": "2025-03-26",
  "categories": [
    {
      "name": "Marketing"
    }
  ],
  "workflow_json": "{\"id\":\"Eyh4jc7RK7rCTh4z\",\"meta\":{\"instanceId\":\"38fb1860cc6284b8af9ba3b485f32cc1851cd97470ef1b4a472b5e707f1c93b5\",\"templateCredsSetupCompleted\":true},\"name\":\"My workflow 2\",\"tags\":[],\"nodes\":[{\"id\":\"084bcc9e-9d05-4b69-8cb1-eccdcb67358e\",\"name\":\"When clicking ‘Test workflow’\",\"type\":\"n8n-nodes-base.manualTrigger\",\"position\":[500,720],\"parameters\":{},\"typeVersion\":1},{\"id\":\"f593e3f1-adea-4ef7-9779-4f2436fe7774\",\"name\":\"XML\",\"type\":\"n8n-nodes-base.xml\",\"position\":[1540,880],\"parameters\":{\"options\":{\"normalize\":false,\"explicitArray\":false}},\"executeOnce\":true,\"typeVersion\":1},{\"id\":\"5906371f-d5da-4141-876f-542cb5d0d1a8\",\"name\":\"GoogleTrends\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[1280,880],\"parameters\":{\"url\":\"https://trends.google.it/trending/rss?geo=IT\",\"options\":{}},\"executeOnce\":true,\"retryOnFail\":true,\"typeVersion\":4.2},{\"id\":\"7badc1ad-48c2-4142-88bb-fa3f442abd66\",\"name\":\"CONFIG\",\"type\":\"n8n-nodes-base.set\",\"position\":[760,880],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"25d7e553-9678-40ad-bb69-e4eb4bce4d11\",\"name\":\"min_traffic\",\"type\":\"number\",\"value\":500},{\"id\":\"decd0a3d-ddc5-45c3-a56f-ee1f14705019\",\"name\":\"max_results\",\"type\":\"number\",\"value\":3},{\"id\":\"12cdd78a-45a7-499e-8fe5-0ab6a7da8a10\",\"name\":\"jina_key\",\"type\":\"string\",\"value\":\"\"}]}},\"typeVersion\":3.4},{\"id\":\"b92ad672-ea1d-4b5b-ae1d-0aa883c5db9a\",\"name\":\"Get saved keywords\",\"type\":\"n8n-nodes-base.googleSheets\",\"position\":[1020,880],\"parameters\":{\"options\":{},\"sheetName\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"gid=0\",\"cachedResultUrl\":\"\",\"cachedResultName\":\"\"},\"documentId\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"\",\"cachedResultUrl\":\"\",\"cachedResultName\":\"\"}},\"credentials\":{\"googleSheetsOAuth2Api\":{\"id\":\"0HENZXUy9PlxLx0O\",\"name\":\"Google Sheets account\"}},\"executeOnce\":true,\"typeVersion\":4.5,\"alwaysOutputData\":false},{\"id\":\"e5639494-d757-442f-942f-75927ecadd86\",\"name\":\"Loop Over Items\",\"type\":\"n8n-nodes-base.splitInBatches\",\"position\":[740,1380],\"parameters\":{\"options\":{}},\"typeVersion\":3},{\"id\":\"2c81d605-6749-47a2-95ba-846d86388c04\",\"name\":\"Mapping\",\"type\":\"n8n-nodes-base.set\",\"position\":[1000,1380],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"7230decf-45d9-4006-b005-614fb1dede10\",\"name\":\"summary\",\"type\":\"string\",\"value\":\"={{ $('content1').item.json.data.text.replaceAll('\\\\n', ' ').trim() }}\\n---\\n{{ $('content2').item.json.data.text.replaceAll('\\\\n', ' ').trim() }}\\n---\\n{{ $('content3').item.json.data.text.replaceAll('\\\\n', ' ').trim() }}\"},{\"id\":\"ad8f7dcd-fc93-41f3-b643-db4a2b569119\",\"name\":\"trending_keyword\",\"type\":\"string\",\"value\":\"={{ $('New keywords').item.json.trending_keyword }}\"},{\"id\":\"a3838385-90e2-4308-b147-5ef6de4a2c19\",\"name\":\"approx_traffic\",\"type\":\"number\",\"value\":\"={{ $('New keywords').item.json.approx_traffic }}\"},{\"id\":\"fc8523d5-a68d-443b-ad49-9057dee85617\",\"name\":\"pubDate\",\"type\":\"string\",\"value\":\"={{ $('New keywords').item.json.pubDate }}\"},{\"id\":\"139fd57f-8ccc-453b-9f8f-94c9546bbd1c\",\"name\":\"status\",\"type\":\"string\",\"value\":\"idea\"},{\"id\":\"39fa6799-78db-453e-ad29-359ab441e912\",\"name\":\"news_item_url1\",\"type\":\"string\",\"value\":\"={{ $('New keywords').item.json.news_item_url1 }}\"},{\"id\":\"1e6e7545-526a-4003-ac92-520fa04cfe1d\",\"name\":\"news_item_title1\",\"type\":\"string\",\"value\":\"={{ $('New keywords').item.json.news_item_title1 }}\"},{\"id\":\"12c019fc-2fe6-41e8-a8b8-e38bdfa16215\",\"name\":\"news_item_title2\",\"type\":\"string\",\"value\":\"={{ $('New keywords').item.json.news_item_title2 }}\"},{\"id\":\"b14b5835-66b7-448c-b9a5-d9f85d9f7f12\",\"name\":\"news_item_url2\",\"type\":\"string\",\"value\":\"={{ $('New keywords').item.json.news_item_url2 }}\"},{\"id\":\"4df8d3e0-7c8d-40e1-8ed7-b1743a8bbf17\",\"name\":\"news_item_title3\",\"type\":\"string\",\"value\":\"={{ $('New keywords').item.json.news_item_title3 }}\"},{\"id\":\"7fe45e6d-1978-49b4-b289-c33e3d68f71a\",\"name\":\"news_item_url3\",\"type\":\"string\",\"value\":\"={{ $('New keywords').item.json.news_item_url3 }}\"},{\"id\":\"ef39509c-c4e7-49b1-9ee8-ad82a8af9514\",\"name\":\"news_item_picture1\",\"type\":\"string\",\"value\":\"={{ $('New keywords').item.json.news_item_picture1 }}\"},{\"id\":\"a2210ea6-8ee5-408a-9ba1-5e07bd4d7f1b\",\"name\":\"news_item_source1\",\"type\":\"string\",\"value\":\"={{ $('New keywords').item.json.news_item_source1 }}\"},{\"id\":\"b6136672-4c09-4da0-ba5b-d9026877ca1e\",\"name\":\"news_item_picture2\",\"type\":\"string\",\"value\":\"={{ $('New keywords').item.json.news_item_picture2 }}\"},{\"id\":\"f9a54dca-079c-4431-af34-6bb98a6d8711\",\"name\":\"news_item_source2\",\"type\":\"string\",\"value\":\"={{ $('New keywords').item.json.news_item_source2 }}\"},{\"id\":\"aa38fecd-3743-447f-aa54-a1a86b5ad717\",\"name\":\"news_item_picture3\",\"type\":\"string\",\"value\":\"={{ $('New keywords').item.json.news_item_picture3 }}\"},{\"id\":\"2ff53574-9f9d-4e35-afbe-161e77a58515\",\"name\":\"news_item_source3\",\"type\":\"string\",\"value\":\"={{ $('New keywords').item.json.news_item_source3 }}\"}]}},\"typeVersion\":3.4},{\"id\":\"5ca98d8f-0bc6-4b77-a367-81ed2509deba\",\"name\":\"Google Sheets\",\"type\":\"n8n-nodes-base.googleSheets\",\"position\":[1580,1180],\"parameters\":{\"columns\":{\"value\":{\"status\":\"idea\",\"pubDate\":\"={{ $json.pubDate }}\",\"abstract\":\"={{ $json.abstract.replaceAll('  ', '').substring(0, 49999) }}\",\"approx_traffic\":\"={{ $json.approx_traffic }}\",\"news_item_url1\":\"={{ $json.news_item_url1 }}\",\"news_item_url2\":\"={{ $json.news_item_url2 }}\",\"news_item_url3\":\"={{ $json.news_item_url3 }}\",\"news_item_title1\":\"={{ $json.news_item_title1 }}\",\"news_item_title2\":\"={{ $json.news_item_title2 }}\",\"news_item_title3\":\"={{ $json.news_item_title3 }}\",\"trending_keyword\":\"={{ $json.trending_keyword }}\",\"news_item_source1\":\"={{ $json.news_item_source1 }}\",\"news_item_source2\":\"={{ $json.news_item_source2 }}\",\"news_item_source3\":\"={{ $json.news_item_source3 }}\",\"news_item_picture1\":\"={{ $json.news_item_picture1 }}\",\"news_item_picture2\":\"={{ $json.news_item_picture2 }}\",\"news_item_picture3\":\"={{ $json.news_item_picture3 }}\"},\"schema\":[{\"id\":\"status\",\"type\":\"string\",\"display\":true,\"required\":false,\"displayName\":\"status\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"trending_keyword\",\"type\":\"string\",\"display\":true,\"required\":false,\"displayName\":\"trending_keyword\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"approx_traffic\",\"type\":\"string\",\"display\":true,\"required\":false,\"displayName\":\"approx_traffic\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"abstract\",\"type\":\"string\",\"display\":true,\"required\":false,\"displayName\":\"abstract\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"pubDate\",\"type\":\"string\",\"display\":true,\"required\":false,\"displayName\":\"pubDate\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"news_item_url1\",\"type\":\"string\",\"display\":true,\"required\":false,\"displayName\":\"news_item_url1\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"news_item_title1\",\"type\":\"string\",\"display\":true,\"required\":false,\"displayName\":\"news_item_title1\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"news_item_picture1\",\"type\":\"string\",\"display\":true,\"required\":false,\"displayName\":\"news_item_picture1\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"news_item_source1\",\"type\":\"string\",\"display\":true,\"required\":false,\"displayName\":\"news_item_source1\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"news_item_url2\",\"type\":\"string\",\"display\":true,\"required\":false,\"displayName\":\"news_item_url2\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"news_item_title2\",\"type\":\"string\",\"display\":true,\"required\":false,\"displayName\":\"news_item_title2\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"news_item_picture2\",\"type\":\"string\",\"display\":true,\"required\":false,\"displayName\":\"news_item_picture2\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"news_item_source2\",\"type\":\"string\",\"display\":true,\"required\":false,\"displayName\":\"news_item_source2\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"news_item_url3\",\"type\":\"string\",\"display\":true,\"required\":false,\"displayName\":\"news_item_url3\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"news_item_title3\",\"type\":\"string\",\"display\":true,\"required\":false,\"displayName\":\"news_item_title3\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"news_item_picture3\",\"type\":\"string\",\"display\":true,\"required\":false,\"displayName\":\"news_item_picture3\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"news_item_source3\",\"type\":\"string\",\"display\":true,\"required\":false,\"displayName\":\"news_item_source3\",\"defaultMatch\":false,\"canBeUsedToMatch\":true}],\"mappingMode\":\"defineBelow\",\"matchingColumns\":[],\"attemptToConvertTypes\":false,\"convertFieldsToString\":false},\"options\":{},\"operation\":\"append\",\"sheetName\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"gid=0\",\"cachedResultUrl\":\"\",\"cachedResultName\":\"\"},\"documentId\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"\",\"cachedResultUrl\":\"\",\"cachedResultName\":\"\"}},\"typeVersion\":4.5},{\"id\":\"41fcb412-ea5d-4adc-8d40-d72398537150\",\"name\":\"New keywords\",\"type\":\"n8n-nodes-base.code\",\"position\":[1780,880],\"parameters\":{\"jsCode\":\"const max_results = $('CONFIG').first().json.max_results;\\nconst min_traffic = $('CONFIG').first().json.min_traffic;\\n\\nconst gsheet = $(\\\"Get saved keywords\\\").all();\\nconst gsheetKeys = gsheet.map(record => record.json.trending_keyword);\\n\\nconst items = $('XML').first().json.rss.channel.item;\\nconst trafficKey = Object.keys(items[0]).find(key => key.includes(\\\"approx_traffic\\\"));\\nconst parseTraffic = (traffic) => parseInt(traffic.replace('+', ''), 10);\\n\\nconst newItems = items.map(item => {\\n    const links = Array.isArray(item[\\\"ht:news_item\\\"]) ? item[\\\"ht:news_item\\\"].slice(0, 3) : [];\\n\\n    const flattenedLinks = links.reduce((acc, news, index) => {\\n        acc[`news_item_url${index + 1}`] = news[\\\"ht:news_item_url\\\"];\\n        acc[`news_item_title${index + 1}`] = news[\\\"ht:news_item_title\\\"];\\n        acc[`news_item_picture${index + 1}`] = news[\\\"ht:news_item_picture\\\"];\\n        acc[`news_item_source${index + 1}`] = news[\\\"ht:news_item_source\\\"];\\n        return acc;\\n    }, {});\\n\\n    return {\\n        trending_keyword: item.title,\\n        approx_traffic: parseTraffic(item[trafficKey]),\\n        pubDate: item.pubDate,\\n        ...flattenedLinks, // Aggiungi i link\\n    };\\n}).filter(item => \\n    item.approx_traffic >= min_traffic && \\n    !gsheetKeys.includes(item.trending_keyword) // Filtra quelli già presenti in Google Sheets\\n);\\n\\nlet sortedItems = newItems.sort((a, b) => b.approx_traffic - a.approx_traffic);\\nif (max_results > 0) {\\n    sortedItems = sortedItems.slice(0, max_results);\\n}\\n\\nreturn sortedItems;\\n\"},\"typeVersion\":2,\"alwaysOutputData\":false},{\"id\":\"56a953da-15a7-48da-a299-c53a7947c45e\",\"name\":\"content1\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[1020,1700],\"parameters\":{\"url\":\"=https://r.jina.ai/{{ $('New keywords').item.json.news_item_url1 }}\",\"options\":{},\"sendHeaders\":true,\"headerParameters\":{\"parameters\":[{\"name\":\"Authorization\",\"value\":\"=Bearer {{ $('CONFIG').item.json.jina_key }}\"},{\"name\":\"Accept\",\"value\":\"application/json\"},{\"name\":\"X-Remove-Selector\",\"value\":\"a, link, script, footer, img, svg\"},{\"name\":\"X-Retain-Images\",\"value\":\"none\"},{\"name\":\"X-Return-Format\",\"value\":\"text\"}]}},\"typeVersion\":4.2},{\"id\":\"e3dbb73f-eac8-47aa-b621-0775dd09c5bf\",\"name\":\"content2\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[1280,1700],\"parameters\":{\"url\":\"=https://r.jina.ai/{{ $('New keywords').item.json.news_item_url2 }}\",\"options\":{},\"sendHeaders\":true,\"headerParameters\":{\"parameters\":[{\"name\":\"Authorization\",\"value\":\"=Bearer {{ $('CONFIG').item.json.jina_key }}\"},{\"name\":\"Accept\",\"value\":\"application/json\"},{\"name\":\"X-Remove-Selector\",\"value\":\"a, link, script, footer, img, svg\"},{\"name\":\"X-Retain-Images\",\"value\":\"none\"},{\"name\":\"X-Return-Format\",\"value\":\"text\"}]}},\"typeVersion\":4.2},{\"id\":\"0723267a-5e4e-40e2-87bf-4c215c79b66c\",\"name\":\"content3\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[1560,1700],\"parameters\":{\"url\":\"=https://r.jina.ai/{{ $('New keywords').item.json.news_item_url3 }}\",\"options\":{},\"sendHeaders\":true,\"headerParameters\":{\"parameters\":[{\"name\":\"Authorization\",\"value\":\"=Bearer {{ $('CONFIG').item.json.jina_key }}\"},{\"name\":\"Accept\",\"value\":\"application/json\"},{\"name\":\"X-Remove-Selector\",\"value\":\"a, link, script, footer, img, svg\"},{\"name\":\"X-Retain-Images\",\"value\":\"none\"},{\"name\":\"X-Return-Format\",\"value\":\"text\"}]}},\"typeVersion\":4.2},{\"id\":\"8621b782-a182-479a-afa1-de0b525d3909\",\"name\":\"Start every hour past 11 minutes\",\"type\":\"n8n-nodes-base.scheduleTrigger\",\"position\":[500,880],\"parameters\":{\"rule\":{\"interval\":[{\"field\":\"cronExpression\",\"expression\":\"11 */1 * * *\"}]}},\"typeVersion\":1.2},{\"id\":\"d04e89cd-a578-45d9-88f2-be4c72407049\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[420,560],\"parameters\":{\"color\":5,\"height\":1300,\"content\":\"## Cron trigger\\nGoogle Trends update the RSS feed every 10 minutes. This will start wordflow 1 minute after. \"},\"typeVersion\":1},{\"id\":\"4644b6ca-43da-42ab-870c-eeb52610208c\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[680,560],\"parameters\":{\"color\":3,\"height\":480,\"content\":\"## CONFIGURATION\\nmin_traffic is a numeric value. Google Trend RSS has an approx traffic value 100, 200, 500, 1000 etc.\\n\\nmax_result is a numeric value used to limit max rss to scrape\\n\\njina_key is the jina.ai API key\"},\"typeVersion\":1},{\"id\":\"b4ac3f6a-dc72-4e3e-9fa1-80298a66ddf9\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[940,560],\"parameters\":{\"height\":480,\"content\":\"## Google Sheet Database\\nThis is main sheet where all your Editorial plan will be saved.\\n\\nThe column status value could be a trigger for other automations\"},\"typeVersion\":1},{\"id\":\"09fa9ed7-2557-46ae-857f-e251bf25b10e\",\"name\":\"Sticky Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1200,560],\"parameters\":{\"height\":480,\"content\":\"## Google Trends request\\n\\nWe get last kwyword in trend. Every item has a main keyword and 3 URL. We will use those url to scrape content and generate a combined summary\"},\"typeVersion\":1},{\"id\":\"6d3d6f90-4eae-4239-b8cd-bfdb40bf01e9\",\"name\":\"Sticky Note4\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1460,560],\"parameters\":{\"height\":480,\"content\":\"## Simple conversion\\n\\nConverts XML RSS into a more readable json object\"},\"typeVersion\":1},{\"id\":\"3b5dd19f-ac2d-426b-8853-1af3819e10f6\",\"name\":\"Sticky Note5\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1720,560],\"parameters\":{\"height\":480,\"content\":\"## Building dataset\\n\\nHere we limits results, filter by mmin traffic and we flat the RSS structure to adapt to Google Sheet, fields are renamed as per description.\\n\\nThen RSS result and Google Sheet is compared, if a new keyword is found we have result. If RSS give a keyword already srtored, this node doesn't give any output.\"},\"typeVersion\":1},{\"id\":\"cce50db5-6566-439c-9b90-3f8720411613\",\"name\":\"Sticky Note6\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[940,1080],\"parameters\":{\"height\":460,\"content\":\"## Data mapping\\n\\nHere you have all fields needed in Google Sheet.\\n\\nWhile done, the content of 3 website linked in Google Trends RSS will be merged in a single Summary field\"},\"typeVersion\":1},{\"id\":\"d57a8c16-21c6-4388-bb91-093428061ac5\",\"name\":\"Sticky Note7\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1200,1080],\"parameters\":{\"color\":3,\"height\":460,\"content\":\"## Data check\\n\\nSometimes scraping HTML content fails (for some reasons), that's normal but this should avoid to save a zero content if all 3 scraping nodes will fail\"},\"typeVersion\":1},{\"id\":\"2bcbf0a9-423d-45eb-a444-ab2140db2db6\",\"name\":\"Sticky Note8\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[680,1080],\"parameters\":{\"height\":460,\"content\":\"## Data mapping\\n\\nHere you have all fields needed in Google Sheet.\\n\\nWhile done, the content of 3 website linked in Google Trends RSS will be merged in a single Summary field\"},\"typeVersion\":1},{\"id\":\"692b342c-c252-48c6-ad11-b58906aa62e2\",\"name\":\"If we have scraped min 1 url -> Save\",\"type\":\"n8n-nodes-base.if\",\"position\":[1280,1380],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"42b15ebc-f2f7-4dc0-957f-b04d1bdacb41\",\"operator\":{\"type\":\"boolean\",\"operation\":\"true\",\"singleValue\":true},\"leftValue\":\"={{ $json.summary.length > 100 }}\",\"rightValue\":\"\"}]}},\"typeVersion\":2.2},{\"id\":\"f2f94f0b-dcb4-4b52-86f8-c92aa2fc3d88\",\"name\":\"All scraping node failed. Don't save record without summary\",\"type\":\"n8n-nodes-base.noOp\",\"position\":[1580,1380],\"parameters\":{},\"typeVersion\":1},{\"id\":\"d3f42eb0-5e37-40ff-a476-46b6384f2647\",\"name\":\"Sticky Note9\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[680,1560],\"parameters\":{\"color\":7,\"width\":1280,\"height\":300,\"content\":\"## Scraping\\n\\nHere jina.ai will get text content from 3 Google Trends URLs\"},\"typeVersion\":1},{\"id\":\"8178a70e-f3d2-4157-8f4b-9adaf8932e8e\",\"name\":\"Sticky Note10\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1460,1080],\"parameters\":{\"color\":4,\"width\":500,\"height\":460,\"content\":\"## Saving output\\n\\n\"},\"typeVersion\":1}],\"active\":false,\"pinData\":{},\"settings\":{\"executionOrder\":\"v1\"},\"versionId\":\"81aec91d-f995-4a14-b801-ef44070e7153\",\"connections\":{\"XML\":{\"main\":[[{\"node\":\"New keywords\",\"type\":\"main\",\"index\":0}]]},\"CONFIG\":{\"main\":[[{\"node\":\"Get saved keywords\",\"type\":\"main\",\"index\":0}]]},\"Mapping\":{\"main\":[[{\"node\":\"If we have scraped min 1 url -> Save\",\"type\":\"main\",\"index\":0}]]},\"content1\":{\"main\":[[{\"node\":\"content2\",\"type\":\"main\",\"index\":0}]]},\"content2\":{\"main\":[[{\"node\":\"content3\",\"type\":\"main\",\"index\":0}]]},\"content3\":{\"main\":[[{\"node\":\"Loop Over Items\",\"type\":\"main\",\"index\":0}]]},\"GoogleTrends\":{\"main\":[[{\"node\":\"XML\",\"type\":\"main\",\"index\":0}]]},\"New keywords\":{\"main\":[[{\"node\":\"Loop Over Items\",\"type\":\"main\",\"index\":0}]]},\"Loop Over Items\":{\"main\":[[{\"node\":\"Mapping\",\"type\":\"main\",\"index\":0}],[{\"node\":\"content1\",\"type\":\"main\",\"index\":0}]]},\"Get saved keywords\":{\"main\":[[{\"node\":\"GoogleTrends\",\"type\":\"main\",\"index\":0}]]},\"Start every hour past 11 minutes\":{\"main\":[[{\"node\":\"CONFIG\",\"type\":\"main\",\"index\":0}]]},\"When clicking ‘Test workflow’\":{\"main\":[[{\"node\":\"CONFIG\",\"type\":\"main\",\"index\":0}]]},\"If we have scraped min 1 url -> Save\":{\"main\":[[{\"node\":\"Google Sheets\",\"type\":\"main\",\"index\":0}],[{\"node\":\"All scraping node failed. Don't save record without summary\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "Stay ahead of trends by automating your content research. This workflow fetches trending keywords from Google Trends RSS, extracts key insights from top articles, and saves structured summaries in Google Sheets—helping you build a data-driven editorial plan effortlessly.\n\n## **How it works**\n\n  1. **Fetch Google Trends RSS** – The workflow retrieves trending keywords along with three related article links.\n  2. **Extract & Process Content** – It fetches the content of these articles, cleans the HTML, and generates a concise summary using Jina AI.\n  3. **Store in Google Sheets** – The processed insights, including the trending keyword and summary, are saved in a pre-configured Google Sheet.\n\n\n\n## **Setup Steps**\n\n  1. **Prepare a Google Sheet** – Ensure you have a Google Sheet ready to store the extracted data.\n  2. **Configure API Access** – Set up Google Sheets API and any required authentication.\n  3. Get [Jina.ai](http://Jina.ai) API key\n  4. **Adjust Workflow Settings** – A dedicated configuration node allows you to fine-tune how data is processed and stored.\n\n\n\n## **Customization**\n\n  * Modify the **RSS source** to focus on specific Google Trends regions or categories.\n  * Adjust the **content processing logic** to refine how article summaries are created.\n  * Expand the workflow to **integrate with CMS** (e.g., WordPress) for automated content planning.\n\n\n\nThis workflow is ideal for **content strategists, SEO professionals, and news publishers** who want to quickly identify and act on trending topics without manual research. 🚀\n\n## **Google Sheets Fields**\n\nCopy and paste these column headers into your Google Sheet:\n\nColumn Name | Description  \n---|---  \n`status` | Initial status of the keyword (e.g., \"idea\")  \n`trending_keyword` | Trending keyword extracted from Google Trends  \n`approx_traffic` | Estimated traffic for the trending keyword  \n`pubDate` | Date when the keyword was fetched  \n`news_item_url1` | URL of the first related news article  \n`news_item_title1` | Title of the first news article  \n`news_item_url2` | URL of the second related news article  \n`news_item_title2` | Title of the second news article  \n`news_item_url3` | URL of the third related news article  \n`news_item_title3` | Title of the third news article  \n`news_item_picture1` | Image URL from the first news article  \n`news_item_source1` | Source of the first news article  \n`news_item_picture2` | Image URL from the second news article  \n`news_item_source2` | Source of the second news article  \n`news_item_picture3` | Image URL from the third news article  \n`news_item_source3` | Source of the third news article  \n`abstract` | AI-generated summary of the articles (limited to 49,999 characters)  \n  \n### **Instructions**\n\n  1. Open Google Sheets and create a new spreadsheet.\n  2. Copy the column names from the table above.\n  3. Paste them into the first row of your Google Sheet.\n\n\n",
  "crawled_at": "2025-05-26T03:48:39.923736",
  "readme_zh": "通过自动化内容研究抢占趋势先机。该工作流从Google Trends RSS获取热门关键词，提取顶级文章的核心观点，并将结构化摘要保存至Google Sheets——助您轻松构建数据驱动的选题规划。\n\n## **运作原理**\n\n  1. **抓取Google Trends RSS** – 自动获取热门关键词及三个相关文章链接  \n  2. **内容提取与处理** – 抓取文章内容、清理HTML格式，通过Jina AI生成简明摘要  \n  3. **存储至Google Sheets** – 将处理后的趋势关键词和摘要等数据存入预设表格  \n\n## **配置步骤**\n\n  1. **准备Google表格** – 创建用于存储数据的Google Sheet  \n  2. **配置API访问** – 设置Google Sheets API及相关认证  \n  3. 获取[Jina.ai](http://Jina.ai) API密钥  \n  4. **调整工作流设置** – 通过专用配置节点自定义数据处理与存储规则  \n\n## **定制选项**\n\n  * 更换**RSS源**以聚焦特定地区/分类的Google Trends数据  \n  * 调整**内容处理逻辑**优化摘要生成方式  \n  * 扩展工作流以**对接CMS系统**（如WordPress）实现自动选题规划  \n\n本方案特别适合**内容策略师、SEO专家和新闻出版商**快速捕捉热点话题，告别人工调研。🚀  \n\n## **Google表格字段**\n\n将下列列标题复制到您的Google Sheet：\n\n列名 | 说明  \n---|---  \n`status` | 关键词初始状态（如\"idea\"）  \n`trending_keyword` | 从Google Trends提取的热门关键词  \n`approx_traffic` | 关键词预估流量  \n`pubDate` | 关键词抓取日期  \n`news_item_url1` | 第一篇相关新闻链接  \n`news_item_title1` | 第一篇新闻标题  \n`news_item_url2` | 第二篇相关新闻链接  \n`news_item_title2` | 第二篇新闻标题  \n`news_item_url3` | 第三篇相关新闻链接  \n`news_item_title3` | 第三篇新闻标题  \n`news_item_picture1` | 第一篇新闻配图链接  \n`news_item_source1` | 第一篇新闻来源  \n`news_item_picture2` | 第二篇新闻配图链接  \n`news_item_source2` | 第二篇新闻来源  \n`news_item_picture3` | 第三篇新闻配图链接  \n`news_item_source3` | 第三篇新闻来源  \n`abstract` | AI生成的文章摘要（限49,999字符）  \n\n### **操作指南**\n\n  1. 新建Google Sheets文档  \n  2. 复制上表所有列名  \n  3. 粘贴至表格首行",
  "title_zh": "提取谷歌趋势关键词并在谷歌表格中汇总文章",
  "publish_date_zh": "最后更新于2个月前",
  "workflow_json_zh": "{\n  \"id\": \"Eyh4jc7RK7rCTh4z\",\n  \"meta\": {\n    \"instanceId\": \"38fb1860cc6284b8af9ba3b485f32cc1851cd97470ef1b4a472b5e707f1c93b5\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"name\": \"My workflow 2\",\n  \"tags\": [],\n  \"nodes\": [\n    {\n      \"id\": \"084bcc9e-9d05-4b69-8cb1-eccdcb67358e\",\n      \"name\": \"When clicking ‘Test workflow’\",\n      \"type\": \"n8n-nodes-base.manualTrigger\",\n      \"position\": [\n        500,\n        720\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"f593e3f1-adea-4ef7-9779-4f2436fe7774\",\n      \"name\": \"XML\",\n      \"type\": \"n8n-nodes-base.xml\",\n      \"position\": [\n        1540,\n        880\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"normalize\": false,\n          \"explicitArray\": false\n        }\n      },\n      \"executeOnce\": true,\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"5906371f-d5da-4141-876f-542cb5d0d1a8\",\n      \"name\": \"GoogleTrends\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1280,\n        880\n      ],\n      \"parameters\": {\n        \"url\": \"https://trends.google.it/trending/rss?geo=IT\",\n        \"options\": {}\n      },\n      \"executeOnce\": true,\n      \"retryOnFail\": true,\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"7badc1ad-48c2-4142-88bb-fa3f442abd66\",\n      \"name\": \"CONFIG\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        760,\n        880\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"25d7e553-9678-40ad-bb69-e4eb4bce4d11\",\n              \"name\": \"min_traffic\",\n              \"type\": \"number\",\n              \"value\": 500\n            },\n            {\n              \"id\": \"decd0a3d-ddc5-45c3-a56f-ee1f14705019\",\n              \"name\": \"max_results\",\n              \"type\": \"number\",\n              \"value\": 3\n            },\n            {\n              \"id\": \"12cdd78a-45a7-499e-8fe5-0ab6a7da8a10\",\n              \"name\": \"jina_key\",\n              \"type\": \"string\",\n              \"value\": \"\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"b92ad672-ea1d-4b5b-ae1d-0aa883c5db9a\",\n      \"name\": \"Get saved keywords\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"position\": [\n        1020,\n        880\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"sheetName\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gid=0\",\n          \"cachedResultUrl\": \"\",\n          \"cachedResultName\": \"\"\n        },\n        \"documentId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"\",\n          \"cachedResultUrl\": \"\",\n          \"cachedResultName\": \"\"\n        }\n      },\n      \"credentials\": {\n        \"googleSheetsOAuth2Api\": {\n          \"id\": \"0HENZXUy9PlxLx0O\",\n          \"name\": \"Google Sheets account\"\n        }\n      },\n      \"executeOnce\": true,\n      \"typeVersion\": 4.5,\n      \"alwaysOutputData\": false\n    },\n    {\n      \"id\": \"e5639494-d757-442f-942f-75927ecadd86\",\n      \"name\": \"Loop Over Items\",\n      \"type\": \"n8n-nodes-base.splitInBatches\",\n      \"position\": [\n        740,\n        1380\n      ],\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"2c81d605-6749-47a2-95ba-846d86388c04\",\n      \"name\": \"Mapping\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        1000,\n        1380\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"7230decf-45d9-4006-b005-614fb1dede10\",\n              \"name\": \"summary\",\n              \"type\": \"string\",\n              \"value\": \"={{ $('content1').item.json.data.text.replaceAll('\\\\n', ' ').trim() }}\\n---\\n{{ $('content2').item.json.data.text.replaceAll('\\\\n', ' ').trim() }}\\n---\\n{{ $('content3').item.json.data.text.replaceAll('\\\\n', ' ').trim() }}\"\n            },\n            {\n              \"id\": \"ad8f7dcd-fc93-41f3-b643-db4a2b569119\",\n              \"name\": \"trending_keyword\",\n              \"type\": \"string\",\n              \"value\": \"={{ $('New keywords').item.json.trending_keyword }}\"\n            },\n            {\n              \"id\": \"a3838385-90e2-4308-b147-5ef6de4a2c19\",\n              \"name\": \"approx_traffic\",\n              \"type\": \"number\",\n              \"value\": \"={{ $('New keywords').item.json.approx_traffic }}\"\n            },\n            {\n              \"id\": \"fc8523d5-a68d-443b-ad49-9057dee85617\",\n              \"name\": \"pubDate\",\n              \"type\": \"string\",\n              \"value\": \"={{ $('New keywords').item.json.pubDate }}\"\n            },\n            {\n              \"id\": \"139fd57f-8ccc-453b-9f8f-94c9546bbd1c\",\n              \"name\": \"status\",\n              \"type\": \"string\",\n              \"value\": \"idea\"\n            },\n            {\n              \"id\": \"39fa6799-78db-453e-ad29-359ab441e912\",\n              \"name\": \"news_item_url1\",\n              \"type\": \"string\",\n              \"value\": \"={{ $('New keywords').item.json.news_item_url1 }}\"\n            },\n            {\n              \"id\": \"1e6e7545-526a-4003-ac92-520fa04cfe1d\",\n              \"name\": \"news_item_title1\",\n              \"type\": \"string\",\n              \"value\": \"={{ $('New keywords').item.json.news_item_title1 }}\"\n            },\n            {\n              \"id\": \"12c019fc-2fe6-41e8-a8b8-e38bdfa16215\",\n              \"name\": \"news_item_title2\",\n              \"type\": \"string\",\n              \"value\": \"={{ $('New keywords').item.json.news_item_title2 }}\"\n            },\n            {\n              \"id\": \"b14b5835-66b7-448c-b9a5-d9f85d9f7f12\",\n              \"name\": \"news_item_url2\",\n              \"type\": \"string\",\n              \"value\": \"={{ $('New keywords').item.json.news_item_url2 }}\"\n            },\n            {\n              \"id\": \"4df8d3e0-7c8d-40e1-8ed7-b1743a8bbf17\",\n              \"name\": \"news_item_title3\",\n              \"type\": \"string\",\n              \"value\": \"={{ $('New keywords').item.json.news_item_title3 }}\"\n            },\n            {\n              \"id\": \"7fe45e6d-1978-49b4-b289-c33e3d68f71a\",\n              \"name\": \"news_item_url3\",\n              \"type\": \"string\",\n              \"value\": \"={{ $('New keywords').item.json.news_item_url3 }}\"\n            },\n            {\n              \"id\": \"ef39509c-c4e7-49b1-9ee8-ad82a8af9514\",\n              \"name\": \"news_item_picture1\",\n              \"type\": \"string\",\n              \"value\": \"={{ $('New keywords').item.json.news_item_picture1 }}\"\n            },\n            {\n              \"id\": \"a2210ea6-8ee5-408a-9ba1-5e07bd4d7f1b\",\n              \"name\": \"news_item_source1\",\n              \"type\": \"string\",\n              \"value\": \"={{ $('New keywords').item.json.news_item_source1 }}\"\n            },\n            {\n              \"id\": \"b6136672-4c09-4da0-ba5b-d9026877ca1e\",\n              \"name\": \"news_item_picture2\",\n              \"type\": \"string\",\n              \"value\": \"={{ $('New keywords').item.json.news_item_picture2 }}\"\n            },\n            {\n              \"id\": \"f9a54dca-079c-4431-af34-6bb98a6d8711\",\n              \"name\": \"news_item_source2\",\n              \"type\": \"string\",\n              \"value\": \"={{ $('New keywords').item.json.news_item_source2 }}\"\n            },\n            {\n              \"id\": \"aa38fecd-3743-447f-aa54-a1a86b5ad717\",\n              \"name\": \"news_item_picture3\",\n              \"type\": \"string\",\n              \"value\": \"={{ $('New keywords').item.json.news_item_picture3 }}\"\n            },\n            {\n              \"id\": \"2ff53574-9f9d-4e35-afbe-161e77a58515\",\n              \"name\": \"news_item_source3\",\n              \"type\": \"string\",\n              \"value\": \"={{ $('New keywords').item.json.news_item_source3 }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"5ca98d8f-0bc6-4b77-a367-81ed2509deba\",\n      \"name\": \"Google Sheets\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"position\": [\n        1580,\n        1180\n      ],\n      \"parameters\": {\n        \"columns\": {\n          \"value\": {\n            \"status\": \"idea\",\n            \"pubDate\": \"={{ $json.pubDate }}\",\n            \"abstract\": \"={{ $json.abstract.replaceAll('  ', '').substring(0, 49999) }}\",\n            \"approx_traffic\": \"={{ $json.approx_traffic }}\",\n            \"news_item_url1\": \"={{ $json.news_item_url1 }}\",\n            \"news_item_url2\": \"={{ $json.news_item_url2 }}\",\n            \"news_item_url3\": \"={{ $json.news_item_url3 }}\",\n            \"news_item_title1\": \"={{ $json.news_item_title1 }}\",\n            \"news_item_title2\": \"={{ $json.news_item_title2 }}\",\n            \"news_item_title3\": \"={{ $json.news_item_title3 }}\",\n            \"trending_keyword\": \"={{ $json.trending_keyword }}\",\n            \"news_item_source1\": \"={{ $json.news_item_source1 }}\",\n            \"news_item_source2\": \"={{ $json.news_item_source2 }}\",\n            \"news_item_source3\": \"={{ $json.news_item_source3 }}\",\n            \"news_item_picture1\": \"={{ $json.news_item_picture1 }}\",\n            \"news_item_picture2\": \"={{ $json.news_item_picture2 }}\",\n            \"news_item_picture3\": \"={{ $json.news_item_picture3 }}\"\n          },\n          \"schema\": [\n            {\n              \"id\": \"status\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"status\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"trending_keyword\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"trending_keyword\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"approx_traffic\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"approx_traffic\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"abstract\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"abstract\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"pubDate\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"pubDate\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"news_item_url1\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"news_item_url1\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"news_item_title1\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"news_item_title1\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"news_item_picture1\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"news_item_picture1\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"news_item_source1\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"news_item_source1\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"news_item_url2\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"news_item_url2\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"news_item_title2\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"news_item_title2\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"news_item_picture2\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"news_item_picture2\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"news_item_source2\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"news_item_source2\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"news_item_url3\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"news_item_url3\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"news_item_title3\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"news_item_title3\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"news_item_picture3\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"news_item_picture3\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"news_item_source3\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"news_item_source3\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            }\n          ],\n          \"mappingMode\": \"defineBelow\",\n          \"matchingColumns\": [],\n          \"attemptToConvertTypes\": false,\n          \"convertFieldsToString\": false\n        },\n        \"options\": {},\n        \"operation\": \"append\",\n        \"sheetName\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gid=0\",\n          \"cachedResultUrl\": \"\",\n          \"cachedResultName\": \"\"\n        },\n        \"documentId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"\",\n          \"cachedResultUrl\": \"\",\n          \"cachedResultName\": \"\"\n        }\n      },\n      \"typeVersion\": 4.5\n    },\n    {\n      \"id\": \"41fcb412-ea5d-4adc-8d40-d72398537150\",\n      \"name\": \"New keywords\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        1780,\n        880\n      ],\n      \"parameters\": {\n        \"jsCode\": \"const max_results = $('CONFIG').first().json.max_results;\\nconst min_traffic = $('CONFIG').first().json.min_traffic;\\n\\nconst gsheet = $(\\\"Get saved keywords\\\").all();\\nconst gsheetKeys = gsheet.map(record => record.json.trending_keyword);\\n\\nconst items = $('XML').first().json.rss.channel.item;\\nconst trafficKey = Object.keys(items[0]).find(key => key.includes(\\\"approx_traffic\\\"));\\nconst parseTraffic = (traffic) => parseInt(traffic.replace('+', ''), 10);\\n\\nconst newItems = items.map(item => {\\n    const links = Array.isArray(item[\\\"ht:news_item\\\"]) ? item[\\\"ht:news_item\\\"].slice(0, 3) : [];\\n\\n    const flattenedLinks = links.reduce((acc, news, index) => {\\n        acc[`news_item_url${index + 1}`] = news[\\\"ht:news_item_url\\\"];\\n        acc[`news_item_title${index + 1}`] = news[\\\"ht:news_item_title\\\"];\\n        acc[`news_item_picture${index + 1}`] = news[\\\"ht:news_item_picture\\\"];\\n        acc[`news_item_source${index + 1}`] = news[\\\"ht:news_item_source\\\"];\\n        return acc;\\n    }, {});\\n\\n    return {\\n        trending_keyword: item.title,\\n        approx_traffic: parseTraffic(item[trafficKey]),\\n        pubDate: item.pubDate,\\n        ...flattenedLinks, // Aggiungi i link\\n    };\\n}).filter(item => \\n    item.approx_traffic >= min_traffic && \\n    !gsheetKeys.includes(item.trending_keyword) // Filtra quelli già presenti in Google Sheets\\n);\\n\\nlet sortedItems = newItems.sort((a, b) => b.approx_traffic - a.approx_traffic);\\nif (max_results > 0) {\\n    sortedItems = sortedItems.slice(0, max_results);\\n}\\n\\nreturn sortedItems;\\n\"\n      },\n      \"typeVersion\": 2,\n      \"alwaysOutputData\": false\n    },\n    {\n      \"id\": \"56a953da-15a7-48da-a299-c53a7947c45e\",\n      \"name\": \"content1\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1020,\n        1700\n      ],\n      \"parameters\": {\n        \"url\": \"=https://r.jina.ai/{{ $('New keywords').item.json.news_item_url1 }}\",\n        \"options\": {},\n        \"sendHeaders\": true,\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"Authorization\",\n              \"value\": \"=Bearer {{ $('CONFIG').item.json.jina_key }}\"\n            },\n            {\n              \"name\": \"Accept\",\n              \"value\": \"application/json\"\n            },\n            {\n              \"name\": \"X-Remove-Selector\",\n              \"value\": \"a, link, script, footer, img, svg\"\n            },\n            {\n              \"name\": \"X-Retain-Images\",\n              \"value\": \"none\"\n            },\n            {\n              \"name\": \"X-Return-Format\",\n              \"value\": \"text\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"e3dbb73f-eac8-47aa-b621-0775dd09c5bf\",\n      \"name\": \"content2\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1280,\n        1700\n      ],\n      \"parameters\": {\n        \"url\": \"=https://r.jina.ai/{{ $('New keywords').item.json.news_item_url2 }}\",\n        \"options\": {},\n        \"sendHeaders\": true,\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"Authorization\",\n              \"value\": \"=Bearer {{ $('CONFIG').item.json.jina_key }}\"\n            },\n            {\n              \"name\": \"Accept\",\n              \"value\": \"application/json\"\n            },\n            {\n              \"name\": \"X-Remove-Selector\",\n              \"value\": \"a, link, script, footer, img, svg\"\n            },\n            {\n              \"name\": \"X-Retain-Images\",\n              \"value\": \"none\"\n            },\n            {\n              \"name\": \"X-Return-Format\",\n              \"value\": \"text\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"0723267a-5e4e-40e2-87bf-4c215c79b66c\",\n      \"name\": \"content3\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1560,\n        1700\n      ],\n      \"parameters\": {\n        \"url\": \"=https://r.jina.ai/{{ $('New keywords').item.json.news_item_url3 }}\",\n        \"options\": {},\n        \"sendHeaders\": true,\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"Authorization\",\n              \"value\": \"=Bearer {{ $('CONFIG').item.json.jina_key }}\"\n            },\n            {\n              \"name\": \"Accept\",\n              \"value\": \"application/json\"\n            },\n            {\n              \"name\": \"X-Remove-Selector\",\n              \"value\": \"a, link, script, footer, img, svg\"\n            },\n            {\n              \"name\": \"X-Retain-Images\",\n              \"value\": \"none\"\n            },\n            {\n              \"name\": \"X-Return-Format\",\n              \"value\": \"text\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"8621b782-a182-479a-afa1-de0b525d3909\",\n      \"name\": \"Start every hour past 11 minutes\",\n      \"type\": \"n8n-nodes-base.scheduleTrigger\",\n      \"position\": [\n        500,\n        880\n      ],\n      \"parameters\": {\n        \"rule\": {\n          \"interval\": [\n            {\n              \"field\": \"cronExpression\",\n              \"expression\": \"11 */1 * * *\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"d04e89cd-a578-45d9-88f2-be4c72407049\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        420,\n        560\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"height\": 1300,\n        \"content\": \"## 定时任务触发器\\n谷歌趋势每10分钟更新一次RSS订阅源。此流程将在更新后1分钟启动。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"4644b6ca-43da-42ab-870c-eeb52610208c\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        680,\n        560\n      ],\n      \"parameters\": {\n        \"color\": 3,\n        \"height\": 480,\n        \"content\": \"## 配置\\nmin_traffic为数值型参数，表示Google Trend RSS的近似流量值（如100、200、500、1000等）\\n\\nmax_result为数值型参数，用于限制抓取的RSS最大条目数\\n\\njina_key是jina.ai平台的API密钥\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"b4ac3f6a-dc72-4e3e-9fa1-80298a66ddf9\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        940,\n        560\n      ],\n      \"parameters\": {\n        \"height\": 480,\n        \"content\": \"## 谷歌表格数据库\\n此处为主工作表，用于保存所有编辑计划内容。\\n\\n状态列的值可作为触发其他自动化流程的条件\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"09fa9ed7-2557-46ae-857f-e251bf25b10e\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1200,\n        560\n      ],\n      \"parameters\": {\n        \"height\": 480,\n        \"content\": \"## 谷歌趋势请求\\n\\n我们获取趋势中的最新关键词。每个条目包含一个主关键词和3个URL。我们将使用这些URL来抓取内容并生成综合摘要。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"6d3d6f90-4eae-4239-b8cd-bfdb40bf01e9\",\n      \"name\": \"Sticky Note4\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1460,\n        560\n      ],\n      \"parameters\": {\n        \"height\": 480,\n        \"content\": \"## 简单转换\\n\\n将XML RSS转换为更易读的JSON对象\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"3b5dd19f-ac2d-426b-8853-1af3819e10f6\",\n      \"name\": \"Sticky Note5\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1720,\n        560\n      ],\n      \"parameters\": {\n        \"height\": 480,\n        \"content\": \"## 构建数据集\\n\\n此处我们对结果进行限制，通过最小流量筛选，并将RSS结构扁平化以适应Google表格，字段名称按描述重命名。\\n\\n随后将RSS结果与Google表格进行比对，若发现新关键词则输出结果。若RSS提供的关键词已存在存储记录，则该节点不产生任何输出。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"cce50db5-6566-439c-9b90-3f8720411613\",\n      \"name\": \"Sticky Note6\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        940,\n        1080\n      ],\n      \"parameters\": {\n        \"height\": 460,\n        \"content\": \"## 数据映射\\n\\n此处提供Google表格中所需的所有字段。\\n\\n完成后，Google Trends RSS中链接的3个网站内容将合并至一个摘要字段中。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"d57a8c16-21c6-4388-bb91-093428061ac5\",\n      \"name\": \"Sticky Note7\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1200,\n        1080\n      ],\n      \"parameters\": {\n        \"color\": 3,\n        \"height\": 460,\n        \"content\": \"## 数据检查\\n\\n有时抓取HTML内容会失败（由于某些原因），这很正常，但应当避免在所有3个抓取节点都失败时保存零内容的情况。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"2bcbf0a9-423d-45eb-a444-ab2140db2db6\",\n      \"name\": \"Sticky Note8\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        680,\n        1080\n      ],\n      \"parameters\": {\n        \"height\": 460,\n        \"content\": \"## 数据映射\\n\\n此处提供Google表格中所需的所有字段。\\n\\n完成后，Google Trends RSS中链接的3个网站内容将合并至一个摘要字段中。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"692b342c-c252-48c6-ad11-b58906aa62e2\",\n      \"name\": \"If we have scraped min 1 url -> Save\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        1280,\n        1380\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"42b15ebc-f2f7-4dc0-957f-b04d1bdacb41\",\n              \"operator\": {\n                \"type\": \"boolean\",\n                \"operation\": \"true\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $json.summary.length > 100 }}\",\n              \"rightValue\": \"\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"f2f94f0b-dcb4-4b52-86f8-c92aa2fc3d88\",\n      \"name\": \"All scraping node failed. Don't save record without summary\",\n      \"type\": \"n8n-nodes-base.noOp\",\n      \"position\": [\n        1580,\n        1380\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"d3f42eb0-5e37-40ff-a476-46b6384f2647\",\n      \"name\": \"Sticky Note9\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        680,\n        1560\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 1280,\n        \"height\": 300,\n        \"content\": \"## 数据抓取\\n\\n这里 jina.ai 将从3个Google Trends网址获取文本内容\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"8178a70e-f3d2-4157-8f4b-9adaf8932e8e\",\n      \"name\": \"Sticky Note10\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1460,\n        1080\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 500,\n        \"height\": 460,\n        \"content\": \"## 保存输出\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"active\": false,\n  \"pinData\": {},\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"81aec91d-f995-4a14-b801-ef44070e7153\",\n  \"connections\": {\n    \"XML\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"New keywords\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"CONFIG\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get saved keywords\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Mapping\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"If we have scraped min 1 url -> Save\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"content1\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"content2\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"content2\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"content3\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"content3\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Loop Over Items\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"GoogleTrends\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"XML\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"New keywords\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Loop Over Items\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Loop Over Items\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Mapping\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"content1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get saved keywords\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"GoogleTrends\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Start every hour past 11 minutes\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"CONFIG\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When clicking ‘Test workflow’\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"CONFIG\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"If we have scraped min 1 url -> Save\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Google Sheets\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"All scraping node failed. Don't save record without summary\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}