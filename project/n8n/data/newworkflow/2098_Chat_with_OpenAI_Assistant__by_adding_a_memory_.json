{
  "url": "https://n8n.io/workflows/2098-chat-with-openai-assistant-by-adding-a-memory/",
  "title": "Chat with OpenAI Assistant (by adding a memory)",
  "author": "David Roberts",
  "publish_date": "Last update 2 months ago",
  "publish_date_absolute": "2025-03-25",
  "categories": [
    {
      "name": "AI"
    }
  ],
  "workflow_json": "{\"meta\":{\"instanceId\":\"408f9fb9940c3cb18ffdef0e0150fe342d6e655c3a9fac21f0f644e8bedabcd9\",\"templateCredsSetupCompleted\":true},\"nodes\":[{\"id\":\"b26e5f35-214a-4eba-83f6-a61736a2f017\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[240,560],\"parameters\":{\"color\":7,\"width\":398,\"height\":217,\"content\":\"Call the assistant, passing in the previous chat messages\"},\"typeVersion\":1},{\"id\":\"7cba00f3-7824-47eb-a17f-6e34fab51c0d\",\"name\":\"Sticky Note4\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-440,460],\"parameters\":{\"height\":300.48941882630095,\"content\":\"## Try me out\\n1. In the OpenAI Assistant node, make sure your OpenAI credentials are set and choose an assistant to use (you'll need to create one if you don't have one already)\\n2. Click the 'Chat' button below\\n\\n  - In the first message, tell the AI what your name is\\n  - In a second message, ask the AI what your name is\"},\"typeVersion\":1},{\"id\":\"a71b8aef-5ee9-4ff2-9a77-5154fee67cc8\",\"name\":\"Simple Memory\",\"type\":\"@n8n/n8n-nodes-langchain.memoryBufferWindow\",\"position\":[180,920],\"parameters\":{\"sessionKey\":\"={{ $('When chat message received').first().json.sessionId }}\",\"sessionIdType\":\"customKey\",\"contextWindowLength\":20},\"typeVersion\":1.3},{\"id\":\"24faa70e-52e7-40e4-abc1-05c8b18df583\",\"name\":\"OpenAI\",\"type\":\"@n8n/n8n-nodes-langchain.openAi\",\"position\":[300,640],\"parameters\":{\"text\":\"={{ $('When chat message received').item.json.chatInput }}\",\"prompt\":\"define\",\"options\":{},\"resource\":\"assistant\",\"assistantId\":{\"__rl\":true,\"mode\":\"id\",\"value\":\"asst_HDSAnzsp4WqY4UC1iI9auH5z\"}},\"credentials\":{\"openAiApi\":{\"id\":\"8gccIjcuf3gvaoEr\",\"name\":\"OpenAi account\"}},\"typeVersion\":1.8},{\"id\":\"37b70475-f28b-4e5f-a7e2-3dad715b2e8d\",\"name\":\"Calculator1\",\"type\":\"@n8n/n8n-nodes-langchain.toolCalculator\",\"position\":[600,920],\"parameters\":{},\"typeVersion\":1},{\"id\":\"79d644c4-6d24-4f1e-9c43-08fa8b20da0e\",\"name\":\"When chat message received\",\"type\":\"@n8n/n8n-nodes-langchain.chatTrigger\",\"position\":[-100,640],\"webhookId\":\"9eab0524-6cd7-4b81-8bd8-4d050a972a08\",\"parameters\":{\"public\":true,\"options\":{\"loadPreviousSession\":\"memory\"}},\"typeVersion\":1.1}],\"pinData\":{},\"connections\":{\"Calculator1\":{\"ai_tool\":[[{\"node\":\"OpenAI\",\"type\":\"ai_tool\",\"index\":0}]]},\"Simple Memory\":{\"ai_memory\":[[{\"node\":\"OpenAI\",\"type\":\"ai_memory\",\"index\":0},{\"node\":\"When chat message received\",\"type\":\"ai_memory\",\"index\":0}]]},\"When chat message received\":{\"main\":[[{\"node\":\"OpenAI\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "OpenAI Assistant is a powerful tool, but at the time of writing it doesn't automatically remember past messages from a conversation.\n\nThis workflow demonstrates how to get around this, by managing the chat history in n8n and passing it to the assistant when required.\n\nThis makes it possible to use OpenAI Assistant for chatbot use cases.\n\nNote that to use this template, you need to be on n8n version 1.28.0 or later.\n",
  "crawled_at": "2025-05-25T20:55:40.453634",
  "readme_zh": "OpenAI助手虽功能强大，但在撰写本文时尚未具备自动记忆对话历史的功能。\n\n本工作流通过n8n平台管理聊天记录，并在需要时将其传递给助手，从而巧妙解决了这一限制。\n\n这使得将OpenAI助手应用于聊天机器人场景成为可能。\n\n请注意：使用此模板需确保n8n版本为1.28.0或更高。",
  "title_zh": "与OpenAI助手聊天（通过增加记忆功能）",
  "publish_date_zh": "最后一次更新于一个月前",
  "workflow_json_zh": "{\n  \"meta\": {\n    \"instanceId\": \"408f9fb9940c3cb18ffdef0e0150fe342d6e655c3a9fac21f0f644e8bedabcd9\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"nodes\": [\n    {\n      \"id\": \"b26e5f35-214a-4eba-83f6-a61736a2f017\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        240,\n        560\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 398,\n        \"height\": 217,\n        \"content\": \"呼叫助手，传入之前的聊天消息\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"7cba00f3-7824-47eb-a17f-6e34fab51c0d\",\n      \"name\": \"Sticky Note4\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -440,\n        460\n      ],\n      \"parameters\": {\n        \"height\": 300.48941882630095,\n        \"content\": \"## 试试看吧\\n1. 在OpenAI助手节点中，请确保已设置您的OpenAI凭证并选择要使用的助手（如果还没有，您需要先创建一个）\\n2. 点击下方的\\\"聊天\\\"按钮\\n\\n  - 第一条消息中，告诉AI您的名字\\n  - 第二条消息中，询问AI您的名字是什么\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"a71b8aef-5ee9-4ff2-9a77-5154fee67cc8\",\n      \"name\": \"Simple Memory\",\n      \"type\": \"@n8n/n8n-nodes-langchain.memoryBufferWindow\",\n      \"position\": [\n        180,\n        920\n      ],\n      \"parameters\": {\n        \"sessionKey\": \"={{ $('When chat message received').first().json.sessionId }}\",\n        \"sessionIdType\": \"customKey\",\n        \"contextWindowLength\": 20\n      },\n      \"typeVersion\": 1.3\n    },\n    {\n      \"id\": \"24faa70e-52e7-40e4-abc1-05c8b18df583\",\n      \"name\": \"OpenAI\",\n      \"type\": \"@n8n/n8n-nodes-langchain.openAi\",\n      \"position\": [\n        300,\n        640\n      ],\n      \"parameters\": {\n        \"text\": \"={{ $('When chat message received').item.json.chatInput }}\",\n        \"prompt\": \"define\",\n        \"options\": {},\n        \"resource\": \"assistant\",\n        \"assistantId\": {\n          \"__rl\": true,\n          \"mode\": \"id\",\n          \"value\": \"asst_HDSAnzsp4WqY4UC1iI9auH5z\"\n        }\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"8gccIjcuf3gvaoEr\",\n          \"name\": \"OpenAi account\"\n        }\n      },\n      \"typeVersion\": 1.8\n    },\n    {\n      \"id\": \"37b70475-f28b-4e5f-a7e2-3dad715b2e8d\",\n      \"name\": \"Calculator1\",\n      \"type\": \"@n8n/n8n-nodes-langchain.toolCalculator\",\n      \"position\": [\n        600,\n        920\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"79d644c4-6d24-4f1e-9c43-08fa8b20da0e\",\n      \"name\": \"When chat message received\",\n      \"type\": \"@n8n/n8n-nodes-langchain.chatTrigger\",\n      \"position\": [\n        -100,\n        640\n      ],\n      \"webhookId\": \"9eab0524-6cd7-4b81-8bd8-4d050a972a08\",\n      \"parameters\": {\n        \"public\": true,\n        \"options\": {\n          \"loadPreviousSession\": \"memory\"\n        }\n      },\n      \"typeVersion\": 1.1\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"Calculator1\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"OpenAI\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Simple Memory\": {\n      \"ai_memory\": [\n        [\n          {\n            \"node\": \"OpenAI\",\n            \"type\": \"ai_memory\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"When chat message received\",\n            \"type\": \"ai_memory\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When chat message received\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"OpenAI\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}