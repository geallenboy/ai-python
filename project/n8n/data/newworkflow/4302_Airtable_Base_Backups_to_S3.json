{
  "url": "https://n8n.io/workflows/4302-airtable-base-backups-to-s3/",
  "title": "Airtable Base Backups to S3",
  "author": "Autonomous Work",
  "publish_date": "Last update a day ago",
  "publish_date_absolute": "",
  "categories": [
    {
      "name": "Engineering"
    },
    {
      "name": "DevOps"
    },
    {
      "name": "AI"
    }
  ],
  "workflow_json": "{\"id\":\"YeYi657TmrNBAlHy\",\"meta\":{\"instanceId\":\"473c658c7288f697d42ad8adb392c78c9ea1b1c3a9d169c508028d7c271b8621\",\"templateCredsSetupCompleted\":true},\"name\":\"Airtable Full Backup\",\"tags\":[],\"nodes\":[{\"id\":\"2cfec4e1-08ad-4363-a3af-5aa77174ea1a\",\"name\":\"Airtable\",\"type\":\"n8n-nodes-base.airtable\",\"position\":[380,-40],\"parameters\":{\"base\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"yourbase\",\"cachedResultUrl\":\"https://airtable.com/yourbase\",\"cachedResultName\":\"Sample Base\"},\"resource\":\"base\",\"operation\":\"getSchema\"},\"credentials\":{\"airtableTokenApi\":{\"id\":\"U1WMD4Gt9NhWpX3s\",\"name\":\"Airtable\"}},\"typeVersion\":2.1},{\"id\":\"45e6e8e3-2b72-44ae-ae5a-84ade2dfb59b\",\"name\":\"Loop Over Items\",\"type\":\"n8n-nodes-base.splitInBatches\",\"position\":[600,-40],\"parameters\":{\"options\":{}},\"typeVersion\":3},{\"id\":\"8c731bd7-54a7-443f-91de-1dedfcb79620\",\"name\":\"Create Table Metadata\",\"type\":\"n8n-nodes-base.set\",\"position\":[1040,60],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"cea4432c-e31c-43bd-adea-446658a96ab5\",\"name\":\"fileName\",\"type\":\"string\",\"value\":\"={{ $json.name.replace(/[^\\\\p{L}\\\\p{N}\\\\s_-]+/gu, '').trim().replace(/\\\\s+/g, '_')                      \\n}}\"},{\"id\":\"34f5e44c-1d62-47ac-875b-9bbe698ffc0d\",\"name\":\"tableName\",\"type\":\"string\",\"value\":\"={{ $json.name }}\"},{\"id\":\"4a06c76d-7ac3-4fe9-96e3-003e80e0bf1e\",\"name\":\"tableID\",\"type\":\"string\",\"value\":\"={{ $json.id }}\"}]}},\"typeVersion\":3.4},{\"id\":\"57d1b06e-5265-4beb-b53f-9be2f9f1f300\",\"name\":\"Pull Records\",\"type\":\"n8n-nodes-base.airtable\",\"position\":[1260,60],\"parameters\":{\"base\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"yourbase\",\"cachedResultUrl\":\"https://airtable.com/yourbase\",\"cachedResultName\":\"LifeOS\"},\"table\":{\"__rl\":true,\"mode\":\"id\",\"value\":\"={{ $json.tableID }}\"},\"options\":{},\"operation\":\"search\"},\"credentials\":{\"airtableTokenApi\":{\"id\":\"U1WMD4Gt9NhWpX3s\",\"name\":\"Airtable\"}},\"typeVersion\":2.1},{\"id\":\"0872652a-6924-4a56-8058-69b51ecc8ee2\",\"name\":\"Convert to File\",\"type\":\"n8n-nodes-base.convertToFile\",\"position\":[1480,60],\"parameters\":{\"options\":{\"fileName\":\"={{ $('Create Table Metadata').item.json.fileName }}.csv\"}},\"typeVersion\":1.1},{\"id\":\"167783d9-3fad-4a3c-827b-911b8d3587f7\",\"name\":\"AWS S3\",\"type\":\"n8n-nodes-base.awsS3\",\"position\":[1700,60],\"parameters\":{\"fileName\":\"={{ $('Create Table Metadata').item.json.fileName }}.csv\",\"operation\":\"upload\",\"bucketName\":\"aired-out\",\"additionalFields\":{\"parentFolderKey\":\"={{ $('Set Week').item.json.currentWeek }}\"}},\"credentials\":{\"aws\":{\"id\":\"NijLkxXPqg88tIuO\",\"name\":\"AWS S3 Access\"}},\"typeVersion\":2},{\"id\":\"c766b901-e06c-457c-9407-a999b7eaecd0\",\"name\":\"Monthly Prune\",\"type\":\"n8n-nodes-base.scheduleTrigger\",\"position\":[-320,500],\"parameters\":{\"rule\":{\"interval\":[{\"field\":\"months\"}]}},\"typeVersion\":1.2},{\"id\":\"3fb466cd-90ad-4757-9df1-b7e2c317b454\",\"name\":\"Set Timestamps\",\"type\":\"n8n-nodes-base.set\",\"position\":[-80,500],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"ca8f6d53-152c-44ea-b0c8-eb5a7ba7fbf4\",\"name\":\"cutoffDate\",\"type\":\"string\",\"value\":\"={{ $now.minus({ weeks: 4 }).toFormat(\\\"kkkk-'W'WW\\\") }}\"}]}},\"typeVersion\":3.4},{\"id\":\"dacaac6b-1025-4c57-82f2-d17b387c4258\",\"name\":\"If\",\"type\":\"n8n-nodes-base.if\",\"position\":[340,500],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"loose\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"9c09f6cc-9313-42ba-b48e-c8cc2faaebac\",\"operator\":{\"type\":\"dateTime\",\"operation\":\"before\"},\"leftValue\":\"={{ $json.Key.replace(/\\\\/$/, '') }}\",\"rightValue\":\"={{ $('Set Timestamps').item.json.cutoffDate }}\"}]},\"looseTypeValidation\":true},\"typeVersion\":2.2},{\"id\":\"e279fa0d-af6c-4dc2-9ac3-89e3a08280f8\",\"name\":\"Delete File\",\"type\":\"n8n-nodes-base.awsS3\",\"position\":[560,420],\"parameters\":{\"resource\":\"folder\",\"folderKey\":\"={{ $('List Folders').item.json.Key }}\",\"operation\":\"delete\",\"bucketName\":\"aired-out\"},\"credentials\":{\"aws\":{\"id\":\"NijLkxXPqg88tIuO\",\"name\":\"AWS S3 Access\"}},\"typeVersion\":2},{\"id\":\"8a2e4f1e-8a07-4f77-a05d-90cfca9d96da\",\"name\":\"Create Folder\",\"type\":\"n8n-nodes-base.awsS3\",\"position\":[140,-40],\"parameters\":{\"resource\":\"folder\",\"bucketName\":\"aired-out\",\"folderName\":\"={{ $json.currentWeek }}\",\"additionalFields\":{}},\"credentials\":{\"aws\":{\"id\":\"NijLkxXPqg88tIuO\",\"name\":\"AWS S3 Access\"}},\"typeVersion\":2},{\"id\":\"69d7bfdc-657a-402c-b9ef-f230660be1f9\",\"name\":\"List Folders\",\"type\":\"n8n-nodes-base.awsS3\",\"position\":[120,500],\"parameters\":{\"options\":{},\"resource\":\"folder\",\"operation\":\"getAll\",\"bucketName\":\"aired-out\"},\"credentials\":{\"aws\":{\"id\":\"NijLkxXPqg88tIuO\",\"name\":\"AWS S3 Access\"}},\"typeVersion\":2},{\"id\":\"35a136e1-4acc-4754-952e-69cf940219b0\",\"name\":\"Set Week\",\"type\":\"n8n-nodes-base.set\",\"position\":[-80,-40],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"f5e7fb15-bf9c-4f6d-9476-15320ff150a6\",\"name\":\"currentWeek\",\"type\":\"string\",\"value\":\"={{ $now.toFormat(\\\"kkkk-'W'WW\\\") }}\"}]}},\"typeVersion\":3.4},{\"id\":\"ca332df0-313d-44fe-81da-f4fabcad8cf6\",\"name\":\"Weekly Backup\",\"type\":\"n8n-nodes-base.scheduleTrigger\",\"position\":[-320,-40],\"parameters\":{\"rule\":{\"interval\":[{\"field\":\"weeks\",\"triggerAtHour\":12}]}},\"typeVersion\":1.2},{\"id\":\"68d97be1-f32f-4ada-85c3-7db8d3639262\",\"name\":\"Slack\",\"type\":\"n8n-nodes-base.slack\",\"position\":[1260,-140],\"webhookId\":\"909deccb-0c0a-4243-ac3c-c69dd39f1ab4\",\"parameters\":{\"text\":\"=:floppy_disk: *Airtable Backup Complete*\",\"select\":\"channel\",\"channelId\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"C08GPG2HTA4\",\"cachedResultName\":\"general\"},\"otherOptions\":{}},\"credentials\":{\"slackApi\":{\"id\":\"RKqLvV8Ij1tfFCYJ\",\"name\":\"Slack Content Bot\"}},\"typeVersion\":2.3},{\"id\":\"8f7bf5dd-1e42-4979-808a-99c6db31f89c\",\"name\":\"No Operation, do nothing\",\"type\":\"n8n-nodes-base.noOp\",\"position\":[560,600],\"parameters\":{},\"typeVersion\":1},{\"id\":\"c8ba25eb-0aed-42d0-8c55-420448eebce5\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-360,-220],\"parameters\":{\"width\":2240,\"height\":520,\"content\":\"## Airtable Weekly Backups\\nEvery week backup all tables in an Airtable base into a dedicated week sub-folder in S3. Notify when complete.\"},\"typeVersion\":1},{\"id\":\"7c33f350-3f5c-4979-a176-bbdb3b8d663c\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-360,360],\"parameters\":{\"width\":1140,\"height\":480,\"content\":\"## Airtable Monthly Prune\\nDelete backups > 1 month old\"},\"typeVersion\":1},{\"id\":\"dcbb30d5-90da-44ef-991f-0a25cf67e01d\",\"name\":\"Aggregate\",\"type\":\"n8n-nodes-base.aggregate\",\"position\":[1040,-140],\"parameters\":{\"options\":{},\"aggregate\":\"aggregateAllItemData\"},\"typeVersion\":1}],\"active\":true,\"pinData\":{},\"settings\":{\"executionOrder\":\"v1\"},\"versionId\":\"6ae12e8e-f949-48f7-977e-65f5bb49be9b\",\"connections\":{\"If\":{\"main\":[[{\"node\":\"Delete File\",\"type\":\"main\",\"index\":0}],[{\"node\":\"No Operation, do nothing\",\"type\":\"main\",\"index\":0}]]},\"AWS S3\":{\"main\":[[{\"node\":\"Loop Over Items\",\"type\":\"main\",\"index\":0}]]},\"Airtable\":{\"main\":[[{\"node\":\"Loop Over Items\",\"type\":\"main\",\"index\":0}]]},\"Set Week\":{\"main\":[[{\"node\":\"Create Folder\",\"type\":\"main\",\"index\":0}]]},\"Aggregate\":{\"main\":[[{\"node\":\"Slack\",\"type\":\"main\",\"index\":0}]]},\"List Folders\":{\"main\":[[{\"node\":\"If\",\"type\":\"main\",\"index\":0}]]},\"Pull Records\":{\"main\":[[{\"node\":\"Convert to File\",\"type\":\"main\",\"index\":0}]]},\"Create Folder\":{\"main\":[[{\"node\":\"Airtable\",\"type\":\"main\",\"index\":0}]]},\"Monthly Prune\":{\"main\":[[{\"node\":\"Set Timestamps\",\"type\":\"main\",\"index\":0}]]},\"Weekly Backup\":{\"main\":[[{\"node\":\"Set Week\",\"type\":\"main\",\"index\":0}]]},\"Set Timestamps\":{\"main\":[[{\"node\":\"List Folders\",\"type\":\"main\",\"index\":0}]]},\"Convert to File\":{\"main\":[[{\"node\":\"AWS S3\",\"type\":\"main\",\"index\":0}]]},\"Loop Over Items\":{\"main\":[[{\"node\":\"Aggregate\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Create Table Metadata\",\"type\":\"main\",\"index\":0}]]},\"Create Table Metadata\":{\"main\":[[{\"node\":\"Pull Records\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "This workflow exports every table in a base as its own CSV, saves the files in a time-stamped folder in Amazon S3, pings you on Slack, and optionally prunes older copies. You get an automated weekly backup that is easy to inspect or re-import as needed. You can easily swap the S3 node for the storage provider of your choice.\n\n++How it works++\n\nWeekly Backup\n\n  * Schedule trigger fires weekly\n  * Sets and formats the week ex. [2025-W12]\n  * Create a folder in S3 bucket with the week\n  * Loops through all tables in Airtable base creating CSVs and uploading to the new path\n  * Slack message is sent on completion\n\n\n\nMonthly Prune\n\n  * Schedule trigger fires weekly\n  * Sets a cut-off date 4 weeks in the past\n  * Lists folders in S3\n  * Deletes all folders > 4 weeks old\n\n\n\n++Setup Steps++\n\n  1. Clone workflow\n  2. Swap credentials for Airtable, AWS, and Slack \n     * Ensure AWS credential has appropriate IAM policy to manage bucket & objects\n  3. Set workflow to \"Active\"\n\n\n",
  "crawled_at": "2025-05-27T23:02:53.940807",
  "readme_zh": "该工作流将基库中的每个表格导出为独立的CSV文件，保存至亚马逊S3带时间戳的文件夹中，通过Slack发送通知，并可选删除旧备份。您将获得每周自动备份，便于随时检查或按需重新导入。可自由替换S3节点为其他存储服务提供商。\n\n++运行机制++\n\n每周备份\n\n  * 定时触发器每周启动\n  * 设置并格式化周标识（如[2025-W12]）\n  * 在S3存储桶创建对应周次的文件夹\n  * 遍历Airtable基库所有表格生成CSV并上传至新路径\n  * 完成后发送Slack通知",
  "title_zh": "Airtable 基础数据备份至 S3",
  "publish_date_zh": "最近更新于一天前",
  "workflow_json_zh": "{\n  \"id\": \"YeYi657TmrNBAlHy\",\n  \"meta\": {\n    \"instanceId\": \"473c658c7288f697d42ad8adb392c78c9ea1b1c3a9d169c508028d7c271b8621\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"name\": \"Airtable Full Backup\",\n  \"tags\": [],\n  \"nodes\": [\n    {\n      \"id\": \"2cfec4e1-08ad-4363-a3af-5aa77174ea1a\",\n      \"name\": \"Airtable\",\n      \"type\": \"n8n-nodes-base.airtable\",\n      \"position\": [\n        380,\n        -40\n      ],\n      \"parameters\": {\n        \"base\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"yourbase\",\n          \"cachedResultUrl\": \"https://airtable.com/yourbase\",\n          \"cachedResultName\": \"Sample Base\"\n        },\n        \"resource\": \"base\",\n        \"operation\": \"getSchema\"\n      },\n      \"credentials\": {\n        \"airtableTokenApi\": {\n          \"id\": \"U1WMD4Gt9NhWpX3s\",\n          \"name\": \"Airtable\"\n        }\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"45e6e8e3-2b72-44ae-ae5a-84ade2dfb59b\",\n      \"name\": \"Loop Over Items\",\n      \"type\": \"n8n-nodes-base.splitInBatches\",\n      \"position\": [\n        600,\n        -40\n      ],\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"8c731bd7-54a7-443f-91de-1dedfcb79620\",\n      \"name\": \"Create Table Metadata\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        1040,\n        60\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"cea4432c-e31c-43bd-adea-446658a96ab5\",\n              \"name\": \"fileName\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.name.replace(/[^\\\\p{L}\\\\p{N}\\\\s_-]+/gu, '').trim().replace(/\\\\s+/g, '_')                      \\n}}\"\n            },\n            {\n              \"id\": \"34f5e44c-1d62-47ac-875b-9bbe698ffc0d\",\n              \"name\": \"tableName\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.name }}\"\n            },\n            {\n              \"id\": \"4a06c76d-7ac3-4fe9-96e3-003e80e0bf1e\",\n              \"name\": \"tableID\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.id }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"57d1b06e-5265-4beb-b53f-9be2f9f1f300\",\n      \"name\": \"Pull Records\",\n      \"type\": \"n8n-nodes-base.airtable\",\n      \"position\": [\n        1260,\n        60\n      ],\n      \"parameters\": {\n        \"base\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"yourbase\",\n          \"cachedResultUrl\": \"https://airtable.com/yourbase\",\n          \"cachedResultName\": \"LifeOS\"\n        },\n        \"table\": {\n          \"__rl\": true,\n          \"mode\": \"id\",\n          \"value\": \"={{ $json.tableID }}\"\n        },\n        \"options\": {},\n        \"operation\": \"search\"\n      },\n      \"credentials\": {\n        \"airtableTokenApi\": {\n          \"id\": \"U1WMD4Gt9NhWpX3s\",\n          \"name\": \"Airtable\"\n        }\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"0872652a-6924-4a56-8058-69b51ecc8ee2\",\n      \"name\": \"Convert to File\",\n      \"type\": \"n8n-nodes-base.convertToFile\",\n      \"position\": [\n        1480,\n        60\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"fileName\": \"={{ $('Create Table Metadata').item.json.fileName }}.csv\"\n        }\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"167783d9-3fad-4a3c-827b-911b8d3587f7\",\n      \"name\": \"AWS S3\",\n      \"type\": \"n8n-nodes-base.awsS3\",\n      \"position\": [\n        1700,\n        60\n      ],\n      \"parameters\": {\n        \"fileName\": \"={{ $('Create Table Metadata').item.json.fileName }}.csv\",\n        \"operation\": \"upload\",\n        \"bucketName\": \"aired-out\",\n        \"additionalFields\": {\n          \"parentFolderKey\": \"={{ $('Set Week').item.json.currentWeek }}\"\n        }\n      },\n      \"credentials\": {\n        \"aws\": {\n          \"id\": \"NijLkxXPqg88tIuO\",\n          \"name\": \"AWS S3 Access\"\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"c766b901-e06c-457c-9407-a999b7eaecd0\",\n      \"name\": \"Monthly Prune\",\n      \"type\": \"n8n-nodes-base.scheduleTrigger\",\n      \"position\": [\n        -320,\n        500\n      ],\n      \"parameters\": {\n        \"rule\": {\n          \"interval\": [\n            {\n              \"field\": \"months\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"3fb466cd-90ad-4757-9df1-b7e2c317b454\",\n      \"name\": \"Set Timestamps\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        -80,\n        500\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"ca8f6d53-152c-44ea-b0c8-eb5a7ba7fbf4\",\n              \"name\": \"cutoffDate\",\n              \"type\": \"string\",\n              \"value\": \"={{ $now.minus({ weeks: 4 }).toFormat(\\\"kkkk-'W'WW\\\") }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"dacaac6b-1025-4c57-82f2-d17b387c4258\",\n      \"name\": \"If\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        340,\n        500\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"loose\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"9c09f6cc-9313-42ba-b48e-c8cc2faaebac\",\n              \"operator\": {\n                \"type\": \"dateTime\",\n                \"operation\": \"before\"\n              },\n              \"leftValue\": \"={{ $json.Key.replace(/\\\\/$/, '') }}\",\n              \"rightValue\": \"={{ $('Set Timestamps').item.json.cutoffDate }}\"\n            }\n          ]\n        },\n        \"looseTypeValidation\": true\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"e279fa0d-af6c-4dc2-9ac3-89e3a08280f8\",\n      \"name\": \"Delete File\",\n      \"type\": \"n8n-nodes-base.awsS3\",\n      \"position\": [\n        560,\n        420\n      ],\n      \"parameters\": {\n        \"resource\": \"folder\",\n        \"folderKey\": \"={{ $('List Folders').item.json.Key }}\",\n        \"operation\": \"delete\",\n        \"bucketName\": \"aired-out\"\n      },\n      \"credentials\": {\n        \"aws\": {\n          \"id\": \"NijLkxXPqg88tIuO\",\n          \"name\": \"AWS S3 Access\"\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"8a2e4f1e-8a07-4f77-a05d-90cfca9d96da\",\n      \"name\": \"Create Folder\",\n      \"type\": \"n8n-nodes-base.awsS3\",\n      \"position\": [\n        140,\n        -40\n      ],\n      \"parameters\": {\n        \"resource\": \"folder\",\n        \"bucketName\": \"aired-out\",\n        \"folderName\": \"={{ $json.currentWeek }}\",\n        \"additionalFields\": {}\n      },\n      \"credentials\": {\n        \"aws\": {\n          \"id\": \"NijLkxXPqg88tIuO\",\n          \"name\": \"AWS S3 Access\"\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"69d7bfdc-657a-402c-b9ef-f230660be1f9\",\n      \"name\": \"List Folders\",\n      \"type\": \"n8n-nodes-base.awsS3\",\n      \"position\": [\n        120,\n        500\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"resource\": \"folder\",\n        \"operation\": \"getAll\",\n        \"bucketName\": \"aired-out\"\n      },\n      \"credentials\": {\n        \"aws\": {\n          \"id\": \"NijLkxXPqg88tIuO\",\n          \"name\": \"AWS S3 Access\"\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"35a136e1-4acc-4754-952e-69cf940219b0\",\n      \"name\": \"Set Week\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        -80,\n        -40\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"f5e7fb15-bf9c-4f6d-9476-15320ff150a6\",\n              \"name\": \"currentWeek\",\n              \"type\": \"string\",\n              \"value\": \"={{ $now.toFormat(\\\"kkkk-'W'WW\\\") }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"ca332df0-313d-44fe-81da-f4fabcad8cf6\",\n      \"name\": \"Weekly Backup\",\n      \"type\": \"n8n-nodes-base.scheduleTrigger\",\n      \"position\": [\n        -320,\n        -40\n      ],\n      \"parameters\": {\n        \"rule\": {\n          \"interval\": [\n            {\n              \"field\": \"weeks\",\n              \"triggerAtHour\": 12\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"68d97be1-f32f-4ada-85c3-7db8d3639262\",\n      \"name\": \"Slack\",\n      \"type\": \"n8n-nodes-base.slack\",\n      \"position\": [\n        1260,\n        -140\n      ],\n      \"webhookId\": \"909deccb-0c0a-4243-ac3c-c69dd39f1ab4\",\n      \"parameters\": {\n        \"text\": \"=:floppy_disk: *Airtable Backup Complete*\",\n        \"select\": \"channel\",\n        \"channelId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"C08GPG2HTA4\",\n          \"cachedResultName\": \"general\"\n        },\n        \"otherOptions\": {}\n      },\n      \"credentials\": {\n        \"slackApi\": {\n          \"id\": \"RKqLvV8Ij1tfFCYJ\",\n          \"name\": \"Slack Content Bot\"\n        }\n      },\n      \"typeVersion\": 2.3\n    },\n    {\n      \"id\": \"8f7bf5dd-1e42-4979-808a-99c6db31f89c\",\n      \"name\": \"No Operation, do nothing\",\n      \"type\": \"n8n-nodes-base.noOp\",\n      \"position\": [\n        560,\n        600\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"c8ba25eb-0aed-42d0-8c55-420448eebce5\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -360,\n        -220\n      ],\n      \"parameters\": {\n        \"width\": 2240,\n        \"height\": 520,\n        \"content\": \"## Airtable 每周备份\\n每周将Airtable基地中的所有表格备份至S3专用周子文件夹，完成后发送通知。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"7c33f350-3f5c-4979-a176-bbdb3b8d663c\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -360,\n        360\n      ],\n      \"parameters\": {\n        \"width\": 1140,\n        \"height\": 480,\n        \"content\": \"## Airtable 月度清理\\n删除超过1个月的备份\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"dcbb30d5-90da-44ef-991f-0a25cf67e01d\",\n      \"name\": \"Aggregate\",\n      \"type\": \"n8n-nodes-base.aggregate\",\n      \"position\": [\n        1040,\n        -140\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"aggregate\": \"aggregateAllItemData\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"active\": true,\n  \"pinData\": {},\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"6ae12e8e-f949-48f7-977e-65f5bb49be9b\",\n  \"connections\": {\n    \"If\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Delete File\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"No Operation, do nothing\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"AWS S3\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Loop Over Items\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Airtable\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Loop Over Items\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Set Week\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Create Folder\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Aggregate\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Slack\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"List Folders\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"If\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Pull Records\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Convert to File\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Create Folder\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Airtable\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Monthly Prune\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set Timestamps\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Weekly Backup\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set Week\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Set Timestamps\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"List Folders\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Convert to File\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"AWS S3\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Loop Over Items\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Aggregate\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Create Table Metadata\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Create Table Metadata\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Pull Records\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}