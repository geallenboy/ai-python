{
  "url": "https://n8n.io/workflows/2210-get-your-website-indexed-by-google-automatically/",
  "title": "Get your website indexed by Google automatically",
  "author": "Eduard",
  "publish_date": "Last update a year ago",
  "publish_date_absolute": "",
  "categories": [
    {
      "name": "Marketing"
    }
  ],
  "workflow_json": "{\"id\":\"7i2RqqCYaKHUt4n3\",\"meta\":{\"instanceId\":\"fb924c73af8f703905bc09c9ee8076f48c17b596ed05b18c0ff86915ef8a7c4a\"},\"name\":\"Google Site Index - sitemap.xml example\",\"tags\":[],\"nodes\":[{\"id\":\"4da50fbf-7707-42ea-badc-6748c4ee30db\",\"name\":\"When clicking \\\"Test workflow\\\"\",\"type\":\"n8n-nodes-base.manualTrigger\",\"position\":[-927,472],\"parameters\":{},\"typeVersion\":1},{\"id\":\"9e5bd6c8-a056-462b-b746-60d86bfbe398\",\"name\":\"Split Out\",\"type\":\"n8n-nodes-base.splitOut\",\"position\":[480,360],\"parameters\":{\"options\":{},\"fieldToSplitOut\":\"urlset.url\"},\"typeVersion\":1},{\"id\":\"0d4acf98-31c5-4a0d-bb29-c1d045c0705c\",\"name\":\"Check status\",\"type\":\"n8n-nodes-base.httpRequest\",\"onError\":\"continueErrorOutput\",\"position\":[1540,400],\"parameters\":{\"url\":\"=https://indexing.googleapis.com/v3/urlNotifications/metadata?url={{ encodeURIComponent($json.loc) }}\",\"options\":{\"response\":{\"response\":{\"fullResponse\":true}}},\"authentication\":\"predefinedCredentialType\",\"nodeCredentialType\":\"googleOAuth2Api\"},\"credentials\":{\"googleOAuth2Api\":{\"id\":\"K8Cz9Dy3TR68udv2\",\"name\":\"Google account\"}},\"retryOnFail\":false,\"typeVersion\":4.1},{\"id\":\"eee0eba6-3aa3-4841-9d48-8407db1212e2\",\"name\":\"Loop Over Items\",\"type\":\"n8n-nodes-base.splitInBatches\",\"position\":[1340,360],\"parameters\":{\"options\":{}},\"typeVersion\":3},{\"id\":\"47745d33-8358-45a8-a67d-60f9f0574bae\",\"name\":\"Wait\",\"type\":\"n8n-nodes-base.wait\",\"position\":[2080,400],\"webhookId\":\"44364241-e54b-4b44-aaa1-0d8121a7f497\",\"parameters\":{\"unit\":\"seconds\",\"amount\":\"={{ Math.min(1.5,0.3+3*Math.random()).toFixed(2) }}\"},\"typeVersion\":1},{\"id\":\"9f1bf72e-8ecd-4239-b96f-b77be4c86b18\",\"name\":\"URL Updated\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[1840,400],\"parameters\":{\"url\":\"=https://indexing.googleapis.com/v3/urlNotifications:publish\",\"method\":\"POST\",\"options\":{},\"sendBody\":true,\"authentication\":\"predefinedCredentialType\",\"bodyParameters\":{\"parameters\":[{\"name\":\"url\",\"value\":\"={{ $('Loop Over Items').item.json.loc }}\"},{\"name\":\"type\",\"value\":\"URL_UPDATED\"}]},\"nodeCredentialType\":\"googleOAuth2Api\"},\"credentials\":{\"googleOAuth2Api\":{\"id\":\"K8Cz9Dy3TR68udv2\",\"name\":\"Google account\"}},\"typeVersion\":4.1},{\"id\":\"629eaf34-ef3c-4e9c-9537-69a03310dd9c\",\"name\":\"Schedule Trigger\",\"type\":\"n8n-nodes-base.scheduleTrigger\",\"position\":[-927,272],\"parameters\":{\"rule\":{\"interval\":[{\"triggerAtHour\":2,\"triggerAtMinute\":5}]}},\"typeVersion\":1.1},{\"id\":\"2f95065c-fdc9-4773-87b0-37007ae4f9a5\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-87,192],\"parameters\":{\"width\":851.3475816949383,\"height\":340.39627039627067,\"content\":\"## Collect list of URLs\\n\\nThis part extracts all pages from all sitemaps and sorts by the last modified date `lastmod` (from newest to oldest)\"},\"typeVersion\":1},{\"id\":\"33798da1-4fd3-43dc-9ff4-753bae798535\",\"name\":\"is new?\",\"type\":\"n8n-nodes-base.if\",\"position\":[1700,280],\"parameters\":{\"options\":{\"looseTypeValidation\":true},\"conditions\":{\"options\":{\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"loose\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"c8566fc4-57cf-4272-841e-014bb354a37d\",\"operator\":{\"type\":\"dateTime\",\"operation\":\"after\"},\"leftValue\":\"={{ $('Loop Over Items').item.json.lastmod }}\",\"rightValue\":\"={{ $json.body.latestUpdate.notifyTime }}\"}]}},\"typeVersion\":2},{\"id\":\"b5d538ec-d7bc-40ac-9b9e-e5ead9378387\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1500,121.07782938758908],\"parameters\":{\"width\":504.2424242424241,\"height\":431.1089918072487,\"content\":\"## Check URL metadata and update, if:\\n* Google returns error (404 error means that this URL was not previously added)\\n* Date of article update is after the date of last request to re-index\"},\"typeVersion\":1},{\"id\":\"2cc0b088-b09f-4dc2-8027-9e0ff442576b\",\"name\":\"Sticky Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-640,196.4335593220339],\"parameters\":{\"width\":515.8058994999984,\"height\":335.72259887005646,\"content\":\"## Get sitemap.xml\\nVarious CMS systems often have multiple sitemaps for different content (posts, tags, pages etc). Need to fetch all sitemaps first and then extract all pages from all sitemaps.\\n### Remember to update the real sitemap URL!\"},\"typeVersion\":1},{\"id\":\"d8dc3b65-0d47-49a7-9042-33dbc5a2e245\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-662.5490981963931,120.2098305084748],\"parameters\":{\"color\":6,\"width\":1458.468937875752,\"height\":453.3292476478371,\"content\":\"## Feel free to adapt this part depending on your website CMS\\n\"},\"typeVersion\":1},{\"id\":\"a763f582-500c-4cc8-b780-672ebc3d0845\",\"name\":\"Get content-specific sitemaps\",\"type\":\"n8n-nodes-base.splitOut\",\"position\":[-260,360],\"parameters\":{\"options\":{},\"fieldToSplitOut\":\"sitemapindex.sitemap\"},\"typeVersion\":1},{\"id\":\"e7aa9728-eb9b-454d-a710-561d76841d7a\",\"name\":\"Convert sitemap to JSON\",\"type\":\"n8n-nodes-base.xml\",\"position\":[-440,360],\"parameters\":{\"options\":{}},\"typeVersion\":1},{\"id\":\"496366d7-0d4e-401c-a375-8ca8882e8a32\",\"name\":\"Force urlset.url to array\",\"type\":\"n8n-nodes-base.set\",\"position\":[320,360],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"8d16114b-1d1a-4522-a550-6c799a44538a\",\"name\":\"=urlset.url\",\"type\":\"array\",\"value\":\"={{ $json.urlset.url[0] ? $json.urlset.url : [$json.urlset.url] }}\"}]}},\"typeVersion\":3.3},{\"id\":\"3a8e00a6-2fa4-4903-943d-890e0078181e\",\"name\":\"Sticky Note4\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[820,120],\"parameters\":{\"color\":3,\"width\":459.2224448897797,\"height\":451.39712985292624,\"content\":\"## Update the `lastmod` and `loc` fields\\nThese are pre-defined fields according to [the XML schema for the Sitemap protocol](https://www.sitemaps.org/protocol.html).\\n\\nIf your CMS system has different field names, please rename them here:\\n* the last modified field `lastmod`\\n* URL of the page in `loc` field\"},\"typeVersion\":1},{\"id\":\"9d841026-ede6-4396-a67b-e1787ffe9a17\",\"name\":\"Assign mandatiry sitemap fields\",\"type\":\"n8n-nodes-base.set\",\"position\":[1000,360],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"bb0e1337-6fda-4a22-9963-d0b1271fc2a6\",\"name\":\"lastmod\",\"type\":\"string\",\"value\":\"={{ $json.lastmod }}\"},{\"id\":\"e7517c23-f989-4d75-9078-d82c75e51c65\",\"name\":\"loc\",\"type\":\"string\",\"value\":\"={{ $json.loc }}\"}]}},\"typeVersion\":3.3},{\"id\":\"99787654-f554-4650-afc0-c4fa65392c2b\",\"name\":\"convert page data to JSON\",\"type\":\"n8n-nodes-base.xml\",\"position\":[120,360],\"parameters\":{\"options\":{\"explicitArray\":false}},\"typeVersion\":1},{\"id\":\"f5cc1725-955c-4eb2-a66f-93153ebf35d1\",\"name\":\"Get sitemap.xml\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[-620,360],\"parameters\":{\"url\":\"https://wordpress.org/sitemap.xml\",\"options\":{}},\"typeVersion\":4.1},{\"id\":\"789076f0-4aa1-469b-afac-af717c0b03c3\",\"name\":\"Get content of each sitemap\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[-60,360],\"parameters\":{\"url\":\"={{ $json.loc }}\",\"options\":{\"batching\":{\"batch\":{\"batchSize\":1,\"batchInterval\":150}}}},\"typeVersion\":4.1},{\"id\":\"b0bdc6d6-1306-4c0c-bec2-7e59d587db69\",\"name\":\"Sort\",\"type\":\"n8n-nodes-base.sort\",\"position\":[640,360],\"parameters\":{\"options\":{},\"sortFieldsUi\":{\"sortField\":[{\"order\":\"descending\",\"fieldName\":\"lastmod\"}]}},\"typeVersion\":1}],\"active\":false,\"pinData\":{},\"settings\":{\"callerPolicy\":\"workflowsFromSameOwner\",\"errorWorkflow\":\"6\",\"executionOrder\":\"v1\",\"saveManualExecutions\":true,\"saveDataSuccessExecution\":\"all\"},\"versionId\":\"5c21ebb6-67df-4bde-9aea-6cc9a7621fc0\",\"connections\":{\"Sort\":{\"main\":[[{\"node\":\"Assign mandatiry sitemap fields\",\"type\":\"main\",\"index\":0}]]},\"Wait\":{\"main\":[[{\"node\":\"Loop Over Items\",\"type\":\"main\",\"index\":0}]]},\"is new?\":{\"main\":[[{\"node\":\"URL Updated\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Wait\",\"type\":\"main\",\"index\":0}]]},\"Split Out\":{\"main\":[[{\"node\":\"Sort\",\"type\":\"main\",\"index\":0}]]},\"URL Updated\":{\"main\":[[{\"node\":\"Wait\",\"type\":\"main\",\"index\":0}]]},\"Check status\":{\"main\":[[{\"node\":\"is new?\",\"type\":\"main\",\"index\":0}],[{\"node\":\"URL Updated\",\"type\":\"main\",\"index\":0}]]},\"Get sitemap.xml\":{\"main\":[[{\"node\":\"Convert sitemap to JSON\",\"type\":\"main\",\"index\":0}]]},\"Loop Over Items\":{\"main\":[[],[{\"node\":\"Check status\",\"type\":\"main\",\"index\":0}]]},\"Schedule Trigger\":{\"main\":[[{\"node\":\"Get sitemap.xml\",\"type\":\"main\",\"index\":0}]]},\"Convert sitemap to JSON\":{\"main\":[[{\"node\":\"Get content-specific sitemaps\",\"type\":\"main\",\"index\":0}]]},\"Force urlset.url to array\":{\"main\":[[{\"node\":\"Split Out\",\"type\":\"main\",\"index\":0}]]},\"convert page data to JSON\":{\"main\":[[{\"node\":\"Force urlset.url to array\",\"type\":\"main\",\"index\":0}]]},\"Get content of each sitemap\":{\"main\":[[{\"node\":\"convert page data to JSON\",\"type\":\"main\",\"index\":0}]]},\"Get content-specific sitemaps\":{\"main\":[[{\"node\":\"Get content of each sitemap\",\"type\":\"main\",\"index\":0}]]},\"When clicking \\\"Test workflow\\\"\":{\"main\":[[{\"node\":\"Get sitemap.xml\",\"type\":\"main\",\"index\":0}]]},\"Assign mandatiry sitemap fields\":{\"main\":[[{\"node\":\"Loop Over Items\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "# 🚀 Supercharge Your Website Indexing with This Powerful n8n Workflow! 🌐\n\nGoogle page indexing too slow? Tired of manually clicking through each page in the Google Search Console? 😴 Say goodbye to that tedious process and hello to automation with this n8n workflow! 🎉\n\n**NB: this workflow was tested with sitemap.xml generated by Ghost CMS and WordPress.  \nReach out to [Eduard](https://www.linkedin.com/in/parsadanyan/) if you need help adapting this workflow to your specific use-case!**\n\n## ⚙️ How this automation works\n\n  1. 📅 The workflow runs on a schedule or when you click \"Test workflow\".\n  2. 🌐 It fetches the website's primary sitemap.xml and extracts all the content-specific sitemaps (this is a typical structure of the sitemap).\n  3. 📑 Each content-specific sitemap is then parsed to retrieve the individual page data.\n  4. 🔄 The extracted page data is converted to JSON format for easy manipulation.\n  5. 🗃️ The `lastmod` (last modified date) and `loc` (page URL) fields are assigned to each page entry to ensure compliance with the [Sitemap protocol](https://www.sitemaps.org/protocol.html).\n  6. 🔀 The page entries are sorted by the `lastmod` field in descending order (newest to oldest).\n  7. 🔁 The workflow then loops over each page entry and performs the following steps: \n     * 🔍 Checks the URL metadata in the Google Indexing API.\n     * ✅ If the page is new or has been updated since the last indexing request, it sends a request to the Google Indexing API to update the URL.\n     * ⏳ Wait a sec and move on with the next page.\n\n\n\n## 🌟 Benefits\n\n  * ⏰ Save time by automating the indexing process.\n  * 🎯 Ensure all your website pages are consistently indexed by Google.\n  * 🚀 Improve your website's visibility and search engine rankings.\n  * 🛠️ Customize the workflow to fit your specific CMS and requirements.\n\n\n\n## 🔧 Getting started\n\nTo start using this powerful n8n workflow, follow these steps:\n\n  1. ☑️ Make sure to verify the website ownership in the [Google Search Console](https://search.google.com/search-console).\n  2. 👨‍💻 Import the workflow JSON into your n8n instance.\n  3. **Edit the`Get sitemap.xml` node and update the URL with your website's valid sitemap.xml**\n  4. 🔑 Set up the necessary credentials for the Google Indexing API.\n  5. 🎚️ Adjust the schedule trigger to run the workflow at your desired frequency.\n  6. 🎉 Sit back and let the workflow handle the indexing process for you!\n\n\n\nReady to take your website indexing to the next level? 🚀 Try this workflow now and see the difference it makes! 😊\n\n### ⚠️ IMPORTANT NOTE 1\n\nNeed help with connecting Google Cloud Platform to n8n? Check out our [article on connecting Google Sheets to n8n](https://blog.n8n.io/google-sheets-as-database/#step-1-obtain-google-service-account-credentials). The process is mainly the same. When activating Google APIs, make sure to add `Web Search Indexing API`. Also, in the credential page of n8n, add the `https://www.googleapis.com/auth/indexing` scope:\n\n![image.png](https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/image_9ccb123907.png)\n\nCheck out [Yulia's page](https://n8n.io/creators/yulia/) for more n8n workflows!\n\n### ⚠️ IMPORTANT NOTE 2\n\nFree Google Cloud Platform account allows (re)indexing only 200 pages per day. If your website has more, then the workflow will automatically fail on quota limit ⛔. Next day it will skip the previously added items and continue with remaining pages.\n\n_**Example:**_ Assuming you have a free Google account, 500 pages on your website and they don't change for 3 days:\n\n  * On the first day 200 pages will be added for indexing and the workflow will fail due to quota limits.\n  * On the second day, the workflow will check 200 pages again and skip them (because the date of re-indexing is later then the page last modified date). The next 200 pages will be added to indexing. Workflow will fail again due to quota limits.\n  * On the third day 400 pages will be checked and skipped, the last 100 pages will be added for indexing and the workflow finishes successfully.\n\n\n",
  "crawled_at": "2025-05-25T21:37:28.778481",
  "readme_zh": "# 🚀 用这款强大的n8n工作流为你的网站索引加速！🌐  \n\n谷歌页面索引太慢？厌倦了在Google Search Console手动逐页提交？😴 告别繁琐操作，拥抱自动化n8n工作流吧！🎉  \n\n**注：本工作流已在Ghost CMS和WordPress生成的sitemap.xml上测试通过。  \n如需针对您的使用场景定制，请联系[Eduard](https://www.linkedin.com/in/parsadanyan/)！**  \n\n## ⚙️ 自动化原理  \n\n1. 📅 工作流按计划运行或点击\"测试工作流\"时触发  \n2. 🌐 抓取网站主sitemap.xml并提取所有内容分站点地图（标准站点地图结构）  \n3. 📑 解析每个内容分站点地图获取独立页面数据  \n4. 🔄 将页面数据转为JSON格式便于处理  \n5. 🗃️ 为每个页面分配`lastmod`（最后修改日期）和`loc`（页面URL）字段以符合[站点地图协议](https://www.sitemaps.org/protocol.html)  \n6. 🔀 按`lastmod`字段降序排序（从新到旧）  \n7. 🔁 循环处理每个页面：  \n   * 🔍 检查Google索引API中的URL元数据  \n   * ✅ 若页面新增或上次索引后有更新，则向Google索引API发送更新请求  \n   * ⏳ 间隔1秒后处理下一页  \n\n## 🌟 核心优势  \n\n* ⏰ 自动化索引节省时间  \n* 🎯 确保所有页面被谷歌持续收录  \n* 🚀 提升网站曝光与搜索排名  \n* 🛠️ 可适配不同CMS需求  \n\n## 🔧 快速上手  \n\n1. ☑️ 在[Google Search Console](https://search.google.com/search-console)验证网站所有权  \n2. 👨‍💻 将工作流JSON导入n8n实例  \n3. **修改`获取sitemap.xml`节点，替换为您的网站sitemap.xml地址**  \n4. 🔑 配置Google索引API凭证  \n5. 🎚️ 调整定时触发频率  \n6. 🎉 坐享自动化索引服务！  \n\n立即体验工作流，见证收录效率的飞跃提升！🚀  \n\n### ⚠️ 重要提示1  \n\n配置Google Cloud Platform时：  \n1. 启用`Web Search Indexing API`  \n2. 在n8n凭证页面添加`https://www.googleapis.com/auth/indexing`权限域  \n![权限配置图示](https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/image_9ccb123907.png)  \n更多工作流模板请访问[Yulia的主页](https://n8n.io/creators/yulia/)  \n\n### ⚠️ 重要提示2  \n\n免费版Google Cloud每日仅限200页索引配额。超出后工作流将自动终止⛔，次日会跳过已处理页面继续剩余内容。  \n\n_**示例：**_ 假设您的免费账户下有500个静态页面：  \n- 首日：提交200页后触发配额限制  \n- 次日：跳过前200页，提交后续200页后再次触发限制  \n- 第三日：跳过前400页，完成最后100页提交",
  "title_zh": "让谷歌自动收录您的网站",
  "publish_date_zh": "上次更新于一年前",
  "workflow_json_zh": "{\"id\":\"7i2RqqCYaKHUt4n3\",\"meta\":{\"instanceId\":\"fb924c73af8f703905bc09c9ee8076f48c17b596ed05b18c0ff86915ef8a7c4a\"},\"name\":\"Google Site Index - sitemap.xml example\",\"tags\":[],\"nodes\":[{\"id\":\"4da50fbf-7707-42ea-badc-6748c4ee30db\",\"name\":\"When clicking \\\"Test workflow\\\"\",\"type\":\"n8n-nodes-base.manualTrigger\",\"position\":[-927,472],\"parameters\":{},\"typeVersion\":1},{\"id\":\"9e5bd6c8-a056-462b-b746-60d86bfbe398\",\"name\":\"Split Out\",\"type\":\"n8n-nodes-base.splitOut\",\"position\":[480,360],\"parameters\":{\"options\":{},\"fieldToSplitOut\":\"urlset.url\"},\"typeVersion\":1},{\"id\":\"0d4acf98-31c5-4a0d-bb29-c1d045c0705c\",\"name\":\"Check status\",\"type\":\"n8n-nodes-base.httpRequest\",\"onError\":\"continueErrorOutput\",\"position\":[1540,400],\"parameters\":{\"url\":\"=https://indexing.googleapis.com/v3/urlNotifications/metadata?url={{ encodeURIComponent($json.loc) }}\",\"options\":{\"response\":{\"response\":{\"fullResponse\":true}}},\"authentication\":\"predefinedCredentialType\",\"nodeCredentialType\":\"googleOAuth2Api\"},\"credentials\":{\"googleOAuth2Api\":{\"id\":\"K8Cz9Dy3TR68udv2\",\"name\":\"Google account\"}},\"retryOnFail\":false,\"typeVersion\":4.1},{\"id\":\"eee0eba6-3aa3-4841-9d48-8407db1212e2\",\"name\":\"Loop Over Items\",\"type\":\"n8n-nodes-base.splitInBatches\",\"position\":[1340,360],\"parameters\":{\"options\":{}},\"typeVersion\":3},{\"id\":\"47745d33-8358-45a8-a67d-60f9f0574bae\",\"name\":\"Wait\",\"type\":\"n8n-nodes-base.wait\",\"position\":[2080,400],\"webhookId\":\"44364241-e54b-4b44-aaa1-0d8121a7f497\",\"parameters\":{\"unit\":\"seconds\",\"amount\":\"={{ Math.min(1.5,0.3+3*Math.random()).toFixed(2) }}\"},\"typeVersion\":1},{\"id\":\"9f1bf72e-8ecd-4239-b96f-b77be4c86b18\",\"name\":\"URL Updated\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[1840,400],\"parameters\":{\"url\":\"=https://indexing.googleapis.com/v3/urlNotifications:publish\",\"method\":\"POST\",\"options\":{},\"sendBody\":true,\"authentication\":\"predefinedCredentialType\",\"bodyParameters\":{\"parameters\":[{\"name\":\"url\",\"value\":\"={{ $('Loop Over Items').item.json.loc }}\"},{\"name\":\"type\",\"value\":\"URL_UPDATED\"}]},\"nodeCredentialType\":\"googleOAuth2Api\"},\"credentials\":{\"googleOAuth2Api\":{\"id\":\"K8Cz9Dy3TR68udv2\",\"name\":\"Google account\"}},\"typeVersion\":4.1},{\"id\":\"629eaf34-ef3c-4e9c-9537-69a03310dd9c\",\"name\":\"Schedule Trigger\",\"type\":\"n8n-nodes-base.scheduleTrigger\",\"position\":[-927,272],\"parameters\":{\"rule\":{\"interval\":[{\"triggerAtHour\":2,\"triggerAtMinute\":5}]}},\"typeVersion\":1.1},{\"id\":\"2f95065c-fdc9-4773-87b0-37007ae4f9a5\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-87,192],\"parameters\":{\"width\":851.3475816949383,\"height\":340.39627039627067,\"content\":\"## 收集网址列表\\n\\n此部分从所有站点地图中提取所有页面，并按最后修改日期`lastmod`排序（从最新到最旧）\"},\"typeVersion\":1},{\"id\":\"33798da1-4fd3-43dc-9ff4-753bae798535\",\"name\":\"is new?\",\"type\":\"n8n-nodes-base.if\",\"position\":[1700,280],\"parameters\":{\"options\":{\"looseTypeValidation\":true},\"conditions\":{\"options\":{\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"loose\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"c8566fc4-57cf-4272-841e-014bb354a37d\",\"operator\":{\"type\":\"dateTime\",\"operation\":\"after\"},\"leftValue\":\"={{ $('Loop Over Items').item.json.lastmod }}\",\"rightValue\":\"={{ $json.body.latestUpdate.notifyTime }}\"}]}},\"typeVersion\":2},{\"id\":\"b5d538ec-d7bc-40ac-9b9e-e5ead9378387\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1500,121.07782938758908],\"parameters\":{\"width\":504.2424242424241,\"height\":431.1089918072487,\"content\":\"## 检查URL元数据并更新，如果：\\n* Google返回错误（404错误表示该URL之前未被添加）\\n* 文章更新日期晚于上次请求重新索引的日期\"},\"typeVersion\":1},{\"id\":\"2cc0b088-b09f-4dc2-8027-9e0ff442576b\",\"name\":\"Sticky Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-640,196.4335593220339],\"parameters\":{\"width\":515.8058994999984,\"height\":335.72259887005646,\"content\":\"## 获取站点地图文件（sitemap.xml）\\n不同内容管理系统（CMS）通常会为不同类型的内容（如文章、标签、页面等）生成多个站点地图。首先需要抓取所有站点地图文件，然后从中提取全部页面链接。\\n### 请务必更新为实际的站点地图URL！\"},\"typeVersion\":1},{\"id\":\"d8dc3b65-0d47-49a7-9042-33dbc5a2e245\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-662.5490981963931,120.2098305084748],\"parameters\":{\"color\":6,\"width\":1458.468937875752,\"height\":453.3292476478371,\"content\":\"## 请根据您的网站内容管理系统自由调整此部分\"},\"typeVersion\":1},{\"id\":\"a763f582-500c-4cc8-b780-672ebc3d0845\",\"name\":\"Get content-specific sitemaps\",\"type\":\"n8n-nodes-base.splitOut\",\"position\":[-260,360],\"parameters\":{\"options\":{},\"fieldToSplitOut\":\"sitemapindex.sitemap\"},\"typeVersion\":1},{\"id\":\"e7aa9728-eb9b-454d-a710-561d76841d7a\",\"name\":\"Convert sitemap to JSON\",\"type\":\"n8n-nodes-base.xml\",\"position\":[-440,360],\"parameters\":{\"options\":{}},\"typeVersion\":1},{\"id\":\"496366d7-0d4e-401c-a375-8ca8882e8a32\",\"name\":\"Force urlset.url to array\",\"type\":\"n8n-nodes-base.set\",\"position\":[320,360],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"8d16114b-1d1a-4522-a550-6c799a44538a\",\"name\":\"=urlset.url\",\"type\":\"array\",\"value\":\"={{ $json.urlset.url[0] ? $json.urlset.url : [$json.urlset.url] }}\"}]}},\"typeVersion\":3.3},{\"id\":\"3a8e00a6-2fa4-4903-943d-890e0078181e\",\"name\":\"Sticky Note4\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[820,120],\"parameters\":{\"color\":3,\"width\":459.2224448897797,\"height\":451.39712985292624,\"content\":\"## 更新`lastmod`和`loc`字段  \\n这些是根据[站点地图协议的XML架构](https://www.sitemaps.org/protocol.html)预定义的字段。  \\n\\n若您的内容管理系统使用不同字段名称，请在此处重命名：  \\n* 最后修改字段`lastmod`  \\n* 页面URL字段`loc`\"},\"typeVersion\":1},{\"id\":\"9d841026-ede6-4396-a67b-e1787ffe9a17\",\"name\":\"Assign mandatiry sitemap fields\",\"type\":\"n8n-nodes-base.set\",\"position\":[1000,360],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"bb0e1337-6fda-4a22-9963-d0b1271fc2a6\",\"name\":\"lastmod\",\"type\":\"string\",\"value\":\"={{ $json.lastmod }}\"},{\"id\":\"e7517c23-f989-4d75-9078-d82c75e51c65\",\"name\":\"loc\",\"type\":\"string\",\"value\":\"={{ $json.loc }}\"}]}},\"typeVersion\":3.3},{\"id\":\"99787654-f554-4650-afc0-c4fa65392c2b\",\"name\":\"convert page data to JSON\",\"type\":\"n8n-nodes-base.xml\",\"position\":[120,360],\"parameters\":{\"options\":{\"explicitArray\":false}},\"typeVersion\":1},{\"id\":\"f5cc1725-955c-4eb2-a66f-93153ebf35d1\",\"name\":\"Get sitemap.xml\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[-620,360],\"parameters\":{\"url\":\"https://wordpress.org/sitemap.xml\",\"options\":{}},\"typeVersion\":4.1},{\"id\":\"789076f0-4aa1-469b-afac-af717c0b03c3\",\"name\":\"Get content of each sitemap\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[-60,360],\"parameters\":{\"url\":\"={{ $json.loc }}\",\"options\":{\"batching\":{\"batch\":{\"batchSize\":1,\"batchInterval\":150}}}},\"typeVersion\":4.1},{\"id\":\"b0bdc6d6-1306-4c0c-bec2-7e59d587db69\",\"name\":\"Sort\",\"type\":\"n8n-nodes-base.sort\",\"position\":[640,360],\"parameters\":{\"options\":{},\"sortFieldsUi\":{\"sortField\":[{\"order\":\"descending\",\"fieldName\":\"lastmod\"}]}},\"typeVersion\":1}],\"active\":false,\"pinData\":{},\"settings\":{\"callerPolicy\":\"workflowsFromSameOwner\",\"errorWorkflow\":\"6\",\"executionOrder\":\"v1\",\"saveManualExecutions\":true,\"saveDataSuccessExecution\":\"all\"},\"versionId\":\"5c21ebb6-67df-4bde-9aea-6cc9a7621fc0\",\"connections\":{\"Sort\":{\"main\":[[{\"node\":\"Assign mandatiry sitemap fields\",\"type\":\"main\",\"index\":0}]]},\"Wait\":{\"main\":[[{\"node\":\"Loop Over Items\",\"type\":\"main\",\"index\":0}]]},\"is new?\":{\"main\":[[{\"node\":\"URL Updated\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Wait\",\"type\":\"main\",\"index\":0}]]},\"Split Out\":{\"main\":[[{\"node\":\"Sort\",\"type\":\"main\",\"index\":0}]]},\"URL Updated\":{\"main\":[[{\"node\":\"Wait\",\"type\":\"main\",\"index\":0}]]},\"Check status\":{\"main\":[[{\"node\":\"is new?\",\"type\":\"main\",\"index\":0}],[{\"node\":\"URL Updated\",\"type\":\"main\",\"index\":0}]]},\"Get sitemap.xml\":{\"main\":[[{\"node\":\"Convert sitemap to JSON\",\"type\":\"main\",\"index\":0}]]},\"Loop Over Items\":{\"main\":[[],[{\"node\":\"Check status\",\"type\":\"main\",\"index\":0}]]},\"Schedule Trigger\":{\"main\":[[{\"node\":\"Get sitemap.xml\",\"type\":\"main\",\"index\":0}]]},\"Convert sitemap to JSON\":{\"main\":[[{\"node\":\"Get content-specific sitemaps\",\"type\":\"main\",\"index\":0}]]},\"Force urlset.url to array\":{\"main\":[[{\"node\":\"Split Out\",\"type\":\"main\",\"index\":0}]]},\"convert page data to JSON\":{\"main\":[[{\"node\":\"Force urlset.url to array\",\"type\":\"main\",\"index\":0}]]},\"Get content of each sitemap\":{\"main\":[[{\"node\":\"convert page data to JSON\",\"type\":\"main\",\"index\":0}]]},\"Get content-specific sitemaps\":{\"main\":[[{\"node\":\"Get content of each sitemap\",\"type\":\"main\",\"index\":0}]]},\"When clicking \\\"Test workflow\\\"\":{\"main\":[[{\"node\":\"Get sitemap.xml\",\"type\":\"main\",\"index\":0}]]},\"Assign mandatiry sitemap fields\":{\"main\":[[{\"node\":\"Loop Over Items\",\"type\":\"main\",\"index\":0}]]}}}"
}