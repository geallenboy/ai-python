{
  "url": "https://n8n.io/workflows/2080-email-notifications-to-telegram-using-temporary-html-url-hosting-via-github-gist/",
  "title": "Email Notifications to Telegram using Temporary HTML URL Hosting via GitHub Gist",
  "author": "Nskha",
  "publish_date": "Last update 10 months ago",
  "publish_date_absolute": "2024-07-25",
  "categories": [
    {
      "name": "Other"
    }
  ],
  "workflow_json": "{\"meta\":{\"instanceId\":\"dbd43d88d26a9e30d8aadc002c9e77f1400c683dd34efe3778d43d27250dde50\"},\"nodes\":[{\"id\":\"1c7b05e0-d82b-4851-a1ec-713093cdf489\",\"name\":\"Email Trigger (IMAP)\",\"type\":\"n8n-nodes-base.emailReadImap\",\"position\":[540,660],\"parameters\":{\"format\":\"resolved\",\"options\":{\"forceReconnect\":60,\"customEmailConfig\":\"[\\\"UNSEEN\\\"]\"}},\"typeVersion\":2},{\"id\":\"734424e6-d292-47d7-abb9-9630bdc00e35\",\"name\":\"Telegram\",\"type\":\"n8n-nodes-base.telegram\",\"position\":[1140,660],\"parameters\":{\"text\":\"=📧 <b>You've got mail!</b>\\n\\nA new email has arrived from this address: <code>{{ $node[\\\"Email Trigger (IMAP)\\\"].json[\\\"from\\\"][\\\"value\\\"][\\\"0\\\"][\\\"address\\\"] }}</code>\\n\\n🌐 A secert HTML page has been created for it, where you can preview the message by following the link below 👇\",\"chatId\":\"<Your Chat ID Here>\",\"replyMarkup\":\"inlineKeyboard\",\"inlineKeyboard\":{\"rows\":[{\"row\":{\"buttons\":[{\"text\":\"={{ $('Github Gist').item.json.files[\\\"email.html\\\"].filename }}\",\"additionalFields\":{\"url\":\"={{'http://emails.nskha.com/?iloven8n=nskha&id='+ $('Github Gist').item.json.id}}\"}}]}}]},\"additionalFields\":{\"parse_mode\":\"HTML\",\"appendAttribution\":true,\"disable_web_page_preview\":true}},\"typeVersion\":1.1},{\"id\":\"260c6ba6-1922-4bcb-bd5e-20b307ac638d\",\"name\":\"Github Gist\",\"type\":\"n8n-nodes-base.httpRequest\",\"notes\":\"Save HTML content\",\"position\":[840,660],\"parameters\":{\"url\":\"https://api.github.com/gists\",\"method\":\"POST\",\"options\":{\"redirect\":{\"redirect\":{}}},\"jsonBody\":\"={\\n  \\\"description\\\": \\\"{{ $json.date }} - from {{ JSON.stringify($json.from.value[0].address).slice(1, -1) }} - to {{ JSON.stringify($json.to.value[0].address).slice(1, -1) }}\\\",\\n  \\\"public\\\": false,\\n  \\\"files\\\": {\\n    \\\"email.html\\\": {\\n      \\\"content\\\": \\\"{{ JSON.stringify($json.html).slice(1, -1) }}\\\"\\n    }\\n  }\\n}\",\"sendBody\":true,\"sendHeaders\":true,\"specifyBody\":\"json\",\"authentication\":\"predefinedCredentialType\",\"headerParameters\":{\"parameters\":[{\"name\":\"Accept\",\"value\":\"application/vnd.github+json\"}]},\"nodeCredentialType\":\"githubApi\"},\"notesInFlow\":true,\"typeVersion\":4.1},{\"id\":\"0a77d236-e387-4458-a9cc-9ff7977ba4aa\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[460,440],\"parameters\":{\"color\":7,\"width\":872,\"height\":626.9128738621571,\"content\":\"## Simple Conversion of Emails into HTML Webpages\\nTo-do:\\n* Configure your GitHub credentials through `Predefined Credential Type` => `GitHub API`.\\n* Add your Telegram credentials by providing your `Chat ID`.\\n* [**Optional**] You can host this [small project](https://github.com/Automations-Project/Emails/tree/main) on your own domain using GitHub Pages.\\n\\n ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌  ‌ ‌ ‌  ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ![image](https://cdn.statically.io/gh/Automations-Project/Emails/main/iloven8n.min.svg)\\n\\n\\n\\n\\n\\n\\n\\n ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌  ‌ ‌ ‌  ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ![image](https://cdn.statically.io/gh/Automations-Project/Emails/main/iloven8n%E2%80%8C.min.svg)\"},\"typeVersion\":1},{\"id\":\"f69cf395-0050-44b3-a713-61f0cc5977ad\",\"name\":\"Wait\",\"type\":\"n8n-nodes-base.wait\",\"notes\":\"Delete within 3h\",\"position\":[540,900],\"webhookId\":\"c5202512-f84e-44b4-b357-9ee2124bd507\",\"parameters\":{\"amount\":3},\"notesInFlow\":true,\"typeVersion\":1},{\"id\":\"c6067792-4fc2-4ced-bb04-6c5449a533ab\",\"name\":\"Telegram ‌\",\"type\":\"n8n-nodes-base.telegram\",\"position\":[1140,900],\"parameters\":{\"chatId\":\"<Your Chat ID Here>\",\"messageId\":\"={{ $('Telegram').item.json.result.message_id }}\",\"operation\":\"deleteMessage\"},\"typeVersion\":1.1},{\"id\":\"ebfe89fb-b0a3-4826-a72b-3fb8baa473c4\",\"name\":\"Github Gist ‌\",\"type\":\"n8n-nodes-base.httpRequest\",\"notes\":\"Remove HTML content\",\"position\":[840,900],\"parameters\":{\"url\":\"=https://api.github.com/gists/{{ $item(\\\"0\\\").$node[\\\"Github Gist\\\"].json[\\\"id\\\"] }}\",\"method\":\"DELETE\",\"options\":{\"redirect\":{\"redirect\":{}}},\"sendHeaders\":true,\"authentication\":\"predefinedCredentialType\",\"headerParameters\":{\"parameters\":[{\"name\":\"Accept\",\"value\":\"application/vnd.github+json\"}]},\"nodeCredentialType\":\"githubApi\"},\"notesInFlow\":true,\"typeVersion\":4.1}],\"pinData\":{},\"connections\":{\"Wait\":{\"main\":[[{\"node\":\"Github Gist ‌\",\"type\":\"main\",\"index\":0}]]},\"Telegram\":{\"main\":[[{\"node\":\"Wait\",\"type\":\"main\",\"index\":0}]]},\"Github Gist\":{\"main\":[[{\"node\":\"Telegram\",\"type\":\"main\",\"index\":0}]]},\"Github Gist ‌\":{\"main\":[[{\"node\":\"Telegram ‌\",\"type\":\"main\",\"index\":0}]]},\"Email Trigger (IMAP)\":{\"main\":[[{\"node\":\"Github Gist\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "## Overview\n\nThis workflow automates the process of notifying users about new emails via Telegram and temporarily hosting the email content on a secret HTML page. It is ideal for users who need immediate notifications and a secure, temporary web view of their email content.\n\n## Use Cases\n\n  * Immediate notification of new emails in Telegram with the ability to preview the email content in a secure, temporary HTML format.\n  * Automation for users who need to keep track of their emails without constantly checking their email client.\n  * Useful for teams or individuals who require instant updates on critical emails and prefer a quick preview through a web interface.\n\n\n\n## My Personal Use Case: Secure Subscription Sharing\n\nFrom time to time, I find myself wanting to share my paid subscriptions with friends, but giving out OTP codes manually or sharing my email isn't a good idea due to security concerns. I attempted to use the IMAP node to integrate with Telegram secret channel for this purpose but encountered numerous problems, such as difficulties in scraping content from emails. Additionally, the Telegram API sometimes rejects certain special characters found within email contents. After facing these challenges, I discovered that rendering emails as HTML pages and sharing them directly is the most effective solution. This approach bypasses the issues with character limitations and content scraping, providing a seamless way to share subscription benefits securely.\n\n## Services/APIs Used\n\nService/API | Node Type | Description  \n---|---|---  \nIMAP Email Server | Email Trigger (IMAP) | Triggers the workflow on receiving a new email.  \nTelegram API | Telegram | Sends notifications and manages messages in Telegram.  \nGitHub Gist API | HTTP Request (Github Gist) | Temporarily hosts email content on GitHub Gist.  \nGitHub Gist API (Deletion) | HTTP Request (Github Gist ‌) | Deletes the temporary GitHub Gist after a specified time.  \nWait | Wait | Delays the workflow for a specified period.  \n  \n## Configuration Steps\n\n  1. **Email Trigger (IMAP):** Configure your IMAP email credentials to enable the workflow to check for new emails.\n  2. **Telegram Nodes:** Insert your Telegram bot's API credentials and your chat ID in both Telegram nodes to send and delete messages.\n  3. **Github Gist Nodes:** Provide your GitHub API credentials to create and delete Gists. Ensure the GitHub token has the necessary permissions to create and delete Gists.\n  4. **Wait Node:** Adjust the wait time according to your preference for how long the email content should be accessible via the HTML page.\n\n\n\n## Screenshot\n\n![Workflow Screenshot](https://cdn.statically.io/gh/Automations-Project/n8n-templates/main/Email%20Notifications%20to%20Telegram%20using%20Temporary%20HTML%20Hosting%20via%20GitHub%20Gist/preview.png)\n\n## Additional Notes\n\n  * Ensure all credentials are securely stored and have the minimum necessary permissions for the workflow to function.\n  * Test the workflow with non-sensitive emails to ensure it operates as expected before using it with critical email accounts.\n  * Consider the privacy and security implications of temporarily hosting email content on GitHub Gist.\n\n\n\nFor any questions or issues, refer to the respective API documentation for each service used or consult the n8n community for support.\n",
  "crawled_at": "2025-05-25T20:50:04.678854",
  "readme_zh": "## 概述\n\n本工作流实现了通过Telegram通知用户新邮件，并将邮件内容临时托管在加密HTML页面的自动化流程。特别适合需要即时接收通知，并通过安全临时网页查看邮件内容的用户场景。\n\n## 应用场景\n\n  * 在Telegram接收新邮件即时提醒，并可通过加密临时HTML页面预览内容\n  * 为需要追踪邮件又不想频繁检查邮箱的用户提供自动化解决方案\n  * 适合需要实时掌握关键邮件动态，偏好通过网页快速预览的团队或个人\n\n## 我的个人用例：安全共享订阅服务\n\n我时常需要与朋友共享付费订阅，但直接发送OTP验证码或共享邮箱存在安全隐患。曾尝试通过IMAP节点对接Telegram私密频道实现该功能，但遇到邮件内容抓取困难、Telegram API对邮件特殊字符的兼容性问题等诸多障碍。最终发现将邮件渲染为HTML页面直接分享是最佳解决方案，既规避了字符限制问题，又完美解决了内容抓取难题。\n\n## 使用服务/API\n\n服务/API | 节点类型 | 说明  \n---|---|---  \nIMAP邮件服务器 | 邮件触发器(IMAP) | 接收新邮件时触发工作流  \nTelegram API | Telegram节点 | 发送通知并管理Telegram消息  \nGitHub Gist API | HTTP请求(Github Gist) | 在GitHub Gist临时托管邮件内容  \nGitHub Gist API(删除) | HTTP请求(Github Gist) | 定时删除临时Gist  \n等待 | 等待节点 | 设定内容托管时长  \n\n## 配置步骤\n\n  1. **邮件触发器(IMAP):** 配置IMAP邮箱凭证，启用新邮件检测功能\n  2. **Telegram节点:** 在两个Telegram节点中分别填入机器人API凭证和会话ID\n  3. **Github Gist节点:** 提供GitHub API凭证，确保token具备创建/删除Gist权限\n  4. **等待节点:** 根据需求调整HTML页面的可访问时长\n\n## 界面截图\n\n![工作流截图](https://cdn.statically.io/gh/Automations-Project/n8n-templates/main/Email%20Notifications%20to%20Telegram%20using%20Temporary%20HTML%20Hosting%20via%20GitHub%20Gist/preview.png)\n\n## 注意事项\n\n  * 所有凭证需安全存储，并遵循最小权限原则\n  * 建议先用非敏感邮件测试工作流，确认运行正常后再处理重要邮件\n  * 需评估在GitHub Gist临时托管邮件内容可能带来的隐私安全影响\n\n如有疑问，请参考各服务API文档或咨询n8n社区获取支持。",
  "title_zh": "通过GitHub Gist临时托管HTML链接实现邮件通知转至Telegram",
  "publish_date_zh": "最后更新于10个月前",
  "workflow_json_zh": "{\n  \"meta\": {\n    \"instanceId\": \"dbd43d88d26a9e30d8aadc002c9e77f1400c683dd34efe3778d43d27250dde50\"\n  },\n  \"nodes\": [\n    {\n      \"id\": \"1c7b05e0-d82b-4851-a1ec-713093cdf489\",\n      \"name\": \"Email Trigger (IMAP)\",\n      \"type\": \"n8n-nodes-base.emailReadImap\",\n      \"position\": [\n        540,\n        660\n      ],\n      \"parameters\": {\n        \"format\": \"resolved\",\n        \"options\": {\n          \"forceReconnect\": 60,\n          \"customEmailConfig\": \"[\\\"UNSEEN\\\"]\"\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"734424e6-d292-47d7-abb9-9630bdc00e35\",\n      \"name\": \"Telegram\",\n      \"type\": \"n8n-nodes-base.telegram\",\n      \"position\": [\n        1140,\n        660\n      ],\n      \"parameters\": {\n        \"text\": \"=📧 <b>You've got mail!</b>\\n\\nA new email has arrived from this address: <code>{{ $node[\\\"Email Trigger (IMAP)\\\"].json[\\\"from\\\"][\\\"value\\\"][\\\"0\\\"][\\\"address\\\"] }}</code>\\n\\n🌐 A secert HTML page has been created for it, where you can preview the message by following the link below 👇\",\n        \"chatId\": \"<Your Chat ID Here>\",\n        \"replyMarkup\": \"inlineKeyboard\",\n        \"inlineKeyboard\": {\n          \"rows\": [\n            {\n              \"row\": {\n                \"buttons\": [\n                  {\n                    \"text\": \"={{ $('Github Gist').item.json.files[\\\"email.html\\\"].filename }}\",\n                    \"additionalFields\": {\n                      \"url\": \"={{'http://emails.nskha.com/?iloven8n=nskha&id='+ $('Github Gist').item.json.id}}\"\n                    }\n                  }\n                ]\n              }\n            }\n          ]\n        },\n        \"additionalFields\": {\n          \"parse_mode\": \"HTML\",\n          \"appendAttribution\": true,\n          \"disable_web_page_preview\": true\n        }\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"260c6ba6-1922-4bcb-bd5e-20b307ac638d\",\n      \"name\": \"Github Gist\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"notes\": \"Save HTML content\",\n      \"position\": [\n        840,\n        660\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.github.com/gists\",\n        \"method\": \"POST\",\n        \"options\": {\n          \"redirect\": {\n            \"redirect\": {}\n          }\n        },\n        \"jsonBody\": \"={\\n  \\\"description\\\": \\\"{{ $json.date }} - from {{ JSON.stringify($json.from.value[0].address).slice(1, -1) }} - to {{ JSON.stringify($json.to.value[0].address).slice(1, -1) }}\\\",\\n  \\\"public\\\": false,\\n  \\\"files\\\": {\\n    \\\"email.html\\\": {\\n      \\\"content\\\": \\\"{{ JSON.stringify($json.html).slice(1, -1) }}\\\"\\n    }\\n  }\\n}\",\n        \"sendBody\": true,\n        \"sendHeaders\": true,\n        \"specifyBody\": \"json\",\n        \"authentication\": \"predefinedCredentialType\",\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"Accept\",\n              \"value\": \"application/vnd.github+json\"\n            }\n          ]\n        },\n        \"nodeCredentialType\": \"githubApi\"\n      },\n      \"notesInFlow\": true,\n      \"typeVersion\": 4.1\n    },\n    {\n      \"id\": \"0a77d236-e387-4458-a9cc-9ff7977ba4aa\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        460,\n        440\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 872,\n        \"height\": 626.9128738621571,\n        \"content\": \"## 将邮件简易转换为HTML网页\\n待办事项：\\n* 通过`预定义凭证类型` => `GitHub API`配置您的GitHub凭证\\n* 添加Telegram凭证时需提供您的`聊天ID`\\n* [**可选**] 您可以使用GitHub Pages将这个小项目[托管在自有域名上](https://github.com/Automations-Project/Emails/tree/main)\\n\\n‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ![图片](https://cdn.statically.io/gh/Automations-Project/Emails/main/iloven8n.min.svg)\\n\\n‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ‌ ![图片](https://cdn.statically.io/gh/Automations-Project/Emails/main/iloven8n%E2%80%8C.min.svg)\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"f69cf395-0050-44b3-a713-61f0cc5977ad\",\n      \"name\": \"Wait\",\n      \"type\": \"n8n-nodes-base.wait\",\n      \"notes\": \"Delete within 3h\",\n      \"position\": [\n        540,\n        900\n      ],\n      \"webhookId\": \"c5202512-f84e-44b4-b357-9ee2124bd507\",\n      \"parameters\": {\n        \"amount\": 3\n      },\n      \"notesInFlow\": true,\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"c6067792-4fc2-4ced-bb04-6c5449a533ab\",\n      \"name\": \"Telegram ‌\",\n      \"type\": \"n8n-nodes-base.telegram\",\n      \"position\": [\n        1140,\n        900\n      ],\n      \"parameters\": {\n        \"chatId\": \"<Your Chat ID Here>\",\n        \"messageId\": \"={{ $('Telegram').item.json.result.message_id }}\",\n        \"operation\": \"deleteMessage\"\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"ebfe89fb-b0a3-4826-a72b-3fb8baa473c4\",\n      \"name\": \"Github Gist ‌\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"notes\": \"Remove HTML content\",\n      \"position\": [\n        840,\n        900\n      ],\n      \"parameters\": {\n        \"url\": \"=https://api.github.com/gists/{{ $item(\\\"0\\\").$node[\\\"Github Gist\\\"].json[\\\"id\\\"] }}\",\n        \"method\": \"DELETE\",\n        \"options\": {\n          \"redirect\": {\n            \"redirect\": {}\n          }\n        },\n        \"sendHeaders\": true,\n        \"authentication\": \"predefinedCredentialType\",\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"Accept\",\n              \"value\": \"application/vnd.github+json\"\n            }\n          ]\n        },\n        \"nodeCredentialType\": \"githubApi\"\n      },\n      \"notesInFlow\": true,\n      \"typeVersion\": 4.1\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"Wait\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Github Gist ‌\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Telegram\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Wait\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Github Gist\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Telegram\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Github Gist ‌\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Telegram ‌\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Email Trigger (IMAP)\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Github Gist\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}