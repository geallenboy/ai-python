{
  "url": "https://n8n.io/workflows/2951-check-vps-resource-usage-every-15-minutes/",
  "title": "Check VPS resource usage every 15 minutes",
  "author": "Hostinger",
  "publish_date": "Last update 3 months ago",
  "publish_date_absolute": "2025-02-26",
  "categories": [
    {
      "name": "DevOps"
    }
  ],
  "workflow_json": "{\"nodes\":[{\"id\":\"ba168090-4727-4b72-a0cf-3f15ef3a9f17\",\"name\":\"Send Email\",\"type\":\"n8n-nodes-base.emailSend\",\"position\":[580,360],\"parameters\":{\"text\":\"=System resources are above the threshold.\\n\\nCPU: {{ $json.CPU.toNumber().round(2) }}%\\nRAM: {{ $json.RAM.toNumber().round(2) }}%\\nDisk: {{ $json.Disk.toNumber().round(2) }}%\",\"options\":{},\"subject\":\"System Resource Alert\",\"toEmail\":\"change@me.com\",\"fromEmail\":\"change@me.com\"},\"credentials\":{\"smtp\":{\"id\":\"EuaQtRc5t8pWPY9b\",\"name\":\"SMTP account\"}},\"typeVersion\":1},{\"id\":\"79afc30f-c3db-4ba1-8f0d-a1000b5e0abe\",\"name\":\"Check RAM usage\",\"type\":\"n8n-nodes-base.ssh\",\"position\":[160,40],\"parameters\":{\"command\":\"free | awk '/Mem:/ {printf \\\"%.2f\\\", (1 - $7/$2) * 100}'\"},\"credentials\":{\"sshPassword\":{\"id\":\"VMCCUQkaq46q3CpB\",\"name\":\"SSH Password account\"}},\"executeOnce\":false,\"typeVersion\":1},{\"id\":\"d09aa314-8d60-42a8-9933-d7e8d73e2c7d\",\"name\":\"Check Disk usage\",\"type\":\"n8n-nodes-base.ssh\",\"position\":[380,40],\"parameters\":{\"command\":\"df -h | awk '$NF==\\\"/\\\"{printf \\\"%.2f\\\", $5}'\"},\"credentials\":{\"sshPassword\":{\"id\":\"VMCCUQkaq46q3CpB\",\"name\":\"SSH Password account\"}},\"executeOnce\":false,\"typeVersion\":1},{\"id\":\"bc6a0df2-f4cc-484a-ac39-c92e8795175e\",\"name\":\"Check CPU usage\",\"type\":\"n8n-nodes-base.ssh\",\"position\":[580,40],\"parameters\":{\"command\":\"top -bn 1 | grep \\\"Cpu(s)\\\" | sed \\\"s/.*, *\\\\([0-9.]*\\\\)%* id.*/\\\\1/\\\" | awk '{print 100 - $1}'\"},\"credentials\":{\"sshPassword\":{\"id\":\"VMCCUQkaq46q3CpB\",\"name\":\"SSH Password account\"}},\"executeOnce\":false,\"typeVersion\":1},{\"id\":\"de0df734-1e4a-4bf0-9f7d-d60b52e06f48\",\"name\":\"Merge check results\",\"type\":\"n8n-nodes-base.merge\",\"position\":[-40,380],\"parameters\":{\"mode\":\"combineBySql\",\"query\":\"SELECT input1.stdout as CPU, input2.stdout as Disk, input3.stdout as RAM FROM input1 LEFT JOIN input2 ON input1.name = input2.id LEFT JOIN input3 ON input1.name = input3.id\",\"numberInputs\":3},\"typeVersion\":3},{\"id\":\"7b7d6c0a-3f46-48b3-aa1d-191839540196\",\"name\":\"Check results against thresholds\",\"type\":\"n8n-nodes-base.if\",\"position\":[240,380],\"parameters\":{\"conditions\":{\"number\":[{\"value1\":\"={{ $json.CPU }}\",\"value2\":80,\"operation\":\"largerEqual\"},{\"value1\":\"={{ $json.Disk }}\",\"value2\":80,\"operation\":\"largerEqual\"},{\"value1\":\"={{ $json.RAM }}\",\"value2\":80,\"operation\":\"largerEqual\"}]},\"combineOperation\":\"any\"},\"typeVersion\":1},{\"id\":\"92331c38-cab8-4719-8746-6fb341954516\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[560,260],\"parameters\":{\"width\":320,\"height\":280,\"content\":\"## Update email addresses\\nUpdate From and To email addresses in this node to receive notifications\"},\"typeVersion\":1},{\"id\":\"3117fdbc-fde9-469b-bd47-59f45c349162\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-260,-120],\"parameters\":{\"width\":320,\"height\":260,\"content\":\"## Check VPS resource usage every 15 minutes\\nThis workflow checks VPS CPU, RAM and Disk usage every 15 minutes and if any of it exceeds 80% will inform you by email\"},\"typeVersion\":1},{\"id\":\"45b4c33a-8f02-4535-b67f-56d9d0aaf2ae\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[180,260],\"parameters\":{\"width\":360,\"height\":280,\"content\":\"## Update threshold\\nIf needed, you can increase/decrease the 80% threshold in this node individually per resource \"},\"typeVersion\":1},{\"id\":\"0bf83ea8-b1c4-40f7-8a60-39f765e8ec2c\",\"name\":\"Schedule Trigger\",\"type\":\"n8n-nodes-base.scheduleTrigger\",\"position\":[-40,40],\"parameters\":{\"rule\":{\"interval\":[{\"field\":\"minutes\",\"minutesInterval\":15}]}},\"typeVersion\":1.2}],\"pinData\":{},\"connections\":{\"Check CPU usage\":{\"main\":[[{\"node\":\"Merge check results\",\"type\":\"main\",\"index\":0}]]},\"Check RAM usage\":{\"main\":[[{\"node\":\"Check Disk usage\",\"type\":\"main\",\"index\":0},{\"node\":\"Merge check results\",\"type\":\"main\",\"index\":2}]]},\"Check Disk usage\":{\"main\":[[{\"node\":\"Check CPU usage\",\"type\":\"main\",\"index\":0},{\"node\":\"Merge check results\",\"type\":\"main\",\"index\":1}]]},\"Schedule Trigger\":{\"main\":[[{\"node\":\"Check RAM usage\",\"type\":\"main\",\"index\":0}]]},\"Merge check results\":{\"main\":[[{\"node\":\"Check results against thresholds\",\"type\":\"main\",\"index\":0}]]},\"Check results against thresholds\":{\"main\":[[{\"node\":\"Send Email\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "This n8n workflow template is designed to help system administrators and DevOps professionals monitor key resource usage metrics — CPU, RAM, and Disk — on a VPS (Virtual Private Server). The workflow automatically checks these resources every 15 minutes and sends an email alert if any resource usage exceeds the 80% threshold. This proactive monitoring helps maintain optimal server performance and prevents resource-related downtimes.\n\n# Who This Workflow Is For\n\n• **System Administrators** managing Linux-based servers who need to ensure their systems are running smoothly without manual monitoring.  \n• **DevOps Professionals** who manage multiple environments and need automated tools to alert them to potential issues before they affect operations.  \n• **IT Support Teams** who require an easy way to keep tabs on server health across an organization’s infrastructure.\n\n# How It Works\n\n  1. **Schedule Trigger** : The workflow is triggered every 15 minutes by a Cron node.\n  2. **Resource Checks** : Separate SSH Command nodes are configured to execute specific commands that check the current usage of RAM, Disk, and CPU.\n  3. **Data Aggregation** : The results from each check are merged using a Merge node, which combines the data into a single payload for analysis.\n  4. **Threshold Analysis** : A Function node evaluates whether any resource’s usage exceeds the predefined 80% threshold.\n  5. **Alerts** : If any metric exceeds the threshold, an email alert is sent through an Email node, ensuring that administrators can react promptly to potential issues.\n\n\n\n# Setup Steps\n\n  1. **Configure SSH Nodes** : Update each SSH node with the appropriate credentials and target server details where the resource checks will be performed.\n  2. **Set Thresholds** : If different sensitivity levels are required, review and adjust the resource usage thresholds within the Function node.\n  3. **Email Configuration** : Enter the correct email addresses in the Email node for where alerts should be sent. Ensure that your email-sending credentials and server details are correctly configured.\n\n\n",
  "crawled_at": "2025-05-26T02:29:13.815948",
  "readme_zh": "该n8n工作流模板专为系统管理员和DevOps人员设计，用于监控VPS（虚拟专用服务器）的关键资源指标——CPU、内存和磁盘。工作流会每15分钟自动检查这些资源，当任一资源使用率超过80%阈值时发送邮件告警。这种主动监控机制有助于维持服务器最佳性能，预防因资源不足导致的宕机。\n\n# 适用人群\n\n• **系统管理员**：管理Linux服务器的运维人员，需确保系统稳定运行而无需人工监控  \n• **DevOps工程师**：管理多套环境，需要自动化工具在问题影响业务前发出预警  \n• **IT支持团队**：需要简单方式监控企业基础设施中的服务器健康状态  \n\n# 运行原理\n\n1. **定时触发**：通过Cron节点每15分钟触发工作流  \n2. **资源检查**：配置多个SSH命令节点执行特定指令，分别检测内存、磁盘和CPU的当前使用率  \n3. **数据汇总**：Merge节点将各检测结果合并为统一数据集供分析  \n4. **阈值判断**：Function节点评估是否有资源超过预设的80%阈值  \n5. **告警机制**：当指标超限时，Email节点发送告警邮件，确保管理员能快速响应潜在问题  \n\n# 配置步骤\n\n1. **SSH节点配置**：在每个SSH节点中填写目标服务器的认证信息和检测指令  \n2. **阈值调整**：如需不同敏感度，可在Function节点中修改资源使用率阈值  \n3. **邮件设置**：在Email节点填写告警接收邮箱，确保邮件发送凭证和服务器配置正确",
  "title_zh": "每15分钟检查一次VPS资源使用情况",
  "publish_date_zh": "最后更新于3个月前",
  "workflow_json_zh": "{\"nodes\":[{\"id\":\"ba168090-4727-4b72-a0cf-3f15ef3a9f17\",\"name\":\"Send Email\",\"type\":\"n8n-nodes-base.emailSend\",\"position\":[580,360],\"parameters\":{\"text\":\"=System resources are above the threshold.\\n\\nCPU: {{ $json.CPU.toNumber().round(2) }}%\\nRAM: {{ $json.RAM.toNumber().round(2) }}%\\nDisk: {{ $json.Disk.toNumber().round(2) }}%\",\"options\":{},\"subject\":\"System Resource Alert\",\"toEmail\":\"change@me.com\",\"fromEmail\":\"change@me.com\"},\"credentials\":{\"smtp\":{\"id\":\"EuaQtRc5t8pWPY9b\",\"name\":\"SMTP account\"}},\"typeVersion\":1},{\"id\":\"79afc30f-c3db-4ba1-8f0d-a1000b5e0abe\",\"name\":\"Check RAM usage\",\"type\":\"n8n-nodes-base.ssh\",\"position\":[160,40],\"parameters\":{\"command\":\"free | awk '/Mem:/ {printf \\\"%.2f\\\", (1 - $7/$2) * 100}'\"},\"credentials\":{\"sshPassword\":{\"id\":\"VMCCUQkaq46q3CpB\",\"name\":\"SSH Password account\"}},\"executeOnce\":false,\"typeVersion\":1},{\"id\":\"d09aa314-8d60-42a8-9933-d7e8d73e2c7d\",\"name\":\"Check Disk usage\",\"type\":\"n8n-nodes-base.ssh\",\"position\":[380,40],\"parameters\":{\"command\":\"df -h | awk '$NF==\\\"/\\\"{printf \\\"%.2f\\\", $5}'\"},\"credentials\":{\"sshPassword\":{\"id\":\"VMCCUQkaq46q3CpB\",\"name\":\"SSH Password account\"}},\"executeOnce\":false,\"typeVersion\":1},{\"id\":\"bc6a0df2-f4cc-484a-ac39-c92e8795175e\",\"name\":\"Check CPU usage\",\"type\":\"n8n-nodes-base.ssh\",\"position\":[580,40],\"parameters\":{\"command\":\"top -bn 1 | grep \\\"Cpu(s)\\\" | sed \\\"s/.*, *\\\\([0-9.]*\\\\)%* id.*/\\\\1/\\\" | awk '{print 100 - $1}'\"},\"credentials\":{\"sshPassword\":{\"id\":\"VMCCUQkaq46q3CpB\",\"name\":\"SSH Password account\"}},\"executeOnce\":false,\"typeVersion\":1},{\"id\":\"de0df734-1e4a-4bf0-9f7d-d60b52e06f48\",\"name\":\"Merge check results\",\"type\":\"n8n-nodes-base.merge\",\"position\":[-40,380],\"parameters\":{\"mode\":\"combineBySql\",\"query\":\"SELECT input1.stdout as CPU, input2.stdout as Disk, input3.stdout as RAM FROM input1 LEFT JOIN input2 ON input1.name = input2.id LEFT JOIN input3 ON input1.name = input3.id\",\"numberInputs\":3},\"typeVersion\":3},{\"id\":\"7b7d6c0a-3f46-48b3-aa1d-191839540196\",\"name\":\"Check results against thresholds\",\"type\":\"n8n-nodes-base.if\",\"position\":[240,380],\"parameters\":{\"conditions\":{\"number\":[{\"value1\":\"={{ $json.CPU }}\",\"value2\":80,\"operation\":\"largerEqual\"},{\"value1\":\"={{ $json.Disk }}\",\"value2\":80,\"operation\":\"largerEqual\"},{\"value1\":\"={{ $json.RAM }}\",\"value2\":80,\"operation\":\"largerEqual\"}]},\"combineOperation\":\"any\"},\"typeVersion\":1},{\"id\":\"92331c38-cab8-4719-8746-6fb341954516\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[560,260],\"parameters\":{\"width\":320,\"height\":280,\"content\":\"## 更新电子邮件地址\\n更新此节点中的发件人和收件人电子邮件地址以接收通知\"},\"typeVersion\":1},{\"id\":\"3117fdbc-fde9-469b-bd47-59f45c349162\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-260,-120],\"parameters\":{\"width\":320,\"height\":260,\"content\":\"## 每15分钟检查VPS资源使用情况\\n该工作流程每15分钟检测一次VPS的CPU、内存和磁盘使用率，若任一资源超过80%将通过邮件通知您\"},\"typeVersion\":1},{\"id\":\"45b4c33a-8f02-4535-b67f-56d9d0aaf2ae\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[180,260],\"parameters\":{\"width\":360,\"height\":280,\"content\":\"## 更新阈值\\n如有需要，您可以针对每个资源单独调整此节点中的80%阈值\"},\"typeVersion\":1},{\"id\":\"0bf83ea8-b1c4-40f7-8a60-39f765e8ec2c\",\"name\":\"Schedule Trigger\",\"type\":\"n8n-nodes-base.scheduleTrigger\",\"position\":[-40,40],\"parameters\":{\"rule\":{\"interval\":[{\"field\":\"minutes\",\"minutesInterval\":15}]}},\"typeVersion\":1.2}],\"pinData\":{},\"connections\":{\"Check CPU usage\":{\"main\":[[{\"node\":\"Merge check results\",\"type\":\"main\",\"index\":0}]]},\"Check RAM usage\":{\"main\":[[{\"node\":\"Check Disk usage\",\"type\":\"main\",\"index\":0},{\"node\":\"Merge check results\",\"type\":\"main\",\"index\":2}]]},\"Check Disk usage\":{\"main\":[[{\"node\":\"Check CPU usage\",\"type\":\"main\",\"index\":0},{\"node\":\"Merge check results\",\"type\":\"main\",\"index\":1}]]},\"Schedule Trigger\":{\"main\":[[{\"node\":\"Check RAM usage\",\"type\":\"main\",\"index\":0}]]},\"Merge check results\":{\"main\":[[{\"node\":\"Check results against thresholds\",\"type\":\"main\",\"index\":0}]]},\"Check results against thresholds\":{\"main\":[[{\"node\":\"Send Email\",\"type\":\"main\",\"index\":0}]]}}}"
}