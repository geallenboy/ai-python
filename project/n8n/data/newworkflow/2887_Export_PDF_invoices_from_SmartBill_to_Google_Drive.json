{
  "url": "https://n8n.io/workflows/2887-export-pdf-invoices-from-smartbill-to-google-drive/",
  "title": "Export PDF invoices from SmartBill to Google Drive",
  "author": "Codez & AI",
  "publish_date": "Last update 3 months ago",
  "publish_date_absolute": "2025-02-26",
  "categories": [
    {
      "name": "Finance"
    }
  ],
  "workflow_json": "{\"meta\":{\"instanceId\":\"e122e4b90b0dc212c47b42e306cb84c993d082784105d7fe578eca9a9d068de0\",\"templateCredsSetupCompleted\":true},\"nodes\":[{\"id\":\"119111b6-92a8-4a54-8830-2a12a0d4eec8\",\"name\":\"When clicking \\\"Execute Workflow\\\"\",\"type\":\"n8n-nodes-base.manualTrigger\",\"position\":[-580,-60],\"parameters\":{},\"typeVersion\":1},{\"id\":\"bf0767db-8dd2-4f83-a27f-37c1160916d4\",\"name\":\"Smartbill get invoice pdf\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[1640,-60],\"parameters\":{},\"typeVersion\":4.1},{\"id\":\"f8bd05d5-0d7e-4db8-9f07-070e4d48af3b\",\"name\":\"SetData\",\"type\":\"n8n-nodes-base.set\",\"position\":[-300,-60],\"parameters\":{},\"typeVersion\":3.4},{\"id\":\"57999d68-71d4-4d3c-968a-50c1f20cb010\",\"name\":\"Set mime\",\"type\":\"n8n-nodes-base.code\",\"position\":[1900,-60],\"parameters\":{},\"typeVersion\":2},{\"id\":\"61771345-4562-4c4b-b00d-db8fb0b80f1e\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-80,-180],\"parameters\":{},\"typeVersion\":1},{\"id\":\"d3d8feb2-cda6-4c78-b96c-7c8938b23bb7\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-360,-520],\"parameters\":{},\"typeVersion\":1},{\"id\":\"ee617dbb-effb-4671-b23b-152058edd76f\",\"name\":\"Set Default Folder Name\",\"type\":\"n8n-nodes-base.code\",\"position\":[-20,-60],\"parameters\":{},\"notesInFlow\":false,\"typeVersion\":2},{\"id\":\"15da1268-7ea0-444a-ac79-3d6ec0057b80\",\"name\":\"Search Drive Folder\",\"type\":\"n8n-nodes-base.googleDrive\",\"position\":[200,-60],\"parameters\":{},\"typeVersion\":3,\"alwaysOutputData\":true},{\"id\":\"d63071eb-ca34-4eb7-8da1-5c8172f4f7fe\",\"name\":\"If exists\",\"type\":\"n8n-nodes-base.if\",\"position\":[420,-60],\"parameters\":{},\"typeVersion\":2.2},{\"id\":\"7cec08c1-737e-4178-92ea-11914821e2ef\",\"name\":\"Create Drive Folder\",\"type\":\"n8n-nodes-base.googleDrive\",\"position\":[680,80],\"parameters\":{},\"typeVersion\":3},{\"id\":\"78532c10-0c70-4c8c-9b93-bdcb3e80dbce\",\"name\":\"Set the loop\",\"type\":\"n8n-nodes-base.code\",\"position\":[1160,-60],\"parameters\":{},\"typeVersion\":2},{\"id\":\"93bc581c-0624-4fdd-ba06-e0ff3836ea53\",\"name\":\"Loop Over Items\",\"type\":\"n8n-nodes-base.splitInBatches\",\"position\":[1380,-60],\"parameters\":{},\"typeVersion\":3},{\"id\":\"40d272e8-458f-4946-916e-4eaf9960d4f0\",\"name\":\"Upload file to Google Drive\",\"type\":\"n8n-nodes-base.googleDrive\",\"position\":[2140,-60],\"parameters\":{},\"typeVersion\":3},{\"id\":\"08d5a34a-3e6c-4bfd-bc3e-0cbfedf9d715\",\"name\":\"Wait a sec\",\"type\":\"n8n-nodes-base.wait\",\"position\":[2380,-40],\"webhookId\":\"fc3f4340-3fc1-4b8a-9f3d-41dccbfb8347\",\"parameters\":{},\"typeVersion\":1.1},{\"id\":\"a1dca3c1-b9ce-443b-b942-908ab10c1610\",\"name\":\"Set Folder ID\",\"type\":\"n8n-nodes-base.set\",\"position\":[920,-60],\"parameters\":{},\"typeVersion\":3.4}],\"pinData\":{},\"connections\":{\"SetData\":{\"main\":[[{\"node\":\"Set Default Folder Name\",\"type\":\"main\",\"index\":0}]]},\"Set mime\":{\"main\":[[{\"node\":\"Upload file to Google Drive\",\"type\":\"main\",\"index\":0}]]},\"If exists\":{\"main\":[[{\"node\":\"Set Folder ID\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Create Drive Folder\",\"type\":\"main\",\"index\":0}]]},\"Wait a sec\":{\"main\":[[{\"node\":\"Loop Over Items\",\"type\":\"main\",\"index\":0}]]},\"Set the loop\":{\"main\":[[{\"node\":\"Loop Over Items\",\"type\":\"main\",\"index\":0}]]},\"Set Folder ID\":{\"main\":[[{\"node\":\"Set the loop\",\"type\":\"main\",\"index\":0}]]},\"Loop Over Items\":{\"main\":[[],[{\"node\":\"Smartbill get invoice pdf\",\"type\":\"main\",\"index\":0}]]},\"Create Drive Folder\":{\"main\":[[{\"node\":\"Set Folder ID\",\"type\":\"main\",\"index\":0}]]},\"Search Drive Folder\":{\"main\":[[{\"node\":\"If exists\",\"type\":\"main\",\"index\":0}]]},\"Set Default Folder Name\":{\"main\":[[{\"node\":\"Search Drive Folder\",\"type\":\"main\",\"index\":0}]]},\"Smartbill get invoice pdf\":{\"main\":[[{\"node\":\"Set mime\",\"type\":\"main\",\"index\":0}]]},\"Upload file to Google Drive\":{\"main\":[[{\"node\":\"Wait a sec\",\"type\":\"main\",\"index\":0}]]},\"When clicking \\\"Execute Workflow\\\"\":{\"main\":[[{\"node\":\"SetData\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "This workflow automates the retrieval of invoice PDFs from the Smartbill API and saves them to Google Drive in a dynamically created folder based on last month’s date. It also generates a range of invoice numbers, ensuring proper formatting, and uploads each PDF with a structured filename.\n\n## Overview\n\n  1. **Trigger and Data Setup:**  \nThe workflow is manually triggered. It sets the invoice range (start and end numbers), invoice series, the parent Google Drive folder ID and the folder where to save the PDF files.\n\n  2. **Folder Handling:**\n\n     * **Folder Name Calculation:** Calculates a default folder name based on last month’s date (formatted as `YYYY-MM`).\n  3. **Invoice Generation:**  \nA code node generates invoice items by iterating over a specified range of numbers. Each invoice number is padded to custom number of digits (e.g., `0013`), and the invoice series and folder ID are attached to each item.\n\n  4. **Retrieving Invoice PDFs:**  \nFor each generated invoice, the Smartbill API is called (using an HTTP Request node) to retrieve the corresponding invoice PDF.\n\n\n\n\n## How to Use\n\n  * **Credentials:**  \nEnsure you have configured the Smartbill API (HTTP Basic Auth) and Google API credentials correctly.\n\n  * **Parameter Adjustment:**  \nModify the `SetData` node if you need to change the invoice range, series, or target parent folder.\n\n  * **Execution:**  \nClick **Execute Workflow** to run the workflow manually.\n\n\n\n",
  "crawled_at": "2025-05-26T02:17:26.705225",
  "readme_zh": "该工作流实现了从Smartbill API自动获取发票PDF文件，并按照上月日期动态创建文件夹保存至Google Drive的功能。同时会生成指定范围的发票编号（确保格式统一），并以结构化文件名上传每个PDF文档。\n\n## 流程概览\n\n  1. **触发与数据设置**  \n工作流采用手动触发模式。设置发票编号范围（起始/结束编号）、发票系列号、Google Drive父文件夹ID及PDF存储目录。\n\n  2. **文件夹管理**  \n     * **文件夹命名规则**：根据上月日期自动生成默认文件夹名称（格式为`YYYY-MM`）\n\n  3. **发票生成**  \n通过代码节点遍历指定数字范围生成发票条目。每个发票编号会按自定义位数补零（如`0013`），并将发票系列号和文件夹ID附加至各条目。\n\n  4. **获取发票PDF**  \n针对每个生成的发票编号，通过HTTP请求节点调用Smartbill API获取对应PDF文件。\n\n## 使用指南\n\n  * **凭证配置**  \n需确保已正确配置Smartbill API（HTTP基本认证）和Google API访问凭证。\n\n  * **参数调整**  \n如需修改发票编号范围、系列号或目标父文件夹，请调整`SetData`节点参数。\n\n  * **执行操作**  \n点击**执行工作流**按钮即可手动运行流程。",
  "title_zh": "从SmartBill导出PDF发票至Google Drive",
  "publish_date_zh": "最后更新于3个月前",
  "workflow_json_zh": "{\"meta\":{\"instanceId\":\"e122e4b90b0dc212c47b42e306cb84c993d082784105d7fe578eca9a9d068de0\",\"templateCredsSetupCompleted\":true},\"nodes\":[{\"id\":\"119111b6-92a8-4a54-8830-2a12a0d4eec8\",\"name\":\"When clicking \\\"Execute Workflow\\\"\",\"type\":\"n8n-nodes-base.manualTrigger\",\"position\":[-580,-60],\"parameters\":{},\"typeVersion\":1},{\"id\":\"bf0767db-8dd2-4f83-a27f-37c1160916d4\",\"name\":\"Smartbill get invoice pdf\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[1640,-60],\"parameters\":{},\"typeVersion\":4.1},{\"id\":\"f8bd05d5-0d7e-4db8-9f07-070e4d48af3b\",\"name\":\"SetData\",\"type\":\"n8n-nodes-base.set\",\"position\":[-300,-60],\"parameters\":{},\"typeVersion\":3.4},{\"id\":\"57999d68-71d4-4d3c-968a-50c1f20cb010\",\"name\":\"Set mime\",\"type\":\"n8n-nodes-base.code\",\"position\":[1900,-60],\"parameters\":{},\"typeVersion\":2},{\"id\":\"61771345-4562-4c4b-b00d-db8fb0b80f1e\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-80,-180],\"parameters\":{},\"typeVersion\":1},{\"id\":\"d3d8feb2-cda6-4c78-b96c-7c8938b23bb7\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-360,-520],\"parameters\":{},\"typeVersion\":1},{\"id\":\"ee617dbb-effb-4671-b23b-152058edd76f\",\"name\":\"Set Default Folder Name\",\"type\":\"n8n-nodes-base.code\",\"position\":[-20,-60],\"parameters\":{},\"notesInFlow\":false,\"typeVersion\":2},{\"id\":\"15da1268-7ea0-444a-ac79-3d6ec0057b80\",\"name\":\"Search Drive Folder\",\"type\":\"n8n-nodes-base.googleDrive\",\"position\":[200,-60],\"parameters\":{},\"typeVersion\":3,\"alwaysOutputData\":true},{\"id\":\"d63071eb-ca34-4eb7-8da1-5c8172f4f7fe\",\"name\":\"If exists\",\"type\":\"n8n-nodes-base.if\",\"position\":[420,-60],\"parameters\":{},\"typeVersion\":2.2},{\"id\":\"7cec08c1-737e-4178-92ea-11914821e2ef\",\"name\":\"Create Drive Folder\",\"type\":\"n8n-nodes-base.googleDrive\",\"position\":[680,80],\"parameters\":{},\"typeVersion\":3},{\"id\":\"78532c10-0c70-4c8c-9b93-bdcb3e80dbce\",\"name\":\"Set the loop\",\"type\":\"n8n-nodes-base.code\",\"position\":[1160,-60],\"parameters\":{},\"typeVersion\":2},{\"id\":\"93bc581c-0624-4fdd-ba06-e0ff3836ea53\",\"name\":\"Loop Over Items\",\"type\":\"n8n-nodes-base.splitInBatches\",\"position\":[1380,-60],\"parameters\":{},\"typeVersion\":3},{\"id\":\"40d272e8-458f-4946-916e-4eaf9960d4f0\",\"name\":\"Upload file to Google Drive\",\"type\":\"n8n-nodes-base.googleDrive\",\"position\":[2140,-60],\"parameters\":{},\"typeVersion\":3},{\"id\":\"08d5a34a-3e6c-4bfd-bc3e-0cbfedf9d715\",\"name\":\"Wait a sec\",\"type\":\"n8n-nodes-base.wait\",\"position\":[2380,-40],\"webhookId\":\"fc3f4340-3fc1-4b8a-9f3d-41dccbfb8347\",\"parameters\":{},\"typeVersion\":1.1},{\"id\":\"a1dca3c1-b9ce-443b-b942-908ab10c1610\",\"name\":\"Set Folder ID\",\"type\":\"n8n-nodes-base.set\",\"position\":[920,-60],\"parameters\":{},\"typeVersion\":3.4}],\"pinData\":{},\"connections\":{\"SetData\":{\"main\":[[{\"node\":\"Set Default Folder Name\",\"type\":\"main\",\"index\":0}]]},\"Set mime\":{\"main\":[[{\"node\":\"Upload file to Google Drive\",\"type\":\"main\",\"index\":0}]]},\"If exists\":{\"main\":[[{\"node\":\"Set Folder ID\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Create Drive Folder\",\"type\":\"main\",\"index\":0}]]},\"Wait a sec\":{\"main\":[[{\"node\":\"Loop Over Items\",\"type\":\"main\",\"index\":0}]]},\"Set the loop\":{\"main\":[[{\"node\":\"Loop Over Items\",\"type\":\"main\",\"index\":0}]]},\"Set Folder ID\":{\"main\":[[{\"node\":\"Set the loop\",\"type\":\"main\",\"index\":0}]]},\"Loop Over Items\":{\"main\":[[],[{\"node\":\"Smartbill get invoice pdf\",\"type\":\"main\",\"index\":0}]]},\"Create Drive Folder\":{\"main\":[[{\"node\":\"Set Folder ID\",\"type\":\"main\",\"index\":0}]]},\"Search Drive Folder\":{\"main\":[[{\"node\":\"If exists\",\"type\":\"main\",\"index\":0}]]},\"Set Default Folder Name\":{\"main\":[[{\"node\":\"Search Drive Folder\",\"type\":\"main\",\"index\":0}]]},\"Smartbill get invoice pdf\":{\"main\":[[{\"node\":\"Set mime\",\"type\":\"main\",\"index\":0}]]},\"Upload file to Google Drive\":{\"main\":[[{\"node\":\"Wait a sec\",\"type\":\"main\",\"index\":0}]]},\"When clicking \\\"Execute Workflow\\\"\":{\"main\":[[{\"node\":\"SetData\",\"type\":\"main\",\"index\":0}]]}}}"
}