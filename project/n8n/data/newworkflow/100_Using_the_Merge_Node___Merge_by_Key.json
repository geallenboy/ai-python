{
  "url": "https://n8n.io/workflows/100-using-the-merge-node-merge-by-key/",
  "title": "Using the Merge Node - Merge by Key",
  "author": "mike",
  "publish_date": "Last update 10 months ago",
  "publish_date_absolute": "2024-07-25",
  "categories": [
    {
      "name": "Building Blocks"
    }
  ],
  "workflow_json": "{\"nodes\":[{\"name\":\"Data 1\",\"type\":\"n8n-nodes-base.function\",\"position\":[602,350],\"parameters\":{\"functionCode\":\"items[0].json = {\\n\\\"data\\\": [\\n{\\n\\\"pointer\\\": \\\"12345\\\",\\n\\\"panel\\\": \\\"234234\\\",\\n\\\"subject\\\": \\\"Blah Blah\\\",\\n\\\"note\\\": \\\"\\\",\\n\\\"interviewers\\\": [\\n{\\n\\\"id\\\": \\\"111222333\\\",\\n\\\"name\\\": \\\"Bobby Johnson\\\",\\n\\\"email\\\": \\\"bobbyj@example.com\\\"\\n}\\n],\\n\\\"timezone\\\": \\\"America/Los_Angeles\\\",\\n},\\n{\\n\\\"pointer\\\": \\\"98754\\\",\\n\\\"panel\\\": \\\"3243234\\\",\\n\\\"subject\\\": \\\"Yadda Yadda\\\",\\n\\\"note\\\": \\\"\\\",\\n\\\"interviewers\\\": [\\n{\\n\\\"id\\\": \\\"444555666\\\",\\n\\\"name\\\": \\\"Billy Johnson\\\",\\n\\\"email\\\": \\\"billyj@example.com\\\"\\n}\\n],\\n\\\"timezone\\\": \\\"America/Los_Angeles\\\",\\n},\\n],\\n\\\"hasNext\\\": false\\n};\\nreturn items;\\n\"},\"typeVersion\":1},{\"name\":\"Data 2\",\"type\":\"n8n-nodes-base.function\",\"position\":[602,550],\"parameters\":{\"functionCode\":\"items[0].json = [\\n{\\n\\\"name\\\": \\\"test\\\",\\n\\\"fields\\\": {\\n\\\"FirstName\\\": \\\"Bobby\\\",\\n\\\"LastName\\\": \\\"Johnson\\\",\\n\\\"JobTitleDescription\\\": \\\"Recruiter\\\",\\n\\\"HomeDepartmentDescription\\\": \\\"Recruiting Team\\\",\\n\\\"Photo\\\": [\\n{\\n\\\"x\\\": \\\"attPuc6gAIHUOHjsY\\\",\\n\\\"url\\\": \\\"http://urlto.com/BobbyPhoto.jpg\\\",\\n\\\"filename\\\": \\\"photo.jpg\\\",\\n\\\"size\\\": 28956,\\n\\\"type\\\": \\\"image/jpeg\\\"\\n}\\n],\\n\\\"eid\\\": \\\"111222333\\\"\\n},\\n\\\"createdTime\\\": \\\"2019-09-23T04:06:48.000Z\\\"\\n},\\n{\\n\\\"name\\\": \\\"test2\\\",\\n\\\"fields\\\": {\\n\\\"FirstName\\\": \\\"Billy\\\",\\n\\\"LastName\\\": \\\"Johnson\\\",\\n\\\"JobTitleDescription\\\": \\\"CEO\\\",\\n\\\"HomeDepartmentDescription\\\": \\\"Boss Team\\\",\\n\\\"Photo\\\": [\\n{\\n\\\"x\\\": \\\"attPuc6gAIHUOHjsY\\\",\\n\\\"url\\\": \\\"http://urlto.com/BillyPhoto.jpg\\\",\\n\\\"filename\\\": \\\"photo.jpg\\\",\\n\\\"size\\\": 28956,\\n\\\"type\\\": \\\"image/jpeg\\\"\\n}\\n],\\n\\\"eid\\\": \\\"444555666\\\"\\n},\\n\\\"createdTime\\\": \\\"2019-09-23T04:06:48.000Z\\\"\\n}\\n,\\n{\\n\\\"name\\\": \\\"test3\\\",\\n\\\"fields\\\": {\\n\\\"FirstName\\\": \\\"Susan\\\",\\n\\\"LastName\\\": \\\"Smith\\\",\\n\\\"JobTitleDescription\\\": \\\"CFO\\\",\\n\\\"HomeDepartmentDescription\\\": \\\"Boss Team\\\",\\n\\\"Photo\\\": [\\n{\\n\\\"x\\\": \\\"attPuc6gAIHUOHjsY\\\",\\n\\\"url\\\": \\\"http://urlto.com/SusanPhoto.jpg\\\",\\n\\\"filename\\\": \\\"photo.jpg\\\",\\n\\\"size\\\": 28956,\\n\\\"type\\\": \\\"image/jpeg\\\"\\n}\\n],\\n\\\"eid\\\": \\\"777888999\\\"\\n},\\n\\\"createdTime\\\": \\\"2019-09-23T04:06:48.000Z\\\"\\n}\\n];\\nreturn items;\"},\"typeVersion\":1},{\"name\":\"Convert Data 1\",\"type\":\"n8n-nodes-base.function\",\"position\":[752,350],\"parameters\":{\"functionCode\":\"const newItems = [];\\n\\nfor (const item of items[0].json.data) {\\n  newItems.push({ json: item });\\n}\\n\\nreturn newItems;\"},\"typeVersion\":1},{\"name\":\"Convert Data 2\",\"type\":\"n8n-nodes-base.function\",\"position\":[752,550],\"parameters\":{\"functionCode\":\"const newItems = [];\\n\\nfor (const item of items[0].json) {\\n  newItems.push({ json: item });\\n}\\n\\nreturn newItems;\"},\"typeVersion\":1},{\"name\":\"Merge\",\"type\":\"n8n-nodes-base.merge\",\"position\":[990,430],\"parameters\":{\"mode\":\"mergeByKey\",\"propertyName1\":\"interviewers[0].id\",\"propertyName2\":\"fields.eid\"},\"typeVersion\":1}],\"connections\":{\"Data 1\":{\"main\":[[{\"node\":\"Convert Data 1\",\"type\":\"main\",\"index\":0}]]},\"Data 2\":{\"main\":[[{\"node\":\"Convert Data 2\",\"type\":\"main\",\"index\":0}]]},\"Convert Data 1\":{\"main\":[[{\"node\":\"Merge\",\"type\":\"main\",\"index\":0}]]},\"Convert Data 2\":{\"main\":[[{\"node\":\"Merge\",\"type\":\"main\",\"index\":1}]]}}}",
  "readme": "This is an example of how you can make Merge by Key work.\n\nThe “Data 1” and “Data 2” nodes simply provide mock data. You can replace them with your own data sources. Then the “Convert Data” nodes are important. They make sure that the different array items are actually different items in n8n. After that, you have then the merge with the merged data.\n",
  "crawled_at": "2025-05-25T17:57:37.701829",
  "readme_zh": "这是如何实现“按键合并”功能的一个示例。\n\n\"数据1\"和\"数据2\"节点仅提供模拟数据，您可以用自己的数据源替换它们。关键在于随后的\"转换数据\"节点——它们确保不同的数组项在n8n中能被识别为独立条目。最后通过合并节点输出整合后的数据集。",
  "title_zh": "使用合并节点 - 按键合并",
  "publish_date_zh": "最后更新于10个月前",
  "workflow_json_zh": "{\n  \"nodes\": [\n    {\n      \"name\": \"Data 1\",\n      \"type\": \"n8n-nodes-base.function\",\n      \"position\": [\n        602,\n        350\n      ],\n      \"parameters\": {\n        \"functionCode\": \"items[0].json = {\\n\\\"data\\\": [\\n{\\n\\\"pointer\\\": \\\"12345\\\",\\n\\\"panel\\\": \\\"234234\\\",\\n\\\"subject\\\": \\\"Blah Blah\\\",\\n\\\"note\\\": \\\"\\\",\\n\\\"interviewers\\\": [\\n{\\n\\\"id\\\": \\\"111222333\\\",\\n\\\"name\\\": \\\"Bobby Johnson\\\",\\n\\\"email\\\": \\\"bobbyj@example.com\\\"\\n}\\n],\\n\\\"timezone\\\": \\\"America/Los_Angeles\\\",\\n},\\n{\\n\\\"pointer\\\": \\\"98754\\\",\\n\\\"panel\\\": \\\"3243234\\\",\\n\\\"subject\\\": \\\"Yadda Yadda\\\",\\n\\\"note\\\": \\\"\\\",\\n\\\"interviewers\\\": [\\n{\\n\\\"id\\\": \\\"444555666\\\",\\n\\\"name\\\": \\\"Billy Johnson\\\",\\n\\\"email\\\": \\\"billyj@example.com\\\"\\n}\\n],\\n\\\"timezone\\\": \\\"America/Los_Angeles\\\",\\n},\\n],\\n\\\"hasNext\\\": false\\n};\\nreturn items;\\n\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Data 2\",\n      \"type\": \"n8n-nodes-base.function\",\n      \"position\": [\n        602,\n        550\n      ],\n      \"parameters\": {\n        \"functionCode\": \"items[0].json = [\\n{\\n\\\"name\\\": \\\"test\\\",\\n\\\"fields\\\": {\\n\\\"FirstName\\\": \\\"Bobby\\\",\\n\\\"LastName\\\": \\\"Johnson\\\",\\n\\\"JobTitleDescription\\\": \\\"Recruiter\\\",\\n\\\"HomeDepartmentDescription\\\": \\\"Recruiting Team\\\",\\n\\\"Photo\\\": [\\n{\\n\\\"x\\\": \\\"attPuc6gAIHUOHjsY\\\",\\n\\\"url\\\": \\\"http://urlto.com/BobbyPhoto.jpg\\\",\\n\\\"filename\\\": \\\"photo.jpg\\\",\\n\\\"size\\\": 28956,\\n\\\"type\\\": \\\"image/jpeg\\\"\\n}\\n],\\n\\\"eid\\\": \\\"111222333\\\"\\n},\\n\\\"createdTime\\\": \\\"2019-09-23T04:06:48.000Z\\\"\\n},\\n{\\n\\\"name\\\": \\\"test2\\\",\\n\\\"fields\\\": {\\n\\\"FirstName\\\": \\\"Billy\\\",\\n\\\"LastName\\\": \\\"Johnson\\\",\\n\\\"JobTitleDescription\\\": \\\"CEO\\\",\\n\\\"HomeDepartmentDescription\\\": \\\"Boss Team\\\",\\n\\\"Photo\\\": [\\n{\\n\\\"x\\\": \\\"attPuc6gAIHUOHjsY\\\",\\n\\\"url\\\": \\\"http://urlto.com/BillyPhoto.jpg\\\",\\n\\\"filename\\\": \\\"photo.jpg\\\",\\n\\\"size\\\": 28956,\\n\\\"type\\\": \\\"image/jpeg\\\"\\n}\\n],\\n\\\"eid\\\": \\\"444555666\\\"\\n},\\n\\\"createdTime\\\": \\\"2019-09-23T04:06:48.000Z\\\"\\n}\\n,\\n{\\n\\\"name\\\": \\\"test3\\\",\\n\\\"fields\\\": {\\n\\\"FirstName\\\": \\\"Susan\\\",\\n\\\"LastName\\\": \\\"Smith\\\",\\n\\\"JobTitleDescription\\\": \\\"CFO\\\",\\n\\\"HomeDepartmentDescription\\\": \\\"Boss Team\\\",\\n\\\"Photo\\\": [\\n{\\n\\\"x\\\": \\\"attPuc6gAIHUOHjsY\\\",\\n\\\"url\\\": \\\"http://urlto.com/SusanPhoto.jpg\\\",\\n\\\"filename\\\": \\\"photo.jpg\\\",\\n\\\"size\\\": 28956,\\n\\\"type\\\": \\\"image/jpeg\\\"\\n}\\n],\\n\\\"eid\\\": \\\"777888999\\\"\\n},\\n\\\"createdTime\\\": \\\"2019-09-23T04:06:48.000Z\\\"\\n}\\n];\\nreturn items;\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Convert Data 1\",\n      \"type\": \"n8n-nodes-base.function\",\n      \"position\": [\n        752,\n        350\n      ],\n      \"parameters\": {\n        \"functionCode\": \"const newItems = [];\\n\\nfor (const item of items[0].json.data) {\\n  newItems.push({ json: item });\\n}\\n\\nreturn newItems;\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Convert Data 2\",\n      \"type\": \"n8n-nodes-base.function\",\n      \"position\": [\n        752,\n        550\n      ],\n      \"parameters\": {\n        \"functionCode\": \"const newItems = [];\\n\\nfor (const item of items[0].json) {\\n  newItems.push({ json: item });\\n}\\n\\nreturn newItems;\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Merge\",\n      \"type\": \"n8n-nodes-base.merge\",\n      \"position\": [\n        990,\n        430\n      ],\n      \"parameters\": {\n        \"mode\": \"mergeByKey\",\n        \"propertyName1\": \"interviewers[0].id\",\n        \"propertyName2\": \"fields.eid\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"connections\": {\n    \"Data 1\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Convert Data 1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Data 2\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Convert Data 2\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Convert Data 1\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Convert Data 2\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge\",\n            \"type\": \"main\",\n            \"index\": 1\n          }\n        ]\n      ]\n    }\n  }\n}"
}