{
  "url": "https://n8n.io/workflows/4243-gmail-attachment-backup-to-google-drive/",
  "title": "Gmail Attachment Backup to Google Drive",
  "author": "Akhil Varma Gadiraju",
  "publish_date": "Last update 4 days ago",
  "publish_date_absolute": "2025-05-22",
  "categories": [
    {
      "name": "IT Ops"
    }
  ],
  "workflow_json": "{\"meta\":{\"instanceId\":\"7d8066d2f56a07000fe7d753d3eeabf0ecdf68413466f30d10afe0906f058427\",\"templateCredsSetupCompleted\":true},\"nodes\":[{\"id\":\"9b0e3c5c-6f27-4034-b281-960b039b883a\",\"name\":\"Gmail Trigger\",\"type\":\"n8n-nodes-base.gmailTrigger\",\"position\":[0,-20],\"parameters\":{\"filters\":{\"sender\":\"akhilgadiraju@gmail.com\"},\"pollTimes\":{\"item\":[{\"mode\":\"everyMinute\"}]}},\"credentials\":{\"gmailOAuth2\":{\"id\":\"wqFUFuFpF5eRAp4E\",\"name\":\"Gmail OAuth2 - Akhil\"}},\"typeVersion\":1.2},{\"id\":\"c68ebbfb-8fad-4f2b-837b-fb8ac0ffe4df\",\"name\":\"Gmail\",\"type\":\"n8n-nodes-base.gmail\",\"position\":[220,-20],\"webhookId\":\"2614ede2-d4ce-4490-9792-8157980bece3\",\"parameters\":{\"simple\":false,\"options\":{\"downloadAttachments\":true,\"dataPropertyAttachmentsPrefixName\":\"attachment_\"},\"messageId\":\"={{ $json.id }}\",\"operation\":\"get\"},\"credentials\":{\"gmailOAuth2\":{\"id\":\"wqFUFuFpF5eRAp4E\",\"name\":\"Gmail OAuth2 - Akhil\"}},\"typeVersion\":2.1},{\"id\":\"40b97338-6ffe-4cfd-869e-a50815808a89\",\"name\":\"Replace Me\",\"type\":\"n8n-nodes-base.noOp\",\"position\":[800,-20],\"parameters\":{},\"typeVersion\":1},{\"id\":\"0d4ae5a5-51d5-4917-8a88-7828d2f0e5ea\",\"name\":\"Google Drive\",\"type\":\"n8n-nodes-base.googleDrive\",\"position\":[620,-20],\"parameters\":{\"name\":\"={{ $('Gmail Trigger').item.json.id + \\\"_\\\" + $now + \\\"_\\\" + \\\"backup_attachment\\\" }}\",\"driveId\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"My Drive\",\"cachedResultUrl\":\"https://drive.google.com/drive/my-drive\",\"cachedResultName\":\"My Drive\"},\"options\":{},\"folderId\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"1aZmIqT9jG-GqW_OIGT3HWvRb6JalTlBi\",\"cachedResultUrl\":\"https://drive.google.com/drive/folders/1aZmIqT9jG-GqW_OIGT3HWvRb6JalTlBi\",\"cachedResultName\":\"DOcs\"},\"inputDataFieldName\":\"=data\"},\"credentials\":{\"googleDriveOAuth2Api\":{\"id\":\"LxzMJWxwgbnYKUly\",\"name\":\"Google Drive - Akhil\"}},\"typeVersion\":3},{\"id\":\"3f2bd52a-7637-4b65-bae3-daebc5f664de\",\"name\":\"Code\",\"type\":\"n8n-nodes-base.code\",\"position\":[420,-20],\"parameters\":{\"jsCode\":\"return Object.entries(items[0].binary).map(([key, value]) => {\\n  return {\\n    binary: {\\n      data: value\\n    }\\n  };\\n});\"},\"typeVersion\":2},{\"id\":\"c0ae6ad0-7f25-4912-9bbd-7610ef61d6cd\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[140,-120],\"parameters\":{\"color\":4,\"width\":260,\"height\":80,\"content\":\"### Change sender filter\\nModify the sender field in the Gmail Trigger node\"},\"typeVersion\":1},{\"id\":\"0552dd8a-341e-4a67-ad12-8bab41371685\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[560,140],\"parameters\":{\"color\":4,\"height\":180,\"content\":\"### Change destination folder \\nUpdate folderId in the Google Drive node\\n\\n### Modify filename format\\nEdit the name expression in the Google Drive node\"},\"typeVersion\":1},{\"id\":\"f19c4cff-b85d-4ac3-99d7-bf70e61fe5bb\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[740,-140],\"parameters\":{\"height\":100,\"content\":\"### Add post-upload logic\\nReplace or extend the Replace Me node with notifications, logs, etc.\"},\"typeVersion\":1}],\"pinData\":{},\"connections\":{\"Code\":{\"main\":[[{\"node\":\"Google Drive\",\"type\":\"main\",\"index\":0}]]},\"Gmail\":{\"main\":[[{\"node\":\"Code\",\"type\":\"main\",\"index\":0}]]},\"Replace Me\":{\"main\":[[]]},\"Google Drive\":{\"main\":[[{\"node\":\"Replace Me\",\"type\":\"main\",\"index\":0}]]},\"Gmail Trigger\":{\"main\":[[{\"node\":\"Gmail\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "# 📥 Gmail Attachment Backup to Google Drive — n8n Workflow\n\nThis n8n workflow automatically backs up email attachments from a specific sender in Gmail to a designated folder in Google Drive. It polls Gmail every minute and uploads any new attachments from matching emails to the specified Google Drive folder with a timestamped filename.\n\n* * *\n\n## 📌 Use Case\n\n**Primary Purpose** :\n\n  * Automatically archive and back up attachments from a specific sender (e.g., `test@gmail.com`) to Google Drive for safekeeping, audit, or processing.\n\n\n\n**Ideal For** :\n\n  * Automating invoice/receipt collection from a vendor\n  * Archiving reports from a monitored email address\n  * Creating a searchable historical log of attachments for compliance\n\n\n\n* * *\n\n## 🧭 Workflow Overview\n\nHere’s how the workflow operates:\n\n  1. **🔔 Gmail Trigger**  \nPolls Gmail every minute for new messages from a specific sender (`test@gmail.com`).\n\n  2. **📩 Gmail Get Message**  \nRetrieves the full contents (including attachments) of the matched email.\n\n  3. **🧠 Code (JS)**  \nIterates over all binary attachments in the email and restructures them as individual binary items to upload separately.\n\n  4. **📤 Google Drive**  \nUploads each attachment to a target Google Drive folder (`DOcs`) with a timestamp and unique name.\n\n  5. **📍 Replace Me (NoOp)**  \nPlaceholder node to indicate workflow completion. You can replace this with Slack notifications, logs, or alerts.\n\n\n\n\n* * *\n\n## 🔧 How to Use\n\n### Prerequisites\n\n  * An [n8n](https://n8n.io/) instance (self-hosted or cloud)\n  * A connected Gmail account with OAuth2 credentials\n  * A connected Google Drive account with OAuth2 credentials\n  * Permissions for n8n to access your Gmail and Google Drive\n\n\n\n### Setup Instructions\n\n  1. **Import the Workflow**  \nCopy and paste the workflow JSON into your n8n editor.\n\n  2. **Set Up Credentials**  \nEnsure the following credentials exist and are authorized:\n\n     * `Gmail (for Gmail nodes)\n     * `Google Drive (for Google Drive node)\n  3. **Configure the Folder**  \nUpdate the `folderId` in the Google Drive node if you want to use a different target folder.\n\n  4. **Activate the Workflow**  \nEnable the workflow in n8n. It will start polling Gmail every minute.\n\n\n\n\n* * *\n\n## ✏️ How to Customize\n\nTask | How to Customize  \n---|---  \nChange sender filter | Modify the `sender` field in the **Gmail Trigger** node  \nAdjust polling frequency | Change the `pollTimes` configuration in the trigger node  \nChange destination folder | Update `folderId` in the **Google Drive** node  \nModify filename format | Edit the `name` expression in the **Google Drive** node  \nAdd post-upload logic | Replace or extend the **Replace Me** node with notifications, logs, etc.  \nProcess only specific attachments | Add logic in the **Code** node to filter by filename or MIME type  \n  \n* * *\n\n## 📂 Filename Format Example\n    \n    \n    [MessageID]_[Timestamp]_backup_attachment\n    \n\nThis naming convention ensures uniqueness and traceability back to the original message.\n\n* * *\n\n## ✅ Future Improvements\n\n  * **Email subject filtering** to narrow down the match\n  * **Slack/Email notifications** after upload\n  * **Deduplication check** to avoid reuploading the same files\n  * **Virus scan or file validation** before upload\n\n\n\n* * *\n\n## 💬 Support\n\nFor any issues using this workflow:\n\n  * Double-check your credential permissions\n  * Review n8n logs for Gmail or Google Drive errors\n  * Visit the [n8n community forums](https://community.n8n.io)\n\n\n",
  "crawled_at": "2025-05-26T07:25:06.617124",
  "readme_zh": "# 📥 Gmail附件备份至Google Drive —— n8n自动化工作流\n\n该n8n工作流可自动将指定发件人的Gmail邮件附件备份至Google Drive指定文件夹，每分钟扫描一次收件箱，并将匹配邮件中的新附件以时间戳格式命名上传至目标文件夹。\n\n* * *\n\n## 📌 应用场景\n\n**核心功能**：\n  * 自动归档特定发件人（如`test@gmail.com`）的邮件附件至Google Drive，用于安全存储、审计或后续处理\n\n**典型用途**：\n  * 自动化收集供应商发票/收据\n  * 归档监控邮箱收到的报告文件\n  * 建立可检索的附件历史记录以满足合规要求\n\n* * *\n\n## 🧭 工作流概览\n\n运行流程说明：\n1. **🔔 Gmail触发器**  \n每分钟扫描来自特定发件人(`test@gmail.com`)的新邮件\n\n2. **📩 获取邮件内容**  \n读取匹配邮件的完整内容（含附件）\n\n3. **🧠 代码处理(JS)**  \n遍历所有二进制附件，将其重组为独立可上传项\n\n4. **📤 Google Drive上传**  \n将每个附件添加时间戳后上传至目标文件夹(`DOcs`)\n\n5. **📍 替换节点(占位符)**  \n标识工作流终点，可替换为Slack通知或日志记录等操作\n\n* * *\n\n## 🔧 使用指南\n\n### 前置条件\n  * 可用的[n8n](https://n8n.io/)实例（自建或云端版）\n  * 已配置OAuth2认证的Gmail账号\n  * 已配置OAuth2认证的Google Drive账号\n  * n8n具有Gmail和Google Drive的访问权限\n\n### 配置步骤\n1. **导入工作流**  \n将JSON工作流粘贴至n8n编辑器\n\n2. **设置认证凭据**  \n确保已配置以下有效凭据：\n   * `Gmail`（用于邮件节点）\n   * `Google Drive`（用于云盘节点）\n\n3. **指定目标文件夹**  \n根据需要修改Google Drive节点中的`folderId`参数\n\n4. **激活工作流**  \n在n8n中启用工作流，系统将开始每分钟扫描Gmail\n\n* * *\n\n## ✏️ 自定义设置\n\n任务 | 自定义方法  \n---|---  \n修改发件人过滤条件 | 调整**Gmail触发器**节点的`sender`字段  \n调整扫描频率 | 修改触发器节点的`pollTimes`参数  \n变更目标文件夹 | 更新**Google Drive**节点的`folderId`值  \n修改文件名格式 | 编辑**Google Drive**节点的`name`表达式  \n添加上传后操作 | 将**替换节点**改为通知或日志记录等  \n筛选特定类型附件 | 在**代码节点**中添加文件类型过滤逻辑  \n\n* * *\n\n## 📂 文件名格式示例\n    \n    \n    [邮件ID]_[时间戳]_backup_附件\n    \n\n此命名规则确保文件唯一性且可追溯原始邮件\n\n* * *\n\n## ✅ 优化方向\n\n  * 增加**邮件主题过滤**功能\n  * 添加上传完成后的**Slack/邮件通知**\n  * 实现**重复文件检测**避免重复上传\n  * 上传前增加**病毒扫描/文件校验**功能\n\n* * *\n\n## 💬 技术支持\n\n遇到问题时请：\n  * 检查凭据权限设置\n  * 查看n8n日志中的Gmail/Google Drive报错\n  * 访问[n8n社区论坛](https://community.n8n.io)",
  "title_zh": "Gmail附件备份至Google云端硬盘",
  "publish_date_zh": "最后更新于4天前",
  "workflow_json_zh": "{\n  \"meta\": {\n    \"instanceId\": \"7d8066d2f56a07000fe7d753d3eeabf0ecdf68413466f30d10afe0906f058427\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"nodes\": [\n    {\n      \"id\": \"9b0e3c5c-6f27-4034-b281-960b039b883a\",\n      \"name\": \"Gmail Trigger\",\n      \"type\": \"n8n-nodes-base.gmailTrigger\",\n      \"position\": [\n        0,\n        -20\n      ],\n      \"parameters\": {\n        \"filters\": {\n          \"sender\": \"akhilgadiraju@gmail.com\"\n        },\n        \"pollTimes\": {\n          \"item\": [\n            {\n              \"mode\": \"everyMinute\"\n            }\n          ]\n        }\n      },\n      \"credentials\": {\n        \"gmailOAuth2\": {\n          \"id\": \"wqFUFuFpF5eRAp4E\",\n          \"name\": \"Gmail OAuth2 - Akhil\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"c68ebbfb-8fad-4f2b-837b-fb8ac0ffe4df\",\n      \"name\": \"Gmail\",\n      \"type\": \"n8n-nodes-base.gmail\",\n      \"position\": [\n        220,\n        -20\n      ],\n      \"webhookId\": \"2614ede2-d4ce-4490-9792-8157980bece3\",\n      \"parameters\": {\n        \"simple\": false,\n        \"options\": {\n          \"downloadAttachments\": true,\n          \"dataPropertyAttachmentsPrefixName\": \"attachment_\"\n        },\n        \"messageId\": \"={{ $json.id }}\",\n        \"operation\": \"get\"\n      },\n      \"credentials\": {\n        \"gmailOAuth2\": {\n          \"id\": \"wqFUFuFpF5eRAp4E\",\n          \"name\": \"Gmail OAuth2 - Akhil\"\n        }\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"40b97338-6ffe-4cfd-869e-a50815808a89\",\n      \"name\": \"Replace Me\",\n      \"type\": \"n8n-nodes-base.noOp\",\n      \"position\": [\n        800,\n        -20\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"0d4ae5a5-51d5-4917-8a88-7828d2f0e5ea\",\n      \"name\": \"Google Drive\",\n      \"type\": \"n8n-nodes-base.googleDrive\",\n      \"position\": [\n        620,\n        -20\n      ],\n      \"parameters\": {\n        \"name\": \"={{ $('Gmail Trigger').item.json.id + \\\"_\\\" + $now + \\\"_\\\" + \\\"backup_attachment\\\" }}\",\n        \"driveId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"My Drive\",\n          \"cachedResultUrl\": \"https://drive.google.com/drive/my-drive\",\n          \"cachedResultName\": \"My Drive\"\n        },\n        \"options\": {},\n        \"folderId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"1aZmIqT9jG-GqW_OIGT3HWvRb6JalTlBi\",\n          \"cachedResultUrl\": \"https://drive.google.com/drive/folders/1aZmIqT9jG-GqW_OIGT3HWvRb6JalTlBi\",\n          \"cachedResultName\": \"DOcs\"\n        },\n        \"inputDataFieldName\": \"=data\"\n      },\n      \"credentials\": {\n        \"googleDriveOAuth2Api\": {\n          \"id\": \"LxzMJWxwgbnYKUly\",\n          \"name\": \"Google Drive - Akhil\"\n        }\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"3f2bd52a-7637-4b65-bae3-daebc5f664de\",\n      \"name\": \"Code\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        420,\n        -20\n      ],\n      \"parameters\": {\n        \"jsCode\": \"return Object.entries(items[0].binary).map(([key, value]) => {\\n  return {\\n    binary: {\\n      data: value\\n    }\\n  };\\n});\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"c0ae6ad0-7f25-4912-9bbd-7610ef61d6cd\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        140,\n        -120\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 260,\n        \"height\": 80,\n        \"content\": \"### 更改发件人筛选器\\n修改Gmail触发器节点中的发件人字段\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"0552dd8a-341e-4a67-ad12-8bab41371685\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        560,\n        140\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"height\": 180,\n        \"content\": \"### 更改目标文件夹  \\n更新Google Drive节点中的folderId  \\n\\n### 修改文件名格式  \\n编辑Google Drive节点中的名称表达式\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"f19c4cff-b85d-4ac3-99d7-bf70e61fe5bb\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        740,\n        -140\n      ],\n      \"parameters\": {\n        \"height\": 100,\n        \"content\": \"### 添加上传后处理逻辑\\n替换或扩展\\\"替换我\\\"节点，加入通知、日志记录等功能\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"Code\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Google Drive\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Gmail\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Code\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Replace Me\": {\n      \"main\": [\n        []\n      ]\n    },\n    \"Google Drive\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Replace Me\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Gmail Trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Gmail\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}