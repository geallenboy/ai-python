{
  "url": "https://n8n.io/workflows/2749-proxmox-ai-agent-with-n8n-and-generative-ai-integration/",
  "title": "Proxmox AI Agent with n8n and Generative AI Integration",
  "author": "Amjid Ali",
  "publish_date": "Last update 2 months ago",
  "publish_date_absolute": "2025-03-26",
  "categories": [
    {
      "name": "DevOps"
    },
    {
      "name": "AI"
    },
    {
      "name": "IT Ops"
    }
  ],
  "workflow_json": "{\"meta\":{\"instanceId\":\"n8n.syncbricks.com\"},\"nodes\":[{\"id\":\"e6d85380-7cfa-4c6e-9b0f-d390ad0cbc67\",\"name\":\"HTTP Request1\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[1400,-180],\"parameters\":{\"url\":\"=https://proxmox.syncbricks.com/api2/json{{ $json.output.url }}\",\"method\":\"=POST\",\"options\":{\"allowUnauthorizedCerts\":true},\"jsonBody\":\"={{ $json.output.details }}\",\"sendBody\":true,\"specifyBody\":\"json\",\"authentication\":\"genericCredentialType\",\"genericAuthType\":\"httpHeaderAuth\"},\"credentials\":{\"httpHeaderAuth\":{\"id\":\"pJcVQegRQ5mpraoQ\",\"name\":\"Proxmox\"}},\"typeVersion\":4.2},{\"id\":\"9b497de8-0f01-40b1-8f8e-28fad1f758c4\",\"name\":\"Proxmox API Documentation\",\"type\":\"@n8n/n8n-nodes-langchain.toolHttpRequest\",\"position\":[-300,40],\"parameters\":{\"url\":\"https://pve.proxmox.com/pve-docs/api-viewer/index.html\",\"toolDescription\":\"This is Proxmox API Documentation ensure to read the details from here\"},\"typeVersion\":1.1},{\"id\":\"e7ac54a9-37be-44b5-b58e-8b631892367e\",\"name\":\"Auto-fixing Output Parser\",\"type\":\"@n8n/n8n-nodes-langchain.outputParserAutofixing\",\"position\":[40,60],\"parameters\":{\"options\":{\"prompt\":\"Instructions:\\n--------------\\n{instructions}\\n--------------\\nCompletion:\\n--------------\\n{completion}\\n--------------\\n\\nAbove, the Completion did not satisfy the constraints given in the Instructions.\\nError:\\n--------------\\n{error}\\n--------------\\n\\nPlease try again. Please only respond with an answer that satisfies the constraints laid out in the Instructions:\"}},\"typeVersion\":1},{\"id\":\"5d8c8c6d-d5de-4c87-9950-46f1f5757314\",\"name\":\"Google Gemini Chat Model1\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatGoogleGemini\",\"position\":[-40,360],\"parameters\":{\"options\":{},\"modelName\":\"models/gemini-2.0-flash-exp\"},\"credentials\":{\"googlePalmApi\":{\"id\":\"pKFvSpPWSRFpnBoB\",\"name\":\"Google Gemini(PaLM) Api account\"}},\"typeVersion\":1},{\"id\":\"8565ac2f-0cdd-4e7f-a1e9-6f273869e068\",\"name\":\"Structured Output Parser\",\"type\":\"@n8n/n8n-nodes-langchain.outputParserStructured\",\"position\":[180,360],\"parameters\":{\"jsonSchemaExample\":\"{\\n  \\\"response_type\\\": \\\"POST\\\",\\n  \\\"url\\\": \\\"/nodes/psb1/qemu\\\",\\n  \\\"details\\\": {\\n    \\\"vmid\\\": 105,\\n    \\\"cores\\\": 4,\\n    \\\"memory\\\": 8192,\\n    \\\"net0\\\": \\\"virtio,bridge=vmbr0\\\",\\n    \\\"disk0\\\": \\\"local:10,format=qcow2\\\",\\n    \\\"sockets\\\": 1,\\n    \\\"ostype\\\": \\\"l26\\\"\\n  },\\n  \\\"message\\\": \\\"The VM with ID 105 has been successfully configured to be created on node psb1.\\\"\\n}\"},\"typeVersion\":1.2},{\"id\":\"80b1ef4d-b4c7-40b4-969f-f53d0068cac7\",\"name\":\"Proxmox\",\"type\":\"@n8n/n8n-nodes-langchain.toolHttpRequest\",\"position\":[-80,40],\"parameters\":{\"url\":\"https://10.11.12.101:8006/api2/json/cluster/status\",\"authentication\":\"genericCredentialType\",\"genericAuthType\":\"httpHeaderAuth\",\"toolDescription\":\"=This is Proxmox which will help you to get the details of existing Proxmox installations, ensure to append to existing url : https://10.11.12.101:8006/api2/ to get response from existing proxmox \\n\\nMy prommox nodes are named as psb1, psb2 and psb3\\npsb1 : https://10.11.12.101:8006/api2/\\npsb2 : https://10.11.12.102:8006/api2/\\npsb3 : https://10.11.12.102:8006/api2/\"},\"credentials\":{\"httpHeaderAuth\":{\"id\":\"pJcVQegRQ5mpraoQ\",\"name\":\"Proxmox\"}},\"typeVersion\":1.1},{\"id\":\"09444fa1-3b5e-4411-b70c-cf777db971bb\",\"name\":\"HTTP Request\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[1080,-320],\"parameters\":{\"url\":\"=https://10.11.12.101:8006/api2/json{{ $json.output.properties.url.pattern }}\",\"method\":\"=GET\",\"options\":{\"allowUnauthorizedCerts\":true},\"authentication\":\"genericCredentialType\",\"genericAuthType\":\"httpHeaderAuth\"},\"credentials\":{\"httpHeaderAuth\":{\"id\":\"pJcVQegRQ5mpraoQ\",\"name\":\"Proxmox\"}},\"typeVersion\":4.2},{\"id\":\"d148b395-01e9-48a6-b98c-cb515fa3446d\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[900,-660],\"parameters\":{\"width\":736.2768017274677,\"height\":1221.0199187779397,\"content\":\"## API Key for Proxmox\\n** Create Credentails *** ensure to create credentials in Proxmox Data Center as API Key and then create credentails. \\n** Add Credentials to n8n ** Click on Credentails, add new Credentails and Chose Header Auth\\n** In Header Auth Below will be used \\nName : Authorization\\nValue : PVEAPIToken=<user>@<realm>!<token-id>=<token-value>\\n\\nSuppose my token id is n8n and key is 1234 so value will be as below\\n\\nValue : PVEAPIToken=root@pam!n8n=1234\\n\"},\"typeVersion\":1},{\"id\":\"d356bb83-c567-44b6-ba23-3e330abf835e\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-1240,-120],\"parameters\":{\"color\":6,\"width\":492.990678850593,\"height\":702.0895748933872,\"content\":\"## Trigger\\nYou can use any trigger as input, a chat, telegram, email etc\"},\"typeVersion\":1},{\"id\":\"d2829180-9c14-4437-9ae1-1bb822d8d925\",\"name\":\"Google Gemini Chat Model2\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatGoogleGemini\",\"position\":[1880,-320],\"parameters\":{\"options\":{},\"modelName\":\"models/gemini-2.0-flash-exp\"},\"credentials\":{\"googlePalmApi\":{\"id\":\"pKFvSpPWSRFpnBoB\",\"name\":\"Google Gemini(PaLM) Api account\"}},\"typeVersion\":1},{\"id\":\"0e8a617b-8b95-4bed-8bff-876266fc4151\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-440,-690],\"parameters\":{\"color\":5,\"width\":789.7678716732242,\"height\":1260.380358008782,\"content\":\"## Porxmox Custom AI Agent \\nIt uses the intelligence provided to it including the Proxmox API Wiki, Proxmox Cluster Linked and Proxmox API Documentation.\\n\\nThe AI Model connected with this is Gemini, you can connect any AI Model by Ollama, OpenAI, Claude etc.\\n\\nOutput Parser is used to ensure the fixed output structure that can be used for API URL\"},\"typeVersion\":1},{\"id\":\"4cbf39ae-7b81-44b1-858c-10c21af9d558\",\"name\":\"When chat message received\",\"type\":\"@n8n/n8n-nodes-langchain.chatTrigger\",\"position\":[-680,-300],\"webhookId\":\"63de8c82-04fc-4126-8bbf-b0eb62794d74\",\"parameters\":{\"options\":{}},\"typeVersion\":1.1},{\"id\":\"f91a1d2d-ce33-4469-b4da-e9ef1dd070e0\",\"name\":\"Telegram Trigger\",\"type\":\"n8n-nodes-base.telegramTrigger\",\"position\":[-1080,320],\"webhookId\":\"c86fa48b-ae66-46f2-b438-f156225a5c74\",\"parameters\":{\"updates\":[\"message\"],\"additionalFields\":{}},\"credentials\":{\"telegramApi\":{\"id\":\"uwpC7pPg6WJYh8Ad\",\"name\":\"Telegram account\"}},\"typeVersion\":1.1},{\"id\":\"aec3c1f4-058e-4321-99dd-772dcc04e206\",\"name\":\"Gmail Trigger\",\"type\":\"n8n-nodes-base.gmailTrigger\",\"position\":[-1080,-20],\"parameters\":{\"filters\":{},\"pollTimes\":{\"item\":[{\"mode\":\"everyMinute\"}]}},\"credentials\":{\"gmailOAuth2\":{\"id\":\"pccYQxL0liStKP66\",\"name\":\"Gmail account INFO\"}},\"typeVersion\":1.2},{\"id\":\"1afea4f3-adea-42ac-bc48-fa863b26e5a0\",\"name\":\"Webhook\",\"type\":\"n8n-nodes-base.webhook\",\"position\":[-1080,160],\"webhookId\":\"459d848d-72ed-490f-bc48-e5dc60242896\",\"parameters\":{\"path\":\"459d848d-72ed-490f-bc48-e5dc60242896\",\"options\":{},\"authentication\":\"headerAuth\"},\"credentials\":{\"httpHeaderAuth\":{\"id\":\"pJcVQegRQ5mpraoQ\",\"name\":\"Proxmox\"}},\"typeVersion\":2},{\"id\":\"de4af096-7b23-41ba-b390-8c52f58b09c6\",\"name\":\"Sticky Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[380,-680],\"parameters\":{\"color\":3,\"width\":486.2369951168387,\"height\":1245.2937736920358,\"content\":\"## HTTP methods\\nGET\\tRetrieve resources\\tFetch VM status, list nodes, get logs.\\n\\nPOST\\tCreate or trigger actions\\tStart/stop VMs, create backups.\\n\\nPUT\\tUpdate/replace entire resource configuration\\tModify VM configurations.\\n\\nDELETE\\tDelete resources\\tRemove VMs, delete users, remove files.\\n\\nOPTIONS\\tFetch supported methods for an endpoint\\tCheck available operations for an API.\\n\\nPATCH\\tApply partial updates\\tUpdate specific fields in VM settings.\"},\"typeVersion\":1},{\"id\":\"2c4ef73b-281f-4a24-81a2-cae72e446955\",\"name\":\"Proxmox API Wiki\",\"type\":\"@n8n/n8n-nodes-langchain.toolHttpRequest\",\"position\":[-180,40],\"parameters\":{\"url\":\"https://pve.proxmox.com/wiki/Proxmox_VE_API\",\"toolDescription\":\"Get the proxmox API details from Proxmox Wiki\"},\"typeVersion\":1.1},{\"id\":\"f11ac59e-6031-4435-a417-200cdd559bd2\",\"name\":\"Structure Response\",\"type\":\"n8n-nodes-base.code\",\"position\":[1480,-520],\"parameters\":{\"jsCode\":\"// Access all items from the incoming node\\nconst items = $input.all();\\n\\n// Combine all fields of each item into a single string\\nconst combinedData = items.map(item => {\\n    const inputData = item.json; // Access the JSON data of the current item\\n    \\n    // Combine all fields into a single string\\n    const combinedField = Object.entries(inputData)\\n        .map(([key, value]) => {\\n            // Handle objects or arrays by converting them to JSON strings\\n            const formattedValue = typeof value === 'object' ? JSON.stringify(value) : value;\\n            return `${key}: ${formattedValue}`;\\n        })\\n        .join(' | '); // Combine key-value pairs as a single string with a delimiter\\n\\n    // Return the new structure\\n    return {\\n        json: {\\n            combinedField // Only keep the combined field for table representation\\n        },\\n    };\\n});\\n\\n// Output the combined data\\nreturn combinedData;\\n\"},\"typeVersion\":2},{\"id\":\"7752281b-226b-4c19-bcd4-33804ea2abe7\",\"name\":\"Sticky Note4\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1680,-660],\"parameters\":{\"color\":5,\"width\":895.2529822972874,\"height\":517.5348441931358,\"content\":\"## Porxmox Custom AI Agent (Get)\\nThis agent will convert the response from proxmox to meaningful explanation\"},\"typeVersion\":1},{\"id\":\"fd65db23-0d36-42b1-a012-2ddcdd2ca914\",\"name\":\"Sticky Note5\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1680,-122.8638048233953],\"parameters\":{\"color\":5,\"width\":900.3261837471116,\"height\":712.4591709572671,\"content\":\"##  Created or triggered an action on the server.\\nResponse will come back here\"},\"typeVersion\":1},{\"id\":\"60234199-d28c-4fb8-8ad7-1d24693599ed\",\"name\":\"Structgure Response from Proxmox\",\"type\":\"n8n-nodes-base.code\",\"position\":[2120,140],\"parameters\":{\"jsCode\":\"// Access the 'data' field from the input\\nlet rawData = $json[\\\"data\\\"];\\n\\n// Split the string by colon (:) to extract parts\\nlet parts = rawData.split(\\\":\\\");\\n\\n// Create an object with the extracted parts\\nreturn {\\n  upid: parts[0],       // UPID\\n  node: parts[1],       // Node (e.g., psb1)\\n  processID: parts[2],  // Process ID\\n  taskID: parts[3],     // Task ID\\n  timestamp: parts[4],  // Timestamp\\n  operation: parts[5],  // Operation (e.g., aptupdate)\\n  user: parts[7]        // User (e.g., root@pam!n8n)\\n};\\n\"},\"typeVersion\":2},{\"id\":\"57ab92f3-6f65-459d-8f41-8a391108457b\",\"name\":\"Format Response and Hide Sensitive Data\",\"type\":\"n8n-nodes-base.code\",\"position\":[2380,140],\"parameters\":{\"jsCode\":\"// Extract required fields from the input\\nlet node = $json[\\\"node\\\"] || \\\"unknown node\\\";\\nlet operation = $json[\\\"operation\\\"] || \\\"unknown operation\\\";\\nlet user = $json[\\\"user\\\"] || \\\"unknown user\\\";\\nlet rawTimestamp = $json[\\\"timestamp\\\"] || \\\"unknown timestamp\\\";\\n\\n// Convert timestamp to a readable format\\nlet readableTimestamp = \\\"Invalid timestamp\\\";\\ntry {\\n  let timestamp = parseInt(rawTimestamp, 16) * 1000; // Convert hex to milliseconds\\n  readableTimestamp = new Date(timestamp).toLocaleString();\\n} catch (error) {\\n  readableTimestamp = \\\"Unable to parse timestamp\\\";\\n}\\n\\n// Construct the simple message\\nlet message = `The operation '${operation}' was executed successfully on node '${node}' by user '${user}' at '${readableTimestamp}'.`;\\n\\nreturn {\\n  message: message\\n};\\n\"},\"typeVersion\":2},{\"id\":\"aca671cb-4bb7-4f9e-847a-34d89151d2e2\",\"name\":\"If\",\"type\":\"n8n-nodes-base.if\",\"position\":[1060,-80],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"loose\"},\"combinator\":\"or\",\"conditions\":[{\"id\":\"da8ce97e-70bf-42a4-981c-e2133bcee24a\",\"operator\":{\"type\":\"string\",\"operation\":\"notEmpty\",\"singleValue\":true},\"leftValue\":\"={{ $json.output.details }}\",\"rightValue\":\"\"},{\"id\":\"d7052c40-9a43-452e-901c-6c8fd0122e5f\",\"operator\":{\"type\":\"string\",\"operation\":\"exists\",\"singleValue\":true},\"leftValue\":\"={{ $json.output.details }}\",\"rightValue\":\"\"}]},\"looseTypeValidation\":true},\"typeVersion\":2.2},{\"id\":\"15562980-019c-4d91-8f80-f85420efc8b0\",\"name\":\"HTTP Request2\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[1400,20],\"parameters\":{\"url\":\"=https://10.11.12.101:8006/api2/json{{ $json.output.url }}\",\"method\":\"=POST\",\"options\":{\"allowUnauthorizedCerts\":true},\"authentication\":\"genericCredentialType\",\"genericAuthType\":\"httpHeaderAuth\"},\"credentials\":{\"httpHeaderAuth\":{\"id\":\"pJcVQegRQ5mpraoQ\",\"name\":\"Proxmox\"}},\"typeVersion\":4.2},{\"id\":\"fd974862-4e06-4874-8477-c2c3b559669a\",\"name\":\"Merge\",\"type\":\"n8n-nodes-base.merge\",\"position\":[1820,-20],\"parameters\":{},\"typeVersion\":3},{\"id\":\"5c0d9814-3c9e-4ef4-8f12-9495785c1c06\",\"name\":\"HTTP Request3\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[1400,200],\"parameters\":{\"url\":\"=https://10.11.12.101:8006/api2/json{{ $json.output.url }}\",\"method\":\"DELETE\",\"options\":{\"allowUnauthorizedCerts\":true},\"authentication\":\"genericCredentialType\",\"genericAuthType\":\"httpHeaderAuth\"},\"credentials\":{\"httpHeaderAuth\":{\"id\":\"pJcVQegRQ5mpraoQ\",\"name\":\"Proxmox\"}},\"typeVersion\":4.2},{\"id\":\"097c10ac-577e-44ce-8aa2-446137973b18\",\"name\":\"Google Gemini Chat Model\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatGoogleGemini\",\"position\":[-420,40],\"parameters\":{\"options\":{},\"modelName\":\"models/gemini-2.0-flash-exp\"},\"credentials\":{\"googlePalmApi\":{\"id\":\"pKFvSpPWSRFpnBoB\",\"name\":\"Google Gemini(PaLM) Api account\"}},\"typeVersion\":1},{\"id\":\"b26ce08e-9eeb-4fbe-8283-7197d2595021\",\"name\":\"AI Agent1\",\"type\":\"@n8n/n8n-nodes-langchain.agent\",\"position\":[1860,-520],\"parameters\":{\"text\":\"=You are a are a Proxmox Information Output Expert who will provide the summary of the information generated about proxmox. Here is the information about proxmox : from url{{ $('AI Agent').item.json.output.properties.url.pattern }} {{ $json.combinedField }}\",\"agent\":\"conversationalAgent\",\"options\":{},\"promptType\":\"define\"},\"typeVersion\":1.7},{\"id\":\"942305fd-38b9-4636-8713-35a43fb5879f\",\"name\":\"If1\",\"type\":\"n8n-nodes-base.if\",\"position\":[1080,120],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"loose\"},\"combinator\":\"or\",\"conditions\":[{\"id\":\"da8ce97e-70bf-42a4-981c-e2133bcee24a\",\"operator\":{\"type\":\"string\",\"operation\":\"empty\",\"singleValue\":true},\"leftValue\":\"={{ $json.output.details }}\",\"rightValue\":\"\"},{\"id\":\"d7052c40-9a43-452e-901c-6c8fd0122e5f\",\"operator\":{\"type\":\"string\",\"operation\":\"notExists\",\"singleValue\":true},\"leftValue\":\"={{ $json.output.details }}\",\"rightValue\":\"\"}]},\"looseTypeValidation\":true},\"typeVersion\":2.2},{\"id\":\"09bfbbf3-72aa-472f-8e91-2552798263a2\",\"name\":\"HTTP Request4\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[1400,380],\"parameters\":{\"url\":\"=https://10.11.12.101:8006/api2/json{{ $json.output.url }}\",\"method\":\"DELETE\",\"options\":{\"allowUnauthorizedCerts\":true},\"authentication\":\"genericCredentialType\",\"genericAuthType\":\"httpHeaderAuth\"},\"credentials\":{\"httpHeaderAuth\":{\"id\":\"pJcVQegRQ5mpraoQ\",\"name\":\"Proxmox\"}},\"typeVersion\":4.2},{\"id\":\"18e68174-872a-4bd9-b54f-b7ab97db1b0b\",\"name\":\"Merge1\",\"type\":\"n8n-nodes-base.merge\",\"position\":[1860,260],\"parameters\":{},\"typeVersion\":3},{\"id\":\"1492e53e-66b5-485b-b7e5-a42b76ebccb6\",\"name\":\"AI Agent\",\"type\":\"@n8n/n8n-nodes-langchain.agent\",\"position\":[-260,-300],\"parameters\":{\"text\":\"=You are a Proxmox AI Agent expert designed to generate API commands based on user input. \\nThis is Proxmox which will help you to get the details of existing Proxmox installations, ensure to append to existing url : https://10.11.12.101:8006/api2/ to get response from existing proxmox \\n\\nMy prommox nodes are named as psb1, psb2 and psb3\\npsb1 : https://10.11.12.101:8006/api2/\\npsb2 : https://10.11.12.102:8006/api2/\\npsb3 : https://10.11.12.102:8006/api2/\\n\\nYour objectives are:\\n\\n### **1. Understand User Intent**\\n- Parse user requests related to Proxmox operations.\\n- Accurately interpret intent to generate valid Proxmox API commands.\\n\\n### **2. Refer to tools**\\n- **Proxmox API Documentation**\\n= ** Proxmox API Wiki**\\n- **Proxmox**\\n- Ensure every generated command meets the API's specifications, including required fields.\\n\\n### **3. Structure Responses**\\nEvery response must include:\\n- `response_type`: The HTTP method (e.g., POST, GET, DELETE).\\n- `url`: The API endpoint, complete with placeholders (e.g., `/nodes/{node}/qemu/{vmid}`).\\n- `details`: The payload for the request. Exclude optional fields if not explicitly defined by the user to allow default handling by Proxmox.\\n\\n### **4. Validate Inputs**\\n- **Mandatory Fields**:\\n  - Validate user input for required parameters.\\n  - If missing fields are detected, respond with:\\n    {\\n      \\\"message\\\": \\\"Missing required parameters: [list of missing parameters].\\\"\\n    }\\n\\n- **Optional Fields**:\\n  - Omit fields not provided by the user to leverage Proxmox's defaults.\\n\\n### **5. Default Behavior**\\n- If the user omits the `node`, default to `psb1`.\\n- Automatically generate the next available VM ID (`vmid`) by querying Proxmox for the highest existing ID.\\n\\n### **6. Rules for Outputs**\\n- Always respond in strict JSON format:\\n  - Start with `{` and end with `}`.\\n  - Avoid additional information or comments.\\n  - Do not include sensitive data such as passwords, fingerprints, or keys.\\n- If input is unrelated to Proxmox, respond with:\\n\\n  {\\n    \\\"response_type\\\": \\\"Invalid\\\"\\n  }\\n\\n### **7. Examples**\\n\\n1. Create a VM\\nInput: \\\"Create a VM with ID 201, 2 cores, 4GB RAM, and 32GB disk on node1 using virtio network and SCSI storage.\\\"\\nOutput:\\n{\\n  \\\"response_type\\\": \\\"POST\\\",\\n  \\\"url\\\": \\\"/nodes/node1/qemu\\\",\\n  \\\"details\\\": {\\n    \\\"vmid\\\": 201,\\n    \\\"cores\\\": 2,\\n    \\\"memory\\\": 1024,\\n    \\\"sockets\\\": 1\\\"\\n  }\\n}\\n\\n2. Delete a VM\\nInput: \\\"Delete VM 105 on psb1.\\\"\\nOutput:\\n{\\n  \\\"response_type\\\": \\\"DELETE\\\",\\n  \\\"url\\\": \\\"/nodes/psb1/qemu/105\\\"\\n}\\n\\n3. Start a VM\\nInput: \\\"Start VM 202 on psb1.\\\"\\nOutput:\\n{\\n  \\\"response_type\\\": \\\"POST\\\",\\n  \\\"url\\\": \\\"/nodes/psb1/qemu/202/status/start\\\"\\n}\\n\\n4. Stop a VM\\nInput: \\\"Stop VM 203 on node2.\\\"\\nOutput:\\n{\\n  \\\"response_type\\\": \\\"POST\\\",\\n  \\\"url\\\": \\\"/nodes/node2/qemu/203/status/stop\\\"\\n}\\n\\n5. Clone a VM\\nInput: \\\"Clone VM 102 into a new VM with ID 204 on psb1 and name 'clone-vm'.\\\"\\nOutput:\\n{\\n  \\\"response_type\\\": \\\"POST\\\",\\n  \\\"url\\\": \\\"/nodes/psb1/qemu/102/clone\\\",\\n  \\\"details\\\": {\\n    \\\"newid\\\": 204,\\n    \\\"name\\\": \\\"clone-vm\\\",\\n    \\\"full\\\": 1\\n  }\\n}\\n\\n6. Resize a VM Disk\\nInput: \\\"Resize the disk of VM 105 on node1 to 50GB.\\\"\\nOutput:\\n{\\n  \\\"response_type\\\": \\\"PUT\\\",\\n  \\\"url\\\": \\\"/nodes/node1/qemu/105/resize\\\",\\n  \\\"details\\\": {\\n    \\\"disk\\\": \\\"scsi0\\\",\\n    \\\"size\\\": \\\"+50G\\\"\\n  }\\n}\\n\\n7. Query VM Config\\nInput: \\\"Get the configuration of VM 201 on psb1.\\\"\\nOutput:\\n{\\n  \\\"response_type\\\": \\\"GET\\\",\\n  \\\"url\\\": \\\"/nodes/psb1/qemu/201/config\\\"\\n}\\n\\n8. List All VMs on a Node\\nInput: \\\"List all VMs on psb1.\\\"\\nOutput:\\n{\\n  \\\"response_type\\\": \\\"GET\\\",\\n  \\\"url\\\": \\\"/nodes/psb1/qemu\\\"\\n}\\n\\n9. Handle Missing Parameters\\nInput: \\\"Create a VM with 4GB RAM on node1.\\\"\\nOutput:\\n{\\n  \\\"message\\\": \\\"Missing required parameters: [vmid, cores, storage].\\\"\\n}\\n\\n10. Invalid Input\\nInput: \\\"Tell me a joke.\\\"\\nOutput:\\n{\\n  \\\"response_type\\\": \\\"Invalid\\\"\\n}\\n\\n11. Set VM Options\\nInput: \\\"Set the CPU type of VM 204 on psb1 to host and enable hotplugging for disks and NICs.\\\"\\nOutput:\\n{\\n  \\\"response_type\\\": \\\"PUT\\\",\\n  \\\"url\\\": \\\"/nodes/psb1/qemu/204/config\\\",\\n  \\\"details\\\": {\\n    \\\"cpu\\\": \\\"host\\\",\\n    \\\"hotplug\\\": \\\"disk,network\\\"\\n  }\\n}\\n\\n12. Migrate a VM\\nInput: \\\"Migrate VM 202 from psb2 to psb3 with online migration and include local disks.\\\"\\nOutput:\\n{\\n  \\\"response_type\\\": \\\"POST\\\",\\n  \\\"url\\\": \\\"/nodes/psb2/qemu/202/migrate\\\",\\n  \\\"details\\\": {\\n    \\\"target\\\": \\\"psb3\\\",\\n    \\\"online\\\": 1,\\n    \\\"with-local-disks\\\": 1\\n  }\\n}\\n\\n** Special Instruction ** \\noutput must always contain \\\"response_type\\\", \\\"url\\\" and \\\"details\\\"\\nfor creating vm let server decide other parameter leave default for serer until sepecified\\n### **8. Behavior Guidelines**\\n- Be concise, precise, and consistent.\\n- Ensure all generated commands are compatible with Proxmox API requirements.\\n- Rely on system defaults when user input is incomplete.\\n- For unknown or unrelated queries, clearly indicate invalid input.\\n\\n\\nUser Prompt \\nHere is request from user : {{ $json.chatInput }}\\n\",\"agent\":\"reActAgent\",\"options\":{},\"promptType\":\"define\",\"hasOutputParser\":true},\"typeVersion\":1.7},{\"id\":\"9253d036-0f76-4470-bf61-2bf9db014b02\",\"name\":\"Switch\",\"type\":\"n8n-nodes-base.switch\",\"position\":[540,-300],\"parameters\":{\"rules\":{\"values\":[{\"outputKey\":\"GET\",\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"operator\":{\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"={{ $json.output.response_type }}\",\"rightValue\":\"GET\"}]},\"renameOutput\":true},{\"outputKey\":\"POST\",\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"e3edd683-b884-4c88-b1ea-d3640141b054\",\"operator\":{\"name\":\"filter.operator.equals\",\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"={{ $json.output.response_type }}\",\"rightValue\":\"POST\"}]},\"renameOutput\":true},{\"outputKey\":\"Update\",\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"a9c59c0d-001c-4d95-992e-bff2af54eb4a\",\"operator\":{\"name\":\"filter.operator.equals\",\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"={{ $json.output.response_type }}\",\"rightValue\":\"PUT\"}]},\"renameOutput\":true},{\"outputKey\":\"OPTIONS\",\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"70bf8cc2-0a43-431c-97c7-a8b4eadb5bd9\",\"operator\":{\"name\":\"filter.operator.equals\",\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"={{ $json.output.response_type }}\",\"rightValue\":\"OPTIONS\"}]},\"renameOutput\":true},{\"outputKey\":\"DELETE\",\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"0e43b05b-7f45-40a3-b8aa-180dd8155b08\",\"operator\":{\"name\":\"filter.operator.equals\",\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"={{ $json.output.response_type }}\",\"rightValue\":\"DELETE\"}]},\"renameOutput\":true},{\"outputKey\":\"INVALID\",\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"bd03a24c-a233-4302-a576-1bfe0060c367\",\"operator\":{\"name\":\"filter.operator.equals\",\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"={{ $json.output.response_type }}\",\"rightValue\":\"Invalid\"}]},\"renameOutput\":true}]},\"options\":{}},\"typeVersion\":3.2},{\"id\":\"c410a832-dafc-479a-93d6-b96ae4f6d3fb\",\"name\":\"Sticky Note6\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-720,-680],\"parameters\":{\"color\":7,\"width\":261.5261328042567,\"height\":1262.1316376259997,\"content\":\"## Trigger\\nYou can use any trigger as input, a chat, telegram, email etc\\n\\nYou can think of any input, even it could be from your cloud platform, your own Web Applicaiton, etc. \\n\\nPossibilities are limitless.\\n\\nChat is shown just as example.\"},\"typeVersion\":1},{\"id\":\"a4962963-ce33-4398-ad9d-75df3a85c64f\",\"name\":\"Sticky Note7\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-1240,-680],\"parameters\":{\"color\":4,\"width\":475.27306699862953,\"height\":515.4734551650874,\"content\":\"## Developed by Amjid Ali\\n\\nThank you for using this workflow template. It has taken me countless hours of hard work, research, and dedication to develop, and I sincerely hope it adds value to your work.\\n\\nIf you find this template helpful, I kindly ask you to consider supporting my efforts. Your support will help me continue improving and creating more valuable resources.\\n\\nYou can contribute via PayPal here:\\n\\nhttp://paypal.me/pmptraining\\n\\nAdditionally, when sharing this template, I would greatly appreciate it if you include my original information to ensure proper credit is given.\\n\\nThank you for your generosity and support!\\nEmail : amjid@amjidali.com\\nhttps://linkedin.com/in/amjidali\\nhttps://syncbricks.com\\nhttps://youtube.com/@syncbricks\"},\"typeVersion\":1}],\"pinData\":{},\"connections\":{\"If\":{\"main\":[[{\"node\":\"HTTP Request1\",\"type\":\"main\",\"index\":0}],[{\"node\":\"HTTP Request2\",\"type\":\"main\",\"index\":0}]]},\"If1\":{\"main\":[[{\"node\":\"HTTP Request3\",\"type\":\"main\",\"index\":0}],[{\"node\":\"HTTP Request4\",\"type\":\"main\",\"index\":0}]]},\"Merge\":{\"main\":[[{\"node\":\"Structgure Response from Proxmox\",\"type\":\"main\",\"index\":0}]]},\"Merge1\":{\"main\":[[{\"node\":\"Structgure Response from Proxmox\",\"type\":\"main\",\"index\":0}]]},\"Switch\":{\"main\":[[{\"node\":\"HTTP Request\",\"type\":\"main\",\"index\":0}],[{\"node\":\"If\",\"type\":\"main\",\"index\":0}],null,null,[{\"node\":\"If1\",\"type\":\"main\",\"index\":0}]]},\"Proxmox\":{\"ai_tool\":[[{\"node\":\"AI Agent\",\"type\":\"ai_tool\",\"index\":0}]]},\"AI Agent\":{\"main\":[[{\"node\":\"Switch\",\"type\":\"main\",\"index\":0}]]},\"HTTP Request\":{\"main\":[[{\"node\":\"Structure Response\",\"type\":\"main\",\"index\":0}]]},\"HTTP Request1\":{\"main\":[[{\"node\":\"Merge\",\"type\":\"main\",\"index\":0}]]},\"HTTP Request2\":{\"main\":[[{\"node\":\"Merge\",\"type\":\"main\",\"index\":1}]]},\"HTTP Request3\":{\"main\":[[{\"node\":\"Merge1\",\"type\":\"main\",\"index\":0}]]},\"HTTP Request4\":{\"main\":[[{\"node\":\"Merge1\",\"type\":\"main\",\"index\":1}]]},\"Proxmox API Wiki\":{\"ai_tool\":[[{\"node\":\"AI Agent\",\"type\":\"ai_tool\",\"index\":0}]]},\"Structure Response\":{\"main\":[[{\"node\":\"AI Agent1\",\"type\":\"main\",\"index\":0}]]},\"Google Gemini Chat Model\":{\"ai_languageModel\":[[{\"node\":\"AI Agent\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"Structured Output Parser\":{\"ai_outputParser\":[[{\"node\":\"Auto-fixing Output Parser\",\"type\":\"ai_outputParser\",\"index\":0}]]},\"Auto-fixing Output Parser\":{\"ai_outputParser\":[[{\"node\":\"AI Agent\",\"type\":\"ai_outputParser\",\"index\":0}]]},\"Google Gemini Chat Model1\":{\"ai_languageModel\":[[{\"node\":\"Auto-fixing Output Parser\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"Google Gemini Chat Model2\":{\"ai_languageModel\":[[{\"node\":\"AI Agent1\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"Proxmox API Documentation\":{\"ai_tool\":[[{\"node\":\"AI Agent\",\"type\":\"ai_tool\",\"index\":0}]]},\"When chat message received\":{\"main\":[[{\"node\":\"AI Agent\",\"type\":\"main\",\"index\":0}]]},\"Structgure Response from Proxmox\":{\"main\":[[{\"node\":\"Format Response and Hide Sensitive Data\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "## Proxmox AI Agent with n8n and Generative AI Integration\n\nThis template automates IT operations on a **Proxmox Virtual Environment (VE)** using an AI-powered conversational agent built with **n8n**. By integrating Proxmox APIs and generative AI models (e.g., Google Gemini), the workflow converts natural language commands into API calls, enabling seamless management of your Proxmox nodes, VMs, and clusters.  \n**Buy My Book:**  \n[Mastering n8n on Amazon](https://www.amazon.com/dp/B0F23GYCFW)\n\n**Full Courses & Tutorials:**  \n<http://lms.syncbricks.com>\n\n[Watch Video on Youtube](https://www.youtube.com/watch?v=XykvpCj9wDA)\n\n### How It Works\n\n  1. **Trigger Mechanism**\n\n     * The workflow can be triggered through multiple channels like chat (Telegram, email, or n8n's built-in chat).\n     * Interact with the AI agent conversationally.\n  2. **AI-Powered Parsing**\n\n     * A connected AI model (Google Gemini or other compatible models like OpenAI or Claude) processes your natural language input to determine the required Proxmox API operation.\n  3. **API Call Generation**\n\n     * The AI parses the input and generates structured JSON output, which includes: \n       * **response_type** : The HTTP method (GET, POST, PUT, DELETE).\n       * **url** : The Proxmox API endpoint to execute.\n       * **details** : Any required payload parameters for the API call.\n  4. **Proxmox API Execution**\n\n     * The structured output is used to make HTTP requests to the Proxmox VE API. The workflow supports various operations, such as: \n       * Retrieving cluster or node information.\n       * Creating, deleting, starting, or stopping VMs.\n       * Migrating VMs between nodes.\n       * Updating or resizing VM configurations.\n  5. **Response Formatting**\n\n     * The workflow formats API responses into a user-friendly summary. For example: \n       * Success messages for operations (e.g., _\"VM started successfully\"_).\n       * Error messages with missing parameter details.\n  6. **Extensibility**\n\n     * You can enhance the workflow by connecting additional triggers, external services, or AI models. It supports: \n       * Telegram/Slack integration for real-time notifications.\n       * Backup and restore workflows.\n       * Cloud monitoring extensions.\n\n\n\n* * *\n\n### Key Features\n\n  * **Multi-Channel Input** : Use chat, email, or custom triggers to communicate with the AI agent.\n  * **Low-Code Automation** : Easily customize the workflow to suit your Proxmox environment.\n  * **Generative AI Integration** : Supports advanced AI models for precise command interpretation.\n  * **Proxmox API Compatibility** : Fully adheres to Proxmox API specifications for secure and reliable operations.\n  * **Error Handling** : Detects and informs you of missing or invalid parameters in your requests.\n\n\n\n* * *\n\n### Example Use Cases\n\n  1. **Create a Virtual Machine**\n\n     * Input: _\"Create a VM with 4 cores, 8GB RAM, and 50GB disk on psb1.\"_\n     * Action: Sends a POST request to Proxmox to create the VM with specified configurations.\n  2. **Start a VM**\n\n     * Input: _\"Start VM 105 on node psb2.\"_\n     * Action: Executes a POST request to start the specified VM.\n  3. **Retrieve Node Details**\n\n     * Input: _\"Show the memory usage of psb3.\"_\n     * Action: Sends a GET request and returns the node's resource utilization.\n  4. **Migrate a VM**\n\n     * Input: _\"Migrate VM 202 from psb1 to psb3.\"_\n     * Action: Executes a POST request to move the VM with optional online migration.\n\n\n\n* * *\n\n### Pre-Requisites\n\n  1. **Proxmox API Configuration**\n\n     * Enable the Proxmox API and generate API keys in the Proxmox Data Center.\n     * Use the `Authorization` header with the format:  \n`PVEAPIToken=&lt;user&gt;@&lt;realm&gt;!&lt;token-id&gt;=&lt;token-value&gt;`\n  2. **n8n Setup**\n\n     * Add Proxmox API credentials in n8n using Header Auth.\n     * Connect a generative AI model (e.g., Google Gemini) via the relevant credential type.\n  3. **Access the Workflow**\n\n     * Import this template into your n8n instance.\n     * Replace placeholder credentials with your Proxmox and AI service details.\n\n\n\n* * *\n\n### Additional Notes\n\n  * This template is designed for **Proxmox 7.x and above**.\n  * For advanced features like backup, VM snapshots, and detailed node monitoring, you can extend this workflow.\n  * Always test with a **non-production Proxmox environment** before deploying in live systems.\n\n\n\n### [Start with n8n](https://www.udemy.com/course/mastering-n8n-ai-agents-api-automation-webhooks-no-code/?referralCode=0309FD70BE2D72630C09)\n\n### [Learn n8n with Amjid ](https://www.udemy.com/course/mastering-n8n-ai-agents-api-automation-webhooks-no-code/?referralCode=0309FD70BE2D72630C09)\n\n### [Get n8n Book](https://lms.syncbricks.com/books/n8n/)\n\n### [What is Proxmox](https://www.udemy.com/course/proxmox-virtualization-environment-complete-training/?referralCode=8E7EAFD11C2389F89C11)\n",
  "crawled_at": "2025-05-26T01:53:04.137033",
  "readme_zh": "## 基于n8n与生成式AI的Proxmox智能代理解决方案\n\n本模板通过**n8n**构建的AI对话代理，实现了对**Proxmox虚拟环境(VE)**的自动化运维。通过整合Proxmox API与生成式AI模型（如Google Gemini），该工作流能将自然语言指令转化为API调用，轻松管理Proxmox节点、虚拟机及集群。  \n**购买我的著作：**  \n[《精通n8n》亚马逊购书链接](https://www.amazon.com/dp/B0F23GYCFW)\n\n**完整课程与教程：**  \n<http://lms.syncbricks.com>\n\n[YouTube视频教程](https://www.youtube.com/watch?v=XykvpCj9wDA)\n\n### 工作原理\n\n  1. **触发机制**\n\n     * 支持通过聊天（Telegram/邮件/n8n内置聊天）等多渠道触发工作流\n     * 以对话形式与AI代理交互\n  2. **AI智能解析**\n\n     * 连接的AI模型（Google Gemini/OpenAI/Claude等）将自然语言输入解析为Proxmox API操作指令\n  3. **API调用生成**\n\n     * AI输出结构化JSON数据包含： \n       * **response_type** : HTTP方法（GET/POST/PUT/DELETE）\n       * **url** : 目标Proxmox API端点\n       * **details** : API调用所需参数\n  4. **Proxmox API执行**\n\n     * 根据结构化数据发起Proxmox VE API请求，支持： \n       * 查询集群/节点信息\n       * 创建/删除/启动/停止虚拟机\n       * 跨节点迁移虚拟机\n       * 更新虚拟机配置\n  5. **响应格式化**\n\n     * 将API响应转换为友好提示，例如： \n       * 操作成功提示（如\"虚拟机已成功启动\"）\n       * 参数缺失的错误说明\n  6. **扩展能力**\n\n     * 可连接更多触发器、外部服务或AI模型，支持： \n       * Telegram/Slack实时通知\n       * 备份恢复工作流\n       * 云监控扩展",
  "title_zh": "Proxmox AI 代理与 n8n 及生成式 AI 集成",
  "publish_date_zh": "上次更新于一个月前",
  "workflow_json_zh": "{\n  \"meta\": {\n    \"instanceId\": \"n8n.syncbricks.com\"\n  },\n  \"nodes\": [\n    {\n      \"id\": \"e6d85380-7cfa-4c6e-9b0f-d390ad0cbc67\",\n      \"name\": \"HTTP Request1\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1400,\n        -180\n      ],\n      \"parameters\": {\n        \"url\": \"=https://proxmox.syncbricks.com/api2/json{{ $json.output.url }}\",\n        \"method\": \"=POST\",\n        \"options\": {\n          \"allowUnauthorizedCerts\": true\n        },\n        \"jsonBody\": \"={{ $json.output.details }}\",\n        \"sendBody\": true,\n        \"specifyBody\": \"json\",\n        \"authentication\": \"genericCredentialType\",\n        \"genericAuthType\": \"httpHeaderAuth\"\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": {\n          \"id\": \"pJcVQegRQ5mpraoQ\",\n          \"name\": \"Proxmox\"\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"9b497de8-0f01-40b1-8f8e-28fad1f758c4\",\n      \"name\": \"Proxmox API Documentation\",\n      \"type\": \"@n8n/n8n-nodes-langchain.toolHttpRequest\",\n      \"position\": [\n        -300,\n        40\n      ],\n      \"parameters\": {\n        \"url\": \"https://pve.proxmox.com/pve-docs/api-viewer/index.html\",\n        \"toolDescription\": \"This is Proxmox API Documentation ensure to read the details from here\"\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"e7ac54a9-37be-44b5-b58e-8b631892367e\",\n      \"name\": \"Auto-fixing Output Parser\",\n      \"type\": \"@n8n/n8n-nodes-langchain.outputParserAutofixing\",\n      \"position\": [\n        40,\n        60\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"prompt\": \"Instructions:\\n--------------\\n{instructions}\\n--------------\\nCompletion:\\n--------------\\n{completion}\\n--------------\\n\\nAbove, the Completion did not satisfy the constraints given in the Instructions.\\nError:\\n--------------\\n{error}\\n--------------\\n\\nPlease try again. Please only respond with an answer that satisfies the constraints laid out in the Instructions:\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"5d8c8c6d-d5de-4c87-9950-46f1f5757314\",\n      \"name\": \"Google Gemini Chat Model1\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatGoogleGemini\",\n      \"position\": [\n        -40,\n        360\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"modelName\": \"models/gemini-2.0-flash-exp\"\n      },\n      \"credentials\": {\n        \"googlePalmApi\": {\n          \"id\": \"pKFvSpPWSRFpnBoB\",\n          \"name\": \"Google Gemini(PaLM) Api account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"8565ac2f-0cdd-4e7f-a1e9-6f273869e068\",\n      \"name\": \"Structured Output Parser\",\n      \"type\": \"@n8n/n8n-nodes-langchain.outputParserStructured\",\n      \"position\": [\n        180,\n        360\n      ],\n      \"parameters\": {\n        \"jsonSchemaExample\": \"{\\n  \\\"response_type\\\": \\\"POST\\\",\\n  \\\"url\\\": \\\"/nodes/psb1/qemu\\\",\\n  \\\"details\\\": {\\n    \\\"vmid\\\": 105,\\n    \\\"cores\\\": 4,\\n    \\\"memory\\\": 8192,\\n    \\\"net0\\\": \\\"virtio,bridge=vmbr0\\\",\\n    \\\"disk0\\\": \\\"local:10,format=qcow2\\\",\\n    \\\"sockets\\\": 1,\\n    \\\"ostype\\\": \\\"l26\\\"\\n  },\\n  \\\"message\\\": \\\"The VM with ID 105 has been successfully configured to be created on node psb1.\\\"\\n}\"\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"80b1ef4d-b4c7-40b4-969f-f53d0068cac7\",\n      \"name\": \"Proxmox\",\n      \"type\": \"@n8n/n8n-nodes-langchain.toolHttpRequest\",\n      \"position\": [\n        -80,\n        40\n      ],\n      \"parameters\": {\n        \"url\": \"https://10.11.12.101:8006/api2/json/cluster/status\",\n        \"authentication\": \"genericCredentialType\",\n        \"genericAuthType\": \"httpHeaderAuth\",\n        \"toolDescription\": \"=This is Proxmox which will help you to get the details of existing Proxmox installations, ensure to append to existing url : https://10.11.12.101:8006/api2/ to get response from existing proxmox \\n\\nMy prommox nodes are named as psb1, psb2 and psb3\\npsb1 : https://10.11.12.101:8006/api2/\\npsb2 : https://10.11.12.102:8006/api2/\\npsb3 : https://10.11.12.102:8006/api2/\"\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": {\n          \"id\": \"pJcVQegRQ5mpraoQ\",\n          \"name\": \"Proxmox\"\n        }\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"09444fa1-3b5e-4411-b70c-cf777db971bb\",\n      \"name\": \"HTTP Request\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1080,\n        -320\n      ],\n      \"parameters\": {\n        \"url\": \"=https://10.11.12.101:8006/api2/json{{ $json.output.properties.url.pattern }}\",\n        \"method\": \"=GET\",\n        \"options\": {\n          \"allowUnauthorizedCerts\": true\n        },\n        \"authentication\": \"genericCredentialType\",\n        \"genericAuthType\": \"httpHeaderAuth\"\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": {\n          \"id\": \"pJcVQegRQ5mpraoQ\",\n          \"name\": \"Proxmox\"\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"d148b395-01e9-48a6-b98c-cb515fa3446d\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        900,\n        -660\n      ],\n      \"parameters\": {\n        \"width\": 736.2768017274677,\n        \"height\": 1221.0199187779397,\n        \"content\": \"## Proxmox的API密钥  \\n**创建凭证** 确保在Proxmox数据中心创建API密钥类型的凭证，然后再创建凭证。  \\n**将凭证添加到n8n** 点击凭证，添加新凭证，并选择Header Auth（头部认证）。  \\n**在Header Auth中，将使用以下信息**  \\n名称：Authorization  \\n值：PVEAPIToken=<用户>@<域>!<令牌ID>=<令牌值>  \\n\\n假设我的令牌ID是n8n，密钥是1234，那么值将如下所示  \\n\\n值：PVEAPIToken=root@pam!n8n=1234\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"d356bb83-c567-44b6-ba23-3e330abf835e\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -1240,\n        -120\n      ],\n      \"parameters\": {\n        \"color\": 6,\n        \"width\": 492.990678850593,\n        \"height\": 702.0895748933872,\n        \"content\": \"## 触发器\\n您可以使用任何触发器作为输入，如聊天、电报、电子邮件等。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"d2829180-9c14-4437-9ae1-1bb822d8d925\",\n      \"name\": \"Google Gemini Chat Model2\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatGoogleGemini\",\n      \"position\": [\n        1880,\n        -320\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"modelName\": \"models/gemini-2.0-flash-exp\"\n      },\n      \"credentials\": {\n        \"googlePalmApi\": {\n          \"id\": \"pKFvSpPWSRFpnBoB\",\n          \"name\": \"Google Gemini(PaLM) Api account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"0e8a617b-8b95-4bed-8bff-876266fc4151\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -440,\n        -690\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 789.7678716732242,\n        \"height\": 1260.380358008782,\n        \"content\": \"## Porxmox 自定义AI代理  \\n该代理运用了所提供的智能资源，包括Proxmox API维基、Proxmox集群链接以及Proxmox API文档。  \\n\\n与之连接的AI模型为Gemini，您也可以通过Ollama、OpenAI、Claude等平台接入任意AI模型。  \\n\\n输出解析器用于确保生成固定结构的输出，以便适用于API URL。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"4cbf39ae-7b81-44b1-858c-10c21af9d558\",\n      \"name\": \"When chat message received\",\n      \"type\": \"@n8n/n8n-nodes-langchain.chatTrigger\",\n      \"position\": [\n        -680,\n        -300\n      ],\n      \"webhookId\": \"63de8c82-04fc-4126-8bbf-b0eb62794d74\",\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"f91a1d2d-ce33-4469-b4da-e9ef1dd070e0\",\n      \"name\": \"Telegram Trigger\",\n      \"type\": \"n8n-nodes-base.telegramTrigger\",\n      \"position\": [\n        -1080,\n        320\n      ],\n      \"webhookId\": \"c86fa48b-ae66-46f2-b438-f156225a5c74\",\n      \"parameters\": {\n        \"updates\": [\n          \"message\"\n        ],\n        \"additionalFields\": {}\n      },\n      \"credentials\": {\n        \"telegramApi\": {\n          \"id\": \"uwpC7pPg6WJYh8Ad\",\n          \"name\": \"Telegram account\"\n        }\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"aec3c1f4-058e-4321-99dd-772dcc04e206\",\n      \"name\": \"Gmail Trigger\",\n      \"type\": \"n8n-nodes-base.gmailTrigger\",\n      \"position\": [\n        -1080,\n        -20\n      ],\n      \"parameters\": {\n        \"filters\": {},\n        \"pollTimes\": {\n          \"item\": [\n            {\n              \"mode\": \"everyMinute\"\n            }\n          ]\n        }\n      },\n      \"credentials\": {\n        \"gmailOAuth2\": {\n          \"id\": \"pccYQxL0liStKP66\",\n          \"name\": \"Gmail account INFO\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"1afea4f3-adea-42ac-bc48-fa863b26e5a0\",\n      \"name\": \"Webhook\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"position\": [\n        -1080,\n        160\n      ],\n      \"webhookId\": \"459d848d-72ed-490f-bc48-e5dc60242896\",\n      \"parameters\": {\n        \"path\": \"459d848d-72ed-490f-bc48-e5dc60242896\",\n        \"options\": {},\n        \"authentication\": \"headerAuth\"\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": {\n          \"id\": \"pJcVQegRQ5mpraoQ\",\n          \"name\": \"Proxmox\"\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"de4af096-7b23-41ba-b390-8c52f58b09c6\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        380,\n        -680\n      ],\n      \"parameters\": {\n        \"color\": 3,\n        \"width\": 486.2369951168387,\n        \"height\": 1245.2937736920358,\n        \"content\": \"## HTTP方法  \\nGET\\t获取资源\\t查询虚拟机状态、列出节点、获取日志。  \\n\\nPOST\\t创建或触发操作\\t启动/停止虚拟机、创建备份。  \\n\\nPUT\\t更新/替换整个资源配置\\t修改虚拟机配置。  \\n\\nDELETE\\t删除资源\\t移除虚拟机、删除用户、清除文件。  \\n\\nOPTIONS\\t获取端点支持的请求方法\\t查询API可用操作。  \\n\\nPATCH\\t应用部分更新\\t修改虚拟机设置中的特定字段。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"2c4ef73b-281f-4a24-81a2-cae72e446955\",\n      \"name\": \"Proxmox API Wiki\",\n      \"type\": \"@n8n/n8n-nodes-langchain.toolHttpRequest\",\n      \"position\": [\n        -180,\n        40\n      ],\n      \"parameters\": {\n        \"url\": \"https://pve.proxmox.com/wiki/Proxmox_VE_API\",\n        \"toolDescription\": \"Get the proxmox API details from Proxmox Wiki\"\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"f11ac59e-6031-4435-a417-200cdd559bd2\",\n      \"name\": \"Structure Response\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        1480,\n        -520\n      ],\n      \"parameters\": {\n        \"jsCode\": \"// Access all items from the incoming node\\nconst items = $input.all();\\n\\n// Combine all fields of each item into a single string\\nconst combinedData = items.map(item => {\\n    const inputData = item.json; // Access the JSON data of the current item\\n    \\n    // Combine all fields into a single string\\n    const combinedField = Object.entries(inputData)\\n        .map(([key, value]) => {\\n            // Handle objects or arrays by converting them to JSON strings\\n            const formattedValue = typeof value === 'object' ? JSON.stringify(value) : value;\\n            return `${key}: ${formattedValue}`;\\n        })\\n        .join(' | '); // Combine key-value pairs as a single string with a delimiter\\n\\n    // Return the new structure\\n    return {\\n        json: {\\n            combinedField // Only keep the combined field for table representation\\n        },\\n    };\\n});\\n\\n// Output the combined data\\nreturn combinedData;\\n\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"7752281b-226b-4c19-bcd4-33804ea2abe7\",\n      \"name\": \"Sticky Note4\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1680,\n        -660\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 895.2529822972874,\n        \"height\": 517.5348441931358,\n        \"content\": \"## Porxmox 自定义AI助手（获取版）\\n该代理程序可将Proxmox的响应转换为易于理解的解释说明\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"fd65db23-0d36-42b1-a012-2ddcdd2ca914\",\n      \"name\": \"Sticky Note5\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1680,\n        -122.8638048233953\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 900.3261837471116,\n        \"height\": 712.4591709572671,\n        \"content\": \"## 在服务器上创建或触发了某个操作。\\n响应将返回至此\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"60234199-d28c-4fb8-8ad7-1d24693599ed\",\n      \"name\": \"Structgure Response from Proxmox\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        2120,\n        140\n      ],\n      \"parameters\": {\n        \"jsCode\": \"// Access the 'data' field from the input\\nlet rawData = $json[\\\"data\\\"];\\n\\n// Split the string by colon (:) to extract parts\\nlet parts = rawData.split(\\\":\\\");\\n\\n// Create an object with the extracted parts\\nreturn {\\n  upid: parts[0],       // UPID\\n  node: parts[1],       // Node (e.g., psb1)\\n  processID: parts[2],  // Process ID\\n  taskID: parts[3],     // Task ID\\n  timestamp: parts[4],  // Timestamp\\n  operation: parts[5],  // Operation (e.g., aptupdate)\\n  user: parts[7]        // User (e.g., root@pam!n8n)\\n};\\n\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"57ab92f3-6f65-459d-8f41-8a391108457b\",\n      \"name\": \"Format Response and Hide Sensitive Data\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        2380,\n        140\n      ],\n      \"parameters\": {\n        \"jsCode\": \"// Extract required fields from the input\\nlet node = $json[\\\"node\\\"] || \\\"unknown node\\\";\\nlet operation = $json[\\\"operation\\\"] || \\\"unknown operation\\\";\\nlet user = $json[\\\"user\\\"] || \\\"unknown user\\\";\\nlet rawTimestamp = $json[\\\"timestamp\\\"] || \\\"unknown timestamp\\\";\\n\\n// Convert timestamp to a readable format\\nlet readableTimestamp = \\\"Invalid timestamp\\\";\\ntry {\\n  let timestamp = parseInt(rawTimestamp, 16) * 1000; // Convert hex to milliseconds\\n  readableTimestamp = new Date(timestamp).toLocaleString();\\n} catch (error) {\\n  readableTimestamp = \\\"Unable to parse timestamp\\\";\\n}\\n\\n// Construct the simple message\\nlet message = `The operation '${operation}' was executed successfully on node '${node}' by user '${user}' at '${readableTimestamp}'.`;\\n\\nreturn {\\n  message: message\\n};\\n\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"aca671cb-4bb7-4f9e-847a-34d89151d2e2\",\n      \"name\": \"If\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        1060,\n        -80\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"loose\"\n          },\n          \"combinator\": \"or\",\n          \"conditions\": [\n            {\n              \"id\": \"da8ce97e-70bf-42a4-981c-e2133bcee24a\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"notEmpty\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $json.output.details }}\",\n              \"rightValue\": \"\"\n            },\n            {\n              \"id\": \"d7052c40-9a43-452e-901c-6c8fd0122e5f\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"exists\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $json.output.details }}\",\n              \"rightValue\": \"\"\n            }\n          ]\n        },\n        \"looseTypeValidation\": true\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"15562980-019c-4d91-8f80-f85420efc8b0\",\n      \"name\": \"HTTP Request2\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1400,\n        20\n      ],\n      \"parameters\": {\n        \"url\": \"=https://10.11.12.101:8006/api2/json{{ $json.output.url }}\",\n        \"method\": \"=POST\",\n        \"options\": {\n          \"allowUnauthorizedCerts\": true\n        },\n        \"authentication\": \"genericCredentialType\",\n        \"genericAuthType\": \"httpHeaderAuth\"\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": {\n          \"id\": \"pJcVQegRQ5mpraoQ\",\n          \"name\": \"Proxmox\"\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"fd974862-4e06-4874-8477-c2c3b559669a\",\n      \"name\": \"Merge\",\n      \"type\": \"n8n-nodes-base.merge\",\n      \"position\": [\n        1820,\n        -20\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"5c0d9814-3c9e-4ef4-8f12-9495785c1c06\",\n      \"name\": \"HTTP Request3\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1400,\n        200\n      ],\n      \"parameters\": {\n        \"url\": \"=https://10.11.12.101:8006/api2/json{{ $json.output.url }}\",\n        \"method\": \"DELETE\",\n        \"options\": {\n          \"allowUnauthorizedCerts\": true\n        },\n        \"authentication\": \"genericCredentialType\",\n        \"genericAuthType\": \"httpHeaderAuth\"\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": {\n          \"id\": \"pJcVQegRQ5mpraoQ\",\n          \"name\": \"Proxmox\"\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"097c10ac-577e-44ce-8aa2-446137973b18\",\n      \"name\": \"Google Gemini Chat Model\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatGoogleGemini\",\n      \"position\": [\n        -420,\n        40\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"modelName\": \"models/gemini-2.0-flash-exp\"\n      },\n      \"credentials\": {\n        \"googlePalmApi\": {\n          \"id\": \"pKFvSpPWSRFpnBoB\",\n          \"name\": \"Google Gemini(PaLM) Api account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"b26ce08e-9eeb-4fbe-8283-7197d2595021\",\n      \"name\": \"AI Agent1\",\n      \"type\": \"@n8n/n8n-nodes-langchain.agent\",\n      \"position\": [\n        1860,\n        -520\n      ],\n      \"parameters\": {\n        \"text\": \"=You are a are a Proxmox Information Output Expert who will provide the summary of the information generated about proxmox. Here is the information about proxmox : from url{{ $('AI Agent').item.json.output.properties.url.pattern }} {{ $json.combinedField }}\",\n        \"agent\": \"conversationalAgent\",\n        \"options\": {},\n        \"promptType\": \"define\"\n      },\n      \"typeVersion\": 1.7\n    },\n    {\n      \"id\": \"942305fd-38b9-4636-8713-35a43fb5879f\",\n      \"name\": \"If1\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        1080,\n        120\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"loose\"\n          },\n          \"combinator\": \"or\",\n          \"conditions\": [\n            {\n              \"id\": \"da8ce97e-70bf-42a4-981c-e2133bcee24a\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"empty\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $json.output.details }}\",\n              \"rightValue\": \"\"\n            },\n            {\n              \"id\": \"d7052c40-9a43-452e-901c-6c8fd0122e5f\",\n              \"operator\": {\n                \"type\": \"string\",\n                \"operation\": \"notExists\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{ $json.output.details }}\",\n              \"rightValue\": \"\"\n            }\n          ]\n        },\n        \"looseTypeValidation\": true\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"09bfbbf3-72aa-472f-8e91-2552798263a2\",\n      \"name\": \"HTTP Request4\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1400,\n        380\n      ],\n      \"parameters\": {\n        \"url\": \"=https://10.11.12.101:8006/api2/json{{ $json.output.url }}\",\n        \"method\": \"DELETE\",\n        \"options\": {\n          \"allowUnauthorizedCerts\": true\n        },\n        \"authentication\": \"genericCredentialType\",\n        \"genericAuthType\": \"httpHeaderAuth\"\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": {\n          \"id\": \"pJcVQegRQ5mpraoQ\",\n          \"name\": \"Proxmox\"\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"18e68174-872a-4bd9-b54f-b7ab97db1b0b\",\n      \"name\": \"Merge1\",\n      \"type\": \"n8n-nodes-base.merge\",\n      \"position\": [\n        1860,\n        260\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"1492e53e-66b5-485b-b7e5-a42b76ebccb6\",\n      \"name\": \"AI Agent\",\n      \"type\": \"@n8n/n8n-nodes-langchain.agent\",\n      \"position\": [\n        -260,\n        -300\n      ],\n      \"parameters\": {\n        \"text\": \"=You are a Proxmox AI Agent expert designed to generate API commands based on user input. \\nThis is Proxmox which will help you to get the details of existing Proxmox installations, ensure to append to existing url : https://10.11.12.101:8006/api2/ to get response from existing proxmox \\n\\nMy prommox nodes are named as psb1, psb2 and psb3\\npsb1 : https://10.11.12.101:8006/api2/\\npsb2 : https://10.11.12.102:8006/api2/\\npsb3 : https://10.11.12.102:8006/api2/\\n\\nYour objectives are:\\n\\n### **1. Understand User Intent**\\n- Parse user requests related to Proxmox operations.\\n- Accurately interpret intent to generate valid Proxmox API commands.\\n\\n### **2. Refer to tools**\\n- **Proxmox API Documentation**\\n= ** Proxmox API Wiki**\\n- **Proxmox**\\n- Ensure every generated command meets the API's specifications, including required fields.\\n\\n### **3. Structure Responses**\\nEvery response must include:\\n- `response_type`: The HTTP method (e.g., POST, GET, DELETE).\\n- `url`: The API endpoint, complete with placeholders (e.g., `/nodes/{node}/qemu/{vmid}`).\\n- `details`: The payload for the request. Exclude optional fields if not explicitly defined by the user to allow default handling by Proxmox.\\n\\n### **4. Validate Inputs**\\n- **Mandatory Fields**:\\n  - Validate user input for required parameters.\\n  - If missing fields are detected, respond with:\\n    {\\n      \\\"message\\\": \\\"Missing required parameters: [list of missing parameters].\\\"\\n    }\\n\\n- **Optional Fields**:\\n  - Omit fields not provided by the user to leverage Proxmox's defaults.\\n\\n### **5. Default Behavior**\\n- If the user omits the `node`, default to `psb1`.\\n- Automatically generate the next available VM ID (`vmid`) by querying Proxmox for the highest existing ID.\\n\\n### **6. Rules for Outputs**\\n- Always respond in strict JSON format:\\n  - Start with `{` and end with `}`.\\n  - Avoid additional information or comments.\\n  - Do not include sensitive data such as passwords, fingerprints, or keys.\\n- If input is unrelated to Proxmox, respond with:\\n\\n  {\\n    \\\"response_type\\\": \\\"Invalid\\\"\\n  }\\n\\n### **7. Examples**\\n\\n1. Create a VM\\nInput: \\\"Create a VM with ID 201, 2 cores, 4GB RAM, and 32GB disk on node1 using virtio network and SCSI storage.\\\"\\nOutput:\\n{\\n  \\\"response_type\\\": \\\"POST\\\",\\n  \\\"url\\\": \\\"/nodes/node1/qemu\\\",\\n  \\\"details\\\": {\\n    \\\"vmid\\\": 201,\\n    \\\"cores\\\": 2,\\n    \\\"memory\\\": 1024,\\n    \\\"sockets\\\": 1\\\"\\n  }\\n}\\n\\n2. Delete a VM\\nInput: \\\"Delete VM 105 on psb1.\\\"\\nOutput:\\n{\\n  \\\"response_type\\\": \\\"DELETE\\\",\\n  \\\"url\\\": \\\"/nodes/psb1/qemu/105\\\"\\n}\\n\\n3. Start a VM\\nInput: \\\"Start VM 202 on psb1.\\\"\\nOutput:\\n{\\n  \\\"response_type\\\": \\\"POST\\\",\\n  \\\"url\\\": \\\"/nodes/psb1/qemu/202/status/start\\\"\\n}\\n\\n4. Stop a VM\\nInput: \\\"Stop VM 203 on node2.\\\"\\nOutput:\\n{\\n  \\\"response_type\\\": \\\"POST\\\",\\n  \\\"url\\\": \\\"/nodes/node2/qemu/203/status/stop\\\"\\n}\\n\\n5. Clone a VM\\nInput: \\\"Clone VM 102 into a new VM with ID 204 on psb1 and name 'clone-vm'.\\\"\\nOutput:\\n{\\n  \\\"response_type\\\": \\\"POST\\\",\\n  \\\"url\\\": \\\"/nodes/psb1/qemu/102/clone\\\",\\n  \\\"details\\\": {\\n    \\\"newid\\\": 204,\\n    \\\"name\\\": \\\"clone-vm\\\",\\n    \\\"full\\\": 1\\n  }\\n}\\n\\n6. Resize a VM Disk\\nInput: \\\"Resize the disk of VM 105 on node1 to 50GB.\\\"\\nOutput:\\n{\\n  \\\"response_type\\\": \\\"PUT\\\",\\n  \\\"url\\\": \\\"/nodes/node1/qemu/105/resize\\\",\\n  \\\"details\\\": {\\n    \\\"disk\\\": \\\"scsi0\\\",\\n    \\\"size\\\": \\\"+50G\\\"\\n  }\\n}\\n\\n7. Query VM Config\\nInput: \\\"Get the configuration of VM 201 on psb1.\\\"\\nOutput:\\n{\\n  \\\"response_type\\\": \\\"GET\\\",\\n  \\\"url\\\": \\\"/nodes/psb1/qemu/201/config\\\"\\n}\\n\\n8. List All VMs on a Node\\nInput: \\\"List all VMs on psb1.\\\"\\nOutput:\\n{\\n  \\\"response_type\\\": \\\"GET\\\",\\n  \\\"url\\\": \\\"/nodes/psb1/qemu\\\"\\n}\\n\\n9. Handle Missing Parameters\\nInput: \\\"Create a VM with 4GB RAM on node1.\\\"\\nOutput:\\n{\\n  \\\"message\\\": \\\"Missing required parameters: [vmid, cores, storage].\\\"\\n}\\n\\n10. Invalid Input\\nInput: \\\"Tell me a joke.\\\"\\nOutput:\\n{\\n  \\\"response_type\\\": \\\"Invalid\\\"\\n}\\n\\n11. Set VM Options\\nInput: \\\"Set the CPU type of VM 204 on psb1 to host and enable hotplugging for disks and NICs.\\\"\\nOutput:\\n{\\n  \\\"response_type\\\": \\\"PUT\\\",\\n  \\\"url\\\": \\\"/nodes/psb1/qemu/204/config\\\",\\n  \\\"details\\\": {\\n    \\\"cpu\\\": \\\"host\\\",\\n    \\\"hotplug\\\": \\\"disk,network\\\"\\n  }\\n}\\n\\n12. Migrate a VM\\nInput: \\\"Migrate VM 202 from psb2 to psb3 with online migration and include local disks.\\\"\\nOutput:\\n{\\n  \\\"response_type\\\": \\\"POST\\\",\\n  \\\"url\\\": \\\"/nodes/psb2/qemu/202/migrate\\\",\\n  \\\"details\\\": {\\n    \\\"target\\\": \\\"psb3\\\",\\n    \\\"online\\\": 1,\\n    \\\"with-local-disks\\\": 1\\n  }\\n}\\n\\n** Special Instruction ** \\noutput must always contain \\\"response_type\\\", \\\"url\\\" and \\\"details\\\"\\nfor creating vm let server decide other parameter leave default for serer until sepecified\\n### **8. Behavior Guidelines**\\n- Be concise, precise, and consistent.\\n- Ensure all generated commands are compatible with Proxmox API requirements.\\n- Rely on system defaults when user input is incomplete.\\n- For unknown or unrelated queries, clearly indicate invalid input.\\n\\n\\nUser Prompt \\nHere is request from user : {{ $json.chatInput }}\\n\",\n        \"agent\": \"reActAgent\",\n        \"options\": {},\n        \"promptType\": \"define\",\n        \"hasOutputParser\": true\n      },\n      \"typeVersion\": 1.7\n    },\n    {\n      \"id\": \"9253d036-0f76-4470-bf61-2bf9db014b02\",\n      \"name\": \"Switch\",\n      \"type\": \"n8n-nodes-base.switch\",\n      \"position\": [\n        540,\n        -300\n      ],\n      \"parameters\": {\n        \"rules\": {\n          \"values\": [\n            {\n              \"outputKey\": \"GET\",\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 2,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"operator\": {\n                      \"type\": \"string\",\n                      \"operation\": \"equals\"\n                    },\n                    \"leftValue\": \"={{ $json.output.response_type }}\",\n                    \"rightValue\": \"GET\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            },\n            {\n              \"outputKey\": \"POST\",\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 2,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"e3edd683-b884-4c88-b1ea-d3640141b054\",\n                    \"operator\": {\n                      \"name\": \"filter.operator.equals\",\n                      \"type\": \"string\",\n                      \"operation\": \"equals\"\n                    },\n                    \"leftValue\": \"={{ $json.output.response_type }}\",\n                    \"rightValue\": \"POST\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            },\n            {\n              \"outputKey\": \"Update\",\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 2,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"a9c59c0d-001c-4d95-992e-bff2af54eb4a\",\n                    \"operator\": {\n                      \"name\": \"filter.operator.equals\",\n                      \"type\": \"string\",\n                      \"operation\": \"equals\"\n                    },\n                    \"leftValue\": \"={{ $json.output.response_type }}\",\n                    \"rightValue\": \"PUT\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            },\n            {\n              \"outputKey\": \"OPTIONS\",\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 2,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"70bf8cc2-0a43-431c-97c7-a8b4eadb5bd9\",\n                    \"operator\": {\n                      \"name\": \"filter.operator.equals\",\n                      \"type\": \"string\",\n                      \"operation\": \"equals\"\n                    },\n                    \"leftValue\": \"={{ $json.output.response_type }}\",\n                    \"rightValue\": \"OPTIONS\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            },\n            {\n              \"outputKey\": \"DELETE\",\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 2,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"0e43b05b-7f45-40a3-b8aa-180dd8155b08\",\n                    \"operator\": {\n                      \"name\": \"filter.operator.equals\",\n                      \"type\": \"string\",\n                      \"operation\": \"equals\"\n                    },\n                    \"leftValue\": \"={{ $json.output.response_type }}\",\n                    \"rightValue\": \"DELETE\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            },\n            {\n              \"outputKey\": \"INVALID\",\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 2,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"bd03a24c-a233-4302-a576-1bfe0060c367\",\n                    \"operator\": {\n                      \"name\": \"filter.operator.equals\",\n                      \"type\": \"string\",\n                      \"operation\": \"equals\"\n                    },\n                    \"leftValue\": \"={{ $json.output.response_type }}\",\n                    \"rightValue\": \"Invalid\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            }\n          ]\n        },\n        \"options\": {}\n      },\n      \"typeVersion\": 3.2\n    },\n    {\n      \"id\": \"c410a832-dafc-479a-93d6-b96ae4f6d3fb\",\n      \"name\": \"Sticky Note6\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -720,\n        -680\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 261.5261328042567,\n        \"height\": 1262.1316376259997,\n        \"content\": \"## 触发机制\\n您可以使用任何形式的触发器作为输入源，无论是聊天消息、Telegram通知、电子邮件还是其他形式\\n\\n输入源的可能性是无限的——它可能来自您的云平台、自主开发的Web应用程序，或是任何其他数字交互渠道\\n\\n此处展示的聊天界面仅为示例之一\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"a4962963-ce33-4398-ad9d-75df3a85c64f\",\n      \"name\": \"Sticky Note7\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -1240,\n        -680\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 475.27306699862953,\n        \"height\": 515.4734551650874,\n        \"content\": \"## 由Amjid Ali开发\\n\\n感谢您使用此工作流模板。它凝聚了我无数小时的辛勤付出、深入研究与全心投入，衷心希望能为您的创作增添价值。\\n\\n若本模板对您有所帮助，诚邀您支持我的持续创作。您的每一份支持都将助力我不断优化并产出更多优质资源。\\n\\n您可通过PayPal进行赞助：\\nhttp://paypal.me/pmptraining\\n\\n另请注意，分享本模板时，若能保留原始作者信息以标明出处，我将不胜感激。\\n\\n衷心感谢您的慷慨支持！\\n联系邮箱：amjid@amjidali.com\\n领英主页：https://linkedin.com/in/amjidali\\n官方网站：https://syncbricks.com\\n视频频道：https://youtube.com/@syncbricks\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"If\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"HTTP Request1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"HTTP Request2\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"If1\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"HTTP Request3\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"HTTP Request4\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Merge\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Structgure Response from Proxmox\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Merge1\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Structgure Response from Proxmox\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Switch\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"HTTP Request\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"If\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        null,\n        null,\n        [\n          {\n            \"node\": \"If1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Proxmox\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"AI Agent\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Switch\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"HTTP Request\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Structure Response\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"HTTP Request1\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"HTTP Request2\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge\",\n            \"type\": \"main\",\n            \"index\": 1\n          }\n        ]\n      ]\n    },\n    \"HTTP Request3\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"HTTP Request4\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge1\",\n            \"type\": \"main\",\n            \"index\": 1\n          }\n        ]\n      ]\n    },\n    \"Proxmox API Wiki\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Structure Response\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"AI Agent1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Google Gemini Chat Model\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Structured Output Parser\": {\n      \"ai_outputParser\": [\n        [\n          {\n            \"node\": \"Auto-fixing Output Parser\",\n            \"type\": \"ai_outputParser\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Auto-fixing Output Parser\": {\n      \"ai_outputParser\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"ai_outputParser\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Google Gemini Chat Model1\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"Auto-fixing Output Parser\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Google Gemini Chat Model2\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"AI Agent1\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Proxmox API Documentation\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When chat message received\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Structgure Response from Proxmox\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Format Response and Hide Sensitive Data\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}