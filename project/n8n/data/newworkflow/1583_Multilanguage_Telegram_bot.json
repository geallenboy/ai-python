{
  "url": "https://n8n.io/workflows/1583-multilanguage-telegram-bot/",
  "title": "Multilanguage Telegram bot",
  "author": "Eduard",
  "publish_date": "Last update 10 months ago",
  "publish_date_absolute": "2024-07-25",
  "categories": [
    {
      "name": "Building Blocks"
    }
  ],
  "workflow_json": "{\"nodes\":[{\"name\":\"chatID\",\"type\":\"n8n-nodes-base.function\",\"notes\":\"username and language\",\"position\":[-100,680],\"parameters\":{\"functionCode\":\"// Telegram uses the following language codes: https://en.wikipedia.org/wiki/IETF_language_tag\\r\\n\\r\\nvar data = $node[\\\"Telegram Trigger\\\"].json;\\r\\nconst botlang = [\\\"ru\\\", \\\"en\\\"]; // Update this after adding new language in the dictionary\\r\\n\\r\\n// Assign the default language if the translation is not yet ready\\r\\nvar curlang = botlang.includes(data.message.from.language_code) ? data.message.from.language_code : \\\"en\\\";\\r\\n\\r\\nreturn [{json: {chatID  : data.message.chat.id,\\r\\n                lang    : curlang\\r\\n}}];\"},\"notesInFlow\":true,\"typeVersion\":1},{\"name\":\"Merge\",\"type\":\"n8n-nodes-base.merge\",\"notes\":\"Wait for dictionary to load\",\"position\":[480,460],\"parameters\":{\"mode\":\"passThrough\"},\"notesInFlow\":true,\"typeVersion\":1},{\"name\":\"Switch\",\"type\":\"n8n-nodes-base.switch\",\"notes\":\"check bot commands\",\"position\":[620,460],\"parameters\":{\"rules\":{\"rules\":[{\"value2\":\"/start\"},{\"output\":1,\"value2\":\"/help\"}]},\"value1\":\"={{$node[\\\"Merge\\\"].json[\\\"message\\\"][\\\"text\\\"]}}\",\"dataType\":\"string\",\"fallbackOutput\":3},\"notesInFlow\":true,\"typeVersion\":1},{\"name\":\"IF\",\"type\":\"n8n-nodes-base.if\",\"position\":[940,300],\"parameters\":{\"conditions\":{\"boolean\":[{\"value1\":\"={{$json[\\\"empty\\\"]}}\",\"value2\":\"={{true}}\"}]}},\"typeVersion\":1,\"alwaysOutputData\":false},{\"name\":\"msg_greet\",\"type\":\"n8n-nodes-base.telegram\",\"position\":[1260,220],\"parameters\":{\"text\":\"={{$evaluateExpression($node[\\\"botmessages\\\"].json[\\\"greeting\\\"][$node[\\\"chatID\\\"].json[\\\"lang\\\"]])}}\",\"chatId\":\"={{$node[\\\"Telegram Trigger\\\"].json[\\\"message\\\"][\\\"chat\\\"][\\\"id\\\"]}}\",\"additionalFields\":{}},\"credentials\":{\"telegramApi\":{\"id\":\"12\",\"name\":\"n8n multilang bot\"}},\"notesInFlow\":true,\"typeVersion\":1},{\"name\":\"msg_welcomeback\",\"type\":\"n8n-nodes-base.telegram\",\"position\":[1260,380],\"parameters\":{\"text\":\"={{$evaluateExpression($node[\\\"botmessages\\\"].json[\\\"welcomeback\\\"][$node[\\\"chatID\\\"].json[\\\"lang\\\"]])}}\",\"chatId\":\"={{$node[\\\"Telegram Trigger\\\"].json[\\\"message\\\"][\\\"chat\\\"][\\\"id\\\"]}}\",\"additionalFields\":{}},\"credentials\":{\"telegramApi\":{\"id\":\"12\",\"name\":\"n8n multilang bot\"}},\"notesInFlow\":true,\"typeVersion\":1},{\"name\":\"msg_help\",\"type\":\"n8n-nodes-base.telegram\",\"position\":[1260,540],\"parameters\":{\"text\":\"={{$evaluateExpression($node[\\\"botmessages\\\"].json[\\\"help\\\"][$node[\\\"chatID\\\"].json[\\\"lang\\\"]])}}\",\"chatId\":\"={{$node[\\\"Telegram Trigger\\\"].json[\\\"message\\\"][\\\"chat\\\"][\\\"id\\\"]}}\",\"additionalFields\":{\"parse_mode\":\"Markdown\"}},\"credentials\":{\"telegramApi\":{\"id\":\"12\",\"name\":\"n8n multilang bot\"}},\"notesInFlow\":true,\"typeVersion\":1},{\"name\":\"msg_wrongcommand\",\"type\":\"n8n-nodes-base.telegram\",\"position\":[1260,700],\"parameters\":{\"text\":\"={{$evaluateExpression($node[\\\"botmessages\\\"].json[\\\"wrongcommand\\\"][$node[\\\"chatID\\\"].json[\\\"lang\\\"]])}}\",\"chatId\":\"={{$node[\\\"Telegram Trigger\\\"].json[\\\"message\\\"][\\\"chat\\\"][\\\"id\\\"]}}\",\"additionalFields\":{}},\"credentials\":{\"telegramApi\":{\"id\":\"12\",\"name\":\"n8n multilang bot\"}},\"notesInFlow\":true,\"typeVersion\":1},{\"name\":\"New user?\",\"type\":\"n8n-nodes-base.function\",\"position\":[780,300],\"parameters\":{\"functionCode\":\"return [{json: {empty: Object.keys($node[\\\"CheckUser\\\"].json).length == 0}}];\"},\"typeVersion\":1},{\"name\":\"CheckUser\",\"type\":\"n8n-nodes-base.nocoDb\",\"position\":[380,680],\"parameters\":{\"table\":\"TG_users\",\"options\":{\"where\":\"=(TG_account_ID,eq,{{$node[\\\"chatID\\\"].json[\\\"chatID\\\"]}})\"},\"operation\":\"getAll\",\"projectId\":\"n8n_multilang_bot_wzhb\"},\"credentials\":{\"nocoDb\":{\"id\":\"13\",\"name\":\"NocoDB n8n multilang bot\"}},\"notesInFlow\":true,\"typeVersion\":1,\"alwaysOutputData\":true},{\"name\":\"LoadDictionary\",\"type\":\"n8n-nodes-base.nocoDb\",\"position\":[60,680],\"parameters\":{\"table\":\"botmessages\",\"options\":{},\"operation\":\"getAll\",\"projectId\":\"n8n_multilang_bot_wzhb\",\"returnAll\":true},\"credentials\":{\"nocoDb\":{\"id\":\"13\",\"name\":\"NocoDB n8n multilang bot\"}},\"notesInFlow\":true,\"typeVersion\":1,\"alwaysOutputData\":true},{\"name\":\"botmessages\",\"type\":\"n8n-nodes-base.function\",\"position\":[220,680],\"parameters\":{\"functionCode\":\"\\nlet data = {};\\n\\nfor (item of items) {\\n  data[item.json.botmessage]=item.json;\\n}\\n\\nreturn data;\"},\"typeVersion\":1},{\"name\":\"Telegram Trigger\",\"type\":\"n8n-nodes-base.telegramTrigger\",\"position\":[240,460],\"webhookId\":\"21dac5fa-6e6b-43a0-b099-4f57537d2271\",\"parameters\":{\"updates\":[\"message\"],\"additionalFields\":{}},\"credentials\":{\"telegramApi\":{\"id\":\"12\",\"name\":\"n8n multilang bot\"}},\"typeVersion\":1},{\"name\":\"HTTP AddUser\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[1100,220],\"parameters\":{\"url\":\"https://database.digigin.eu/api/v1/db/data/noco/n8n_multilang_bot_wzhb/TG_users\",\"options\":{\"bodyContentType\":\"json\"},\"requestMethod\":\"POST\",\"authentication\":\"headerAuth\",\"bodyParametersUi\":{\"parameter\":[{\"name\":\"TG_account_ID\",\"value\":\"={{$node[\\\"chatID\\\"].json[\\\"chatID\\\"]}}\"},{\"name\":\"Last_language_used\",\"value\":\"={{$node[\\\"Telegram Trigger\\\"].json[\\\"message\\\"][\\\"from\\\"][\\\"language_code\\\"]}}\"}]}},\"credentials\":{\"httpHeaderAuth\":{\"id\":\"21\",\"name\":\"Header Auth NocoDB\"}},\"typeVersion\":1},{\"name\":\"HTTP UpdateUser\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[1100,380],\"parameters\":{\"url\":\"=https://database.digigin.eu/api/v1/db/data/noco/n8n_multilang_bot_wzhb/TG_users/{{$node[\\\"CheckUser\\\"].json[\\\"id\\\"]}}\",\"options\":{\"bodyContentType\":\"json\"},\"requestMethod\":\"PATCH\",\"authentication\":\"headerAuth\",\"bodyParametersUi\":{\"parameter\":[{\"name\":\"TG_account_ID\",\"value\":\"={{$node[\\\"chatID\\\"].json[\\\"chatID\\\"]}}\"},{\"name\":\"Last_language_used\",\"value\":\"={{$node[\\\"Telegram Trigger\\\"].json[\\\"message\\\"][\\\"from\\\"][\\\"language_code\\\"]}}\"}]}},\"credentials\":{\"httpHeaderAuth\":{\"id\":\"21\",\"name\":\"Header Auth NocoDB\"}},\"typeVersion\":1},{\"name\":\"AddUser\",\"type\":\"n8n-nodes-base.nocoDb\",\"disabled\":true,\"position\":[1460,220],\"parameters\":{\"table\":\"TG_users\",\"fieldsUi\":{\"fieldValues\":[{\"fieldName\":\"TG_account_ID\",\"fieldValue\":\"={{$node[\\\"chatID\\\"].json[\\\"chatID\\\"]}}\"},{\"fieldName\":\"Last_language_used\",\"fieldValue\":\"={{$node[\\\"Telegram Trigger\\\"].json[\\\"message\\\"][\\\"from\\\"][\\\"language_code\\\"]}}\"}]},\"operation\":\"create\",\"projectId\":\"n8n_multilang_bot_wzhb\"},\"credentials\":{\"nocoDb\":{\"id\":\"13\",\"name\":\"NocoDB n8n multilang bot\"}},\"notesInFlow\":true,\"typeVersion\":1},{\"name\":\"UpdateUser\",\"type\":\"n8n-nodes-base.nocoDb\",\"disabled\":true,\"position\":[1460,380],\"parameters\":{\"id\":\"={{$node[\\\"CheckUser\\\"].json[\\\"id\\\"]}}\",\"table\":\"TG_users\",\"fieldsUi\":{\"fieldValues\":[{\"fieldName\":\"TG_account_ID\",\"fieldValue\":\"={{$node[\\\"chatID\\\"].json[\\\"chatID\\\"]}}\"},{\"fieldName\":\"Last_language_used\",\"fieldValue\":\"={{$node[\\\"Telegram Trigger\\\"].json[\\\"message\\\"][\\\"from\\\"][\\\"language_code\\\"]}}\"}]},\"operation\":\"update\",\"projectId\":\"n8n_multilang_bot_wzhb\"},\"credentials\":{\"nocoDb\":{\"id\":\"13\",\"name\":\"NocoDB n8n multilang bot\"}},\"notesInFlow\":true,\"typeVersion\":1},{\"name\":\"Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1440,80],\"parameters\":{\"width\":440,\"height\":460,\"content\":\"## What's this?\\nDue to some breaking API changes in NocoDB some of its node options are not working at the moment (MAY 2022). These two nodes were replaced by HTTP request nodes. Functionality is still the same.\"},\"typeVersion\":1}],\"connections\":{\"IF\":{\"main\":[[{\"node\":\"HTTP AddUser\",\"type\":\"main\",\"index\":0}],[{\"node\":\"HTTP UpdateUser\",\"type\":\"main\",\"index\":0}]]},\"Merge\":{\"main\":[[{\"node\":\"Switch\",\"type\":\"main\",\"index\":0}]]},\"Switch\":{\"main\":[[{\"node\":\"New user?\",\"type\":\"main\",\"index\":0}],[{\"node\":\"msg_help\",\"type\":\"main\",\"index\":0}],null,[{\"node\":\"msg_wrongcommand\",\"type\":\"main\",\"index\":0}]]},\"chatID\":{\"main\":[[{\"node\":\"LoadDictionary\",\"type\":\"main\",\"index\":0}]]},\"CheckUser\":{\"main\":[[{\"node\":\"Merge\",\"type\":\"main\",\"index\":1}]]},\"New user?\":{\"main\":[[{\"node\":\"IF\",\"type\":\"main\",\"index\":0}]]},\"botmessages\":{\"main\":[[{\"node\":\"CheckUser\",\"type\":\"main\",\"index\":0}]]},\"HTTP AddUser\":{\"main\":[[{\"node\":\"msg_greet\",\"type\":\"main\",\"index\":0}]]},\"LoadDictionary\":{\"main\":[[{\"node\":\"botmessages\",\"type\":\"main\",\"index\":0}]]},\"HTTP UpdateUser\":{\"main\":[[{\"node\":\"msg_welcomeback\",\"type\":\"main\",\"index\":0}]]},\"Telegram Trigger\":{\"main\":[[{\"node\":\"chatID\",\"type\":\"main\",\"index\":0},{\"node\":\"Merge\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "An example workflow for a multilanguage Telegram bot. It allows adding many new languages to the bot without editing the workflow.\n\n**Important note!**  \nDue to some breaking API changes in NocoDB some of its node options are not working at the moment (MAY 2022). These two nodes were replaced by HTTP request nodes. Functionality is still the same.\n\n![n8nmultilanghighlight2.png](https://f000.backblazeb2.com/file/n8n-website-images/40cb91df4866429895f3cf91a7878c1b.png)\n",
  "crawled_at": "2025-05-25T19:54:45.329238",
  "readme_zh": "一个多语言Telegram机器人的工作流程示例。它允许在不修改工作流程的情况下为机器人添加多种新语言。\n\n**重要提示！**  \n由于NocoDB中一些破坏性的API变更，目前（2022年5月）其部分节点选项暂不可用。图中两个节点已被HTTP请求节点替代，但功能保持不变。\n\n![n8nmultilanghighlight2.png](https://f000.backblazeb2.com/file/n8n-website-images/40cb91df4866429895f3cf91a7878c1b.png)",
  "title_zh": "多语言Telegram机器人",
  "publish_date_zh": "最后更新于10个月前",
  "workflow_json_zh": "{\n  \"nodes\": [\n    {\n      \"name\": \"chatID\",\n      \"type\": \"n8n-nodes-base.function\",\n      \"notes\": \"username and language\",\n      \"position\": [\n        -100,\n        680\n      ],\n      \"parameters\": {\n        \"functionCode\": \"// Telegram uses the following language codes: https://en.wikipedia.org/wiki/IETF_language_tag\\r\\n\\r\\nvar data = $node[\\\"Telegram Trigger\\\"].json;\\r\\nconst botlang = [\\\"ru\\\", \\\"en\\\"]; // Update this after adding new language in the dictionary\\r\\n\\r\\n// Assign the default language if the translation is not yet ready\\r\\nvar curlang = botlang.includes(data.message.from.language_code) ? data.message.from.language_code : \\\"en\\\";\\r\\n\\r\\nreturn [{json: {chatID  : data.message.chat.id,\\r\\n                lang    : curlang\\r\\n}}];\"\n      },\n      \"notesInFlow\": true,\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Merge\",\n      \"type\": \"n8n-nodes-base.merge\",\n      \"notes\": \"Wait for dictionary to load\",\n      \"position\": [\n        480,\n        460\n      ],\n      \"parameters\": {\n        \"mode\": \"passThrough\"\n      },\n      \"notesInFlow\": true,\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Switch\",\n      \"type\": \"n8n-nodes-base.switch\",\n      \"notes\": \"check bot commands\",\n      \"position\": [\n        620,\n        460\n      ],\n      \"parameters\": {\n        \"rules\": {\n          \"rules\": [\n            {\n              \"value2\": \"/start\"\n            },\n            {\n              \"output\": 1,\n              \"value2\": \"/help\"\n            }\n          ]\n        },\n        \"value1\": \"={{$node[\\\"Merge\\\"].json[\\\"message\\\"][\\\"text\\\"]}}\",\n        \"dataType\": \"string\",\n        \"fallbackOutput\": 3\n      },\n      \"notesInFlow\": true,\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"IF\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        940,\n        300\n      ],\n      \"parameters\": {\n        \"conditions\": {\n          \"boolean\": [\n            {\n              \"value1\": \"={{$json[\\\"empty\\\"]}}\",\n              \"value2\": \"={{true}}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1,\n      \"alwaysOutputData\": false\n    },\n    {\n      \"name\": \"msg_greet\",\n      \"type\": \"n8n-nodes-base.telegram\",\n      \"position\": [\n        1260,\n        220\n      ],\n      \"parameters\": {\n        \"text\": \"={{$evaluateExpression($node[\\\"botmessages\\\"].json[\\\"greeting\\\"][$node[\\\"chatID\\\"].json[\\\"lang\\\"]])}}\",\n        \"chatId\": \"={{$node[\\\"Telegram Trigger\\\"].json[\\\"message\\\"][\\\"chat\\\"][\\\"id\\\"]}}\",\n        \"additionalFields\": {}\n      },\n      \"credentials\": {\n        \"telegramApi\": {\n          \"id\": \"12\",\n          \"name\": \"n8n multilang bot\"\n        }\n      },\n      \"notesInFlow\": true,\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"msg_welcomeback\",\n      \"type\": \"n8n-nodes-base.telegram\",\n      \"position\": [\n        1260,\n        380\n      ],\n      \"parameters\": {\n        \"text\": \"={{$evaluateExpression($node[\\\"botmessages\\\"].json[\\\"welcomeback\\\"][$node[\\\"chatID\\\"].json[\\\"lang\\\"]])}}\",\n        \"chatId\": \"={{$node[\\\"Telegram Trigger\\\"].json[\\\"message\\\"][\\\"chat\\\"][\\\"id\\\"]}}\",\n        \"additionalFields\": {}\n      },\n      \"credentials\": {\n        \"telegramApi\": {\n          \"id\": \"12\",\n          \"name\": \"n8n multilang bot\"\n        }\n      },\n      \"notesInFlow\": true,\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"msg_help\",\n      \"type\": \"n8n-nodes-base.telegram\",\n      \"position\": [\n        1260,\n        540\n      ],\n      \"parameters\": {\n        \"text\": \"={{$evaluateExpression($node[\\\"botmessages\\\"].json[\\\"help\\\"][$node[\\\"chatID\\\"].json[\\\"lang\\\"]])}}\",\n        \"chatId\": \"={{$node[\\\"Telegram Trigger\\\"].json[\\\"message\\\"][\\\"chat\\\"][\\\"id\\\"]}}\",\n        \"additionalFields\": {\n          \"parse_mode\": \"Markdown\"\n        }\n      },\n      \"credentials\": {\n        \"telegramApi\": {\n          \"id\": \"12\",\n          \"name\": \"n8n multilang bot\"\n        }\n      },\n      \"notesInFlow\": true,\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"msg_wrongcommand\",\n      \"type\": \"n8n-nodes-base.telegram\",\n      \"position\": [\n        1260,\n        700\n      ],\n      \"parameters\": {\n        \"text\": \"={{$evaluateExpression($node[\\\"botmessages\\\"].json[\\\"wrongcommand\\\"][$node[\\\"chatID\\\"].json[\\\"lang\\\"]])}}\",\n        \"chatId\": \"={{$node[\\\"Telegram Trigger\\\"].json[\\\"message\\\"][\\\"chat\\\"][\\\"id\\\"]}}\",\n        \"additionalFields\": {}\n      },\n      \"credentials\": {\n        \"telegramApi\": {\n          \"id\": \"12\",\n          \"name\": \"n8n multilang bot\"\n        }\n      },\n      \"notesInFlow\": true,\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"New user?\",\n      \"type\": \"n8n-nodes-base.function\",\n      \"position\": [\n        780,\n        300\n      ],\n      \"parameters\": {\n        \"functionCode\": \"return [{json: {empty: Object.keys($node[\\\"CheckUser\\\"].json).length == 0}}];\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"CheckUser\",\n      \"type\": \"n8n-nodes-base.nocoDb\",\n      \"position\": [\n        380,\n        680\n      ],\n      \"parameters\": {\n        \"table\": \"TG_users\",\n        \"options\": {\n          \"where\": \"=(TG_account_ID,eq,{{$node[\\\"chatID\\\"].json[\\\"chatID\\\"]}})\"\n        },\n        \"operation\": \"getAll\",\n        \"projectId\": \"n8n_multilang_bot_wzhb\"\n      },\n      \"credentials\": {\n        \"nocoDb\": {\n          \"id\": \"13\",\n          \"name\": \"NocoDB n8n multilang bot\"\n        }\n      },\n      \"notesInFlow\": true,\n      \"typeVersion\": 1,\n      \"alwaysOutputData\": true\n    },\n    {\n      \"name\": \"LoadDictionary\",\n      \"type\": \"n8n-nodes-base.nocoDb\",\n      \"position\": [\n        60,\n        680\n      ],\n      \"parameters\": {\n        \"table\": \"botmessages\",\n        \"options\": {},\n        \"operation\": \"getAll\",\n        \"projectId\": \"n8n_multilang_bot_wzhb\",\n        \"returnAll\": true\n      },\n      \"credentials\": {\n        \"nocoDb\": {\n          \"id\": \"13\",\n          \"name\": \"NocoDB n8n multilang bot\"\n        }\n      },\n      \"notesInFlow\": true,\n      \"typeVersion\": 1,\n      \"alwaysOutputData\": true\n    },\n    {\n      \"name\": \"botmessages\",\n      \"type\": \"n8n-nodes-base.function\",\n      \"position\": [\n        220,\n        680\n      ],\n      \"parameters\": {\n        \"functionCode\": \"\\nlet data = {};\\n\\nfor (item of items) {\\n  data[item.json.botmessage]=item.json;\\n}\\n\\nreturn data;\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Telegram Trigger\",\n      \"type\": \"n8n-nodes-base.telegramTrigger\",\n      \"position\": [\n        240,\n        460\n      ],\n      \"webhookId\": \"21dac5fa-6e6b-43a0-b099-4f57537d2271\",\n      \"parameters\": {\n        \"updates\": [\n          \"message\"\n        ],\n        \"additionalFields\": {}\n      },\n      \"credentials\": {\n        \"telegramApi\": {\n          \"id\": \"12\",\n          \"name\": \"n8n multilang bot\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"HTTP AddUser\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1100,\n        220\n      ],\n      \"parameters\": {\n        \"url\": \"https://database.digigin.eu/api/v1/db/data/noco/n8n_multilang_bot_wzhb/TG_users\",\n        \"options\": {\n          \"bodyContentType\": \"json\"\n        },\n        \"requestMethod\": \"POST\",\n        \"authentication\": \"headerAuth\",\n        \"bodyParametersUi\": {\n          \"parameter\": [\n            {\n              \"name\": \"TG_account_ID\",\n              \"value\": \"={{$node[\\\"chatID\\\"].json[\\\"chatID\\\"]}}\"\n            },\n            {\n              \"name\": \"Last_language_used\",\n              \"value\": \"={{$node[\\\"Telegram Trigger\\\"].json[\\\"message\\\"][\\\"from\\\"][\\\"language_code\\\"]}}\"\n            }\n          ]\n        }\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": {\n          \"id\": \"21\",\n          \"name\": \"Header Auth NocoDB\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"HTTP UpdateUser\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1100,\n        380\n      ],\n      \"parameters\": {\n        \"url\": \"=https://database.digigin.eu/api/v1/db/data/noco/n8n_multilang_bot_wzhb/TG_users/{{$node[\\\"CheckUser\\\"].json[\\\"id\\\"]}}\",\n        \"options\": {\n          \"bodyContentType\": \"json\"\n        },\n        \"requestMethod\": \"PATCH\",\n        \"authentication\": \"headerAuth\",\n        \"bodyParametersUi\": {\n          \"parameter\": [\n            {\n              \"name\": \"TG_account_ID\",\n              \"value\": \"={{$node[\\\"chatID\\\"].json[\\\"chatID\\\"]}}\"\n            },\n            {\n              \"name\": \"Last_language_used\",\n              \"value\": \"={{$node[\\\"Telegram Trigger\\\"].json[\\\"message\\\"][\\\"from\\\"][\\\"language_code\\\"]}}\"\n            }\n          ]\n        }\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": {\n          \"id\": \"21\",\n          \"name\": \"Header Auth NocoDB\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"AddUser\",\n      \"type\": \"n8n-nodes-base.nocoDb\",\n      \"disabled\": true,\n      \"position\": [\n        1460,\n        220\n      ],\n      \"parameters\": {\n        \"table\": \"TG_users\",\n        \"fieldsUi\": {\n          \"fieldValues\": [\n            {\n              \"fieldName\": \"TG_account_ID\",\n              \"fieldValue\": \"={{$node[\\\"chatID\\\"].json[\\\"chatID\\\"]}}\"\n            },\n            {\n              \"fieldName\": \"Last_language_used\",\n              \"fieldValue\": \"={{$node[\\\"Telegram Trigger\\\"].json[\\\"message\\\"][\\\"from\\\"][\\\"language_code\\\"]}}\"\n            }\n          ]\n        },\n        \"operation\": \"create\",\n        \"projectId\": \"n8n_multilang_bot_wzhb\"\n      },\n      \"credentials\": {\n        \"nocoDb\": {\n          \"id\": \"13\",\n          \"name\": \"NocoDB n8n multilang bot\"\n        }\n      },\n      \"notesInFlow\": true,\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"UpdateUser\",\n      \"type\": \"n8n-nodes-base.nocoDb\",\n      \"disabled\": true,\n      \"position\": [\n        1460,\n        380\n      ],\n      \"parameters\": {\n        \"id\": \"={{$node[\\\"CheckUser\\\"].json[\\\"id\\\"]}}\",\n        \"table\": \"TG_users\",\n        \"fieldsUi\": {\n          \"fieldValues\": [\n            {\n              \"fieldName\": \"TG_account_ID\",\n              \"fieldValue\": \"={{$node[\\\"chatID\\\"].json[\\\"chatID\\\"]}}\"\n            },\n            {\n              \"fieldName\": \"Last_language_used\",\n              \"fieldValue\": \"={{$node[\\\"Telegram Trigger\\\"].json[\\\"message\\\"][\\\"from\\\"][\\\"language_code\\\"]}}\"\n            }\n          ]\n        },\n        \"operation\": \"update\",\n        \"projectId\": \"n8n_multilang_bot_wzhb\"\n      },\n      \"credentials\": {\n        \"nocoDb\": {\n          \"id\": \"13\",\n          \"name\": \"NocoDB n8n multilang bot\"\n        }\n      },\n      \"notesInFlow\": true,\n      \"typeVersion\": 1\n    },\n    {\n      \"name\": \"Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1440,\n        80\n      ],\n      \"parameters\": {\n        \"width\": 440,\n        \"height\": 460,\n        \"content\": \"## 这是什么？\\n由于NocoDB中一些重大API变更，其部分节点选项目前（2022年5月）无法使用。这两个节点已被HTTP请求节点取代，功能保持不变。\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"connections\": {\n    \"IF\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"HTTP AddUser\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"HTTP UpdateUser\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Merge\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Switch\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Switch\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"New user?\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"msg_help\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        null,\n        [\n          {\n            \"node\": \"msg_wrongcommand\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"chatID\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"LoadDictionary\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"CheckUser\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Merge\",\n            \"type\": \"main\",\n            \"index\": 1\n          }\n        ]\n      ]\n    },\n    \"New user?\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"IF\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"botmessages\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"CheckUser\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"HTTP AddUser\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"msg_greet\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"LoadDictionary\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"botmessages\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"HTTP UpdateUser\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"msg_welcomeback\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Telegram Trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"chatID\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Merge\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}