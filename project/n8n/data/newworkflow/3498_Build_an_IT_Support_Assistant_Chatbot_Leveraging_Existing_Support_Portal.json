{
  "url": "https://n8n.io/workflows/3498-build-an-it-support-assistant-chatbot-leveraging-existing-support-portal/",
  "title": "Build an IT Support Assistant Chatbot Leveraging Existing Support Portal",
  "author": "Jimleuk",
  "publish_date": "Last update a month ago",
  "publish_date_absolute": "",
  "categories": [
    {
      "name": "Support"
    }
  ],
  "workflow_json": "{\"meta\":{\"instanceId\":\"408f9fb9940c3cb18ffdef0e0150fe342d6e655c3a9fac21f0f644e8bedabcd9\",\"templateCredsSetupCompleted\":true},\"nodes\":[{\"id\":\"8f203423-b063-4918-a6ec-dad3ac7d1a20\",\"name\":\"When chat message received\",\"type\":\"@n8n/n8n-nodes-langchain.chatTrigger\",\"position\":[860,-100],\"webhookId\":\"c82193c7-163c-4556-942f-81c80037e0ea\",\"parameters\":{\"options\":{}},\"typeVersion\":1.1},{\"id\":\"d9f2e90f-128b-458b-b3cf-79db2ec08633\",\"name\":\"OpenAI Chat Model\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\"position\":[1000,100],\"parameters\":{\"model\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"gpt-4o-mini\"},\"options\":{}},\"credentials\":{\"openAiApi\":{\"id\":\"8gccIjcuf3gvaoEr\",\"name\":\"OpenAi account\"}},\"typeVersion\":1.2},{\"id\":\"4f752502-8589-4e31-bbe1-4b8395e7325a\",\"name\":\"Simple Memory\",\"type\":\"@n8n/n8n-nodes-langchain.memoryBufferWindow\",\"position\":[1160,100],\"parameters\":{},\"typeVersion\":1.3},{\"id\":\"61ca5a4b-3661-4330-ac4c-e09e75dd764c\",\"name\":\"Acuity Support Search API\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[1840,80],\"parameters\":{\"url\":\"https://2al21hjwoz-dsn.algolia.net/1/indexes/*/queries?x-algolia-agent=Algolia%20for%20JavaScript%20(3.35.1)%3B%20Browser%20(lite)%3B%20instantsearch.js%201.12.1%3B%20Zendesk%20Integration%20(2.32.0)%3B%20JS%20Helper%20(2.28.1)&x-algolia-application-id=2AL21HJWOZ&x-algolia-api-key=c3c07dd7fb575008575163c085a62b92\",\"method\":\"POST\",\"options\":{},\"jsonBody\":\"={{\\n{\\n  \\\"requests\\\":[\\n    {\\n      \\\"indexName\\\":\\\"Zendesk 4-25\\\",\\n      \\\"params\\\": \\\"query=\\\" + $json.query + \\\"&hitsPerPage=5&page=0&facets=%5B%22locale.locale%22%2C%22label_names%22%2C%22category.title%22%5D&tagFilters=&facetFilters=%5B%22locale.locale%3Aen-us%22%5D\\\"\\n    }\\n  ]\\n}\\n}}\",\"sendBody\":true,\"sendHeaders\":true,\"specifyBody\":\"json\",\"headerParameters\":{\"parameters\":[{\"name\":\"Accept-Language\",\"value\":\"en\"},{\"name\":\"Cache-Control\",\"value\":\"no-cache\"},{\"name\":\"Connection\",\"value\":\"keep-alive\"},{\"name\":\"Origin\",\"value\":\"https://help.acuityscheduling.com\"},{\"name\":\"Referer\",\"value\":\"https://help.acuityscheduling.com/\"},{\"name\":\"User-Agent\",\"value\":\"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36\"},{\"name\":\"accept\",\"value\":\"application/json\"}]}},\"typeVersion\":4.2},{\"id\":\"8ecd6287-982c-4754-9300-4c6d54202273\",\"name\":\"Extract Relevant Fields\",\"type\":\"n8n-nodes-base.set\",\"position\":[2560,80],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"a6973f14-e17d-46b0-9c5b-c6d9967dbf99\",\"name\":\"title\",\"type\":\"string\",\"value\":\"={{ $json.title }}\"},{\"id\":\"88092adb-7f63-4daa-8c7a-cbd85750e180\",\"name\":\"body\",\"type\":\"string\",\"value\":\"={{ $json.body_safe }}\"},{\"id\":\"12718897-a73d-4c3a-bcfb-b17c890458ec\",\"name\":\"url\",\"type\":\"string\",\"value\":\"=https://help.acuityscheduling.com/hc/en-us/articles/{{ $json.id }}\"}]}},\"typeVersion\":3.4},{\"id\":\"bf5855b2-8e73-4c29-b277-adee63e8bf59\",\"name\":\"Results to Items\",\"type\":\"n8n-nodes-base.splitOut\",\"position\":[2360,80],\"parameters\":{\"options\":{},\"fieldToSplitOut\":\"results[0].hits\"},\"typeVersion\":1},{\"id\":\"c9329816-bbe0-4de7-b6fb-fa87783f6a5c\",\"name\":\"Has Results?\",\"type\":\"n8n-nodes-base.if\",\"position\":[2040,80],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"f5d7e890-f00a-4252-8588-c6662e71790c\",\"operator\":{\"type\":\"array\",\"operation\":\"lengthGt\",\"rightType\":\"number\"},\"leftValue\":\"={{ $json.results[0]?.hits ?? [] }}\",\"rightValue\":0}]}},\"typeVersion\":2.2},{\"id\":\"860a178a-d500-4291-acfc-9c9f4638d6c7\",\"name\":\"Empty Response\",\"type\":\"n8n-nodes-base.set\",\"position\":[2360,260],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"0ce36950-83d9-4964-8763-f329a4cda5a8\",\"name\":\"response\",\"type\":\"array\",\"value\":\"[]\"}]}},\"typeVersion\":3.4},{\"id\":\"c9f2a08b-88c2-4287-994c-f7af58e98301\",\"name\":\"Aggregate Response\",\"type\":\"n8n-nodes-base.aggregate\",\"position\":[2760,80],\"parameters\":{\"options\":{},\"aggregate\":\"aggregateAllItemData\",\"destinationFieldName\":\"response\"},\"typeVersion\":1},{\"id\":\"5f1f8874-7022-4ea1-b0a7-de42c4f800a1\",\"name\":\"Knowledgebase Tool\",\"type\":\"@n8n/n8n-nodes-langchain.toolWorkflow\",\"position\":[1320,100],\"parameters\":{\"name\":\"acuity_support_search\",\"workflowId\":{\"__rl\":true,\"mode\":\"id\",\"value\":\"={{ $workflow.id }}\"},\"description\":\"Call this tool to query AcuityScheduling's Support Center Search API.\",\"workflowInputs\":{\"value\":{\"query\":\"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('query', ``, 'string') }}\"},\"schema\":[{\"id\":\"query\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"query\",\"defaultMatch\":false,\"canBeUsedToMatch\":true}],\"mappingMode\":\"defineBelow\",\"matchingColumns\":[],\"attemptToConvertTypes\":false,\"convertFieldsToString\":false}},\"typeVersion\":2.1},{\"id\":\"3913ddaa-852e-4463-a072-fe8be22bc184\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[720,-300],\"parameters\":{\"color\":7,\"width\":780,\"height\":580,\"content\":\"## 1. Simple Chatbot with Knowledgebase Tool\\n[Learn more about AI agents](https://docs.n8n.io/integrations/builtin/cluster-nodes/root-nodes/n8n-nodes-langchain.agent)\\n\\nThe AI agent node is the simplest and recommended way to create user-friendly chatbots in n8n. Here, we'll define a support agent which can answer AcuityScheduling.com questions. To ensure the answers are accurate and up-to-date, we'll connect it to the support knowledgebase via a custom workflow tool.\"},\"typeVersion\":1},{\"id\":\"e24d75f9-6d3c-4bca-b67f-33737ee969ee\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[1540,-140],\"parameters\":{\"color\":7,\"width\":700,\"height\":440,\"content\":\"## 2. Use your Existing Help Portal Search\\n[Read more about the HTTP request tool](https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.httprequest)\\n\\nThe concept of RAG need to be synonymous with vector stores! In truth, many companies with a decent enough support website are able to leverage this existing knowledgebase for support agents. This saves time, money and effort and additional avoids maintenance of a vector store where syncs and updates are common.\"},\"typeVersion\":1},{\"id\":\"f5feebf1-fd6d-4558-a868-7ea4f852386c\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[2260,-140],\"parameters\":{\"color\":7,\"width\":720,\"height\":600,\"content\":\"## 3. Clean up the Results to Optimise Tokens\\n[Read more about the aggregate node](https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.aggregate)\\n\\nOf course, the results are intended for the website format but by using the custom workflow tool, we can edit it down to suit our chat scenario and save LLM costs (in terms of tokens) whilst we're at it. \"},\"typeVersion\":1},{\"id\":\"8132de59-9b47-460a-9cb9-f2ec83123a3f\",\"name\":\"AcuityScheduling Support Chatbot\",\"type\":\"@n8n/n8n-nodes-langchain.agent\",\"position\":[1060,-100],\"parameters\":{\"options\":{\"systemMessage\":\"You are a support assistant for the SaaS company, AcuityScheduling.com. Your task is to openly help the user with any questions regarding the AcuityScheduling service however, you are restricted to only this service. If the user asks questions unrelated to AcuityScheduling, you may ask them for clarification, explain you are not able to help them out of scope or redirect them to support@acuityScheduling.com. Be factual in your answer, tap into the resources or tools available and do not rely on your training data (which might be out-of-date). When returning a response to the user, you are encouraged to share the URL of the knowledgebase page where the user can explore the documentation for themselves.\"}},\"typeVersion\":1.8},{\"id\":\"564bde38-25ea-4969-aa3f-bff66ec2782f\",\"name\":\"Sticky Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[260,-840],\"parameters\":{\"width\":440,\"height\":1120,\"content\":\"## Try it Out!\\n### This n8n template demonstrates how you can leverage existing support site search to power your Support Chatbots and agents.\\n\\nBuilding a support chatbot need not be complicated! If building and indexing vector stores or duplicating data isn't necessarily your thing, an alternative implementation of the [RAG](https://www.databricks.com/glossary/retrieval-augmented-generation-rag) approach is to leverage existing knowledge-bases such as support portals.\\n\\n### How it works\\n* A simple AI agent is connected with chat trigger to receive user queries.\\n* The AI agent is instructed to fetch information from the knowledge-base via the attached custom workflow tool (aka \\\"knowledgebase tool\\\").\\n* There is no step to replicate the entire support articles database into a vector store. You may choose not too because of time, cost and maintainence involved.\\n* Instead, the tool leverages the existing support portal's search API to retrieve knowledge-base articles.\\n* Finally, the search results are formatted before sending an aggregated response back to the agent.\\n\\n### How to use?\\n* Customise the subworkflow to work with your own support portal API and format accordingly.\\n* Try the following queries\\n  * How do I connect my icloud to acuityScheduling?\\n  * How do I download past invoices for my Acuity account?\\n\\n### Requirements\\n* OpenAI for LLM.\\n* If your organisation's APIs require authorisation, you may need to add custom credentials as necessary.\\n\\n### Customising this workflow\\n* Add additional tools to reach other parts of your internal knowledgebase.\\n* Not using OpenAI? Feel free to swap but ensure the LLM has tools/function calling support.\\n\\n\\n### Need Help?\\nJoin the [Discord](https://discord.com/invite/XPKeKXeB7d) or ask in the [Forum](https://community.n8n.io/)!\\n\\nHappy Hacking!\"},\"typeVersion\":1},{\"id\":\"a918718f-915d-4d5c-a7c2-a015b8a84bbb\",\"name\":\"KnowledgeBase Tool Subworkflow\",\"type\":\"n8n-nodes-base.executeWorkflowTrigger\",\"position\":[1620,80],\"parameters\":{\"workflowInputs\":{\"values\":[{\"name\":\"query\"}]}},\"typeVersion\":1.1}],\"pinData\":{},\"connections\":{\"Has Results?\":{\"main\":[[{\"node\":\"Results to Items\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Empty Response\",\"type\":\"main\",\"index\":0}]]},\"Simple Memory\":{\"ai_memory\":[[{\"node\":\"AcuityScheduling Support Chatbot\",\"type\":\"ai_memory\",\"index\":0}]]},\"Results to Items\":{\"main\":[[{\"node\":\"Extract Relevant Fields\",\"type\":\"main\",\"index\":0}]]},\"OpenAI Chat Model\":{\"ai_languageModel\":[[{\"node\":\"AcuityScheduling Support Chatbot\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"Knowledgebase Tool\":{\"ai_tool\":[[{\"node\":\"AcuityScheduling Support Chatbot\",\"type\":\"ai_tool\",\"index\":0}]]},\"Extract Relevant Fields\":{\"main\":[[{\"node\":\"Aggregate Response\",\"type\":\"main\",\"index\":0}]]},\"Acuity Support Search API\":{\"main\":[[{\"node\":\"Has Results?\",\"type\":\"main\",\"index\":0}]]},\"When chat message received\":{\"main\":[[{\"node\":\"AcuityScheduling Support Chatbot\",\"type\":\"main\",\"index\":0}]]},\"KnowledgeBase Tool Subworkflow\":{\"main\":[[{\"node\":\"Acuity Support Search API\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "### This n8n template demonstrates how you can leverage existing support site search to power your Support Chatbots and agents.\n\nBuilding a support chatbot need not be complicated! If building and indexing vector stores or duplicating data isn't necessarily your thing, an alternative implementation of the [RAG](https://www.databricks.com/glossary/retrieval-augmented-generation-rag) approach is to leverage existing knowledge-bases such as support portals. In this way, document management and maintenance of your support agent is significantly reduced.\n\n**Disclaimer: This template example uses AcuityScheduling's help center website but is not associated, supported nor endorsed by the company.**\n\n### How it works\n\n  * A simple AI agent is connected with chat trigger to receive user queries.\n  * The AI agent is instructed to fetch information from the knowledge-base via the attached custom workflow tool (aka \"knowledgebase tool\").\n  * There is no step to replicate the entire support articles database into a vector store. You may choose not too because of time, cost and maintainence involved.\n  * Instead, the tool leverages the existing support portal's search API to retrieve knowledge-base articles.\n  * Finally, the search results are formatted before sending an aggregated response back to the agent.\n\n\n\n### How to use?\n\n  * Customise the subworkflow to work with your own support portal API and format accordingly.\n  * Try the following queries \n    * How do I connect my icloud to acuityScheduling?\n    * How do I download past invoices for my Acuity account?\n\n\n\n### Requirements\n\n  * OpenAI for LLM.\n  * If your organisation's APIs require authorisation, you may need to add custom credentials as necessary.\n\n\n\n### Customising this workflow\n\n  * Add additional tools to reach other parts of your internal knowledgebase.\n  * Not using OpenAI? Feel free to swap but ensure the LLM has tools/function calling support.\n\n\n",
  "crawled_at": "2025-05-26T04:40:20.962714",
  "readme_zh": "### 本n8n模板展示了如何利用现有支持站点搜索功能为客服聊天机器人和代理提供支持。\n\n构建客服聊天机器人其实可以很简单！如果您不愿费心构建和索引向量数据库或复制数据，采用[RAG](https://www.databricks.com/glossary/retrieval-augmented-generation-rag)方案的另一种实现方式是直接利用现有的知识库（如支持门户网站）。这种方法能大幅减少对客服代理文档的管理和维护工作。\n\n**免责声明：本模板示例使用AcuityScheduling帮助中心网站作为演示，但并非由该公司关联、支持或认可。**\n\n### 工作原理\n\n* 通过聊天触发器连接简易AI代理接收用户查询\n* AI代理根据指令，通过绑定的自定义工作流工具（即\"知识库工具\"）从知识库获取信息\n* 无需将整个支持文章数据库复制到向量存储中——考虑到时间成本与维护成本，您可以选择不这样做\n* 该工具直接调用支持门户现有的搜索API获取知识库文章\n* 最终对搜索结果进行格式化处理，将整合后的响应返回给AI代理\n\n### 使用方法\n\n* 根据您的支持门户API定制子工作流并调整响应格式\n* 尝试以下查询示例：\n  * 如何将iCloud连接到AcuityScheduling？\n  * 如何下载Acuity账户的历史发票？\n\n### 环境要求\n\n* 需使用OpenAI的LLM服务\n* 若您组织的API需要鉴权，请按需添加自定义凭证\n\n### 自定义扩展\n\n* 可添加其他工具接入内部知识库的不同模块\n* 不使用OpenAI？可自由替换其他LLM服务，但需确保支持工具/函数调用功能",
  "title_zh": "构建一个利用现有支持门户的IT支持助手聊天机器人",
  "publish_date_zh": "上次更新于18天前",
  "workflow_json_zh": "{\n  \"meta\": {\n    \"instanceId\": \"408f9fb9940c3cb18ffdef0e0150fe342d6e655c3a9fac21f0f644e8bedabcd9\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"nodes\": [\n    {\n      \"id\": \"8f203423-b063-4918-a6ec-dad3ac7d1a20\",\n      \"name\": \"When chat message received\",\n      \"type\": \"@n8n/n8n-nodes-langchain.chatTrigger\",\n      \"position\": [\n        860,\n        -100\n      ],\n      \"webhookId\": \"c82193c7-163c-4556-942f-81c80037e0ea\",\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"d9f2e90f-128b-458b-b3cf-79db2ec08633\",\n      \"name\": \"OpenAI Chat Model\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\n      \"position\": [\n        1000,\n        100\n      ],\n      \"parameters\": {\n        \"model\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gpt-4o-mini\"\n        },\n        \"options\": {}\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"8gccIjcuf3gvaoEr\",\n          \"name\": \"OpenAi account\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"4f752502-8589-4e31-bbe1-4b8395e7325a\",\n      \"name\": \"Simple Memory\",\n      \"type\": \"@n8n/n8n-nodes-langchain.memoryBufferWindow\",\n      \"position\": [\n        1160,\n        100\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1.3\n    },\n    {\n      \"id\": \"61ca5a4b-3661-4330-ac4c-e09e75dd764c\",\n      \"name\": \"Acuity Support Search API\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        1840,\n        80\n      ],\n      \"parameters\": {\n        \"url\": \"https://2al21hjwoz-dsn.algolia.net/1/indexes/*/queries?x-algolia-agent=Algolia%20for%20JavaScript%20(3.35.1)%3B%20Browser%20(lite)%3B%20instantsearch.js%201.12.1%3B%20Zendesk%20Integration%20(2.32.0)%3B%20JS%20Helper%20(2.28.1)&x-algolia-application-id=2AL21HJWOZ&x-algolia-api-key=c3c07dd7fb575008575163c085a62b92\",\n        \"method\": \"POST\",\n        \"options\": {},\n        \"jsonBody\": \"={{\\n{\\n  \\\"requests\\\":[\\n    {\\n      \\\"indexName\\\":\\\"Zendesk 4-25\\\",\\n      \\\"params\\\": \\\"query=\\\" + $json.query + \\\"&hitsPerPage=5&page=0&facets=%5B%22locale.locale%22%2C%22label_names%22%2C%22category.title%22%5D&tagFilters=&facetFilters=%5B%22locale.locale%3Aen-us%22%5D\\\"\\n    }\\n  ]\\n}\\n}}\",\n        \"sendBody\": true,\n        \"sendHeaders\": true,\n        \"specifyBody\": \"json\",\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"Accept-Language\",\n              \"value\": \"en\"\n            },\n            {\n              \"name\": \"Cache-Control\",\n              \"value\": \"no-cache\"\n            },\n            {\n              \"name\": \"Connection\",\n              \"value\": \"keep-alive\"\n            },\n            {\n              \"name\": \"Origin\",\n              \"value\": \"https://help.acuityscheduling.com\"\n            },\n            {\n              \"name\": \"Referer\",\n              \"value\": \"https://help.acuityscheduling.com/\"\n            },\n            {\n              \"name\": \"User-Agent\",\n              \"value\": \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/134.0.0.0 Safari/537.36\"\n            },\n            {\n              \"name\": \"accept\",\n              \"value\": \"application/json\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"8ecd6287-982c-4754-9300-4c6d54202273\",\n      \"name\": \"Extract Relevant Fields\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        2560,\n        80\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"a6973f14-e17d-46b0-9c5b-c6d9967dbf99\",\n              \"name\": \"title\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.title }}\"\n            },\n            {\n              \"id\": \"88092adb-7f63-4daa-8c7a-cbd85750e180\",\n              \"name\": \"body\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.body_safe }}\"\n            },\n            {\n              \"id\": \"12718897-a73d-4c3a-bcfb-b17c890458ec\",\n              \"name\": \"url\",\n              \"type\": \"string\",\n              \"value\": \"=https://help.acuityscheduling.com/hc/en-us/articles/{{ $json.id }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"bf5855b2-8e73-4c29-b277-adee63e8bf59\",\n      \"name\": \"Results to Items\",\n      \"type\": \"n8n-nodes-base.splitOut\",\n      \"position\": [\n        2360,\n        80\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"fieldToSplitOut\": \"results[0].hits\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"c9329816-bbe0-4de7-b6fb-fa87783f6a5c\",\n      \"name\": \"Has Results?\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        2040,\n        80\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"f5d7e890-f00a-4252-8588-c6662e71790c\",\n              \"operator\": {\n                \"type\": \"array\",\n                \"operation\": \"lengthGt\",\n                \"rightType\": \"number\"\n              },\n              \"leftValue\": \"={{ $json.results[0]?.hits ?? [] }}\",\n              \"rightValue\": 0\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"860a178a-d500-4291-acfc-9c9f4638d6c7\",\n      \"name\": \"Empty Response\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        2360,\n        260\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"0ce36950-83d9-4964-8763-f329a4cda5a8\",\n              \"name\": \"response\",\n              \"type\": \"array\",\n              \"value\": \"[]\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"c9f2a08b-88c2-4287-994c-f7af58e98301\",\n      \"name\": \"Aggregate Response\",\n      \"type\": \"n8n-nodes-base.aggregate\",\n      \"position\": [\n        2760,\n        80\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"aggregate\": \"aggregateAllItemData\",\n        \"destinationFieldName\": \"response\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"5f1f8874-7022-4ea1-b0a7-de42c4f800a1\",\n      \"name\": \"Knowledgebase Tool\",\n      \"type\": \"@n8n/n8n-nodes-langchain.toolWorkflow\",\n      \"position\": [\n        1320,\n        100\n      ],\n      \"parameters\": {\n        \"name\": \"acuity_support_search\",\n        \"workflowId\": {\n          \"__rl\": true,\n          \"mode\": \"id\",\n          \"value\": \"={{ $workflow.id }}\"\n        },\n        \"description\": \"Call this tool to query AcuityScheduling's Support Center Search API.\",\n        \"workflowInputs\": {\n          \"value\": {\n            \"query\": \"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('query', ``, 'string') }}\"\n          },\n          \"schema\": [\n            {\n              \"id\": \"query\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"query\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            }\n          ],\n          \"mappingMode\": \"defineBelow\",\n          \"matchingColumns\": [],\n          \"attemptToConvertTypes\": false,\n          \"convertFieldsToString\": false\n        }\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"3913ddaa-852e-4463-a072-fe8be22bc184\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        720,\n        -300\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 780,\n        \"height\": 580,\n        \"content\": \"## 1. 带知识库工具的简易聊天机器人\\n[了解更多AI代理信息](https://docs.n8n.io/integrations/builtin/cluster-nodes/root-nodes/n8n-nodes-langchain.agent)\\n\\nAI代理节点是在n8n中创建用户友好型聊天机器人最简单且推荐的方式。我们将在此定义一个能回答AcuityScheduling.com问题的客服代理。为确保回答准确且及时，我们会通过自定义工作流工具将其连接到支持知识库。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"e24d75f9-6d3c-4bca-b67f-33737ee969ee\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        1540,\n        -140\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 700,\n        \"height\": 440,\n        \"content\": \"## 2. 利用现有帮助门户搜索\\n[详细了解HTTP请求工具](https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.httprequest)\\n\\nRAG（检索增强生成）的概念不必与向量存储划等号！事实上，许多拥有完善支持网站的企业完全可以直接利用现有知识库为客服人员提供支持。这不仅能节省时间、成本和人力，还避免了维护向量存储库时常见的同步与更新问题。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"f5feebf1-fd6d-4558-a868-7ea4f852386c\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        2260,\n        -140\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 720,\n        \"height\": 600,\n        \"content\": \"## 3. 清理结果以优化令牌使用\\n[详细了解聚合节点](https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.aggregate)\\n\\n虽然当前结果是为网页格式设计的，但通过使用自定义工作流工具，我们可以将其精简以适应聊天场景，同时在此过程中节省LLM的令牌成本。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"8132de59-9b47-460a-9cb9-f2ec83123a3f\",\n      \"name\": \"AcuityScheduling Support Chatbot\",\n      \"type\": \"@n8n/n8n-nodes-langchain.agent\",\n      \"position\": [\n        1060,\n        -100\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"systemMessage\": \"You are a support assistant for the SaaS company, AcuityScheduling.com. Your task is to openly help the user with any questions regarding the AcuityScheduling service however, you are restricted to only this service. If the user asks questions unrelated to AcuityScheduling, you may ask them for clarification, explain you are not able to help them out of scope or redirect them to support@acuityScheduling.com. Be factual in your answer, tap into the resources or tools available and do not rely on your training data (which might be out-of-date). When returning a response to the user, you are encouraged to share the URL of the knowledgebase page where the user can explore the documentation for themselves.\"\n        }\n      },\n      \"typeVersion\": 1.8\n    },\n    {\n      \"id\": \"564bde38-25ea-4969-aa3f-bff66ec2782f\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        260,\n        -840\n      ],\n      \"parameters\": {\n        \"width\": 440,\n        \"height\": 1120,\n        \"content\": \"## 立即试用！\\n### 本n8n模板演示如何利用现有支持站点搜索功能为客服聊天机器人和坐席赋能\\n\\n构建客服聊天机器人其实可以很简单！如果您不愿折腾向量数据库的构建索引或数据同步，不妨采用另一种[RAG](https://www.databricks.com/glossary/retrieval-augmented-generation-rag)方案——直接对接现有的支持门户知识库。\\n\\n### 工作原理\\n* 配置AI智能体通过聊天触发器接收用户咨询\\n* 智能体通过绑定的自定义工作流工具（即\\\"知识库工具\\\"）获取信息\\n* 无需将整个支持文章数据库复制到向量存储，避免时间成本与维护负担\\n* 该工具直接调用支持门户的搜索API获取知识库文章\\n* 最终将格式化后的搜索结果汇总返回给智能体\\n\\n### 使用方法\\n* 根据您的支持门户API定制子工作流\\n* 尝试以下查询示例：\\n  * 如何将iCloud连接到acuityScheduling？\\n  * 如何下载Acuity账户的历史发票？\\n\\n### 环境要求\\n* 需使用OpenAI大语言模型\\n* 若企业API需鉴权，请配置自定义凭证\\n\\n### 定制扩展\\n* 可添加其他工具对接内部知识库不同模块\\n* 非OpenAI用户可替换其他支持工具/函数调用的大模型\\n\\n### 获取帮助\\n欢迎加入[Discord社区](https://discord.com/invite/XPKeKXeB7d)或访问[官方论坛](https://community.n8n.io/)！\\n\\n祝您玩得愉快！\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"a918718f-915d-4d5c-a7c2-a015b8a84bbb\",\n      \"name\": \"KnowledgeBase Tool Subworkflow\",\n      \"type\": \"n8n-nodes-base.executeWorkflowTrigger\",\n      \"position\": [\n        1620,\n        80\n      ],\n      \"parameters\": {\n        \"workflowInputs\": {\n          \"values\": [\n            {\n              \"name\": \"query\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1.1\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"Has Results?\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Results to Items\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Empty Response\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Simple Memory\": {\n      \"ai_memory\": [\n        [\n          {\n            \"node\": \"AcuityScheduling Support Chatbot\",\n            \"type\": \"ai_memory\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Results to Items\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Extract Relevant Fields\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"OpenAI Chat Model\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"AcuityScheduling Support Chatbot\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Knowledgebase Tool\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"AcuityScheduling Support Chatbot\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Extract Relevant Fields\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Aggregate Response\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Acuity Support Search API\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Has Results?\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When chat message received\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"AcuityScheduling Support Chatbot\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"KnowledgeBase Tool Subworkflow\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Acuity Support Search API\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}