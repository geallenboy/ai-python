{
  "url": "https://n8n.io/workflows/2085-chat-with-a-google-sheet-using-ai/",
  "title": "Chat with a Google Sheet using AI",
  "author": "David Roberts",
  "publish_date": "Last update 2 months ago",
  "publish_date_absolute": "2025-03-25",
  "categories": [
    {
      "name": "AI"
    }
  ],
  "workflow_json": "{\"meta\":{\"instanceId\":\"408f9fb9940c3cb18ffdef0e0150fe342d6e655c3a9fac21f0f644e8bedabcd9\",\"templateCredsSetupCompleted\":true},\"nodes\":[{\"id\":\"f3f7546a-8bb3-484c-b0a1-750a8d7d3a74\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[0,520],\"parameters\":{\"color\":7,\"width\":1549,\"height\":612,\"content\":\"### Sub-workflow: Custom tool\\nThis can be called by the agent above. It returns three different types of data from the Google Sheet, which can be used together for more complex queries without returning the whole sheet (which might be too big for GPT to handle)\"},\"typeVersion\":1},{\"id\":\"a5afaa40-0b68-4d7c-8f78-5cb176fde81d\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[0,-40],\"parameters\":{\"color\":7,\"width\":1068,\"height\":547,\"content\":\"### Main workflow: AI agent using custom tool\"},\"typeVersion\":1},{\"id\":\"2dc0ce2f-a09c-4804-9962-f542ec78eb87\",\"name\":\"Sticky Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-160,40],\"parameters\":{\"width\":185.9375,\"height\":183.85014518022527,\"content\":\"## Try me out\\n\\nClick the 'Chat' button at the bottom and enter:\\n\\n_Which is our biggest customer?_\"},\"typeVersion\":1},{\"id\":\"8fc97d52-1c18-47ed-ba6f-4c7c9ce8b7d4\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[480,240],\"parameters\":{\"color\":7,\"width\":572,\"height\":219,\"content\":\"These tools all call the sub-workflow below\"},\"typeVersion\":1},{\"id\":\"60cafb69-818f-49fe-b75e-e770304a6aa9\",\"name\":\"Sticky Note4\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[260,740],\"parameters\":{\"width\":179.99762227826224,\"height\":226.64416053838073,\"content\":\"Change the URL of the Google Sheet here\"},\"typeVersion\":1},{\"id\":\"cd8d92fa-f7ef-47d8-a1a7-5b5aa6faaa96\",\"name\":\"When chat message received\",\"type\":\"@n8n/n8n-nodes-langchain.chatTrigger\",\"position\":[120,40],\"webhookId\":\"7668b567-b983-479f-a3e0-ad945707ae6b\",\"parameters\":{\"options\":{}},\"typeVersion\":1.1},{\"id\":\"72ac3bdb-56dc-4634-a0ab-0b1c82e2b23d\",\"name\":\"OpenAI Chat Model1\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\"position\":[160,320],\"parameters\":{\"model\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"gpt-4o-mini\"},\"options\":{}},\"credentials\":{\"openAiApi\":{\"id\":\"8gccIjcuf3gvaoEr\",\"name\":\"OpenAi account\"}},\"typeVersion\":1.2},{\"id\":\"37e5bca6-4274-4714-a9e7-a8e4b7d732e5\",\"name\":\"Simple Memory\",\"type\":\"@n8n/n8n-nodes-langchain.memoryBufferWindow\",\"position\":[340,320],\"parameters\":{},\"typeVersion\":1.3},{\"id\":\"81bf7de8-c4c6-49ce-a2cf-4afca5dce7e2\",\"name\":\"When Executed by Another Workflow\",\"type\":\"n8n-nodes-base.executeWorkflowTrigger\",\"position\":[80,800],\"parameters\":{\"workflowInputs\":{\"values\":[{\"name\":\"operation\"},{\"name\":\"query\"}]}},\"typeVersion\":1.1},{\"id\":\"24e5a49d-8f1f-4569-8072-c35f059ebd46\",\"name\":\"AI Agent\",\"type\":\"@n8n/n8n-nodes-langchain.agent\",\"position\":[480,40],\"parameters\":{\"options\":{}},\"typeVersion\":1.8},{\"id\":\"8cc35cb9-3371-4034-86b6-3d125d70d81b\",\"name\":\"List columns tool\",\"type\":\"@n8n/n8n-nodes-langchain.toolWorkflow\",\"position\":[540,320],\"parameters\":{\"name\":\"list_columns\",\"workflowId\":{\"__rl\":true,\"mode\":\"id\",\"value\":\"={{ $workflow.id }}\"},\"description\":\"List all column names in customer data\\n\\nCall this tool to find out what data is available for each customer. It should be called first at the beginning to understand which columns are available for querying.\",\"workflowInputs\":{\"value\":{\"query\":\"none\",\"operation\":\"column_names\"},\"schema\":[{\"id\":\"query\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"query\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"operation\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"operation\",\"defaultMatch\":false,\"canBeUsedToMatch\":true}],\"mappingMode\":\"defineBelow\",\"matchingColumns\":[],\"attemptToConvertTypes\":false,\"convertFieldsToString\":false}},\"typeVersion\":2},{\"id\":\"acf19978-dd84-4cfb-8034-eb9f14dd9c86\",\"name\":\"Get column values tool\",\"type\":\"@n8n/n8n-nodes-langchain.toolWorkflow\",\"position\":[720,320],\"parameters\":{\"name\":\"column_values\",\"workflowId\":{\"__rl\":true,\"mode\":\"id\",\"value\":\"={{ $workflow.id }}\"},\"description\":\"Get the specified column value for all customers\\n\\nUse this tool to find out which customers have a certain value for a given column. Returns an array of JSON objects, one per customer. Each JSON object includes the column being requested plus the row_number column. Input should be a single string representing the name of the column to fetch.\\n\",\"workflowInputs\":{\"value\":{\"query\":\"none\",\"operation\":\"column_values\"},\"schema\":[{\"id\":\"operation\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"operation\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"query\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"query\",\"defaultMatch\":false,\"canBeUsedToMatch\":true}],\"mappingMode\":\"defineBelow\",\"matchingColumns\":[\"operation\"],\"attemptToConvertTypes\":false,\"convertFieldsToString\":false}},\"typeVersion\":2},{\"id\":\"acd8dad6-2ce5-4a53-9909-da7bc03cf0e2\",\"name\":\"Get customer tool\",\"type\":\"@n8n/n8n-nodes-langchain.toolWorkflow\",\"position\":[900,320],\"parameters\":{\"name\":\"get_customer\",\"workflowId\":{\"__rl\":true,\"mode\":\"id\",\"value\":\"={{ $workflow.id }}\",\"cachedResultName\":\"={{ $workflow.id }}\"},\"description\":\"Get all columns for a given customer\\n\\nThe input should be a stringified row number of the customer to fetch; only single string inputs are allowed. Returns a JSON object with all the column names and their values.\",\"workflowInputs\":{\"value\":{\"query\":\"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('query', ``, 'string') }}\",\"operation\":\"row\"},\"schema\":[{\"id\":\"operation\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"operation\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"query\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"query\",\"defaultMatch\":false,\"canBeUsedToMatch\":true}],\"mappingMode\":\"defineBelow\",\"matchingColumns\":[\"operation\"],\"attemptToConvertTypes\":false,\"convertFieldsToString\":false}},\"typeVersion\":2},{\"id\":\"43988dff-2270-4d09-a091-8b719c281faf\",\"name\":\"Set Google Sheet URL\",\"type\":\"n8n-nodes-base.set\",\"position\":[300,800],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"a96650f2-3a0c-45cb-afdd-ef7ca90b21cc\",\"name\":\"sheetUrl\",\"type\":\"string\",\"value\":\"https://docs.google.com/spreadsheets/d/1GjFBV8HpraNWG_JyuaQAgTb3zUGguh0S_25nO0CMd8A/edit#gid=736425281\"}]}},\"typeVersion\":3.4},{\"id\":\"536225e9-e33c-4819-a2dc-994d8f7c3f30\",\"name\":\"Get Google sheet contents\",\"type\":\"n8n-nodes-base.googleSheets\",\"position\":[520,800],\"parameters\":{\"options\":{},\"sheetName\":{\"__rl\":true,\"mode\":\"name\",\"value\":\"customer_data\"},\"documentId\":{\"__rl\":true,\"mode\":\"url\",\"value\":\"={{ $json.sheetUrl }}\"}},\"credentials\":{\"googleSheetsOAuth2Api\":{\"id\":\"XHvC7jIRR8A2TlUl\",\"name\":\"Google Sheets account\"}},\"typeVersion\":4.5},{\"id\":\"a5668364-8824-44cc-8a0f-516906d8f821\",\"name\":\"Check operation\",\"type\":\"n8n-nodes-base.switch\",\"position\":[740,800],\"parameters\":{\"rules\":{\"values\":[{\"outputKey\":\"Column Names\",\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"db07e0a3-0a1d-44bd-84a7-59a9442e63a6\",\"operator\":{\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"={{ $('When Executed by Another Workflow').item.json.operation }}\",\"rightValue\":\"column_names\"}]},\"renameOutput\":true},{\"outputKey\":\"Column Values\",\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"96c82351-de4a-4299-903d-8b9b3a3bb931\",\"operator\":{\"name\":\"filter.operator.equals\",\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"={{ $('When Executed by Another Workflow').item.json.operation }}\",\"rightValue\":\"column_values\"}]},\"renameOutput\":true},{\"outputKey\":\"Rows\",\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"fbc2afd0-361f-4181-94e3-4addc65a9086\",\"operator\":{\"name\":\"filter.operator.equals\",\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"={{ $('When Executed by Another Workflow').item.json.operation }}\",\"rightValue\":\"row\"}]},\"renameOutput\":true}]},\"options\":{}},\"typeVersion\":3.2},{\"id\":\"46c3a8c4-ffaf-4373-b421-4d7ee65567b2\",\"name\":\"Get column names\",\"type\":\"n8n-nodes-base.set\",\"position\":[1040,620],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"36a7be13-e792-4c0a-9997-f61fe2a7b225\",\"name\":\"response\",\"type\":\"array\",\"value\":\"={{ Object.keys($json) }}\"}]}},\"typeVersion\":3.4},{\"id\":\"190c48e8-4d4b-4e95-a694-49ab76b730da\",\"name\":\"Prepare column data\",\"type\":\"n8n-nodes-base.set\",\"position\":[1040,800],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"bcb75b32-3253-4a31-9771-4faaf12cc2ed\",\"name\":\"row_number\",\"type\":\"number\",\"value\":\"={{ $json.row_number }}\"}]}},\"typeVersion\":3.4},{\"id\":\"9c65e5e6-a3ac-4ed7-8546-b7f2b09b4f96\",\"name\":\"Filter\",\"type\":\"n8n-nodes-base.filter\",\"position\":[1040,980],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"dbe89d36-e411-4765-8d4e-91a6425350ac\",\"operator\":{\"name\":\"filter.operator.equals\",\"type\":\"string\",\"operation\":\"equals\"},\"leftValue\":\"={{ $json.row_number.toString() }}\",\"rightValue\":\"={{ $('When Executed by Another Workflow').item.json.query }}\"}]}},\"typeVersion\":2.2},{\"id\":\"39265f3e-a2ea-4174-952a-3665747ff856\",\"name\":\"Prepare output\",\"type\":\"n8n-nodes-base.code\",\"position\":[1340,800],\"parameters\":{\"jsCode\":\"return {\\n  'response': JSON.stringify($input.all().map(x => x.json))\\n}\"},\"executeOnce\":true,\"typeVersion\":2}],\"pinData\":{},\"connections\":{\"Filter\":{\"main\":[[{\"node\":\"Prepare output\",\"type\":\"main\",\"index\":0}]]},\"Simple Memory\":{\"ai_memory\":[[{\"node\":\"AI Agent\",\"type\":\"ai_memory\",\"index\":0}]]},\"Check operation\":{\"main\":[[{\"node\":\"Get column names\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Prepare column data\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Filter\",\"type\":\"main\",\"index\":0}]]},\"Get column names\":{\"main\":[[{\"node\":\"Prepare output\",\"type\":\"main\",\"index\":0}]]},\"Get customer tool\":{\"ai_tool\":[[{\"node\":\"AI Agent\",\"type\":\"ai_tool\",\"index\":0}]]},\"List columns tool\":{\"ai_tool\":[[{\"node\":\"AI Agent\",\"type\":\"ai_tool\",\"index\":0}]]},\"OpenAI Chat Model1\":{\"ai_languageModel\":[[{\"node\":\"AI Agent\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"Prepare column data\":{\"main\":[[{\"node\":\"Prepare output\",\"type\":\"main\",\"index\":0}]]},\"Set Google Sheet URL\":{\"main\":[[{\"node\":\"Get Google sheet contents\",\"type\":\"main\",\"index\":0}]]},\"Get column values tool\":{\"ai_tool\":[[{\"node\":\"AI Agent\",\"type\":\"ai_tool\",\"index\":0}]]},\"Get Google sheet contents\":{\"main\":[[{\"node\":\"Check operation\",\"type\":\"main\",\"index\":0}]]},\"When chat message received\":{\"main\":[[{\"node\":\"AI Agent\",\"type\":\"main\",\"index\":0}]]},\"When Executed by Another Workflow\":{\"main\":[[{\"node\":\"Set Google Sheet URL\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "This workflow allows you to ask questions about the data in a Google Sheet over a chat interface. It uses n8n's built-in chat, but could be modified to work with Slack, Teams, WhatsApp, etc.\n\nBehind the scenes, the workflow uses GPT4, so you'll need to have an OpenAI API key that supports it.\n\n### How it works\n\nThe workflow uses an AI agent with custom tools that call a sub-workflow. That sub-workflow reads the Google Sheet and returns information from it.\n\nBecause models have a context window (and therefore a maximum number of characters they can accept), we can't pass the whole Google Sheet to GPT - at least not for big sheets. So we provide three ways of querying less data, that can be used in combination to answer questions. Those three functions are:\n\n  1. List all the columns in the sheet\n  2. Get all values of a single column\n  3. Get all values of a single row\n\n\n\nNote that to use this template, you need to be on n8n version 1.19.4 or later.\n",
  "crawled_at": "2025-05-25T20:51:45.480313",
  "readme_zh": "该工作流允许您通过聊天界面查询Google表格中的数据。它使用n8n内置的聊天功能，但也可适配至Slack、Teams、WhatsApp等平台。\n\n底层实现采用GPT4模型，因此您需要拥有支持该模型的OpenAI API密钥。\n\n### 运行原理\n\n工作流通过AI智能体调用自定义工具，这些工具会触发子工作流。子工作流负责读取Google表格并返回相关信息。\n\n由于模型存在上下文窗口限制（即能处理的字符数上限），我们无法将整个表格数据传递给GPT——至少对大型表格不可行。因此我们提供三种组合使用的数据查询方式：\n\n1. 列出表格所有列名\n2. 获取单列所有数值\n3. 获取单行所有数值\n\n请注意：使用此模板需n8n版本为1.19.4或更高。",
  "title_zh": "使用AI与Google表格对话",
  "publish_date_zh": "最后一次更新于一个月前",
  "workflow_json_zh": "{\n  \"meta\": {\n    \"instanceId\": \"408f9fb9940c3cb18ffdef0e0150fe342d6e655c3a9fac21f0f644e8bedabcd9\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"nodes\": [\n    {\n      \"id\": \"f3f7546a-8bb3-484c-b0a1-750a8d7d3a74\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        0,\n        520\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 1549,\n        \"height\": 612,\n        \"content\": \"### 子工作流程：自定义工具  \\n该工具可由上述代理调用。它会从Google表格中返回三种不同类型的数据，这些数据可结合使用以执行更复杂的查询，而无需返回整个表格（因为表格可能过大，超出GPT的处理能力）。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"a5afaa40-0b68-4d7c-8f78-5cb176fde81d\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        0,\n        -40\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 1068,\n        \"height\": 547,\n        \"content\": \"### 主要工作流程：AI代理使用自定义工具\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"2dc0ce2f-a09c-4804-9962-f542ec78eb87\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -160,\n        40\n      ],\n      \"parameters\": {\n        \"width\": 185.9375,\n        \"height\": 183.85014518022527,\n        \"content\": \"## 试试我吧\\n\\n点击下方的“聊天”按钮并输入：\\n\\n_我们最大的客户是哪个？_\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"8fc97d52-1c18-47ed-ba6f-4c7c9ce8b7d4\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        480,\n        240\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 572,\n        \"height\": 219,\n        \"content\": \"这些工具均调用以下子流程\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"60cafb69-818f-49fe-b75e-e770304a6aa9\",\n      \"name\": \"Sticky Note4\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        260,\n        740\n      ],\n      \"parameters\": {\n        \"width\": 179.99762227826224,\n        \"height\": 226.64416053838073,\n        \"content\": \"在此处更改Google表格的URL\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"cd8d92fa-f7ef-47d8-a1a7-5b5aa6faaa96\",\n      \"name\": \"When chat message received\",\n      \"type\": \"@n8n/n8n-nodes-langchain.chatTrigger\",\n      \"position\": [\n        120,\n        40\n      ],\n      \"webhookId\": \"7668b567-b983-479f-a3e0-ad945707ae6b\",\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"72ac3bdb-56dc-4634-a0ab-0b1c82e2b23d\",\n      \"name\": \"OpenAI Chat Model1\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\n      \"position\": [\n        160,\n        320\n      ],\n      \"parameters\": {\n        \"model\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gpt-4o-mini\"\n        },\n        \"options\": {}\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"8gccIjcuf3gvaoEr\",\n          \"name\": \"OpenAi account\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"37e5bca6-4274-4714-a9e7-a8e4b7d732e5\",\n      \"name\": \"Simple Memory\",\n      \"type\": \"@n8n/n8n-nodes-langchain.memoryBufferWindow\",\n      \"position\": [\n        340,\n        320\n      ],\n      \"parameters\": {},\n      \"typeVersion\": 1.3\n    },\n    {\n      \"id\": \"81bf7de8-c4c6-49ce-a2cf-4afca5dce7e2\",\n      \"name\": \"When Executed by Another Workflow\",\n      \"type\": \"n8n-nodes-base.executeWorkflowTrigger\",\n      \"position\": [\n        80,\n        800\n      ],\n      \"parameters\": {\n        \"workflowInputs\": {\n          \"values\": [\n            {\n              \"name\": \"operation\"\n            },\n            {\n              \"name\": \"query\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"24e5a49d-8f1f-4569-8072-c35f059ebd46\",\n      \"name\": \"AI Agent\",\n      \"type\": \"@n8n/n8n-nodes-langchain.agent\",\n      \"position\": [\n        480,\n        40\n      ],\n      \"parameters\": {\n        \"options\": {}\n      },\n      \"typeVersion\": 1.8\n    },\n    {\n      \"id\": \"8cc35cb9-3371-4034-86b6-3d125d70d81b\",\n      \"name\": \"List columns tool\",\n      \"type\": \"@n8n/n8n-nodes-langchain.toolWorkflow\",\n      \"position\": [\n        540,\n        320\n      ],\n      \"parameters\": {\n        \"name\": \"list_columns\",\n        \"workflowId\": {\n          \"__rl\": true,\n          \"mode\": \"id\",\n          \"value\": \"={{ $workflow.id }}\"\n        },\n        \"description\": \"List all column names in customer data\\n\\nCall this tool to find out what data is available for each customer. It should be called first at the beginning to understand which columns are available for querying.\",\n        \"workflowInputs\": {\n          \"value\": {\n            \"query\": \"none\",\n            \"operation\": \"column_names\"\n          },\n          \"schema\": [\n            {\n              \"id\": \"query\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"query\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"operation\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"operation\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            }\n          ],\n          \"mappingMode\": \"defineBelow\",\n          \"matchingColumns\": [],\n          \"attemptToConvertTypes\": false,\n          \"convertFieldsToString\": false\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"acf19978-dd84-4cfb-8034-eb9f14dd9c86\",\n      \"name\": \"Get column values tool\",\n      \"type\": \"@n8n/n8n-nodes-langchain.toolWorkflow\",\n      \"position\": [\n        720,\n        320\n      ],\n      \"parameters\": {\n        \"name\": \"column_values\",\n        \"workflowId\": {\n          \"__rl\": true,\n          \"mode\": \"id\",\n          \"value\": \"={{ $workflow.id }}\"\n        },\n        \"description\": \"Get the specified column value for all customers\\n\\nUse this tool to find out which customers have a certain value for a given column. Returns an array of JSON objects, one per customer. Each JSON object includes the column being requested plus the row_number column. Input should be a single string representing the name of the column to fetch.\\n\",\n        \"workflowInputs\": {\n          \"value\": {\n            \"query\": \"none\",\n            \"operation\": \"column_values\"\n          },\n          \"schema\": [\n            {\n              \"id\": \"operation\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"operation\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"query\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"query\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            }\n          ],\n          \"mappingMode\": \"defineBelow\",\n          \"matchingColumns\": [\n            \"operation\"\n          ],\n          \"attemptToConvertTypes\": false,\n          \"convertFieldsToString\": false\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"acd8dad6-2ce5-4a53-9909-da7bc03cf0e2\",\n      \"name\": \"Get customer tool\",\n      \"type\": \"@n8n/n8n-nodes-langchain.toolWorkflow\",\n      \"position\": [\n        900,\n        320\n      ],\n      \"parameters\": {\n        \"name\": \"get_customer\",\n        \"workflowId\": {\n          \"__rl\": true,\n          \"mode\": \"id\",\n          \"value\": \"={{ $workflow.id }}\",\n          \"cachedResultName\": \"={{ $workflow.id }}\"\n        },\n        \"description\": \"Get all columns for a given customer\\n\\nThe input should be a stringified row number of the customer to fetch; only single string inputs are allowed. Returns a JSON object with all the column names and their values.\",\n        \"workflowInputs\": {\n          \"value\": {\n            \"query\": \"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('query', ``, 'string') }}\",\n            \"operation\": \"row\"\n          },\n          \"schema\": [\n            {\n              \"id\": \"operation\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"operation\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"query\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"query\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            }\n          ],\n          \"mappingMode\": \"defineBelow\",\n          \"matchingColumns\": [\n            \"operation\"\n          ],\n          \"attemptToConvertTypes\": false,\n          \"convertFieldsToString\": false\n        }\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"43988dff-2270-4d09-a091-8b719c281faf\",\n      \"name\": \"Set Google Sheet URL\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        300,\n        800\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"a96650f2-3a0c-45cb-afdd-ef7ca90b21cc\",\n              \"name\": \"sheetUrl\",\n              \"type\": \"string\",\n              \"value\": \"https://docs.google.com/spreadsheets/d/1GjFBV8HpraNWG_JyuaQAgTb3zUGguh0S_25nO0CMd8A/edit#gid=736425281\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"536225e9-e33c-4819-a2dc-994d8f7c3f30\",\n      \"name\": \"Get Google sheet contents\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"position\": [\n        520,\n        800\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"sheetName\": {\n          \"__rl\": true,\n          \"mode\": \"name\",\n          \"value\": \"customer_data\"\n        },\n        \"documentId\": {\n          \"__rl\": true,\n          \"mode\": \"url\",\n          \"value\": \"={{ $json.sheetUrl }}\"\n        }\n      },\n      \"credentials\": {\n        \"googleSheetsOAuth2Api\": {\n          \"id\": \"XHvC7jIRR8A2TlUl\",\n          \"name\": \"Google Sheets account\"\n        }\n      },\n      \"typeVersion\": 4.5\n    },\n    {\n      \"id\": \"a5668364-8824-44cc-8a0f-516906d8f821\",\n      \"name\": \"Check operation\",\n      \"type\": \"n8n-nodes-base.switch\",\n      \"position\": [\n        740,\n        800\n      ],\n      \"parameters\": {\n        \"rules\": {\n          \"values\": [\n            {\n              \"outputKey\": \"Column Names\",\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 2,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"db07e0a3-0a1d-44bd-84a7-59a9442e63a6\",\n                    \"operator\": {\n                      \"type\": \"string\",\n                      \"operation\": \"equals\"\n                    },\n                    \"leftValue\": \"={{ $('When Executed by Another Workflow').item.json.operation }}\",\n                    \"rightValue\": \"column_names\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            },\n            {\n              \"outputKey\": \"Column Values\",\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 2,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"96c82351-de4a-4299-903d-8b9b3a3bb931\",\n                    \"operator\": {\n                      \"name\": \"filter.operator.equals\",\n                      \"type\": \"string\",\n                      \"operation\": \"equals\"\n                    },\n                    \"leftValue\": \"={{ $('When Executed by Another Workflow').item.json.operation }}\",\n                    \"rightValue\": \"column_values\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            },\n            {\n              \"outputKey\": \"Rows\",\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 2,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"fbc2afd0-361f-4181-94e3-4addc65a9086\",\n                    \"operator\": {\n                      \"name\": \"filter.operator.equals\",\n                      \"type\": \"string\",\n                      \"operation\": \"equals\"\n                    },\n                    \"leftValue\": \"={{ $('When Executed by Another Workflow').item.json.operation }}\",\n                    \"rightValue\": \"row\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            }\n          ]\n        },\n        \"options\": {}\n      },\n      \"typeVersion\": 3.2\n    },\n    {\n      \"id\": \"46c3a8c4-ffaf-4373-b421-4d7ee65567b2\",\n      \"name\": \"Get column names\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        1040,\n        620\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"36a7be13-e792-4c0a-9997-f61fe2a7b225\",\n              \"name\": \"response\",\n              \"type\": \"array\",\n              \"value\": \"={{ Object.keys($json) }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"190c48e8-4d4b-4e95-a694-49ab76b730da\",\n      \"name\": \"Prepare column data\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        1040,\n        800\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"bcb75b32-3253-4a31-9771-4faaf12cc2ed\",\n              \"name\": \"row_number\",\n              \"type\": \"number\",\n              \"value\": \"={{ $json.row_number }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"9c65e5e6-a3ac-4ed7-8546-b7f2b09b4f96\",\n      \"name\": \"Filter\",\n      \"type\": \"n8n-nodes-base.filter\",\n      \"position\": [\n        1040,\n        980\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"dbe89d36-e411-4765-8d4e-91a6425350ac\",\n              \"operator\": {\n                \"name\": \"filter.operator.equals\",\n                \"type\": \"string\",\n                \"operation\": \"equals\"\n              },\n              \"leftValue\": \"={{ $json.row_number.toString() }}\",\n              \"rightValue\": \"={{ $('When Executed by Another Workflow').item.json.query }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"39265f3e-a2ea-4174-952a-3665747ff856\",\n      \"name\": \"Prepare output\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        1340,\n        800\n      ],\n      \"parameters\": {\n        \"jsCode\": \"return {\\n  'response': JSON.stringify($input.all().map(x => x.json))\\n}\"\n      },\n      \"executeOnce\": true,\n      \"typeVersion\": 2\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"Filter\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Prepare output\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Simple Memory\": {\n      \"ai_memory\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"ai_memory\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Check operation\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get column names\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Prepare column data\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Filter\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get column names\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Prepare output\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get customer tool\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"List columns tool\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"OpenAI Chat Model1\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Prepare column data\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Prepare output\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Set Google Sheet URL\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get Google sheet contents\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get column values tool\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get Google sheet contents\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Check operation\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When chat message received\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When Executed by Another Workflow\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set Google Sheet URL\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}