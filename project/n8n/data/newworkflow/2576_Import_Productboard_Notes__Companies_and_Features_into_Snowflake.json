{
  "url": "https://n8n.io/workflows/2576-import-productboard-notes-companies-and-features-into-snowflake/",
  "title": "Import Productboard Notes, Companies and Features into Snowflake",
  "author": "Romain Jouhannet",
  "publish_date": "Last update 6 months ago",
  "publish_date_absolute": "2024-11-26",
  "categories": [
    {
      "name": "Product"
    }
  ],
  "workflow_json": "{\"meta\":{\"instanceId\":\"21b41c2deb1c9e3f543253a0aa6a6e2c7bd7ef6bab90ffd478aa947c17d3b352\",\"templateCredsSetupCompleted\":true},\"name\":\"Import Productboard Notes, Companies and Features into Snowflake\",\"tags\":[{\"id\":\"6Ek7V8f4xbM9vWLj\",\"name\":\"linear\",\"createdAt\":\"2024-11-08T12:12:15.330Z\",\"updatedAt\":\"2024-11-08T12:12:15.330Z\"},{\"id\":\"XpcIJ8IHNenz3bWz\",\"name\":\"productboard\",\"createdAt\":\"2024-11-08T12:12:17.249Z\",\"updatedAt\":\"2024-11-08T12:12:17.249Z\"},{\"id\":\"17\",\"name\":\"snowflake\",\"createdAt\":\"2023-09-18T17:05:02.756Z\",\"updatedAt\":\"2023-09-18T17:05:02.756Z\"}],\"nodes\":[{\"id\":\"adcb71e4-880b-4c19-acbb-0708ae4af95f\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[5620,1440],\"parameters\":{\"color\":5,\"width\":442.66083354762577,\"height\":155.09952210536395,\"content\":\"## Preview Slack Message\\n:productboard: Weekly Update in :snowflake_logo: Completed\\n27 new insights added in the last 7 days.\\n88 insights remain unprocessed.\\nYou can view the updated :metabase: dashboard below:\\n<link metabase>\\n\"},\"typeVersion\":1},{\"id\":\"8a590e59-cbcd-43f3-a0de-7c1391661fcf\",\"name\":\"Manual mapping feature\",\"type\":\"n8n-nodes-base.set\",\"position\":[4380,-180],\"parameters\":{\"fields\":{\"values\":[{\"name\":\"feature_id\",\"stringValue\":\"={{ $json.id }}\"},{\"name\":\"feature_name\",\"stringValue\":\"={{ $json.name }}\"},{\"name\":\"feature_status\",\"stringValue\":\"={{ $json.status.name }}\"},{\"name\":\"feature_start_date\",\"stringValue\":\"={{ $json.timeframe.startDate }}\"},{\"name\":\"feature_end_date\",\"stringValue\":\"={{ $json.timeframe.endDate }}\"},{\"name\":\"feature_owner\",\"stringValue\":\"={{ $json.owner.email }}\"},{\"name\":\"feature_created_at\",\"stringValue\":\"={{ $json.createdAt }}\"}]},\"include\":\"none\",\"options\":{}},\"typeVersion\":3.2},{\"id\":\"ca339c8f-71c0-432f-88ef-595b9bc24b98\",\"name\":\"get productboard companies\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[4060,220],\"parameters\":{\"url\":\"https://api.productboard.com/companies\",\"options\":{\"pagination\":{\"pagination\":{\"nextURL\":\"={{ $response.body[\\\"links\\\"][\\\"next\\\"] }}\",\"paginationMode\":\"responseContainsNextURL\",\"requestInterval\":2000,\"completeExpression\":\"={{ $response.body[\\\"links\\\"][\\\"next\\\"] === null }}\",\"paginationCompleteWhen\":\"other\"}}},\"sendHeaders\":true,\"authentication\":\"genericCredentialType\",\"genericAuthType\":\"httpHeaderAuth\",\"headerParameters\":{\"parameters\":[{\"name\":\"Content-Type\",\"value\":\"application/json\"},{\"name\":\"X-Version\",\"value\":\"1\"}]}},\"credentials\":{\"httpHeaderAuth\":{\"id\":\"Z0ptr85smbBZBIYx\",\"name\":\"Productboard\"}},\"typeVersion\":4.1,\"alwaysOutputData\":true},{\"id\":\"ba15244b-4311-4045-8087-47f05bea427e\",\"name\":\"Manual mapping companies\",\"type\":\"n8n-nodes-base.set\",\"position\":[4760,220],\"parameters\":{\"fields\":{\"values\":[{\"name\":\"company_id\",\"stringValue\":\"={{ $json.id }}\"},{\"name\":\"company_name\",\"stringValue\":\"={{ $json.name }}\"},{\"name\":\"company_domain\",\"stringValue\":\"={{ $json.domain }}\"}]},\"include\":\"none\",\"options\":{}},\"typeVersion\":3.2},{\"id\":\"d7c491cf-6545-40e1-9ee5-429e4f6b8cb4\",\"name\":\"get productboard notes\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[4500,640],\"parameters\":{\"url\":\" https://api.productboard.com/notes\",\"options\":{\"pagination\":{\"pagination\":{\"parameters\":{\"parameters\":[{\"name\":\"pageCursor\",\"value\":\"={{ $response.body.pageCursor }}\"}]},\"requestInterval\":2000,\"completeExpression\":\"={{ $response.body.pageCursor === null }}\",\"paginationCompleteWhen\":\"other\"}}},\"sendHeaders\":true,\"authentication\":\"genericCredentialType\",\"genericAuthType\":\"httpHeaderAuth\",\"headerParameters\":{\"parameters\":[{\"name\":\"Content-Type\",\"value\":\"application/json\"},{\"name\":\"X-Version\",\"value\":\"1\"}]}},\"credentials\":{\"httpHeaderAuth\":{\"id\":\"Z0ptr85smbBZBIYx\",\"name\":\"Productboard\"}},\"typeVersion\":4.1},{\"id\":\"beeb2cfc-c017-4691-b92f-ee10b943b08d\",\"name\":\"Manual mapping notes\",\"type\":\"n8n-nodes-base.set\",\"position\":[5200,640],\"parameters\":{\"fields\":{\"values\":[{\"name\":\"note_id\",\"stringValue\":\"={{ $json.id }}\"},{\"name\":\"note_title\",\"stringValue\":\"={{ $json.title }}\"},{\"name\":\"note_state\",\"stringValue\":\"={{ $json.state }}\"},{\"name\":\"note_company_id\",\"stringValue\":\"={{ $json.company.id }}\"},{\"name\":\"note_source\",\"stringValue\":\"={{ $json.source.origin }}\"},{\"name\":\"note_content\",\"stringValue\":\"={{ $json.content }}\"},{\"name\":\"note_created_at\",\"stringValue\":\"={{ $json.createdAt }}\"},{\"name\":\"note_created_by\",\"stringValue\":\"={{ $json.createdBy.name }}\"},{\"name\":\"note_owner\",\"stringValue\":\"={{ $json.owner.name }}\"},{\"name\":\"note_url\",\"stringValue\":\"={{ $json.displayUrl }}\"}]},\"include\":\"none\",\"options\":{}},\"typeVersion\":3.2},{\"id\":\"770df012-b5a0-49f9-9614-8988c2436c34\",\"name\":\"Split features\",\"type\":\"n8n-nodes-base.splitOut\",\"position\":[3920,-180],\"parameters\":{\"options\":{},\"fieldToSplitOut\":\"data\"},\"typeVersion\":1},{\"id\":\"910e27f0-b910-415e-a171-5c6cfce07dc4\",\"name\":\"Split companies\",\"type\":\"n8n-nodes-base.splitOut\",\"position\":[4300,220],\"parameters\":{\"options\":{},\"fieldToSplitOut\":\"data\"},\"typeVersion\":1},{\"id\":\"f57f3865-8970-4771-aee6-2e656215b13e\",\"name\":\"Split notes\",\"type\":\"n8n-nodes-base.splitOut\",\"position\":[4740,640],\"parameters\":{\"options\":{},\"fieldToSplitOut\":\"data\"},\"typeVersion\":1},{\"id\":\"d3939c15-9523-49c1-93ba-7942d37a0ec0\",\"name\":\"Split features in notes\",\"type\":\"n8n-nodes-base.splitOut\",\"position\":[5400,900],\"parameters\":{\"include\":\"selectedOtherFields\",\"options\":{},\"fieldToSplitOut\":\"features\",\"fieldsToInclude\":\"id\"},\"typeVersion\":1},{\"id\":\"bde6dc0c-6104-4b84-8c09-33dbe0cfe69f\",\"name\":\"Combine Feature ID + Note ID\",\"type\":\"n8n-nodes-base.set\",\"position\":[5640,900],\"parameters\":{\"fields\":{\"values\":[{\"name\":\"note_id\",\"stringValue\":\"={{ $json.id }}\"},{\"name\":\"feature_id\",\"stringValue\":\"={{ $json.features.id }}\"}]},\"include\":\"none\",\"options\":{}},\"typeVersion\":3.2},{\"id\":\"b47db956-ec4f-4342-b973-aa3277e397f2\",\"name\":\"get productboard features\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[3680,-180],\"parameters\":{\"url\":\"https://api.productboard.com/features\",\"options\":{\"pagination\":{\"pagination\":{\"nextURL\":\"={{ $response.body[\\\"links\\\"][\\\"next\\\"] }}\",\"paginationMode\":\"responseContainsNextURL\",\"requestInterval\":3000,\"completeExpression\":\"={{ $response.body[\\\"links\\\"][\\\"next\\\"] === null }}\",\"paginationCompleteWhen\":\"other\"}}},\"sendHeaders\":true,\"authentication\":\"genericCredentialType\",\"genericAuthType\":\"httpHeaderAuth\",\"headerParameters\":{\"parameters\":[{\"name\":\"Content-Type\",\"value\":\"application/json\"},{\"name\":\"X-Version\",\"value\":\"1\"}]}},\"credentials\":{\"httpHeaderAuth\":{\"id\":\"Z0ptr85smbBZBIYx\",\"name\":\"Productboard\"}},\"typeVersion\":4.1},{\"id\":\"ef3cd766-3887-4d6b-981b-d8e72a06a655\",\"name\":\"Update Productboard Notes\",\"type\":\"n8n-nodes-base.snowflake\",\"position\":[5940,660],\"parameters\":{\"table\":\"PRODUCTBOARD_NOTES\",\"columns\":\"NOTE_ID,NOTE_TITLE,NOTE_STATE,NOTE_COMPANY_ID,NOTE_SOURCE,NOTE_CONTENT,NOTE_CREATED_BY,NOTE_OWNER,NOTE_CREATED_AT,NOTE_URL\"},\"credentials\":{\"snowflake\":{\"id\":\"81\",\"name\":\"Snowflake\"}},\"typeVersion\":1},{\"id\":\"8dc03797-1ac9-47a8-8e4c-e85e9539b091\",\"name\":\"Empty Table Productboard Notes\",\"type\":\"n8n-nodes-base.snowflake\",\"position\":[4260,640],\"parameters\":{\"query\":\"TRUNCATE TABLE PRODUCTBOARD_NOTES;\",\"operation\":\"executeQuery\"},\"credentials\":{\"snowflake\":{\"id\":\"81\",\"name\":\"Snowflake\"}},\"executeOnce\":true,\"typeVersion\":1},{\"id\":\"9d5a6d6f-a672-48b0-baf8-67b608690d28\",\"name\":\"[CREATE] PRODUCTBOARD_NOTES\",\"type\":\"n8n-nodes-base.snowflake\",\"position\":[3280,1140],\"parameters\":{\"query\":\"CREATE OR REPLACE TABLE PRODUCTBOARD_NOTES (\\n    note_id STRING NOT NULL,\\n    note_title STRING,\\n    note_state STRING,\\n    note_company_id STRING,\\n    note_source STRING,\\n    note_content STRING,\\n    note_created_by STRING,\\n    note_owner STRING,\\n    note_url STRING,\\n    note_created_at TIMESTAMP_NTZ\\n);\",\"operation\":\"executeQuery\"},\"credentials\":{\"snowflake\":{\"id\":\"81\",\"name\":\"Snowflake\"}},\"typeVersion\":1},{\"id\":\"ea27f38b-3199-46aa-959f-9c1502898696\",\"name\":\"[CREATE] PRODUCTBOARD_COMPANIES\",\"type\":\"n8n-nodes-base.snowflake\",\"position\":[3520,1140],\"parameters\":{\"query\":\"CREATE OR REPLACE TABLE PRODUCTBOARD_COMPANIES (\\n    company_id STRING NOT NULL,\\n    company_name STRING,\\n    company_domain STRING\\n);\",\"operation\":\"executeQuery\"},\"credentials\":{\"snowflake\":{\"id\":\"81\",\"name\":\"Snowflake\"}},\"typeVersion\":1},{\"id\":\"7bb94678-d106-4b77-8a96-4c598b057d09\",\"name\":\"Update Productboard Companies\",\"type\":\"n8n-nodes-base.snowflake\",\"position\":[5280,220],\"parameters\":{\"table\":\"PRODUCTBOARD_COMPANIES\",\"columns\":\"COMPANY_ID,COMPANY_NAME,COMPANY_DOMAIN\"},\"credentials\":{\"snowflake\":{\"id\":\"81\",\"name\":\"Snowflake\"}},\"typeVersion\":1},{\"id\":\"86128f9b-8b16-4dc0-bdf5-1bab946716e2\",\"name\":\"Manual mapping companies db\",\"type\":\"n8n-nodes-base.set\",\"position\":[5020,220],\"parameters\":{\"fields\":{\"values\":[{\"name\":\"COMPANY_ID\",\"stringValue\":\"={{ $json.company_id }}\"},{\"name\":\"COMPANY_NAME\",\"stringValue\":\"={{ $json.company_name }}\"},{\"name\":\"COMPANY_DOMAIN\",\"stringValue\":\"={{ $json.company_domain }}\"}]},\"include\":\"none\",\"options\":{}},\"typeVersion\":3.2},{\"id\":\"dd2a3264-4171-43af-9409-ad2e79091bfb\",\"name\":\"Manual mapping notes db\",\"type\":\"n8n-nodes-base.set\",\"position\":[5720,660],\"parameters\":{\"fields\":{\"values\":[{\"name\":\"NOTE_ID\",\"stringValue\":\"={{ $json.note_id }}\"},{\"name\":\"NOTE_TITLE\",\"stringValue\":\"={{ $json.note_title }}\"},{\"name\":\"NOTE_STATE\",\"stringValue\":\"={{ $json.note_state }}\"},{\"name\":\"NOTE_COMPANY_ID\",\"stringValue\":\"={{ $json.note_company_id }}\"},{\"name\":\"NOTE_CONTENT\",\"stringValue\":\"={{ $json.note_content }}\"},{\"name\":\"NOTE_CREATED_BY\",\"stringValue\":\"={{ $json.note_created_by }}\"},{\"name\":\"NOTE_CREATED_AT\",\"stringValue\":\"={{ $json.note_created_at }}\"},{\"name\":\"NOTE_SOURCE\",\"stringValue\":\"={{ $json.note_source }}\"},{\"name\":\"NOTE_OWNER\",\"stringValue\":\"={{ $json.note_owner }}\"},{\"name\":\"NOTE_URL\",\"stringValue\":\"={{ $json.note_url }}\"}]},\"include\":\"none\",\"options\":{}},\"typeVersion\":3.2},{\"id\":\"d163879a-6020-4ace-b3ea-36c3d7b3675a\",\"name\":\"Empty Table Productboard Companies\",\"type\":\"n8n-nodes-base.snowflake\",\"position\":[3820,220],\"parameters\":{\"query\":\"TRUNCATE TABLE PRODUCTBOARD_COMPANIES;\",\"operation\":\"executeQuery\"},\"credentials\":{\"snowflake\":{\"id\":\"81\",\"name\":\"Snowflake\"}},\"executeOnce\":true,\"typeVersion\":1},{\"id\":\"0dbf1a3c-ae8b-4e7b-afb5-d1363d3d7634\",\"name\":\"[CREATE] PRODUCTBOARD_NOTES_FEATURES\",\"type\":\"n8n-nodes-base.snowflake\",\"position\":[3760,1140],\"parameters\":{\"query\":\"CREATE OR REPLACE TABLE PRODUCTBOARD_NOTES_FEATURES (\\n    note_id STRING NOT NULL,\\n    feature_id STRING\\n)\",\"operation\":\"executeQuery\"},\"credentials\":{\"snowflake\":{\"id\":\"81\",\"name\":\"Snowflake\"}},\"typeVersion\":1},{\"id\":\"fa9e8744-c348-481c-a6f9-083689ee8ea9\",\"name\":\"Manual mapping feature note IDs db\",\"type\":\"n8n-nodes-base.set\",\"position\":[6160,920],\"parameters\":{\"fields\":{\"values\":[{\"name\":\"NOTE_ID\",\"stringValue\":\"={{ $json.note_id }}\"},{\"name\":\"FEATURE_ID\",\"stringValue\":\"={{ $json.feature_id }}\"}]},\"include\":\"none\",\"options\":{}},\"typeVersion\":3.2},{\"id\":\"718f041a-dd02-4331-a704-fd1aa809212b\",\"name\":\"Update Productboard Note and Feature IDs\",\"type\":\"n8n-nodes-base.snowflake\",\"position\":[6380,920],\"parameters\":{\"table\":\"PRODUCTBOARD_NOTES_FEATURES\",\"columns\":\"NOTE_ID,FEATURE_ID\"},\"credentials\":{\"snowflake\":{\"id\":\"81\",\"name\":\"Snowflake\"}},\"typeVersion\":1},{\"id\":\"51430e95-1eb9-4c47-a0cf-e05708e6d41b\",\"name\":\"Empty Table Productboard Note and Feature IDs\",\"type\":\"n8n-nodes-base.snowflake\",\"position\":[4040,640],\"parameters\":{\"query\":\"TRUNCATE TABLE PRODUCTBOARD_NOTES_FEATURES;\",\"operation\":\"executeQuery\"},\"credentials\":{\"snowflake\":{\"id\":\"81\",\"name\":\"Snowflake\"}},\"executeOnce\":true,\"typeVersion\":1},{\"id\":\"8c03178f-baf1-4ed8-94d8-91e90ef5cd26\",\"name\":\"Loop Over Items notes\",\"type\":\"n8n-nodes-base.splitInBatches\",\"position\":[5460,640],\"parameters\":{\"options\":{},\"batchSize\":100},\"typeVersion\":3},{\"id\":\"0c6a787f-48da-479c-b45a-8122b8fada3f\",\"name\":\"Loop Over Items features notes\",\"type\":\"n8n-nodes-base.splitInBatches\",\"position\":[5900,900],\"parameters\":{\"options\":{},\"batchSize\":100},\"typeVersion\":3},{\"id\":\"1adb9ff0-be18-4ceb-aae0-62186e75668f\",\"name\":\"[CREATE] PRODUCTBOARD_FEATURES\",\"type\":\"n8n-nodes-base.snowflake\",\"position\":[3040,1140],\"parameters\":{\"query\":\"CREATE OR REPLACE TABLE PRODUCTBOARD_FEATURES (\\n    feature_id STRING NOT NULL,\\n    feature_name STRING,\\n    feature_status STRING,\\n    feature_start_date STRING,\\n    feature_end_date STRING,\\n    feature_owner STRING,\\n    feature_created_at STRING\\n);\",\"operation\":\"executeQuery\"},\"credentials\":{\"snowflake\":{\"id\":\"81\",\"name\":\"Snowflake\"}},\"typeVersion\":1},{\"id\":\"0357ba46-4934-4c3f-8f0a-676496a6eee6\",\"name\":\"Empty Table Productboard Features\",\"type\":\"n8n-nodes-base.snowflake\",\"position\":[3440,-180],\"parameters\":{\"query\":\"TRUNCATE TABLE PRODUCTBOARD_FEATURES;\",\"operation\":\"executeQuery\"},\"credentials\":{\"snowflake\":{\"id\":\"81\",\"name\":\"Snowflake\"}},\"executeOnce\":true,\"typeVersion\":1},{\"id\":\"df076304-ce27-4801-8e0f-c268b313ef4e\",\"name\":\"Loop Over Items features\",\"type\":\"n8n-nodes-base.splitInBatches\",\"position\":[4640,-180],\"parameters\":{\"options\":{},\"batchSize\":100},\"typeVersion\":3},{\"id\":\"40732e40-5ff2-4b1f-b300-b6b734e31637\",\"name\":\"Manual mapping features db\",\"type\":\"n8n-nodes-base.set\",\"position\":[4900,-160],\"parameters\":{\"fields\":{\"values\":[{\"name\":\"FEATURE_ID\",\"stringValue\":\"={{ $json.feature_id }}\"},{\"name\":\"FEATURE_NAME\",\"stringValue\":\"={{ $json.feature_name }}\"},{\"name\":\"FEATURE_STATUS\",\"stringValue\":\"={{ $json.feature_status }}\"},{\"name\":\"FEATURE_START_DATE\",\"stringValue\":\"={{ $json.feature_start_date }}\"},{\"name\":\"FEATURE_END_DATE\",\"stringValue\":\"={{ $json.feature_end_date }}\"},{\"name\":\"FEATURE_OWNER\",\"stringValue\":\"={{ $json.feature_owner }}\"},{\"name\":\"FEATURE_CREATED_AT\",\"stringValue\":\"={{ $json.feature_created_at }}\"}]},\"include\":\"none\",\"options\":{}},\"typeVersion\":3.2},{\"id\":\"59a838c4-fef0-4902-b6d6-418934ac986f\",\"name\":\"Update Productboard Features\",\"type\":\"n8n-nodes-base.snowflake\",\"position\":[5140,-160],\"parameters\":{\"table\":\"PRODUCTBOARD_FEATURES\",\"columns\":\"FEATURE_ID,FEATURE_NAME,FEATURE_STATUS,FEATURE_START_DATE,FEATURE_END_DATE,FEATURE_OWNER,FEATURE_CREATED_AT\"},\"credentials\":{\"snowflake\":{\"id\":\"81\",\"name\":\"Snowflake\"}},\"typeVersion\":1},{\"id\":\"110ebd3a-50ac-4e9f-9297-f64759dfdd18\",\"name\":\"Schedule Trigger\",\"type\":\"n8n-nodes-base.scheduleTrigger\",\"position\":[2980,-180],\"parameters\":{\"rule\":{\"interval\":[{\"field\":\"weeks\",\"triggerAtDay\":[1],\"triggerAtHour\":8}]}},\"typeVersion\":1.1},{\"id\":\"3eb88f88-8fad-4aaf-b6f9-6f7d87e30018\",\"name\":\"Slack\",\"type\":\"n8n-nodes-base.slack\",\"onError\":\"continueRegularOutput\",\"position\":[5900,1220],\"parameters\":{\"text\":\"=\",\"select\":\"channel\",\"blocksUi\":\"={\\n  \\\"blocks\\\": [\\n    {\\n      \\\"type\\\": \\\"section\\\",\\n      \\\"text\\\": {\\n        \\\"type\\\": \\\"mrkdwn\\\",\\n        \\\"text\\\": \\\":productboard: Weekly Update in :snowflake_logo: Completed\\\\n\\\\n*{{ $json.NOTES_7_DAYS }}* new insights added in the last 7 days.\\\\n\\\\n*{{ $json.NOTES_UNPROCESSED }}* insights remain unprocessed.\\\\n\\\\nYou can view the updated :metabase: dashboard below:\\\"\\n      }\\n    },\\n    {\\n      \\\"type\\\": \\\"actions\\\",\\n      \\\"elements\\\": [\\n        {\\n          \\\"type\\\": \\\"button\\\",\\n          \\\"text\\\": {\\n            \\\"type\\\": \\\"plain_text\\\",\\n            \\\"text\\\": \\\"Open Dashboard\\\",\\n            \\\"emoji\\\": true\\n          },\\n          \\\"url\\\": \\\"https://metabase.com\\\"\\n        }\\n      ]\\n    }\\n  ]\\n}\",\"channelId\":{\"__rl\":true,\"mode\":\"name\",\"value\":\"#product-notifications\"},\"messageType\":\"block\",\"otherOptions\":{}},\"credentials\":{\"slackApi\":{\"id\":\"SG3oDwwLGpxwoJSO\",\"name\":\"Gardien Slack bot\"}},\"executeOnce\":true,\"retryOnFail\":false,\"typeVersion\":2.1},{\"id\":\"3a16d947-a218-4ec2-8081-19b676bb51c3\",\"name\":\"Count Notes Last 7 days and Unprocessed\",\"type\":\"n8n-nodes-base.snowflake\",\"position\":[5660,1220],\"parameters\":{\"query\":\"SELECT\\n    COUNT(DISTINCT CASE \\n        WHEN DATEDIFF(DAY, NOTE_CREATED_AT, CURRENT_DATE()) <= 7 THEN note_id \\n    END) AS notes_7_days,\\n    COUNT(DISTINCT CASE \\n        WHEN NOTE_STATE = 'unprocessed' THEN note_id \\n    END) AS notes_unprocessed\\nFROM PRODUCTBOARD_NOTES;\\n\",\"operation\":\"executeQuery\"},\"credentials\":{\"snowflake\":{\"id\":\"81\",\"name\":\"Snowflake\"}},\"executeOnce\":true,\"typeVersion\":1},{\"id\":\"2bdfb96c-1c38-444d-9507-ab74f3572129\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[2980,1060],\"parameters\":{\"color\":5,\"width\":983.4896175671602,\"height\":314.88047081122676,\"content\":\"## Setup snowflake tables\"},\"typeVersion\":1}],\"active\":false,\"pinData\":{},\"settings\":{\"executionOrder\":\"v1\"},\"versionId\":\"\",\"connections\":{\"Split notes\":{\"main\":[[{\"node\":\"Manual mapping notes\",\"type\":\"main\",\"index\":0},{\"node\":\"Split features in notes\",\"type\":\"main\",\"index\":0},{\"node\":\"Count Notes Last 7 days and Unprocessed\",\"type\":\"main\",\"index\":0}]]},\"Split features\":{\"main\":[[{\"node\":\"Manual mapping feature\",\"type\":\"main\",\"index\":0}]]},\"Split companies\":{\"main\":[[{\"node\":\"Manual mapping companies\",\"type\":\"main\",\"index\":0}]]},\"Schedule Trigger\":{\"main\":[[{\"node\":\"Empty Table Productboard Features\",\"type\":\"main\",\"index\":0}]]},\"Manual mapping notes\":{\"main\":[[{\"node\":\"Loop Over Items notes\",\"type\":\"main\",\"index\":0}]]},\"Loop Over Items notes\":{\"main\":[[],[{\"node\":\"Manual mapping notes db\",\"type\":\"main\",\"index\":0}]]},\"Manual mapping feature\":{\"main\":[[{\"node\":\"Loop Over Items features\",\"type\":\"main\",\"index\":0}]]},\"get productboard notes\":{\"main\":[[{\"node\":\"Split notes\",\"type\":\"main\",\"index\":0}]]},\"Manual mapping notes db\":{\"main\":[[{\"node\":\"Update Productboard Notes\",\"type\":\"main\",\"index\":0}]]},\"Split features in notes\":{\"main\":[[{\"node\":\"Combine Feature ID + Note ID\",\"type\":\"main\",\"index\":0}]]},\"Loop Over Items features\":{\"main\":[[{\"node\":\"Empty Table Productboard Companies\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Manual mapping features db\",\"type\":\"main\",\"index\":0}]]},\"Manual mapping companies\":{\"main\":[[{\"node\":\"Manual mapping companies db\",\"type\":\"main\",\"index\":0}]]},\"Update Productboard Notes\":{\"main\":[[{\"node\":\"Loop Over Items notes\",\"type\":\"main\",\"index\":0}]]},\"get productboard features\":{\"main\":[[{\"node\":\"Split features\",\"type\":\"main\",\"index\":0}]]},\"Manual mapping features db\":{\"main\":[[{\"node\":\"Update Productboard Features\",\"type\":\"main\",\"index\":0}]]},\"get productboard companies\":{\"main\":[[{\"node\":\"Split companies\",\"type\":\"main\",\"index\":0}]]},\"Manual mapping companies db\":{\"main\":[[{\"node\":\"Update Productboard Companies\",\"type\":\"main\",\"index\":0}]]},\"Combine Feature ID + Note ID\":{\"main\":[[{\"node\":\"Loop Over Items features notes\",\"type\":\"main\",\"index\":0}]]},\"Update Productboard Features\":{\"main\":[[{\"node\":\"Loop Over Items features\",\"type\":\"main\",\"index\":0}]]},\"Update Productboard Companies\":{\"main\":[[{\"node\":\"Empty Table Productboard Note and Feature IDs\",\"type\":\"main\",\"index\":0}]]},\"Empty Table Productboard Notes\":{\"main\":[[{\"node\":\"get productboard notes\",\"type\":\"main\",\"index\":0}]]},\"Loop Over Items features notes\":{\"main\":[[],[{\"node\":\"Manual mapping feature note IDs db\",\"type\":\"main\",\"index\":0}]]},\"Empty Table Productboard Features\":{\"main\":[[{\"node\":\"get productboard features\",\"type\":\"main\",\"index\":0}]]},\"Empty Table Productboard Companies\":{\"main\":[[{\"node\":\"get productboard companies\",\"type\":\"main\",\"index\":0}]]},\"Manual mapping feature note IDs db\":{\"main\":[[{\"node\":\"Update Productboard Note and Feature IDs\",\"type\":\"main\",\"index\":0}]]},\"Count Notes Last 7 days and Unprocessed\":{\"main\":[[{\"node\":\"Slack\",\"type\":\"main\",\"index\":0}]]},\"Update Productboard Note and Feature IDs\":{\"main\":[[{\"node\":\"Loop Over Items features notes\",\"type\":\"main\",\"index\":0}]]},\"Empty Table Productboard Note and Feature IDs\":{\"main\":[[{\"node\":\"Empty Table Productboard Notes\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "This workflow imports Productboard data into Snowflake, automating data extraction, mapping, and updates for features, companies, and notes. It supports scheduled weekly updates, data cleansing, and Slack notifications summarizing the latest insights.\n\n## Features\n\n  * Fetches data from Productboard (features, companies, notes).\n  * Maps and processes data for Snowflake tables.\n  * Automates table creation, truncation, and updates.\n  * Summarizes new and unprocessed notes.\n  * Sends weekly Slack notifications with key insights.\n\n\n\n## Setup\n\n  * Configure Productboard and Snowflake credentials in n8n.\n  * Update Snowflake table schemas to match your setup.\n  * Replace Slack channel ID and dashboard URL in the notification node.\n  * Activate the workflow and set the desired schedule.\n\n\n",
  "crawled_at": "2025-05-26T00:21:25.585552",
  "readme_zh": "该工作流将Productboard数据自动导入Snowflake，实现功能模块、企业及笔记的数据抽取、映射与更新自动化。支持每周定时更新、数据清洗，并通过Slack通知推送最新洞察摘要。\n\n## 功能特点\n\n  * 从Productboard获取数据（功能模块/企业/笔记）\n  * 对数据进行映射处理以适配Snowflake表结构\n  * 自动执行表创建、清空及更新操作\n  * 汇总新增及未处理的笔记\n  * 每周发送含关键洞察的Slack通知\n\n## 配置说明\n\n  * 在n8n中配置Productboard和Snowflake凭证\n  * 调整Snowflake表结构以匹配实际需求\n  * 替换通知节点中的Slack频道ID和仪表盘URL\n  * 激活工作流并设置执行计划",
  "title_zh": "将Productboard中的笔记、公司和功能导入至Snowflake",
  "publish_date_zh": "最后更新于5个月前",
  "workflow_json_zh": "{\n  \"meta\": {\n    \"instanceId\": \"21b41c2deb1c9e3f543253a0aa6a6e2c7bd7ef6bab90ffd478aa947c17d3b352\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"name\": \"Import Productboard Notes, Companies and Features into Snowflake\",\n  \"tags\": [\n    {\n      \"id\": \"6Ek7V8f4xbM9vWLj\",\n      \"name\": \"linear\",\n      \"createdAt\": \"2024-11-08T12:12:15.330Z\",\n      \"updatedAt\": \"2024-11-08T12:12:15.330Z\"\n    },\n    {\n      \"id\": \"XpcIJ8IHNenz3bWz\",\n      \"name\": \"productboard\",\n      \"createdAt\": \"2024-11-08T12:12:17.249Z\",\n      \"updatedAt\": \"2024-11-08T12:12:17.249Z\"\n    },\n    {\n      \"id\": \"17\",\n      \"name\": \"snowflake\",\n      \"createdAt\": \"2023-09-18T17:05:02.756Z\",\n      \"updatedAt\": \"2023-09-18T17:05:02.756Z\"\n    }\n  ],\n  \"nodes\": [\n    {\n      \"id\": \"adcb71e4-880b-4c19-acbb-0708ae4af95f\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        5620,\n        1440\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 442.66083354762577,\n        \"height\": 155.09952210536395,\n        \"content\": \"## Slack消息预览\\n:productboard: 每周更新于 :snowflake_logo: 已完成\\n过去7天新增27条洞察。\\n仍有88条洞察待处理。\\n您可以通过下方链接查看更新后的 :metabase: 仪表板：\\n<link metabase>\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"8a590e59-cbcd-43f3-a0de-7c1391661fcf\",\n      \"name\": \"Manual mapping feature\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        4380,\n        -180\n      ],\n      \"parameters\": {\n        \"fields\": {\n          \"values\": [\n            {\n              \"name\": \"feature_id\",\n              \"stringValue\": \"={{ $json.id }}\"\n            },\n            {\n              \"name\": \"feature_name\",\n              \"stringValue\": \"={{ $json.name }}\"\n            },\n            {\n              \"name\": \"feature_status\",\n              \"stringValue\": \"={{ $json.status.name }}\"\n            },\n            {\n              \"name\": \"feature_start_date\",\n              \"stringValue\": \"={{ $json.timeframe.startDate }}\"\n            },\n            {\n              \"name\": \"feature_end_date\",\n              \"stringValue\": \"={{ $json.timeframe.endDate }}\"\n            },\n            {\n              \"name\": \"feature_owner\",\n              \"stringValue\": \"={{ $json.owner.email }}\"\n            },\n            {\n              \"name\": \"feature_created_at\",\n              \"stringValue\": \"={{ $json.createdAt }}\"\n            }\n          ]\n        },\n        \"include\": \"none\",\n        \"options\": {}\n      },\n      \"typeVersion\": 3.2\n    },\n    {\n      \"id\": \"ca339c8f-71c0-432f-88ef-595b9bc24b98\",\n      \"name\": \"get productboard companies\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        4060,\n        220\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.productboard.com/companies\",\n        \"options\": {\n          \"pagination\": {\n            \"pagination\": {\n              \"nextURL\": \"={{ $response.body[\\\"links\\\"][\\\"next\\\"] }}\",\n              \"paginationMode\": \"responseContainsNextURL\",\n              \"requestInterval\": 2000,\n              \"completeExpression\": \"={{ $response.body[\\\"links\\\"][\\\"next\\\"] === null }}\",\n              \"paginationCompleteWhen\": \"other\"\n            }\n          }\n        },\n        \"sendHeaders\": true,\n        \"authentication\": \"genericCredentialType\",\n        \"genericAuthType\": \"httpHeaderAuth\",\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"Content-Type\",\n              \"value\": \"application/json\"\n            },\n            {\n              \"name\": \"X-Version\",\n              \"value\": \"1\"\n            }\n          ]\n        }\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": {\n          \"id\": \"Z0ptr85smbBZBIYx\",\n          \"name\": \"Productboard\"\n        }\n      },\n      \"typeVersion\": 4.1,\n      \"alwaysOutputData\": true\n    },\n    {\n      \"id\": \"ba15244b-4311-4045-8087-47f05bea427e\",\n      \"name\": \"Manual mapping companies\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        4760,\n        220\n      ],\n      \"parameters\": {\n        \"fields\": {\n          \"values\": [\n            {\n              \"name\": \"company_id\",\n              \"stringValue\": \"={{ $json.id }}\"\n            },\n            {\n              \"name\": \"company_name\",\n              \"stringValue\": \"={{ $json.name }}\"\n            },\n            {\n              \"name\": \"company_domain\",\n              \"stringValue\": \"={{ $json.domain }}\"\n            }\n          ]\n        },\n        \"include\": \"none\",\n        \"options\": {}\n      },\n      \"typeVersion\": 3.2\n    },\n    {\n      \"id\": \"d7c491cf-6545-40e1-9ee5-429e4f6b8cb4\",\n      \"name\": \"get productboard notes\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        4500,\n        640\n      ],\n      \"parameters\": {\n        \"url\": \" https://api.productboard.com/notes\",\n        \"options\": {\n          \"pagination\": {\n            \"pagination\": {\n              \"parameters\": {\n                \"parameters\": [\n                  {\n                    \"name\": \"pageCursor\",\n                    \"value\": \"={{ $response.body.pageCursor }}\"\n                  }\n                ]\n              },\n              \"requestInterval\": 2000,\n              \"completeExpression\": \"={{ $response.body.pageCursor === null }}\",\n              \"paginationCompleteWhen\": \"other\"\n            }\n          }\n        },\n        \"sendHeaders\": true,\n        \"authentication\": \"genericCredentialType\",\n        \"genericAuthType\": \"httpHeaderAuth\",\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"Content-Type\",\n              \"value\": \"application/json\"\n            },\n            {\n              \"name\": \"X-Version\",\n              \"value\": \"1\"\n            }\n          ]\n        }\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": {\n          \"id\": \"Z0ptr85smbBZBIYx\",\n          \"name\": \"Productboard\"\n        }\n      },\n      \"typeVersion\": 4.1\n    },\n    {\n      \"id\": \"beeb2cfc-c017-4691-b92f-ee10b943b08d\",\n      \"name\": \"Manual mapping notes\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        5200,\n        640\n      ],\n      \"parameters\": {\n        \"fields\": {\n          \"values\": [\n            {\n              \"name\": \"note_id\",\n              \"stringValue\": \"={{ $json.id }}\"\n            },\n            {\n              \"name\": \"note_title\",\n              \"stringValue\": \"={{ $json.title }}\"\n            },\n            {\n              \"name\": \"note_state\",\n              \"stringValue\": \"={{ $json.state }}\"\n            },\n            {\n              \"name\": \"note_company_id\",\n              \"stringValue\": \"={{ $json.company.id }}\"\n            },\n            {\n              \"name\": \"note_source\",\n              \"stringValue\": \"={{ $json.source.origin }}\"\n            },\n            {\n              \"name\": \"note_content\",\n              \"stringValue\": \"={{ $json.content }}\"\n            },\n            {\n              \"name\": \"note_created_at\",\n              \"stringValue\": \"={{ $json.createdAt }}\"\n            },\n            {\n              \"name\": \"note_created_by\",\n              \"stringValue\": \"={{ $json.createdBy.name }}\"\n            },\n            {\n              \"name\": \"note_owner\",\n              \"stringValue\": \"={{ $json.owner.name }}\"\n            },\n            {\n              \"name\": \"note_url\",\n              \"stringValue\": \"={{ $json.displayUrl }}\"\n            }\n          ]\n        },\n        \"include\": \"none\",\n        \"options\": {}\n      },\n      \"typeVersion\": 3.2\n    },\n    {\n      \"id\": \"770df012-b5a0-49f9-9614-8988c2436c34\",\n      \"name\": \"Split features\",\n      \"type\": \"n8n-nodes-base.splitOut\",\n      \"position\": [\n        3920,\n        -180\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"fieldToSplitOut\": \"data\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"910e27f0-b910-415e-a171-5c6cfce07dc4\",\n      \"name\": \"Split companies\",\n      \"type\": \"n8n-nodes-base.splitOut\",\n      \"position\": [\n        4300,\n        220\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"fieldToSplitOut\": \"data\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"f57f3865-8970-4771-aee6-2e656215b13e\",\n      \"name\": \"Split notes\",\n      \"type\": \"n8n-nodes-base.splitOut\",\n      \"position\": [\n        4740,\n        640\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"fieldToSplitOut\": \"data\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"d3939c15-9523-49c1-93ba-7942d37a0ec0\",\n      \"name\": \"Split features in notes\",\n      \"type\": \"n8n-nodes-base.splitOut\",\n      \"position\": [\n        5400,\n        900\n      ],\n      \"parameters\": {\n        \"include\": \"selectedOtherFields\",\n        \"options\": {},\n        \"fieldToSplitOut\": \"features\",\n        \"fieldsToInclude\": \"id\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"bde6dc0c-6104-4b84-8c09-33dbe0cfe69f\",\n      \"name\": \"Combine Feature ID + Note ID\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        5640,\n        900\n      ],\n      \"parameters\": {\n        \"fields\": {\n          \"values\": [\n            {\n              \"name\": \"note_id\",\n              \"stringValue\": \"={{ $json.id }}\"\n            },\n            {\n              \"name\": \"feature_id\",\n              \"stringValue\": \"={{ $json.features.id }}\"\n            }\n          ]\n        },\n        \"include\": \"none\",\n        \"options\": {}\n      },\n      \"typeVersion\": 3.2\n    },\n    {\n      \"id\": \"b47db956-ec4f-4342-b973-aa3277e397f2\",\n      \"name\": \"get productboard features\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        3680,\n        -180\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.productboard.com/features\",\n        \"options\": {\n          \"pagination\": {\n            \"pagination\": {\n              \"nextURL\": \"={{ $response.body[\\\"links\\\"][\\\"next\\\"] }}\",\n              \"paginationMode\": \"responseContainsNextURL\",\n              \"requestInterval\": 3000,\n              \"completeExpression\": \"={{ $response.body[\\\"links\\\"][\\\"next\\\"] === null }}\",\n              \"paginationCompleteWhen\": \"other\"\n            }\n          }\n        },\n        \"sendHeaders\": true,\n        \"authentication\": \"genericCredentialType\",\n        \"genericAuthType\": \"httpHeaderAuth\",\n        \"headerParameters\": {\n          \"parameters\": [\n            {\n              \"name\": \"Content-Type\",\n              \"value\": \"application/json\"\n            },\n            {\n              \"name\": \"X-Version\",\n              \"value\": \"1\"\n            }\n          ]\n        }\n      },\n      \"credentials\": {\n        \"httpHeaderAuth\": {\n          \"id\": \"Z0ptr85smbBZBIYx\",\n          \"name\": \"Productboard\"\n        }\n      },\n      \"typeVersion\": 4.1\n    },\n    {\n      \"id\": \"ef3cd766-3887-4d6b-981b-d8e72a06a655\",\n      \"name\": \"Update Productboard Notes\",\n      \"type\": \"n8n-nodes-base.snowflake\",\n      \"position\": [\n        5940,\n        660\n      ],\n      \"parameters\": {\n        \"table\": \"PRODUCTBOARD_NOTES\",\n        \"columns\": \"NOTE_ID,NOTE_TITLE,NOTE_STATE,NOTE_COMPANY_ID,NOTE_SOURCE,NOTE_CONTENT,NOTE_CREATED_BY,NOTE_OWNER,NOTE_CREATED_AT,NOTE_URL\"\n      },\n      \"credentials\": {\n        \"snowflake\": {\n          \"id\": \"81\",\n          \"name\": \"Snowflake\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"8dc03797-1ac9-47a8-8e4c-e85e9539b091\",\n      \"name\": \"Empty Table Productboard Notes\",\n      \"type\": \"n8n-nodes-base.snowflake\",\n      \"position\": [\n        4260,\n        640\n      ],\n      \"parameters\": {\n        \"query\": \"TRUNCATE TABLE PRODUCTBOARD_NOTES;\",\n        \"operation\": \"executeQuery\"\n      },\n      \"credentials\": {\n        \"snowflake\": {\n          \"id\": \"81\",\n          \"name\": \"Snowflake\"\n        }\n      },\n      \"executeOnce\": true,\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"9d5a6d6f-a672-48b0-baf8-67b608690d28\",\n      \"name\": \"[CREATE] PRODUCTBOARD_NOTES\",\n      \"type\": \"n8n-nodes-base.snowflake\",\n      \"position\": [\n        3280,\n        1140\n      ],\n      \"parameters\": {\n        \"query\": \"CREATE OR REPLACE TABLE PRODUCTBOARD_NOTES (\\n    note_id STRING NOT NULL,\\n    note_title STRING,\\n    note_state STRING,\\n    note_company_id STRING,\\n    note_source STRING,\\n    note_content STRING,\\n    note_created_by STRING,\\n    note_owner STRING,\\n    note_url STRING,\\n    note_created_at TIMESTAMP_NTZ\\n);\",\n        \"operation\": \"executeQuery\"\n      },\n      \"credentials\": {\n        \"snowflake\": {\n          \"id\": \"81\",\n          \"name\": \"Snowflake\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"ea27f38b-3199-46aa-959f-9c1502898696\",\n      \"name\": \"[CREATE] PRODUCTBOARD_COMPANIES\",\n      \"type\": \"n8n-nodes-base.snowflake\",\n      \"position\": [\n        3520,\n        1140\n      ],\n      \"parameters\": {\n        \"query\": \"CREATE OR REPLACE TABLE PRODUCTBOARD_COMPANIES (\\n    company_id STRING NOT NULL,\\n    company_name STRING,\\n    company_domain STRING\\n);\",\n        \"operation\": \"executeQuery\"\n      },\n      \"credentials\": {\n        \"snowflake\": {\n          \"id\": \"81\",\n          \"name\": \"Snowflake\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"7bb94678-d106-4b77-8a96-4c598b057d09\",\n      \"name\": \"Update Productboard Companies\",\n      \"type\": \"n8n-nodes-base.snowflake\",\n      \"position\": [\n        5280,\n        220\n      ],\n      \"parameters\": {\n        \"table\": \"PRODUCTBOARD_COMPANIES\",\n        \"columns\": \"COMPANY_ID,COMPANY_NAME,COMPANY_DOMAIN\"\n      },\n      \"credentials\": {\n        \"snowflake\": {\n          \"id\": \"81\",\n          \"name\": \"Snowflake\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"86128f9b-8b16-4dc0-bdf5-1bab946716e2\",\n      \"name\": \"Manual mapping companies db\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        5020,\n        220\n      ],\n      \"parameters\": {\n        \"fields\": {\n          \"values\": [\n            {\n              \"name\": \"COMPANY_ID\",\n              \"stringValue\": \"={{ $json.company_id }}\"\n            },\n            {\n              \"name\": \"COMPANY_NAME\",\n              \"stringValue\": \"={{ $json.company_name }}\"\n            },\n            {\n              \"name\": \"COMPANY_DOMAIN\",\n              \"stringValue\": \"={{ $json.company_domain }}\"\n            }\n          ]\n        },\n        \"include\": \"none\",\n        \"options\": {}\n      },\n      \"typeVersion\": 3.2\n    },\n    {\n      \"id\": \"dd2a3264-4171-43af-9409-ad2e79091bfb\",\n      \"name\": \"Manual mapping notes db\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        5720,\n        660\n      ],\n      \"parameters\": {\n        \"fields\": {\n          \"values\": [\n            {\n              \"name\": \"NOTE_ID\",\n              \"stringValue\": \"={{ $json.note_id }}\"\n            },\n            {\n              \"name\": \"NOTE_TITLE\",\n              \"stringValue\": \"={{ $json.note_title }}\"\n            },\n            {\n              \"name\": \"NOTE_STATE\",\n              \"stringValue\": \"={{ $json.note_state }}\"\n            },\n            {\n              \"name\": \"NOTE_COMPANY_ID\",\n              \"stringValue\": \"={{ $json.note_company_id }}\"\n            },\n            {\n              \"name\": \"NOTE_CONTENT\",\n              \"stringValue\": \"={{ $json.note_content }}\"\n            },\n            {\n              \"name\": \"NOTE_CREATED_BY\",\n              \"stringValue\": \"={{ $json.note_created_by }}\"\n            },\n            {\n              \"name\": \"NOTE_CREATED_AT\",\n              \"stringValue\": \"={{ $json.note_created_at }}\"\n            },\n            {\n              \"name\": \"NOTE_SOURCE\",\n              \"stringValue\": \"={{ $json.note_source }}\"\n            },\n            {\n              \"name\": \"NOTE_OWNER\",\n              \"stringValue\": \"={{ $json.note_owner }}\"\n            },\n            {\n              \"name\": \"NOTE_URL\",\n              \"stringValue\": \"={{ $json.note_url }}\"\n            }\n          ]\n        },\n        \"include\": \"none\",\n        \"options\": {}\n      },\n      \"typeVersion\": 3.2\n    },\n    {\n      \"id\": \"d163879a-6020-4ace-b3ea-36c3d7b3675a\",\n      \"name\": \"Empty Table Productboard Companies\",\n      \"type\": \"n8n-nodes-base.snowflake\",\n      \"position\": [\n        3820,\n        220\n      ],\n      \"parameters\": {\n        \"query\": \"TRUNCATE TABLE PRODUCTBOARD_COMPANIES;\",\n        \"operation\": \"executeQuery\"\n      },\n      \"credentials\": {\n        \"snowflake\": {\n          \"id\": \"81\",\n          \"name\": \"Snowflake\"\n        }\n      },\n      \"executeOnce\": true,\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"0dbf1a3c-ae8b-4e7b-afb5-d1363d3d7634\",\n      \"name\": \"[CREATE] PRODUCTBOARD_NOTES_FEATURES\",\n      \"type\": \"n8n-nodes-base.snowflake\",\n      \"position\": [\n        3760,\n        1140\n      ],\n      \"parameters\": {\n        \"query\": \"CREATE OR REPLACE TABLE PRODUCTBOARD_NOTES_FEATURES (\\n    note_id STRING NOT NULL,\\n    feature_id STRING\\n)\",\n        \"operation\": \"executeQuery\"\n      },\n      \"credentials\": {\n        \"snowflake\": {\n          \"id\": \"81\",\n          \"name\": \"Snowflake\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"fa9e8744-c348-481c-a6f9-083689ee8ea9\",\n      \"name\": \"Manual mapping feature note IDs db\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        6160,\n        920\n      ],\n      \"parameters\": {\n        \"fields\": {\n          \"values\": [\n            {\n              \"name\": \"NOTE_ID\",\n              \"stringValue\": \"={{ $json.note_id }}\"\n            },\n            {\n              \"name\": \"FEATURE_ID\",\n              \"stringValue\": \"={{ $json.feature_id }}\"\n            }\n          ]\n        },\n        \"include\": \"none\",\n        \"options\": {}\n      },\n      \"typeVersion\": 3.2\n    },\n    {\n      \"id\": \"718f041a-dd02-4331-a704-fd1aa809212b\",\n      \"name\": \"Update Productboard Note and Feature IDs\",\n      \"type\": \"n8n-nodes-base.snowflake\",\n      \"position\": [\n        6380,\n        920\n      ],\n      \"parameters\": {\n        \"table\": \"PRODUCTBOARD_NOTES_FEATURES\",\n        \"columns\": \"NOTE_ID,FEATURE_ID\"\n      },\n      \"credentials\": {\n        \"snowflake\": {\n          \"id\": \"81\",\n          \"name\": \"Snowflake\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"51430e95-1eb9-4c47-a0cf-e05708e6d41b\",\n      \"name\": \"Empty Table Productboard Note and Feature IDs\",\n      \"type\": \"n8n-nodes-base.snowflake\",\n      \"position\": [\n        4040,\n        640\n      ],\n      \"parameters\": {\n        \"query\": \"TRUNCATE TABLE PRODUCTBOARD_NOTES_FEATURES;\",\n        \"operation\": \"executeQuery\"\n      },\n      \"credentials\": {\n        \"snowflake\": {\n          \"id\": \"81\",\n          \"name\": \"Snowflake\"\n        }\n      },\n      \"executeOnce\": true,\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"8c03178f-baf1-4ed8-94d8-91e90ef5cd26\",\n      \"name\": \"Loop Over Items notes\",\n      \"type\": \"n8n-nodes-base.splitInBatches\",\n      \"position\": [\n        5460,\n        640\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"batchSize\": 100\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"0c6a787f-48da-479c-b45a-8122b8fada3f\",\n      \"name\": \"Loop Over Items features notes\",\n      \"type\": \"n8n-nodes-base.splitInBatches\",\n      \"position\": [\n        5900,\n        900\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"batchSize\": 100\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"1adb9ff0-be18-4ceb-aae0-62186e75668f\",\n      \"name\": \"[CREATE] PRODUCTBOARD_FEATURES\",\n      \"type\": \"n8n-nodes-base.snowflake\",\n      \"position\": [\n        3040,\n        1140\n      ],\n      \"parameters\": {\n        \"query\": \"CREATE OR REPLACE TABLE PRODUCTBOARD_FEATURES (\\n    feature_id STRING NOT NULL,\\n    feature_name STRING,\\n    feature_status STRING,\\n    feature_start_date STRING,\\n    feature_end_date STRING,\\n    feature_owner STRING,\\n    feature_created_at STRING\\n);\",\n        \"operation\": \"executeQuery\"\n      },\n      \"credentials\": {\n        \"snowflake\": {\n          \"id\": \"81\",\n          \"name\": \"Snowflake\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"0357ba46-4934-4c3f-8f0a-676496a6eee6\",\n      \"name\": \"Empty Table Productboard Features\",\n      \"type\": \"n8n-nodes-base.snowflake\",\n      \"position\": [\n        3440,\n        -180\n      ],\n      \"parameters\": {\n        \"query\": \"TRUNCATE TABLE PRODUCTBOARD_FEATURES;\",\n        \"operation\": \"executeQuery\"\n      },\n      \"credentials\": {\n        \"snowflake\": {\n          \"id\": \"81\",\n          \"name\": \"Snowflake\"\n        }\n      },\n      \"executeOnce\": true,\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"df076304-ce27-4801-8e0f-c268b313ef4e\",\n      \"name\": \"Loop Over Items features\",\n      \"type\": \"n8n-nodes-base.splitInBatches\",\n      \"position\": [\n        4640,\n        -180\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"batchSize\": 100\n      },\n      \"typeVersion\": 3\n    },\n    {\n      \"id\": \"40732e40-5ff2-4b1f-b300-b6b734e31637\",\n      \"name\": \"Manual mapping features db\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        4900,\n        -160\n      ],\n      \"parameters\": {\n        \"fields\": {\n          \"values\": [\n            {\n              \"name\": \"FEATURE_ID\",\n              \"stringValue\": \"={{ $json.feature_id }}\"\n            },\n            {\n              \"name\": \"FEATURE_NAME\",\n              \"stringValue\": \"={{ $json.feature_name }}\"\n            },\n            {\n              \"name\": \"FEATURE_STATUS\",\n              \"stringValue\": \"={{ $json.feature_status }}\"\n            },\n            {\n              \"name\": \"FEATURE_START_DATE\",\n              \"stringValue\": \"={{ $json.feature_start_date }}\"\n            },\n            {\n              \"name\": \"FEATURE_END_DATE\",\n              \"stringValue\": \"={{ $json.feature_end_date }}\"\n            },\n            {\n              \"name\": \"FEATURE_OWNER\",\n              \"stringValue\": \"={{ $json.feature_owner }}\"\n            },\n            {\n              \"name\": \"FEATURE_CREATED_AT\",\n              \"stringValue\": \"={{ $json.feature_created_at }}\"\n            }\n          ]\n        },\n        \"include\": \"none\",\n        \"options\": {}\n      },\n      \"typeVersion\": 3.2\n    },\n    {\n      \"id\": \"59a838c4-fef0-4902-b6d6-418934ac986f\",\n      \"name\": \"Update Productboard Features\",\n      \"type\": \"n8n-nodes-base.snowflake\",\n      \"position\": [\n        5140,\n        -160\n      ],\n      \"parameters\": {\n        \"table\": \"PRODUCTBOARD_FEATURES\",\n        \"columns\": \"FEATURE_ID,FEATURE_NAME,FEATURE_STATUS,FEATURE_START_DATE,FEATURE_END_DATE,FEATURE_OWNER,FEATURE_CREATED_AT\"\n      },\n      \"credentials\": {\n        \"snowflake\": {\n          \"id\": \"81\",\n          \"name\": \"Snowflake\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"110ebd3a-50ac-4e9f-9297-f64759dfdd18\",\n      \"name\": \"Schedule Trigger\",\n      \"type\": \"n8n-nodes-base.scheduleTrigger\",\n      \"position\": [\n        2980,\n        -180\n      ],\n      \"parameters\": {\n        \"rule\": {\n          \"interval\": [\n            {\n              \"field\": \"weeks\",\n              \"triggerAtDay\": [\n                1\n              ],\n              \"triggerAtHour\": 8\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"3eb88f88-8fad-4aaf-b6f9-6f7d87e30018\",\n      \"name\": \"Slack\",\n      \"type\": \"n8n-nodes-base.slack\",\n      \"onError\": \"continueRegularOutput\",\n      \"position\": [\n        5900,\n        1220\n      ],\n      \"parameters\": {\n        \"text\": \"=\",\n        \"select\": \"channel\",\n        \"blocksUi\": \"={\\n  \\\"blocks\\\": [\\n    {\\n      \\\"type\\\": \\\"section\\\",\\n      \\\"text\\\": {\\n        \\\"type\\\": \\\"mrkdwn\\\",\\n        \\\"text\\\": \\\":productboard: Weekly Update in :snowflake_logo: Completed\\\\n\\\\n*{{ $json.NOTES_7_DAYS }}* new insights added in the last 7 days.\\\\n\\\\n*{{ $json.NOTES_UNPROCESSED }}* insights remain unprocessed.\\\\n\\\\nYou can view the updated :metabase: dashboard below:\\\"\\n      }\\n    },\\n    {\\n      \\\"type\\\": \\\"actions\\\",\\n      \\\"elements\\\": [\\n        {\\n          \\\"type\\\": \\\"button\\\",\\n          \\\"text\\\": {\\n            \\\"type\\\": \\\"plain_text\\\",\\n            \\\"text\\\": \\\"Open Dashboard\\\",\\n            \\\"emoji\\\": true\\n          },\\n          \\\"url\\\": \\\"https://metabase.com\\\"\\n        }\\n      ]\\n    }\\n  ]\\n}\",\n        \"channelId\": {\n          \"__rl\": true,\n          \"mode\": \"name\",\n          \"value\": \"#product-notifications\"\n        },\n        \"messageType\": \"block\",\n        \"otherOptions\": {}\n      },\n      \"credentials\": {\n        \"slackApi\": {\n          \"id\": \"SG3oDwwLGpxwoJSO\",\n          \"name\": \"Gardien Slack bot\"\n        }\n      },\n      \"executeOnce\": true,\n      \"retryOnFail\": false,\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"3a16d947-a218-4ec2-8081-19b676bb51c3\",\n      \"name\": \"Count Notes Last 7 days and Unprocessed\",\n      \"type\": \"n8n-nodes-base.snowflake\",\n      \"position\": [\n        5660,\n        1220\n      ],\n      \"parameters\": {\n        \"query\": \"SELECT\\n    COUNT(DISTINCT CASE \\n        WHEN DATEDIFF(DAY, NOTE_CREATED_AT, CURRENT_DATE()) <= 7 THEN note_id \\n    END) AS notes_7_days,\\n    COUNT(DISTINCT CASE \\n        WHEN NOTE_STATE = 'unprocessed' THEN note_id \\n    END) AS notes_unprocessed\\nFROM PRODUCTBOARD_NOTES;\\n\",\n        \"operation\": \"executeQuery\"\n      },\n      \"credentials\": {\n        \"snowflake\": {\n          \"id\": \"81\",\n          \"name\": \"Snowflake\"\n        }\n      },\n      \"executeOnce\": true,\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"2bdfb96c-1c38-444d-9507-ab74f3572129\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        2980,\n        1060\n      ],\n      \"parameters\": {\n        \"color\": 5,\n        \"width\": 983.4896175671602,\n        \"height\": 314.88047081122676,\n        \"content\": \"## 设置雪花表\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"active\": false,\n  \"pinData\": {},\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"\",\n  \"connections\": {\n    \"Split notes\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Manual mapping notes\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Split features in notes\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Count Notes Last 7 days and Unprocessed\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Split features\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Manual mapping feature\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Split companies\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Manual mapping companies\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Schedule Trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Empty Table Productboard Features\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Manual mapping notes\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Loop Over Items notes\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Loop Over Items notes\": {\n      \"main\": [\n        [],\n        [\n          {\n            \"node\": \"Manual mapping notes db\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Manual mapping feature\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Loop Over Items features\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"get productboard notes\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Split notes\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Manual mapping notes db\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Update Productboard Notes\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Split features in notes\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Combine Feature ID + Note ID\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Loop Over Items features\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Empty Table Productboard Companies\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Manual mapping features db\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Manual mapping companies\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Manual mapping companies db\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Update Productboard Notes\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Loop Over Items notes\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"get productboard features\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Split features\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Manual mapping features db\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Update Productboard Features\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"get productboard companies\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Split companies\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Manual mapping companies db\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Update Productboard Companies\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Combine Feature ID + Note ID\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Loop Over Items features notes\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Update Productboard Features\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Loop Over Items features\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Update Productboard Companies\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Empty Table Productboard Note and Feature IDs\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Empty Table Productboard Notes\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"get productboard notes\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Loop Over Items features notes\": {\n      \"main\": [\n        [],\n        [\n          {\n            \"node\": \"Manual mapping feature note IDs db\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Empty Table Productboard Features\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"get productboard features\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Empty Table Productboard Companies\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"get productboard companies\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Manual mapping feature note IDs db\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Update Productboard Note and Feature IDs\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Count Notes Last 7 days and Unprocessed\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Slack\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Update Productboard Note and Feature IDs\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Loop Over Items features notes\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Empty Table Productboard Note and Feature IDs\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Empty Table Productboard Notes\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}