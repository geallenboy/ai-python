{
  "url": "https://n8n.io/workflows/3493-monitor-ssl-certificate-expiry-with-google-sheets-and-multi-channel-alert/",
  "title": "Monitor SSL Certificate Expiry with Google Sheets and Multi-Channel Alert",
  "author": "Jesse Davids",
  "publish_date": "Last update a month ago",
  "publish_date_absolute": "",
  "categories": [
    {
      "name": "DevOps"
    },
    {
      "name": "IT Ops"
    }
  ],
  "workflow_json": "{\"id\":\"JH0OhDnJCwPxBJZX\",\"meta\":{\"instanceId\":\"d00caf92aa0876c596905aea78b35fa33a722cc8e479133822c17064d15c2c1d\",\"templateId\":\"2694\",\"templateCredsSetupCompleted\":true},\"name\":\"Template - SSL Expiry Alert System\",\"tags\":[{\"id\":\"C38hOXfGSlCQyKoZ\",\"name\":\"Tool\",\"createdAt\":\"2025-01-23T03:38:52.218Z\",\"updatedAt\":\"2025-01-23T03:38:52.218Z\"},{\"id\":\"DUAUvp55JytZ6Yj9\",\"name\":\"Information Retrieval\",\"createdAt\":\"2025-03-26T23:05:13.973Z\",\"updatedAt\":\"2025-03-26T23:05:13.973Z\"},{\"id\":\"eMfCVVNXtoE4ioDe\",\"name\":\"Utility\",\"createdAt\":\"2025-03-26T23:58:28.154Z\",\"updatedAt\":\"2025-03-26T23:58:28.154Z\"}],\"nodes\":[{\"id\":\"b1b8afac-d0c7-4db3-aae8-cdf90c9d319e\",\"name\":\"URLs to Monitor\",\"type\":\"n8n-nodes-base.googleSheets\",\"position\":[-240,960],\"parameters\":{\"columns\":{\"value\":{},\"schema\":[{\"id\":\"ID\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"ID\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"version\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"version\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"app\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"app\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"host\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"host\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"response_time_sec\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"response_time_sec\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"status\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"status\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"result\",\"type\":\"string\",\"display\":true,\"removed\":false,\"required\":false,\"displayName\":\"result\",\"defaultMatch\":false,\"canBeUsedToMatch\":true}],\"mappingMode\":\"autoMapInputData\",\"matchingColumns\":[\"ID\"],\"attemptToConvertTypes\":false,\"convertFieldsToString\":false},\"options\":{\"cellFormat\":\"RAW\",\"handlingExtraData\":\"insertInNewColumn\"},\"operation\":\"appendOrUpdate\",\"sheetName\":{\"__rl\":true,\"mode\":\"list\",\"value\":636520406,\"cachedResultUrl\":\"https://docs.google.com/spreadsheets/d/1aCo3vrxgheNJChElzmf4pq8h5is7E-jz4sjfV8Quprg/edit#gid=636520406\",\"cachedResultName\":\"certificate-data\"},\"documentId\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"1aCo3vrxgheNJChElzmf4pq8h5is7E-jz4sjfV8Quprg\",\"cachedResultUrl\":\"https://docs.google.com/spreadsheets/d/1aCo3vrxgheNJChElzmf4pq8h5is7E-jz4sjfV8Quprg/edit?usp=drivesdk\",\"cachedResultName\":\"Monitor SSL\"}},\"credentials\":{\"googleSheetsOAuth2Api\":{\"id\":\"UzZqCw0fHxPn7ugj\",\"name\":\"Google Sheets account\"}},\"typeVersion\":4.5},{\"id\":\"5ecc3df7-e262-479c-9bdc-0542e53e77bf\",\"name\":\"Weekly Trigger\",\"type\":\"n8n-nodes-base.scheduleTrigger\",\"position\":[-1220,1400],\"parameters\":{\"rule\":{\"interval\":[{\"field\":\"weeks\",\"triggerAtDay\":[1],\"triggerAtHour\":8}]}},\"typeVersion\":1.2},{\"id\":\"1b1d98f0-20fa-4a33-ae60-f8d1ae85175a\",\"name\":\"Fetch URLs\",\"type\":\"n8n-nodes-base.googleSheets\",\"position\":[-1000,1400],\"parameters\":{\"options\":{\"outputFormatting\":{\"values\":{\"date\":\"FORMATTED_STRING\",\"general\":\"UNFORMATTED_VALUE\"}}},\"sheetName\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"gid=0\",\"cachedResultUrl\":\"https://docs.google.com/spreadsheets/d/1aCo3vrxgheNJChElzmf4pq8h5is7E-jz4sjfV8Quprg/edit#gid=0\",\"cachedResultName\":\"Sheet1\"},\"documentId\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"1aCo3vrxgheNJChElzmf4pq8h5is7E-jz4sjfV8Quprg\",\"cachedResultUrl\":\"https://docs.google.com/spreadsheets/d/1aCo3vrxgheNJChElzmf4pq8h5is7E-jz4sjfV8Quprg/edit?usp=drivesdk\",\"cachedResultName\":\"Monitor SSL\"}},\"credentials\":{\"googleSheetsOAuth2Api\":{\"id\":\"UzZqCw0fHxPn7ugj\",\"name\":\"Google Sheets account\"}},\"typeVersion\":4.5},{\"id\":\"f74997af-a60a-4548-862d-fabf4c30fdfe\",\"name\":\"Check SSL\",\"type\":\"n8n-nodes-base.httpRequest\",\"position\":[-680,1400],\"parameters\":{\"url\":\"=https://ssl-checker.io/api/v1/check/{{ $json[\\\"URL\\\"].replace(/^https?:\\\\/\\\\//, \\\"\\\").replace(/\\\\/$/, \\\"\\\") }}\",\"options\":{}},\"typeVersion\":4.2},{\"id\":\"64e97269-d21e-4395-abcb-9fb3267acca6\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-740,1140],\"parameters\":{\"color\":6,\"width\":220,\"height\":424,\"content\":\"Uses SSL-Checker.io to verify the SSL certificate of each URL. Fetches details like the host, validity period, and days remaining until expiry.\"},\"typeVersion\":1},{\"id\":\"66ea2a30-5a86-484f-a291-4656e12a276e\",\"name\":\"Sticky Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-280,880],\"parameters\":{\"color\":6,\"width\":460,\"height\":240,\"content\":\"Updates the Google Sheet with SSL details, including the expiry date and certificate status.\"},\"typeVersion\":1},{\"id\":\"5b2be392-fbbe-4315-b538-029477810079\",\"name\":\"Sticky Note4\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-500,1140],\"parameters\":{\"color\":6,\"width\":200,\"height\":424,\"content\":\"Checks certificates and groups into:\\n- invalid (certificate invalid)\\n- warning (expires in <30 days)\\n- notice (expires in <60 days)\\n- info (everything else)\"},\"typeVersion\":1},{\"id\":\"10abe576-d706-4467-b3b3-06e1b6168e86\",\"name\":\"Sticky Note5\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-100,1140],\"parameters\":{\"color\":3,\"width\":280,\"height\":204,\"content\":\"Invalid\\n\"},\"typeVersion\":1},{\"id\":\"bdb59028-9bd8-4c31-9110-ef6ddb2d73ad\",\"name\":\"Switch\",\"type\":\"n8n-nodes-base.switch\",\"position\":[-440,1380],\"parameters\":{\"rules\":{\"values\":[{\"outputKey\":\"invalid\",\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"ba53088b-3c74-44eb-a8f8-3c0239358b50\",\"operator\":{\"type\":\"boolean\",\"operation\":\"false\",\"singleValue\":true},\"leftValue\":\"={{ $json.result.cert_valid }}\",\"rightValue\":\"\"}]},\"renameOutput\":true},{\"outputKey\":\"warning\",\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"a02376b0-4712-4d78-9170-1ac9561805fd\",\"operator\":{\"type\":\"number\",\"operation\":\"lte\"},\"leftValue\":\"={{ $json.result.days_left }}\",\"rightValue\":30}]},\"renameOutput\":true},{\"outputKey\":\"notice\",\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"3a64a7c7-c78e-4aea-aedc-2accb93e476a\",\"operator\":{\"type\":\"number\",\"operation\":\"lte\"},\"leftValue\":\"={{ $json.result.days_left }}\",\"rightValue\":60}]},\"renameOutput\":true}]},\"options\":{\"fallbackOutput\":\"extra\",\"renameFallbackOutput\":\"info\"}},\"typeVersion\":3.2},{\"id\":\"75e2af9b-eb63-484c-8fd5-5411f3c93075\",\"name\":\"Send Alert Email2\",\"type\":\"n8n-nodes-base.gmail\",\"position\":[-240,1180],\"webhookId\":\"294e3ea0-dd8f-4ca5-a402-d4fcac22f24d\",\"parameters\":{\"message\":\"=WARNING: SSL Expiry within one month - {{ $json.result.days_left }} Days Left - {{ $json.result.host }}\",\"options\":{\"appendAttribution\":false},\"subject\":\"=WARNING: SSL Expiry within one month - {{ $json.result.days_left }} Days Left - {{ $json.result.host }}\",\"emailType\":\"text\"},\"credentials\":{\"gmailOAuth2\":{\"id\":\"5HpRLZpdoq3wilbn\",\"name\":\"Gmail account\"}},\"typeVersion\":2.1},{\"id\":\"7784db6d-f00e-48c8-97d7-a9795c5f4d65\",\"name\":\"Send Alert Email4\",\"type\":\"n8n-nodes-base.gmail\",\"position\":[60,1180],\"webhookId\":\"d0c61174-323b-4fe8-84f8-185c2be18d33\",\"parameters\":{\"message\":\"=WARNING: SSL Expiry within one month - {{ $json.result.days_left }} Days Left - {{ $json.result.host }}\",\"options\":{\"appendAttribution\":false},\"subject\":\"=URGENT: SSL-certificate invalid, action required! - {{ $json.result.days_left }} Days Left - {{ $json.result.host }}\",\"emailType\":\"text\"},\"credentials\":{\"gmailOAuth2\":{\"id\":\"5HpRLZpdoq3wilbn\",\"name\":\"Gmail account\"}},\"typeVersion\":2.1},{\"id\":\"b5581ba7-6eb9-4b75-9b9f-6070d66ca76e\",\"name\":\"Send Alert Email6\",\"type\":\"n8n-nodes-base.gmail\",\"position\":[-80,1400],\"webhookId\":\"a26a0c4e-2f58-494e-8432-c75aa5525a4c\",\"parameters\":{\"message\":\"=INFO: SSL Expiry check completed, took no further actions - {{ $json.result.days_left }} Days Left - {{ $json.result.host }}\",\"options\":{\"appendAttribution\":false},\"subject\":\"=INFO: SSL Expiry check completed, took no further actions - {{ $json.result.days_left }} Days Left - {{ $json.result.host }}\",\"emailType\":\"text\"},\"credentials\":{\"gmailOAuth2\":{\"id\":\"5HpRLZpdoq3wilbn\",\"name\":\"Gmail account\"}},\"typeVersion\":2.1},{\"id\":\"39f3800b-7c0e-43cc-8a21-7eb8c93c2666\",\"name\":\"Ntfy4\",\"type\":\"n8n-nodes-ntfy.Ntfy\",\"position\":[60,1400],\"parameters\":{\"tags\":\"=ssl,n8n,angie\",\"click\":\"={{ $json.result.host }}\",\"title\":\"=INFO: SSL Expiry check completed for {{ $json.result.host }}.\",\"topic\":\"n8n\",\"message\":\"=INFO: SSL Expiry check completed, took no further actions - {{ $json.result.days_left }} Days Left - {{ $json.result.host }}.\",\"priority\":1,\"additional_fields\":{\"bearer_token\":\"\",\"alternate_url\":\"\"}},\"typeVersion\":1},{\"id\":\"584f427c-cfb2-4bf0-b2ad-4f1296eddfcf\",\"name\":\"Sticky Note10\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-1020,1140],\"parameters\":{\"color\":6,\"width\":260,\"height\":424,\"content\":\"Pulls the list of URLs to monitor from the Google Sheet. Ensure you clone the Google Sheet worksheet and update this node with its URL.\\n\\nThis is the Sheet Layout:\\n  A              B              C\\n1 URL\\n2 n8n.io\\n3 amazon.com\\n4 google.com\\n5 chat.openai.com\"},\"typeVersion\":1},{\"id\":\"04a97e64-7f7d-4e4e-a441-93c72ceabf5c\",\"name\":\"Sticky Note11\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-1300,1140],\"parameters\":{\"color\":7,\"width\":260,\"height\":424,\"content\":\"Triggers the workflow once a week.\"},\"typeVersion\":1},{\"id\":\"19e7ea5a-2b9d-45aa-8ab4-14d0fd181e89\",\"name\":\"Sticky Note8\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-280,1360],\"parameters\":{\"color\":4,\"width\":170,\"height\":204,\"content\":\"Notice\\n\"},\"typeVersion\":1},{\"id\":\"1aa248e8-58a2-415c-9de9-ec58994d2160\",\"name\":\"Send Alert Email1\",\"type\":\"n8n-nodes-base.gmail\",\"position\":[-240,1400],\"webhookId\":\"039c4f5b-b91b-47b5-8dc2-49c003c18362\",\"parameters\":{\"message\":\"=SSL Expiry - {{ $json.result.days_left }} Days Left - {{ $json.result.host }}\",\"options\":{\"appendAttribution\":false},\"subject\":\"=INFO: SSL Expiry - {{ $json.result.days_left }} Days Left - {{ $json.result.host }}\",\"emailType\":\"text\"},\"credentials\":{\"gmailOAuth2\":{\"id\":\"5HpRLZpdoq3wilbn\",\"name\":\"Gmail account\"}},\"typeVersion\":2.1},{\"id\":\"0a2d85a2-f9ad-445f-9839-f4643d8389c7\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-280,1140],\"parameters\":{\"width\":170,\"height\":204,\"content\":\"Warning\\n\"},\"typeVersion\":1},{\"id\":\"b87be8c5-4b2a-4f1e-8f20-c7c341af647e\",\"name\":\"Telegram\",\"type\":\"n8n-nodes-base.telegram\",\"position\":[-80,1180],\"webhookId\":\"44923247-9298-457e-bce8-391248f2e56c\",\"parameters\":{\"text\":\"=URGENT: SSL-certificate invalid, action required! - {{ $json.result.days_left }} Days Left - {{ $json.result.host }}\",\"additionalFields\":{}},\"credentials\":{\"telegramApi\":{\"id\":\"ZPSuzVOwshFnDrCl\",\"name\":\"Telegram account 4\"}},\"typeVersion\":1.2},{\"id\":\"a7c9f536-5e02-4d03-98bc-e3b4e3844ffb\",\"name\":\"Sticky Note7\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-100,1360],\"parameters\":{\"color\":4,\"width\":280,\"height\":204,\"content\":\"Info\\n\"},\"typeVersion\":1},{\"id\":\"68cc4856-6e1d-4cae-8075-0a880d5c1a0b\",\"name\":\"Sticky Note6\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-1300,400],\"parameters\":{\"color\":7,\"width\":1000,\"height\":720,\"content\":\"## SSL Expiry Alert System\\n\\n### Who is this for?\\nThis workflow is ideal for administrators or IT professionals responsible for monitoring SSL certificates of multiple websites to ensure they do not expire unexpectedly.\\n\\n### Problem\\nSSL certificates play a crucial role in ensuring secure communication over the internet. However, if not monitored closely, they can expire, leading to potential security risks and service disruption. This workflow helps in proactively monitoring SSL certificate expiry dates.\\n\\n### Functionality\\n1. Pulls URLs to monitor from a Google Sheet.\\n2. Checks SSL certificates using SSL-Checker.io.\\n3. Updates Google Sheet with SSL details such as expiry date and certificate status.\\n4. Sends email alerts for SSL certificates nearing expiry (<30 days) or invalid certificates.\\n\\n### Setup\\n1. Clone the provided Google Sheet and update the Google Sheet URL in the \\\"URLs to Monitor\\\" node.\\n2. Set up Google Sheets and Gmail credentials in n8n.\\n3. Configure the Discourse Trigger for weekly monitoring.\\n4. Customize email alert settings as needed.\\n\\n### Customization\\n- Modify the frequency of monitoring by adjusting the trigger interval in the \\\"Weekly Trigger\\\" node.\\n- Customize email content and recipients in the \\\"Send Alert Email\\\" node.\\n- Extend functionality by adding additional checks or actions based on SSL certificate status.\\n\\n### Note\\nEnsure proper authentication and authorization for accessing Google Sheets, SSL-Checker.io, and Gmail accounts within the workflow.\"},\"typeVersion\":1}],\"active\":false,\"pinData\":{},\"settings\":{\"executionOrder\":\"v1\"},\"versionId\":\"87e3614a-0720-47be-9224-dd5829c4f15c\",\"connections\":{\"Switch\":{\"main\":[[{\"node\":\"Send Alert Email4\",\"type\":\"main\",\"index\":0},{\"node\":\"Telegram\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Send Alert Email2\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Send Alert Email1\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Send Alert Email6\",\"type\":\"main\",\"index\":0},{\"node\":\"Ntfy4\",\"type\":\"main\",\"index\":0}]]},\"Check SSL\":{\"main\":[[{\"node\":\"URLs to Monitor\",\"type\":\"main\",\"index\":0},{\"node\":\"Switch\",\"type\":\"main\",\"index\":0}]]},\"Fetch URLs\":{\"main\":[[{\"node\":\"Check SSL\",\"type\":\"main\",\"index\":0}]]},\"Weekly Trigger\":{\"main\":[[{\"node\":\"Fetch URLs\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "## SSL Expiry Alert System\n\n### Who is this for?\n\nThis workflow is ideal for administrators or IT professionals responsible for monitoring SSL certificates of multiple websites to ensure they do not expire unexpectedly.\n\n### Problem\n\nSSL certificates play a crucial role in ensuring secure communication over the internet. However, if not monitored closely, they can expire, leading to potential security risks and service disruption. This workflow helps in proactively monitoring SSL certificate expiry dates.\n\n### Functionality\n\n  1. Pulls URLs to monitor from a Google Sheet.\n  2. Checks SSL certificates using [SSL-Checker.io](http://SSL-Checker.io).\n  3. Updates Google Sheet with SSL details such as expiry date and certificate status.\n  4. Sends email alerts for SSL certificates nearing expiry (<30 days) or invalid certificates.\n\n\n\n### Setup\n\n  1. Clone the provided Google Sheet and update the Google Sheet URL in the \"URLs to Monitor\" node.\n  2. Set up Google Sheets and Gmail credentials in n8n.\n  3. Configure the Discourse Trigger for weekly monitoring.\n  4. Customize email/telegram/ntfy alert settings as needed.\n\n\n\n### Customization\n\n  * Modify the frequency of monitoring by adjusting the trigger interval in the \"Weekly Trigger\" node.\n  * Customize email content and recipients in the \"Send Alert Email\" node.\n  * Extend functionality by adding additional checks or actions based on SSL certificate status.\n\n\n\n### Note\n\nEnsure proper authentication and authorization for accessing Google Sheets, [SSL-Checker.io](http://SSL-Checker.io), and Gmail accounts within the workflow.\n",
  "crawled_at": "2025-05-26T04:39:17.103607",
  "readme_zh": "## SSL证书到期预警系统\n\n### 适用对象\n\n本工作流专为需要监控多个网站SSL证书状态的管理员或IT专业人员设计，可有效防止证书意外过期。\n\n### 痛点分析\n\nSSL证书是保障网络通信安全的核心要素，但若缺乏有效监控，证书过期可能导致安全漏洞和服务中断。本系统提供主动式证书有效期监控方案。\n\n### 核心功能\n\n1. 从Google表格自动获取待监控网址清单\n2. 通过[SSL-Checker.io](http://SSL-Checker.io)进行证书状态检测\n3. 在Google表格中更新证书到期日、有效性等关键信息\n4. 自动发送邮件预警（证书有效期不足30天或存在异常时）\n\n### 配置指南\n\n1. 复制模板Google表格，在\"监控网址列表\"节点更新表格链接\n2. 在n8n中配置Google Sheets和Gmail访问凭证\n3. 设置Discourse触发器实现每周自动检测\n4. 按需定制邮件/Telegram/ntfy通知参数\n\n### 个性化设置\n\n* 通过调整\"周触发\"节点间隔修改监控频率\n* 在\"发送预警邮件\"节点自定义邮件内容和收件人\n* 根据证书状态扩展其他检测功能或响应动作\n\n### 注意事项\n\n请确保工作流中Google表格、[SSL-Checker.io](http://SSL-Checker.io)和Gmail账户的访问权限配置正确。",
  "title_zh": "使用Google表格和多渠道警报监控SSL证书过期情况",
  "publish_date_zh": "上次更新于25天前",
  "workflow_json_zh": "{\n  \"id\": \"JH0OhDnJCwPxBJZX\",\n  \"meta\": {\n    \"instanceId\": \"d00caf92aa0876c596905aea78b35fa33a722cc8e479133822c17064d15c2c1d\",\n    \"templateId\": \"2694\",\n    \"templateCredsSetupCompleted\": true\n  },\n  \"name\": \"Template - SSL Expiry Alert System\",\n  \"tags\": [\n    {\n      \"id\": \"C38hOXfGSlCQyKoZ\",\n      \"name\": \"Tool\",\n      \"createdAt\": \"2025-01-23T03:38:52.218Z\",\n      \"updatedAt\": \"2025-01-23T03:38:52.218Z\"\n    },\n    {\n      \"id\": \"DUAUvp55JytZ6Yj9\",\n      \"name\": \"Information Retrieval\",\n      \"createdAt\": \"2025-03-26T23:05:13.973Z\",\n      \"updatedAt\": \"2025-03-26T23:05:13.973Z\"\n    },\n    {\n      \"id\": \"eMfCVVNXtoE4ioDe\",\n      \"name\": \"Utility\",\n      \"createdAt\": \"2025-03-26T23:58:28.154Z\",\n      \"updatedAt\": \"2025-03-26T23:58:28.154Z\"\n    }\n  ],\n  \"nodes\": [\n    {\n      \"id\": \"b1b8afac-d0c7-4db3-aae8-cdf90c9d319e\",\n      \"name\": \"URLs to Monitor\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"position\": [\n        -240,\n        960\n      ],\n      \"parameters\": {\n        \"columns\": {\n          \"value\": {},\n          \"schema\": [\n            {\n              \"id\": \"ID\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"ID\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"version\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"version\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"app\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"app\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"host\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"host\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"response_time_sec\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"response_time_sec\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"status\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"status\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"result\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"removed\": false,\n              \"required\": false,\n              \"displayName\": \"result\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            }\n          ],\n          \"mappingMode\": \"autoMapInputData\",\n          \"matchingColumns\": [\n            \"ID\"\n          ],\n          \"attemptToConvertTypes\": false,\n          \"convertFieldsToString\": false\n        },\n        \"options\": {\n          \"cellFormat\": \"RAW\",\n          \"handlingExtraData\": \"insertInNewColumn\"\n        },\n        \"operation\": \"appendOrUpdate\",\n        \"sheetName\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": 636520406,\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1aCo3vrxgheNJChElzmf4pq8h5is7E-jz4sjfV8Quprg/edit#gid=636520406\",\n          \"cachedResultName\": \"certificate-data\"\n        },\n        \"documentId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"1aCo3vrxgheNJChElzmf4pq8h5is7E-jz4sjfV8Quprg\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1aCo3vrxgheNJChElzmf4pq8h5is7E-jz4sjfV8Quprg/edit?usp=drivesdk\",\n          \"cachedResultName\": \"Monitor SSL\"\n        }\n      },\n      \"credentials\": {\n        \"googleSheetsOAuth2Api\": {\n          \"id\": \"UzZqCw0fHxPn7ugj\",\n          \"name\": \"Google Sheets account\"\n        }\n      },\n      \"typeVersion\": 4.5\n    },\n    {\n      \"id\": \"5ecc3df7-e262-479c-9bdc-0542e53e77bf\",\n      \"name\": \"Weekly Trigger\",\n      \"type\": \"n8n-nodes-base.scheduleTrigger\",\n      \"position\": [\n        -1220,\n        1400\n      ],\n      \"parameters\": {\n        \"rule\": {\n          \"interval\": [\n            {\n              \"field\": \"weeks\",\n              \"triggerAtDay\": [\n                1\n              ],\n              \"triggerAtHour\": 8\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"1b1d98f0-20fa-4a33-ae60-f8d1ae85175a\",\n      \"name\": \"Fetch URLs\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"position\": [\n        -1000,\n        1400\n      ],\n      \"parameters\": {\n        \"options\": {\n          \"outputFormatting\": {\n            \"values\": {\n              \"date\": \"FORMATTED_STRING\",\n              \"general\": \"UNFORMATTED_VALUE\"\n            }\n          }\n        },\n        \"sheetName\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"gid=0\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1aCo3vrxgheNJChElzmf4pq8h5is7E-jz4sjfV8Quprg/edit#gid=0\",\n          \"cachedResultName\": \"Sheet1\"\n        },\n        \"documentId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"1aCo3vrxgheNJChElzmf4pq8h5is7E-jz4sjfV8Quprg\",\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1aCo3vrxgheNJChElzmf4pq8h5is7E-jz4sjfV8Quprg/edit?usp=drivesdk\",\n          \"cachedResultName\": \"Monitor SSL\"\n        }\n      },\n      \"credentials\": {\n        \"googleSheetsOAuth2Api\": {\n          \"id\": \"UzZqCw0fHxPn7ugj\",\n          \"name\": \"Google Sheets account\"\n        }\n      },\n      \"typeVersion\": 4.5\n    },\n    {\n      \"id\": \"f74997af-a60a-4548-862d-fabf4c30fdfe\",\n      \"name\": \"Check SSL\",\n      \"type\": \"n8n-nodes-base.httpRequest\",\n      \"position\": [\n        -680,\n        1400\n      ],\n      \"parameters\": {\n        \"url\": \"=https://ssl-checker.io/api/v1/check/{{ $json[\\\"URL\\\"].replace(/^https?:\\\\/\\\\//, \\\"\\\").replace(/\\\\/$/, \\\"\\\") }}\",\n        \"options\": {}\n      },\n      \"typeVersion\": 4.2\n    },\n    {\n      \"id\": \"64e97269-d21e-4395-abcb-9fb3267acca6\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -740,\n        1140\n      ],\n      \"parameters\": {\n        \"color\": 6,\n        \"width\": 220,\n        \"height\": 424,\n        \"content\": \"使用SSL-Checker.io检查每个URL的SSL证书，获取包括主机名、有效期及剩余到期天数等详细信息。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"66ea2a30-5a86-484f-a291-4656e12a276e\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -280,\n        880\n      ],\n      \"parameters\": {\n        \"color\": 6,\n        \"width\": 460,\n        \"height\": 240,\n        \"content\": \"更新Google表格中的SSL详细信息，包括到期日期和证书状态。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"5b2be392-fbbe-4315-b538-029477810079\",\n      \"name\": \"Sticky Note4\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -500,\n        1140\n      ],\n      \"parameters\": {\n        \"color\": 6,\n        \"width\": 200,\n        \"height\": 424,\n        \"content\": \"将证书和群组检查分类为：\\n- 无效（证书无效）\\n- 警告（有效期不足30天）\\n- 注意（有效期不足60天）\\n- 信息（其他所有情况）\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"10abe576-d706-4467-b3b3-06e1b6168e86\",\n      \"name\": \"Sticky Note5\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -100,\n        1140\n      ],\n      \"parameters\": {\n        \"color\": 3,\n        \"width\": 280,\n        \"height\": 204,\n        \"content\": \"无效\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"bdb59028-9bd8-4c31-9110-ef6ddb2d73ad\",\n      \"name\": \"Switch\",\n      \"type\": \"n8n-nodes-base.switch\",\n      \"position\": [\n        -440,\n        1380\n      ],\n      \"parameters\": {\n        \"rules\": {\n          \"values\": [\n            {\n              \"outputKey\": \"invalid\",\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 2,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"ba53088b-3c74-44eb-a8f8-3c0239358b50\",\n                    \"operator\": {\n                      \"type\": \"boolean\",\n                      \"operation\": \"false\",\n                      \"singleValue\": true\n                    },\n                    \"leftValue\": \"={{ $json.result.cert_valid }}\",\n                    \"rightValue\": \"\"\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            },\n            {\n              \"outputKey\": \"warning\",\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 2,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"a02376b0-4712-4d78-9170-1ac9561805fd\",\n                    \"operator\": {\n                      \"type\": \"number\",\n                      \"operation\": \"lte\"\n                    },\n                    \"leftValue\": \"={{ $json.result.days_left }}\",\n                    \"rightValue\": 30\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            },\n            {\n              \"outputKey\": \"notice\",\n              \"conditions\": {\n                \"options\": {\n                  \"version\": 2,\n                  \"leftValue\": \"\",\n                  \"caseSensitive\": true,\n                  \"typeValidation\": \"strict\"\n                },\n                \"combinator\": \"and\",\n                \"conditions\": [\n                  {\n                    \"id\": \"3a64a7c7-c78e-4aea-aedc-2accb93e476a\",\n                    \"operator\": {\n                      \"type\": \"number\",\n                      \"operation\": \"lte\"\n                    },\n                    \"leftValue\": \"={{ $json.result.days_left }}\",\n                    \"rightValue\": 60\n                  }\n                ]\n              },\n              \"renameOutput\": true\n            }\n          ]\n        },\n        \"options\": {\n          \"fallbackOutput\": \"extra\",\n          \"renameFallbackOutput\": \"info\"\n        }\n      },\n      \"typeVersion\": 3.2\n    },\n    {\n      \"id\": \"75e2af9b-eb63-484c-8fd5-5411f3c93075\",\n      \"name\": \"Send Alert Email2\",\n      \"type\": \"n8n-nodes-base.gmail\",\n      \"position\": [\n        -240,\n        1180\n      ],\n      \"webhookId\": \"294e3ea0-dd8f-4ca5-a402-d4fcac22f24d\",\n      \"parameters\": {\n        \"message\": \"=WARNING: SSL Expiry within one month - {{ $json.result.days_left }} Days Left - {{ $json.result.host }}\",\n        \"options\": {\n          \"appendAttribution\": false\n        },\n        \"subject\": \"=WARNING: SSL Expiry within one month - {{ $json.result.days_left }} Days Left - {{ $json.result.host }}\",\n        \"emailType\": \"text\"\n      },\n      \"credentials\": {\n        \"gmailOAuth2\": {\n          \"id\": \"5HpRLZpdoq3wilbn\",\n          \"name\": \"Gmail account\"\n        }\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"7784db6d-f00e-48c8-97d7-a9795c5f4d65\",\n      \"name\": \"Send Alert Email4\",\n      \"type\": \"n8n-nodes-base.gmail\",\n      \"position\": [\n        60,\n        1180\n      ],\n      \"webhookId\": \"d0c61174-323b-4fe8-84f8-185c2be18d33\",\n      \"parameters\": {\n        \"message\": \"=WARNING: SSL Expiry within one month - {{ $json.result.days_left }} Days Left - {{ $json.result.host }}\",\n        \"options\": {\n          \"appendAttribution\": false\n        },\n        \"subject\": \"=URGENT: SSL-certificate invalid, action required! - {{ $json.result.days_left }} Days Left - {{ $json.result.host }}\",\n        \"emailType\": \"text\"\n      },\n      \"credentials\": {\n        \"gmailOAuth2\": {\n          \"id\": \"5HpRLZpdoq3wilbn\",\n          \"name\": \"Gmail account\"\n        }\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"b5581ba7-6eb9-4b75-9b9f-6070d66ca76e\",\n      \"name\": \"Send Alert Email6\",\n      \"type\": \"n8n-nodes-base.gmail\",\n      \"position\": [\n        -80,\n        1400\n      ],\n      \"webhookId\": \"a26a0c4e-2f58-494e-8432-c75aa5525a4c\",\n      \"parameters\": {\n        \"message\": \"=INFO: SSL Expiry check completed, took no further actions - {{ $json.result.days_left }} Days Left - {{ $json.result.host }}\",\n        \"options\": {\n          \"appendAttribution\": false\n        },\n        \"subject\": \"=INFO: SSL Expiry check completed, took no further actions - {{ $json.result.days_left }} Days Left - {{ $json.result.host }}\",\n        \"emailType\": \"text\"\n      },\n      \"credentials\": {\n        \"gmailOAuth2\": {\n          \"id\": \"5HpRLZpdoq3wilbn\",\n          \"name\": \"Gmail account\"\n        }\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"39f3800b-7c0e-43cc-8a21-7eb8c93c2666\",\n      \"name\": \"Ntfy4\",\n      \"type\": \"n8n-nodes-ntfy.Ntfy\",\n      \"position\": [\n        60,\n        1400\n      ],\n      \"parameters\": {\n        \"tags\": \"=ssl,n8n,angie\",\n        \"click\": \"={{ $json.result.host }}\",\n        \"title\": \"=INFO: SSL Expiry check completed for {{ $json.result.host }}.\",\n        \"topic\": \"n8n\",\n        \"message\": \"=INFO: SSL Expiry check completed, took no further actions - {{ $json.result.days_left }} Days Left - {{ $json.result.host }}.\",\n        \"priority\": 1,\n        \"additional_fields\": {\n          \"bearer_token\": \"\",\n          \"alternate_url\": \"\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"584f427c-cfb2-4bf0-b2ad-4f1296eddfcf\",\n      \"name\": \"Sticky Note10\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -1020,\n        1140\n      ],\n      \"parameters\": {\n        \"color\": 6,\n        \"width\": 260,\n        \"height\": 424,\n        \"content\": \"从Google表格中拉取需要监控的URL列表。请确保克隆该Google表格工作表，并更新此节点对应的URL。\\n\\n表格布局如下：\\n  A              B              C\\n1 URL\\n2 n8n.io\\n3 amazon.com\\n4 google.com\\n5 chat.openai.com\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"04a97e64-7f7d-4e4e-a441-93c72ceabf5c\",\n      \"name\": \"Sticky Note11\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -1300,\n        1140\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 260,\n        \"height\": 424,\n        \"content\": \"每周触发一次工作流程。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"19e7ea5a-2b9d-45aa-8ab4-14d0fd181e89\",\n      \"name\": \"Sticky Note8\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -280,\n        1360\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 170,\n        \"height\": 204,\n        \"content\": \"通知\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"1aa248e8-58a2-415c-9de9-ec58994d2160\",\n      \"name\": \"Send Alert Email1\",\n      \"type\": \"n8n-nodes-base.gmail\",\n      \"position\": [\n        -240,\n        1400\n      ],\n      \"webhookId\": \"039c4f5b-b91b-47b5-8dc2-49c003c18362\",\n      \"parameters\": {\n        \"message\": \"=SSL Expiry - {{ $json.result.days_left }} Days Left - {{ $json.result.host }}\",\n        \"options\": {\n          \"appendAttribution\": false\n        },\n        \"subject\": \"=INFO: SSL Expiry - {{ $json.result.days_left }} Days Left - {{ $json.result.host }}\",\n        \"emailType\": \"text\"\n      },\n      \"credentials\": {\n        \"gmailOAuth2\": {\n          \"id\": \"5HpRLZpdoq3wilbn\",\n          \"name\": \"Gmail account\"\n        }\n      },\n      \"typeVersion\": 2.1\n    },\n    {\n      \"id\": \"0a2d85a2-f9ad-445f-9839-f4643d8389c7\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -280,\n        1140\n      ],\n      \"parameters\": {\n        \"width\": 170,\n        \"height\": 204,\n        \"content\": \"警告\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"b87be8c5-4b2a-4f1e-8f20-c7c341af647e\",\n      \"name\": \"Telegram\",\n      \"type\": \"n8n-nodes-base.telegram\",\n      \"position\": [\n        -80,\n        1180\n      ],\n      \"webhookId\": \"44923247-9298-457e-bce8-391248f2e56c\",\n      \"parameters\": {\n        \"text\": \"=URGENT: SSL-certificate invalid, action required! - {{ $json.result.days_left }} Days Left - {{ $json.result.host }}\",\n        \"additionalFields\": {}\n      },\n      \"credentials\": {\n        \"telegramApi\": {\n          \"id\": \"ZPSuzVOwshFnDrCl\",\n          \"name\": \"Telegram account 4\"\n        }\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"a7c9f536-5e02-4d03-98bc-e3b4e3844ffb\",\n      \"name\": \"Sticky Note7\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -100,\n        1360\n      ],\n      \"parameters\": {\n        \"color\": 4,\n        \"width\": 280,\n        \"height\": 204,\n        \"content\": \"信息\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"68cc4856-6e1d-4cae-8075-0a880d5c1a0b\",\n      \"name\": \"Sticky Note6\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -1300,\n        400\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 1000,\n        \"height\": 720,\n        \"content\": \"## SSL证书到期预警系统\\n\\n### 适用对象\\n本工作流专为需要监控多个网站SSL证书状态的管理员或IT专业人员设计，可有效防止证书意外过期。\\n\\n### 痛点分析\\nSSL证书是保障网络通信安全的核心要素，但若缺乏有效监控，证书过期可能导致安全漏洞和服务中断。本方案提供主动式SSL证书到期监测功能。\\n\\n### 核心功能\\n1. 从Google表格自动获取待监测网址清单\\n2. 通过SSL-Checker.io进行证书校验\\n3. 实时更新表格数据（包含到期日/证书状态等关键信息）\\n4. 智能邮件提醒（证书有效期不足30天或存在异常时触发）\\n\\n### 部署指南\\n1. 复制模板表格后，在\\\"监测网址列表\\\"节点更新表格链接\\n2. 于n8n平台配置Google Sheets和Gmail访问凭证\\n3. 设置Discourse触发器实现周级监测\\n4. 按需调整邮件告警参数\\n\\n### 定制化选项\\n- 通过\\\"周触发\\\"节点调整监测频率\\n- 在\\\"发送告警邮件\\\"节点自定义邮件模板及收件人\\n- 根据证书验证结果扩展其他自动化操作\\n\\n### 注意事项\\n请确保工作流中各组件（Google表格/SSL-Checker.io/Gmail）的访问权限已正确配置\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"active\": false,\n  \"pinData\": {},\n  \"settings\": {\n    \"executionOrder\": \"v1\"\n  },\n  \"versionId\": \"87e3614a-0720-47be-9224-dd5829c4f15c\",\n  \"connections\": {\n    \"Switch\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Send Alert Email4\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Telegram\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Send Alert Email2\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Send Alert Email1\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Send Alert Email6\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Ntfy4\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Check SSL\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"URLs to Monitor\",\n            \"type\": \"main\",\n            \"index\": 0\n          },\n          {\n            \"node\": \"Switch\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Fetch URLs\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Check SSL\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Weekly Trigger\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Fetch URLs\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}