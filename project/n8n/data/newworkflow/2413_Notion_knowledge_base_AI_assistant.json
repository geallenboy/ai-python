{
  "url": "https://n8n.io/workflows/2413-notion-knowledge-base-ai-assistant/",
  "title": "Notion knowledge base AI assistant",
  "author": "Max Tkacz",
  "publish_date": "Last update 8 months ago",
  "publish_date_absolute": "2024-09-25",
  "categories": [
    {
      "name": "HR"
    },
    {
      "name": "AI"
    },
    {
      "name": "IT Ops"
    }
  ],
  "workflow_json": "{\"meta\":{\"instanceId\":\"205b3bc06c96f2dc835b4f00e1cbf9a937a74eeb3b47c99d0c30b0586dbf85aa\"},\"nodes\":[{\"id\":\"d1d4291e-fa37-43d0-81e0-f0a594371426\",\"name\":\"OpenAI Chat Model\",\"type\":\"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\"position\":[680,620],\"parameters\":{\"model\":\"gpt-4o\",\"options\":{\"timeout\":25000,\"temperature\":0.7}},\"credentials\":{\"openAiApi\":{\"id\":\"AzPPV759YPBxJj3o\",\"name\":\"Max's DevRel OpenAI account\"}},\"typeVersion\":1},{\"id\":\"68e6805b-9c19-4c9e-a300-8983f2b7c28a\",\"name\":\"Search notion database\",\"type\":\"@n8n/n8n-nodes-langchain.toolHttpRequest\",\"position\":[980,620],\"parameters\":{\"url\":\"=https://api.notion.com/v1/databases/{{ $json.notionID }}/query\",\"method\":\"POST\",\"jsonBody\":\"{\\n  \\\"filter\\\": {\\n    \\\"or\\\": [\\n      {\\n        \\\"property\\\": \\\"question\\\",\\n        \\\"rich_text\\\": {\\n          \\\"contains\\\": \\\"{keyword}\\\"\\n        }\\n      },\\n      {\\n        \\\"property\\\": \\\"tags\\\",\\n        \\\"multi_select\\\": {\\n          \\\"contains\\\": \\\"{tag}\\\"\\n        }\\n      }\\n    ]\\n  },\\n  \\\"sorts\\\": [\\n    {\\n      \\\"property\\\": \\\"updated_at\\\",\\n      \\\"direction\\\": \\\"ascending\\\"\\n    }\\n  ]\\n}\",\"sendBody\":true,\"specifyBody\":\"json\",\"authentication\":\"predefinedCredentialType\",\"toolDescription\":\"=Use this tool to search the \\\"\\\" Notion app database.\\n\\nIt is structured with question and answer format. \\nYou can filter query result by:\\n- By keyword\\n- filter by tag.\\n\\nKeyword and Tag have an OR relationship not AND.\\n\\n\",\"nodeCredentialType\":\"notionApi\",\"placeholderDefinitions\":{\"values\":[{\"name\":\"keyword\",\"description\":\"Searches question of the record. Use one keyword at a time.\"},{\"name\":\"tag\",\"description\":\"=Options: {{ $json.tagsOptions }}\"}]}},\"credentials\":{\"notionApi\":{\"id\":\"gfNp6Jup8rsmFLRr\",\"name\":\"max-bot\"}},\"typeVersion\":1.1},{\"id\":\"c3164d38-a9fb-4ee3-b6bd-fccb4aa5a1a4\",\"name\":\"Get database details\",\"type\":\"n8n-nodes-base.notion\",\"position\":[420,380],\"parameters\":{\"simple\":false,\"resource\":\"database\",\"databaseId\":{\"__rl\":true,\"mode\":\"list\",\"value\":\"7ea9697d-4875-441e-b262-1105337d232e\",\"cachedResultUrl\":\"https://www.notion.so/7ea9697d4875441eb2621105337d232e\",\"cachedResultName\":\"StarLens Company Knowledge Base\"}},\"credentials\":{\"notionApi\":{\"id\":\"gfNp6Jup8rsmFLRr\",\"name\":\"max-bot\"}},\"typeVersion\":2.2},{\"id\":\"98300243-efcc-4427-88da-c1af8a91ddae\",\"name\":\"Window Buffer Memory\",\"type\":\"@n8n/n8n-nodes-langchain.memoryBufferWindow\",\"position\":[820,620],\"parameters\":{\"contextWindowLength\":4},\"typeVersion\":1.2},{\"id\":\"a8473f48-1343-4eb2-8e48-ec89377a2a00\",\"name\":\"Search inside database record\",\"type\":\"@n8n/n8n-nodes-langchain.toolHttpRequest\",\"notes\":\" \",\"position\":[1140,620],\"parameters\":{\"url\":\"https://api.notion.com/v1/blocks/{page_id}/children\",\"fields\":\"id, type, paragraph.text, heading_1.text, heading_2.text, heading_3.text, bulleted_list_item.text, numbered_list_item.text, to_do.text, children\",\"dataField\":\"results\",\"authentication\":\"predefinedCredentialType\",\"fieldsToInclude\":\"selected\",\"toolDescription\":\"=Use this tool to retrieve Notion page content using the page ID. \\n\\nIt is structured with question and answer format. \\nYou can filter query result by:\\n- By keyword\\n- filter by tag.\\n\\nKeyword and Tag have an OR relationship not AND.\\n\\n\",\"optimizeResponse\":true,\"nodeCredentialType\":\"notionApi\",\"placeholderDefinitions\":{\"values\":[{\"name\":\"page_id\",\"description\":\"Notion page id from 'Search notion database' tool results\"}]}},\"credentials\":{\"notionApi\":{\"id\":\"gfNp6Jup8rsmFLRr\",\"name\":\"max-bot\"}},\"notesInFlow\":true,\"typeVersion\":1.1},{\"id\":\"115c328e-84b0-43d2-8df7-8b3f74cbb2fb\",\"name\":\"Format schema\",\"type\":\"n8n-nodes-base.set\",\"position\":[620,380],\"parameters\":{\"options\":{},\"assignments\":{\"assignments\":[{\"id\":\"a8e58791-ba51-46a2-8645-386dd1a0ff6e\",\"name\":\"sessionId\",\"type\":\"string\",\"value\":\"={{ $('When chat message received').item.json.sessionId }}\"},{\"id\":\"434209de-39d5-43d8-a964-0fcb7396306c\",\"name\":\"action\",\"type\":\"string\",\"value\":\"={{ $('When chat message received').item.json.action }}\"},{\"id\":\"cad4c972-51a9-4e16-a627-b00eea77eb30\",\"name\":\"chatInput\",\"type\":\"string\",\"value\":\"={{ $('When chat message received').item.json.chatInput }}\"},{\"id\":\"8e88876c-2714-494d-bd5e-5e80c99f83e3\",\"name\":\"notionID\",\"type\":\"string\",\"value\":\"={{ $('Get database details').item.json.id }}\"},{\"id\":\"a88a15f6-317c-4d2e-9d64-26f5ccaf7a97\",\"name\":\"databaseName\",\"type\":\"string\",\"value\":\"={{ $json.title[0].text.content }}\"},{\"id\":\"7c3bf758-8ed3-469a-8695-6777f4af4fb9\",\"name\":\"tagsOptions\",\"type\":\"string\",\"value\":\"={{ $json.properties.tags.multi_select.options.map(item => item.name).join(',') }}\"}]}},\"typeVersion\":3.4},{\"id\":\"3b82f4fe-6c0c-4e6e-a387-27de31fec758\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-340,240],\"parameters\":{\"color\":6,\"width\":462.3561535890252,\"height\":95.12709218477178,\"content\":\"## Notion knowledge base assistant [v1]\\nBuilt as part of the [30 Day AI Sprint](https://30dayaisprint.notion.site/) by [@maxtkacz](https://x.com/maxtkacz)\\n\"},\"typeVersion\":1},{\"id\":\"31debc55-6608-4e64-be18-1bc0fc0fbf16\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-340,1060],\"parameters\":{\"color\":7,\"width\":462.3561535890252,\"height\":172.4760209818479,\"content\":\"### FAQ\\n- In `Get database details` if you see a `The resource you are requesting could not be found` error, you need to add your connection to the database (in the Notion app).\\n- The `Get database details` pulls most recent `Tags` and informs AI Agent of them. However this step adds ~250-800ms per run. Watch detailed video to see how to remove this step. \"},\"typeVersion\":1},{\"id\":\"9f48e548-f032-477c-960d-9c99d61443df\",\"name\":\"AI Agent\",\"type\":\"@n8n/n8n-nodes-langchain.agent\",\"position\":[820,380],\"parameters\":{\"text\":\"={{ $json.chatInput }}\",\"options\":{\"systemMessage\":\"=# Role:\\nYou are a helpful agent. Query the \\\"{{ $json.databaseName }}\\\" Notion database to find relevant records or summarize insights based on multiple records.\\n\\n# Behavior:\\n\\nBe clear, very concise, efficient, and accurate in responses. Do not hallucinate.\\nIf the request is ambiguous, ask for clarification. Do not embellish, only use facts from the Notion records. Do not offer general advice.\\n\\n# Error Handling:\\n\\nIf no matching records are found, try alternative search criteria. Example 1: Laptop, then Computer, then Equipment. Example 2: meetings, then meeting.\\nClearly explain any issues with queries (e.g., missing fields or unsupported filters).\\n\\n# Output:\\n\\nReturn concise, user-friendly results or summaries.\\nFor large sets, show top results by default and offer more if needed. Output URLs in markdown format. \\n\\nWhen a record has the answer to user question, always output the URL to that page. Do not output links twice.\"},\"promptType\":\"define\"},\"typeVersion\":1.6},{\"id\":\"f1274a12-128c-4549-a19b-6bfc3beccd89\",\"name\":\"When chat message received\",\"type\":\"@n8n/n8n-nodes-langchain.chatTrigger\",\"position\":[220,380],\"webhookId\":\"b76d02c0-b406-4d21-b6bf-8ad2c623def3\",\"parameters\":{\"public\":true,\"options\":{\"title\":\"Notion Knowledge Base\",\"subtitle\":\"\"},\"initialMessages\":\"=Happy {{ $today.weekdayLong }}!\\nKnowledge source assistant at your service. How can I help you?\"},\"typeVersion\":1.1},{\"id\":\"2e25e4bc-7970-4d00-a757-ba1e418873aa\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-340,360],\"parameters\":{\"color\":7,\"width\":463.90418399676537,\"height\":318.2958135288425,\"content\":\"### Template set up quickstart video 👇\\n[![Video Thumbnail](https://uploads.n8n.io/maxt/notion-db-assistant-embedded-thumb.png#full-width)](https://www.youtube.com/watch?v=ynLZwS2Nhnc)\\n\"},\"typeVersion\":1},{\"id\":\"ba6fe953-fd5c-497f-ac2a-7afa04b7e6cc\",\"name\":\"Sticky Note3\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-340,700],\"parameters\":{\"color\":7,\"width\":461.5634274842711,\"height\":332.14098134070576,\"content\":\"### Written set up steps\\n1. Add a Notion credential to your n8n workspace (follow [this Notion guide](https://developers.notion.com/docs/create-a-notion-integration))\\n2. [Duplicate Company knowledge base Notion template](https://www.notion.so/templates/knowledge-base-ai-assistant-with-n8n) to your Notion workspace, then make sure to share the new knowledge base with connection you created in Step 1. \\n3. Add Notion cred to `Get database details`:`Credential to connect with` parameter, then to `Search notion database`:`Notion API` parameter (same for `Search inside database record`)\\n4. Add OpenAI credential to `Open AI Chat Model` node (tested and working with Anthropic Claude 3.5 too)\\n5. In `Get database details`, select the db you created from Step 2 in `Database` dropdown.\\n6. Click `Chat` button to test the workflow. Then Activate it and copy the `Chat URL` from `When chat message received`.\"},\"typeVersion\":1}],\"pinData\":{},\"connections\":{\"Format schema\":{\"main\":[[{\"node\":\"AI Agent\",\"type\":\"main\",\"index\":0}]]},\"OpenAI Chat Model\":{\"ai_languageModel\":[[{\"node\":\"AI Agent\",\"type\":\"ai_languageModel\",\"index\":0}]]},\"Get database details\":{\"main\":[[{\"node\":\"Format schema\",\"type\":\"main\",\"index\":0}]]},\"Window Buffer Memory\":{\"ai_memory\":[[{\"node\":\"AI Agent\",\"type\":\"ai_memory\",\"index\":0}]]},\"Search notion database\":{\"ai_tool\":[[{\"node\":\"AI Agent\",\"type\":\"ai_tool\",\"index\":0}]]},\"When chat message received\":{\"main\":[[{\"node\":\"Get database details\",\"type\":\"main\",\"index\":0}]]},\"Search inside database record\":{\"ai_tool\":[[{\"node\":\"AI Agent\",\"type\":\"ai_tool\",\"index\":0}]]}}}",
  "readme": "## Who is this for\n\nThis workflow is perfect for teams and individuals who manage extensive data in Notion and need a quick, AI-powered way to interact with their databases. If you're looking to streamline your knowledge management, automate searches, and get faster insights from your Notion databases, this workflow is for you. It’s ideal for support teams, project managers, or anyone who needs to query specific data across multiple records or within individual pages of their Notion setup.\n\nCheck out the Notion template this Assistant is set up to use: <https://www.notion.so/templates/knowledge-base-ai-assistant-with-n8n>\n\n## How it works\n\nThe **Notion Database Assistant** uses an AI Agent built with **Retrieval-Augmented Generation** (RAG) to query [this Knowledge Base style Notion database](https://30dayaisprint.notion.site/7ea9697d4875441eb2621105337d232e?v=cff6ba4cb0d14613b143af6f96dab287). The assistant can search across multiple properties like tags or question and retrieves content from inside individual Notion pages for additional context.\n\n**Key features include:**\n\n  * Querying the database with flexible filters.\n  * Searching within individual Notion pages and extracting relevant blocks.\n  * Providing a reference link to the exact Notion pages used to inform its responses, ensuring transparency and easy verification.\n  * This assistant uses two HTTP request tools—one for querying the Notion database and another for pulling data from within specific pages. It streamlines knowledge retrieval, offering a conversational, AI-driven way to interact with large datasets.\n\n\n\n## Set up\n\nFind basic set up instructions inside the workflow itself or watch a quickstart video 👇\n\n[![Video Thumbnail](https://uploads.n8n.io/maxt/notion-db-assistant-embedded-thumb.png)](https://www.youtube.com/watch?v=ynLZwS2Nhnc)\n",
  "crawled_at": "2025-05-25T23:46:24.864261",
  "readme_zh": "## 适用人群\n\n本工作流专为在Notion中管理海量数据、需要借助AI快速交互数据库的团队和个人设计。如果您希望优化知识管理流程、实现自动化检索，并更高效地从Notion数据库中获取洞察，这个解决方案将完美契合您的需求。特别适合客服团队、项目经理，或任何需要在Notion跨多条记录或单个页面内查询特定数据的用户。\n\n查看本助手配置使用的Notion模板：<https://www.notion.so/templates/knowledge-base-ai-assistant-with-n8n>\n\n## 工作原理\n\n**Notion数据库助手**采用基于**检索增强生成技术（RAG）**构建的AI代理，可查询[此知识库型Notion数据库](https://30dayaisprint.notion.site/7ea9697d4875441eb2621105337d232e?v=cff6ba4cb0d14613b143af6f96dab287)。该助手能跨标签、问题等多属性搜索，并从单个Notion页面中提取内容作为补充上下文。\n\n**核心功能包括：**\n\n  * 支持灵活筛选条件的数据库查询\n  * 在单个Notion页面内搜索并提取相关内容块\n  * 提供回答依据的原始页面链接，确保透明度和可验证性\n  * 通过两个HTTP请求工具（分别用于数据库查询和页面数据抓取）实现高效知识检索，提供对话式AI驱动的大数据集交互体验\n\n## 设置指南\n\n工作流内部包含基础设置说明，或观看快速入门视频 👇\n\n[![视频缩略图](https://uploads.n8n.io/maxt/notion-db-assistant-embedded-thumb.png)](https://www.youtube.com/watch?v=ynLZwS2Nhnc)",
  "title_zh": "Notion知识库AI助手",
  "publish_date_zh": "最后更新于7个月前",
  "workflow_json_zh": "{\n  \"meta\": {\n    \"instanceId\": \"205b3bc06c96f2dc835b4f00e1cbf9a937a74eeb3b47c99d0c30b0586dbf85aa\"\n  },\n  \"nodes\": [\n    {\n      \"id\": \"d1d4291e-fa37-43d0-81e0-f0a594371426\",\n      \"name\": \"OpenAI Chat Model\",\n      \"type\": \"@n8n/n8n-nodes-langchain.lmChatOpenAi\",\n      \"position\": [\n        680,\n        620\n      ],\n      \"parameters\": {\n        \"model\": \"gpt-4o\",\n        \"options\": {\n          \"timeout\": 25000,\n          \"temperature\": 0.7\n        }\n      },\n      \"credentials\": {\n        \"openAiApi\": {\n          \"id\": \"AzPPV759YPBxJj3o\",\n          \"name\": \"Max's DevRel OpenAI account\"\n        }\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"68e6805b-9c19-4c9e-a300-8983f2b7c28a\",\n      \"name\": \"Search notion database\",\n      \"type\": \"@n8n/n8n-nodes-langchain.toolHttpRequest\",\n      \"position\": [\n        980,\n        620\n      ],\n      \"parameters\": {\n        \"url\": \"=https://api.notion.com/v1/databases/{{ $json.notionID }}/query\",\n        \"method\": \"POST\",\n        \"jsonBody\": \"{\\n  \\\"filter\\\": {\\n    \\\"or\\\": [\\n      {\\n        \\\"property\\\": \\\"question\\\",\\n        \\\"rich_text\\\": {\\n          \\\"contains\\\": \\\"{keyword}\\\"\\n        }\\n      },\\n      {\\n        \\\"property\\\": \\\"tags\\\",\\n        \\\"multi_select\\\": {\\n          \\\"contains\\\": \\\"{tag}\\\"\\n        }\\n      }\\n    ]\\n  },\\n  \\\"sorts\\\": [\\n    {\\n      \\\"property\\\": \\\"updated_at\\\",\\n      \\\"direction\\\": \\\"ascending\\\"\\n    }\\n  ]\\n}\",\n        \"sendBody\": true,\n        \"specifyBody\": \"json\",\n        \"authentication\": \"predefinedCredentialType\",\n        \"toolDescription\": \"=Use this tool to search the \\\"\\\" Notion app database.\\n\\nIt is structured with question and answer format. \\nYou can filter query result by:\\n- By keyword\\n- filter by tag.\\n\\nKeyword and Tag have an OR relationship not AND.\\n\\n\",\n        \"nodeCredentialType\": \"notionApi\",\n        \"placeholderDefinitions\": {\n          \"values\": [\n            {\n              \"name\": \"keyword\",\n              \"description\": \"Searches question of the record. Use one keyword at a time.\"\n            },\n            {\n              \"name\": \"tag\",\n              \"description\": \"=Options: {{ $json.tagsOptions }}\"\n            }\n          ]\n        }\n      },\n      \"credentials\": {\n        \"notionApi\": {\n          \"id\": \"gfNp6Jup8rsmFLRr\",\n          \"name\": \"max-bot\"\n        }\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"c3164d38-a9fb-4ee3-b6bd-fccb4aa5a1a4\",\n      \"name\": \"Get database details\",\n      \"type\": \"n8n-nodes-base.notion\",\n      \"position\": [\n        420,\n        380\n      ],\n      \"parameters\": {\n        \"simple\": false,\n        \"resource\": \"database\",\n        \"databaseId\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": \"7ea9697d-4875-441e-b262-1105337d232e\",\n          \"cachedResultUrl\": \"https://www.notion.so/7ea9697d4875441eb2621105337d232e\",\n          \"cachedResultName\": \"StarLens Company Knowledge Base\"\n        }\n      },\n      \"credentials\": {\n        \"notionApi\": {\n          \"id\": \"gfNp6Jup8rsmFLRr\",\n          \"name\": \"max-bot\"\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"98300243-efcc-4427-88da-c1af8a91ddae\",\n      \"name\": \"Window Buffer Memory\",\n      \"type\": \"@n8n/n8n-nodes-langchain.memoryBufferWindow\",\n      \"position\": [\n        820,\n        620\n      ],\n      \"parameters\": {\n        \"contextWindowLength\": 4\n      },\n      \"typeVersion\": 1.2\n    },\n    {\n      \"id\": \"a8473f48-1343-4eb2-8e48-ec89377a2a00\",\n      \"name\": \"Search inside database record\",\n      \"type\": \"@n8n/n8n-nodes-langchain.toolHttpRequest\",\n      \"notes\": \" \",\n      \"position\": [\n        1140,\n        620\n      ],\n      \"parameters\": {\n        \"url\": \"https://api.notion.com/v1/blocks/{page_id}/children\",\n        \"fields\": \"id, type, paragraph.text, heading_1.text, heading_2.text, heading_3.text, bulleted_list_item.text, numbered_list_item.text, to_do.text, children\",\n        \"dataField\": \"results\",\n        \"authentication\": \"predefinedCredentialType\",\n        \"fieldsToInclude\": \"selected\",\n        \"toolDescription\": \"=Use this tool to retrieve Notion page content using the page ID. \\n\\nIt is structured with question and answer format. \\nYou can filter query result by:\\n- By keyword\\n- filter by tag.\\n\\nKeyword and Tag have an OR relationship not AND.\\n\\n\",\n        \"optimizeResponse\": true,\n        \"nodeCredentialType\": \"notionApi\",\n        \"placeholderDefinitions\": {\n          \"values\": [\n            {\n              \"name\": \"page_id\",\n              \"description\": \"Notion page id from 'Search notion database' tool results\"\n            }\n          ]\n        }\n      },\n      \"credentials\": {\n        \"notionApi\": {\n          \"id\": \"gfNp6Jup8rsmFLRr\",\n          \"name\": \"max-bot\"\n        }\n      },\n      \"notesInFlow\": true,\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"115c328e-84b0-43d2-8df7-8b3f74cbb2fb\",\n      \"name\": \"Format schema\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        620,\n        380\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"assignments\": {\n          \"assignments\": [\n            {\n              \"id\": \"a8e58791-ba51-46a2-8645-386dd1a0ff6e\",\n              \"name\": \"sessionId\",\n              \"type\": \"string\",\n              \"value\": \"={{ $('When chat message received').item.json.sessionId }}\"\n            },\n            {\n              \"id\": \"434209de-39d5-43d8-a964-0fcb7396306c\",\n              \"name\": \"action\",\n              \"type\": \"string\",\n              \"value\": \"={{ $('When chat message received').item.json.action }}\"\n            },\n            {\n              \"id\": \"cad4c972-51a9-4e16-a627-b00eea77eb30\",\n              \"name\": \"chatInput\",\n              \"type\": \"string\",\n              \"value\": \"={{ $('When chat message received').item.json.chatInput }}\"\n            },\n            {\n              \"id\": \"8e88876c-2714-494d-bd5e-5e80c99f83e3\",\n              \"name\": \"notionID\",\n              \"type\": \"string\",\n              \"value\": \"={{ $('Get database details').item.json.id }}\"\n            },\n            {\n              \"id\": \"a88a15f6-317c-4d2e-9d64-26f5ccaf7a97\",\n              \"name\": \"databaseName\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.title[0].text.content }}\"\n            },\n            {\n              \"id\": \"7c3bf758-8ed3-469a-8695-6777f4af4fb9\",\n              \"name\": \"tagsOptions\",\n              \"type\": \"string\",\n              \"value\": \"={{ $json.properties.tags.multi_select.options.map(item => item.name).join(',') }}\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"3b82f4fe-6c0c-4e6e-a387-27de31fec758\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -340,\n        240\n      ],\n      \"parameters\": {\n        \"color\": 6,\n        \"width\": 462.3561535890252,\n        \"height\": 95.12709218477178,\n        \"content\": \"## Notion知识库助手 [v1]\\n由[@maxtkacz](https://x.com/maxtkacz)在[30天AI冲刺计划](https://30dayaisprint.notion.site/)中构建完成\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"31debc55-6608-4e64-be18-1bc0fc0fbf16\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -340,\n        1060\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 462.3561535890252,\n        \"height\": 172.4760209818479,\n        \"content\": \"### 常见问题解答\\n- 在`获取数据库详情`时若出现`请求的资源不存在`错误，需先在Notion应用中添加数据库连接。\\n- `获取数据库详情`操作会拉取最新的`标签`数据并通知AI代理，但此步骤会导致每次运行增加约250-800毫秒延迟。观看详细视频了解如何跳过此步骤。\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"9f48e548-f032-477c-960d-9c99d61443df\",\n      \"name\": \"AI Agent\",\n      \"type\": \"@n8n/n8n-nodes-langchain.agent\",\n      \"position\": [\n        820,\n        380\n      ],\n      \"parameters\": {\n        \"text\": \"={{ $json.chatInput }}\",\n        \"options\": {\n          \"systemMessage\": \"=# Role:\\nYou are a helpful agent. Query the \\\"{{ $json.databaseName }}\\\" Notion database to find relevant records or summarize insights based on multiple records.\\n\\n# Behavior:\\n\\nBe clear, very concise, efficient, and accurate in responses. Do not hallucinate.\\nIf the request is ambiguous, ask for clarification. Do not embellish, only use facts from the Notion records. Do not offer general advice.\\n\\n# Error Handling:\\n\\nIf no matching records are found, try alternative search criteria. Example 1: Laptop, then Computer, then Equipment. Example 2: meetings, then meeting.\\nClearly explain any issues with queries (e.g., missing fields or unsupported filters).\\n\\n# Output:\\n\\nReturn concise, user-friendly results or summaries.\\nFor large sets, show top results by default and offer more if needed. Output URLs in markdown format. \\n\\nWhen a record has the answer to user question, always output the URL to that page. Do not output links twice.\"\n        },\n        \"promptType\": \"define\"\n      },\n      \"typeVersion\": 1.6\n    },\n    {\n      \"id\": \"f1274a12-128c-4549-a19b-6bfc3beccd89\",\n      \"name\": \"When chat message received\",\n      \"type\": \"@n8n/n8n-nodes-langchain.chatTrigger\",\n      \"position\": [\n        220,\n        380\n      ],\n      \"webhookId\": \"b76d02c0-b406-4d21-b6bf-8ad2c623def3\",\n      \"parameters\": {\n        \"public\": true,\n        \"options\": {\n          \"title\": \"Notion Knowledge Base\",\n          \"subtitle\": \"\"\n        },\n        \"initialMessages\": \"=Happy {{ $today.weekdayLong }}!\\nKnowledge source assistant at your service. How can I help you?\"\n      },\n      \"typeVersion\": 1.1\n    },\n    {\n      \"id\": \"2e25e4bc-7970-4d00-a757-ba1e418873aa\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -340,\n        360\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 463.90418399676537,\n        \"height\": 318.2958135288425,\n        \"content\": \"### 模板设置快速入门视频 👇\\n[![视频缩略图](https://uploads.n8n.io/maxt/notion-db-assistant-embedded-thumb.png#full-width)](https://www.youtube.com/watch?v=ynLZwS2Nhnc)\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"ba6fe953-fd5c-497f-ac2a-7afa04b7e6cc\",\n      \"name\": \"Sticky Note3\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -340,\n        700\n      ],\n      \"parameters\": {\n        \"color\": 7,\n        \"width\": 461.5634274842711,\n        \"height\": 332.14098134070576,\n        \"content\": \"### 书面设置步骤  \\n1. **添加Notion凭证**：在n8n工作区中添加Notion凭证（参照[Notion官方指南](https://developers.notion.com/docs/create-a-notion-integration)操作）  \\n2. **复制知识库模板**：将[公司知识库Notion模板](https://www.notion.so/templates/knowledge-base-ai-assistant-with-n8n)复制到你的Notion工作区，并确保将新知识库共享给第一步创建的连接  \\n3. **配置凭证**：  \\n   - 在`获取数据库详情`节点中，将Notion凭证填入`连接凭证`参数  \\n   - 在`搜索Notion数据库`和`搜索数据库记录`节点中，将同一凭证填入`Notion API`参数  \\n4. **添加OpenAI凭证**：在`OpenAI聊天模型`节点中添加OpenAI凭证（经测试也可兼容Anthropic Claude 3.5）  \\n5. **选择数据库**：在`获取数据库详情`节点的`数据库`下拉菜单中，选择第二步创建的数据库  \\n6. **测试与激活**：  \\n   - 点击`聊天`按钮测试工作流  \\n   - 激活工作流后，从`当收到聊天消息时`节点复制`聊天URL`\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"pinData\": {},\n  \"connections\": {\n    \"Format schema\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"OpenAI Chat Model\": {\n      \"ai_languageModel\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"ai_languageModel\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Get database details\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Format schema\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Window Buffer Memory\": {\n      \"ai_memory\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"ai_memory\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Search notion database\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"When chat message received\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Get database details\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Search inside database record\": {\n      \"ai_tool\": [\n        [\n          {\n            \"node\": \"AI Agent\",\n            \"type\": \"ai_tool\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}