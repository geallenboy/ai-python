{
  "url": "https://n8n.io/workflows/2530-automated-work-attendance-with-location-triggers/",
  "title": "Automated Work Attendance with Location Triggers",
  "author": "Rui Borges",
  "publish_date": "Last update 7 months ago",
  "publish_date_absolute": "2024-10-26",
  "categories": [
    {
      "name": "Other"
    },
    {
      "name": "HR"
    }
  ],
  "workflow_json": "{\"id\":\"x2kgOnBLtqAjqUVS\",\"meta\":{\"instanceId\":\"558d88703fb65b2d0e44613bc35916258b0f0bf983c5d4730c00c424b77ca36a\"},\"name\":\"Automated Work Attendance with Location Triggers\",\"tags\":[],\"nodes\":[{\"id\":\"b2cba308-6d47-432b-9296-58f233f15565\",\"name\":\"Webhook\",\"type\":\"n8n-nodes-base.webhook\",\"position\":[0,0],\"webhookId\":\"801c8367-af7b-4371-8684-cc699090b97f\",\"parameters\":{\"path\":\"time-track\",\"options\":{}},\"typeVersion\":2},{\"id\":\"67354f1c-9dac-4edd-b07d-f1b0dbd80159\",\"name\":\"Sticky Note\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[0,-260],\"parameters\":{\"width\":1120,\"height\":180,\"content\":\"## Check if the Worksheet Exists\"},\"typeVersion\":1},{\"id\":\"5fc5a1a6-f18d-4ee0-a70b-30de48a45dc7\",\"name\":\"Google Drive\",\"type\":\"n8n-nodes-base.googleDrive\",\"position\":[220,-220],\"parameters\":{\"filter\":{},\"options\":{},\"resource\":\"fileFolder\",\"returnAll\":true,\"queryString\":\"WorkTimeTracking\"},\"credentials\":{\"googleDriveOAuth2Api\":{\"id\":\"U6W5tWhDvO7rQ73t\",\"name\":\"Google Drive account\"}},\"executeOnce\":false,\"typeVersion\":3,\"alwaysOutputData\":true},{\"id\":\"a0b63be4-fa46-413f-82fe-42e6edc24f29\",\"name\":\"Create Worksheet\",\"type\":\"n8n-nodes-base.googleSheets\",\"position\":[800,-240],\"parameters\":{\"title\":\"WorkTimeTracking\",\"options\":{\"locale\":\"\"},\"resource\":\"spreadsheet\",\"sheetsUi\":{\"sheetValues\":[{\"title\":\"Worklog\"}]}},\"credentials\":{\"googleSheetsOAuth2Api\":{\"id\":\"TvzWrF2qPL7RjlJK\",\"name\":\"Google Sheets account\"}},\"typeVersion\":4.5},{\"id\":\"796e3ef6-3002-493e-8d89-10cba2d8026d\",\"name\":\"Return if Null\",\"type\":\"n8n-nodes-base.code\",\"position\":[400,-220],\"parameters\":{\"jsCode\":\"return [{json: {empty: items.length == 1 && Object.keys(items[0].json).length == 0}}];\"},\"typeVersion\":2},{\"id\":\"7af7ce4b-93e0-4058-8a45-9fd8269ddc77\",\"name\":\"Doesn't exist?\",\"type\":\"n8n-nodes-base.if\",\"position\":[580,-220],\"parameters\":{\"options\":{},\"conditions\":{\"options\":{\"version\":2,\"leftValue\":\"\",\"caseSensitive\":true,\"typeValidation\":\"strict\"},\"combinator\":\"and\",\"conditions\":[{\"id\":\"215b8ced-c6f5-4cf2-8755-9bba928dbe84\",\"operator\":{\"type\":\"boolean\",\"operation\":\"true\",\"singleValue\":true},\"leftValue\":\"={{$json[\\\"empty\\\"]}}\",\"rightValue\":\"\"}]}},\"typeVersion\":2.2},{\"id\":\"f2bc21c6-805b-49e7-b026-a4de56dce1fa\",\"name\":\"Set Logging Details\",\"type\":\"n8n-nodes-base.set\",\"position\":[780,20],\"parameters\":{\"mode\":\"raw\",\"options\":{},\"jsonOutput\":\"={\\n  \\\"Date\\\": \\\"{{ $now.format('yyyy-MM-dd') }}\\\",\\n  \\\"Time\\\": \\\"{{ $now.format('hh:mm') }}\\\",\\n  \\\"Direction\\\":\\\"Check-In\\\"\\n}\\n\"},\"typeVersion\":3.4},{\"id\":\"64bc8b93-a925-49d6-9e52-3f30f0c9e5a8\",\"name\":\"Create Log\",\"type\":\"n8n-nodes-base.googleSheets\",\"position\":[1000,20],\"parameters\":{\"columns\":{\"value\":{\"Date\":\"={{ $json.Date }}\",\"Time\":\"={{ $json.Time }}\",\"Direction\":\"={{ $('Webhook').item.json.headers.direction ? $('Webhook').item.json.headers.direction : \\\"\\\"}}\"},\"schema\":[{\"id\":\"Date\",\"type\":\"string\",\"display\":true,\"required\":false,\"displayName\":\"Date\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"Time\",\"type\":\"string\",\"display\":true,\"required\":false,\"displayName\":\"Time\",\"defaultMatch\":false,\"canBeUsedToMatch\":true},{\"id\":\"Direction\",\"type\":\"string\",\"display\":true,\"required\":false,\"displayName\":\"Direction\",\"defaultMatch\":false,\"canBeUsedToMatch\":true}],\"mappingMode\":\"defineBelow\",\"matchingColumns\":[]},\"options\":{},\"operation\":\"append\",\"sheetName\":{\"__rl\":true,\"mode\":\"list\",\"value\":308318361,\"cachedResultUrl\":\"https://docs.google.com/spreadsheets/d/1P7-Uqa4SPA6keujkkOTru1wdS2qDryJVkz0Nz_sFp7A/edit#gid=308318361\",\"cachedResultName\":\"Worklog\"},\"documentId\":{\"__rl\":true,\"mode\":\"id\",\"value\":\"={{ $('Google Drive').item.json.id }}\"}},\"credentials\":{\"googleSheetsOAuth2Api\":{\"id\":\"TvzWrF2qPL7RjlJK\",\"name\":\"Google Sheets account\"}},\"typeVersion\":4.5},{\"id\":\"cabca7d5-b4ae-45db-904d-f8efb37c4ab2\",\"name\":\"Sticky Note1\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[660,-40],\"parameters\":{\"width\":600,\"height\":280,\"content\":\"## Log Check-In or Check-Out\"},\"typeVersion\":1},{\"id\":\"5b9505fc-71a4-42c1-805f-c363384b4c8a\",\"name\":\"Sticky Note2\",\"type\":\"n8n-nodes-base.stickyNote\",\"position\":[-440,-320],\"parameters\":{\"color\":3,\"width\":380,\"height\":640,\"content\":\"## Location-Based Time Tracking\\n\\nThis automation streamlines your time tracking by using location triggers. Here's how it works:\\n\\nCreate two shortcuts in the iPhone Shortcuts app:\\n\\nName one \\\"Check-In\\\" and the other \\\"Check-Out.\\\"\\nWithin each shortcut, use the \\\"Get Content from URL\\\" action to call the Webhook. Set the Header Direction for \\\"Check-In\\\" or \\\"Check-Out\\\"\\n\\n\\nNow, whenever you enter or exit the specified location, your iPhone will automatically record the time in your Google Sheet. This creates a seamless and accurate log of your work hours or time spent at a particular place.\"},\"typeVersion\":1}],\"active\":true,\"pinData\":{},\"settings\":{\"timezone\":\"Europe/Lisbon\",\"callerPolicy\":\"workflowsFromSameOwner\",\"executionOrder\":\"v1\",\"executionTimeout\":-1,\"saveManualExecutions\":true},\"versionId\":\"2de5264f-eb68-4919-a3f3-133a8ceb45bb\",\"connections\":{\"Webhook\":{\"main\":[[{\"node\":\"Google Drive\",\"type\":\"main\",\"index\":0}]]},\"Google Drive\":{\"main\":[[{\"node\":\"Return if Null\",\"type\":\"main\",\"index\":0}]]},\"Doesn't exist?\":{\"main\":[[{\"node\":\"Create Worksheet\",\"type\":\"main\",\"index\":0}],[{\"node\":\"Set Logging Details\",\"type\":\"main\",\"index\":0}]]},\"Return if Null\":{\"main\":[[{\"node\":\"Doesn't exist?\",\"type\":\"main\",\"index\":0}]]},\"Create Worksheet\":{\"main\":[[{\"node\":\"Set Logging Details\",\"type\":\"main\",\"index\":0}]]},\"Set Logging Details\":{\"main\":[[{\"node\":\"Create Log\",\"type\":\"main\",\"index\":0}]]}}}",
  "readme": "his workflow automates time tracking using location-based triggers.\n\n## How it works\n\n  * Trigger: It starts when you enter or exit a specified location, triggering a shortcut on your iPhone.\n  * Webhook: The shortcut sends a request to a webhook in n8n.\n  * Check-In/Check-Out: The webhook receives the request and records the time and whether it was a \"Check-In\" or \"Check-Out\" event.\n  * Google Sheets: This data is then logged into a Google Sheet, creating a record of your work hours.\n\n\n\n## Set up steps\n\n  1. Google Drive: Connect your Google Drive account.\n  2. Google Sheets: Connect your Google Sheets account.\n  3. Webhook: Set up a webhook node in n8n.\n  4. iPhone Shortcuts: Create two shortcuts on your iPhone, one for \"Check-In\" and one for \"Check-Out.\"\n  5. Configure Shortcuts: Configure each shortcut to send a request to the webhook with the appropriate \"Direction\" header.\n\n\n\nIt's easy to setup, around 5 minutes.\n",
  "crawled_at": "2025-05-26T00:11:39.517622",
  "readme_zh": "该工作流利用基于位置的触发器自动记录时间。\n\n## 工作原理\n\n  * 触发机制：当您进入或离开指定位置时，将触发iPhone上的快捷指令\n  * 网络钩子：快捷指令向n8n中的网络钩子发送请求\n  * 签到/签退：网络钩子接收请求并记录时间及\"Check-In\"或\"Check-Out\"事件类型\n  * 谷歌表格：数据最终被记录到谷歌表格中，形成工作时间记录\n\n## 设置步骤\n\n  1. 谷歌云盘：连接您的谷歌云盘账户\n  2. 谷歌表格：连接您的谷歌表格账户\n  3. 网络钩子：在n8n中设置网络钩子节点\n  4. iPhone快捷指令：创建两个快捷指令，分别对应\"签到\"和\"签退\"\n  5. 配置快捷指令：设置每个快捷指令向网络钩子发送带有相应\"Direction\"标头的请求\n\n设置简单，约5分钟即可完成",
  "title_zh": "基于位置触发的自动考勤系统",
  "publish_date_zh": "最后更新于6个月前",
  "workflow_json_zh": "{\n  \"id\": \"x2kgOnBLtqAjqUVS\",\n  \"meta\": {\n    \"instanceId\": \"558d88703fb65b2d0e44613bc35916258b0f0bf983c5d4730c00c424b77ca36a\"\n  },\n  \"name\": \"Automated Work Attendance with Location Triggers\",\n  \"tags\": [],\n  \"nodes\": [\n    {\n      \"id\": \"b2cba308-6d47-432b-9296-58f233f15565\",\n      \"name\": \"Webhook\",\n      \"type\": \"n8n-nodes-base.webhook\",\n      \"position\": [\n        0,\n        0\n      ],\n      \"webhookId\": \"801c8367-af7b-4371-8684-cc699090b97f\",\n      \"parameters\": {\n        \"path\": \"time-track\",\n        \"options\": {}\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"67354f1c-9dac-4edd-b07d-f1b0dbd80159\",\n      \"name\": \"Sticky Note\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        0,\n        -260\n      ],\n      \"parameters\": {\n        \"width\": 1120,\n        \"height\": 180,\n        \"content\": \"## 检查工作表是否存在\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"5fc5a1a6-f18d-4ee0-a70b-30de48a45dc7\",\n      \"name\": \"Google Drive\",\n      \"type\": \"n8n-nodes-base.googleDrive\",\n      \"position\": [\n        220,\n        -220\n      ],\n      \"parameters\": {\n        \"filter\": {},\n        \"options\": {},\n        \"resource\": \"fileFolder\",\n        \"returnAll\": true,\n        \"queryString\": \"WorkTimeTracking\"\n      },\n      \"credentials\": {\n        \"googleDriveOAuth2Api\": {\n          \"id\": \"U6W5tWhDvO7rQ73t\",\n          \"name\": \"Google Drive account\"\n        }\n      },\n      \"executeOnce\": false,\n      \"typeVersion\": 3,\n      \"alwaysOutputData\": true\n    },\n    {\n      \"id\": \"a0b63be4-fa46-413f-82fe-42e6edc24f29\",\n      \"name\": \"Create Worksheet\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"position\": [\n        800,\n        -240\n      ],\n      \"parameters\": {\n        \"title\": \"WorkTimeTracking\",\n        \"options\": {\n          \"locale\": \"\"\n        },\n        \"resource\": \"spreadsheet\",\n        \"sheetsUi\": {\n          \"sheetValues\": [\n            {\n              \"title\": \"Worklog\"\n            }\n          ]\n        }\n      },\n      \"credentials\": {\n        \"googleSheetsOAuth2Api\": {\n          \"id\": \"TvzWrF2qPL7RjlJK\",\n          \"name\": \"Google Sheets account\"\n        }\n      },\n      \"typeVersion\": 4.5\n    },\n    {\n      \"id\": \"796e3ef6-3002-493e-8d89-10cba2d8026d\",\n      \"name\": \"Return if Null\",\n      \"type\": \"n8n-nodes-base.code\",\n      \"position\": [\n        400,\n        -220\n      ],\n      \"parameters\": {\n        \"jsCode\": \"return [{json: {empty: items.length == 1 && Object.keys(items[0].json).length == 0}}];\"\n      },\n      \"typeVersion\": 2\n    },\n    {\n      \"id\": \"7af7ce4b-93e0-4058-8a45-9fd8269ddc77\",\n      \"name\": \"Doesn't exist?\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"position\": [\n        580,\n        -220\n      ],\n      \"parameters\": {\n        \"options\": {},\n        \"conditions\": {\n          \"options\": {\n            \"version\": 2,\n            \"leftValue\": \"\",\n            \"caseSensitive\": true,\n            \"typeValidation\": \"strict\"\n          },\n          \"combinator\": \"and\",\n          \"conditions\": [\n            {\n              \"id\": \"215b8ced-c6f5-4cf2-8755-9bba928dbe84\",\n              \"operator\": {\n                \"type\": \"boolean\",\n                \"operation\": \"true\",\n                \"singleValue\": true\n              },\n              \"leftValue\": \"={{$json[\\\"empty\\\"]}}\",\n              \"rightValue\": \"\"\n            }\n          ]\n        }\n      },\n      \"typeVersion\": 2.2\n    },\n    {\n      \"id\": \"f2bc21c6-805b-49e7-b026-a4de56dce1fa\",\n      \"name\": \"Set Logging Details\",\n      \"type\": \"n8n-nodes-base.set\",\n      \"position\": [\n        780,\n        20\n      ],\n      \"parameters\": {\n        \"mode\": \"raw\",\n        \"options\": {},\n        \"jsonOutput\": \"={\\n  \\\"Date\\\": \\\"{{ $now.format('yyyy-MM-dd') }}\\\",\\n  \\\"Time\\\": \\\"{{ $now.format('hh:mm') }}\\\",\\n  \\\"Direction\\\":\\\"Check-In\\\"\\n}\\n\"\n      },\n      \"typeVersion\": 3.4\n    },\n    {\n      \"id\": \"64bc8b93-a925-49d6-9e52-3f30f0c9e5a8\",\n      \"name\": \"Create Log\",\n      \"type\": \"n8n-nodes-base.googleSheets\",\n      \"position\": [\n        1000,\n        20\n      ],\n      \"parameters\": {\n        \"columns\": {\n          \"value\": {\n            \"Date\": \"={{ $json.Date }}\",\n            \"Time\": \"={{ $json.Time }}\",\n            \"Direction\": \"={{ $('Webhook').item.json.headers.direction ? $('Webhook').item.json.headers.direction : \\\"\\\"}}\"\n          },\n          \"schema\": [\n            {\n              \"id\": \"Date\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"Date\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Time\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"Time\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            },\n            {\n              \"id\": \"Direction\",\n              \"type\": \"string\",\n              \"display\": true,\n              \"required\": false,\n              \"displayName\": \"Direction\",\n              \"defaultMatch\": false,\n              \"canBeUsedToMatch\": true\n            }\n          ],\n          \"mappingMode\": \"defineBelow\",\n          \"matchingColumns\": []\n        },\n        \"options\": {},\n        \"operation\": \"append\",\n        \"sheetName\": {\n          \"__rl\": true,\n          \"mode\": \"list\",\n          \"value\": 308318361,\n          \"cachedResultUrl\": \"https://docs.google.com/spreadsheets/d/1P7-Uqa4SPA6keujkkOTru1wdS2qDryJVkz0Nz_sFp7A/edit#gid=308318361\",\n          \"cachedResultName\": \"Worklog\"\n        },\n        \"documentId\": {\n          \"__rl\": true,\n          \"mode\": \"id\",\n          \"value\": \"={{ $('Google Drive').item.json.id }}\"\n        }\n      },\n      \"credentials\": {\n        \"googleSheetsOAuth2Api\": {\n          \"id\": \"TvzWrF2qPL7RjlJK\",\n          \"name\": \"Google Sheets account\"\n        }\n      },\n      \"typeVersion\": 4.5\n    },\n    {\n      \"id\": \"cabca7d5-b4ae-45db-904d-f8efb37c4ab2\",\n      \"name\": \"Sticky Note1\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        660,\n        -40\n      ],\n      \"parameters\": {\n        \"width\": 600,\n        \"height\": 280,\n        \"content\": \"## 日志登记或注销\"\n      },\n      \"typeVersion\": 1\n    },\n    {\n      \"id\": \"5b9505fc-71a4-42c1-805f-c363384b4c8a\",\n      \"name\": \"Sticky Note2\",\n      \"type\": \"n8n-nodes-base.stickyNote\",\n      \"position\": [\n        -440,\n        -320\n      ],\n      \"parameters\": {\n        \"color\": 3,\n        \"width\": 380,\n        \"height\": 640,\n        \"content\": \"## 基于位置的工时记录\\n\\n该自动化功能通过地理位置触发实现高效工时追踪，具体运作方式如下：\\n\\n在iPhone快捷指令应用中创建两个快捷指令：\\n- 一个命名为\\\"签到\\\"\\n- 另一个命名为\\\"签退\\\"\\n\\n在每个指令中配置\\\"从URL获取内容\\\"操作来调用Webhook，并需设置请求头方向参数（\\\"Check-In\\\"对应签到，\\\"Check-Out\\\"对应签退）\\n\\n当您进入或离开预设区域时，iPhone将自动在Google表格中记录时间戳。这种无感化操作能精准生成您的工作时长或场所停留记录，实现全自动化的工时管理。\"\n      },\n      \"typeVersion\": 1\n    }\n  ],\n  \"active\": true,\n  \"pinData\": {},\n  \"settings\": {\n    \"timezone\": \"Europe/Lisbon\",\n    \"callerPolicy\": \"workflowsFromSameOwner\",\n    \"executionOrder\": \"v1\",\n    \"executionTimeout\": -1,\n    \"saveManualExecutions\": true\n  },\n  \"versionId\": \"2de5264f-eb68-4919-a3f3-133a8ceb45bb\",\n  \"connections\": {\n    \"Webhook\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Google Drive\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Google Drive\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Return if Null\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Doesn't exist?\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Create Worksheet\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ],\n        [\n          {\n            \"node\": \"Set Logging Details\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Return if Null\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Doesn't exist?\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Create Worksheet\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Set Logging Details\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    },\n    \"Set Logging Details\": {\n      \"main\": [\n        [\n          {\n            \"node\": \"Create Log\",\n            \"type\": \"main\",\n            \"index\": 0\n          }\n        ]\n      ]\n    }\n  }\n}"
}