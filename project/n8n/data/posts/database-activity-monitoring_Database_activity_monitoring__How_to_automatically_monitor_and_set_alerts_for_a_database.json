{
  "url": "https://blog.n8n.io/database-activity-monitoring/",
  "title": "Database activity monitoring: How to automatically monitor and set alerts for a database",
  "excerpt": "Learn what database activity monitoring is, why it's important, and how to automatically monitor a Postgres database containing IoT data with n8n workflows.",
  "thumbnail": "https://blog.n8n.io/content/images/size/w1200/2022/06/database-monitoring8-1.png",
  "tags": [
    "Database",
    "ITOps",
    "SecOps",
    "Tutorial"
  ],
  "html": "<p>Database activity monitoring (DAM) is increasingly valued in organizations that work with data, as it helps ensure that mission-critical processes run optimally and issues are detected on time.</p><p>The global DAM software market is projected to grow <a href=\"https://www.fortunebusinessinsights.com/database-monitoring-software-market-106413?ref=blog.n8n.io\" target=\"_blank\" rel=\"noopener\">by 15% by 2029</a>, with DAM tools looking to <a href=\"https://www.smartdatacollective.com/database-activity-monitoring-security-investment-that-pays-off/?ref=blog.n8n.io\" target=\"_blank\" rel=\"noopener\">leverage machine learning</a> in their solutions. These trends are fueled largely by a sharper focus on data privacy regulations and an increased risk of cyber-attacks. In this context, DAM is a worthwhile investment.</p><p>In this article, you'll learn about database activity monitoring: what it is, how it works, why it's important, and what to monitor in your database.</p><p>Moreover, you'll learn how to build an n8n workflow that automatically <a href=\"https://n8n.io/workflows/357-send-sms-alerts-based-on-database-queries-twilio-and-postgres/?ref=blog.n8n.io\" target=\"_blank\" rel=\"noopener\">monitors sensor activity data in a Postgres database and sends SMS via Twilio </a>when it detects outliers.</p><!--kg-card-begin: markdown--><h4 id=\"table-of-contents\">Table of contents</h4>\n<p><a href=\"#what-does-database-activity-monitoring-mean\">What does database activity monitoring mean?</a><br>\n<a href=\"#why-is-database-activity-monitoring-important\">Why is database activity monitoring important?</a><br>\n<a href=\"#what-should-be-monitored-in-a-database\">What should be monitored in a database?</a><br>\n<a href=\"#how-do-you-monitor-a-database\">How do you monitor a database?</a><br>\n<a href=\"#tools-for-database-activity-monitoring\">Tools for database activity monitoring</a><br>\n<a href=\"#n8n-workflow-for-database-activity-monitoring\">n8n workflow for database activity monitoring</a><br>\n&nbsp;&nbsp;&nbsp; <a href=\"#prerequisites-for-building-the-workflow\">Prerequisites for building the workflow</a><br>\n&nbsp;&nbsp;&nbsp; <a href=\"#workflow-1---generate-data-and-insert-it-into-a-database\">Workflow 1 - Generate data and insert it into a database</a><br>\n&nbsp;&nbsp;&nbsp; <a href=\"#workflow-2---query-a-database-and-send-sms-alerts\">Workflow 2 - Query a database and send SMS alerts</a><br>\n<a href=\"#whats-next\">What's next?</a></p>\n<!--kg-card-end: markdown--><h2 id=\"what-does-database-activity-monitoring-mean\">What does database activity monitoring mean?</h2><p><strong>Database activity monitoring (DAM) is the process of observing activities of a database and reporting suspicious activity. </strong><a href=\"https://www.gartner.com/en/information-technology/glossary/database-activity-monitoring-dam?ref=blog.n8n.io\" target=\"_blank\" rel=\"noopener\">Gartner defines DAM</a> as \"a suite of tools that can be used to support the ability to identify and report on fraudulent, illegal or other undesirable behavior, with minimal impact on user operations and productivity\".</p><p>DAM tools (or workflows) can track user actions and changes made to a database continuously and in real-time, and then send notifications or alerts to a specified channel or person. Thus, DAM is a way of ensuring compliance in data processing, strengthening database security, and offering more visibility into database activities.</p><h2 id=\"why-is-database-activity-monitoring-important\">Why is database activity monitoring important?</h2><p>Essentially, database activity monitoring:</p><ul><li>Increases productivity and efficiency in the responsible team.</li><li>Strengthens database security, along with data privacy and compliance.</li><li>Helps you improve and optimize the performance of your database.</li><li>Offers more insight into database performance and health metrics.</li></ul><p>Especially in the context of remote work, which involves using personal devices, home connections, and maybe even unverified/insecure networks, <a href=\"https://securityintelligence.com/posts/managed-data-activity-monitoring-dam-is-more-important-than-ever/?ref=blog.n8n.io\" target=\"_blank\" rel=\"noopener\">DAM is more important than ever</a>.</p><h2 id=\"what-should-be-monitored-in-a-database\"><strong>What should be monitored in a database?</strong></h2><p><strong>The most important issues you should monitor in a database boil down to database performance and user activity</strong>. Specifically, these can be:</p><ul><li><strong>Suspicious user activity</strong>: Users with admin rights (for example, database administrators or system administrators) can abuse their privileges to access sensitive data or compromise the database. Abnormal database activity can also point to bad actors inside or outside of an organization who attempt data breaches.</li><li><strong>Database changes</strong>: Whether intentional or accidental, changes to a database (for example, schema updates) can impact the performance, and it's important to review them on time.</li><li><strong>Query performance</strong>: Slow or overly complicated queries can take a long time to execute, thus decreasing performance.</li><li><strong>Failures and errors</strong>: System outages, user errors (for example, if a user accidentally deletes a row in a table), or failed queries are just some examples of situations that can (severely) impact the data and performance of a database.</li></ul><h2 id=\"how-do-you-monitor-a-database\"><strong>How do you monitor a database?</strong></h2><p>You can monitor a database by looking into its <a href=\"https://datatechnologytoday.wordpress.com/2014/02/10/the-log-is-the-database/?ref=blog.n8n.io#:~:text=The%20database%20log%2C%20sometimes%20referred,which%20changes%20to%20the%20database.\" target=\"_blank\" rel=\"noopener\"><strong>transaction logs</strong></a><strong>,</strong> using <strong>DAM tools</strong>, or setting up <strong>workflow automations</strong> for specific issues you want to keep an eye on.</p><p>The process of monitoring database activity usually consists of three main steps:</p><ol><li>Decide what you want to monitor in the database.</li><li>Set up the tool/workflow for monitoring the database.</li><li>Define the follow-up action to take when an issue is detected in the database.</li></ol><h2 id=\"tools-for-database-activity-monitoring\"><strong>Tools for database activity monitoring</strong><br></h2><p>Nowadays, many established and new companies are offering a variety of DAM tools and solutions, tailored to the needs of customers across industries.</p><p>Here are <strong>10 open-source and paid tools for DAM</strong>:</p><ul><li><a href=\"https://www.datadoghq.com/?ref=blog.n8n.io\" target=\"_blank\" rel=\"noopener\"><strong>DataDog</strong></a> is an enterprise observability service that provides monitoring for databases through a data analytics platform.</li><li><a href=\"https://www.dynatrace.com/?ref=blog.n8n.io\" target=\"_blank\" rel=\"noopener\"><strong>Dynatrace</strong></a> is a software intelligence platform that provides database monitoring services based on artificial intelligence and automation.</li><li><a href=\"https://icinga.com/?ref=blog.n8n.io\" target=\"_blank\" rel=\"noopener\"><strong>Icinga</strong></a> is an open-source computer system and network monitoring application that covers all aspects of monitoring, including database functionality and alerting.</li><li><a href=\"https://www.manageengine.com/products/eventlog/database-activity-monitoring.html?ref=blog.n8n.io\" target=\"_blank\" rel=\"noopener\"><strong>ManageEngine</strong></a> offers enterprise IT management software, including monitoring for both SQL and NoSQL databases.</li><li><a href=\"https://newrelic.com/?ref=blog.n8n.io\" target=\"_blank\" rel=\"noopener\"><strong>NewRelic</strong></a> offers cloud-based software for website and application monitoring.</li><li><a href=\"https://prometheus.io/?ref=blog.n8n.io\" target=\"_blank\" rel=\"noopener\"><strong>Prometheus</strong></a> is an open-source monitoring and alerting tool that allows capturing time-series data as metrics.</li><li><a href=\"https://sensu.io/?ref=blog.n8n.io\" target=\"_blank\" rel=\"noopener\"><strong>Sensu</strong></a> is an open source tool that delivers monitoring as code on any cloud.</li><li><a href=\"https://signoz.io/?ref=blog.n8n.io\" target=\"_blank\" rel=\"noopener\"><strong>SigNoz</strong></a> is an open-source tool for monitoring the entire software system, including the performance of database calls.</li><li><a href=\"https://www.site24x7.com/?ref=blog.n8n.io\" target=\"_blank\" rel=\"noopener\"><strong>Site24x7</strong></a> offers both free and paid monitoring services for the entire IT environment.</li><li><a href=\"https://www.solarwinds.com/?ref=blog.n8n.io\" target=\"_blank\" rel=\"noopener\"><strong>SolarWinds</strong></a> offers performance and availability monitoring for websites, applications, and servers, including Database Performance Monitoring.</li></ul><p><strong>Another option is to use n8n for building your own custom database monitoring workflow. </strong>This way, you can take DAM one step further and send alerts to different channels, route them based on conditional logic, and integrate other popular apps or services, for example for <a href=\"https://blog.n8n.io/devsecops-tools/\">DevSecOps use cases</a>.</p><h2 id=\"n8n-workflow-for-database-activity-monitoring\"><strong>n8n workflow for database activity monitoring</strong></h2><p>Now that you know the basics of database activity monitoring, let's build a workflow that automatically monitors a Postgres database and sends an alert about outlier values using <a href=\"https://n8n.io/?ref=blog.n8n.io\" target=\"_blank\" rel=\"noopener\">n8n</a>.</p><p>For this use case, we'll generate, store, and monitor sensor data (like humidity, temperature, pressure) in <a href=\"https://n8n.io/integrations/postgres/?ref=blog.n8n.io\" target=\"_blank\" rel=\"noopener\">a Postgres database</a>.</p><p>This database activity monitoring automation use case consists of two workflows:</p><ol><li><a href=\"https://n8n.io/workflows/356-generate-and-insert-data-into-a-postgres-database/?ref=blog.n8n.io\" target=\"_blank\" rel=\"noopener\">Workflow 1</a> generates data and creates a database record every minute. This is a way to simulate sensor readings being ingested by a database.</li><li><a href=\"https://n8n.io/workflows/357-send-sms-alerts-based-on-database-queries-twilio-and-postgres/?ref=blog.n8n.io\" target=\"_blank\" rel=\"noopener\">Workflow 2</a> checks for the threshold values every minute and, if a value crosses the specified threshold, it triggers an alert with an SMS, and updates the value in the database.</li></ol><h3 id=\"prerequisites-for-building-the-workflow\"><strong>Prerequisites for building the workflow</strong></h3><ul><li>n8n set up. The easiest way is to <a href=\"https://docs.n8n.io/hosting/installation/desktop-app/?ref=blog.n8n.io\" target=\"_blank\" rel=\"noopener\">download the desktop app</a>, but you can also <a href=\"https://n8n.io/cloud/?ref=blog.n8n.io\" target=\"_blank\" rel=\"noopener\">sign up for n8n cloud</a> or <a href=\"https://docs.n8n.io/hosting/installation/docker/?ref=blog.n8n.io\" target=\"_blank\" rel=\"noopener\">self-host n8n</a>.</li><li>PostgreSQL set up and <a href=\"https://docs.n8n.io/integrations/credentials/postgres/?ref=blog.n8n.io\" target=\"_blank\" rel=\"noopener\">credentials</a>. You can create the database for this workflow with the following SQL statement: CREATE TABLE n8n (id SERIAL, sensor_id VARCHAR, value INT, time_stamp TIMESTAMP, notification BOOLEAN);</li><li>Basic knowledge of SQL. This is helpful for knowing how to create a table and query the database.</li></ul><h3 id=\"workflow-1generate-data-and-insert-it-into-a-database\"><strong>Workflow 1 - Generate data and insert it into a database</strong></h3><p>This workflow builds the initial setup for automatic database activity monitoring. It generates sensor data and inserts the values into a Postgres database.</p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://blog.n8n.io/content/images/2022/06/dbmonitoring_workflow1.png\" class=\"kg-image lightense-target\" alt=\"Workflow for generating data and inserting it into a Postgres database\" loading=\"lazy\" width=\"2000\" height=\"1390\" srcset=\"https://blog.n8n.io/content/images/size/w600/2022/06/dbmonitoring_workflow1.png 600w, https://blog.n8n.io/content/images/size/w1000/2022/06/dbmonitoring_workflow1.png 1000w, https://blog.n8n.io/content/images/size/w1600/2022/06/dbmonitoring_workflow1.png 1600w, https://blog.n8n.io/content/images/2022/06/dbmonitoring_workflow1.png 2360w\" sizes=\"(min-width: 720px) 720px\"><figcaption>Workflow for generating data and inserting it into a Postgres database</figcaption></figure><p>The workflow consists of three nodes:</p><ol><li><a href=\"https://docs.n8n.io/integrations/core-nodes/n8n-nodes-base.cron/?ref=blog.n8n.io\" target=\"_blank\" rel=\"noopener\">Cron node</a> triggers the workflow at regular time intervals. The node has the following parameter:</li></ol><ul><li>Mode: Every Minute</li></ul><p>2. <a href=\"https://docs.n8n.io/integrations/core-nodes/n8n-nodes-base.cron/?ref=blog.n8n.io\" target=\"_blank\" rel=\"noopener\">Function node</a> generates sensor data (sensor id (preset), a randomly generated value, timestamp, and notification (preset as false)). In the JavaScript Code field, copy-paste the following code:</p><!--kg-card-begin: markdown--><pre><code class=\"language-javascript\">\nvar today = new Date();\nvar date = today.getFullYear()+'-'+(today.getMonth()+1)+'-'+today.getDate();\nvar time = today.getHours() + \":\" + today.getMinutes() + \":\" + today.getSeconds();\nvar dateTime = date+' '+time;\nitems[0].json.sensor_id = 'humidity01';\nitems[0].json.value = Math.ceil(Math.random()*100);\nitems[0].json.time_stamp = dateTime;\nitems[0].json.notification = false;\nreturn items;\n\n</code></pre>\n<!--kg-card-end: markdown--><p>3. <a href=\"https://docs.n8n.io/integrations/nodes/n8n-nodes-base.postgres/?ref=blog.n8n.io\" target=\"_blank\" rel=\"noopener\">Postgres node</a> inserts the data into a Postgres database. The node has the following parameters:</p><ul><li>Operation: Insert</li><li>Schema: public</li><li>Table: n8n</li><li>Columns: sensor_id,value,time_stamp,notification</li><li>Return Fields: *</li></ul><p>Don’t forget to save and activate the workflow before moving on to the next workflow. Once you have done that, every minute a new record will be inserted into the database.</p><h3 id=\"workflow-2query-a-database-and-send-sms-alerts\"><strong>Workflow 2 - Query a database and send SMS alerts</strong></h3><p>This workflow builds the actual automation for database activity monitoring and alerting. It queries the Postgres database at regular time intervals for threshold values and, if a value crosses the specified threshold, it triggers an alert with an SMS, then updates the value in the database.</p><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://blog.n8n.io/content/images/2022/06/dbmonitoring_workflow2_twilio.png\" class=\"kg-image lightense-target\" alt=\"Workflow for querying a database and sending SMS alerts with Twilio\" loading=\"lazy\" width=\"2000\" height=\"1390\" srcset=\"https://blog.n8n.io/content/images/size/w600/2022/06/dbmonitoring_workflow2_twilio.png 600w, https://blog.n8n.io/content/images/size/w1000/2022/06/dbmonitoring_workflow2_twilio.png 1000w, https://blog.n8n.io/content/images/size/w1600/2022/06/dbmonitoring_workflow2_twilio.png 1600w, https://blog.n8n.io/content/images/2022/06/dbmonitoring_workflow2_twilio.png 2360w\" sizes=\"(min-width: 720px) 720px\"><figcaption>Workflow for querying a database and sending SMS alerts with Twilio</figcaption></figure><p>The workflow consists of five nodes:</p><ol><li><a href=\"https://docs.n8n.io/integrations/core-nodes/n8n-nodes-base.cron/?ref=blog.n8n.io\" target=\"_blank\" rel=\"noopener\">Cron node</a> triggers the workflow every minute. The node has the following parameter:</li></ol><ul><li>Mode: Every Minute</li></ul><p>2. <a href=\"https://docs.n8n.io/integrations/nodes/n8n-nodes-base.postgres/?ref=blog.n8n.io\" target=\"_blank\" rel=\"noopener\">Postgres node</a> queries the database for values over 70 and notifications that haven't been sent (false). The node has the following parameters:</p><ul><li>Operation: Execute Query</li><li>Query: SELECT * FROM n8n WHERE value &gt; 70 AND notification = false;</li></ul><p>3. <a href=\"https://docs.n8n.io/integrations/nodes/n8n-nodes-base.twilio/?ref=blog.n8n.io\" target=\"_blank\" rel=\"noopener\">Twilio node</a> sends an SMS with information about the queried values. The node has the following parameters:</p><ul><li>Resource: SMS</li><li>Operation: Send</li><li>From: phone number of the sender</li><li>To: phone number of the receiver</li><li>Message &gt; Add Expression: 🚨 The Sensor ({{$node[\"Postgres\"].json[\"sensor_id\"]}}) showed a reading of {{$node[\"Postgres\"].json[\"value\"]}}.</li></ul><figure class=\"kg-card kg-image-card kg-card-hascaption\"><img src=\"https://blog.n8n.io/content/images/2022/06/dbmonitoring_twiliomsg.jpeg\" class=\"kg-image lightense-target\" alt=\"SMS alert in Twilio\" loading=\"lazy\" width=\"713\" height=\"676\" srcset=\"https://blog.n8n.io/content/images/size/w600/2022/06/dbmonitoring_twiliomsg.jpeg 600w, https://blog.n8n.io/content/images/2022/06/dbmonitoring_twiliomsg.jpeg 713w\"><figcaption>SMS alert in Twilio</figcaption></figure><p>You might want to turn off the other workflow or device at some point, otherwise you might end up using all your Twilio free credits during the first run.</p><p>4. <a href=\"https://docs.n8n.io/integrations/core-nodes/n8n-nodes-base.set/?ref=blog.n8n.io\" target=\"_blank\" rel=\"noopener\">Set node</a> sets the value of the notification to true for all the corresponding ids. Once you make this update in the database with the help of the next node, the SMS alerts will not go through twice for any given record. The node has the following parameters:</p><ul><li>Keep Only Set: toggle to true</li><li>Add Value &gt; Number:</li><li>Name: id</li><li>Value &gt; Add Expression: {{$node[\"Postgres2\"].json[\"id\"]}}</li><li>Add Value &gt; Boolean:</li><li>Name: notification</li><li>Value: toggle to true</li></ul><p>5. <a href=\"https://docs.n8n.io/integrations/nodes/n8n-nodes-base.postgres/?ref=blog.n8n.io\" target=\"_blank\" rel=\"noopener\">Postgres node</a> updates the information in the database based on the id. The node has the following parameters:</p><ul><li>Operation: Update</li><li>Schema: public</li><li>Table: n8n</li><li>Update Key: id</li><li>Columns: notification</li><li>Return Fields: *</li></ul><p>And that was it! Now you have two workflows that automatically monitor activity in your Postgres database and send you SMS alerts when values exceed a specific threshold.</p><h2 id=\"whats-next\"><strong>What's next?</strong></h2><p>In this post, you’ve learned the basics of database activity monitoring and saw how to build a workflow that automatically monitors a Postgres database and sends SMS alerts. Go ahead and<a href=\"https://n8n.io/pricing/?ref=blog.n8n.io\" target=\"_blank\" rel=\"noopener\"> try n8n for free</a> and start building your custom database activity monitoring workflow!</p><p>Here's what you can do next:</p><ul><li>Read more tutorials about use cases related to databases and security, for example <a href=\"https://blog.n8n.io/workflow-for-cratedb-backup-management/\">How to manage database backups</a> or <a href=\"https://blog.n8n.io/automated-incident-response-workflow/\">How to automate an incident response playbook</a>.</li><li>Check out the <a href=\"https://n8n.io/workflows/?ref=blog.n8n.io\" target=\"_blank\" rel=\"noopener\">workflow page</a> for more automation ideas.</li><li>Join the <a href=\"https://community.n8n.io/?ref=blog.n8n.io\" target=\"_blank\" rel=\"noopener\">community forum</a> and follow us on <a href=\"https://twitter.com/n8n_io?ref=blog.n8n.io\" target=\"_blank\" rel=\"noopener\">Twitter</a>.<br></li></ul>\n\t\t<div class=\"newsletter-banner\">\n\t    <div class=\"newsletter-banner-content\">\n\t      <div class=\"section-header\">\n\t        <h2>Subscribe to <span>n8n newsletter</span></h2>\n\t        <div class=\"section-subheader--bottom\">\n\t          Get the best, coolest, and latest in automation and low-code delivered to your inbox each week.\n\t        </div>\n\t      </div>\n\t      <div class=\"newsletter-banner-form\">\n\t        <form autocomplete=\"off\" class=\"contact-form\" onsubmit=\"subscribeNewsletter(event)\">\n\t        \t<div id=\"recaptcha\" class=\"g-recaptcha\" data-sitekey=\"6LeAQeopAAAAAKlLsRb1weWm6T_vijoQBkGkbHzB\" data-callback=\"submitSubscription\" data-size=\"invisible\"><div class=\"grecaptcha-badge\" data-style=\"bottomright\" style=\"width: 256px; height: 60px; display: block; transition: right 0.3s ease 0s; position: fixed; bottom: 14px; right: -186px; box-shadow: gray 0px 0px 5px; border-radius: 2px; overflow: hidden;\"><div class=\"grecaptcha-logo\"><iframe title=\"reCAPTCHA\" width=\"256\" height=\"60\" role=\"presentation\" name=\"a-r98mnduxrbz3\" frameborder=\"0\" scrolling=\"no\" sandbox=\"allow-forms allow-popups allow-same-origin allow-scripts allow-top-navigation allow-modals allow-popups-to-escape-sandbox allow-storage-access-by-user-activation\" src=\"https://www.google.com/recaptcha/api2/anchor?ar=1&amp;k=6LeAQeopAAAAAKlLsRb1weWm6T_vijoQBkGkbHzB&amp;co=aHR0cHM6Ly9ibG9nLm44bi5pbzo0NDM.&amp;hl=en&amp;v=jt8Oh2-Ue1u7nEbJQUIdocyd&amp;size=invisible&amp;cb=semwhsf789ep\"></iframe></div><div class=\"grecaptcha-error\"></div><textarea id=\"g-recaptcha-response\" name=\"g-recaptcha-response\" class=\"g-recaptcha-response\" style=\"width: 250px; height: 40px; border: 1px solid rgb(193, 193, 193); margin: 10px 25px; padding: 0px; resize: none; display: none;\"></textarea></div><iframe style=\"display: none;\"></iframe></div>\n\t          <div class=\"input-wrapper\">\n\t            <input placeholder=\"Email\" name=\"email\" type=\"email\" required=\"required\" class=\"\">\n\t            <div class=\"messages\">\n\t              <div class=\"message message--error\">Something went wrong. Please try again later.</div>\n\t              <div class=\"message message--success\">Subscribed!</div>\n\t            </div>\n\t          </div>\n\t          <button type=\"submit\" class=\"submit-btn\">Subscribe</button>\n\t        </form>\n\t      </div>\n\t    </div>\n    </div>\n\t\t<div class=\"post-share-section\">\n\t<div class=\"post-share-wrap\">\n\t\t<a href=\"https://twitter.com/intent/tweet?text=Database%20activity%20monitoring%3A%20How%20to%20automatically%20monitor%20and%20set%20alerts%20for%20a%20database&amp;url=https://blog.n8n.io/database-activity-monitoring/\" target=\"_blank\" rel=\"noopener\" aria-label=\"Twitter share icon\"><svg role=\"img\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M23.954 4.569c-.885.389-1.83.654-2.825.775 1.014-.611 1.794-1.574 2.163-2.723-.951.555-2.005.959-3.127 1.184-.896-.959-2.173-1.559-3.591-1.559-2.717 0-4.92 2.203-4.92 4.917 0 .39.045.765.127 1.124C7.691 8.094 4.066 6.13 1.64 3.161c-.427.722-.666 1.561-.666 2.475 0 1.71.87 3.213 2.188 4.096-.807-.026-1.566-.248-2.228-.616v.061c0 2.385 1.693 4.374 3.946 4.827-.413.111-.849.171-1.296.171-.314 0-.615-.03-.916-.086.631 1.953 2.445 3.377 4.604 3.417-1.68 1.319-3.809 2.105-6.102 2.105-.39 0-.779-.023-1.17-.067 2.189 1.394 4.768 2.209 7.557 2.209 9.054 0 13.999-7.496 13.999-13.986 0-.209 0-.42-.015-.63.961-.689 1.8-1.56 2.46-2.548l-.047-.02z\"></path></svg></a>\n\t\t<a href=\"https://www.facebook.com/sharer/sharer.php?u=https://blog.n8n.io/database-activity-monitoring/\" target=\"_blank\" rel=\"noopener\" aria-label=\"Facebook share icon\"><svg role=\"img\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M23.9981 11.9991C23.9981 5.37216 18.626 0 11.9991 0C5.37216 0 0 5.37216 0 11.9991C0 17.9882 4.38789 22.9522 10.1242 23.8524V15.4676H7.07758V11.9991H10.1242V9.35553C10.1242 6.34826 11.9156 4.68714 14.6564 4.68714C15.9692 4.68714 17.3424 4.92149 17.3424 4.92149V7.87439H15.8294C14.3388 7.87439 13.8739 8.79933 13.8739 9.74824V11.9991H17.2018L16.6698 15.4676H13.8739V23.8524C19.6103 22.9522 23.9981 17.9882 23.9981 11.9991Z\"></path></svg></a>\n\t\t<!-- <a href=\"javascript:\" class=\"post-share-link\" id=\"copy\" data-clipboard-target=\"#copy-link\" aria-label=\"Copy link icon\"><svg role=\"img\" viewBox=\"0 0 33 24\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M27.3999996,13.4004128 L21.7999996,13.4004128 L21.7999996,19 L18.9999996,19 L18.9999996,13.4004128 L13.3999996,13.4004128 L13.3999996,10.6006192 L18.9999996,10.6006192 L18.9999996,5 L21.7999996,5 L21.7999996,10.6006192 L27.3999996,10.6006192 L27.3999996,13.4004128 Z M12,20.87 C7.101,20.87 3.13,16.898 3.13,12 C3.13,7.102 7.101,3.13 12,3.13 C12.091,3.13 12.181,3.139 12.272,3.142 C9.866,5.336 8.347,8.487 8.347,12 C8.347,15.512 9.866,18.662 12.271,20.857 C12.18,20.859 12.091,20.87 12,20.87 Z M20.347,0 C18.882,0 17.484,0.276 16.186,0.756 C14.882,0.271 13.473,0 12,0 C5.372,0 0,5.373 0,12 C0,18.628 5.372,24 12,24 C13.471,24 14.878,23.726 16.181,23.242 C17.481,23.724 18.88,24 20.347,24 C26.975,24 32.347,18.628 32.347,12 C32.347,5.373 26.975,0 20.347,0 Z\"/></svg></a>\n\t\t<small class=\"share-link-info\">The link has been copied!</small> -->\n\t</div>\n\t<input type=\"text\" value=\"https://blog.n8n.io/database-activity-monitoring/\" id=\"copy-link\" aria-label=\"Copy link input\">\n</div>",
  "readme": "Database activity monitoring (DAM) is increasingly valued in organizations that work with data, as it helps ensure that mission-critical processes run optimally and issues are detected on time.\n\nThe global DAM software market is projected to grow [by 15% by 2029](https://www.fortunebusinessinsights.com/database-monitoring-software-market-106413?ref=blog.n8n.io), with DAM tools looking to [leverage machine learning](https://www.smartdatacollective.com/database-activity-monitoring-security-investment-that-pays-off/?ref=blog.n8n.io) in their solutions. These trends are fueled largely by a sharper focus on data privacy regulations and an increased risk of cyber-attacks. In this context, DAM is a worthwhile investment.\n\nIn this article, you'll learn about database activity monitoring: what it is, how it works, why it's important, and what to monitor in your database.\n\nMoreover, you'll learn how to build an n8n workflow that automatically [monitors sensor activity data in a Postgres database and sends SMS via Twilio ](https://n8n.io/workflows/357-send-sms-alerts-based-on-database-queries-twilio-and-postgres/?ref=blog.n8n.io)when it detects outliers.\n\n#### Table of contents\n\nWhat does database activity monitoring mean?  \nWhy is database activity monitoring important?  \nWhat should be monitored in a database?  \nHow do you monitor a database?  \nTools for database activity monitoring  \nn8n workflow for database activity monitoring  \n    Prerequisites for building the workflow  \n    Workflow 1 - Generate data and insert it into a database  \n    Workflow 2 - Query a database and send SMS alerts  \nWhat's next?\n\n## What does database activity monitoring mean?\n\n**Database activity monitoring (DAM) is the process of observing activities of a database and reporting suspicious activity.**[Gartner defines DAM](https://www.gartner.com/en/information-technology/glossary/database-activity-monitoring-dam?ref=blog.n8n.io) as \"a suite of tools that can be used to support the ability to identify and report on fraudulent, illegal or other undesirable behavior, with minimal impact on user operations and productivity\".\n\nDAM tools (or workflows) can track user actions and changes made to a database continuously and in real-time, and then send notifications or alerts to a specified channel or person. Thus, DAM is a way of ensuring compliance in data processing, strengthening database security, and offering more visibility into database activities.\n\n## Why is database activity monitoring important?\n\nEssentially, database activity monitoring:\n\n  * Increases productivity and efficiency in the responsible team.\n  * Strengthens database security, along with data privacy and compliance.\n  * Helps you improve and optimize the performance of your database.\n  * Offers more insight into database performance and health metrics.\n\n\n\nEspecially in the context of remote work, which involves using personal devices, home connections, and maybe even unverified/insecure networks, [DAM is more important than ever](https://securityintelligence.com/posts/managed-data-activity-monitoring-dam-is-more-important-than-ever/?ref=blog.n8n.io).\n\n## **What should be monitored in a database?**\n\n**The most important issues you should monitor in a database boil down to database performance and user activity**. Specifically, these can be:\n\n  * **Suspicious user activity** : Users with admin rights (for example, database administrators or system administrators) can abuse their privileges to access sensitive data or compromise the database. Abnormal database activity can also point to bad actors inside or outside of an organization who attempt data breaches.\n  * **Database changes** : Whether intentional or accidental, changes to a database (for example, schema updates) can impact the performance, and it's important to review them on time.\n  * **Query performance** : Slow or overly complicated queries can take a long time to execute, thus decreasing performance.\n  * **Failures and errors** : System outages, user errors (for example, if a user accidentally deletes a row in a table), or failed queries are just some examples of situations that can (severely) impact the data and performance of a database.\n\n\n\n## **How do you monitor a database?**\n\nYou can monitor a database by looking into its [**transaction logs**](https://datatechnologytoday.wordpress.com/2014/02/10/the-log-is-the-database/?ref=blog.n8n.io#:~:text=The%20database%20log%2C%20sometimes%20referred,which%20changes%20to%20the%20database.)**,** using **DAM tools** , or setting up **workflow automations** for specific issues you want to keep an eye on.\n\nThe process of monitoring database activity usually consists of three main steps:\n\n  1. Decide what you want to monitor in the database.\n  2. Set up the tool/workflow for monitoring the database.\n  3. Define the follow-up action to take when an issue is detected in the database.\n\n\n\n## **Tools for database activity monitoring**  \n\n\nNowadays, many established and new companies are offering a variety of DAM tools and solutions, tailored to the needs of customers across industries.\n\nHere are **10 open-source and paid tools for DAM** :\n\n  * [**DataDog**](https://www.datadoghq.com/?ref=blog.n8n.io) is an enterprise observability service that provides monitoring for databases through a data analytics platform.\n  * [**Dynatrace**](https://www.dynatrace.com/?ref=blog.n8n.io) is a software intelligence platform that provides database monitoring services based on artificial intelligence and automation.\n  * [**Icinga**](https://icinga.com/?ref=blog.n8n.io) is an open-source computer system and network monitoring application that covers all aspects of monitoring, including database functionality and alerting.\n  * [**ManageEngine**](https://www.manageengine.com/products/eventlog/database-activity-monitoring.html?ref=blog.n8n.io) offers enterprise IT management software, including monitoring for both SQL and NoSQL databases.\n  * [**NewRelic**](https://newrelic.com/?ref=blog.n8n.io) offers cloud-based software for website and application monitoring.\n  * [**Prometheus**](https://prometheus.io/?ref=blog.n8n.io) is an open-source monitoring and alerting tool that allows capturing time-series data as metrics.\n  * [**Sensu**](https://sensu.io/?ref=blog.n8n.io) is an open source tool that delivers monitoring as code on any cloud.\n  * [**SigNoz**](https://signoz.io/?ref=blog.n8n.io) is an open-source tool for monitoring the entire software system, including the performance of database calls.\n  * [**Site24x7**](https://www.site24x7.com/?ref=blog.n8n.io) offers both free and paid monitoring services for the entire IT environment.\n  * [**SolarWinds**](https://www.solarwinds.com/?ref=blog.n8n.io) offers performance and availability monitoring for websites, applications, and servers, including Database Performance Monitoring.\n\n\n\n**Another option is to use n8n for building your own custom database monitoring workflow.** This way, you can take DAM one step further and send alerts to different channels, route them based on conditional logic, and integrate other popular apps or services, for example for [DevSecOps use cases](https://blog.n8n.io/devsecops-tools/).\n\n## **n8n workflow for database activity monitoring**\n\nNow that you know the basics of database activity monitoring, let's build a workflow that automatically monitors a Postgres database and sends an alert about outlier values using [n8n](https://n8n.io/?ref=blog.n8n.io).\n\nFor this use case, we'll generate, store, and monitor sensor data (like humidity, temperature, pressure) in [a Postgres database](https://n8n.io/integrations/postgres/?ref=blog.n8n.io).\n\nThis database activity monitoring automation use case consists of two workflows:\n\n  1. [Workflow 1](https://n8n.io/workflows/356-generate-and-insert-data-into-a-postgres-database/?ref=blog.n8n.io) generates data and creates a database record every minute. This is a way to simulate sensor readings being ingested by a database.\n  2. [Workflow 2](https://n8n.io/workflows/357-send-sms-alerts-based-on-database-queries-twilio-and-postgres/?ref=blog.n8n.io) checks for the threshold values every minute and, if a value crosses the specified threshold, it triggers an alert with an SMS, and updates the value in the database.\n\n\n\n### **Prerequisites for building the workflow**\n\n  * n8n set up. The easiest way is to [download the desktop app](https://docs.n8n.io/hosting/installation/desktop-app/?ref=blog.n8n.io), but you can also [sign up for n8n cloud](https://n8n.io/cloud/?ref=blog.n8n.io) or [self-host n8n](https://docs.n8n.io/hosting/installation/docker/?ref=blog.n8n.io).\n  * PostgreSQL set up and [credentials](https://docs.n8n.io/integrations/credentials/postgres/?ref=blog.n8n.io). You can create the database for this workflow with the following SQL statement: CREATE TABLE n8n (id SERIAL, sensor_id VARCHAR, value INT, time_stamp TIMESTAMP, notification BOOLEAN);\n  * Basic knowledge of SQL. This is helpful for knowing how to create a table and query the database.\n\n\n\n### **Workflow 1 - Generate data and insert it into a database**\n\nThis workflow builds the initial setup for automatic database activity monitoring. It generates sensor data and inserts the values into a Postgres database.\n\n![Workflow for generating data and inserting it into a Postgres database](https://blog.n8n.io/content/images/2022/06/dbmonitoring_workflow1.png)Workflow for generating data and inserting it into a Postgres database\n\nThe workflow consists of three nodes:\n\n  1. [Cron node](https://docs.n8n.io/integrations/core-nodes/n8n-nodes-base.cron/?ref=blog.n8n.io) triggers the workflow at regular time intervals. The node has the following parameter:\n\n\n  * Mode: Every Minute\n\n\n\n2\\. [Function node](https://docs.n8n.io/integrations/core-nodes/n8n-nodes-base.cron/?ref=blog.n8n.io) generates sensor data (sensor id (preset), a randomly generated value, timestamp, and notification (preset as false)). In the JavaScript Code field, copy-paste the following code:\n    \n    \n    var today = new Date();\n    var date = today.getFullYear()+'-'+(today.getMonth()+1)+'-'+today.getDate();\n    var time = today.getHours() + \":\" + today.getMinutes() + \":\" + today.getSeconds();\n    var dateTime = date+' '+time;\n    items[0].json.sensor_id = 'humidity01';\n    items[0].json.value = Math.ceil(Math.random()*100);\n    items[0].json.time_stamp = dateTime;\n    items[0].json.notification = false;\n    return items;\n    \n    \n\n3\\. [Postgres node](https://docs.n8n.io/integrations/nodes/n8n-nodes-base.postgres/?ref=blog.n8n.io) inserts the data into a Postgres database. The node has the following parameters:\n\n  * Operation: Insert\n  * Schema: public\n  * Table: n8n\n  * Columns: sensor_id,value,time_stamp,notification\n  * Return Fields: *\n\n\n\nDon’t forget to save and activate the workflow before moving on to the next workflow. Once you have done that, every minute a new record will be inserted into the database.\n\n### **Workflow 2 - Query a database and send SMS alerts**\n\nThis workflow builds the actual automation for database activity monitoring and alerting. It queries the Postgres database at regular time intervals for threshold values and, if a value crosses the specified threshold, it triggers an alert with an SMS, then updates the value in the database.\n\n![Workflow for querying a database and sending SMS alerts with Twilio](https://blog.n8n.io/content/images/2022/06/dbmonitoring_workflow2_twilio.png)Workflow for querying a database and sending SMS alerts with Twilio\n\nThe workflow consists of five nodes:\n\n  1. [Cron node](https://docs.n8n.io/integrations/core-nodes/n8n-nodes-base.cron/?ref=blog.n8n.io) triggers the workflow every minute. The node has the following parameter:\n\n\n  * Mode: Every Minute\n\n\n\n2\\. [Postgres node](https://docs.n8n.io/integrations/nodes/n8n-nodes-base.postgres/?ref=blog.n8n.io) queries the database for values over 70 and notifications that haven't been sent (false). The node has the following parameters:\n\n  * Operation: Execute Query\n  * Query: SELECT * FROM n8n WHERE value > 70 AND notification = false;\n\n\n\n3\\. [Twilio node](https://docs.n8n.io/integrations/nodes/n8n-nodes-base.twilio/?ref=blog.n8n.io) sends an SMS with information about the queried values. The node has the following parameters:\n\n  * Resource: SMS\n  * Operation: Send\n  * From: phone number of the sender\n  * To: phone number of the receiver\n  * Message > Add Expression: 🚨 The Sensor ({{$node[\"Postgres\"].json[\"sensor_id\"]}}) showed a reading of {{$node[\"Postgres\"].json[\"value\"]}}.\n\n![SMS alert in Twilio](https://blog.n8n.io/content/images/2022/06/dbmonitoring_twiliomsg.jpeg)SMS alert in Twilio\n\nYou might want to turn off the other workflow or device at some point, otherwise you might end up using all your Twilio free credits during the first run.\n\n4\\. [Set node](https://docs.n8n.io/integrations/core-nodes/n8n-nodes-base.set/?ref=blog.n8n.io) sets the value of the notification to true for all the corresponding ids. Once you make this update in the database with the help of the next node, the SMS alerts will not go through twice for any given record. The node has the following parameters:\n\n  * Keep Only Set: toggle to true\n  * Add Value > Number:\n  * Name: id\n  * Value > Add Expression: {{$node[\"Postgres2\"].json[\"id\"]}}\n  * Add Value > Boolean:\n  * Name: notification\n  * Value: toggle to true\n\n\n\n5\\. [Postgres node](https://docs.n8n.io/integrations/nodes/n8n-nodes-base.postgres/?ref=blog.n8n.io) updates the information in the database based on the id. The node has the following parameters:\n\n  * Operation: Update\n  * Schema: public\n  * Table: n8n\n  * Update Key: id\n  * Columns: notification\n  * Return Fields: *\n\n\n\nAnd that was it! Now you have two workflows that automatically monitor activity in your Postgres database and send you SMS alerts when values exceed a specific threshold.\n\n## **What's next?**\n\nIn this post, you’ve learned the basics of database activity monitoring and saw how to build a workflow that automatically monitors a Postgres database and sends SMS alerts. Go ahead and[ try n8n for free](https://n8n.io/pricing/?ref=blog.n8n.io) and start building your custom database activity monitoring workflow!\n\nHere's what you can do next:\n\n  * Read more tutorials about use cases related to databases and security, for example [How to manage database backups](https://blog.n8n.io/workflow-for-cratedb-backup-management/) or [How to automate an incident response playbook](https://blog.n8n.io/automated-incident-response-workflow/).\n  * Check out the [workflow page](https://n8n.io/workflows/?ref=blog.n8n.io) for more automation ideas.\n  * Join the [community forum](https://community.n8n.io/?ref=blog.n8n.io) and follow us on [Twitter](https://twitter.com/n8n_io?ref=blog.n8n.io).  \n\n\n\n\n## Subscribe to n8n newsletter\n\nGet the best, coolest, and latest in automation and low-code delivered to your inbox each week. \n\nSomething went wrong. Please try again later.\n\nSubscribed!\n\nSubscribe\n\n[](https://twitter.com/intent/tweet?text=Database%20activity%20monitoring%3A%20How%20to%20automatically%20monitor%20and%20set%20alerts%20for%20a%20database&url=https://blog.n8n.io/database-activity-monitoring/) [](https://www.facebook.com/sharer/sharer.php?u=https://blog.n8n.io/database-activity-monitoring/)\n",
  "crawled_at": "2025-05-28T10:50:06.901679"
}